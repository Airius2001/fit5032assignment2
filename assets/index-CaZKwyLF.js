(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();/**
* @vue/shared v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function R5(t,e){const n=new Set(t.split(","));return r=>n.has(r)}const $s={},qy=[],Bh=()=>{},fq=()=>!1,lE=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),k5=t=>t.startsWith("onUpdate:"),vl=Object.assign,M5=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Aq=Object.prototype.hasOwnProperty,Oo=(t,e)=>Aq.call(t,e),li=Array.isArray,Wy=t=>K1(t)==="[object Map]",U_=t=>K1(t)==="[object Set]",wk=t=>K1(t)==="[object Date]",Pi=t=>typeof t=="function",ia=t=>typeof t=="string",hf=t=>typeof t=="symbol",ps=t=>t!==null&&typeof t=="object",JU=t=>(ps(t)||Pi(t))&&Pi(t.then)&&Pi(t.catch),eN=Object.prototype.toString,K1=t=>eN.call(t),pq=t=>K1(t).slice(8,-1),tN=t=>K1(t)==="[object Object]",O5=t=>ia(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Pv=R5(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cE=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},mq=/-(\w)/g,Ad=cE(t=>t.replace(mq,(e,n)=>n?n.toUpperCase():"")),gq=/\B([A-Z])/g,cm=cE(t=>t.replace(gq,"-$1").toLowerCase()),uE=cE(t=>t.charAt(0).toUpperCase()+t.slice(1)),wx=cE(t=>t?`on${uE(t)}`:""),Wp=(t,e)=>!Object.is(t,e),xx=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},nN=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},oC=t=>{const e=parseFloat(t);return isNaN(e)?t:e},yq=t=>{const e=ia(t)?Number(t):NaN;return isNaN(e)?t:e};let xk;const rN=()=>xk||(xk=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function fc(t){if(li(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],o=ia(r)?wq(r):fc(r);if(o)for(const l in o)e[l]=o[l]}return e}else if(ia(t)||ps(t))return t}const _q=/;(?![^(]*\))/g,vq=/:([^]+)/,bq=/\/\*[^]*?\*\//g;function wq(t){const e={};return t.replace(bq,"").split(_q).forEach(n=>{if(n){const r=n.split(vq);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function On(t){let e="";if(ia(t))e=t;else if(li(t))for(let n=0;n<t.length;n++){const r=On(t[n]);r&&(e+=r+" ")}else if(ps(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function Ks(t){if(!t)return null;let{class:e,style:n}=t;return e&&!ia(e)&&(t.class=On(e)),n&&(t.style=fc(n)),t}const xq="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Cq=R5(xq);function iN(t){return!!t||t===""}function Eq(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=pg(t[r],e[r]);return n}function pg(t,e){if(t===e)return!0;let n=wk(t),r=wk(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=hf(t),r=hf(e),n||r)return t===e;if(n=li(t),r=li(e),n||r)return n&&r?Eq(t,e):!1;if(n=ps(t),r=ps(e),n||r){if(!n||!r)return!1;const o=Object.keys(t).length,l=Object.keys(e).length;if(o!==l)return!1;for(const h in t){const p=t.hasOwnProperty(h),i=e.hasOwnProperty(h);if(p&&!i||!p&&i||!pg(t[h],e[h]))return!1}}return String(t)===String(e)}function D5(t,e){return t.findIndex(n=>pg(n,e))}const oN=t=>!!(t&&t.__v_isRef===!0),Ar=t=>ia(t)?t:t==null?"":li(t)||ps(t)&&(t.toString===eN||!Pi(t.toString))?oN(t)?Ar(t.value):JSON.stringify(t,sN,2):String(t),sN=(t,e)=>oN(e)?sN(t,e.value):Wy(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,o],l)=>(n[KS(r,l)+" =>"]=o,n),{})}:U_(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>KS(n))}:hf(e)?KS(e):ps(e)&&!li(e)&&!tN(e)?String(e):e,KS=(t,e="")=>{var n;return hf(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Nu;class Bq{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Nu,!e&&Nu&&(this.index=(Nu.scopes||(Nu.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=Nu;try{return Nu=this,e()}finally{Nu=n}}}on(){Nu=this}off(){Nu=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0,this._active=!1}}}function Sq(t,e=Nu){e&&e.active&&e.effects.push(t)}function aN(){return Nu}function Tq(t){Nu&&Nu.cleanups.push(t)}let sg;class U5{constructor(e,n,r,o){this.fn=e,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,Sq(this,o)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,um();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed&&(Iq(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),hm()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=Vp,n=sg;try{return Vp=!0,sg=this,this._runnings++,Ck(this),this.fn()}finally{Ek(this),this._runnings--,sg=n,Vp=e}}stop(){this.active&&(Ck(this),Ek(this),this.onStop&&this.onStop(),this.active=!1)}}function Iq(t){return t.value}function Ck(t){t._trackId++,t._depsLength=0}function Ek(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)lN(t.deps[e],t);t.deps.length=t._depsLength}}function lN(t,e){const n=t.get(e);n!==void 0&&e._trackId!==n&&(t.delete(e),t.size===0&&t.cleanup())}let Vp=!0,BT=0;const cN=[];function um(){cN.push(Vp),Vp=!1}function hm(){const t=cN.pop();Vp=t===void 0?!0:t}function N5(){BT++}function z5(){for(BT--;!BT&&ST.length;)ST.shift()()}function uN(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const r=t.deps[t._depsLength];r!==e?(r&&lN(r,t),t.deps[t._depsLength++]=e):t._depsLength++}}const ST=[];function hN(t,e,n){N5();for(const r of t.keys()){let o;r._dirtyLevel<e&&(o??(o=t.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=e),r._shouldSchedule&&(o??(o=t.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&ST.push(r.scheduler)))}z5()}const dN=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},sC=new WeakMap,ag=Symbol(""),TT=Symbol("");function Au(t,e,n){if(Vp&&sg){let r=sC.get(t);r||sC.set(t,r=new Map);let o=r.get(n);o||r.set(n,o=dN(()=>r.delete(n))),uN(sg,o)}}function cA(t,e,n,r,o,l){const h=sC.get(t);if(!h)return;let p=[];if(e==="clear")p=[...h.values()];else if(n==="length"&&li(t)){const i=Number(r);h.forEach((b,E)=>{(E==="length"||!hf(E)&&E>=i)&&p.push(b)})}else switch(n!==void 0&&p.push(h.get(n)),e){case"add":li(t)?O5(n)&&p.push(h.get("length")):(p.push(h.get(ag)),Wy(t)&&p.push(h.get(TT)));break;case"delete":li(t)||(p.push(h.get(ag)),Wy(t)&&p.push(h.get(TT)));break;case"set":Wy(t)&&p.push(h.get(ag));break}N5();for(const i of p)i&&hN(i,4);z5()}function Pq(t,e){const n=sC.get(t);return n&&n.get(e)}const Lq=R5("__proto__,__v_isRef,__isVue"),fN=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(hf)),Bk=Fq();function Fq(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=Ho(this);for(let l=0,h=this.length;l<h;l++)Au(r,"get",l+"");const o=r[e](...n);return o===-1||o===!1?r[e](...n.map(Ho)):o}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){um(),N5();const r=Ho(this)[e].apply(this,n);return z5(),hm(),r}}),t}function Rq(t){hf(t)||(t=String(t));const e=Ho(this);return Au(e,"has",t),e.hasOwnProperty(t)}class AN{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){const o=this._isReadonly,l=this._isShallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return l;if(n==="__v_raw")return r===(o?l?Gq:yN:l?gN:mN).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const h=li(e);if(!o){if(h&&Oo(Bk,n))return Reflect.get(Bk,n,r);if(n==="hasOwnProperty")return Rq}const p=Reflect.get(e,n,r);return(hf(n)?fN.has(n):Lq(n))||(o||Au(e,"get",n),l)?p:ga(p)?h&&O5(n)?p:p.value:ps(p)?o?h_(p):pu(p):p}}class pN extends AN{constructor(e=!1){super(!1,e)}set(e,n,r,o){let l=e[n];if(!this._isShallow){const i=mg(l);if(!d_(r)&&!mg(r)&&(l=Ho(l),r=Ho(r)),!li(e)&&ga(l)&&!ga(r))return i?!1:(l.value=r,!0)}const h=li(e)&&O5(n)?Number(n)<e.length:Oo(e,n),p=Reflect.set(e,n,r,o);return e===Ho(o)&&(h?Wp(r,l)&&cA(e,"set",n,r):cA(e,"add",n,r)),p}deleteProperty(e,n){const r=Oo(e,n);e[n];const o=Reflect.deleteProperty(e,n);return o&&r&&cA(e,"delete",n,void 0),o}has(e,n){const r=Reflect.has(e,n);return(!hf(n)||!fN.has(n))&&Au(e,"has",n),r}ownKeys(e){return Au(e,"iterate",li(e)?"length":ag),Reflect.ownKeys(e)}}class kq extends AN{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Mq=new pN,Oq=new kq,Dq=new pN(!0);const V5=t=>t,hE=t=>Reflect.getPrototypeOf(t);function vw(t,e,n=!1,r=!1){t=t.__v_raw;const o=Ho(t),l=Ho(e);n||(Wp(e,l)&&Au(o,"get",e),Au(o,"get",l));const{has:h}=hE(o),p=r?V5:n?j5:Jv;if(h.call(o,e))return p(t.get(e));if(h.call(o,l))return p(t.get(l));t!==o&&t.get(e)}function bw(t,e=!1){const n=this.__v_raw,r=Ho(n),o=Ho(t);return e||(Wp(t,o)&&Au(r,"has",t),Au(r,"has",o)),t===o?n.has(t):n.has(t)||n.has(o)}function ww(t,e=!1){return t=t.__v_raw,!e&&Au(Ho(t),"iterate",ag),Reflect.get(t,"size",t)}function Sk(t,e=!1){!e&&!d_(t)&&!mg(t)&&(t=Ho(t));const n=Ho(this);return hE(n).has.call(n,t)||(n.add(t),cA(n,"add",t,t)),this}function Tk(t,e,n=!1){!n&&!d_(e)&&!mg(e)&&(e=Ho(e));const r=Ho(this),{has:o,get:l}=hE(r);let h=o.call(r,t);h||(t=Ho(t),h=o.call(r,t));const p=l.call(r,t);return r.set(t,e),h?Wp(e,p)&&cA(r,"set",t,e):cA(r,"add",t,e),this}function Ik(t){const e=Ho(this),{has:n,get:r}=hE(e);let o=n.call(e,t);o||(t=Ho(t),o=n.call(e,t)),r&&r.call(e,t);const l=e.delete(t);return o&&cA(e,"delete",t,void 0),l}function Pk(){const t=Ho(this),e=t.size!==0,n=t.clear();return e&&cA(t,"clear",void 0,void 0),n}function xw(t,e){return function(r,o){const l=this,h=l.__v_raw,p=Ho(h),i=e?V5:t?j5:Jv;return!t&&Au(p,"iterate",ag),h.forEach((b,E)=>r.call(o,i(b),i(E),l))}}function Cw(t,e,n){return function(...r){const o=this.__v_raw,l=Ho(o),h=Wy(l),p=t==="entries"||t===Symbol.iterator&&h,i=t==="keys"&&h,b=o[t](...r),E=n?V5:e?j5:Jv;return!e&&Au(l,"iterate",i?TT:ag),{next(){const{value:I,done:O}=b.next();return O?{value:I,done:O}:{value:p?[E(I[0]),E(I[1])]:E(I),done:O}},[Symbol.iterator](){return this}}}}function ap(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Uq(){const t={get(l){return vw(this,l)},get size(){return ww(this)},has:bw,add:Sk,set:Tk,delete:Ik,clear:Pk,forEach:xw(!1,!1)},e={get(l){return vw(this,l,!1,!0)},get size(){return ww(this)},has:bw,add(l){return Sk.call(this,l,!0)},set(l,h){return Tk.call(this,l,h,!0)},delete:Ik,clear:Pk,forEach:xw(!1,!0)},n={get(l){return vw(this,l,!0)},get size(){return ww(this,!0)},has(l){return bw.call(this,l,!0)},add:ap("add"),set:ap("set"),delete:ap("delete"),clear:ap("clear"),forEach:xw(!0,!1)},r={get(l){return vw(this,l,!0,!0)},get size(){return ww(this,!0)},has(l){return bw.call(this,l,!0)},add:ap("add"),set:ap("set"),delete:ap("delete"),clear:ap("clear"),forEach:xw(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(l=>{t[l]=Cw(l,!1,!1),n[l]=Cw(l,!0,!1),e[l]=Cw(l,!1,!0),r[l]=Cw(l,!0,!0)}),[t,n,e,r]}const[Nq,zq,Vq,Qq]=Uq();function Q5(t,e){const n=e?t?Qq:Vq:t?zq:Nq;return(r,o,l)=>o==="__v_isReactive"?!t:o==="__v_isReadonly"?t:o==="__v_raw"?r:Reflect.get(Oo(n,o)&&o in r?n:r,o,l)}const Hq={get:Q5(!1,!1)},jq={get:Q5(!1,!0)},$q={get:Q5(!0,!1)};const mN=new WeakMap,gN=new WeakMap,yN=new WeakMap,Gq=new WeakMap;function Kq(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function qq(t){return t.__v_skip||!Object.isExtensible(t)?0:Kq(pq(t))}function pu(t){return mg(t)?t:H5(t,!1,Mq,Hq,mN)}function _N(t){return H5(t,!1,Dq,jq,gN)}function h_(t){return H5(t,!0,Oq,$q,yN)}function H5(t,e,n,r,o){if(!ps(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const l=o.get(t);if(l)return l;const h=qq(t);if(h===0)return t;const p=new Proxy(t,h===2?r:n);return o.set(t,p),p}function Xy(t){return mg(t)?Xy(t.__v_raw):!!(t&&t.__v_isReactive)}function mg(t){return!!(t&&t.__v_isReadonly)}function d_(t){return!!(t&&t.__v_isShallow)}function vN(t){return t?!!t.__v_raw:!1}function Ho(t){const e=t&&t.__v_raw;return e?Ho(e):t}function Wq(t){return Object.isExtensible(t)&&nN(t,"__v_skip",!0),t}const Jv=t=>ps(t)?pu(t):t,j5=t=>ps(t)?h_(t):t;class bN{constructor(e,n,r,o){this.getter=e,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new U5(()=>e(this._value),()=>Cx(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=r}get value(){const e=Ho(this);return(!e._cacheable||e.effect.dirty)&&Wp(e._value,e._value=e.effect.run())&&Cx(e,4),wN(e),e.effect._dirtyLevel>=2&&Cx(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function Xq(t,e,n=!1){let r,o;const l=Pi(t);return l?(r=t,o=Bh):(r=t.get,o=t.set),new bN(r,o,l||!o,n)}function wN(t){var e;Vp&&sg&&(t=Ho(t),uN(sg,(e=t.dep)!=null?e:t.dep=dN(()=>t.dep=void 0,t instanceof bN?t:void 0)))}function Cx(t,e=4,n,r){t=Ho(t);const o=t.dep;o&&hN(o,e)}function ga(t){return!!(t&&t.__v_isRef===!0)}function yr(t){return CN(t,!1)}function xN(t){return CN(t,!0)}function CN(t,e){return ga(t)?t:new Zq(t,e)}class Zq{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Ho(e),this._value=n?e:Jv(e)}get value(){return wN(this),this._value}set value(e){const n=this.__v_isShallow||d_(e)||mg(e);e=n?e:Ho(e),Wp(e,this._rawValue)&&(this._rawValue,this._rawValue=e,this._value=n?e:Jv(e),Cx(this,4))}}function tt(t){return ga(t)?t.value:t}const Yq={get:(t,e,n)=>tt(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const o=t[e];return ga(o)&&!ga(n)?(o.value=n,!0):Reflect.set(t,e,n,r)}};function EN(t){return Xy(t)?t:new Proxy(t,Yq)}class Jq{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Pq(Ho(this._object),this._key)}}class eW{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function st(t,e,n){return ga(t)?t:Pi(t)?new eW(t):ps(t)&&arguments.length>1?tW(t,e,n):yr(t)}function tW(t,e,n){const r=t[e];return ga(r)?r:new Jq(t,e,n)}/**
* @vue/runtime-core v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Qp(t,e,n,r){try{return r?t(...r):t()}catch(o){dE(o,e,n)}}function Ph(t,e,n,r){if(Pi(t)){const o=Qp(t,e,n,r);return o&&JU(o)&&o.catch(l=>{dE(l,e,n)}),o}if(li(t)){const o=[];for(let l=0;l<t.length;l++)o.push(Ph(t[l],e,n,r));return o}}function dE(t,e,n,r=!0){const o=e?e.vnode:null;if(e){let l=e.parent;const h=e.proxy,p=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const b=l.ec;if(b){for(let E=0;E<b.length;E++)if(b[E](t,h,p)===!1)return}l=l.parent}const i=e.appContext.config.errorHandler;if(i){um(),Qp(i,null,10,[t,h,p]),hm();return}}nW(t,n,o,r)}function nW(t,e,n,r=!0){console.error(t)}let e1=!1,IT=!1;const hc=[];let Yd=0;const Zy=[];let vp=null,qm=0;const BN=Promise.resolve();let $5=null;function Lh(t){const e=$5||BN;return t?e.then(this?t.bind(this):t):e}function rW(t){let e=Yd+1,n=hc.length;for(;e<n;){const r=e+n>>>1,o=hc[r],l=t1(o);l<t||l===t&&o.pre?e=r+1:n=r}return e}function G5(t){(!hc.length||!hc.includes(t,e1&&t.allowRecurse?Yd+1:Yd))&&(t.id==null?hc.push(t):hc.splice(rW(t.id),0,t),SN())}function SN(){!e1&&!IT&&(IT=!0,$5=BN.then(IN))}function iW(t){const e=hc.indexOf(t);e>Yd&&hc.splice(e,1)}function oW(t){li(t)?Zy.push(...t):(!vp||!vp.includes(t,t.allowRecurse?qm+1:qm))&&Zy.push(t),SN()}function Lk(t,e,n=e1?Yd+1:0){for(;n<hc.length;n++){const r=hc[n];if(r&&r.pre){if(t&&r.id!==t.uid)continue;hc.splice(n,1),n--,r()}}}function TN(t){if(Zy.length){const e=[...new Set(Zy)].sort((n,r)=>t1(n)-t1(r));if(Zy.length=0,vp){vp.push(...e);return}for(vp=e,qm=0;qm<vp.length;qm++){const n=vp[qm];n.active!==!1&&n()}vp=null,qm=0}}const t1=t=>t.id==null?1/0:t.id,sW=(t,e)=>{const n=t1(t)-t1(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function IN(t){IT=!1,e1=!0,hc.sort(sW);try{for(Yd=0;Yd<hc.length;Yd++){const e=hc[Yd];e&&e.active!==!1&&Qp(e,e.i,e.i?15:14)}}finally{Yd=0,hc.length=0,TN(),e1=!1,$5=null,(hc.length||Zy.length)&&IN()}}let _l=null,fE=null;function aC(t){const e=_l;return _l=t,fE=t&&t.type.__scopeId||null,e}function Sg(t){fE=t}function Tg(){fE=null}function Kn(t,e=_l,n){if(!e||t._n)return t;const r=(...o)=>{r._d&&Hk(-1);const l=aC(e);let h;try{h=t(...o)}finally{aC(l),r._d&&Hk(1)}return h};return r._n=!0,r._c=!0,r._d=!0,r}function Fo(t,e){if(_l===null)return t;const n=bE(_l),r=t.dirs||(t.dirs=[]);for(let o=0;o<e.length;o++){let[l,h,p,i=$s]=e[o];l&&(Pi(l)&&(l={mounted:l,updated:l}),l.deep&&Bp(h),r.push({dir:l,instance:n,value:h,oldValue:void 0,arg:p,modifiers:i}))}return t}function Um(t,e,n,r){const o=t.dirs,l=e&&e.dirs;for(let h=0;h<o.length;h++){const p=o[h];l&&(p.oldValue=l[h].value);let i=p.dir[r];i&&(um(),Ph(i,n,8,[t.el,p,t,e]),hm())}}const bp=Symbol("_leaveCb"),Ew=Symbol("_enterCb");function aW(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ws(()=>{t.isMounted=!0}),q1(()=>{t.isUnmounting=!0}),t}const _h=[Function,Array],PN={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:_h,onEnter:_h,onAfterEnter:_h,onEnterCancelled:_h,onBeforeLeave:_h,onLeave:_h,onAfterLeave:_h,onLeaveCancelled:_h,onBeforeAppear:_h,onAppear:_h,onAfterAppear:_h,onAppearCancelled:_h},LN=t=>{const e=t.subTree;return e.component?LN(e.component):e},lW={name:"BaseTransition",props:PN,setup(t,{slots:e}){const n=_E(),r=aW();return()=>{const o=e.default&&RN(e.default(),!0);if(!o||!o.length)return;let l=o[0];if(o.length>1){for(const O of o)if(O.type!==Uc){l=O;break}}const h=Ho(t),{mode:p}=h;if(r.isLeaving)return qS(l);const i=Fk(l);if(!i)return qS(l);let b=PT(i,h,r,n,O=>b=O);lC(i,b);const E=n.subTree,I=E&&Fk(E);if(I&&I.type!==Uc&&!Wm(i,I)&&LN(n).type!==Uc){const O=PT(I,h,r,n);if(lC(I,O),p==="out-in"&&i.type!==Uc)return r.isLeaving=!0,O.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&(n.effect.dirty=!0,n.update())},qS(l);p==="in-out"&&i.type!==Uc&&(O.delayLeave=(M,G,q)=>{const Z=FN(r,I);Z[String(I.key)]=I,M[bp]=()=>{G(),M[bp]=void 0,delete b.delayedLeave},b.delayedLeave=q})}return l}}},cW=lW;function FN(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function PT(t,e,n,r,o){const{appear:l,mode:h,persisted:p=!1,onBeforeEnter:i,onEnter:b,onAfterEnter:E,onEnterCancelled:I,onBeforeLeave:O,onLeave:M,onAfterLeave:G,onLeaveCancelled:q,onBeforeAppear:Z,onAppear:Y,onAfterAppear:te,onAppearCancelled:be}=e,Pe=String(t.key),Se=FN(n,t),Ie=(ue,ye)=>{ue&&Ph(ue,r,9,ye)},Ae=(ue,ye)=>{const se=ye[1];Ie(ue,ye),li(ue)?ue.every(le=>le.length<=1)&&se():ue.length<=1&&se()},ne={mode:h,persisted:p,beforeEnter(ue){let ye=i;if(!n.isMounted)if(l)ye=Z||i;else return;ue[bp]&&ue[bp](!0);const se=Se[Pe];se&&Wm(t,se)&&se.el[bp]&&se.el[bp](),Ie(ye,[ue])},enter(ue){let ye=b,se=E,le=I;if(!n.isMounted)if(l)ye=Y||b,se=te||E,le=be||I;else return;let ge=!1;const lt=ue[Ew]=Ot=>{ge||(ge=!0,Ot?Ie(le,[ue]):Ie(se,[ue]),ne.delayedLeave&&ne.delayedLeave(),ue[Ew]=void 0)};ye?Ae(ye,[ue,lt]):lt()},leave(ue,ye){const se=String(t.key);if(ue[Ew]&&ue[Ew](!0),n.isUnmounting)return ye();Ie(O,[ue]);let le=!1;const ge=ue[bp]=lt=>{le||(le=!0,ye(),lt?Ie(q,[ue]):Ie(G,[ue]),ue[bp]=void 0,Se[se]===t&&delete Se[se])};Se[se]=t,M?Ae(M,[ue,ge]):ge()},clone(ue){const ye=PT(ue,e,n,r,o);return o&&o(ye),ye}};return ne}function qS(t){if(AE(t))return t=Xp(t),t.children=null,t}function Fk(t){if(!AE(t))return t;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Pi(n.default))return n.default()}}function lC(t,e){t.shapeFlag&6&&t.component?lC(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function RN(t,e=!1,n){let r=[],o=0;for(let l=0;l<t.length;l++){let h=t[l];const p=n==null?h.key:String(n)+String(h.key!=null?h.key:l);h.type===_r?(h.patchFlag&128&&o++,r=r.concat(RN(h.children,e,p))):(e||h.type!==Uc)&&r.push(p!=null?Xp(h,{key:p}):h)}if(o>1)for(let l=0;l<r.length;l++)r[l].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function sr(t,e){return Pi(t)?vl({name:t.name},e,{setup:t}):t}const Lv=t=>!!t.type.__asyncLoader,AE=t=>t.type.__isKeepAlive;function pE(t,e){kN(t,"a",e)}function uW(t,e){kN(t,"da",e)}function kN(t,e,n=kl){const r=t.__wdc||(t.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return t()});if(mE(e,r,n),n){let o=n.parent;for(;o&&o.parent;)AE(o.parent.vnode)&&hW(r,e,n,o),o=o.parent}}function hW(t,e,n,r){const o=mE(e,t,r,!0);K5(()=>{M5(r[e],o)},n)}function mE(t,e,n=kl,r=!1){if(n){const o=n[t]||(n[t]=[]),l=e.__weh||(e.__weh=(...h)=>{um();const p=W1(n),i=Ph(e,n,t,h);return p(),hm(),i});return r?o.unshift(l):o.push(l),l}}const xA=t=>(e,n=kl)=>{(!vE||t==="sp")&&mE(t,(...r)=>e(...r),n)},dW=xA("bm"),ws=xA("m"),fW=xA("bu"),AW=xA("u"),q1=xA("bum"),K5=xA("um"),pW=xA("sp"),mW=xA("rtg"),gW=xA("rtc");function yW(t,e=kl){mE("ec",t,e)}const q5="components",_W="directives";function Nr(t,e){return W5(q5,t,!0,e)||t}const MN=Symbol.for("v-ndc");function mr(t){return ia(t)?W5(q5,t,!1)||t:t||MN}function CA(t){return W5(_W,t)}function W5(t,e,n=!0,r=!1){const o=_l||kl;if(o){const l=o.type;if(t===q5){const p=aX(l,!1);if(p&&(p===e||p===Ad(e)||p===uE(Ad(e))))return l}const h=Rk(o[t]||l[t],e)||Rk(o.appContext[t],e);return!h&&r?l:h}}function Rk(t,e){return t&&(t[e]||t[Ad(e)]||t[uE(Ad(e))])}function Li(t,e,n,r){let o;const l=n;if(li(t)||ia(t)){o=new Array(t.length);for(let h=0,p=t.length;h<p;h++)o[h]=e(t[h],h,void 0,l)}else if(typeof t=="number"){o=new Array(t);for(let h=0;h<t;h++)o[h]=e(h+1,h,void 0,l)}else if(ps(t))if(t[Symbol.iterator])o=Array.from(t,(h,p)=>e(h,p,void 0,l));else{const h=Object.keys(t);o=new Array(h.length);for(let p=0,i=h.length;p<i;p++){const b=h[p];o[p]=e(t[b],b,p,l)}}else o=[];return o}function gg(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(li(r))for(let o=0;o<r.length;o++)t[r[o].name]=r[o].fn;else r&&(t[r.name]=r.key?(...o)=>{const l=r.fn(...o);return l&&(l.key=r.key),l}:r.fn)}return t}function Xt(t,e,n={},r,o){if(_l.isCE||_l.parent&&Lv(_l.parent)&&_l.parent.isCE)return e!=="default"&&(n.name=e),Lr("slot",n,r&&r());let l=t[e];l&&l._c&&(l._d=!1),ve();const h=l&&ON(l(n)),p=hn(_r,{key:(n.key||h&&h.key||`_${e}`)+(!h&&r?"_fb":"")},h||(r?r():[]),h&&t._===1?64:-2);return!o&&p.scopeId&&(p.slotScopeIds=[p.scopeId+"-s"]),l&&l._c&&(l._d=!0),p}function ON(t){return t.some(e=>uC(e)?!(e.type===Uc||e.type===_r&&!ON(e.children)):!0)?t:null}function Bw(t,e){const n={};for(const r in t)n[/[A-Z]/.test(r)?`on:${r}`:wx(r)]=t[r];return n}const LT=t=>t?o8(t)?bE(t):LT(t.parent):null,Fv=vl(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>LT(t.parent),$root:t=>LT(t.root),$emit:t=>t.emit,$options:t=>X5(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,G5(t.update)}),$nextTick:t=>t.n||(t.n=Lh.bind(t.proxy)),$watch:t=>HW.bind(t)}),WS=(t,e)=>t!==$s&&!t.__isScriptSetup&&Oo(t,e),vW={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:o,props:l,accessCache:h,type:p,appContext:i}=t;let b;if(e[0]!=="$"){const M=h[e];if(M!==void 0)switch(M){case 1:return r[e];case 2:return o[e];case 4:return n[e];case 3:return l[e]}else{if(WS(r,e))return h[e]=1,r[e];if(o!==$s&&Oo(o,e))return h[e]=2,o[e];if((b=t.propsOptions[0])&&Oo(b,e))return h[e]=3,l[e];if(n!==$s&&Oo(n,e))return h[e]=4,n[e];FT&&(h[e]=0)}}const E=Fv[e];let I,O;if(E)return e==="$attrs"&&Au(t.attrs,"get",""),E(t);if((I=p.__cssModules)&&(I=I[e]))return I;if(n!==$s&&Oo(n,e))return h[e]=4,n[e];if(O=i.config.globalProperties,Oo(O,e))return O[e]},set({_:t},e,n){const{data:r,setupState:o,ctx:l}=t;return WS(o,e)?(o[e]=n,!0):r!==$s&&Oo(r,e)?(r[e]=n,!0):Oo(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(l[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:o,propsOptions:l}},h){let p;return!!n[h]||t!==$s&&Oo(t,h)||WS(e,h)||(p=l[0])&&Oo(p,h)||Oo(r,h)||Oo(Fv,h)||Oo(o.config.globalProperties,h)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Oo(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function mc(){return UN().slots}function DN(){return UN().attrs}function UN(){const t=_E();return t.setupContext||(t.setupContext=a8(t))}function kk(t){return li(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let FT=!0;function bW(t){const e=X5(t),n=t.proxy,r=t.ctx;FT=!1,e.beforeCreate&&Mk(e.beforeCreate,t,"bc");const{data:o,computed:l,methods:h,watch:p,provide:i,inject:b,created:E,beforeMount:I,mounted:O,beforeUpdate:M,updated:G,activated:q,deactivated:Z,beforeDestroy:Y,beforeUnmount:te,destroyed:be,unmounted:Pe,render:Se,renderTracked:Ie,renderTriggered:Ae,errorCaptured:ne,serverPrefetch:ue,expose:ye,inheritAttrs:se,components:le,directives:ge,filters:lt}=e;if(b&&wW(b,r,null),h)for(const Tt in h){const Mt=h[Tt];Pi(Mt)&&(r[Tt]=Mt.bind(n))}if(o){const Tt=o.call(n,n);ps(Tt)&&(t.data=pu(Tt))}if(FT=!0,l)for(const Tt in l){const Mt=l[Tt],on=Pi(Mt)?Mt.bind(n,n):Pi(Mt.get)?Mt.get.bind(n,n):Bh,Ut=!Pi(Mt)&&Pi(Mt.set)?Mt.set.bind(n):Bh,In=ft({get:on,set:Ut});Object.defineProperty(r,Tt,{enumerable:!0,configurable:!0,get:()=>In.value,set:Ee=>In.value=Ee})}if(p)for(const Tt in p)NN(p[Tt],r,n,Tt);if(i){const Tt=Pi(i)?i.call(n):i;Reflect.ownKeys(Tt).forEach(Mt=>{tf(Mt,Tt[Mt])})}E&&Mk(E,t,"c");function gt(Tt,Mt){li(Mt)?Mt.forEach(on=>Tt(on.bind(n))):Mt&&Tt(Mt.bind(n))}if(gt(dW,I),gt(ws,O),gt(fW,M),gt(AW,G),gt(pE,q),gt(uW,Z),gt(yW,ne),gt(gW,Ie),gt(mW,Ae),gt(q1,te),gt(K5,Pe),gt(pW,ue),li(ye))if(ye.length){const Tt=t.exposed||(t.exposed={});ye.forEach(Mt=>{Object.defineProperty(Tt,Mt,{get:()=>n[Mt],set:on=>n[Mt]=on})})}else t.exposed||(t.exposed={});Se&&t.render===Bh&&(t.render=Se),se!=null&&(t.inheritAttrs=se),le&&(t.components=le),ge&&(t.directives=ge)}function wW(t,e,n=Bh){li(t)&&(t=RT(t));for(const r in t){const o=t[r];let l;ps(o)?"default"in o?l=il(o.from||r,o.default,!0):l=il(o.from||r):l=il(o),ga(l)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>l.value,set:h=>l.value=h}):e[r]=l}}function Mk(t,e,n){Ph(li(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function NN(t,e,n,r){const o=r.includes(".")?t8(n,r):()=>n[r];if(ia(t)){const l=e[t];Pi(l)&&Do(o,l)}else if(Pi(t))Do(o,t.bind(n));else if(ps(t))if(li(t))t.forEach(l=>NN(l,e,n,r));else{const l=Pi(t.handler)?t.handler.bind(n):e[t.handler];Pi(l)&&Do(o,l,t)}}function X5(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:o,optionsCache:l,config:{optionMergeStrategies:h}}=t.appContext,p=l.get(e);let i;return p?i=p:!o.length&&!n&&!r?i=e:(i={},o.length&&o.forEach(b=>cC(i,b,h,!0)),cC(i,e,h)),ps(e)&&l.set(e,i),i}function cC(t,e,n,r=!1){const{mixins:o,extends:l}=e;l&&cC(t,l,n,!0),o&&o.forEach(h=>cC(t,h,n,!0));for(const h in e)if(!(r&&h==="expose")){const p=xW[h]||n&&n[h];t[h]=p?p(t[h],e[h]):e[h]}return t}const xW={data:Ok,props:Dk,emits:Dk,methods:hv,computed:hv,beforeCreate:Oc,created:Oc,beforeMount:Oc,mounted:Oc,beforeUpdate:Oc,updated:Oc,beforeDestroy:Oc,beforeUnmount:Oc,destroyed:Oc,unmounted:Oc,activated:Oc,deactivated:Oc,errorCaptured:Oc,serverPrefetch:Oc,components:hv,directives:hv,watch:EW,provide:Ok,inject:CW};function Ok(t,e){return e?t?function(){return vl(Pi(t)?t.call(this,this):t,Pi(e)?e.call(this,this):e)}:e:t}function CW(t,e){return hv(RT(t),RT(e))}function RT(t){if(li(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Oc(t,e){return t?[...new Set([].concat(t,e))]:e}function hv(t,e){return t?vl(Object.create(null),t,e):e}function Dk(t,e){return t?li(t)&&li(e)?[...new Set([...t,...e])]:vl(Object.create(null),kk(t),kk(e??{})):e}function EW(t,e){if(!t)return e;if(!e)return t;const n=vl(Object.create(null),t);for(const r in e)n[r]=Oc(t[r],e[r]);return n}function zN(){return{app:null,config:{isNativeTag:fq,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let BW=0;function SW(t,e){return function(r,o=null){Pi(r)||(r=vl({},r)),o!=null&&!ps(o)&&(o=null);const l=zN(),h=new WeakSet;let p=!1;const i=l.app={_uid:BW++,_component:r,_props:o,_container:null,_context:l,_instance:null,version:cX,get config(){return l.config},set config(b){},use(b,...E){return h.has(b)||(b&&Pi(b.install)?(h.add(b),b.install(i,...E)):Pi(b)&&(h.add(b),b(i,...E))),i},mixin(b){return l.mixins.includes(b)||l.mixins.push(b),i},component(b,E){return E?(l.components[b]=E,i):l.components[b]},directive(b,E){return E?(l.directives[b]=E,i):l.directives[b]},mount(b,E,I){if(!p){const O=Lr(r,o);return O.appContext=l,I===!0?I="svg":I===!1&&(I=void 0),E&&e?e(O,b):t(O,b,I),p=!0,i._container=b,b.__vue_app__=i,bE(O.component)}},unmount(){p&&(t(null,i._container),delete i._container.__vue_app__)},provide(b,E){return l.provides[b]=E,i},runWithContext(b){const E=Yy;Yy=i;try{return b()}finally{Yy=E}}};return i}}let Yy=null;function tf(t,e){if(kl){let n=kl.provides;const r=kl.parent&&kl.parent.provides;r===n&&(n=kl.provides=Object.create(r)),n[t]=e}}function il(t,e,n=!1){const r=kl||_l;if(r||Yy){const o=Yy?Yy._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(o&&t in o)return o[t];if(arguments.length>1)return n&&Pi(e)?e.call(r&&r.proxy):e}}const VN={},QN=()=>Object.create(VN),HN=t=>Object.getPrototypeOf(t)===VN;function TW(t,e,n,r=!1){const o={},l=QN();t.propsDefaults=Object.create(null),jN(t,e,o,l);for(const h in t.propsOptions[0])h in o||(o[h]=void 0);n?t.props=r?o:_N(o):t.type.props?t.props=o:t.props=l,t.attrs=l}function IW(t,e,n,r){const{props:o,attrs:l,vnode:{patchFlag:h}}=t,p=Ho(o),[i]=t.propsOptions;let b=!1;if((r||h>0)&&!(h&16)){if(h&8){const E=t.vnode.dynamicProps;for(let I=0;I<E.length;I++){let O=E[I];if(gE(t.emitsOptions,O))continue;const M=e[O];if(i)if(Oo(l,O))M!==l[O]&&(l[O]=M,b=!0);else{const G=Ad(O);o[G]=kT(i,p,G,M,t,!1)}else M!==l[O]&&(l[O]=M,b=!0)}}}else{jN(t,e,o,l)&&(b=!0);let E;for(const I in p)(!e||!Oo(e,I)&&((E=cm(I))===I||!Oo(e,E)))&&(i?n&&(n[I]!==void 0||n[E]!==void 0)&&(o[I]=kT(i,p,I,void 0,t,!0)):delete o[I]);if(l!==p)for(const I in l)(!e||!Oo(e,I))&&(delete l[I],b=!0)}b&&cA(t.attrs,"set","")}function jN(t,e,n,r){const[o,l]=t.propsOptions;let h=!1,p;if(e)for(let i in e){if(Pv(i))continue;const b=e[i];let E;o&&Oo(o,E=Ad(i))?!l||!l.includes(E)?n[E]=b:(p||(p={}))[E]=b:gE(t.emitsOptions,i)||(!(i in r)||b!==r[i])&&(r[i]=b,h=!0)}if(l){const i=Ho(n),b=p||$s;for(let E=0;E<l.length;E++){const I=l[E];n[I]=kT(o,i,I,b[I],t,!Oo(b,I))}}return h}function kT(t,e,n,r,o,l){const h=t[n];if(h!=null){const p=Oo(h,"default");if(p&&r===void 0){const i=h.default;if(h.type!==Function&&!h.skipFactory&&Pi(i)){const{propsDefaults:b}=o;if(n in b)r=b[n];else{const E=W1(o);r=b[n]=i.call(null,e),E()}}else r=i}h[0]&&(l&&!p?r=!1:h[1]&&(r===""||r===cm(n))&&(r=!0))}return r}const PW=new WeakMap;function $N(t,e,n=!1){const r=n?PW:e.propsCache,o=r.get(t);if(o)return o;const l=t.props,h={},p=[];let i=!1;if(!Pi(t)){const E=I=>{i=!0;const[O,M]=$N(I,e,!0);vl(h,O),M&&p.push(...M)};!n&&e.mixins.length&&e.mixins.forEach(E),t.extends&&E(t.extends),t.mixins&&t.mixins.forEach(E)}if(!l&&!i)return ps(t)&&r.set(t,qy),qy;if(li(l))for(let E=0;E<l.length;E++){const I=Ad(l[E]);Uk(I)&&(h[I]=$s)}else if(l)for(const E in l){const I=Ad(E);if(Uk(I)){const O=l[E],M=h[I]=li(O)||Pi(O)?{type:O}:vl({},O),G=M.type;let q=!1,Z=!0;if(li(G))for(let Y=0;Y<G.length;++Y){const te=G[Y],be=Pi(te)&&te.name;if(be==="Boolean"){q=!0;break}else be==="String"&&(Z=!1)}else q=Pi(G)&&G.name==="Boolean";M[0]=q,M[1]=Z,(q||Oo(M,"default"))&&p.push(I)}}const b=[h,p];return ps(t)&&r.set(t,b),b}function Uk(t){return t[0]!=="$"&&!Pv(t)}const GN=t=>t[0]==="_"||t==="$stable",Z5=t=>li(t)?t.map(Zd):[Zd(t)],LW=(t,e,n)=>{if(e._n)return e;const r=Kn((...o)=>Z5(e(...o)),n);return r._c=!1,r},KN=(t,e,n)=>{const r=t._ctx;for(const o in t){if(GN(o))continue;const l=t[o];if(Pi(l))e[o]=LW(o,l,r);else if(l!=null){const h=Z5(l);e[o]=()=>h}}},qN=(t,e)=>{const n=Z5(e);t.slots.default=()=>n},WN=(t,e,n)=>{for(const r in e)(n||r!=="_")&&(t[r]=e[r])},FW=(t,e,n)=>{const r=t.slots=QN();if(t.vnode.shapeFlag&32){const o=e._;o?(WN(r,e,n),n&&nN(r,"_",o,!0)):KN(e,r)}else e&&qN(t,e)},RW=(t,e,n)=>{const{vnode:r,slots:o}=t;let l=!0,h=$s;if(r.shapeFlag&32){const p=e._;p?n&&p===1?l=!1:WN(o,e,n):(l=!e.$stable,KN(e,o)),h=e}else e&&(qN(t,e),h={default:1});if(l)for(const p in o)!GN(p)&&h[p]==null&&delete o[p]};function MT(t,e,n,r,o=!1){if(li(t)){t.forEach((O,M)=>MT(O,e&&(li(e)?e[M]:e),n,r,o));return}if(Lv(r)&&!o)return;const l=r.shapeFlag&4?bE(r.component):r.el,h=o?null:l,{i:p,r:i}=t,b=e&&e.r,E=p.refs===$s?p.refs={}:p.refs,I=p.setupState;if(b!=null&&b!==i&&(ia(b)?(E[b]=null,Oo(I,b)&&(I[b]=null)):ga(b)&&(b.value=null)),Pi(i))Qp(i,p,12,[h,E]);else{const O=ia(i),M=ga(i);if(O||M){const G=()=>{if(t.f){const q=O?Oo(I,i)?I[i]:E[i]:i.value;o?li(q)&&M5(q,l):li(q)?q.includes(l)||q.push(l):O?(E[i]=[l],Oo(I,i)&&(I[i]=E[i])):(i.value=[l],t.k&&(E[t.k]=i.value))}else O?(E[i]=h,Oo(I,i)&&(I[i]=h)):M&&(i.value=h,t.k&&(E[t.k]=h))};h?(G.id=-1,su(G,n)):G()}}}const XN=Symbol("_vte"),kW=t=>t.__isTeleport,Rv=t=>t&&(t.disabled||t.disabled===""),Nk=t=>typeof SVGElement<"u"&&t instanceof SVGElement,zk=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,OT=(t,e)=>{const n=t&&t.to;return ia(n)?e?e(n):null:n},MW={name:"Teleport",__isTeleport:!0,process(t,e,n,r,o,l,h,p,i,b){const{mc:E,pc:I,pbc:O,o:{insert:M,querySelector:G,createText:q,createComment:Z}}=b,Y=Rv(e.props);let{shapeFlag:te,children:be,dynamicChildren:Pe}=e;if(t==null){const Se=e.el=q(""),Ie=e.anchor=q("");M(Se,n,r),M(Ie,n,r);const Ae=e.target=OT(e.props,G),ne=JN(Ae,e,q,M);Ae&&(h==="svg"||Nk(Ae)?h="svg":(h==="mathml"||zk(Ae))&&(h="mathml"));const ue=(ye,se)=>{te&16&&E(be,ye,se,o,l,h,p,i)};Y?ue(n,Ie):Ae&&ue(Ae,ne)}else{e.el=t.el,e.targetStart=t.targetStart;const Se=e.anchor=t.anchor,Ie=e.target=t.target,Ae=e.targetAnchor=t.targetAnchor,ne=Rv(t.props),ue=ne?n:Ie,ye=ne?Se:Ae;if(h==="svg"||Nk(Ie)?h="svg":(h==="mathml"||zk(Ie))&&(h="mathml"),Pe?(O(t.dynamicChildren,Pe,ue,o,l,h,p),Y5(t,e,!0)):i||I(t,e,ue,ye,o,l,h,p,!1),Y)ne?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Sw(e,n,Se,b,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const se=e.target=OT(e.props,G);se&&Sw(e,se,null,b,0)}else ne&&Sw(e,Ie,Ae,b,1)}YN(e)},remove(t,e,n,{um:r,o:{remove:o}},l){const{shapeFlag:h,children:p,anchor:i,targetStart:b,targetAnchor:E,target:I,props:O}=t;if(I&&(o(b),o(E)),l&&o(i),h&16){const M=l||!Rv(O);for(let G=0;G<p.length;G++){const q=p[G];r(q,e,n,M,!!q.dynamicChildren)}}},move:Sw,hydrate:OW};function Sw(t,e,n,{o:{insert:r},m:o},l=2){l===0&&r(t.targetAnchor,e,n);const{el:h,anchor:p,shapeFlag:i,children:b,props:E}=t,I=l===2;if(I&&r(h,e,n),(!I||Rv(E))&&i&16)for(let O=0;O<b.length;O++)o(b[O],e,n,2);I&&r(p,e,n)}function OW(t,e,n,r,o,l,{o:{nextSibling:h,parentNode:p,querySelector:i,insert:b,createText:E}},I){const O=e.target=OT(e.props,i);if(O){const M=O._lpa||O.firstChild;if(e.shapeFlag&16)if(Rv(e.props))e.anchor=I(h(t),e,p(t),n,r,o,l),e.targetStart=M,e.targetAnchor=M&&h(M);else{e.anchor=h(t);let G=M;for(;G;){if(G&&G.nodeType===8){if(G.data==="teleport start anchor")e.targetStart=G;else if(G.data==="teleport anchor"){e.targetAnchor=G,O._lpa=e.targetAnchor&&h(e.targetAnchor);break}}G=h(G)}e.targetAnchor||JN(O,e,E,b),I(M&&h(M),e,O,n,r,o,l)}YN(e)}return e.anchor&&h(e.anchor)}const ZN=MW;function YN(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;for(;n&&n!==t.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}function JN(t,e,n,r){const o=e.targetStart=n(""),l=e.targetAnchor=n("");return o[XN]=l,t&&(r(o,t),r(l,t)),l}const su=ZW;function DW(t){return UW(t)}function UW(t,e){const n=rN();n.__VUE__=!0;const{insert:r,remove:o,patchProp:l,createElement:h,createText:p,createComment:i,setText:b,setElementText:E,parentNode:I,nextSibling:O,setScopeId:M=Bh,insertStaticContent:G}=t,q=(Te,Je,Fe,Re=null,Yt=null,rn=null,zt=void 0,Jt=null,gn=!!Je.dynamicChildren)=>{if(Te===Je)return;Te&&!Wm(Te,Je)&&(Re=at(Te),Ee(Te,Yt,rn,!0),Te=null),Je.patchFlag===-2&&(gn=!1,Je.dynamicChildren=null);const{type:fn,ref:Fn,shapeFlag:Wn}=Je;switch(fn){case yE:Z(Te,Je,Fe,Re);break;case Uc:Y(Te,Je,Fe,Re);break;case Ex:Te==null&&te(Je,Fe,Re,zt);break;case _r:le(Te,Je,Fe,Re,Yt,rn,zt,Jt,gn);break;default:Wn&1?Se(Te,Je,Fe,Re,Yt,rn,zt,Jt,gn):Wn&6?ge(Te,Je,Fe,Re,Yt,rn,zt,Jt,gn):(Wn&64||Wn&128)&&fn.process(Te,Je,Fe,Re,Yt,rn,zt,Jt,gn,yn)}Fn!=null&&Yt&&MT(Fn,Te&&Te.ref,rn,Je||Te,!Je)},Z=(Te,Je,Fe,Re)=>{if(Te==null)r(Je.el=p(Je.children),Fe,Re);else{const Yt=Je.el=Te.el;Je.children!==Te.children&&b(Yt,Je.children)}},Y=(Te,Je,Fe,Re)=>{Te==null?r(Je.el=i(Je.children||""),Fe,Re):Je.el=Te.el},te=(Te,Je,Fe,Re)=>{[Te.el,Te.anchor]=G(Te.children,Je,Fe,Re,Te.el,Te.anchor)},be=({el:Te,anchor:Je},Fe,Re)=>{let Yt;for(;Te&&Te!==Je;)Yt=O(Te),r(Te,Fe,Re),Te=Yt;r(Je,Fe,Re)},Pe=({el:Te,anchor:Je})=>{let Fe;for(;Te&&Te!==Je;)Fe=O(Te),o(Te),Te=Fe;o(Je)},Se=(Te,Je,Fe,Re,Yt,rn,zt,Jt,gn)=>{Je.type==="svg"?zt="svg":Je.type==="math"&&(zt="mathml"),Te==null?Ie(Je,Fe,Re,Yt,rn,zt,Jt,gn):ue(Te,Je,Yt,rn,zt,Jt,gn)},Ie=(Te,Je,Fe,Re,Yt,rn,zt,Jt)=>{let gn,fn;const{props:Fn,shapeFlag:Wn,transition:_n,dirs:er}=Te;if(gn=Te.el=h(Te.type,rn,Fn&&Fn.is,Fn),Wn&8?E(gn,Te.children):Wn&16&&ne(Te.children,gn,null,Re,Yt,XS(Te,rn),zt,Jt),er&&Um(Te,null,Re,"created"),Ae(gn,Te,Te.scopeId,zt,Re),Fn){for(const Fr in Fn)Fr!=="value"&&!Pv(Fr)&&l(gn,Fr,null,Fn[Fr],rn,Re);"value"in Fn&&l(gn,"value",null,Fn.value,rn),(fn=Fn.onVnodeBeforeMount)&&Gd(fn,Re,Te)}er&&Um(Te,null,Re,"beforeMount");const ar=NW(Yt,_n);ar&&_n.beforeEnter(gn),r(gn,Je,Fe),((fn=Fn&&Fn.onVnodeMounted)||ar||er)&&su(()=>{fn&&Gd(fn,Re,Te),ar&&_n.enter(gn),er&&Um(Te,null,Re,"mounted")},Yt)},Ae=(Te,Je,Fe,Re,Yt)=>{if(Fe&&M(Te,Fe),Re)for(let rn=0;rn<Re.length;rn++)M(Te,Re[rn]);if(Yt){let rn=Yt.subTree;if(Je===rn){const zt=Yt.vnode;Ae(Te,zt,zt.scopeId,zt.slotScopeIds,Yt.parent)}}},ne=(Te,Je,Fe,Re,Yt,rn,zt,Jt,gn=0)=>{for(let fn=gn;fn<Te.length;fn++){const Fn=Te[fn]=Jt?wp(Te[fn]):Zd(Te[fn]);q(null,Fn,Je,Fe,Re,Yt,rn,zt,Jt)}},ue=(Te,Je,Fe,Re,Yt,rn,zt)=>{const Jt=Je.el=Te.el;let{patchFlag:gn,dynamicChildren:fn,dirs:Fn}=Je;gn|=Te.patchFlag&16;const Wn=Te.props||$s,_n=Je.props||$s;let er;if(Fe&&Nm(Fe,!1),(er=_n.onVnodeBeforeUpdate)&&Gd(er,Fe,Je,Te),Fn&&Um(Je,Te,Fe,"beforeUpdate"),Fe&&Nm(Fe,!0),(Wn.innerHTML&&_n.innerHTML==null||Wn.textContent&&_n.textContent==null)&&E(Jt,""),fn?ye(Te.dynamicChildren,fn,Jt,Fe,Re,XS(Je,Yt),rn):zt||Mt(Te,Je,Jt,null,Fe,Re,XS(Je,Yt),rn,!1),gn>0){if(gn&16)se(Jt,Wn,_n,Fe,Yt);else if(gn&2&&Wn.class!==_n.class&&l(Jt,"class",null,_n.class,Yt),gn&4&&l(Jt,"style",Wn.style,_n.style,Yt),gn&8){const ar=Je.dynamicProps;for(let Fr=0;Fr<ar.length;Fr++){const lr=ar[Fr],Ir=Wn[lr],pr=_n[lr];(pr!==Ir||lr==="value")&&l(Jt,lr,Ir,pr,Yt,Fe)}}gn&1&&Te.children!==Je.children&&E(Jt,Je.children)}else!zt&&fn==null&&se(Jt,Wn,_n,Fe,Yt);((er=_n.onVnodeUpdated)||Fn)&&su(()=>{er&&Gd(er,Fe,Je,Te),Fn&&Um(Je,Te,Fe,"updated")},Re)},ye=(Te,Je,Fe,Re,Yt,rn,zt)=>{for(let Jt=0;Jt<Je.length;Jt++){const gn=Te[Jt],fn=Je[Jt],Fn=gn.el&&(gn.type===_r||!Wm(gn,fn)||gn.shapeFlag&70)?I(gn.el):Fe;q(gn,fn,Fn,null,Re,Yt,rn,zt,!0)}},se=(Te,Je,Fe,Re,Yt)=>{if(Je!==Fe){if(Je!==$s)for(const rn in Je)!Pv(rn)&&!(rn in Fe)&&l(Te,rn,Je[rn],null,Yt,Re);for(const rn in Fe){if(Pv(rn))continue;const zt=Fe[rn],Jt=Je[rn];zt!==Jt&&rn!=="value"&&l(Te,rn,Jt,zt,Yt,Re)}"value"in Fe&&l(Te,"value",Je.value,Fe.value,Yt)}},le=(Te,Je,Fe,Re,Yt,rn,zt,Jt,gn)=>{const fn=Je.el=Te?Te.el:p(""),Fn=Je.anchor=Te?Te.anchor:p("");let{patchFlag:Wn,dynamicChildren:_n,slotScopeIds:er}=Je;er&&(Jt=Jt?Jt.concat(er):er),Te==null?(r(fn,Fe,Re),r(Fn,Fe,Re),ne(Je.children||[],Fe,Fn,Yt,rn,zt,Jt,gn)):Wn>0&&Wn&64&&_n&&Te.dynamicChildren?(ye(Te.dynamicChildren,_n,Fe,Yt,rn,zt,Jt),(Je.key!=null||Yt&&Je===Yt.subTree)&&Y5(Te,Je,!0)):Mt(Te,Je,Fe,Fn,Yt,rn,zt,Jt,gn)},ge=(Te,Je,Fe,Re,Yt,rn,zt,Jt,gn)=>{Je.slotScopeIds=Jt,Te==null?Je.shapeFlag&512?Yt.ctx.activate(Je,Fe,Re,zt,gn):lt(Je,Fe,Re,Yt,rn,zt,gn):Ot(Te,Je,gn)},lt=(Te,Je,Fe,Re,Yt,rn,zt)=>{const Jt=Te.component=rX(Te,Re,Yt);if(AE(Te)&&(Jt.ctx.renderer=yn),iX(Jt,!1,zt),Jt.asyncDep){if(Yt&&Yt.registerDep(Jt,gt,zt),!Te.el){const gn=Jt.subTree=Lr(Uc);Y(null,gn,Je,Fe)}}else gt(Jt,Te,Je,Fe,Yt,rn,zt)},Ot=(Te,Je,Fe)=>{const Re=Je.component=Te.component;if(qW(Te,Je,Fe))if(Re.asyncDep&&!Re.asyncResolved){Tt(Re,Je,Fe);return}else Re.next=Je,iW(Re.update),Re.effect.dirty=!0,Re.update();else Je.el=Te.el,Re.vnode=Je},gt=(Te,Je,Fe,Re,Yt,rn,zt)=>{const Jt=()=>{if(Te.isMounted){let{next:Fn,bu:Wn,u:_n,parent:er,vnode:ar}=Te;{const to=e8(Te);if(to){Fn&&(Fn.el=ar.el,Tt(Te,Fn,zt)),to.asyncDep.then(()=>{Te.isUnmounted||Jt()});return}}let Fr=Fn,lr;Nm(Te,!1),Fn?(Fn.el=ar.el,Tt(Te,Fn,zt)):Fn=ar,Wn&&xx(Wn),(lr=Fn.props&&Fn.props.onVnodeBeforeUpdate)&&Gd(lr,er,Fn,ar),Nm(Te,!0);const Ir=ZS(Te),pr=Te.subTree;Te.subTree=Ir,q(pr,Ir,I(pr.el),at(pr),Te,Yt,rn),Fn.el=Ir.el,Fr===null&&WW(Te,Ir.el),_n&&su(_n,Yt),(lr=Fn.props&&Fn.props.onVnodeUpdated)&&su(()=>Gd(lr,er,Fn,ar),Yt)}else{let Fn;const{el:Wn,props:_n}=Je,{bm:er,m:ar,parent:Fr}=Te,lr=Lv(Je);if(Nm(Te,!1),er&&xx(er),!lr&&(Fn=_n&&_n.onVnodeBeforeMount)&&Gd(Fn,Fr,Je),Nm(Te,!0),Wn&&jn){const Ir=()=>{Te.subTree=ZS(Te),jn(Wn,Te.subTree,Te,Yt,null)};lr?Je.type.__asyncLoader().then(()=>!Te.isUnmounted&&Ir()):Ir()}else{const Ir=Te.subTree=ZS(Te);q(null,Ir,Fe,Re,Te,Yt,rn),Je.el=Ir.el}if(ar&&su(ar,Yt),!lr&&(Fn=_n&&_n.onVnodeMounted)){const Ir=Je;su(()=>Gd(Fn,Fr,Ir),Yt)}(Je.shapeFlag&256||Fr&&Lv(Fr.vnode)&&Fr.vnode.shapeFlag&256)&&Te.a&&su(Te.a,Yt),Te.isMounted=!0,Je=Fe=Re=null}},gn=Te.effect=new U5(Jt,Bh,()=>G5(fn),Te.scope),fn=Te.update=()=>{gn.dirty&&gn.run()};fn.i=Te,fn.id=Te.uid,Nm(Te,!0),fn()},Tt=(Te,Je,Fe)=>{Je.component=Te;const Re=Te.vnode.props;Te.vnode=Je,Te.next=null,IW(Te,Je.props,Re,Fe),RW(Te,Je.children,Fe),um(),Lk(Te),hm()},Mt=(Te,Je,Fe,Re,Yt,rn,zt,Jt,gn=!1)=>{const fn=Te&&Te.children,Fn=Te?Te.shapeFlag:0,Wn=Je.children,{patchFlag:_n,shapeFlag:er}=Je;if(_n>0){if(_n&128){Ut(fn,Wn,Fe,Re,Yt,rn,zt,Jt,gn);return}else if(_n&256){on(fn,Wn,Fe,Re,Yt,rn,zt,Jt,gn);return}}er&8?(Fn&16&&_t(fn,Yt,rn),Wn!==fn&&E(Fe,Wn)):Fn&16?er&16?Ut(fn,Wn,Fe,Re,Yt,rn,zt,Jt,gn):_t(fn,Yt,rn,!0):(Fn&8&&E(Fe,""),er&16&&ne(Wn,Fe,Re,Yt,rn,zt,Jt,gn))},on=(Te,Je,Fe,Re,Yt,rn,zt,Jt,gn)=>{Te=Te||qy,Je=Je||qy;const fn=Te.length,Fn=Je.length,Wn=Math.min(fn,Fn);let _n;for(_n=0;_n<Wn;_n++){const er=Je[_n]=gn?wp(Je[_n]):Zd(Je[_n]);q(Te[_n],er,Fe,null,Yt,rn,zt,Jt,gn)}fn>Fn?_t(Te,Yt,rn,!0,!1,Wn):ne(Je,Fe,Re,Yt,rn,zt,Jt,gn,Wn)},Ut=(Te,Je,Fe,Re,Yt,rn,zt,Jt,gn)=>{let fn=0;const Fn=Je.length;let Wn=Te.length-1,_n=Fn-1;for(;fn<=Wn&&fn<=_n;){const er=Te[fn],ar=Je[fn]=gn?wp(Je[fn]):Zd(Je[fn]);if(Wm(er,ar))q(er,ar,Fe,null,Yt,rn,zt,Jt,gn);else break;fn++}for(;fn<=Wn&&fn<=_n;){const er=Te[Wn],ar=Je[_n]=gn?wp(Je[_n]):Zd(Je[_n]);if(Wm(er,ar))q(er,ar,Fe,null,Yt,rn,zt,Jt,gn);else break;Wn--,_n--}if(fn>Wn){if(fn<=_n){const er=_n+1,ar=er<Fn?Je[er].el:Re;for(;fn<=_n;)q(null,Je[fn]=gn?wp(Je[fn]):Zd(Je[fn]),Fe,ar,Yt,rn,zt,Jt,gn),fn++}}else if(fn>_n)for(;fn<=Wn;)Ee(Te[fn],Yt,rn,!0),fn++;else{const er=fn,ar=fn,Fr=new Map;for(fn=ar;fn<=_n;fn++){const pi=Je[fn]=gn?wp(Je[fn]):Zd(Je[fn]);pi.key!=null&&Fr.set(pi.key,fn)}let lr,Ir=0;const pr=_n-ar+1;let to=!1,xi=0;const No=new Array(pr);for(fn=0;fn<pr;fn++)No[fn]=0;for(fn=er;fn<=Wn;fn++){const pi=Te[fn];if(Ir>=pr){Ee(pi,Yt,rn,!0);continue}let Wi;if(pi.key!=null)Wi=Fr.get(pi.key);else for(lr=ar;lr<=_n;lr++)if(No[lr-ar]===0&&Wm(pi,Je[lr])){Wi=lr;break}Wi===void 0?Ee(pi,Yt,rn,!0):(No[Wi-ar]=fn+1,Wi>=xi?xi=Wi:to=!0,q(pi,Je[Wi],Fe,null,Yt,rn,zt,Jt,gn),Ir++)}const Fi=to?zW(No):qy;for(lr=Fi.length-1,fn=pr-1;fn>=0;fn--){const pi=ar+fn,Wi=Je[pi],Ti=pi+1<Fn?Je[pi+1].el:Re;No[fn]===0?q(null,Wi,Fe,Ti,Yt,rn,zt,Jt,gn):to&&(lr<0||fn!==Fi[lr]?In(Wi,Fe,Ti,2):lr--)}}},In=(Te,Je,Fe,Re,Yt=null)=>{const{el:rn,type:zt,transition:Jt,children:gn,shapeFlag:fn}=Te;if(fn&6){In(Te.component.subTree,Je,Fe,Re);return}if(fn&128){Te.suspense.move(Je,Fe,Re);return}if(fn&64){zt.move(Te,Je,Fe,yn);return}if(zt===_r){r(rn,Je,Fe);for(let Wn=0;Wn<gn.length;Wn++)In(gn[Wn],Je,Fe,Re);r(Te.anchor,Je,Fe);return}if(zt===Ex){be(Te,Je,Fe);return}if(Re!==2&&fn&1&&Jt)if(Re===0)Jt.beforeEnter(rn),r(rn,Je,Fe),su(()=>Jt.enter(rn),Yt);else{const{leave:Wn,delayLeave:_n,afterLeave:er}=Jt,ar=()=>r(rn,Je,Fe),Fr=()=>{Wn(rn,()=>{ar(),er&&er()})};_n?_n(rn,ar,Fr):Fr()}else r(rn,Je,Fe)},Ee=(Te,Je,Fe,Re=!1,Yt=!1)=>{const{type:rn,props:zt,ref:Jt,children:gn,dynamicChildren:fn,shapeFlag:Fn,patchFlag:Wn,dirs:_n,cacheIndex:er}=Te;if(Wn===-2&&(Yt=!1),Jt!=null&&MT(Jt,null,Fe,Te,!0),er!=null&&(Je.renderCache[er]=void 0),Fn&256){Je.ctx.deactivate(Te);return}const ar=Fn&1&&_n,Fr=!Lv(Te);let lr;if(Fr&&(lr=zt&&zt.onVnodeBeforeUnmount)&&Gd(lr,Je,Te),Fn&6)vt(Te.component,Fe,Re);else{if(Fn&128){Te.suspense.unmount(Fe,Re);return}ar&&Um(Te,null,Je,"beforeUnmount"),Fn&64?Te.type.remove(Te,Je,Fe,yn,Re):fn&&!fn.hasOnce&&(rn!==_r||Wn>0&&Wn&64)?_t(fn,Je,Fe,!1,!0):(rn===_r&&Wn&384||!Yt&&Fn&16)&&_t(gn,Je,Fe),Re&&$e(Te)}(Fr&&(lr=zt&&zt.onVnodeUnmounted)||ar)&&su(()=>{lr&&Gd(lr,Je,Te),ar&&Um(Te,null,Je,"unmounted")},Fe)},$e=Te=>{const{type:Je,el:Fe,anchor:Re,transition:Yt}=Te;if(Je===_r){We(Fe,Re);return}if(Je===Ex){Pe(Te);return}const rn=()=>{o(Fe),Yt&&!Yt.persisted&&Yt.afterLeave&&Yt.afterLeave()};if(Te.shapeFlag&1&&Yt&&!Yt.persisted){const{leave:zt,delayLeave:Jt}=Yt,gn=()=>zt(Fe,rn);Jt?Jt(Te.el,rn,gn):gn()}else rn()},We=(Te,Je)=>{let Fe;for(;Te!==Je;)Fe=O(Te),o(Te),Te=Fe;o(Je)},vt=(Te,Je,Fe)=>{const{bum:Re,scope:Yt,update:rn,subTree:zt,um:Jt,m:gn,a:fn}=Te;Vk(gn),Vk(fn),Re&&xx(Re),Yt.stop(),rn&&(rn.active=!1,Ee(zt,Te,Je,Fe)),Jt&&su(Jt,Je),su(()=>{Te.isUnmounted=!0},Je),Je&&Je.pendingBranch&&!Je.isUnmounted&&Te.asyncDep&&!Te.asyncResolved&&Te.suspenseId===Je.pendingId&&(Je.deps--,Je.deps===0&&Je.resolve())},_t=(Te,Je,Fe,Re=!1,Yt=!1,rn=0)=>{for(let zt=rn;zt<Te.length;zt++)Ee(Te[zt],Je,Fe,Re,Yt)},at=Te=>{if(Te.shapeFlag&6)return at(Te.component.subTree);if(Te.shapeFlag&128)return Te.suspense.next();const Je=O(Te.anchor||Te.el),Fe=Je&&Je[XN];return Fe?O(Fe):Je};let Ft=!1;const Dt=(Te,Je,Fe)=>{Te==null?Je._vnode&&Ee(Je._vnode,null,null,!0):q(Je._vnode||null,Te,Je,null,null,null,Fe),Je._vnode=Te,Ft||(Ft=!0,Lk(),TN(),Ft=!1)},yn={p:q,um:Ee,m:In,r:$e,mt:lt,mc:ne,pc:Mt,pbc:ye,n:at,o:t};let De,jn;return{render:Dt,hydrate:De,createApp:SW(Dt,De)}}function XS({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Nm({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function NW(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Y5(t,e,n=!1){const r=t.children,o=e.children;if(li(r)&&li(o))for(let l=0;l<r.length;l++){const h=r[l];let p=o[l];p.shapeFlag&1&&!p.dynamicChildren&&((p.patchFlag<=0||p.patchFlag===32)&&(p=o[l]=wp(o[l]),p.el=h.el),!n&&p.patchFlag!==-2&&Y5(h,p)),p.type===yE&&(p.el=h.el)}}function zW(t){const e=t.slice(),n=[0];let r,o,l,h,p;const i=t.length;for(r=0;r<i;r++){const b=t[r];if(b!==0){if(o=n[n.length-1],t[o]<b){e[r]=o,n.push(r);continue}for(l=0,h=n.length-1;l<h;)p=l+h>>1,t[n[p]]<b?l=p+1:h=p;b<t[n[l]]&&(l>0&&(e[r]=n[l-1]),n[l]=r)}}for(l=n.length,h=n[l-1];l-- >0;)n[l]=h,h=e[h];return n}function e8(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:e8(e)}function Vk(t){if(t)for(let e=0;e<t.length;e++)t[e].active=!1}const VW=Symbol.for("v-scx"),QW=()=>il(VW);function kv(t,e){return J5(t,null,e)}const Tw={};function Do(t,e,n){return J5(t,e,n)}function J5(t,e,{immediate:n,deep:r,flush:o,once:l,onTrack:h,onTrigger:p}=$s){if(e&&l){const Ie=e;e=(...Ae)=>{Ie(...Ae),Se()}}const i=kl,b=Ie=>r===!0?Ie:Bp(Ie,r===!1?1:void 0);let E,I=!1,O=!1;if(ga(t)?(E=()=>t.value,I=d_(t)):Xy(t)?(E=()=>b(t),I=!0):li(t)?(O=!0,I=t.some(Ie=>Xy(Ie)||d_(Ie)),E=()=>t.map(Ie=>{if(ga(Ie))return Ie.value;if(Xy(Ie))return b(Ie);if(Pi(Ie))return Qp(Ie,i,2)})):Pi(t)?e?E=()=>Qp(t,i,2):E=()=>(M&&M(),Ph(t,i,3,[G])):E=Bh,e&&r){const Ie=E;E=()=>Bp(Ie())}let M,G=Ie=>{M=be.onStop=()=>{Qp(Ie,i,4),M=be.onStop=void 0}},q;if(vE)if(G=Bh,e?n&&Ph(e,i,3,[E(),O?[]:void 0,G]):E(),o==="sync"){const Ie=QW();q=Ie.__watcherHandles||(Ie.__watcherHandles=[])}else return Bh;let Z=O?new Array(t.length).fill(Tw):Tw;const Y=()=>{if(!(!be.active||!be.dirty))if(e){const Ie=be.run();(r||I||(O?Ie.some((Ae,ne)=>Wp(Ae,Z[ne])):Wp(Ie,Z)))&&(M&&M(),Ph(e,i,3,[Ie,Z===Tw?void 0:O&&Z[0]===Tw?[]:Z,G]),Z=Ie)}else be.run()};Y.allowRecurse=!!e;let te;o==="sync"?te=Y:o==="post"?te=()=>su(Y,i&&i.suspense):(Y.pre=!0,i&&(Y.id=i.uid),te=()=>G5(Y));const be=new U5(E,Bh,te),Pe=aN(),Se=()=>{be.stop(),Pe&&M5(Pe.effects,be)};return e?n?Y():Z=be.run():o==="post"?su(be.run.bind(be),i&&i.suspense):be.run(),q&&q.push(Se),Se}function HW(t,e,n){const r=this.proxy,o=ia(t)?t.includes(".")?t8(r,t):()=>r[t]:t.bind(r,r);let l;Pi(e)?l=e:(l=e.handler,n=e);const h=W1(this),p=J5(o,l.bind(r),n);return h(),p}function t8(t,e){const n=e.split(".");return()=>{let r=t;for(let o=0;o<n.length&&r;o++)r=r[n[o]];return r}}function Bp(t,e=1/0,n){if(e<=0||!ps(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,ga(t))Bp(t.value,e,n);else if(li(t))for(let r=0;r<t.length;r++)Bp(t[r],e,n);else if(U_(t)||Wy(t))t.forEach(r=>{Bp(r,e,n)});else if(tN(t)){for(const r in t)Bp(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Bp(t[r],e,n)}return t}const jW=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Ad(e)}Modifiers`]||t[`${cm(e)}Modifiers`];function $W(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||$s;let o=n;const l=e.startsWith("update:"),h=l&&jW(r,e.slice(7));h&&(h.trim&&(o=n.map(E=>ia(E)?E.trim():E)),h.number&&(o=n.map(oC)));let p,i=r[p=wx(e)]||r[p=wx(Ad(e))];!i&&l&&(i=r[p=wx(cm(e))]),i&&Ph(i,t,6,o);const b=r[p+"Once"];if(b){if(!t.emitted)t.emitted={};else if(t.emitted[p])return;t.emitted[p]=!0,Ph(b,t,6,o)}}function n8(t,e,n=!1){const r=e.emitsCache,o=r.get(t);if(o!==void 0)return o;const l=t.emits;let h={},p=!1;if(!Pi(t)){const i=b=>{const E=n8(b,e,!0);E&&(p=!0,vl(h,E))};!n&&e.mixins.length&&e.mixins.forEach(i),t.extends&&i(t.extends),t.mixins&&t.mixins.forEach(i)}return!l&&!p?(ps(t)&&r.set(t,null),null):(li(l)?l.forEach(i=>h[i]=null):vl(h,l),ps(t)&&r.set(t,h),h)}function gE(t,e){return!t||!lE(e)?!1:(e=e.slice(2).replace(/Once$/,""),Oo(t,e[0].toLowerCase()+e.slice(1))||Oo(t,cm(e))||Oo(t,e))}function ZS(t){const{type:e,vnode:n,proxy:r,withProxy:o,propsOptions:[l],slots:h,attrs:p,emit:i,render:b,renderCache:E,props:I,data:O,setupState:M,ctx:G,inheritAttrs:q}=t,Z=aC(t);let Y,te;try{if(n.shapeFlag&4){const Pe=o||r,Se=Pe;Y=Zd(b.call(Se,Pe,E,I,M,O,G)),te=p}else{const Pe=e;Y=Zd(Pe.length>1?Pe(I,{attrs:p,slots:h,emit:i}):Pe(I,null)),te=e.props?p:GW(p)}}catch(Pe){Mv.length=0,dE(Pe,t,1),Y=Lr(Uc)}let be=Y;if(te&&q!==!1){const Pe=Object.keys(te),{shapeFlag:Se}=be;Pe.length&&Se&7&&(l&&Pe.some(k5)&&(te=KW(te,l)),be=Xp(be,te,!1,!0))}return n.dirs&&(be=Xp(be,null,!1,!0),be.dirs=be.dirs?be.dirs.concat(n.dirs):n.dirs),n.transition&&(be.transition=n.transition),Y=be,aC(Z),Y}const GW=t=>{let e;for(const n in t)(n==="class"||n==="style"||lE(n))&&((e||(e={}))[n]=t[n]);return e},KW=(t,e)=>{const n={};for(const r in t)(!k5(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function qW(t,e,n){const{props:r,children:o,component:l}=t,{props:h,children:p,patchFlag:i}=e,b=l.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&i>=0){if(i&1024)return!0;if(i&16)return r?Qk(r,h,b):!!h;if(i&8){const E=e.dynamicProps;for(let I=0;I<E.length;I++){const O=E[I];if(h[O]!==r[O]&&!gE(b,O))return!0}}}else return(o||p)&&(!p||!p.$stable)?!0:r===h?!1:r?h?Qk(r,h,b):!0:!!h;return!1}function Qk(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let o=0;o<r.length;o++){const l=r[o];if(e[l]!==t[l]&&!gE(n,l))return!0}return!1}function WW({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const XW=t=>t.__isSuspense;function ZW(t,e){e&&e.pendingBranch?li(t)?e.effects.push(...t):e.effects.push(t):oW(t)}const _r=Symbol.for("v-fgt"),yE=Symbol.for("v-txt"),Uc=Symbol.for("v-cmt"),Ex=Symbol.for("v-stc"),Mv=[];let zu=null;function ve(t=!1){Mv.push(zu=t?null:[])}function YW(){Mv.pop(),zu=Mv[Mv.length-1]||null}let n1=1;function Hk(t){n1+=t,t<0&&zu&&(zu.hasOnce=!0)}function r8(t){return t.dynamicChildren=n1>0?zu||qy:null,YW(),n1>0&&zu&&zu.push(t),t}function et(t,e,n,r,o,l){return r8(mt(t,e,n,r,o,l,!0))}function hn(t,e,n,r,o){return r8(Lr(t,e,n,r,o,!0))}function uC(t){return t?t.__v_isVNode===!0:!1}function Wm(t,e){return t.type===e.type&&t.key===e.key}const i8=({key:t})=>t??null,Bx=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?ia(t)||ga(t)||Pi(t)?{i:_l,r:t,k:e,f:!!n}:t:null);function mt(t,e=null,n=null,r=0,o=null,l=t===_r?0:1,h=!1,p=!1){const i={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&i8(e),ref:e&&Bx(e),scopeId:fE,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:_l};return p?(e4(i,n),l&128&&t.normalize(i)):n&&(i.shapeFlag|=ia(n)?8:16),n1>0&&!h&&zu&&(i.patchFlag>0||l&6)&&i.patchFlag!==32&&zu.push(i),i}const Lr=JW;function JW(t,e=null,n=null,r=0,o=null,l=!1){if((!t||t===MN)&&(t=Uc),uC(t)){const p=Xp(t,e,!0);return n&&e4(p,n),n1>0&&!l&&zu&&(p.shapeFlag&6?zu[zu.indexOf(t)]=p:zu.push(p)),p.patchFlag=-2,p}if(lX(t)&&(t=t.__vccOpts),e){e=Ac(e);let{class:p,style:i}=e;p&&!ia(p)&&(e.class=On(p)),ps(i)&&(vN(i)&&!li(i)&&(i=vl({},i)),e.style=fc(i))}const h=ia(t)?1:XW(t)?128:kW(t)?64:ps(t)?4:Pi(t)?2:0;return mt(t,e,n,r,o,h,l,!0)}function Ac(t){return t?vN(t)||HN(t)?vl({},t):t:null}function Xp(t,e,n=!1,r=!1){const{props:o,ref:l,patchFlag:h,children:p,transition:i}=t,b=e?It(o||{},e):o,E={__v_isVNode:!0,__v_skip:!0,type:t.type,props:b,key:b&&i8(b),ref:e&&e.ref?n&&l?li(l)?l.concat(Bx(e)):[l,Bx(e)]:Bx(e):l,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:p,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==_r?h===-1?16:h|16:h,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:i,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Xp(t.ssContent),ssFallback:t.ssFallback&&Xp(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return i&&r&&lC(E,i.clone(E)),E}function jr(t=" ",e=0){return Lr(yE,null,t,e)}function eX(t,e){const n=Lr(Ex,null,t);return n.staticCount=e,n}function Sn(t="",e=!1){return e?(ve(),hn(Uc,null,t)):Lr(Uc,null,t)}function Zd(t){return t==null||typeof t=="boolean"?Lr(Uc):li(t)?Lr(_r,null,t.slice()):typeof t=="object"?wp(t):Lr(yE,null,String(t))}function wp(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Xp(t)}function e4(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(li(e))n=16;else if(typeof e=="object")if(r&65){const o=e.default;o&&(o._c&&(o._d=!1),e4(t,o()),o._c&&(o._d=!0));return}else{n=32;const o=e._;!o&&!HN(e)?e._ctx=_l:o===3&&_l&&(_l.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Pi(e)?(e={default:e,_ctx:_l},n=32):(e=String(e),r&64?(n=16,e=[jr(e)]):n=8);t.children=e,t.shapeFlag|=n}function It(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const o in r)if(o==="class")e.class!==r.class&&(e.class=On([e.class,r.class]));else if(o==="style")e.style=fc([e.style,r.style]);else if(lE(o)){const l=e[o],h=r[o];h&&l!==h&&!(li(l)&&l.includes(h))&&(e[o]=l?[].concat(l,h):h)}else o!==""&&(e[o]=r[o])}return e}function Gd(t,e,n,r=null){Ph(t,e,7,[n,r])}const tX=zN();let nX=0;function rX(t,e,n){const r=t.type,o=(e?e.appContext:t.appContext)||tX,l={uid:nX++,vnode:t,type:r,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new Bq(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:$N(r,o),emitsOptions:n8(r,o),emit:null,emitted:null,propsDefaults:$s,inheritAttrs:r.inheritAttrs,ctx:$s,data:$s,props:$s,attrs:$s,slots:$s,refs:$s,setupState:$s,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=e?e.root:l,l.emit=$W.bind(null,l),t.ce&&t.ce(l),l}let kl=null;const _E=()=>kl||_l;let hC,DT;{const t=rN(),e=(n,r)=>{let o;return(o=t[n])||(o=t[n]=[]),o.push(r),l=>{o.length>1?o.forEach(h=>h(l)):o[0](l)}};hC=e("__VUE_INSTANCE_SETTERS__",n=>kl=n),DT=e("__VUE_SSR_SETTERS__",n=>vE=n)}const W1=t=>{const e=kl;return hC(t),t.scope.on(),()=>{t.scope.off(),hC(e)}},jk=()=>{kl&&kl.scope.off(),hC(null)};function o8(t){return t.vnode.shapeFlag&4}let vE=!1;function iX(t,e=!1,n=!1){e&&DT(e);const{props:r,children:o}=t.vnode,l=o8(t);TW(t,r,l,e),FW(t,o,n);const h=l?oX(t,e):void 0;return e&&DT(!1),h}function oX(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,vW);const{setup:r}=n;if(r){const o=t.setupContext=r.length>1?a8(t):null,l=W1(t);um();const h=Qp(r,t,0,[t.props,o]);if(hm(),l(),JU(h)){if(h.then(jk,jk),e)return h.then(p=>{$k(t,p,e)}).catch(p=>{dE(p,t,0)});t.asyncDep=h}else $k(t,h,e)}else s8(t,e)}function $k(t,e,n){Pi(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ps(e)&&(t.setupState=EN(e)),s8(t,n)}let Gk;function s8(t,e,n){const r=t.type;if(!t.render){if(!e&&Gk&&!r.render){const o=r.template||X5(t).template;if(o){const{isCustomElement:l,compilerOptions:h}=t.appContext.config,{delimiters:p,compilerOptions:i}=r,b=vl(vl({isCustomElement:l,delimiters:p},h),i);r.render=Gk(o,b)}}t.render=r.render||Bh}{const o=W1(t);um();try{bW(t)}finally{hm(),o()}}}const sX={get(t,e){return Au(t,"get",""),t[e]}};function a8(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,sX),slots:t.slots,emit:t.emit,expose:e}}function bE(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(EN(Wq(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Fv)return Fv[n](t)},has(e,n){return n in e||n in Fv}})):t.proxy}function aX(t,e=!0){return Pi(t)?t.displayName||t.name:t.name||e&&t.__name}function lX(t){return Pi(t)&&"__vccOpts"in t}const ft=(t,e)=>Xq(t,e,vE);function Ui(t,e,n){const r=arguments.length;return r===2?ps(e)&&!li(e)?uC(e)?Lr(t,null,[e]):Lr(t,e):Lr(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&uC(n)&&(n=[n]),Lr(t,e,n))}const cX="3.4.38";/**
* @vue/runtime-dom v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const uX="http://www.w3.org/2000/svg",hX="http://www.w3.org/1998/Math/MathML",nA=typeof document<"u"?document:null,Kk=nA&&nA.createElement("template"),dX={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const o=e==="svg"?nA.createElementNS(uX,t):e==="mathml"?nA.createElementNS(hX,t):n?nA.createElement(t,{is:n}):nA.createElement(t);return t==="select"&&r&&r.multiple!=null&&o.setAttribute("multiple",r.multiple),o},createText:t=>nA.createTextNode(t),createComment:t=>nA.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>nA.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,o,l){const h=n?n.previousSibling:e.lastChild;if(o&&(o===l||o.nextSibling))for(;e.insertBefore(o.cloneNode(!0),n),!(o===l||!(o=o.nextSibling)););else{Kk.innerHTML=r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t;const p=Kk.content;if(r==="svg"||r==="mathml"){const i=p.firstChild;for(;i.firstChild;)p.appendChild(i.firstChild);p.removeChild(i)}e.insertBefore(p,n)}return[h?h.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},lp="transition",q0="animation",r1=Symbol("_vtc"),X1=(t,{slots:e})=>Ui(cW,fX(t),e);X1.displayName="Transition";const l8={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};X1.props=vl({},PN,l8);const zm=(t,e=[])=>{li(t)?t.forEach(n=>n(...e)):t&&t(...e)},qk=t=>t?li(t)?t.some(e=>e.length>1):t.length>1:!1;function fX(t){const e={};for(const le in t)le in l8||(e[le]=t[le]);if(t.css===!1)return e;const{name:n="v",type:r,duration:o,enterFromClass:l=`${n}-enter-from`,enterActiveClass:h=`${n}-enter-active`,enterToClass:p=`${n}-enter-to`,appearFromClass:i=l,appearActiveClass:b=h,appearToClass:E=p,leaveFromClass:I=`${n}-leave-from`,leaveActiveClass:O=`${n}-leave-active`,leaveToClass:M=`${n}-leave-to`}=t,G=AX(o),q=G&&G[0],Z=G&&G[1],{onBeforeEnter:Y,onEnter:te,onEnterCancelled:be,onLeave:Pe,onLeaveCancelled:Se,onBeforeAppear:Ie=Y,onAppear:Ae=te,onAppearCancelled:ne=be}=e,ue=(le,ge,lt)=>{Vm(le,ge?E:p),Vm(le,ge?b:h),lt&&lt()},ye=(le,ge)=>{le._isLeaving=!1,Vm(le,I),Vm(le,M),Vm(le,O),ge&&ge()},se=le=>(ge,lt)=>{const Ot=le?Ae:te,gt=()=>ue(ge,le,lt);zm(Ot,[ge,gt]),Wk(()=>{Vm(ge,le?i:l),cp(ge,le?E:p),qk(Ot)||Xk(ge,r,q,gt)})};return vl(e,{onBeforeEnter(le){zm(Y,[le]),cp(le,l),cp(le,h)},onBeforeAppear(le){zm(Ie,[le]),cp(le,i),cp(le,b)},onEnter:se(!1),onAppear:se(!0),onLeave(le,ge){le._isLeaving=!0;const lt=()=>ye(le,ge);cp(le,I),cp(le,O),gX(),Wk(()=>{le._isLeaving&&(Vm(le,I),cp(le,M),qk(Pe)||Xk(le,r,Z,lt))}),zm(Pe,[le,lt])},onEnterCancelled(le){ue(le,!1),zm(be,[le])},onAppearCancelled(le){ue(le,!0),zm(ne,[le])},onLeaveCancelled(le){ye(le),zm(Se,[le])}})}function AX(t){if(t==null)return null;if(ps(t))return[YS(t.enter),YS(t.leave)];{const e=YS(t);return[e,e]}}function YS(t){return yq(t)}function cp(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[r1]||(t[r1]=new Set)).add(e)}function Vm(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[r1];n&&(n.delete(e),n.size||(t[r1]=void 0))}function Wk(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let pX=0;function Xk(t,e,n,r){const o=t._endId=++pX,l=()=>{o===t._endId&&r()};if(n)return setTimeout(l,n);const{type:h,timeout:p,propCount:i}=mX(t,e);if(!h)return r();const b=h+"end";let E=0;const I=()=>{t.removeEventListener(b,O),l()},O=M=>{M.target===t&&++E>=i&&I()};setTimeout(()=>{E<i&&I()},p+1),t.addEventListener(b,O)}function mX(t,e){const n=window.getComputedStyle(t),r=G=>(n[G]||"").split(", "),o=r(`${lp}Delay`),l=r(`${lp}Duration`),h=Zk(o,l),p=r(`${q0}Delay`),i=r(`${q0}Duration`),b=Zk(p,i);let E=null,I=0,O=0;e===lp?h>0&&(E=lp,I=h,O=l.length):e===q0?b>0&&(E=q0,I=b,O=i.length):(I=Math.max(h,b),E=I>0?h>b?lp:q0:null,O=E?E===lp?l.length:i.length:0);const M=E===lp&&/\b(transform|all)(,|$)/.test(r(`${lp}Property`).toString());return{type:E,timeout:I,propCount:O,hasTransform:M}}function Zk(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>Yk(n)+Yk(t[r])))}function Yk(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function gX(){return document.body.offsetHeight}function yX(t,e,n){const r=t[r1];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const dC=Symbol("_vod"),c8=Symbol("_vsh"),_X={beforeMount(t,{value:e},{transition:n}){t[dC]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):W0(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),W0(t,!0),r.enter(t)):r.leave(t,()=>{W0(t,!1)}):W0(t,e))},beforeUnmount(t,{value:e}){W0(t,e)}};function W0(t,e){t.style.display=e?t[dC]:"none",t[c8]=!e}const vX=Symbol(""),bX=/(^|;)\s*display\s*:/;function wX(t,e,n){const r=t.style,o=ia(n);let l=!1;if(n&&!o){if(e)if(ia(e))for(const h of e.split(";")){const p=h.slice(0,h.indexOf(":")).trim();n[p]==null&&Sx(r,p,"")}else for(const h in e)n[h]==null&&Sx(r,h,"");for(const h in n)h==="display"&&(l=!0),Sx(r,h,n[h])}else if(o){if(e!==n){const h=r[vX];h&&(n+=";"+h),r.cssText=n,l=bX.test(n)}}else e&&t.removeAttribute("style");dC in t&&(t[dC]=l?r.display:"",t[c8]&&(r.display="none"))}const Jk=/\s*!important$/;function Sx(t,e,n){if(li(n))n.forEach(r=>Sx(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=xX(t,e);Jk.test(n)?t.setProperty(cm(r),n.replace(Jk,""),"important"):t[r]=n}}const eM=["Webkit","Moz","ms"],JS={};function xX(t,e){const n=JS[e];if(n)return n;let r=Ad(e);if(r!=="filter"&&r in t)return JS[e]=r;r=uE(r);for(let o=0;o<eM.length;o++){const l=eM[o]+r;if(l in t)return JS[e]=l}return e}const tM="http://www.w3.org/1999/xlink";function nM(t,e,n,r,o,l=Cq(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(tM,e.slice(6,e.length)):t.setAttributeNS(tM,e,n):n==null||l&&!iN(n)?t.removeAttribute(e):t.setAttribute(e,l?"":hf(n)?String(n):n)}function CX(t,e,n,r){if(e==="innerHTML"||e==="textContent"){if(n==null)return;t[e]=n;return}const o=t.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){const h=o==="OPTION"?t.getAttribute("value")||"":t.value,p=n==null?"":String(n);(h!==p||!("_value"in t))&&(t.value=p),n==null&&t.removeAttribute(e),t._value=n;return}let l=!1;if(n===""||n==null){const h=typeof t[e];h==="boolean"?n=iN(n):n==null&&h==="string"?(n="",l=!0):h==="number"&&(n=0,l=!0)}try{t[e]=n}catch{}l&&t.removeAttribute(e)}function rA(t,e,n,r){t.addEventListener(e,n,r)}function EX(t,e,n,r){t.removeEventListener(e,n,r)}const rM=Symbol("_vei");function BX(t,e,n,r,o=null){const l=t[rM]||(t[rM]={}),h=l[e];if(r&&h)h.value=r;else{const[p,i]=SX(e);if(r){const b=l[e]=PX(r,o);rA(t,p,b,i)}else h&&(EX(t,p,h,i),l[e]=void 0)}}const iM=/(?:Once|Passive|Capture)$/;function SX(t){let e;if(iM.test(t)){e={};let r;for(;r=t.match(iM);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):cm(t.slice(2)),e]}let e2=0;const TX=Promise.resolve(),IX=()=>e2||(TX.then(()=>e2=0),e2=Date.now());function PX(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Ph(LX(r,n.value),e,5,[r])};return n.value=t,n.attached=IX(),n}function LX(t,e){if(li(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>o=>!o._stopped&&r&&r(o))}else return e}const oM=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,FX=(t,e,n,r,o,l)=>{const h=o==="svg";e==="class"?yX(t,r,h):e==="style"?wX(t,n,r):lE(e)?k5(e)||BX(t,e,n,r,l):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):RX(t,e,r,h))?(CX(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&nM(t,e,r,h,l,e!=="value")):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),nM(t,e,r,h))};function RX(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&oM(e)&&Pi(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const o=t.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return oM(e)&&ia(n)?!1:e in t}const Zp=t=>{const e=t.props["onUpdate:modelValue"]||!1;return li(e)?n=>xx(e,n):e};function kX(t){t.target.composing=!0}function sM(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Fh=Symbol("_assign"),Ol={created(t,{modifiers:{lazy:e,trim:n,number:r}},o){t[Fh]=Zp(o);const l=r||o.props&&o.props.type==="number";rA(t,e?"change":"input",h=>{if(h.target.composing)return;let p=t.value;n&&(p=p.trim()),l&&(p=oC(p)),t[Fh](p)}),n&&rA(t,"change",()=>{t.value=t.value.trim()}),e||(rA(t,"compositionstart",kX),rA(t,"compositionend",sM),rA(t,"change",sM))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:o,number:l}},h){if(t[Fh]=Zp(h),t.composing)return;const p=(l||t.type==="number")&&!/^0\d/.test(t.value)?oC(t.value):t.value,i=e??"";p!==i&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||o&&t.value.trim()===i)||(t.value=i))}},MX={deep:!0,created(t,e,n){t[Fh]=Zp(n),rA(t,"change",()=>{const r=t._modelValue,o=f_(t),l=t.checked,h=t[Fh];if(li(r)){const p=D5(r,o),i=p!==-1;if(l&&!i)h(r.concat(o));else if(!l&&i){const b=[...r];b.splice(p,1),h(b)}}else if(U_(r)){const p=new Set(r);l?p.add(o):p.delete(o),h(p)}else h(u8(t,l))})},mounted:aM,beforeUpdate(t,e,n){t[Fh]=Zp(n),aM(t,e,n)}};function aM(t,{value:e,oldValue:n},r){t._modelValue=e,li(e)?t.checked=D5(e,r.props.value)>-1:U_(e)?t.checked=e.has(r.props.value):e!==n&&(t.checked=pg(e,u8(t,!0)))}const OX={created(t,{value:e},n){t.checked=pg(e,n.props.value),t[Fh]=Zp(n),rA(t,"change",()=>{t[Fh](f_(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[Fh]=Zp(r),e!==n&&(t.checked=pg(e,r.props.value))}},t4={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const o=U_(e);rA(t,"change",()=>{const l=Array.prototype.filter.call(t.options,h=>h.selected).map(h=>n?oC(f_(h)):f_(h));t[Fh](t.multiple?o?new Set(l):l:l[0]),t._assigning=!0,Lh(()=>{t._assigning=!1})}),t[Fh]=Zp(r)},mounted(t,{value:e,modifiers:{number:n}}){lM(t,e)},beforeUpdate(t,e,n){t[Fh]=Zp(n)},updated(t,{value:e,modifiers:{number:n}}){t._assigning||lM(t,e)}};function lM(t,e,n){const r=t.multiple,o=li(e);if(!(r&&!o&&!U_(e))){for(let l=0,h=t.options.length;l<h;l++){const p=t.options[l],i=f_(p);if(r)if(o){const b=typeof i;b==="string"||b==="number"?p.selected=e.some(E=>String(E)===String(i)):p.selected=D5(e,i)>-1}else p.selected=e.has(i);else if(pg(f_(p),e)){t.selectedIndex!==l&&(t.selectedIndex=l);return}}!r&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function f_(t){return"_value"in t?t._value:t.value}function u8(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const DX=["ctrl","shift","alt","meta"],UX={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>DX.some(n=>t[`${n}Key`]&&!e.includes(n))},gf=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(o,...l)=>{for(let h=0;h<e.length;h++){const p=UX[e[h]];if(p&&p(o,e))return}return t(o,...l)})},NX={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Tx=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=o=>{if(!("key"in o))return;const l=cm(o.key);if(e.some(h=>h===l||NX[h]===l))return t(o)})},zX=vl({patchProp:FX},dX);let cM;function VX(){return cM||(cM=DW(zX))}const QX=(...t)=>{const e=VX().createApp(...t),{mount:n}=e;return e.mount=r=>{const o=jX(r);if(!o)return;const l=e._component;!Pi(l)&&!l.render&&!l.template&&(l.template=o.innerHTML),o.innerHTML="";const h=n(o,!1,HX(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),h},e};function HX(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function jX(t){return ia(t)?document.querySelector(t):t}var Nc="top",ju="bottom",$u="right",zc="left",wE="auto",N_=[Nc,ju,$u,zc],yg="start",A_="end",h8="clippingParents",n4="viewport",Ty="popper",d8="reference",UT=N_.reduce(function(t,e){return t.concat([e+"-"+yg,e+"-"+A_])},[]),r4=[].concat(N_,[wE]).reduce(function(t,e){return t.concat([e,e+"-"+yg,e+"-"+A_])},[]),f8="beforeRead",A8="read",p8="afterRead",m8="beforeMain",g8="main",y8="afterMain",_8="beforeWrite",v8="write",b8="afterWrite",w8=[f8,A8,p8,m8,g8,y8,_8,v8,b8];function df(t){return t?(t.nodeName||"").toLowerCase():null}function Gu(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function _g(t){var e=Gu(t).Element;return t instanceof e||t instanceof Element}function Rh(t){var e=Gu(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function i4(t){if(typeof ShadowRoot>"u")return!1;var e=Gu(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function $X(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},o=e.attributes[n]||{},l=e.elements[n];!Rh(l)||!df(l)||(Object.assign(l.style,r),Object.keys(o).forEach(function(h){var p=o[h];p===!1?l.removeAttribute(h):l.setAttribute(h,p===!0?"":p)}))})}function GX(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var o=e.elements[r],l=e.attributes[r]||{},h=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),p=h.reduce(function(i,b){return i[b]="",i},{});!Rh(o)||!df(o)||(Object.assign(o.style,p),Object.keys(l).forEach(function(i){o.removeAttribute(i)}))})}}const o4={name:"applyStyles",enabled:!0,phase:"write",fn:$X,effect:GX,requires:["computeStyles"]};function nf(t){return t.split("-")[0]}var lg=Math.max,fC=Math.min,p_=Math.round;function NT(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function x8(){return!/^((?!chrome|android).)*safari/i.test(NT())}function m_(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),o=1,l=1;e&&Rh(t)&&(o=t.offsetWidth>0&&p_(r.width)/t.offsetWidth||1,l=t.offsetHeight>0&&p_(r.height)/t.offsetHeight||1);var h=_g(t)?Gu(t):window,p=h.visualViewport,i=!x8()&&n,b=(r.left+(i&&p?p.offsetLeft:0))/o,E=(r.top+(i&&p?p.offsetTop:0))/l,I=r.width/o,O=r.height/l;return{width:I,height:O,top:E,right:b+I,bottom:E+O,left:b,x:b,y:E}}function s4(t){var e=m_(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function C8(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&i4(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function mA(t){return Gu(t).getComputedStyle(t)}function KX(t){return["table","td","th"].indexOf(df(t))>=0}function dm(t){return((_g(t)?t.ownerDocument:t.document)||window.document).documentElement}function xE(t){return df(t)==="html"?t:t.assignedSlot||t.parentNode||(i4(t)?t.host:null)||dm(t)}function uM(t){return!Rh(t)||mA(t).position==="fixed"?null:t.offsetParent}function qX(t){var e=/firefox/i.test(NT()),n=/Trident/i.test(NT());if(n&&Rh(t)){var r=mA(t);if(r.position==="fixed")return null}var o=xE(t);for(i4(o)&&(o=o.host);Rh(o)&&["html","body"].indexOf(df(o))<0;){var l=mA(o);if(l.transform!=="none"||l.perspective!=="none"||l.contain==="paint"||["transform","perspective"].indexOf(l.willChange)!==-1||e&&l.willChange==="filter"||e&&l.filter&&l.filter!=="none")return o;o=o.parentNode}return null}function Z1(t){for(var e=Gu(t),n=uM(t);n&&KX(n)&&mA(n).position==="static";)n=uM(n);return n&&(df(n)==="html"||df(n)==="body"&&mA(n).position==="static")?e:n||qX(t)||e}function a4(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Ov(t,e,n){return lg(t,fC(e,n))}function WX(t,e,n){var r=Ov(t,e,n);return r>n?n:r}function E8(){return{top:0,right:0,bottom:0,left:0}}function B8(t){return Object.assign({},E8(),t)}function S8(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var XX=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,B8(typeof e!="number"?e:S8(e,N_))};function ZX(t){var e,n=t.state,r=t.name,o=t.options,l=n.elements.arrow,h=n.modifiersData.popperOffsets,p=nf(n.placement),i=a4(p),b=[zc,$u].indexOf(p)>=0,E=b?"height":"width";if(!(!l||!h)){var I=XX(o.padding,n),O=s4(l),M=i==="y"?Nc:zc,G=i==="y"?ju:$u,q=n.rects.reference[E]+n.rects.reference[i]-h[i]-n.rects.popper[E],Z=h[i]-n.rects.reference[i],Y=Z1(l),te=Y?i==="y"?Y.clientHeight||0:Y.clientWidth||0:0,be=q/2-Z/2,Pe=I[M],Se=te-O[E]-I[G],Ie=te/2-O[E]/2+be,Ae=Ov(Pe,Ie,Se),ne=i;n.modifiersData[r]=(e={},e[ne]=Ae,e.centerOffset=Ae-Ie,e)}}function YX(t){var e=t.state,n=t.options,r=n.element,o=r===void 0?"[data-popper-arrow]":r;o!=null&&(typeof o=="string"&&(o=e.elements.popper.querySelector(o),!o)||C8(e.elements.popper,o)&&(e.elements.arrow=o))}const T8={name:"arrow",enabled:!0,phase:"main",fn:ZX,effect:YX,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function g_(t){return t.split("-")[1]}var JX={top:"auto",right:"auto",bottom:"auto",left:"auto"};function eZ(t,e){var n=t.x,r=t.y,o=e.devicePixelRatio||1;return{x:p_(n*o)/o||0,y:p_(r*o)/o||0}}function hM(t){var e,n=t.popper,r=t.popperRect,o=t.placement,l=t.variation,h=t.offsets,p=t.position,i=t.gpuAcceleration,b=t.adaptive,E=t.roundOffsets,I=t.isFixed,O=h.x,M=O===void 0?0:O,G=h.y,q=G===void 0?0:G,Z=typeof E=="function"?E({x:M,y:q}):{x:M,y:q};M=Z.x,q=Z.y;var Y=h.hasOwnProperty("x"),te=h.hasOwnProperty("y"),be=zc,Pe=Nc,Se=window;if(b){var Ie=Z1(n),Ae="clientHeight",ne="clientWidth";if(Ie===Gu(n)&&(Ie=dm(n),mA(Ie).position!=="static"&&p==="absolute"&&(Ae="scrollHeight",ne="scrollWidth")),Ie=Ie,o===Nc||(o===zc||o===$u)&&l===A_){Pe=ju;var ue=I&&Ie===Se&&Se.visualViewport?Se.visualViewport.height:Ie[Ae];q-=ue-r.height,q*=i?1:-1}if(o===zc||(o===Nc||o===ju)&&l===A_){be=$u;var ye=I&&Ie===Se&&Se.visualViewport?Se.visualViewport.width:Ie[ne];M-=ye-r.width,M*=i?1:-1}}var se=Object.assign({position:p},b&&JX),le=E===!0?eZ({x:M,y:q},Gu(n)):{x:M,y:q};if(M=le.x,q=le.y,i){var ge;return Object.assign({},se,(ge={},ge[Pe]=te?"0":"",ge[be]=Y?"0":"",ge.transform=(Se.devicePixelRatio||1)<=1?"translate("+M+"px, "+q+"px)":"translate3d("+M+"px, "+q+"px, 0)",ge))}return Object.assign({},se,(e={},e[Pe]=te?q+"px":"",e[be]=Y?M+"px":"",e.transform="",e))}function tZ(t){var e=t.state,n=t.options,r=n.gpuAcceleration,o=r===void 0?!0:r,l=n.adaptive,h=l===void 0?!0:l,p=n.roundOffsets,i=p===void 0?!0:p,b={placement:nf(e.placement),variation:g_(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:o,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,hM(Object.assign({},b,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:h,roundOffsets:i})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,hM(Object.assign({},b,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:i})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const l4={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:tZ,data:{}};var Iw={passive:!0};function nZ(t){var e=t.state,n=t.instance,r=t.options,o=r.scroll,l=o===void 0?!0:o,h=r.resize,p=h===void 0?!0:h,i=Gu(e.elements.popper),b=[].concat(e.scrollParents.reference,e.scrollParents.popper);return l&&b.forEach(function(E){E.addEventListener("scroll",n.update,Iw)}),p&&i.addEventListener("resize",n.update,Iw),function(){l&&b.forEach(function(E){E.removeEventListener("scroll",n.update,Iw)}),p&&i.removeEventListener("resize",n.update,Iw)}}const c4={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:nZ,data:{}};var rZ={left:"right",right:"left",bottom:"top",top:"bottom"};function Ix(t){return t.replace(/left|right|bottom|top/g,function(e){return rZ[e]})}var iZ={start:"end",end:"start"};function dM(t){return t.replace(/start|end/g,function(e){return iZ[e]})}function u4(t){var e=Gu(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function h4(t){return m_(dm(t)).left+u4(t).scrollLeft}function oZ(t,e){var n=Gu(t),r=dm(t),o=n.visualViewport,l=r.clientWidth,h=r.clientHeight,p=0,i=0;if(o){l=o.width,h=o.height;var b=x8();(b||!b&&e==="fixed")&&(p=o.offsetLeft,i=o.offsetTop)}return{width:l,height:h,x:p+h4(t),y:i}}function sZ(t){var e,n=dm(t),r=u4(t),o=(e=t.ownerDocument)==null?void 0:e.body,l=lg(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),h=lg(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),p=-r.scrollLeft+h4(t),i=-r.scrollTop;return mA(o||n).direction==="rtl"&&(p+=lg(n.clientWidth,o?o.clientWidth:0)-l),{width:l,height:h,x:p,y:i}}function d4(t){var e=mA(t),n=e.overflow,r=e.overflowX,o=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+r)}function I8(t){return["html","body","#document"].indexOf(df(t))>=0?t.ownerDocument.body:Rh(t)&&d4(t)?t:I8(xE(t))}function Dv(t,e){var n;e===void 0&&(e=[]);var r=I8(t),o=r===((n=t.ownerDocument)==null?void 0:n.body),l=Gu(r),h=o?[l].concat(l.visualViewport||[],d4(r)?r:[]):r,p=e.concat(h);return o?p:p.concat(Dv(xE(h)))}function zT(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function aZ(t,e){var n=m_(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function fM(t,e,n){return e===n4?zT(oZ(t,n)):_g(e)?aZ(e,n):zT(sZ(dm(t)))}function lZ(t){var e=Dv(xE(t)),n=["absolute","fixed"].indexOf(mA(t).position)>=0,r=n&&Rh(t)?Z1(t):t;return _g(r)?e.filter(function(o){return _g(o)&&C8(o,r)&&df(o)!=="body"}):[]}function cZ(t,e,n,r){var o=e==="clippingParents"?lZ(t):[].concat(e),l=[].concat(o,[n]),h=l[0],p=l.reduce(function(i,b){var E=fM(t,b,r);return i.top=lg(E.top,i.top),i.right=fC(E.right,i.right),i.bottom=fC(E.bottom,i.bottom),i.left=lg(E.left,i.left),i},fM(t,h,r));return p.width=p.right-p.left,p.height=p.bottom-p.top,p.x=p.left,p.y=p.top,p}function P8(t){var e=t.reference,n=t.element,r=t.placement,o=r?nf(r):null,l=r?g_(r):null,h=e.x+e.width/2-n.width/2,p=e.y+e.height/2-n.height/2,i;switch(o){case Nc:i={x:h,y:e.y-n.height};break;case ju:i={x:h,y:e.y+e.height};break;case $u:i={x:e.x+e.width,y:p};break;case zc:i={x:e.x-n.width,y:p};break;default:i={x:e.x,y:e.y}}var b=o?a4(o):null;if(b!=null){var E=b==="y"?"height":"width";switch(l){case yg:i[b]=i[b]-(e[E]/2-n[E]/2);break;case A_:i[b]=i[b]+(e[E]/2-n[E]/2);break}}return i}function y_(t,e){e===void 0&&(e={});var n=e,r=n.placement,o=r===void 0?t.placement:r,l=n.strategy,h=l===void 0?t.strategy:l,p=n.boundary,i=p===void 0?h8:p,b=n.rootBoundary,E=b===void 0?n4:b,I=n.elementContext,O=I===void 0?Ty:I,M=n.altBoundary,G=M===void 0?!1:M,q=n.padding,Z=q===void 0?0:q,Y=B8(typeof Z!="number"?Z:S8(Z,N_)),te=O===Ty?d8:Ty,be=t.rects.popper,Pe=t.elements[G?te:O],Se=cZ(_g(Pe)?Pe:Pe.contextElement||dm(t.elements.popper),i,E,h),Ie=m_(t.elements.reference),Ae=P8({reference:Ie,element:be,strategy:"absolute",placement:o}),ne=zT(Object.assign({},be,Ae)),ue=O===Ty?ne:Ie,ye={top:Se.top-ue.top+Y.top,bottom:ue.bottom-Se.bottom+Y.bottom,left:Se.left-ue.left+Y.left,right:ue.right-Se.right+Y.right},se=t.modifiersData.offset;if(O===Ty&&se){var le=se[o];Object.keys(ye).forEach(function(ge){var lt=[$u,ju].indexOf(ge)>=0?1:-1,Ot=[Nc,ju].indexOf(ge)>=0?"y":"x";ye[ge]+=le[Ot]*lt})}return ye}function uZ(t,e){e===void 0&&(e={});var n=e,r=n.placement,o=n.boundary,l=n.rootBoundary,h=n.padding,p=n.flipVariations,i=n.allowedAutoPlacements,b=i===void 0?r4:i,E=g_(r),I=E?p?UT:UT.filter(function(G){return g_(G)===E}):N_,O=I.filter(function(G){return b.indexOf(G)>=0});O.length===0&&(O=I);var M=O.reduce(function(G,q){return G[q]=y_(t,{placement:q,boundary:o,rootBoundary:l,padding:h})[nf(q)],G},{});return Object.keys(M).sort(function(G,q){return M[G]-M[q]})}function hZ(t){if(nf(t)===wE)return[];var e=Ix(t);return[dM(t),e,dM(e)]}function dZ(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var o=n.mainAxis,l=o===void 0?!0:o,h=n.altAxis,p=h===void 0?!0:h,i=n.fallbackPlacements,b=n.padding,E=n.boundary,I=n.rootBoundary,O=n.altBoundary,M=n.flipVariations,G=M===void 0?!0:M,q=n.allowedAutoPlacements,Z=e.options.placement,Y=nf(Z),te=Y===Z,be=i||(te||!G?[Ix(Z)]:hZ(Z)),Pe=[Z].concat(be).reduce(function(We,vt){return We.concat(nf(vt)===wE?uZ(e,{placement:vt,boundary:E,rootBoundary:I,padding:b,flipVariations:G,allowedAutoPlacements:q}):vt)},[]),Se=e.rects.reference,Ie=e.rects.popper,Ae=new Map,ne=!0,ue=Pe[0],ye=0;ye<Pe.length;ye++){var se=Pe[ye],le=nf(se),ge=g_(se)===yg,lt=[Nc,ju].indexOf(le)>=0,Ot=lt?"width":"height",gt=y_(e,{placement:se,boundary:E,rootBoundary:I,altBoundary:O,padding:b}),Tt=lt?ge?$u:zc:ge?ju:Nc;Se[Ot]>Ie[Ot]&&(Tt=Ix(Tt));var Mt=Ix(Tt),on=[];if(l&&on.push(gt[le]<=0),p&&on.push(gt[Tt]<=0,gt[Mt]<=0),on.every(function(We){return We})){ue=se,ne=!1;break}Ae.set(se,on)}if(ne)for(var Ut=G?3:1,In=function(vt){var _t=Pe.find(function(at){var Ft=Ae.get(at);if(Ft)return Ft.slice(0,vt).every(function(Dt){return Dt})});if(_t)return ue=_t,"break"},Ee=Ut;Ee>0;Ee--){var $e=In(Ee);if($e==="break")break}e.placement!==ue&&(e.modifiersData[r]._skip=!0,e.placement=ue,e.reset=!0)}}const L8={name:"flip",enabled:!0,phase:"main",fn:dZ,requiresIfExists:["offset"],data:{_skip:!1}};function AM(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function pM(t){return[Nc,$u,ju,zc].some(function(e){return t[e]>=0})}function fZ(t){var e=t.state,n=t.name,r=e.rects.reference,o=e.rects.popper,l=e.modifiersData.preventOverflow,h=y_(e,{elementContext:"reference"}),p=y_(e,{altBoundary:!0}),i=AM(h,r),b=AM(p,o,l),E=pM(i),I=pM(b);e.modifiersData[n]={referenceClippingOffsets:i,popperEscapeOffsets:b,isReferenceHidden:E,hasPopperEscaped:I},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":E,"data-popper-escaped":I})}const F8={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:fZ};function AZ(t,e,n){var r=nf(t),o=[zc,Nc].indexOf(r)>=0?-1:1,l=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,h=l[0],p=l[1];return h=h||0,p=(p||0)*o,[zc,$u].indexOf(r)>=0?{x:p,y:h}:{x:h,y:p}}function pZ(t){var e=t.state,n=t.options,r=t.name,o=n.offset,l=o===void 0?[0,0]:o,h=r4.reduce(function(E,I){return E[I]=AZ(I,e.rects,l),E},{}),p=h[e.placement],i=p.x,b=p.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=i,e.modifiersData.popperOffsets.y+=b),e.modifiersData[r]=h}const R8={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:pZ};function mZ(t){var e=t.state,n=t.name;e.modifiersData[n]=P8({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const f4={name:"popperOffsets",enabled:!0,phase:"read",fn:mZ,data:{}};function gZ(t){return t==="x"?"y":"x"}function yZ(t){var e=t.state,n=t.options,r=t.name,o=n.mainAxis,l=o===void 0?!0:o,h=n.altAxis,p=h===void 0?!1:h,i=n.boundary,b=n.rootBoundary,E=n.altBoundary,I=n.padding,O=n.tether,M=O===void 0?!0:O,G=n.tetherOffset,q=G===void 0?0:G,Z=y_(e,{boundary:i,rootBoundary:b,padding:I,altBoundary:E}),Y=nf(e.placement),te=g_(e.placement),be=!te,Pe=a4(Y),Se=gZ(Pe),Ie=e.modifiersData.popperOffsets,Ae=e.rects.reference,ne=e.rects.popper,ue=typeof q=="function"?q(Object.assign({},e.rects,{placement:e.placement})):q,ye=typeof ue=="number"?{mainAxis:ue,altAxis:ue}:Object.assign({mainAxis:0,altAxis:0},ue),se=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,le={x:0,y:0};if(Ie){if(l){var ge,lt=Pe==="y"?Nc:zc,Ot=Pe==="y"?ju:$u,gt=Pe==="y"?"height":"width",Tt=Ie[Pe],Mt=Tt+Z[lt],on=Tt-Z[Ot],Ut=M?-ne[gt]/2:0,In=te===yg?Ae[gt]:ne[gt],Ee=te===yg?-ne[gt]:-Ae[gt],$e=e.elements.arrow,We=M&&$e?s4($e):{width:0,height:0},vt=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:E8(),_t=vt[lt],at=vt[Ot],Ft=Ov(0,Ae[gt],We[gt]),Dt=be?Ae[gt]/2-Ut-Ft-_t-ye.mainAxis:In-Ft-_t-ye.mainAxis,yn=be?-Ae[gt]/2+Ut+Ft+at+ye.mainAxis:Ee+Ft+at+ye.mainAxis,De=e.elements.arrow&&Z1(e.elements.arrow),jn=De?Pe==="y"?De.clientTop||0:De.clientLeft||0:0,Te=(ge=se==null?void 0:se[Pe])!=null?ge:0,Je=Tt+Dt-Te-jn,Fe=Tt+yn-Te,Re=Ov(M?fC(Mt,Je):Mt,Tt,M?lg(on,Fe):on);Ie[Pe]=Re,le[Pe]=Re-Tt}if(p){var Yt,rn=Pe==="x"?Nc:zc,zt=Pe==="x"?ju:$u,Jt=Ie[Se],gn=Se==="y"?"height":"width",fn=Jt+Z[rn],Fn=Jt-Z[zt],Wn=[Nc,zc].indexOf(Y)!==-1,_n=(Yt=se==null?void 0:se[Se])!=null?Yt:0,er=Wn?fn:Jt-Ae[gn]-ne[gn]-_n+ye.altAxis,ar=Wn?Jt+Ae[gn]+ne[gn]-_n-ye.altAxis:Fn,Fr=M&&Wn?WX(er,Jt,ar):Ov(M?er:fn,Jt,M?ar:Fn);Ie[Se]=Fr,le[Se]=Fr-Jt}e.modifiersData[r]=le}}const k8={name:"preventOverflow",enabled:!0,phase:"main",fn:yZ,requiresIfExists:["offset"]};function _Z(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function vZ(t){return t===Gu(t)||!Rh(t)?u4(t):_Z(t)}function bZ(t){var e=t.getBoundingClientRect(),n=p_(e.width)/t.offsetWidth||1,r=p_(e.height)/t.offsetHeight||1;return n!==1||r!==1}function wZ(t,e,n){n===void 0&&(n=!1);var r=Rh(e),o=Rh(e)&&bZ(e),l=dm(e),h=m_(t,o,n),p={scrollLeft:0,scrollTop:0},i={x:0,y:0};return(r||!r&&!n)&&((df(e)!=="body"||d4(l))&&(p=vZ(e)),Rh(e)?(i=m_(e,!0),i.x+=e.clientLeft,i.y+=e.clientTop):l&&(i.x=h4(l))),{x:h.left+p.scrollLeft-i.x,y:h.top+p.scrollTop-i.y,width:h.width,height:h.height}}function xZ(t){var e=new Map,n=new Set,r=[];t.forEach(function(l){e.set(l.name,l)});function o(l){n.add(l.name);var h=[].concat(l.requires||[],l.requiresIfExists||[]);h.forEach(function(p){if(!n.has(p)){var i=e.get(p);i&&o(i)}}),r.push(l)}return t.forEach(function(l){n.has(l.name)||o(l)}),r}function CZ(t){var e=xZ(t);return w8.reduce(function(n,r){return n.concat(e.filter(function(o){return o.phase===r}))},[])}function EZ(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function BZ(t){var e=t.reduce(function(n,r){var o=n[r.name];return n[r.name]=o?Object.assign({},o,r,{options:Object.assign({},o.options,r.options),data:Object.assign({},o.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var mM={placement:"bottom",modifiers:[],strategy:"absolute"};function gM(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function CE(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,o=e.defaultOptions,l=o===void 0?mM:o;return function(p,i,b){b===void 0&&(b=l);var E={placement:"bottom",orderedModifiers:[],options:Object.assign({},mM,l),modifiersData:{},elements:{reference:p,popper:i},attributes:{},styles:{}},I=[],O=!1,M={state:E,setOptions:function(Y){var te=typeof Y=="function"?Y(E.options):Y;q(),E.options=Object.assign({},l,E.options,te),E.scrollParents={reference:_g(p)?Dv(p):p.contextElement?Dv(p.contextElement):[],popper:Dv(i)};var be=CZ(BZ([].concat(r,E.options.modifiers)));return E.orderedModifiers=be.filter(function(Pe){return Pe.enabled}),G(),M.update()},forceUpdate:function(){if(!O){var Y=E.elements,te=Y.reference,be=Y.popper;if(gM(te,be)){E.rects={reference:wZ(te,Z1(be),E.options.strategy==="fixed"),popper:s4(be)},E.reset=!1,E.placement=E.options.placement,E.orderedModifiers.forEach(function(ye){return E.modifiersData[ye.name]=Object.assign({},ye.data)});for(var Pe=0;Pe<E.orderedModifiers.length;Pe++){if(E.reset===!0){E.reset=!1,Pe=-1;continue}var Se=E.orderedModifiers[Pe],Ie=Se.fn,Ae=Se.options,ne=Ae===void 0?{}:Ae,ue=Se.name;typeof Ie=="function"&&(E=Ie({state:E,options:ne,name:ue,instance:M})||E)}}}},update:EZ(function(){return new Promise(function(Z){M.forceUpdate(),Z(E)})}),destroy:function(){q(),O=!0}};if(!gM(p,i))return M;M.setOptions(b).then(function(Z){!O&&b.onFirstUpdate&&b.onFirstUpdate(Z)});function G(){E.orderedModifiers.forEach(function(Z){var Y=Z.name,te=Z.options,be=te===void 0?{}:te,Pe=Z.effect;if(typeof Pe=="function"){var Se=Pe({state:E,name:Y,instance:M,options:be}),Ie=function(){};I.push(Se||Ie)}})}function q(){I.forEach(function(Z){return Z()}),I=[]}return M}}var SZ=CE(),TZ=[c4,f4,l4,o4],IZ=CE({defaultModifiers:TZ}),PZ=[c4,f4,l4,o4,R8,L8,k8,T8,F8],A4=CE({defaultModifiers:PZ});const M8=Object.freeze(Object.defineProperty({__proto__:null,afterMain:y8,afterRead:p8,afterWrite:b8,applyStyles:o4,arrow:T8,auto:wE,basePlacements:N_,beforeMain:m8,beforeRead:f8,beforeWrite:_8,bottom:ju,clippingParents:h8,computeStyles:l4,createPopper:A4,createPopperBase:SZ,createPopperLite:IZ,detectOverflow:y_,end:A_,eventListeners:c4,flip:L8,hide:F8,left:zc,main:g8,modifierPhases:w8,offset:R8,placements:r4,popper:Ty,popperGenerator:CE,popperOffsets:f4,preventOverflow:k8,read:A8,reference:d8,right:$u,start:yg,top:Nc,variationPlacements:UT,viewport:n4,write:v8},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const up=new Map,t2={set(t,e,n){up.has(t)||up.set(t,new Map);const r=up.get(t);if(!r.has(e)&&r.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(r.keys())[0]}.`);return}r.set(e,n)},get(t,e){return up.has(t)&&up.get(t).get(e)||null},remove(t,e){if(!up.has(t))return;const n=up.get(t);n.delete(e),n.size===0&&up.delete(t)}},LZ=1e6,FZ=1e3,VT="transitionend",O8=t=>(t&&window.CSS&&window.CSS.escape&&(t=t.replace(/#([^\s"#']+)/g,(e,n)=>`#${CSS.escape(n)}`)),t),RZ=t=>t==null?`${t}`:Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),kZ=t=>{do t+=Math.floor(Math.random()*LZ);while(document.getElementById(t));return t},MZ=t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t);const r=Number.parseFloat(e),o=Number.parseFloat(n);return!r&&!o?0:(e=e.split(",")[0],n=n.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(n))*FZ)},D8=t=>{t.dispatchEvent(new Event(VT))},uA=t=>!t||typeof t!="object"?!1:(typeof t.jquery<"u"&&(t=t[0]),typeof t.nodeType<"u"),Yp=t=>uA(t)?t.jquery?t[0]:t:typeof t=="string"&&t.length>0?document.querySelector(O8(t)):null,z_=t=>{if(!uA(t)||t.getClientRects().length===0)return!1;const e=getComputedStyle(t).getPropertyValue("visibility")==="visible",n=t.closest("details:not([open])");if(!n)return e;if(n!==t){const r=t.closest("summary");if(r&&r.parentNode!==n||r===null)return!1}return e},Jp=t=>!t||t.nodeType!==Node.ELEMENT_NODE||t.classList.contains("disabled")?!0:typeof t.disabled<"u"?t.disabled:t.hasAttribute("disabled")&&t.getAttribute("disabled")!=="false",U8=t=>{if(!document.documentElement.attachShadow)return null;if(typeof t.getRootNode=="function"){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?U8(t.parentNode):null},AC=()=>{},Y1=t=>{t.offsetHeight},N8=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,n2=[],OZ=t=>{document.readyState==="loading"?(n2.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of n2)e()}),n2.push(t)):t()},kh=()=>document.documentElement.dir==="rtl",Oh=t=>{OZ(()=>{const e=N8();if(e){const n=t.NAME,r=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=r,t.jQueryInterface)}})},cu=(t,e=[],n=t)=>typeof t=="function"?t(...e):n,z8=(t,e,n=!0)=>{if(!n){cu(t);return}const o=MZ(e)+5;let l=!1;const h=({target:p})=>{p===e&&(l=!0,e.removeEventListener(VT,h),cu(t))};e.addEventListener(VT,h),setTimeout(()=>{l||D8(e)},o)},p4=(t,e,n,r)=>{const o=t.length;let l=t.indexOf(e);return l===-1?!n&&r?t[o-1]:t[0]:(l+=n?1:-1,r&&(l=(l+o)%o),t[Math.max(0,Math.min(l,o-1))])},DZ=/[^.]*(?=\..*)\.|.*/,UZ=/\..*/,NZ=/::\d+$/,r2={};let yM=1;const V8={mouseenter:"mouseover",mouseleave:"mouseout"},zZ=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Q8(t,e){return e&&`${e}::${yM++}`||t.uidEvent||yM++}function H8(t){const e=Q8(t);return t.uidEvent=e,r2[e]=r2[e]||{},r2[e]}function VZ(t,e){return function n(r){return m4(r,{delegateTarget:t}),n.oneOff&&cr.off(t,r.type,e),e.apply(t,[r])}}function QZ(t,e,n){return function r(o){const l=t.querySelectorAll(e);for(let{target:h}=o;h&&h!==this;h=h.parentNode)for(const p of l)if(p===h)return m4(o,{delegateTarget:h}),r.oneOff&&cr.off(t,o.type,e,n),n.apply(h,[o])}}function j8(t,e,n=null){return Object.values(t).find(r=>r.callable===e&&r.delegationSelector===n)}function $8(t,e,n){const r=typeof e=="string",o=r?n:e||n;let l=G8(t);return zZ.has(l)||(l=t),[r,o,l]}function _M(t,e,n,r,o){if(typeof e!="string"||!t)return;let[l,h,p]=$8(e,n,r);e in V8&&(h=(G=>function(q){if(!q.relatedTarget||q.relatedTarget!==q.delegateTarget&&!q.delegateTarget.contains(q.relatedTarget))return G.call(this,q)})(h));const i=H8(t),b=i[p]||(i[p]={}),E=j8(b,h,l?n:null);if(E){E.oneOff=E.oneOff&&o;return}const I=Q8(h,e.replace(DZ,"")),O=l?QZ(t,n,h):VZ(t,h);O.delegationSelector=l?n:null,O.callable=h,O.oneOff=o,O.uidEvent=I,b[I]=O,t.addEventListener(p,O,l)}function QT(t,e,n,r,o){const l=j8(e[n],r,o);l&&(t.removeEventListener(n,l,!!o),delete e[n][l.uidEvent])}function HZ(t,e,n,r){const o=e[n]||{};for(const[l,h]of Object.entries(o))l.includes(r)&&QT(t,e,n,h.callable,h.delegationSelector)}function G8(t){return t=t.replace(UZ,""),V8[t]||t}const cr={on(t,e,n,r){_M(t,e,n,r,!1)},one(t,e,n,r){_M(t,e,n,r,!0)},off(t,e,n,r){if(typeof e!="string"||!t)return;const[o,l,h]=$8(e,n,r),p=h!==e,i=H8(t),b=i[h]||{},E=e.startsWith(".");if(typeof l<"u"){if(!Object.keys(b).length)return;QT(t,i,h,l,o?n:null);return}if(E)for(const I of Object.keys(i))HZ(t,i,I,e.slice(1));for(const[I,O]of Object.entries(b)){const M=I.replace(NZ,"");(!p||e.includes(M))&&QT(t,i,h,O.callable,O.delegationSelector)}},trigger(t,e,n){if(typeof e!="string"||!t)return null;const r=N8(),o=G8(e),l=e!==o;let h=null,p=!0,i=!0,b=!1;l&&r&&(h=r.Event(e,n),r(t).trigger(h),p=!h.isPropagationStopped(),i=!h.isImmediatePropagationStopped(),b=h.isDefaultPrevented());const E=m4(new Event(e,{bubbles:p,cancelable:!0}),n);return b&&E.preventDefault(),i&&t.dispatchEvent(E),E.defaultPrevented&&h&&h.preventDefault(),E}};function m4(t,e={}){for(const[n,r]of Object.entries(e))try{t[n]=r}catch{Object.defineProperty(t,n,{configurable:!0,get(){return r}})}return t}function vM(t){if(t==="true")return!0;if(t==="false")return!1;if(t===Number(t).toString())return Number(t);if(t===""||t==="null")return null;if(typeof t!="string")return t;try{return JSON.parse(decodeURIComponent(t))}catch{return t}}function i2(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const hA={setDataAttribute(t,e,n){t.setAttribute(`data-bs-${i2(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${i2(e)}`)},getDataAttributes(t){if(!t)return{};const e={},n=Object.keys(t.dataset).filter(r=>r.startsWith("bs")&&!r.startsWith("bsConfig"));for(const r of n){let o=r.replace(/^bs/,"");o=o.charAt(0).toLowerCase()+o.slice(1,o.length),e[o]=vM(t.dataset[r])}return e},getDataAttribute(t,e){return vM(t.getAttribute(`data-bs-${i2(e)}`))}};class J1{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,n){const r=uA(n)?hA.getDataAttribute(n,"config"):{};return{...this.constructor.Default,...typeof r=="object"?r:{},...uA(n)?hA.getDataAttributes(n):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,n=this.constructor.DefaultType){for(const[r,o]of Object.entries(n)){const l=e[r],h=uA(l)?"element":RZ(l);if(!new RegExp(o).test(h))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${r}" provided type "${h}" but expected type "${o}".`)}}}const jZ="5.3.3";class gd extends J1{constructor(e,n){super(),e=Yp(e),e&&(this._element=e,this._config=this._getConfig(n),t2.set(this._element,this.constructor.DATA_KEY,this))}dispose(){t2.remove(this._element,this.constructor.DATA_KEY),cr.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,n,r=!0){z8(e,n,r)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return t2.get(Yp(e),this.DATA_KEY)}static getOrCreateInstance(e,n={}){return this.getInstance(e)||new this(e,typeof n=="object"?n:null)}static get VERSION(){return jZ}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const o2=t=>{let e=t.getAttribute("data-bs-target");if(!e||e==="#"){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&n!=="#"?n.trim():null}return e?e.split(",").map(n=>O8(n)).join(","):null},ui={find(t,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t,e=document.documentElement){return Element.prototype.querySelector.call(e,t)},children(t,e){return[].concat(...t.children).filter(n=>n.matches(e))},parents(t,e){const n=[];let r=t.parentNode.closest(e);for(;r;)n.push(r),r=r.parentNode.closest(e);return n},prev(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(n=>`${n}:not([tabindex^="-"])`).join(",");return this.find(e,t).filter(n=>!Jp(n)&&z_(n))},getSelectorFromElement(t){const e=o2(t);return e&&ui.findOne(e)?e:null},getElementFromSelector(t){const e=o2(t);return e?ui.findOne(e):null},getMultipleElementsFromSelector(t){const e=o2(t);return e?ui.find(e):[]}},EE=(t,e="hide")=>{const n=`click.dismiss${t.EVENT_KEY}`,r=t.NAME;cr.on(document,n,`[data-bs-dismiss="${r}"]`,function(o){if(["A","AREA"].includes(this.tagName)&&o.preventDefault(),Jp(this))return;const l=ui.getElementFromSelector(this)||this.closest(`.${r}`);t.getOrCreateInstance(l)[e]()})},$Z="alert",GZ="bs.alert",K8=`.${GZ}`,KZ=`close${K8}`,qZ=`closed${K8}`,WZ="fade",XZ="show";class BE extends gd{static get NAME(){return $Z}close(){if(cr.trigger(this._element,KZ).defaultPrevented)return;this._element.classList.remove(XZ);const n=this._element.classList.contains(WZ);this._queueCallback(()=>this._destroyElement(),this._element,n)}_destroyElement(){this._element.remove(),cr.trigger(this._element,qZ),this.dispose()}static jQueryInterface(e){return this.each(function(){const n=BE.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}EE(BE,"close");Oh(BE);const ZZ="button",YZ="bs.button",JZ=`.${YZ}`,eY=".data-api",tY="active",bM='[data-bs-toggle="button"]',nY=`click${JZ}${eY}`;class SE extends gd{static get NAME(){return ZZ}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(tY))}static jQueryInterface(e){return this.each(function(){const n=SE.getOrCreateInstance(this);e==="toggle"&&n[e]()})}}cr.on(document,nY,bM,t=>{t.preventDefault();const e=t.target.closest(bM);SE.getOrCreateInstance(e).toggle()});Oh(SE);const rY="swipe",V_=".bs.swipe",iY=`touchstart${V_}`,oY=`touchmove${V_}`,sY=`touchend${V_}`,aY=`pointerdown${V_}`,lY=`pointerup${V_}`,cY="touch",uY="pen",hY="pointer-event",dY=40,fY={endCallback:null,leftCallback:null,rightCallback:null},AY={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class pC extends J1{constructor(e,n){super(),this._element=e,!(!e||!pC.isSupported())&&(this._config=this._getConfig(n),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return fY}static get DefaultType(){return AY}static get NAME(){return rY}dispose(){cr.off(this._element,V_)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),cu(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=dY)return;const n=e/this._deltaX;this._deltaX=0,n&&cu(n>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(cr.on(this._element,aY,e=>this._start(e)),cr.on(this._element,lY,e=>this._end(e)),this._element.classList.add(hY)):(cr.on(this._element,iY,e=>this._start(e)),cr.on(this._element,oY,e=>this._move(e)),cr.on(this._element,sY,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===uY||e.pointerType===cY)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const pY="carousel",mY="bs.carousel",fm=`.${mY}`,q8=".data-api",gY="ArrowLeft",yY="ArrowRight",_Y=500,X0="next",py="prev",Iy="left",Px="right",vY=`slide${fm}`,s2=`slid${fm}`,bY=`keydown${fm}`,wY=`mouseenter${fm}`,xY=`mouseleave${fm}`,CY=`dragstart${fm}`,EY=`load${fm}${q8}`,BY=`click${fm}${q8}`,W8="carousel",Pw="active",SY="slide",TY="carousel-item-end",IY="carousel-item-start",PY="carousel-item-next",LY="carousel-item-prev",X8=".active",Z8=".carousel-item",FY=X8+Z8,RY=".carousel-item img",kY=".carousel-indicators",MY="[data-bs-slide], [data-bs-slide-to]",OY='[data-bs-ride="carousel"]',DY={[gY]:Px,[yY]:Iy},UY={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},NY={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Q_ extends gd{constructor(e,n){super(e,n),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=ui.findOne(kY,this._element),this._addEventListeners(),this._config.ride===W8&&this.cycle()}static get Default(){return UY}static get DefaultType(){return NY}static get NAME(){return pY}next(){this._slide(X0)}nextWhenVisible(){!document.hidden&&z_(this._element)&&this.next()}prev(){this._slide(py)}pause(){this._isSliding&&D8(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){cr.one(this._element,s2,()=>this.cycle());return}this.cycle()}}to(e){const n=this._getItems();if(e>n.length-1||e<0)return;if(this._isSliding){cr.one(this._element,s2,()=>this.to(e));return}const r=this._getItemIndex(this._getActive());if(r===e)return;const o=e>r?X0:py;this._slide(o,n[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&cr.on(this._element,bY,e=>this._keydown(e)),this._config.pause==="hover"&&(cr.on(this._element,wY,()=>this.pause()),cr.on(this._element,xY,()=>this._maybeEnableCycle())),this._config.touch&&pC.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const r of ui.find(RY,this._element))cr.on(r,CY,o=>o.preventDefault());const n={leftCallback:()=>this._slide(this._directionToOrder(Iy)),rightCallback:()=>this._slide(this._directionToOrder(Px)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),_Y+this._config.interval))}};this._swipeHelper=new pC(this._element,n)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const n=DY[e.key];n&&(e.preventDefault(),this._slide(this._directionToOrder(n)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const n=ui.findOne(X8,this._indicatorsElement);n.classList.remove(Pw),n.removeAttribute("aria-current");const r=ui.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);r&&(r.classList.add(Pw),r.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const n=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=n||this._config.defaultInterval}_slide(e,n=null){if(this._isSliding)return;const r=this._getActive(),o=e===X0,l=n||p4(this._getItems(),r,o,this._config.wrap);if(l===r)return;const h=this._getItemIndex(l),p=M=>cr.trigger(this._element,M,{relatedTarget:l,direction:this._orderToDirection(e),from:this._getItemIndex(r),to:h});if(p(vY).defaultPrevented||!r||!l)return;const b=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(h),this._activeElement=l;const E=o?IY:TY,I=o?PY:LY;l.classList.add(I),Y1(l),r.classList.add(E),l.classList.add(E);const O=()=>{l.classList.remove(E,I),l.classList.add(Pw),r.classList.remove(Pw,I,E),this._isSliding=!1,p(s2)};this._queueCallback(O,r,this._isAnimated()),b&&this.cycle()}_isAnimated(){return this._element.classList.contains(SY)}_getActive(){return ui.findOne(FY,this._element)}_getItems(){return ui.find(Z8,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return kh()?e===Iy?py:X0:e===Iy?X0:py}_orderToDirection(e){return kh()?e===py?Iy:Px:e===py?Px:Iy}static jQueryInterface(e){return this.each(function(){const n=Q_.getOrCreateInstance(this,e);if(typeof e=="number"){n.to(e);return}if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}cr.on(document,BY,MY,function(t){const e=ui.getElementFromSelector(this);if(!e||!e.classList.contains(W8))return;t.preventDefault();const n=Q_.getOrCreateInstance(e),r=this.getAttribute("data-bs-slide-to");if(r){n.to(r),n._maybeEnableCycle();return}if(hA.getDataAttribute(this,"slide")==="next"){n.next(),n._maybeEnableCycle();return}n.prev(),n._maybeEnableCycle()});cr.on(window,EY,()=>{const t=ui.find(OY);for(const e of t)Q_.getOrCreateInstance(e)});Oh(Q_);const zY="collapse",VY="bs.collapse",eb=`.${VY}`,QY=".data-api",HY=`show${eb}`,jY=`shown${eb}`,$Y=`hide${eb}`,GY=`hidden${eb}`,KY=`click${eb}${QY}`,a2="show",Qy="collapse",Lw="collapsing",qY="collapsed",WY=`:scope .${Qy} .${Qy}`,XY="collapse-horizontal",ZY="width",YY="height",JY=".collapse.show, .collapse.collapsing",HT='[data-bs-toggle="collapse"]',eJ={parent:null,toggle:!0},tJ={parent:"(null|element)",toggle:"boolean"};class __ extends gd{constructor(e,n){super(e,n),this._isTransitioning=!1,this._triggerArray=[];const r=ui.find(HT);for(const o of r){const l=ui.getSelectorFromElement(o),h=ui.find(l).filter(p=>p===this._element);l!==null&&h.length&&this._triggerArray.push(o)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return eJ}static get DefaultType(){return tJ}static get NAME(){return zY}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(JY).filter(p=>p!==this._element).map(p=>__.getOrCreateInstance(p,{toggle:!1}))),e.length&&e[0]._isTransitioning||cr.trigger(this._element,HY).defaultPrevented)return;for(const p of e)p.hide();const r=this._getDimension();this._element.classList.remove(Qy),this._element.classList.add(Lw),this._element.style[r]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const o=()=>{this._isTransitioning=!1,this._element.classList.remove(Lw),this._element.classList.add(Qy,a2),this._element.style[r]="",cr.trigger(this._element,jY)},h=`scroll${r[0].toUpperCase()+r.slice(1)}`;this._queueCallback(o,this._element,!0),this._element.style[r]=`${this._element[h]}px`}hide(){if(this._isTransitioning||!this._isShown()||cr.trigger(this._element,$Y).defaultPrevented)return;const n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,Y1(this._element),this._element.classList.add(Lw),this._element.classList.remove(Qy,a2);for(const o of this._triggerArray){const l=ui.getElementFromSelector(o);l&&!this._isShown(l)&&this._addAriaAndCollapsedClass([o],!1)}this._isTransitioning=!0;const r=()=>{this._isTransitioning=!1,this._element.classList.remove(Lw),this._element.classList.add(Qy),cr.trigger(this._element,GY)};this._element.style[n]="",this._queueCallback(r,this._element,!0)}_isShown(e=this._element){return e.classList.contains(a2)}_configAfterMerge(e){return e.toggle=!!e.toggle,e.parent=Yp(e.parent),e}_getDimension(){return this._element.classList.contains(XY)?ZY:YY}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(HT);for(const n of e){const r=ui.getElementFromSelector(n);r&&this._addAriaAndCollapsedClass([n],this._isShown(r))}}_getFirstLevelChildren(e){const n=ui.find(WY,this._config.parent);return ui.find(e,this._config.parent).filter(r=>!n.includes(r))}_addAriaAndCollapsedClass(e,n){if(e.length)for(const r of e)r.classList.toggle(qY,!n),r.setAttribute("aria-expanded",n)}static jQueryInterface(e){const n={};return typeof e=="string"&&/show|hide/.test(e)&&(n.toggle=!1),this.each(function(){const r=__.getOrCreateInstance(this,n);if(typeof e=="string"){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e]()}})}}cr.on(document,KY,HT,function(t){(t.target.tagName==="A"||t.delegateTarget&&t.delegateTarget.tagName==="A")&&t.preventDefault();for(const e of ui.getMultipleElementsFromSelector(this))__.getOrCreateInstance(e,{toggle:!1}).toggle()});Oh(__);const wM="dropdown",nJ="bs.dropdown",Ig=`.${nJ}`,g4=".data-api",rJ="Escape",xM="Tab",iJ="ArrowUp",CM="ArrowDown",oJ=2,sJ=`hide${Ig}`,aJ=`hidden${Ig}`,lJ=`show${Ig}`,cJ=`shown${Ig}`,Y8=`click${Ig}${g4}`,J8=`keydown${Ig}${g4}`,uJ=`keyup${Ig}${g4}`,Py="show",hJ="dropup",dJ="dropend",fJ="dropstart",AJ="dropup-center",pJ="dropdown-center",tg='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',mJ=`${tg}.${Py}`,Lx=".dropdown-menu",gJ=".navbar",yJ=".navbar-nav",_J=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",vJ=kh()?"top-end":"top-start",bJ=kh()?"top-start":"top-end",wJ=kh()?"bottom-end":"bottom-start",xJ=kh()?"bottom-start":"bottom-end",CJ=kh()?"left-start":"right-start",EJ=kh()?"right-start":"left-start",BJ="top",SJ="bottom",TJ={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},IJ={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class fd extends gd{constructor(e,n){super(e,n),this._popper=null,this._parent=this._element.parentNode,this._menu=ui.next(this._element,Lx)[0]||ui.prev(this._element,Lx)[0]||ui.findOne(Lx,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return TJ}static get DefaultType(){return IJ}static get NAME(){return wM}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Jp(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!cr.trigger(this._element,lJ,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(yJ))for(const r of[].concat(...document.body.children))cr.on(r,"mouseover",AC);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Py),this._element.classList.add(Py),cr.trigger(this._element,cJ,e)}}hide(){if(Jp(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!cr.trigger(this._element,sJ,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))cr.off(r,"mouseover",AC);this._popper&&this._popper.destroy(),this._menu.classList.remove(Py),this._element.classList.remove(Py),this._element.setAttribute("aria-expanded","false"),hA.removeDataAttribute(this._menu,"popper"),cr.trigger(this._element,aJ,e)}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!uA(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${wM.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof M8>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;this._config.reference==="parent"?e=this._parent:uA(this._config.reference)?e=Yp(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const n=this._getPopperConfig();this._popper=A4(e,this._menu,n)}_isShown(){return this._menu.classList.contains(Py)}_getPlacement(){const e=this._parent;if(e.classList.contains(dJ))return CJ;if(e.classList.contains(fJ))return EJ;if(e.classList.contains(AJ))return BJ;if(e.classList.contains(pJ))return SJ;const n=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(hJ)?n?bJ:vJ:n?xJ:wJ}_detectNavbar(){return this._element.closest(gJ)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(hA.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...cu(this._config.popperConfig,[e])}}_selectMenuItem({key:e,target:n}){const r=ui.find(_J,this._menu).filter(o=>z_(o));r.length&&p4(r,n,e===CM,!r.includes(n)).focus()}static jQueryInterface(e){return this.each(function(){const n=fd.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}static clearMenus(e){if(e.button===oJ||e.type==="keyup"&&e.key!==xM)return;const n=ui.find(mJ);for(const r of n){const o=fd.getInstance(r);if(!o||o._config.autoClose===!1)continue;const l=e.composedPath(),h=l.includes(o._menu);if(l.includes(o._element)||o._config.autoClose==="inside"&&!h||o._config.autoClose==="outside"&&h||o._menu.contains(e.target)&&(e.type==="keyup"&&e.key===xM||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const p={relatedTarget:o._element};e.type==="click"&&(p.clickEvent=e),o._completeHide(p)}}static dataApiKeydownHandler(e){const n=/input|textarea/i.test(e.target.tagName),r=e.key===rJ,o=[iJ,CM].includes(e.key);if(!o&&!r||n&&!r)return;e.preventDefault();const l=this.matches(tg)?this:ui.prev(this,tg)[0]||ui.next(this,tg)[0]||ui.findOne(tg,e.delegateTarget.parentNode),h=fd.getOrCreateInstance(l);if(o){e.stopPropagation(),h.show(),h._selectMenuItem(e);return}h._isShown()&&(e.stopPropagation(),h.hide(),l.focus())}}cr.on(document,J8,tg,fd.dataApiKeydownHandler);cr.on(document,J8,Lx,fd.dataApiKeydownHandler);cr.on(document,Y8,fd.clearMenus);cr.on(document,uJ,fd.clearMenus);cr.on(document,Y8,tg,function(t){t.preventDefault(),fd.getOrCreateInstance(this).toggle()});Oh(fd);const ez="backdrop",PJ="fade",EM="show",BM=`mousedown.bs.${ez}`,LJ={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},FJ={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class tz extends J1{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return LJ}static get DefaultType(){return FJ}static get NAME(){return ez}show(e){if(!this._config.isVisible){cu(e);return}this._append();const n=this._getElement();this._config.isAnimated&&Y1(n),n.classList.add(EM),this._emulateAnimation(()=>{cu(e)})}hide(e){if(!this._config.isVisible){cu(e);return}this._getElement().classList.remove(EM),this._emulateAnimation(()=>{this.dispose(),cu(e)})}dispose(){this._isAppended&&(cr.off(this._element,BM),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(PJ),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=Yp(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),cr.on(e,BM,()=>{cu(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){z8(e,this._getElement(),this._config.isAnimated)}}const RJ="focustrap",kJ="bs.focustrap",mC=`.${kJ}`,MJ=`focusin${mC}`,OJ=`keydown.tab${mC}`,DJ="Tab",UJ="forward",SM="backward",NJ={autofocus:!0,trapElement:null},zJ={autofocus:"boolean",trapElement:"element"};let nz=class extends J1{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return NJ}static get DefaultType(){return zJ}static get NAME(){return RJ}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),cr.off(document,mC),cr.on(document,MJ,e=>this._handleFocusin(e)),cr.on(document,OJ,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,cr.off(document,mC))}_handleFocusin(e){const{trapElement:n}=this._config;if(e.target===document||e.target===n||n.contains(e.target))return;const r=ui.focusableChildren(n);r.length===0?n.focus():this._lastTabNavDirection===SM?r[r.length-1].focus():r[0].focus()}_handleKeydown(e){e.key===DJ&&(this._lastTabNavDirection=e.shiftKey?SM:UJ)}};const TM=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",IM=".sticky-top",Fw="padding-right",PM="margin-right";class jT{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Fw,n=>n+e),this._setElementAttributes(TM,Fw,n=>n+e),this._setElementAttributes(IM,PM,n=>n-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Fw),this._resetElementAttributes(TM,Fw),this._resetElementAttributes(IM,PM)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,n,r){const o=this.getWidth(),l=h=>{if(h!==this._element&&window.innerWidth>h.clientWidth+o)return;this._saveInitialAttribute(h,n);const p=window.getComputedStyle(h).getPropertyValue(n);h.style.setProperty(n,`${r(Number.parseFloat(p))}px`)};this._applyManipulationCallback(e,l)}_saveInitialAttribute(e,n){const r=e.style.getPropertyValue(n);r&&hA.setDataAttribute(e,n,r)}_resetElementAttributes(e,n){const r=o=>{const l=hA.getDataAttribute(o,n);if(l===null){o.style.removeProperty(n);return}hA.removeDataAttribute(o,n),o.style.setProperty(n,l)};this._applyManipulationCallback(e,r)}_applyManipulationCallback(e,n){if(uA(e)){n(e);return}for(const r of ui.find(e,this._element))n(r)}}const VJ="modal",QJ="bs.modal",Mh=`.${QJ}`,HJ=".data-api",jJ="Escape",$J=`hide${Mh}`,GJ=`hidePrevented${Mh}`,rz=`hidden${Mh}`,iz=`show${Mh}`,KJ=`shown${Mh}`,qJ=`resize${Mh}`,WJ=`click.dismiss${Mh}`,XJ=`mousedown.dismiss${Mh}`,ZJ=`keydown.dismiss${Mh}`,YJ=`click${Mh}${HJ}`,LM="modal-open",JJ="fade",FM="show",l2="modal-static",eee=".modal.show",tee=".modal-dialog",nee=".modal-body",ree='[data-bs-toggle="modal"]',iee={backdrop:!0,focus:!0,keyboard:!0},oee={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class v_ extends gd{constructor(e,n){super(e,n),this._dialog=ui.findOne(tee,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new jT,this._addEventListeners()}static get Default(){return iee}static get DefaultType(){return oee}static get NAME(){return VJ}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||cr.trigger(this._element,iz,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(LM),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||cr.trigger(this._element,$J).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(FM),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){cr.off(window,Mh),cr.off(this._dialog,Mh),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new tz({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new nz({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const n=ui.findOne(nee,this._dialog);n&&(n.scrollTop=0),Y1(this._element),this._element.classList.add(FM);const r=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,cr.trigger(this._element,KJ,{relatedTarget:e})};this._queueCallback(r,this._dialog,this._isAnimated())}_addEventListeners(){cr.on(this._element,ZJ,e=>{if(e.key===jJ){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),cr.on(window,qJ,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),cr.on(this._element,XJ,e=>{cr.one(this._element,WJ,n=>{if(!(this._element!==e.target||this._element!==n.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(LM),this._resetAdjustments(),this._scrollBar.reset(),cr.trigger(this._element,rz)})}_isAnimated(){return this._element.classList.contains(JJ)}_triggerBackdropTransition(){if(cr.trigger(this._element,GJ).defaultPrevented)return;const n=this._element.scrollHeight>document.documentElement.clientHeight,r=this._element.style.overflowY;r==="hidden"||this._element.classList.contains(l2)||(n||(this._element.style.overflowY="hidden"),this._element.classList.add(l2),this._queueCallback(()=>{this._element.classList.remove(l2),this._queueCallback(()=>{this._element.style.overflowY=r},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,n=this._scrollBar.getWidth(),r=n>0;if(r&&!e){const o=kh()?"paddingLeft":"paddingRight";this._element.style[o]=`${n}px`}if(!r&&e){const o=kh()?"paddingRight":"paddingLeft";this._element.style[o]=`${n}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,n){return this.each(function(){const r=v_.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e](n)}})}}cr.on(document,YJ,ree,function(t){const e=ui.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),cr.one(e,iz,o=>{o.defaultPrevented||cr.one(e,rz,()=>{z_(this)&&this.focus()})});const n=ui.findOne(eee);n&&v_.getInstance(n).hide(),v_.getOrCreateInstance(e).toggle(this)});EE(v_);Oh(v_);const see="offcanvas",aee="bs.offcanvas",EA=`.${aee}`,oz=".data-api",lee=`load${EA}${oz}`,cee="Escape",RM="show",kM="showing",MM="hiding",uee="offcanvas-backdrop",sz=".offcanvas.show",hee=`show${EA}`,dee=`shown${EA}`,fee=`hide${EA}`,OM=`hidePrevented${EA}`,az=`hidden${EA}`,Aee=`resize${EA}`,pee=`click${EA}${oz}`,mee=`keydown.dismiss${EA}`,gee='[data-bs-toggle="offcanvas"]',yee={backdrop:!0,keyboard:!0,scroll:!1},_ee={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class gA extends gd{constructor(e,n){super(e,n),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return yee}static get DefaultType(){return _ee}static get NAME(){return see}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||cr.trigger(this._element,hee,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new jT().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(kM);const r=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(RM),this._element.classList.remove(kM),cr.trigger(this._element,dee,{relatedTarget:e})};this._queueCallback(r,this._element,!0)}hide(){if(!this._isShown||cr.trigger(this._element,fee).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(MM),this._backdrop.hide();const n=()=>{this._element.classList.remove(RM,MM),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new jT().reset(),cr.trigger(this._element,az)};this._queueCallback(n,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){cr.trigger(this._element,OM);return}this.hide()},n=!!this._config.backdrop;return new tz({className:uee,isVisible:n,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:n?e:null})}_initializeFocusTrap(){return new nz({trapElement:this._element})}_addEventListeners(){cr.on(this._element,mee,e=>{if(e.key===cee){if(this._config.keyboard){this.hide();return}cr.trigger(this._element,OM)}})}static jQueryInterface(e){return this.each(function(){const n=gA.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}cr.on(document,pee,gee,function(t){const e=ui.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),Jp(this))return;cr.one(e,az,()=>{z_(this)&&this.focus()});const n=ui.findOne(sz);n&&n!==e&&gA.getInstance(n).hide(),gA.getOrCreateInstance(e).toggle(this)});cr.on(window,lee,()=>{for(const t of ui.find(sz))gA.getOrCreateInstance(t).show()});cr.on(window,Aee,()=>{for(const t of ui.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(t).position!=="fixed"&&gA.getOrCreateInstance(t).hide()});EE(gA);Oh(gA);const vee=/^aria-[\w-]*$/i,lz={"*":["class","dir","id","lang","role",vee],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},bee=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),wee=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,xee=(t,e)=>{const n=t.nodeName.toLowerCase();return e.includes(n)?bee.has(n)?!!wee.test(t.nodeValue):!0:e.filter(r=>r instanceof RegExp).some(r=>r.test(n))};function Cee(t,e,n){if(!t.length)return t;if(n&&typeof n=="function")return n(t);const o=new window.DOMParser().parseFromString(t,"text/html"),l=[].concat(...o.body.querySelectorAll("*"));for(const h of l){const p=h.nodeName.toLowerCase();if(!Object.keys(e).includes(p)){h.remove();continue}const i=[].concat(...h.attributes),b=[].concat(e["*"]||[],e[p]||[]);for(const E of i)xee(E,b)||h.removeAttribute(E.nodeName)}return o.body.innerHTML}const Eee="TemplateFactory",Bee={allowList:lz,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},See={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Tee={entry:"(string|element|function|null)",selector:"(string|element)"};class Iee extends J1{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return Bee}static get DefaultType(){return See}static get NAME(){return Eee}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[o,l]of Object.entries(this._config.content))this._setContent(e,l,o);const n=e.children[0],r=this._resolvePossibleFunction(this._config.extraClass);return r&&n.classList.add(...r.split(" ")),n}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[n,r]of Object.entries(e))super._typeCheckConfig({selector:n,entry:r},Tee)}_setContent(e,n,r){const o=ui.findOne(r,e);if(o){if(n=this._resolvePossibleFunction(n),!n){o.remove();return}if(uA(n)){this._putElementInTemplate(Yp(n),o);return}if(this._config.html){o.innerHTML=this._maybeSanitize(n);return}o.textContent=n}}_maybeSanitize(e){return this._config.sanitize?Cee(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return cu(e,[this])}_putElementInTemplate(e,n){if(this._config.html){n.innerHTML="",n.append(e);return}n.textContent=e.textContent}}const Pee="tooltip",Lee=new Set(["sanitize","allowList","sanitizeFn"]),c2="fade",Fee="modal",Rw="show",Ree=".tooltip-inner",DM=`.${Fee}`,UM="hide.bs.modal",Z0="hover",u2="focus",kee="click",Mee="manual",Oee="hide",Dee="hidden",Uee="show",Nee="shown",zee="inserted",Vee="click",Qee="focusin",Hee="focusout",jee="mouseenter",$ee="mouseleave",Gee={AUTO:"auto",TOP:"top",RIGHT:kh()?"left":"right",BOTTOM:"bottom",LEFT:kh()?"right":"left"},Kee={allowList:lz,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},qee={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class dA extends gd{constructor(e,n){if(typeof M8>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,n),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Kee}static get DefaultType(){return qee}static get NAME(){return Pee}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),cr.off(this._element.closest(DM),UM,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const e=cr.trigger(this._element,this.constructor.eventName(Uee)),r=(U8(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!r)return;this._disposePopper();const o=this._getTipElement();this._element.setAttribute("aria-describedby",o.getAttribute("id"));const{container:l}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(l.append(o),cr.trigger(this._element,this.constructor.eventName(zee))),this._popper=this._createPopper(o),o.classList.add(Rw),"ontouchstart"in document.documentElement)for(const p of[].concat(...document.body.children))cr.on(p,"mouseover",AC);const h=()=>{cr.trigger(this._element,this.constructor.eventName(Nee)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(h,this.tip,this._isAnimated())}hide(){if(!this._isShown()||cr.trigger(this._element,this.constructor.eventName(Oee)).defaultPrevented)return;if(this._getTipElement().classList.remove(Rw),"ontouchstart"in document.documentElement)for(const o of[].concat(...document.body.children))cr.off(o,"mouseover",AC);this._activeTrigger[kee]=!1,this._activeTrigger[u2]=!1,this._activeTrigger[Z0]=!1,this._isHovered=null;const r=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),cr.trigger(this._element,this.constructor.eventName(Dee)))};this._queueCallback(r,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const n=this._getTemplateFactory(e).toHtml();if(!n)return null;n.classList.remove(c2,Rw),n.classList.add(`bs-${this.constructor.NAME}-auto`);const r=kZ(this.constructor.NAME).toString();return n.setAttribute("id",r),this._isAnimated()&&n.classList.add(c2),n}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new Iee({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Ree]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(c2)}_isShown(){return this.tip&&this.tip.classList.contains(Rw)}_createPopper(e){const n=cu(this._config.placement,[this,e,this._element]),r=Gee[n.toUpperCase()];return A4(this._element,e,this._getPopperConfig(r))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_resolvePossibleFunction(e){return cu(e,[this._element])}_getPopperConfig(e){const n={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:r=>{this._getTipElement().setAttribute("data-popper-placement",r.state.placement)}}]};return{...n,...cu(this._config.popperConfig,[n])}}_setListeners(){const e=this._config.trigger.split(" ");for(const n of e)if(n==="click")cr.on(this._element,this.constructor.eventName(Vee),this._config.selector,r=>{this._initializeOnDelegatedTarget(r).toggle()});else if(n!==Mee){const r=n===Z0?this.constructor.eventName(jee):this.constructor.eventName(Qee),o=n===Z0?this.constructor.eventName($ee):this.constructor.eventName(Hee);cr.on(this._element,r,this._config.selector,l=>{const h=this._initializeOnDelegatedTarget(l);h._activeTrigger[l.type==="focusin"?u2:Z0]=!0,h._enter()}),cr.on(this._element,o,this._config.selector,l=>{const h=this._initializeOnDelegatedTarget(l);h._activeTrigger[l.type==="focusout"?u2:Z0]=h._element.contains(l.relatedTarget),h._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},cr.on(this._element.closest(DM),UM,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,n){clearTimeout(this._timeout),this._timeout=setTimeout(e,n)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const n=hA.getDataAttributes(this._element);for(const r of Object.keys(n))Lee.has(r)&&delete n[r];return e={...n,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:Yp(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[n,r]of Object.entries(this._config))this.constructor.Default[n]!==r&&(e[n]=r);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const n=dA.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}Oh(dA);const Wee="popover",Xee=".popover-header",Zee=".popover-body",Yee={...dA.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Jee={...dA.DefaultType,content:"(null|string|element|function)"};class b_ extends dA{static get Default(){return Yee}static get DefaultType(){return Jee}static get NAME(){return Wee}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Xee]:this._getTitle(),[Zee]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const n=b_.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}Oh(b_);const ete="scrollspy",tte="bs.scrollspy",y4=`.${tte}`,nte=".data-api",rte=`activate${y4}`,NM=`click${y4}`,ite=`load${y4}${nte}`,ote="dropdown-item",my="active",ste='[data-bs-spy="scroll"]',h2="[href]",ate=".nav, .list-group",zM=".nav-link",lte=".nav-item",cte=".list-group-item",ute=`${zM}, ${lte} > ${zM}, ${cte}`,hte=".dropdown",dte=".dropdown-toggle",fte={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Ate={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class TE extends gd{constructor(e,n){super(e,n),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return fte}static get DefaultType(){return Ate}static get NAME(){return ete}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=Yp(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(n=>Number.parseFloat(n))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(cr.off(this._config.target,NM),cr.on(this._config.target,NM,h2,e=>{const n=this._observableSections.get(e.target.hash);if(n){e.preventDefault();const r=this._rootElement||window,o=n.offsetTop-this._element.offsetTop;if(r.scrollTo){r.scrollTo({top:o,behavior:"smooth"});return}r.scrollTop=o}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(n=>this._observerCallback(n),e)}_observerCallback(e){const n=h=>this._targetLinks.get(`#${h.target.id}`),r=h=>{this._previousScrollData.visibleEntryTop=h.target.offsetTop,this._process(n(h))},o=(this._rootElement||document.documentElement).scrollTop,l=o>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=o;for(const h of e){if(!h.isIntersecting){this._activeTarget=null,this._clearActiveClass(n(h));continue}const p=h.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(l&&p){if(r(h),!o)return;continue}!l&&!p&&r(h)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=ui.find(h2,this._config.target);for(const n of e){if(!n.hash||Jp(n))continue;const r=ui.findOne(decodeURI(n.hash),this._element);z_(r)&&(this._targetLinks.set(decodeURI(n.hash),n),this._observableSections.set(n.hash,r))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(my),this._activateParents(e),cr.trigger(this._element,rte,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(ote)){ui.findOne(dte,e.closest(hte)).classList.add(my);return}for(const n of ui.parents(e,ate))for(const r of ui.prev(n,ute))r.classList.add(my)}_clearActiveClass(e){e.classList.remove(my);const n=ui.find(`${h2}.${my}`,e);for(const r of n)r.classList.remove(my)}static jQueryInterface(e){return this.each(function(){const n=TE.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}cr.on(window,ite,()=>{for(const t of ui.find(ste))TE.getOrCreateInstance(t)});Oh(TE);const pte="tab",mte="bs.tab",Pg=`.${mte}`,gte=`hide${Pg}`,yte=`hidden${Pg}`,_te=`show${Pg}`,vte=`shown${Pg}`,bte=`click${Pg}`,wte=`keydown${Pg}`,xte=`load${Pg}`,Cte="ArrowLeft",VM="ArrowRight",Ete="ArrowUp",QM="ArrowDown",d2="Home",HM="End",ng="active",jM="fade",f2="show",Bte="dropdown",cz=".dropdown-toggle",Ste=".dropdown-menu",A2=`:not(${cz})`,Tte='.list-group, .nav, [role="tablist"]',Ite=".nav-item, .list-group-item",Pte=`.nav-link${A2}, .list-group-item${A2}, [role="tab"]${A2}`,uz='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',p2=`${Pte}, ${uz}`,Lte=`.${ng}[data-bs-toggle="tab"], .${ng}[data-bs-toggle="pill"], .${ng}[data-bs-toggle="list"]`;class w_ extends gd{constructor(e){super(e),this._parent=this._element.closest(Tte),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),cr.on(this._element,wte,n=>this._keydown(n)))}static get NAME(){return pte}show(){const e=this._element;if(this._elemIsActive(e))return;const n=this._getActiveElem(),r=n?cr.trigger(n,gte,{relatedTarget:e}):null;cr.trigger(e,_te,{relatedTarget:n}).defaultPrevented||r&&r.defaultPrevented||(this._deactivate(n,e),this._activate(e,n))}_activate(e,n){if(!e)return;e.classList.add(ng),this._activate(ui.getElementFromSelector(e));const r=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(f2);return}e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),cr.trigger(e,vte,{relatedTarget:n})};this._queueCallback(r,e,e.classList.contains(jM))}_deactivate(e,n){if(!e)return;e.classList.remove(ng),e.blur(),this._deactivate(ui.getElementFromSelector(e));const r=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(f2);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),cr.trigger(e,yte,{relatedTarget:n})};this._queueCallback(r,e,e.classList.contains(jM))}_keydown(e){if(![Cte,VM,Ete,QM,d2,HM].includes(e.key))return;e.stopPropagation(),e.preventDefault();const n=this._getChildren().filter(o=>!Jp(o));let r;if([d2,HM].includes(e.key))r=n[e.key===d2?0:n.length-1];else{const o=[VM,QM].includes(e.key);r=p4(n,e.target,o,!0)}r&&(r.focus({preventScroll:!0}),w_.getOrCreateInstance(r).show())}_getChildren(){return ui.find(p2,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,n){this._setAttributeIfNotExists(e,"role","tablist");for(const r of n)this._setInitialAttributesOnChild(r)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const n=this._elemIsActive(e),r=this._getOuterElement(e);e.setAttribute("aria-selected",n),r!==e&&this._setAttributeIfNotExists(r,"role","presentation"),n||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const n=ui.getElementFromSelector(e);n&&(this._setAttributeIfNotExists(n,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(n,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,n){const r=this._getOuterElement(e);if(!r.classList.contains(Bte))return;const o=(l,h)=>{const p=ui.findOne(l,r);p&&p.classList.toggle(h,n)};o(cz,ng),o(Ste,f2),r.setAttribute("aria-expanded",n)}_setAttributeIfNotExists(e,n,r){e.hasAttribute(n)||e.setAttribute(n,r)}_elemIsActive(e){return e.classList.contains(ng)}_getInnerElement(e){return e.matches(p2)?e:ui.findOne(p2,e)}_getOuterElement(e){return e.closest(Ite)||e}static jQueryInterface(e){return this.each(function(){const n=w_.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}cr.on(document,bte,uz,function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),!Jp(this)&&w_.getOrCreateInstance(this).show()});cr.on(window,xte,()=>{for(const t of ui.find(Lte))w_.getOrCreateInstance(t)});Oh(w_);const Fte="toast",Rte="bs.toast",Am=`.${Rte}`,kte=`mouseover${Am}`,Mte=`mouseout${Am}`,Ote=`focusin${Am}`,Dte=`focusout${Am}`,Ute=`hide${Am}`,Nte=`hidden${Am}`,zte=`show${Am}`,Vte=`shown${Am}`,Qte="fade",$M="hide",kw="show",Mw="showing",Hte={animation:"boolean",autohide:"boolean",delay:"number"},jte={animation:!0,autohide:!0,delay:5e3};class IE extends gd{constructor(e,n){super(e,n),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return jte}static get DefaultType(){return Hte}static get NAME(){return Fte}show(){if(cr.trigger(this._element,zte).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(Qte);const n=()=>{this._element.classList.remove(Mw),cr.trigger(this._element,Vte),this._maybeScheduleHide()};this._element.classList.remove($M),Y1(this._element),this._element.classList.add(kw,Mw),this._queueCallback(n,this._element,this._config.animation)}hide(){if(!this.isShown()||cr.trigger(this._element,Ute).defaultPrevented)return;const n=()=>{this._element.classList.add($M),this._element.classList.remove(Mw,kw),cr.trigger(this._element,Nte)};this._element.classList.add(Mw),this._queueCallback(n,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(kw),super.dispose()}isShown(){return this._element.classList.contains(kw)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,n){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=n;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=n;break}}if(n){this._clearTimeout();return}const r=e.relatedTarget;this._element===r||this._element.contains(r)||this._maybeScheduleHide()}_setListeners(){cr.on(this._element,kte,e=>this._onInteraction(e,!0)),cr.on(this._element,Mte,e=>this._onInteraction(e,!1)),cr.on(this._element,Ote,e=>this._onInteraction(e,!0)),cr.on(this._element,Dte,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const n=IE.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}EE(IE);Oh(IE);var $te=Object.defineProperty,Gte=(t,e,n)=>e in t?$te(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ma=(t,e,n)=>(Gte(t,typeof e!="symbol"?e+"":e,n),n),Kte=Object.defineProperty,qte=Object.defineProperties,Wte=Object.getOwnPropertyDescriptors,GM=Object.getOwnPropertySymbols,Xte=Object.prototype.hasOwnProperty,Zte=Object.prototype.propertyIsEnumerable,KM=(t,e,n)=>e in t?Kte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Yte=(t,e)=>{for(var n in e||(e={}))Xte.call(e,n)&&KM(t,n,e[n]);if(GM)for(var n of GM(e))Zte.call(e,n)&&KM(t,n,e[n]);return t},Jte=(t,e)=>qte(t,Wte(e));function hz(t,e){var n;const r=xN();return kv(()=>{r.value=t()},Jte(Yte({},e),{flush:(n=void 0)!=null?n:"sync"})),h_(r)}var qM;const $T=typeof window<"u",ene=t=>typeof t=="function";$T&&((qM=window==null?void 0:window.navigator)!=null&&qM.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function dv(t){return typeof t=="function"?t():tt(t)}function tne(t){return t}function WM(t){return aN()?(Tq(t),!0):!1}function nne(t,e=1e3,n={}){const{immediate:r=!0,immediateCallback:o=!1}=n;let l=null;const h=yr(!1);function p(){l&&(clearInterval(l),l=null)}function i(){h.value=!1,p()}function b(){tt(e)<=0||(h.value=!0,o&&t(),p(),l=setInterval(t,dv(e)))}if(r&&$T&&b(),ga(e)||ene(e)){const E=Do(e,()=>{h.value&&$T&&b()});WM(E)}return WM(i),{isActive:h,pause:i,resume:b}}const XM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ZM="__vueuse_ssr_handlers__";XM[ZM]=XM[ZM]||{};var YM;(function(t){t.UP="UP",t.RIGHT="RIGHT",t.DOWN="DOWN",t.LEFT="LEFT",t.NONE="NONE"})(YM||(YM={}));var rne=Object.defineProperty,JM=Object.getOwnPropertySymbols,ine=Object.prototype.hasOwnProperty,one=Object.prototype.propertyIsEnumerable,eO=(t,e,n)=>e in t?rne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,sne=(t,e)=>{for(var n in e||(e={}))ine.call(e,n)&&eO(t,n,e[n]);if(JM)for(var n of JM(e))one.call(e,n)&&eO(t,n,e[n]);return t};const ane={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};sne({linear:tne},ane);const tb=t=>hz(()=>t.value?`justify-content-${t.value}`:"");class x_{constructor(e,n={}){if(ma(this,"cancelable",!0),ma(this,"componentId",null),ma(this,"_defaultPrevented",!1),ma(this,"eventType",""),ma(this,"nativeEvent",null),ma(this,"_preventDefault"),ma(this,"relatedTarget",null),ma(this,"target",null),!e)throw new TypeError(`Failed to construct '${this.constructor.name}'. 1 argument required, ${arguments.length} given.`);Object.assign(this,x_.Defaults,n,{eventType:e}),this._preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)}}get defaultPrevented(){return this._defaultPrevented}set defaultPrevented(e){this._defaultPrevented=e}get preventDefault(){return this._preventDefault}set preventDefault(e){this._preventDefault=e}static get Defaults(){return{cancelable:!0,componentId:null,eventType:"",nativeEvent:null,relatedTarget:null,target:null}}}class lne extends x_{constructor(e,n={}){super(e,n),ma(this,"trigger",null),Object.assign(this,x_.Defaults,n,{eventType:e})}static get Defaults(){return{...super.Defaults,trigger:null}}}const GT=t=>t!==null&&typeof t=="object",dz=t=>/^[0-9]*\.?[0-9]+$/.test(String(t)),cne=t=>Object.prototype.toString.call(t)==="[object Object]",Xf=t=>t===null,fz=/_/g,Az=/([a-z])([A-Z])/g,une=/(\s|^)(\w)/g,hne=/(\s|^)(\w)/,Fx=/\s+/,dne=/^#/,fne=/^#[A-Za-z]+[\w\-:.]*$/,Ane=/-u-.+/,gC=(t,e=2)=>typeof t=="string"?t:t==null?"":Array.isArray(t)||cne(t)&&t.toString===Object.prototype.toString?JSON.stringify(t,null,e):String(t),tO=t=>t.replace(fz," ").replace(Az,(e,n,r)=>`${n} ${r}`).replace(hne,(e,n,r)=>n+r.toUpperCase()),nO=t=>t.replace(fz," ").replace(Az,(e,n,r)=>`${n} ${r}`).replace(une,(e,n,r)=>n+r.toUpperCase()),pne=t=>{const e=t.trim();return e.charAt(0).toUpperCase()+e.slice(1)},m2=t=>`\\${t}`,mne=t=>{const e=gC(t),{length:n}=e,r=e.charCodeAt(0);return e.split("").reduce((o,l,h)=>{const p=e.charCodeAt(h);return p===0?`${o}�`:p===127||p>=1&&p<=31||h===0&&p>=48&&p<=57||h===1&&p>=48&&p<=57&&r===45?o+m2(`${p.toString(16)} `):h===0&&p===45&&n===1?o+m2(l):p>=128||p===45||p===95||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122?o+l:o+m2(l)},"")},_4=typeof window<"u",gne=typeof document<"u",yne=typeof navigator<"u",pz=_4&&gne&&yne,rO=_4?window:{},_ne=(()=>{let t=!1;if(pz)try{const e={get passive(){t=!0}};rO.addEventListener("test",e,e),rO.removeEventListener("test",e,e)}catch{t=!1}return t})(),mz=typeof window<"u",gz=typeof document<"u",vne=typeof Element<"u",yz=typeof navigator<"u",PE=mz&&gz&&yz,cg=mz?window:{},LE=gz?document:{},_z=yz?navigator:{},bne=(_z.userAgent||"").toLowerCase();bne.indexOf("jsdom")>0;(()=>{let t=!1;if(PE)try{const e={get passive(){return t=!0,t}};cg.addEventListener("test",e,e),cg.removeEventListener("test",e,e)}catch{t=!1}return t})();PE&&("ontouchstart"in LE.documentElement||_z.maxTouchPoints>0);PE&&(cg.PointerEvent||cg.MSPointerEvent);PE&&"IntersectionObserver"in cg&&"IntersectionObserverEntry"in cg&&"intersectionRatio"in cg.IntersectionObserverEntry.prototype;const xp=vne?Element.prototype:void 0,wne=(xp==null?void 0:xp.matches)||(xp==null?void 0:xp.msMatchesSelector)||(xp==null?void 0:xp.webkitMatchesSelector),yf=t=>!!(t&&t.nodeType===Node.ELEMENT_NODE),xne=t=>yf(t)?t.getBoundingClientRect():null,Cne=(t=[])=>{const{activeElement:e}=document;return e&&!t.some(n=>n===e)?e:null},Ene=t=>yf(t)&&t===Cne(),Bne=(t,e={})=>{try{t.focus(e)}catch(n){console.error(n)}return Ene(t)},Sne=(t,e)=>e&&yf(t)&&t.getAttribute(e)||null,Tne=t=>{if(Sne(t,"display")==="none")return!1;const e=xne(t);return!!(e&&e.height>0&&e.width>0)},Ku=(t,e)=>!t||t(e).filter(n=>n.type!==Uc).length<1,vz=(t,e)=>(yf(e)?e:LE).querySelector(t)||null,Ine=(t,e)=>Array.from([(yf(e)?e:LE).querySelectorAll(t)]),v4=(t,e)=>e&&yf(t)?t.getAttribute(e):null,Pne=t=>LE.getElementById(/^#/.test(t)?t.slice(1):t)||null,Lne=(t,e,n)=>{yf(t)&&t.setAttribute(e,n)},Fne=(t,e)=>{yf(t)&&t.removeAttribute(e)},Rne=(t,e)=>gC(t).toLowerCase()===gC(e).toLowerCase(),Ow=_4?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||(t=>setTimeout(t,16)):t=>setTimeout(t,0),bz=(t,e)=>yf(t)?wne.call(t,e):!1,kne=(xp==null?void 0:xp.closest)||function(t){let e=this;if(!e)return null;do{if(bz(e,t))return e;e=e.parentElement||e.parentNode}while(e!==null&&e.nodeType===Node.ELEMENT_NODE);return null},iO=(t,e,n=!1)=>{if(!yf(e))return null;const r=kne.call(e,t);return n?r:r===e?null:r},FE=(t,e,n)=>e.concat(["sm","md","lg","xl","xxl"]).reduce((r,o)=>(r[t?`${t}${o.charAt(0).toUpperCase()+o.slice(1)}`:o]=n,r),Object.create(null)),wz=(t,e,n,r=n)=>Object.keys(e).reduce((o,l)=>(t[l]&&o.push([r,l.replace(n,""),t[l]].filter(h=>h&&typeof h!="boolean").join("-").toLowerCase()),o),[]),iA=(t="")=>`__BVID__${Math.random().toString().slice(2,8)}___BV_${t}__`,RE=(t,e)=>t===!0||t==="true"||t===""?"true":t==="grammar"||t==="spelling"?t:e===!1?"true":t===!1||t==="false"?"false":void 0,g2=t=>!!t&&typeof t=="object"&&t.constructor===Object,KT=(t,e,n=!0)=>{const r=t instanceof Date&&typeof t.getMonth=="function"?new Date(t.getTime()):Object.assign({},t);return g2(t)&&g2(e)&&Object.keys(e).forEach(o=>{g2(e[o])?o in t?r[o]=KT(t[o],e[o],n):Object.assign(r,{[o]:e[o]}):Array.isArray(e[o])&&Array.isArray(t[o])?Object.assign(r,{[o]:n?t[o].concat(e[o].filter(l=>!t[o].includes(l))):e[o]}):Object.assign(r,{[o]:e[o]})}),r},Ch=(t,e={},n={})=>{const r=[t];let o;for(let l=0;l<r.length&&!o;l++){const h=r[l];o=n[h]}return o&&typeof o=="function"?o(e):o},Rp=(t,e=NaN)=>Number.isInteger(t)?t:e,fv=(t,e=NaN)=>{const n=Number.parseInt(t,10);return Number.isNaN(n)?e:n},Uv=(t,e=NaN)=>{const n=Number.parseFloat(t.toString());return Number.isNaN(n)?e:n},kE=(t,e)=>Object.keys(t).filter(n=>!e.includes(n)).reduce((n,r)=>({...n,[r]:t[r]}),{}),yC=t=>Array.isArray(t)?t.map(e=>yC(e)):t instanceof Date?new Date(t.getTime()):t&&typeof t=="object"?Object.getOwnPropertyNames(t).reduce((e,n)=>{var r;return Object.defineProperty(e,n,(r=Object.getOwnPropertyDescriptor(t,n))!=null?r:{}),e[n]=yC(t[n]),e},Object.create(Object.getPrototypeOf(t))):t,qT=t=>new Promise(e=>e(yC(t))),oO=(t,e)=>e+(t?pne(t):""),b4=(t,e)=>(Array.isArray(e)?e.slice():Object.keys(e)).reduce((n,r)=>(n[r]=t[r],n),{}),Mne=t=>typeof t=="boolean"?t:t===""?!0:t==="true",i1=t=>!!(t.href||t.to);function bt(t){return hz(()=>t.value===void 0||t.value===null?t.value:Mne(t.value))}const xz=Symbol(),Cz={items:pu([]),reset(){this.items=pu([])}},One=t=>{t.provide(xz,Cz)},Dne=()=>{var t;return(t=il(xz))!=null?t:Cz},uu=(t,e,n)=>{ws(()=>{var r;(r=t==null?void 0:t.value)==null||r.addEventListener(e,n)}),q1(()=>{var r;(r=t==null?void 0:t.value)==null||r.removeEventListener(e,n)})},Ez=t=>ft(()=>({"form-check":t.plain===!1&&t.button===!1,"form-check-inline":t.inline===!0,"form-switch":t.switch===!0,[`form-control-${t.size}`]:t.size!==void 0&&t.size!=="md"})),Bz=t=>ft(()=>({"form-check-input":t.plain===!1&&t.button===!1,"is-valid":t.state===!0,"is-invalid":t.state===!1,"btn-check":t.button===!0})),Sz=t=>ft(()=>({"form-check-label":t.plain===!1&&t.button===!1,btn:t.button===!0,[`btn-${t.buttonVariant}`]:t.button===!0&&t.buttonVariant!==void 0,[`btn-${t.size}`]:t.button&&t.size&&t.size!=="md"})),Tz=t=>ft(()=>({"aria-invalid":RE(t.ariaInvalid,t.state),"aria-required":t.required===!0?!0:void 0})),Iz=t=>ft(()=>({"was-validated":t.validated===!0,"btn-group":t.buttons===!0&&t.stacked===!1,"btn-group-vertical":t.stacked===!0,[`btn-group-${t.size}`]:t.size!==void 0})),_C=(t,e,n)=>t.reduce((r,o)=>o.type.toString()==="Symbol(Fragment)"?r.concat(o.children):r.concat([o]),[]).filter(r=>r.type.__name===e||r.type.name===e).map(r=>{const o=(r.children.default?r.children.default():[]).find(l=>l.type.toString()==="Symbol(Text)");return{props:{disabled:n,...r.props},text:o?o.children:""}}),Pz=(t,e)=>typeof t=="string"?{props:{value:t,disabled:e.disabled},text:t}:{props:{value:t[e.valueField],disabled:e.disabled||t[e.disabledField],...t.props},text:t[e.textField],html:t[e.htmlField]},Lz=(t,e,n,r,o)=>({...t,props:{"button-variant":n.buttonVariant,form:n.form,name:r.value,id:`${o.value}_option_${e}`,button:n.buttons,state:n.state,plain:n.plain,size:n.size,inline:!n.stacked,required:n.required,...t.props}}),Nl=(t,e)=>ft(()=>(t==null?void 0:t.value)||iA(e)),Fz={ariaInvalid:{type:[Boolean,String],default:void 0},autocomplete:{type:String,required:!1},autofocus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},form:{type:String,required:!1},formatter:{type:Function,required:!1},id:{type:String,required:!1},lazy:{type:Boolean,default:!1},lazyFormatter:{type:Boolean,default:!1},list:{type:String,required:!1},modelValue:{type:[String,Number],default:""},name:{type:String,required:!1},number:{type:Boolean,default:!1},placeholder:{type:String,required:!1},plaintext:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},size:{type:String,required:!1},state:{type:Boolean,default:null},trim:{type:Boolean,default:!1}},Rz=(t,e)=>{const n=yr();let r=null,o=!0;const l=Nl(st(t,"id"),"input"),h=(q,Z,Y=!1)=>(q=String(q),typeof t.formatter=="function"&&(!t.lazyFormatter||Y)?(o=!1,t.formatter(q,Z)):q),p=q=>t.trim?q.trim():t.number?Number.parseFloat(q):q,i=()=>{Lh(()=>{var q;t.autofocus&&((q=n.value)==null||q.focus())})};ws(i),ws(()=>{n.value&&(n.value.value=t.modelValue)}),pE(i);const b=ft(()=>{var q;return RE(t.ariaInvalid,(q=t.state)!=null?q:void 0)}),E=q=>{const{value:Z}=q.target,Y=h(Z,q);if(Y===!1||q.defaultPrevented){q.preventDefault();return}if(t.lazy)return;const te=p(Y);t.modelValue!==te&&(r=Z,e("update:modelValue",te)),e("input",Y)},I=q=>{const{value:Z}=q.target,Y=h(Z,q);if(Y===!1||q.defaultPrevented){q.preventDefault();return}if(!t.lazy)return;r=Z,e("update:modelValue",Y);const te=p(Y);t.modelValue!==te&&e("change",Y)},O=q=>{if(e("blur",q),!t.lazy&&!t.lazyFormatter)return;const{value:Z}=q.target,Y=h(Z,q,!0);r=Z,e("update:modelValue",Y)},M=()=>{var q;t.disabled||(q=n.value)==null||q.focus()},G=()=>{var q;t.disabled||(q=n.value)==null||q.blur()};return Do(()=>t.modelValue,q=>{!n.value||(n.value.value=r&&o?r:q,r=null,o=!0)}),{input:n,computedId:l,computedAriaInvalid:b,onInput:E,onChange:I,onBlur:O,focus:M,blur:G}},Ly=(t,e)=>{if(!t)return t;if(e in t)return t[e];const n=e.split(".");return Ly(t[n[0]],n.splice(1).join("."))},y2=(t,e=null,n,r)=>{if(Object.prototype.toString.call(t)==="[object Object]"){const o=Ly(t,r.valueField),l=Ly(t,r.textField),h=Ly(t,r.htmlField),p=Ly(t,r.disabledField),i=t[r.optionsField]||null;return i!==null?{label:String(Ly(t,r.labelField)||l),options:w4(i,n,r)}:{value:typeof o>"u"?e||l:o,text:String(typeof l>"u"?e:l),html:h,disabled:!!p}}return{value:e||t,text:String(t),disabled:!1}},w4=(t,e,n)=>Array.isArray(t)?t.map(r=>y2(r,null,e,n)):Object.prototype.toString.call(t)==="[object Object]"?(console.warn(`[BootstrapVue warn]: ${e} - Setting prop "options" to an object is deprecated. Use the array format instead.`),Object.keys(t).map(r=>{const o=t[r];switch(typeof o){case"object":return y2(o.text,String(o.value),e,n);default:return y2(o,String(r),e,n)}})):[],Une=["id"],kz=Symbol(),Nne=sr({__name:"BAccordion",props:{flush:{default:!1},free:{default:!1},id:null},setup(t){const e=t,n=Nl(st(e,"id"),"accordion"),r=bt(st(e,"flush")),o=bt(st(e,"free")),l=ft(()=>({"accordion-flush":r.value}));return o.value||tf(kz,n.value),(h,p)=>(ve(),et("div",{id:tt(n),class:On(["accordion",tt(l)])},[Xt(h.$slots,"default")],10,Une))}}),Mz=sr({__name:"BCollapse",props:{accordion:null,id:{default:iA()},modelValue:{default:!1},tag:{default:"div"},toggle:{default:!1},visible:{default:!1},isNav:{default:!1}},emits:["update:modelValue","show","shown","hide","hidden"],setup(t,{emit:e}){const n=t,r=bt(st(n,"modelValue")),o=bt(st(n,"toggle")),l=bt(st(n,"visible")),h=bt(st(n,"isNav")),p=yr(),i=yr(),b=ft(()=>({show:r.value,"navbar-collapse":h.value})),E=()=>e("update:modelValue",!1);return Do(()=>r.value,I=>{var O,M;I?(O=i.value)==null||O.show():(M=i.value)==null||M.hide()}),Do(()=>l.value,I=>{var O,M;I?(e("update:modelValue",!!I),(O=i.value)==null||O.show()):(e("update:modelValue",!!I),(M=i.value)==null||M.hide())}),uu(p,"show.bs.collapse",()=>{e("show"),e("update:modelValue",!0)}),uu(p,"hide.bs.collapse",()=>{e("hide"),e("update:modelValue",!1)}),uu(p,"shown.bs.collapse",()=>e("shown")),uu(p,"hidden.bs.collapse",()=>e("hidden")),ws(()=>{var I;i.value=new __(p.value,{parent:n.accordion?`#${n.accordion}`:void 0,toggle:o.value}),(l.value||r.value)&&(e("update:modelValue",!0),(I=i.value)==null||I.show())}),(I,O)=>(ve(),hn(mr(t.tag),{id:t.id,ref_key:"element",ref:p,class:On(["collapse",tt(b)]),"data-bs-parent":t.accordion||null,"is-nav":tt(h)},{default:Kn(()=>[Xt(I.$slots,"default",{visible:tt(r),close:E})]),_:3},8,["id","class","data-bs-parent","is-nav"]))}}),sO=(t,e)=>t.setAttribute("data-bs-theme",e),zne={mounted(t,e){sO(t,e.value)},updated(t,e){sO(t,e.value)}},Vne={mounted(t,e){const n=e.modifiers.left?"left":e.modifiers.right?"right":e.modifiers.bottom?"bottom":e.modifiers.top?"top":"right",r=[];e.modifiers.manual?r.push("manual"):(e.modifiers.click&&r.push("click"),e.modifiers.hover&&r.push("hover"),e.modifiers.focus&&r.push("focus")),t.setAttribute("data-bs-toggle","popover"),new b_(t,{trigger:r.length===0?"click":r.join(" "),placement:n,content:e.value,html:e.modifiers.html})},unmounted(t){const e=b_.getInstance(t);e!==null&&e.dispose()}},Qne=t=>{if(t.classList.contains("offcanvas"))return"offcanvas";if(t.classList.contains("collapse"))return"collapse";throw Error("Couldn't resolve toggle type")},Hne=(t,e)=>{const{modifiers:n,arg:r,value:o}=t,l=Object.keys(n||{}),h=typeof o=="string"?o.split(Fx):o;if(Rne(e.tagName,"a")){const p=v4(e,"href")||"";fne.test(p)&&l.push(p.replace(dne,""))}return Array.prototype.concat.apply([],[r,h]).forEach(p=>typeof p=="string"&&l.push(p)),l.filter((p,i,b)=>p&&b.indexOf(p)===i)},x4={mounted(t,e){const n=Hne(e,t),r=[],o=t.tagName==="a"?"href":"data-bs-target";n.forEach(l=>{const h=document.getElementById(l);h!==null&&(t.setAttribute("data-bs-toggle",Qne(h)),r.push(`#${l}`))}),r.length>0&&t.setAttribute(o,r.join(","))}},jne=(t,e)=>{if(e!=null&&e.trigger)return e.trigger;if(t.manual)return"manual";const n=[];return t.click&&n.push("click"),t.hover&&n.push("hover"),t.focus&&n.push("focus"),n.length>0?n.join(" "):"hover focus"},$ne=(t,e)=>e!=null&&e.placement?e.placement:t.left?"left":t.right?"right":t.bottom?"bottom":"top",Gne=t=>t!=null&&t.delay?t.delay:0,aO=t=>typeof t>"u"?(console.warn("Review tooltip directive usage. Some uses are not defining a title in root component or a value like `v-b-tooltip='{title: \"my title\"}'` nor `v-b-tooltip=\"'my title'\"` to define a title"),""):typeof t=="object"?t==null?void 0:t.title:t,Kne={beforeMount(t,e){t.setAttribute("data-bs-toggle","tooltip"),t.getAttribute("title")||t.setAttribute("title",aO(e.value).toString());const n=/<("[^"]*"|'[^']*'|[^'">])*>/.test(t.title),r=jne(e.modifiers,e.value),o=$ne(e.modifiers,e.value),l=Gne(e.value),h=t.getAttribute("title");new dA(t,{trigger:r,placement:o,delay:l,html:n}),h&&t.setAttribute("data-bs-original-title",h)},updated(t,e){t.getAttribute("title")||t.setAttribute("title",aO(e.value).toString());const n=t.getAttribute("title"),r=t.getAttribute("data-bs-original-title"),o=dA.getInstance(t);t.removeAttribute("title"),n&&n!==r&&(o==null||o.setContent({".tooltip-inner":n}),t.setAttribute("data-bs-original-title",n))},unmounted(t){const e=dA.getInstance(t);e!==null&&e.dispose()}},Rx=new Map;class qne{constructor(e,n,r,o,l){ma(this,"element"),ma(this,"margin"),ma(this,"once"),ma(this,"callback"),ma(this,"instance"),ma(this,"observer"),ma(this,"doneOnce"),ma(this,"visible"),this.element=e,this.margin=n,this.once=r,this.callback=o,this.instance=l,this.createObserver()}createObserver(){if(this.observer&&this.stop(),!(this.doneOnce||typeof this.callback!="function")){try{this.observer=new IntersectionObserver(this.handler.bind(this),{root:null,rootMargin:this.margin,threshold:0})}catch{console.error("Intersection Observer not supported"),this.doneOnce=!0,this.observer=void 0,this.callback(null);return}this.instance.$nextTick(()=>{this.observer&&this.observer.observe(this.element)})}}handler(e){const[n]=e,r=!!(n.isIntersecting||n.intersectionRatio>0);r!==this.visible&&(this.visible=r,this.callback(r),this.once&&this.visible&&(this.doneOnce=!0,this.stop()))}stop(){this.observer&&this.observer.disconnect(),this.observer=null}}const Oz=t=>{if(Rx.has(t)){const e=Rx.get(t);e&&e.stop&&e.stop(),Rx.delete(t)}},lO=(t,e)=>{const n={margin:"0px",once:!1,callback:e.value};Object.keys(e.modifiers).forEach(o=>{Number.isInteger(o)?n.margin=`${o}px`:o.toLowerCase()==="once"&&(n.once=!0)}),Oz(t);const r=new qne(t,n.margin,n.once,n.callback,e.instance);Rx.set(t,r)},Wne={beforeMount(t,e){lO(t,e)},updated(t,e){lO(t,e)},unmounted(t){Oz(t)}},Xne={class:"accordion-item"},Zne=["id"],Yne=["aria-expanded","aria-controls"],Jne={class:"accordion-body"},ere=sr({__name:"BAccordionItem",props:{id:null,title:null,visible:{default:!1}},setup(t){const e=t,n=il(kz,""),r=Nl(st(e,"id"),"accordion_item"),o=bt(st(e,"visible"));return(l,h)=>(ve(),et("div",Xne,[mt("h2",{id:`${tt(r)}heading`,class:"accordion-header"},[Fo((ve(),et("button",{class:On(["accordion-button",{collapsed:!tt(o)}]),type:"button","aria-expanded":tt(o)?"true":"false","aria-controls":tt(r)},[Xt(l.$slots,"title",{},()=>[jr(Ar(t.title),1)])],10,Yne)),[[tt(x4),void 0,tt(r)]])],8,Zne),Lr(Mz,{id:tt(r),class:"accordion-collapse",visible:t.visible,accordion:tt(n),"aria-labelledby":`heading${tt(r)}`},{default:Kn(()=>[mt("div",Jne,[Xt(l.$slots,"default")])]),_:3},8,["id","visible","accordion","aria-labelledby"])]))}}),nb=sr({__name:"BTransition",props:{appear:{default:!1},mode:null,noFade:{default:!1},transProps:null},setup(t){const e=t,n=bt(st(e,"appear")),r=bt(st(e,"noFade")),o=ft(()=>{const p={name:"",enterActiveClass:"",enterToClass:"",leaveActiveClass:"",leaveToClass:"showing",enterFromClass:"showing",leaveFromClass:""},i={...p,enterActiveClass:"fade showing",leaveActiveClass:"fade showing"};return r.value?p:i}),l=ft(()=>({mode:e.mode,css:!0,...o.value})),h=ft(()=>e.transProps!==void 0?{...l.value,...e.transProps}:n.value?{...l.value,appear:!0,appearActiveClass:o.value.enterActiveClass,appearToClass:o.value.enterToClass}:l.value);return(p,i)=>(ve(),hn(X1,Ks(Ac(tt(h))),{default:Kn(()=>[Xt(p.$slots,"default")]),_:3},16))}}),tre=["type","disabled","aria-label"],H_=sr({__name:"BCloseButton",props:{ariaLabel:{default:"Close"},disabled:{default:!1},white:{default:!1},type:{default:"button"}},emits:["click"],setup(t,{emit:e}){const n=t,r=bt(st(n,"disabled")),o=bt(st(n,"white")),l=ft(()=>({"btn-close-white":o.value}));return(h,p)=>(ve(),et("button",{type:t.type,class:On(["btn-close",tt(l)]),disabled:tt(r),"aria-label":t.ariaLabel,onClick:p[0]||(p[0]=i=>e("click",i))},null,10,tre))}}),nre={key:0,class:"visually-hidden"},ME=sr({__name:"BSpinner",props:{label:null,role:{default:"status"},small:{default:!1},tag:{default:"span"},type:{default:"border"},variant:null},setup(t){const e=t,n=mc(),r=bt(st(e,"small")),o=ft(()=>({"spinner-border":e.type==="border","spinner-border-sm":e.type==="border"&&r.value,"spinner-grow":e.type==="grow","spinner-grow-sm":e.type==="grow"&&r.value,[`text-${e.variant}`]:e.variant!==void 0})),l=ft(()=>!Ku(n.label));return(h,p)=>(ve(),hn(mr(t.tag),{class:On(tt(o)),role:t.label||tt(l)?t.role:null,"aria-hidden":t.label||tt(l)?null:!0},{default:Kn(()=>[t.label||tt(l)?(ve(),et("span",nre,[Xt(h.$slots,"label",{},()=>[jr(Ar(t.label),1)])])):Sn("",!0)]),_:3},8,["class","role","aria-hidden"]))}}),Lg={active:{type:[Boolean,String],default:!1},activeClass:{type:String,default:"router-link-active"},append:{type:[Boolean,String],default:!1},disabled:{type:[Boolean,String],default:!1},event:{type:[String,Array],default:"click"},exact:{type:[Boolean,String],default:!1},exactActiveClass:{type:String,default:"router-link-exact-active"},href:{type:String},rel:{type:String,default:null},replace:{type:[Boolean,String],default:!1},routerComponentName:{type:String,default:"router-link"},routerTag:{type:String,default:"a"},target:{type:String,default:"_self"},to:{type:[String,Object],default:null}},rre=sr({props:Lg,emits:["click"],setup(t,{emit:e,attrs:n}){const r=bt(st(t,"active")),o=bt(st(t,"append")),l=bt(st(t,"disabled")),h=bt(st(t,"exact")),p=bt(st(t,"replace")),i=_E(),b=yr(null),E=ft(()=>{const M=t.routerComponentName.split("-").map(G=>G.charAt(0).toUpperCase()+G.slice(1)).join("");return(i==null?void 0:i.appContext.app.component(M))===void 0||l.value||!t.to?"a":t.routerComponentName}),I=ft(()=>{const M="#";if(t.href)return t.href;if(typeof t.to=="string")return t.to||M;const G=t.to;if(Object.prototype.toString.call(G)==="[object Object]"&&(G.path||G.query||G.hash)){const q=G.path||"",Z=G.query?`?${Object.keys(G.query).map(te=>`${te}=${G.query[te]}`).join("=")}`:"",Y=!G.hash||G.hash.charAt(0)==="#"?G.hash||"":`#${G.hash}`;return`${q}${Z}${Y}`||M}return M}),O=ft(()=>({to:t.to,href:I.value,target:t.target,rel:t.target==="_blank"&&t.rel===null?"noopener":t.rel||null,tabindex:l.value?"-1":typeof n.tabindex>"u"?null:n.tabindex,"aria-disabled":l.value?"true":null}));return{computedLinkClasses:ft(()=>({active:r.value,disabled:l.value})),tag:E,routerAttr:O,link:b,clicked:M=>{if(l.value){M.preventDefault(),M.stopImmediatePropagation();return}e("click",M)},activeBoolean:r,appendBoolean:o,disabledBoolean:l,replaceBoolean:p,exactBoolean:h}}}),gu=(t,e)=>{const n=t.__vccOpts||t;for(const[r,o]of e)n[r]=o;return n};function ire(t,e,n,r,o,l){return t.tag==="router-link"?(ve(),hn(mr(t.tag),It({key:0},t.routerAttr,{custom:""}),{default:Kn(({href:h,navigate:p,isActive:i,isExactActive:b})=>[(ve(),hn(mr(t.routerTag),It({ref:"link",href:h,class:[(i||t.activeBoolean)&&t.activeClass,(b||t.exactBoolean)&&t.exactActiveClass]},t.$attrs,{onClick:p}),{default:Kn(()=>[Xt(t.$slots,"default")]),_:2},1040,["href","class","onClick"]))]),_:3},16)):(ve(),hn(mr(t.tag),It({key:1,ref:"link",class:t.computedLinkClasses},t.routerAttr,{onClick:t.clicked}),{default:Kn(()=>[Xt(t.$slots,"default")]),_:3},16,["class","onClick"]))}const qu=gu(rre,[["render",ire]]),ore=sr({components:{BLink:qu,BSpinner:ME},props:{...Lg,active:{type:[Boolean,String],default:!1},disabled:{type:[Boolean,String],default:!1},href:{type:String,required:!1},pill:{type:[Boolean,String],default:!1},pressed:{type:[Boolean,String],default:!1},rel:{type:String,default:void 0},size:{type:String,default:"md"},squared:{type:[Boolean,String],default:!1},tag:{type:String,default:"button"},target:{type:String,default:"_self"},type:{type:String,default:"button"},variant:{type:String,default:"secondary"},loading:{type:[Boolean,String],default:!1},loadingMode:{type:String,default:"inline"}},emits:["click","update:pressed"],setup(t,{emit:e}){const n=bt(st(t,"active")),r=bt(st(t,"disabled")),o=bt(st(t,"pill")),l=bt(st(t,"pressed")),h=bt(st(t,"squared")),p=bt(st(t,"loading")),i=ft(()=>l.value===!0),b=ft(()=>t.tag==="button"&&t.href===void 0&&t.to===null),E=ft(()=>i1(t)),I=ft(()=>t.to!==null),O=ft(()=>t.href!==void 0?!1:!b.value),M=ft(()=>[[`btn-${t.variant}`],[`btn-${t.size}`],{active:n.value||l.value,"rounded-pill":o.value,"rounded-0":h.value,disabled:r.value}]),G=ft(()=>({"aria-disabled":O.value?r.value:null,"aria-pressed":i.value?l.value:null,autocomplete:i.value?"off":null,disabled:b.value?r.value:null,href:t.href,rel:E.value?t.rel:null,role:O.value||E.value?"button":null,target:E.value?t.target:null,type:b.value?t.type:null,to:b.value?null:t.to,append:E.value?t.append:null,activeClass:I.value?t.activeClass:null,event:I.value?t.event:null,exact:I.value?t.exact:null,exactActiveClass:I.value?t.exactActiveClass:null,replace:I.value?t.replace:null,routerComponentName:I.value?t.routerComponentName:null,routerTag:I.value?t.routerTag:null})),q=ft(()=>I.value?qu:t.href?"a":t.tag);return{computedClasses:M,computedAttrs:G,computedTag:q,clicked:Z=>{if(r.value){Z.preventDefault(),Z.stopPropagation();return}e("click",Z),i.value&&e("update:pressed",!l.value)},loadingBoolean:p}}});function sre(t,e,n,r,o,l){const h=Nr("b-spinner");return ve(),hn(mr(t.computedTag),It({class:["btn",t.computedClasses]},t.computedAttrs,{onClick:t.clicked}),{default:Kn(()=>[t.loadingBoolean?(ve(),et("div",{key:0,class:On(["btn-loading",{"mode-fill":t.loadingMode==="fill","mode-inline":t.loadingMode==="inline"}])},[Xt(t.$slots,"loading",{},()=>[Lr(h,{class:"btn-spinner",small:t.size!=="lg"},null,8,["small"])])],2)):Sn("",!0),mt("div",{class:On(["btn-content",{"btn-loading-fill":t.loadingBoolean&&t.loadingMode==="fill"}])},[Xt(t.$slots,"default")],2)]),_:3},16,["class","onClick"])}const C_=gu(ore,[["render",sre]]),are=(t,e=yr(1e3),n={})=>{const r=yr(!1),o=yr(0),l=yr(dv(t)),h=yr(dv(e)),p=ft(()=>Math.ceil(l.value/h.value)),i=ft(()=>I.value||r.value?Math.round(l.value-o.value*h.value):0),{pause:b,resume:E,isActive:I}=nne(()=>o.value=o.value+1,e,n),O=()=>{r.value=!1,o.value=0,E()},M=()=>{r.value=!1,o.value=p.value};kv(()=>{const Z=dv(t),Y=l.value;Z!==Y&&(l.value=Z,M(),O())}),kv(()=>{const Z=dv(e),Y=h.value;Z!==Y&&(h.value=Z,M(),O())}),kv(()=>{o.value>p.value&&(o.value=p.value),o.value===p.value&&b()});const G=()=>{I.value!==!1&&(r.value=!0,b())},q=()=>{o.value!==p.value&&(r.value=!1,E())};return{isActive:h_(I),isPaused:h_(r),restart:O,stop:M,pause:G,resume:q,value:i}},lre=sr({__name:"BAlert",props:{dismissLabel:{default:"Close"},dismissible:{default:!1},fade:{default:!1},modelValue:{type:[Boolean,Number],default:!1},variant:{default:"info"},closeContent:null,immediate:{default:!0},interval:{default:1e3},showOnPause:{default:!0}},emits:["closed","close-countdown","update:modelValue"],setup(t,{expose:e,emit:n}){const r=t,o=bt(st(r,"dismissible")),l=bt(st(r,"fade")),h=bt(st(r,"immediate")),p=bt(st(r,"showOnPause")),i=mc(),b=ft(()=>!Ku(i.close)),E=ft(()=>[[`alert-${r.variant}`],{"alert-dismissible":o.value}]),{isActive:I,pause:O,restart:M,resume:G,stop:q,isPaused:Z,value:Y}=are(typeof r.modelValue=="boolean"?0:st(r,"modelValue"),st(r,"interval"),{immediate:typeof r.modelValue=="number"&&h.value}),te=ft(()=>typeof r.modelValue=="boolean"?r.modelValue:I.value||p.value&&Z.value);kv(()=>n("close-countdown",Y.value));const be=()=>{typeof r.modelValue=="boolean"?n("update:modelValue",!1):(n("update:modelValue",0),q()),n("closed")};return q1(()=>q()),e({pause:O,resume:G,restart:M,stop:q}),(Pe,Se)=>(ve(),hn(nb,{"no-fade":!tt(l),"trans-props":{enterToClass:"show"}},{default:Kn(()=>[tt(te)?(ve(),et("div",{key:0,class:On(["alert",tt(E)]),role:"alert","aria-live":"polite","aria-atomic":"true"},[Xt(Pe.$slots,"default"),tt(o)?(ve(),et(_r,{key:0},[tt(b)||t.closeContent?(ve(),hn(C_,{key:0,type:"button",onClick:be},{default:Kn(()=>[Xt(Pe.$slots,"close",{},()=>[jr(Ar(t.closeContent),1)])]),_:3})):(ve(),hn(H_,{key:1,"aria-label":t.dismissLabel,onClick:be},null,8,["aria-label"]))],64)):Sn("",!0)],2)):Sn("",!0)]),_:3},8,["no-fade"]))}}),Dz=Symbol(),cre=sr({__name:"BAvatarGroup",props:{overlap:{default:.3},rounded:{type:[Boolean,String],default:!1},size:null,square:{default:!1},tag:{default:"div"},variant:null},setup(t){const e=t,n=bt(st(e,"square")),r=ft(()=>WT(e.size)),o=ft(()=>Math.min(Math.max(h(e.overlap),0),1)/2),l=ft(()=>{const p=r.value?`calc(${r.value} * ${o.value})`:null;return p?{paddingLeft:p,paddingRight:p}:{}}),h=p=>typeof p=="string"&&dz(p)?Uv(p,0):p||0;return tf(Dz,{overlapScale:o,size:e.size,square:n.value,rounded:e.rounded,variant:e.variant}),(p,i)=>(ve(),hn(mr(t.tag),{class:"b-avatar-group",role:"group"},{default:Kn(()=>[mt("div",{class:"b-avatar-group-inner",style:fc(tt(l))},[Xt(p.$slots,"default")],4)]),_:3}))}}),ure={key:0,class:"b-avatar-custom"},hre={key:1,class:"b-avatar-img"},dre=["src","alt"],WT=t=>{const e=typeof t=="string"&&dz(t)?Uv(t,0):t;return typeof e=="number"?`${e}px`:e||null},fre=sr({__name:"BAvatar",props:{alt:{default:"avatar"},ariaLabel:null,badge:{type:[Boolean,String],default:!1},badgeLeft:{default:!1},badgeOffset:null,badgeTop:{default:!1},badgeVariant:{default:"primary"},button:{default:!1},buttonType:{default:"button"},disabled:{default:!1},icon:null,rounded:{type:[Boolean,String],default:"circle"},size:null,square:{default:!1},src:null,text:null,textVariant:null,variant:{default:"secondary"}},emits:["click","img-error"],setup(t,{emit:e}){const n=t,r=mc(),o=il(Dz,null),l=["sm",null,"lg"],h=.4,p=h*.7,i=bt(st(n,"badgeLeft")),b=bt(st(n,"badgeTop")),E=bt(st(n,"button")),I=bt(st(n,"disabled")),O=bt(st(n,"square")),M=ft(()=>!Ku(r.default)),G=ft(()=>!Ku(r.badge)),q=ft(()=>!!n.badge||n.badge===""||G.value),Z=ft(()=>o!=null&&o.size?o.size:WT(n.size)),Y=ft(()=>o!=null&&o.variant?o.variant:n.variant),te=ft(()=>o!=null&&o.rounded?o.rounded:n.rounded),be=ft(()=>({type:E.value?n.buttonType:void 0,"aria-label":n.ariaLabel||null,disabled:I.value||null})),Pe=ft(()=>[`bg-${n.badgeVariant}`]),Se=ft(()=>n.badge===!0?"":n.badge),Ie=ft(()=>[[`text-${lt(n.badgeVariant)}`]]),Ae=ft(()=>({[`b-avatar-${n.size}`]:!!n.size&&l.indexOf(WT(n.size))!==-1,[`bg-${Y.value}`]:!!Y.value,badge:!E.value&&Y.value&&M.value,rounded:te.value===""||te.value===!0,"rounded-circle":!O.value&&te.value==="circle","rounded-0":O.value||te.value==="0","rounded-1":!O.value&&te.value==="sm","rounded-3":!O.value&&te.value==="lg","rounded-top":!O.value&&te.value==="top","rounded-bottom":!O.value&&te.value==="bottom","rounded-start":!O.value&&te.value==="left","rounded-end":!O.value&&te.value==="right",btn:E.value,[`btn-${Y.value}`]:E.value?!!Y.value:!1})),ne=ft(()=>[[`text-${n.textVariant||lt(Y.value)}`]]),ue=ft(()=>{const Tt=n.badgeOffset||"0px";return{fontSize:(l.indexOf(Z.value||null)===-1?`calc(${Z.value} * ${p})`:"")||"",top:b.value?Tt:"",bottom:b.value?"":Tt,left:i.value?Tt:"",right:i.value?"":Tt}}),ye=ft(()=>{const Tt=l.indexOf(Z.value||null)===-1?`calc(${Z.value} * ${h})`:null;return Tt?{fontSize:Tt}:{}}),se=ft(()=>{var Tt;const Mt=((Tt=o==null?void 0:o.overlapScale)==null?void 0:Tt.value)||0,on=Z.value&&Mt?`calc(${Z.value} * -${Mt})`:null;return on?{marginLeft:on,marginRight:on}:{}}),le=ft(()=>E.value?"button":"span"),ge=ft(()=>({...se.value,width:Z.value,height:Z.value})),lt=Tt=>Tt==="light"||Tt==="warning"?"dark":"light",Ot=Tt=>{!I.value&&E.value&&e("click",Tt)},gt=Tt=>e("img-error",Tt);return(Tt,Mt)=>(ve(),hn(mr(tt(le)),It({class:["b-avatar",tt(Ae)],style:tt(ge)},tt(be),{onClick:Ot}),{default:Kn(()=>[tt(M)?(ve(),et("span",ure,[Xt(Tt.$slots,"default")])):t.src?(ve(),et("span",hre,[mt("img",{src:t.src,alt:t.alt,onError:gt},null,40,dre)])):t.text?(ve(),et("span",{key:2,class:On(["b-avatar-text",tt(ne)]),style:fc(tt(ye))},Ar(t.text),7)):Sn("",!0),tt(q)?(ve(),et("span",{key:3,class:On(["b-avatar-badge",tt(Pe)]),style:fc(tt(ue))},[tt(G)?Xt(Tt.$slots,"badge",{key:0}):(ve(),et("span",{key:1,class:On(tt(Ie))},Ar(tt(Se)),3))],6)):Sn("",!0)]),_:3},16,["class","style"]))}}),cO=kE(Lg,["event","routerTag"]),Are=sr({components:{BLink:qu},props:{pill:{type:[Boolean,String],default:!1},tag:{type:String,default:"span"},variant:{type:String,default:"secondary"},textIndicator:{type:[Boolean,String],default:!1},dotIndicator:{type:[Boolean,String],default:!1},...cO},setup(t){const e=bt(st(t,"pill")),n=bt(st(t,"textIndicator")),r=bt(st(t,"dotIndicator")),o=bt(st(t,"active")),l=bt(st(t,"disabled")),h=ft(()=>i1(t)),p=ft(()=>h.value?qu:t.tag),i=ft(()=>[[`bg-${t.variant}`],{active:o.value,disabled:l.value,"text-dark":["warning","info","light"].includes(t.variant),"rounded-pill":e.value,"position-absolute top-0 start-100 translate-middle":n.value||r.value,"p-2 border border-light rounded-circle":r.value,"text-decoration-none":h.value}]),b=ft(()=>h.value?b4(t,cO):{});return{computedClasses:i,computedLinkProps:b,computedTag:p}}});function pre(t,e,n,r,o,l){return ve(),hn(mr(t.computedTag),It({class:["badge",t.computedClasses]},t.computedLinkProps),{default:Kn(()=>[Xt(t.$slots,"default")]),_:3},16,["class"])}const mre=gu(Are,[["render",pre]]),uO=kE(Lg,["event","routerTag"]),gre=sr({components:{BLink:qu},props:{...uO,active:{type:[Boolean,String],default:!1},ariaCurrent:{type:String,default:"location"},disabled:{type:[Boolean,String],default:!1},text:{type:String,required:!1}},emits:["click"],setup(t,{emit:e}){const n=bt(st(t,"active")),r=bt(st(t,"disabled")),o=ft(()=>({active:n.value})),l=ft(()=>n.value?"span":qu),h=ft(()=>n.value?t.ariaCurrent:void 0);return{computedLinkProps:ft(()=>l.value!=="span"?b4(t,uO):{}),computedClasses:o,computedTag:l,computedAriaCurrent:h,clicked:p=>{if(r.value||n.value){p.preventDefault(),p.stopImmediatePropagation();return}r.value||e("click",p)}}}});function yre(t,e,n,r,o,l){return ve(),et("li",{class:On(["breadcrumb-item",t.computedClasses])},[(ve(),hn(mr(t.computedTag),It({"aria-current":t.computedAriaCurrent},t.computedLinkProps,{onClick:t.clicked}),{default:Kn(()=>[Xt(t.$slots,"default",{},()=>[jr(Ar(t.text),1)])]),_:3},16,["aria-current","onClick"]))],2)}const Uz=gu(gre,[["render",yre]]),_re={"aria-label":"breadcrumb"},vre={class:"breadcrumb"},bre=sr({__name:"BBreadcrumb",props:{items:null},setup(t){const e=t,n=Dne(),r=ft(()=>{const o=e.items||(n==null?void 0:n.items)||[];let l=!1;return o.map((h,p)=>(typeof h=="string"&&(h={text:h},p<o.length-1&&(h.href="#")),h.active&&(l=!0),!h.active&&!l&&(h.active=p+1===o.length),h))});return(o,l)=>(ve(),et("nav",_re,[mt("ol",vre,[Xt(o.$slots,"prepend"),(ve(!0),et(_r,null,Li(tt(r),(h,p)=>(ve(),hn(Uz,It({key:p},h),{default:Kn(()=>[jr(Ar(h.text),1)]),_:2},1040))),128)),Xt(o.$slots,"default"),Xt(o.$slots,"append")])]))}}),wre=sr({__name:"BButtonGroup",props:{ariaLabel:{default:"Group"},size:null,tag:{default:"div"},vertical:{default:!1}},setup(t){const e=t,n=bt(st(e,"vertical")),r=ft(()=>({"btn-group":!n.value,[`btn-group-${e.size}`]:e.size!==void 0,"btn-group-vertical":n.value}));return(o,l)=>(ve(),hn(mr(t.tag),{class:On(tt(r)),role:"group","aria-label":t.ariaLabel},{default:Kn(()=>[Xt(o.$slots,"default")]),_:3},8,["class","aria-label"]))}}),xre=["role","aria-label"],Cre=sr({__name:"BButtonToolbar",props:{ariaLabel:{default:"Group"},justify:{default:!1},role:{default:"toolbar"}},setup(t){const e=bt(st(t,"justify")),n=ft(()=>({"justify-content-between":e.value}));return(r,o)=>(ve(),et("div",{class:On([tt(n),"btn-toolbar"]),role:t.role,"aria-label":t.ariaLabel},[Xt(r.$slots,"default")],10,xre))}}),C4=sr({__name:"BImg",props:{alt:null,blank:{default:!1},blankColor:{default:"transparent"},block:{default:!1},center:{default:!1},fluid:{default:!1},lazy:{default:!1},fluidGrow:{default:!1},height:null,left:{default:!1},start:{default:!1},right:{default:!1},end:{default:!1},rounded:{type:[Boolean,String],default:!1},sizes:null,src:null,srcset:null,thumbnail:{default:!1},width:null},emits:["load"],setup(t,{emit:e}){const n=t,r='<svg width="%{w}" height="%{h}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 %{w} %{h}" preserveAspectRatio="none"><rect width="100%" height="100%" style="fill:%{f};"></rect></svg>',o=bt(st(n,"lazy")),l=bt(st(n,"blank")),h=bt(st(n,"block")),p=bt(st(n,"center")),i=bt(st(n,"fluid")),b=bt(st(n,"fluidGrow")),E=bt(st(n,"left")),I=bt(st(n,"start")),O=bt(st(n,"right")),M=bt(st(n,"end")),G=bt(st(n,"thumbnail")),q=ft(()=>typeof n.srcset=="string"?n.srcset.split(",").filter(Ae=>Ae).join(","):Array.isArray(n.srcset)?n.srcset.filter(Ae=>Ae).join(","):void 0),Z=ft(()=>typeof n.sizes=="string"?n.sizes.split(",").filter(Ae=>Ae).join(","):Array.isArray(n.sizes)?n.sizes.filter(Ae=>Ae).join(","):void 0),Y=ft(()=>{const Ae=ye=>ye===void 0?void 0:typeof ye=="number"?ye:Number.parseInt(ye,10)||void 0,ne=Ae(n.width),ue=Ae(n.height);if(l.value){if(ne!==void 0&&ue===void 0)return{height:ne,width:ne};if(ne===void 0&&ue!==void 0)return{height:ue,width:ue};if(ne===void 0&&ue===void 0)return{height:1,width:1}}return{width:ne,height:ue}}),te=ft(()=>Ie(Y.value.width,Y.value.height,n.blankColor)),be=ft(()=>({src:l.value?te.value:n.src,alt:n.alt,width:Y.value.width||void 0,height:Y.value.height||void 0,srcset:l.value?void 0:q.value,sizes:l.value?void 0:Z.value,loading:o.value?"lazy":"eager"})),Pe=ft(()=>E.value||I.value?"float-start":O.value||M.value?"float-end":p.value?"mx-auto":void 0),Se=ft(()=>({"img-thumbnail":G.value,"img-fluid":i.value||b.value,"w-100":b.value,rounded:n.rounded===""||n.rounded===!0,[`rounded-${n.rounded}`]:typeof n.rounded=="string"&&n.rounded!=="",[`${Pe.value}`]:Pe.value!==void 0,"d-block":h.value||p.value})),Ie=(Ae,ne,ue)=>`data:image/svg+xml;charset=UTF-8,${encodeURIComponent(r.replace("%{w}",String(Ae)).replace("%{h}",String(ne)).replace("%{f}",ue))}`;return(Ae,ne)=>(ve(),et("img",It({class:tt(Se)},tt(be),{onLoad:ne[0]||(ne[0]=ue=>e("load",ue))}),null,16))}}),vC=sr({__name:"BCardImg",props:{alt:null,blank:{default:!1},blankColor:null,bottom:{default:!1},lazy:{default:!1},height:null,left:{default:!1},start:{default:!1},right:{default:!1},end:{default:!1},sizes:null,src:null,srcset:null,top:{default:!1},width:null},emits:["load"],setup(t,{emit:e}){const n=t,r=bt(st(n,"bottom")),o=bt(st(n,"end")),l=bt(st(n,"left")),h=bt(st(n,"right")),p=bt(st(n,"start")),i=bt(st(n,"top")),b=ft(()=>i.value?"card-img-top":h.value||o.value?"card-img-right":r.value?"card-img-bottom":l.value||p.value?"card-img-left":"card-img"),E=ft(()=>({alt:n.alt,height:n.height,src:n.src,lazy:n.lazy,width:n.width,blank:n.blank,blankColor:n.blankColor,sizes:n.sizes,srcset:n.srcset}));return(I,O)=>(ve(),hn(C4,It({class:tt(b)},tt(E),{onLoad:O[0]||(O[0]=M=>e("load",M))}),null,16,["class"]))}}),Ere=["innerHTML"],Nz=sr({__name:"BCardHeadFoot",props:{text:null,bgVariant:null,borderVariant:null,html:null,tag:{default:"div"},textVariant:null},setup(t){const e=t,n=ft(()=>({[`text-${e.textVariant}`]:e.textVariant!==void 0,[`bg-${e.bgVariant}`]:e.bgVariant!==void 0,[`border-${e.borderVariant}`]:e.borderVariant!==void 0}));return(r,o)=>(ve(),hn(mr(t.tag),{class:On(tt(n))},{default:Kn(()=>[t.html?(ve(),et("div",{key:0,innerHTML:t.html},null,8,Ere)):Xt(r.$slots,"default",{key:1},()=>[jr(Ar(t.text),1)])]),_:3},8,["class"]))}}),zz=sr({__name:"BCardHeader",props:{text:null,bgVariant:null,borderVariant:null,html:null,tag:{default:"div"},textVariant:null},setup(t){const e=t;return(n,r)=>(ve(),hn(Nz,It({class:"card-header"},e),{default:Kn(()=>[Xt(n.$slots,"default")]),_:3},16))}}),Vz=sr({__name:"BCardTitle",props:{text:null,tag:{default:"h4"}},setup(t){return(e,n)=>(ve(),hn(mr(t.tag),{class:"card-title"},{default:Kn(()=>[Xt(e.$slots,"default",{},()=>[jr(Ar(t.text),1)])]),_:3}))}}),Qz=sr({__name:"BCardSubtitle",props:{text:null,tag:{default:"h6"},textVariant:{default:"muted"}},setup(t){const e=t,n=ft(()=>[`text-${e.textVariant}`]);return(r,o)=>(ve(),hn(mr(t.tag),{class:On(["card-subtitle mb-2",tt(n)])},{default:Kn(()=>[Xt(r.$slots,"default",{},()=>[jr(Ar(t.text),1)])]),_:3},8,["class"]))}}),Hz=sr({__name:"BCardBody",props:{bodyBgVariant:null,bodyTag:{default:"div"},bodyTextVariant:null,overlay:{default:!1},subtitle:null,subtitleTag:{default:"h4"},subtitleTextVariant:null,title:null,titleTag:{default:"h4"},text:null},setup(t){const e=t,n=mc(),r=bt(st(e,"overlay")),o=ft(()=>!Ku(n.title)),l=ft(()=>!Ku(n.subtitle)),h=ft(()=>({"card-img-overlay":r.value,[`text-${e.bodyTextVariant}`]:e.bodyTextVariant!==void 0,[`bg-${e.bodyBgVariant}`]:e.bodyBgVariant!==void 0}));return(p,i)=>(ve(),hn(mr(t.bodyTag),{class:On(["card-body",tt(h)])},{default:Kn(()=>[t.title||tt(o)?(ve(),hn(Vz,{key:0,tag:t.titleTag},{default:Kn(()=>[Xt(p.$slots,"title",{},()=>[jr(Ar(t.title),1)])]),_:3},8,["tag"])):Sn("",!0),t.subtitle||tt(l)?(ve(),hn(Qz,{key:1,tag:t.subtitleTag,"text-variant":t.subtitleTextVariant},{default:Kn(()=>[Xt(p.$slots,"subtitle",{},()=>[jr(Ar(t.subtitle),1)])]),_:3},8,["tag","text-variant"])):Sn("",!0),Xt(p.$slots,"default",{},()=>[jr(Ar(t.text),1)])]),_:3},8,["class"]))}}),jz=sr({__name:"BCardFooter",props:{text:null,bgVariant:null,borderVariant:null,html:null,tag:{default:"div"},textVariant:null},setup(t){const e=t;return(n,r)=>(ve(),hn(Nz,It({class:"card-footer"},e),{default:Kn(()=>[Xt(n.$slots,"default",{},()=>[jr(Ar(t.text),1)])]),_:3},16))}}),$z=sr({__name:"BCard",props:{align:null,bgVariant:null,bodyBgVariant:null,bodyClass:null,bodyTag:{default:"div"},bodyTextVariant:null,borderVariant:null,footer:null,footerBgVariant:null,footerBorderVariant:null,footerClass:null,footerHtml:{default:""},footerTag:{default:"div"},footerTextVariant:null,header:null,headerBgVariant:null,headerBorderVariant:null,headerClass:null,headerHtml:{default:""},headerTag:{default:"div"},headerTextVariant:null,imgAlt:null,imgBottom:{default:!1},imgEnd:{default:!1},imgHeight:null,imgLeft:{default:!1},imgRight:{default:!1},imgSrc:null,imgStart:{default:!1},imgTop:{default:!1},imgWidth:null,noBody:{default:!1},overlay:{default:!1},subtitle:null,subtitleTag:{default:"h6"},subtitleTextVariant:{default:"muted"},tag:{default:"div"},textVariant:null,title:null,titleTag:{default:"h4"},bodyText:{default:""}},setup(t){const e=t,n=mc(),r=bt(st(e,"imgBottom")),o=bt(st(e,"imgEnd")),l=bt(st(e,"imgLeft")),h=bt(st(e,"imgRight")),p=bt(st(e,"imgStart")),i=bt(st(e,"noBody")),b=ft(()=>!Ku(n.header)),E=ft(()=>!Ku(n.footer)),I=ft(()=>({[`text-${e.align}`]:e.align!==void 0,[`text-${e.textVariant}`]:e.textVariant!==void 0,[`bg-${e.bgVariant}`]:e.bgVariant!==void 0,[`border-${e.borderVariant}`]:e.borderVariant!==void 0,"flex-row":l.value||p.value,"flex-row-reverse":o.value||h.value})),O=ft(()=>({bgVariant:e.headerBgVariant,borderVariant:e.headerBorderVariant,html:e.headerHtml,tag:e.headerTag,textVariant:e.headerTextVariant})),M=ft(()=>({overlay:e.overlay,bodyBgVariant:e.bodyBgVariant,bodyTag:e.bodyTag,bodyTextVariant:e.bodyTextVariant,subtitle:e.subtitle,subtitleTag:e.subtitleTag,subtitleTextVariant:e.subtitleTextVariant,title:e.title,titleTag:e.titleTag})),G=ft(()=>({bgVariant:e.footerBgVariant,borderVariant:e.footerBorderVariant,html:e.footerHtml,tag:e.footerTag,textVariant:e.footerTextVariant})),q=ft(()=>({src:e.imgSrc,alt:e.imgAlt,height:e.imgHeight,width:e.imgWidth,bottom:e.imgBottom,end:e.imgEnd,left:e.imgLeft,right:e.imgRight,start:e.imgStart,top:e.imgTop}));return(Z,Y)=>(ve(),hn(mr(t.tag),{class:On(["card",tt(I)])},{default:Kn(()=>[tt(r)?Sn("",!0):Xt(Z.$slots,"img",{key:0},()=>[t.imgSrc?(ve(),hn(vC,Ks(It({key:0},tt(q))),null,16)):Sn("",!0)]),t.header||tt(b)||t.headerHtml?(ve(),hn(zz,It({key:1},tt(O),{class:t.headerClass}),{default:Kn(()=>[Xt(Z.$slots,"header",{},()=>[jr(Ar(t.header),1)])]),_:3},16,["class"])):Sn("",!0),tt(i)?Xt(Z.$slots,"default",{key:3},()=>[jr(Ar(t.bodyText),1)]):(ve(),hn(Hz,It({key:2},tt(M),{class:t.bodyClass}),{default:Kn(()=>[Xt(Z.$slots,"default",{},()=>[jr(Ar(t.bodyText),1)])]),_:3},16,["class"])),t.footer||tt(E)||t.footerHtml?(ve(),hn(jz,It({key:4},tt(G),{class:t.footerClass}),{default:Kn(()=>[Xt(Z.$slots,"footer",{},()=>[jr(Ar(t.footer),1)])]),_:3},16,["class"])):Sn("",!0),tt(r)?Xt(Z.$slots,"img",{key:5},()=>[t.imgSrc?(ve(),hn(vC,Ks(It({key:0},tt(q))),null,16)):Sn("",!0)]):Sn("",!0)]),_:3},8,["class"]))}}),Bre=sr({__name:"BCardGroup",props:{columns:{default:!1},deck:{default:!1},tag:{default:"div"}},setup(t){const e=t,n=bt(st(e,"columns")),r=bt(st(e,"deck")),o=ft(()=>r.value?"card-deck":n.value?"card-columns":"card-group"),l=ft(()=>[o.value]);return(h,p)=>(ve(),hn(mr(t.tag),{class:On(tt(l))},{default:Kn(()=>[Xt(h.$slots,"default")]),_:3},8,["class"]))}}),Sre=sr({__name:"BCardText",props:{text:null,tag:{default:"p"}},setup(t){return(e,n)=>(ve(),hn(mr(t.tag),{class:"card-text"},{default:Kn(()=>[Xt(e.$slots,"default",{},()=>[jr(Ar(t.text),1)])]),_:3}))}}),Tre=["id"],Ire={key:0,class:"carousel-indicators"},Pre=["data-bs-target","data-bs-slide-to","aria-label"],Lre={class:"carousel-inner"},Fre=["data-bs-target"],Rre=mt("span",{class:"carousel-control-prev-icon","aria-hidden":"true"},null,-1),kre={class:"visually-hidden"},Mre=["data-bs-target"],Ore=mt("span",{class:"carousel-control-next-icon","aria-hidden":"true"},null,-1),Dre={class:"visually-hidden"},Gz=Symbol(),Ure=sr({__name:"BCarousel",props:{startingSlide:{default:0},id:null,imgHeight:null,imgWidth:null,background:null,modelValue:{default:0},controls:{default:!1},indicators:{default:!1},interval:{default:5e3},noTouch:{default:!1},noWrap:{default:!1},controlsPrevText:{default:"Previous"},controlsNextText:{default:"Next"},indicatorsButtonLabel:{default:"Slide"}},emits:["sliding-start","sliding-end"],setup(t,{emit:e}){const n=t,r=mc(),o=Nl(st(n,"id"),"carousel"),l=bt(st(n,"controls")),h=bt(st(n,"indicators")),p=bt(st(n,"noTouch"));bt(st(n,"noWrap"));const i=yr(),b=yr(),E=yr([]);return uu(i,"slide.bs.carousel",I=>e("sliding-start",I)),uu(i,"slid.bs.carousel",I=>e("sliding-end",I)),ws(()=>{b.value=new Q_(i.value,{wrap:!p.value,interval:n.interval,touch:!p.value}),r.default&&(E.value=r.default().filter(I=>{var O;return((O=I.type)==null?void 0:O.__name)==="BCarouselSlide"}))}),tf(Gz,{background:n.background,width:n.imgWidth,height:n.imgHeight}),(I,O)=>(ve(),et("div",{id:tt(o),ref_key:"element",ref:i,class:"carousel slide","data-bs-ride":"carousel"},[tt(h)?(ve(),et("div",Ire,[(ve(!0),et(_r,null,Li(E.value,(M,G)=>(ve(),et("button",{key:G,type:"button","data-bs-target":`#${tt(o)}`,"data-bs-slide-to":G,class:On(G===t.startingSlide?"active":""),"aria-current":"true","aria-label":`${t.indicatorsButtonLabel} ${G}`},null,10,Pre))),128))])):Sn("",!0),mt("div",Lre,[Xt(I.$slots,"default")]),tt(l)?(ve(),et(_r,{key:1},[mt("button",{class:"carousel-control-prev",type:"button","data-bs-target":`#${tt(o)}`,"data-bs-slide":"prev"},[Rre,mt("span",kre,Ar(t.controlsPrevText),1)],8,Fre),mt("button",{class:"carousel-control-next",type:"button","data-bs-target":`#${tt(o)}`,"data-bs-slide":"next"},[Ore,mt("span",Dre,Ar(t.controlsNextText),1)],8,Mre)],64)):Sn("",!0)],8,Tre))}}),Nre=["data-bs-interval"],zre=["innerHTML"],Vre={key:1},Qre=["innerHTML"],Hre={key:1},jre=sr({__name:"BCarouselSlide",props:{imgSrc:null,imgHeight:null,imgWidth:null,interval:null,active:{default:!1},background:null,caption:null,captionHtml:null,captionTag:{default:"h3"},contentTag:{default:"div"},contentVisibleUp:null,id:null,imgAlt:null,imgBlank:{default:!1},imgBlankColor:{default:"transparent"},text:null,textHtml:null,textTag:{default:"p"}},setup(t){const e=t,n=mc(),r=il(Gz,{}),o=bt(st(e,"active")),l=ft(()=>!Ku(n.default)),h=ft(()=>({background:`${e.background||r.background||"rgb(171, 171, 171)"} none repeat scroll 0% 0%`})),p=ft(()=>({"d-none":e.contentVisibleUp!==void 0,[`d-${e.contentVisibleUp}-block`]:e.contentVisibleUp!==void 0})),i=ft(()=>r.width),b=ft(()=>r.height);return(E,I)=>(ve(),et("div",{class:On(["carousel-item",{active:tt(o)}]),"data-bs-interval":t.interval,style:fc(tt(h))},[Xt(E.$slots,"img",{},()=>[Lr(C4,{class:"d-block w-100",alt:t.imgAlt,src:t.imgSrc,width:t.imgWidth||tt(i),height:t.imgHeight||tt(b),blank:t.imgBlank,"blank-color":t.imgBlankColor},null,8,["alt","src","width","height","blank","blank-color"])]),t.caption||t.captionHtml||t.text||t.textHtml||tt(l)?(ve(),hn(mr(t.contentTag),{key:0,class:On(["carousel-caption",tt(p)])},{default:Kn(()=>[t.caption||t.captionHtml?(ve(),hn(mr(t.captionTag),{key:0},{default:Kn(()=>[t.captionHtml?(ve(),et("span",{key:0,innerHTML:t.captionHtml},null,8,zre)):(ve(),et("span",Vre,Ar(t.caption),1))]),_:1})):Sn("",!0),t.text||t.textHtml?(ve(),hn(mr(t.textTag),{key:1},{default:Kn(()=>[t.textHtml?(ve(),et("span",{key:0,innerHTML:t.textHtml},null,8,Qre)):(ve(),et("span",Hre,Ar(t.text),1))]),_:1})):Sn("",!0),Xt(E.$slots,"default")]),_:3},8,["class"])):Sn("",!0)],14,Nre))}}),hO=FE("",[],{type:[Boolean,String,Number],default:!1}),dO=FE("offset",[""],{type:[String,Number],default:null}),fO=FE("order",[""],{type:[String,Number],default:null}),$re=sr({name:"BCol",props:{col:{type:[Boolean,String],default:!1},cols:{type:[String,Number],default:null},...hO,offset:{type:[String,Number],default:null},...dO,order:{type:[String,Number],default:null},...fO,alignSelf:{type:String,default:null},tag:{type:String,default:"div"}},setup(t){const e=[{content:hO,propPrefix:"cols",classPrefix:"col"},{content:dO,propPrefix:"offset"},{content:fO,propPrefix:"order"}],n=bt(st(t,"col")),r=ft(()=>e.flatMap(o=>wz(t,o.content,o.propPrefix,o.classPrefix)));return{computedClasses:ft(()=>[r.value,{col:n.value||!r.value.some(o=>/^col-/.test(o))&&!t.cols,[`col-${t.cols}`]:!!t.cols,[`offset-${t.offset}`]:!!t.offset,[`order-${t.order}`]:!!t.order,[`align-self-${t.alignSelf}`]:!!t.alignSelf}])}}});function Gre(t,e,n,r,o,l){return ve(),hn(mr(t.tag),{class:On(t.computedClasses)},{default:Kn(()=>[Xt(t.$slots,"default")]),_:3},8,["class"])}const Av=gu($re,[["render",Gre]]),gy={autoHide:!0,delay:5e3,noCloseButton:!1,pos:"top-right",value:!0};class AO{constructor(e){ma(this,"vm"),ma(this,"containerPositions"),Xy(e)?this.vm=e:this.vm=pu(e),this.containerPositions=ft(()=>{const n=new Set([]);return this.vm.toasts.map(r=>{r.options.pos&&n.add(r.options.pos)}),n})}toasts(e){return ft(e?()=>this.vm.toasts.filter(n=>{if(n.options.pos===e&&n.options.value)return n}):()=>this.vm.toasts)}remove(...e){this.vm.toasts=this.vm.toasts.filter(n=>{if(n.options.id&&!e.includes(n.options.id))return n})}isRoot(){var e;return(e=this.vm.root)!=null?e:!1}show(e,n=gy){const r={id:iA(),...gy,...n},o={options:pu(r),content:e};return this.vm.toasts.push(o),o}info(e,n=gy){return this.show(e,{variant:"info",...n})}danger(e,n=gy){return this.show(e,{variant:"danger",...n})}warning(e,n=gy){return this.show(e,{variant:"warning",...n})}success(e,n=gy){return this.show(e,{variant:"success",...n})}hide(){}}class Kre{constructor(){ma(this,"vms"),ma(this,"rootInstance"),ma(this,"useToast",qz),this.vms={}}getOrCreateViewModel(e){if(!e){if(this.rootInstance)return this.vms[this.rootInstance];const n={root:!0,toasts:[],container:void 0,id:Symbol("toast")};return this.rootInstance=n.id,this.vms[n.id]=n,n}if(e.root){if(this.rootInstance)return this.vms[this.rootInstance];this.rootInstance=e.id}return this.vms[e.id]=e,e}getVM(e){if(!e&&this.rootInstance)return this.vms[this.rootInstance];if(e)return this.vms[e]}}const XT=Symbol(),Kz=Symbol(),qre={container:void 0,toasts:[],root:!1};function Wre(){return il(Kz)}function qz(t,e=XT){const n=il(Wre());if(!t)return new AO(n.getOrCreateViewModel());const r={id:Symbol("toastInstance")},o={...qre,...r,...t},l=n.getOrCreateViewModel(o);return new AO(l)}const Xre={install:(t,e={})=>{var n,r,o,l;t.provide(Kz,(r=(n=e==null?void 0:e.BToast)==null?void 0:n.injectkey)!=null?r:XT),t.provide((l=(o=e==null?void 0:e.BToast)==null?void 0:o.injectkey)!=null?l:XT,new Kre)}},Zre="toast-title",pO=1e3,Wz=sr({components:{BLink:qu},props:{...Lg,delay:{type:Number,default:5e3},bodyClass:{type:String},body:{type:[Object,String]},headerClass:{type:String},headerTag:{type:String,default:"div"},animation:{type:[Boolean,String],default:!0},id:{type:String},isStatus:{type:[Boolean,String],default:!1},autoHide:{type:[Boolean,String],default:!0},noCloseButton:{type:[Boolean,String],default:!1},noFade:{type:[Boolean,String],default:!1},noHoverPause:{type:[Boolean,String],default:!1},solid:{type:[Boolean,String],default:!1},static:{type:[Boolean,String],default:!1},title:{type:String},modelValue:{type:[Boolean,String],default:!1},toastClass:{type:Array},variant:{type:String}},emits:["destroyed","update:modelValue"],setup(t,{emit:e,slots:n}){bt(st(t,"animation"));const r=bt(st(t,"isStatus")),o=bt(st(t,"autoHide")),l=bt(st(t,"noCloseButton")),h=bt(st(t,"noFade")),p=bt(st(t,"noHoverPause"));bt(st(t,"solid")),bt(st(t,"static"));const i=bt(st(t,"modelValue")),b=yr(!1),E=yr(!1),I=yr(!1),O=ft(()=>({[`b-toast-${t.variant}`]:t.variant!==void 0,show:I.value||b.value}));let M,G,q;const Z=()=>{typeof M>"u"||(clearTimeout(M),M=void 0)},Y=ft(()=>Math.max(Rp(t.delay,0),pO)),te=()=>{i.value&&(G=q=0,Z(),E.value=!0,Ow(()=>{I.value=!1}))},be=()=>{Z(),e("update:modelValue",!0),G=q=0,E.value=!1,Lh(()=>{Ow(()=>{I.value=!0})})},Pe=()=>{if(!o.value||p.value||!M||q)return;const le=Date.now()-G;le>0&&(Z(),q=Math.max(Y.value-le,pO))},Se=()=>{(!o.value||p.value||!q)&&(q=G=0),Ie()};Do(()=>i.value,le=>{le?be():te()});const Ie=()=>{Z(),o.value&&(M=setTimeout(te,q||Y.value),G=Date.now(),q=0)},Ae=()=>{b.value=!0,e("update:modelValue",!0)},ne=()=>{b.value=!1,Ie()},ue=()=>{b.value=!0},ye=()=>{b.value=!1,q=G=0,e("update:modelValue",!1)};K5(()=>{Z(),o.value&&e("destroyed",t.id)}),ws(()=>{Lh(()=>{i.value&&Ow(()=>{be()})})});const se=()=>{Lh(()=>{Ow(()=>{te()})})};return()=>{const le=()=>{const ge=[],lt=Ch(Zre,{hide:te},n);lt?ge.push(Ui(lt)):t.title&&ge.push(Ui("strong",{class:"me-auto"},t.title)),!l.value&&ge.length!==0&&ge.push(Ui(H_,{class:["btn-close"],onClick:()=>{te()}}));const Ot=[];if(ge.length>0&&Ot.push(Ui(t.headerTag,{class:"toast-header"},{default:()=>ge})),Ch("default",{hide:te},n)||t.body){const gt=Ui(i1(t)?"b-link":"div",{class:["toast-body",t.bodyClass],onClick:i1(t)?{click:se}:{}},Ch("default",{hide:te},n)||t.body);Ot.push(gt)}return Ui("div",{class:["toast",t.toastClass,O.value],tabindex:"0"},Ot)};return Ui("div",{class:["b-toast"],id:t.id,role:E.value?null:r.value?"status":"alert","aria-live":E.value?null:r.value?"polite":"assertive","aria-atomic":E.value?null:"true",onmouseenter:Pe,onmouseleave:Se},[Ui(nb,{noFade:h.value,onAfterEnter:ne,onBeforeEnter:Ae,onAfterLeave:ye,onBeforeLeave:ue},()=>[I.value?le():""])])}}}),ZT=sr({__name:"BToaster",props:{position:{default:"top-right"},instance:null},setup(t){const e=t,n={"top-left":"top-0 start-0","top-center":"top-0 start-50 translate-middle-x","top-right":"top-0 end-0","middle-left":"top-50 start-0 translate-middle-y","middle-center":"top-50 start-50 translate-middle","middle-right":"top-50 end-0 translate-middle-y","bottom-left":"bottom-0 start-0","bottom-center":"bottom-0 start-50 translate-middle-x","bottom-right":"bottom-0 end-0"},r=ft(()=>n[e.position]),o=l=>{var h;(h=e.instance)==null||h.remove(l)};return(l,h)=>{var p;return ve(),et("div",{class:On([[tt(r)],"b-toaster position-fixed p-3"]),style:{"z-index":"11"}},[(ve(!0),et(_r,null,Li((p=t.instance)==null?void 0:p.toasts(t.position).value,i=>(ve(),hn(Wz,{id:i.options.id,key:i.options.id,modelValue:i.options.value,"onUpdate:modelValue":b=>i.options.value=b,"auto-hide":i.options.autoHide,delay:i.options.delay,"no-close-button":i.options.noCloseButton,title:i.content.title,body:i.content.body,component:i.content.body,variant:i.options.variant,onDestroyed:o},null,8,["id","modelValue","onUpdate:modelValue","auto-hide","delay","no-close-button","title","body","component","variant"]))),128))],2)}}}),Yre=sr({props:{gutterX:{type:String,default:null},gutterY:{type:String,default:null},fluid:{type:[Boolean,String],default:!1},toast:{type:Object},position:{type:String,required:!1}},setup(t,{slots:e,expose:n}){const r=yr();let o;const l=ft(()=>({container:!t.fluid,"container-fluid":typeof t.fluid=="boolean"&&t.fluid,[`container-${t.fluid}`]:typeof t.fluid=="string",[`gx-${t.gutterX}`]:t.gutterX!==null,[`gy-${t.gutterY}`]:t.gutterY!==null}));return ws(()=>{t.toast}),t.toast&&(o=qz({container:r,root:t.toast.root}),n({})),()=>{var h;const p=[];return o==null||o.containerPositions.value.forEach(i=>{p.push(Ui(ZT,{key:i,instance:o,position:i}))}),Ui("div",{class:[l.value,t.position],ref:r},[...p,(h=e.default)==null?void 0:h.call(e)])}},methods:{}}),Jre={class:"visually-hidden"},eie=["aria-labelledby","role"],Xz=sr({__name:"BDropdown",props:{id:null,menuClass:null,size:null,splitClass:null,splitVariant:null,text:null,toggleClass:null,autoClose:{type:[Boolean,String],default:!0},block:{default:!1},boundary:{default:"clippingParents"},dark:{default:!1},disabled:{default:!1},isNav:{default:!1},dropup:{default:!1},dropright:{default:!1},dropleft:{default:!1},noFlip:{default:!1},offset:{default:0},popperOpts:{default:()=>({})},right:{default:!1},role:{default:"menu"},split:{default:!1},splitButtonType:{default:"button"},splitHref:{default:void 0},noCaret:{default:!1},toggleText:{default:"Toggle dropdown"},variant:{default:"secondary"}},emits:["show","shown","hide","hidden","click","toggle"],setup(t,{expose:e,emit:n}){const r=t,o=Nl(st(r,"id"),"dropdown"),l=bt(st(r,"block")),h=bt(st(r,"dark")),p=bt(st(r,"dropup")),i=bt(st(r,"dropright")),b=bt(st(r,"isNav")),E=bt(st(r,"dropleft")),I=bt(st(r,"right")),O=bt(st(r,"split")),M=bt(st(r,"noCaret")),G=yr(),q=yr(),Z=yr(),Y=ft(()=>({"d-grid":l.value,"d-flex":l.value&&O.value})),te=ft(()=>[O.value?r.splitClass:r.toggleClass,{"nav-link":b.value,"dropdown-toggle":!O.value,"dropdown-toggle-no-caret":M.value&&!O.value,"w-100":O.value&&l.value}]),be=ft(()=>[r.menuClass,{"dropdown-menu-dark":h.value,"dropdown-menu-end":I.value}]),Pe=ft(()=>({"data-bs-toggle":O.value?void 0:"dropdown","aria-expanded":O.value?void 0:!1,ref:O.value?void 0:q,href:O.value?r.splitHref:void 0})),Se=ft(()=>({ref:O.value?q:void 0})),Ie=()=>{var ne;(ne=Z.value)==null||ne.hide()},Ae=ne=>{O.value&&n("click",ne)};return uu(G,"show.bs.dropdown",()=>n("show")),uu(G,"shown.bs.dropdown",()=>n("shown")),uu(G,"hide.bs.dropdown",()=>n("hide")),uu(G,"hidden.bs.dropdown",()=>n("hidden")),ws(()=>{var ne;Z.value=new fd((ne=q.value)==null?void 0:ne.$el,{autoClose:r.autoClose,boundary:r.boundary,offset:r.offset?r.offset.toString():"",reference:r.offset||O.value?"parent":"toggle",popperConfig:ue=>{const ye={placement:"bottom-start",modifiers:r.noFlip?[{name:"flip",options:{fallbackPlacements:[]}}]:[]};return p.value?ye.placement=I.value?"top-end":"top-start":i.value?ye.placement="right-start":E.value?ye.placement="left-start":I.value&&(ye.placement="bottom-end"),KT(ue,KT(ye,r.popperOpts))}})}),e({hide:Ie}),(ne,ue)=>(ve(),et("div",{ref_key:"parent",ref:G,class:On([tt(Y),"btn-group"])},[Lr(C_,It({id:tt(o),variant:t.splitVariant||t.variant,size:t.size,class:tt(te),disabled:t.disabled,type:t.splitButtonType},tt(Pe),{onClick:Ae}),{default:Kn(()=>[Xt(ne.$slots,"button-content",{},()=>[jr(Ar(t.text),1)])]),_:3},16,["id","variant","size","class","disabled","type"]),tt(O)?(ve(),hn(C_,It({key:0,variant:t.variant,size:t.size,disabled:t.disabled},tt(Se),{class:[t.toggleClass,"dropdown-toggle-split dropdown-toggle"],"data-bs-toggle":"dropdown","aria-expanded":"false",onClick:ue[0]||(ue[0]=ye=>n("toggle"))}),{default:Kn(()=>[mt("span",Jre,[Xt(ne.$slots,"toggle-text",{},()=>[jr(Ar(t.toggleText),1)])])]),_:3},16,["variant","size","disabled","class"])):Sn("",!0),mt("ul",{class:On(["dropdown-menu",tt(be)]),"aria-labelledby":tt(o),role:t.role},[Xt(ne.$slots,"default")],10,eie)],2))}}),tie={role:"presentation"},nie=sr({__name:"BDropdownDivider",props:{tag:{default:"hr"}},setup(t){return(e,n)=>(ve(),et("li",tie,[(ve(),hn(mr(t.tag),{class:"dropdown-divider",role:"separator","aria-orientation":"horizontal"}))]))}}),rie={},iie={role:"presentation"},oie={class:"px-4 py-3"};function sie(t,e){return ve(),et("li",iie,[mt("form",oie,[Xt(t.$slots,"default")])])}const aie=gu(rie,[["render",sie]]),lie={role:"presentation"},cie=["id","aria-describedby"],uie={inheritAttrs:!1},hie=sr({...uie,__name:"BDropdownGroup",props:{id:null,ariaDescribedby:null,header:null,headerClass:null,headerTag:{default:"header"},headerVariant:null},setup(t){const e=t,n=ft(()=>e.id?`${e.id}_group_dd_header`:void 0),r=ft(()=>e.headerTag==="header"?void 0:"heading"),o=ft(()=>[e.headerClass,{[`text-${e.headerVariant}`]:e.headerVariant!==void 0}]);return(l,h)=>(ve(),et("li",lie,[(ve(),hn(mr(t.headerTag),{id:tt(n),class:On(["dropdown-header",tt(o)]),role:tt(r)},{default:Kn(()=>[Xt(l.$slots,"header",{},()=>[jr(Ar(t.header),1)])]),_:3},8,["id","class","role"])),mt("ul",It({id:t.id,role:"group",class:"list-unstyled"},l.$attrs,{"aria-describedby":t.ariaDescribedby||tt(n)}),[Xt(l.$slots,"default")],16,cie)]))}}),die={},fie={class:"dropdown-header"};function Aie(t,e){return ve(),et("li",null,[mt("h6",fie,[Xt(t.$slots,"default")])])}const pie=gu(die,[["render",Aie]]),mie={inheritAttrs:!1},gie=sr({...mie,__name:"BDropdownItem",props:{href:null,linkClass:null,active:{default:!1},disabled:{default:!1},rel:{default:void 0},target:{default:"_self"},variant:null},emits:["click"],setup(t,{emit:e}){const n=t,r=bt(st(n,"active")),o=bt(st(n,"disabled")),l=DN(),h=ft(()=>[n.linkClass,{active:r.value,disabled:o.value,[`text-${n.variant}`]:n.variant!==void 0}]),p=ft(()=>n.href?"a":l.to?qu:"button"),i=ft(()=>({disabled:o.value,"aria-current":r.value?"true":null,href:p.value==="a"?n.href:null,rel:n.rel,type:p.value==="button"?"button":null,target:n.target,...l.to?{activeClass:"active",...l}:{}})),b=E=>e("click",E);return(E,I)=>(ve(),et("li",{role:"presentation",class:On(E.$attrs.class)},[(ve(),hn(mr(tt(p)),It({class:["dropdown-item",tt(h)]},tt(i),{onClick:b}),{default:Kn(()=>[Xt(E.$slots,"default")]),_:3},16,["class"]))],2))}}),yie=["disabled"],_ie={inheritAttrs:!1},vie=sr({..._ie,__name:"BDropdownItemButton",props:{buttonClass:null,active:{default:!1},activeClass:{default:"active"},disabled:{default:!1},variant:null},emits:["click"],setup(t,{emit:e}){const n=t,r=bt(st(n,"active")),o=bt(st(n,"disabled")),l=ft(()=>[n.buttonClass,{[n.activeClass]:r.value,disabled:o.value,[`text-${n.variant}`]:n.variant!==void 0}]),h=p=>e("click",p);return(p,i)=>(ve(),et("li",{role:"presentation",class:On(p.$attrs.class)},[mt("button",{role:"menu",type:"button",class:On(["dropdown-item",tt(l)]),disabled:tt(o),onClick:h},[Xt(p.$slots,"default")],10,yie)],2))}}),bie={role:"presentation"},wie={class:"px-4 py-1 mb-0 text-muted"},xie=sr({__name:"BDropdownText",props:{text:{default:""}},setup(t){return(e,n)=>(ve(),et("li",bie,[mt("p",wie,[Xt(e.$slots,"default",{},()=>[jr(Ar(t.text),1)])])]))}}),Cie=["id","novalidate","onSubmit"],Zz=sr({__name:"BForm",props:{id:null,floating:{default:!1},novalidate:{default:!1},validated:{default:!1}},emits:["submit"],setup(t,{emit:e}){const n=t,r=bt(st(n,"floating")),o=bt(st(n,"novalidate")),l=bt(st(n,"validated")),h=ft(()=>({"form-floating":r.value,"was-validated":l.value})),p=i=>e("submit",i);return(i,b)=>(ve(),et("form",{id:t.id,novalidate:tt(o),class:On(tt(h)),onSubmit:gf(p,["prevent"])},[Xt(i.$slots,"default")],42,Cie))}}),Eie={class:"form-floating"},Bie=["for"],Sie=sr({__name:"BFormFloatingLabel",props:{labelFor:null,label:null,text:null},setup(t){return(e,n)=>(ve(),et("div",Eie,[Xt(e.$slots,"default",{},()=>[jr(Ar(t.text),1)]),mt("label",{for:t.labelFor},[Xt(e.$slots,"label",{},()=>[jr(Ar(t.label),1)])],8,Bie)]))}}),YT=sr({__name:"BFormInvalidFeedback",props:{ariaLive:null,forceShow:{default:!1},id:null,text:null,role:null,state:{default:void 0},tag:{default:"div"},tooltip:{default:!1}},setup(t){const e=t,n=bt(st(e,"forceShow")),r=bt(st(e,"state")),o=bt(st(e,"tooltip")),l=ft(()=>n.value===!0||r.value===!1),h=ft(()=>({"d-block":l.value,"invalid-feedback":!o.value,"invalid-tooltip":o.value})),p=ft(()=>({id:e.id,role:e.role,"aria-live":e.ariaLive,"aria-atomic":e.ariaLive?"true":void 0}));return(i,b)=>(ve(),hn(mr(t.tag),It({class:tt(h)},tt(p)),{default:Kn(()=>[Xt(i.$slots,"default",{},()=>[jr(Ar(t.text),1)])]),_:3},16,["class"]))}}),kx=sr({__name:"BFormRow",props:{tag:{default:"div"}},setup(t){return(e,n)=>(ve(),hn(mr(t.tag),{class:"row d-flex flex-wrap"},{default:Kn(()=>[Xt(e.$slots,"default")]),_:3}))}}),JT=sr({__name:"BFormText",props:{id:null,inline:{default:!1},tag:{default:"small"},text:null,textVariant:{default:"muted"}},setup(t){const e=t,n=bt(st(e,"inline")),r=ft(()=>[[`text-${e.textVariant}`],{"form-text":!n.value}]);return(o,l)=>(ve(),hn(mr(t.tag),{id:t.id,class:On(tt(r))},{default:Kn(()=>[Xt(o.$slots,"default",{},()=>[jr(Ar(t.text),1)])]),_:3},8,["id","class"]))}}),eI=sr({__name:"BFormValidFeedback",props:{ariaLive:null,forceShow:{default:!1},id:null,role:null,text:null,state:{default:void 0},tag:{default:"div"},tooltip:{default:!1}},setup(t){const e=t,n=bt(st(e,"forceShow")),r=bt(st(e,"state")),o=bt(st(e,"tooltip")),l=ft(()=>n.value===!0||r.value===!0),h=ft(()=>({"d-block":l.value,"valid-feedback":!o.value,"valid-tooltip":o.value})),p=ft(()=>e.ariaLive?"true":void 0);return(i,b)=>(ve(),hn(mr(t.tag),{id:t.id,role:t.role,"aria-live":t.ariaLive,"aria-atomic":tt(p),class:On(tt(h))},{default:Kn(()=>[Xt(i.$slots,"default",{},()=>[jr(Ar(t.text),1)])]),_:3},8,["id","role","aria-live","aria-atomic","class"]))}}),Tie=["id","disabled","required","name","form","aria-label","aria-labelledby","aria-required","value","indeterminate"],Iie=["for"],Pie={inheritAttrs:!1},Yz=sr({...Pie,__name:"BFormCheckbox",props:{ariaLabel:null,ariaLabelledBy:null,form:null,indeterminate:null,name:null,id:{default:void 0},autofocus:{default:!1},plain:{default:!1},button:{default:!1},switch:{default:!1},disabled:{default:!1},buttonVariant:{default:"secondary"},inline:{default:!1},required:{default:void 0},size:{default:"md"},state:{default:void 0},uncheckedValue:{type:[Array,Set,Boolean,String,Object,Number],default:!1},value:{type:[Array,Set,Boolean,String,Object,Number],default:!0},modelValue:{type:[Array,Set,Boolean,String,Object,Number],default:void 0}},emits:["update:modelValue","input","change"],setup(t,{emit:e}){const n=t,r=mc(),o=Nl(st(n,"id"),"form-check"),l=bt(st(n,"indeterminate")),h=bt(st(n,"autofocus")),p=bt(st(n,"plain")),i=bt(st(n,"button")),b=bt(st(n,"switch")),E=bt(st(n,"disabled")),I=bt(st(n,"inline")),O=bt(st(n,"required")),M=bt(st(n,"state")),G=yr(null),q=yr(!1),Z=ft(()=>!Ku(r.default)),Y=ft({get:()=>n.uncheckedValue?Array.isArray(n.modelValue)?n.modelValue.indexOf(n.value)>-1:n.modelValue===n.value:n.modelValue,set:Ae=>{let ne=Ae;Array.isArray(n.modelValue)?n.uncheckedValue&&(ne=n.modelValue,Ae?(ne.indexOf(n.uncheckedValue)>-1&&ne.splice(ne.indexOf(n.uncheckedValue),1),ne.push(n.value)):(ne.indexOf(n.value)>-1&&ne.splice(ne.indexOf(n.value),1),ne.push(n.uncheckedValue))):ne=Ae?n.value:n.uncheckedValue,e("input",ne),e("update:modelValue",ne),e("change",ne)}}),te=ft(()=>Array.isArray(n.modelValue)?n.modelValue.indexOf(n.value)>-1:JSON.stringify(n.modelValue)===JSON.stringify(n.value)),be=pu({plain:st(p,"value"),button:st(i,"value"),inline:st(I,"value"),switch:st(b,"value"),size:st(n,"size"),state:st(M,"value"),buttonVariant:st(n,"buttonVariant")}),Pe=Ez(be),Se=Bz(be),Ie=Sz(be);return ws(()=>{h.value&&G.value.focus()}),(Ae,ne)=>(ve(),et("div",{class:On(tt(Pe))},[Fo(mt("input",It({id:tt(o)},Ae.$attrs,{ref_key:"input",ref:G,"onUpdate:modelValue":ne[0]||(ne[0]=ue=>ga(Y)?Y.value=ue:null),class:tt(Se),type:"checkbox",disabled:tt(E),required:!!t.name&&!!tt(O),name:t.name,form:t.form,"aria-label":t.ariaLabel,"aria-labelledby":t.ariaLabelledBy,"aria-required":t.name&&tt(O)?"true":void 0,value:t.value,indeterminate:tt(l),onFocus:ne[1]||(ne[1]=ue=>q.value=!0),onBlur:ne[2]||(ne[2]=ue=>q.value=!1)}),null,16,Tie),[[MX,tt(Y)]]),tt(Z)||!tt(p)?(ve(),et("label",{key:0,for:tt(o),class:On([tt(Ie),{active:tt(te),focus:q.value}])},[Xt(Ae.$slots,"default")],10,Iie)):Sn("",!0)],2))}}),Lie=["id"],Fie=["innerHTML"],Rie=["textContent"],kie=sr({__name:"BFormCheckboxGroup",props:{id:null,form:null,modelValue:{default:()=>[]},ariaInvalid:{default:void 0},autofocus:{default:!1},buttonVariant:{default:"secondary"},buttons:{default:!1},disabled:{default:!1},disabledField:{default:"disabled"},htmlField:{default:"html"},name:null,options:{default:()=>[]},plain:{default:!1},required:{default:!1},size:null,stacked:{default:!1},state:{default:void 0},switches:{default:!1},textField:{default:"text"},validated:{default:!1},valueField:{default:"value"}},emits:["input","update:modelValue","change"],setup(t,{emit:e}){const n=t,r=mc(),o="BFormCheckbox",l=Nl(st(n,"id"),"checkbox"),h=Nl(st(n,"name"),"checkbox");bt(st(n,"autofocus"));const p=bt(st(n,"buttons")),i=bt(st(n,"disabled"));bt(st(n,"plain"));const b=bt(st(n,"required")),E=bt(st(n,"stacked")),I=bt(st(n,"state")),O=bt(st(n,"switches")),M=bt(st(n,"validated")),G=ft({get:()=>n.modelValue,set:be=>{if(JSON.stringify(be)===JSON.stringify(n.modelValue))return;const Pe=n.options.filter(Se=>be.map(Ie=>JSON.stringify(Ie)).includes(JSON.stringify(typeof Se=="string"?Se:Se[n.valueField]))).map(Se=>typeof Se=="string"?Se:Se[n.valueField]);e("input",Pe),e("update:modelValue",Pe),e("change",Pe)}}),q=ft(()=>(r.first?_C(r.first(),o,i.value):[]).concat(n.options.map(be=>Pz(be,n))).concat(r.default?_C(r.default(),o,i.value):[]).map((be,Pe)=>Lz(be,Pe,n,h,l)).map(be=>({...be,props:{switch:O.value,...be.props}}))),Z=pu({required:st(b,"value"),ariaInvalid:st(n,"ariaInvalid"),state:st(I,"value"),validated:st(M,"value"),buttons:st(p,"value"),stacked:st(E,"value"),size:st(n,"size")}),Y=Tz(Z),te=Iz(Z);return(be,Pe)=>(ve(),et("div",It(tt(Y),{id:tt(l),role:"group",class:[tt(te),"bv-no-focus-ring"],tabindex:"-1"}),[(ve(!0),et(_r,null,Li(tt(q),(Se,Ie)=>(ve(),hn(Yz,It({key:Ie,modelValue:tt(G),"onUpdate:modelValue":Pe[0]||(Pe[0]=Ae=>ga(G)?G.value=Ae:null)},Se.props),{default:Kn(()=>[Se.html?(ve(),et("span",{key:0,innerHTML:Se.html},null,8,Fie)):(ve(),et("span",{key:1,textContent:Ar(Se.text)},null,8,Rie))]),_:2},1040,["modelValue"]))),128))],16,Lie))}}),Jz=["input","select","textarea"],Mie=Jz.map(t=>`${t}:not([disabled])`).join(),Oie=[...Jz,"a","button","label"],Die="label",Uie="invalid-feedback",Nie="valid-feedback",zie="description",Vie="default",Qie=sr({components:{BCol:Av,BFormInvalidFeedback:YT,BFormRow:kx,BFormText:JT,BFormValidFeedback:eI},props:{contentCols:{type:[Boolean,String,Number],required:!1},contentColsLg:{type:[Boolean,String,Number],required:!1},contentColsMd:{type:[Boolean,String,Number],required:!1},contentColsSm:{type:[Boolean,String,Number],required:!1},contentColsXl:{type:[Boolean,String,Number],required:!1},description:{type:[String],required:!1},disabled:{type:[Boolean,String],default:!1},feedbackAriaLive:{type:String,default:"assertive"},id:{type:String,required:!1},invalidFeedback:{type:String,required:!1},label:{type:String,required:!1},labelAlign:{type:[Boolean,String,Number],required:!1},labelAlignLg:{type:[Boolean,String,Number],required:!1},labelAlignMd:{type:[Boolean,String,Number],required:!1},labelAlignSm:{type:[Boolean,String,Number],required:!1},labelAlignXl:{type:[Boolean,String,Number],required:!1},labelClass:{type:[Array,Object,String],required:!1},labelCols:{type:[Boolean,String,Number],required:!1},labelColsLg:{type:[Boolean,String,Number],required:!1},labelColsMd:{type:[Boolean,String,Number],required:!1},labelColsSm:{type:[Boolean,String,Number],required:!1},labelColsXl:{type:[Boolean,String,Number],required:!1},labelFor:{type:String,required:!1},labelSize:{type:String,required:!1},labelSrOnly:{type:[Boolean,String],default:!1},state:{type:[Boolean,String],default:null},tooltip:{type:[Boolean,String],default:!1},validFeedback:{type:String,required:!1},validated:{type:[Boolean,String],default:!1},floating:{type:[Boolean,String],default:!1}},setup(t,{attrs:e}){const n=bt(st(t,"disabled")),r=bt(st(t,"labelSrOnly")),o=bt(st(t,"state")),l=bt(st(t,"tooltip")),h=bt(st(t,"validated")),p=bt(st(t,"floating")),i=null,b=["xs","sm","md","lg","xl"],E=(Se,Ie)=>b.reduce((Ae,ne)=>{const ue=oO(ne==="xs"?"":ne,`${Ie}Align`),ye=Se[ue]||null;return ye&&(ne==="xs"?Ae.push(`text-${ye}`):Ae.push(`text-${ne}-${ye}`)),Ae},[]),I=(Se,Ie)=>b.reduce((Ae,ne)=>{const ue=oO(ne==="xs"?"":ne,`${Ie}Cols`);let ye=Se[ue];return ye=ye===""?!0:ye||!1,typeof ye!="boolean"&&ye!=="auto"&&(ye=fv(ye,0),ye=ye>0?ye:!1),ye&&(ne==="xs"?Ae.cols=ye:Ae[ne||(typeof ye=="boolean"?"col":"cols")]=ye),Ae},{}),O=yr(),M=(Se,Ie=null)=>{if(pz&&t.labelFor){const Ae=vz(`#${mne(t.labelFor)}`,O);if(Ae){const ne="aria-describedby",ue=(Se||"").split(Fx),ye=(Ie||"").split(Fx),se=(v4(Ae,ne)||"").split(Fx).filter(le=>!ye.includes(le)).concat(ue).filter((le,ge,lt)=>lt.indexOf(le)===ge).filter(le=>le).join(" ").trim();se?Lne(Ae,ne,se):Fne(Ae,ne)}}},G=ft(()=>I(t,"content")),q=ft(()=>E(t,"label")),Z=ft(()=>I(t,"label")),Y=ft(()=>Object.keys(G.value).length>0||Object.keys(Z.value).length>0),te=ft(()=>typeof o.value=="boolean"?o.value:null),be=ft(()=>{const Se=te.value;return Se===!0?"is-valid":Se===!1?"is-invalid":null}),Pe=ft(()=>RE(e.ariaInvalid,o.value));return Do(()=>i,(Se,Ie)=>{Se!==Ie&&M(Se,Ie)}),ws(()=>{Lh(()=>{M(i)})}),{disabledBoolean:n,labelSrOnlyBoolean:r,stateBoolean:o,tooltipBoolean:l,validatedBoolean:h,floatingBoolean:p,ariaDescribedby:i,computedAriaInvalid:Pe,contentColProps:G,isHorizontal:Y,labelAlignClasses:q,labelColProps:Z,onLegendClick:Se=>{if(t.labelFor)return;const{target:Ie}=Se,Ae=Ie?Ie.tagName:"";if(Oie.indexOf(Ae)!==-1)return;const ne=Ine(Mie,O).filter(Tne);ne.length===1&&Bne(ne[0])},stateClass:be}},render(){const t=this.$props,e=this.$slots,n=Nl(),r=!t.labelFor;let o=null;const l=Ch(Die,{},e)||t.label,h=l?iA("_BV_label_"):null;if(l||this.isHorizontal){const Pe=r?"legend":"label";if(this.labelSrOnlyBoolean)l&&(o=Ui(Pe,{class:"visually-hidden",id:h,for:t.labelFor||null},l)),this.isHorizontal?o=Ui(Av,this.labelColProps,{default:()=>o}):o=Ui("div",{},[o]);else{const Se={onClick:r?this.onLegendClick:null,...this.isHorizontal?this.labelColProps:{},tag:this.isHorizontal?Pe:null,id:h,for:t.labelFor||null,tabIndex:r?"-1":null,class:[this.isHorizontal?"col-form-label":"form-label",{"bv-no-focus-ring":r,"col-form-label":this.isHorizontal||r,"pt-0":!this.isHorizontal&&r,"d-block":!this.isHorizontal&&!r,[`col-form-label-${t.labelSize}`]:!!t.labelSize},this.labelAlignClasses,t.labelClass]};this.isHorizontal?o=Ui(Av,Se,{default:()=>l}):o=Ui(Pe,Se,l)}}let p=null;const i=Ch(Uie,{},e)||this.invalidFeedback,b=i?iA("_BV_feedback_invalid_"):void 0;i&&(p=Ui(YT,{ariaLive:t.feedbackAriaLive,id:b,state:this.stateBoolean,tooltip:this.tooltipBoolean},{default:()=>i}));let E=null;const I=Ch(Nie,{},e)||this.validFeedback,O=I?iA("_BV_feedback_valid_"):void 0;I&&(E=Ui(eI,{ariaLive:t.feedbackAriaLive,id:O,state:this.stateBoolean,tooltip:this.tooltipBoolean},{default:()=>I}));let M=null;const G=Ch(zie,{},e)||this.description,q=G?iA("_BV_description_"):void 0;G&&(M=Ui(JT,{id:q},{default:()=>G}));const Z=this.ariaDescribedby=[q,this.stateBoolean===!1?b:null,this.stateBoolean===!0?O:null].filter(Pe=>Pe).join(" ")||null,Y=[Ch(Vie,{ariaDescribedby:Z,descriptionId:q,id:n,labelId:h},e)||"",p,E,M];!this.isHorizontal&&this.floatingBoolean&&Y.push(o);let te=Ui("div",{ref:"content",class:[{"form-floating":!this.isHorizontal&&this.floatingBoolean}]},Y);this.isHorizontal&&(te=Ui(Av,{ref:"content",...this.contentColProps},{default:()=>Y}));const be={class:["mb-3",this.stateClass,{"was-validated":this.validatedBoolean}],id:Nl(st(t,"id")).value,disabled:r?this.disabledBoolean:null,role:r?null:"group","aria-invalid":this.computedAriaInvalid,"aria-labelledby":r&&this.isHorizontal?h:null};return this.isHorizontal&&!r?Ui(kx,be,{default:()=>[o,te]}):Ui(r?"fieldset":"div",be,this.isHorizontal&&r?[Ui(kx,null,{default:()=>[o,te]})]:this.isHorizontal||!this.floatingBoolean?[o,te]:[te])}}),mO=["text","number","email","password","search","url","tel","date","time","range","color"],Hie=sr({props:{...Fz,max:{type:[String,Number],required:!1},min:{type:[String,Number],required:!1},step:{type:[String,Number],required:!1},type:{type:String,default:"text",validator:t=>mO.includes(t)}},emits:["update:modelValue","change","blur","input"],setup(t,{emit:e}){const{input:n,computedId:r,computedAriaInvalid:o,onInput:l,onChange:h,onBlur:p,focus:i,blur:b}=Rz(t,e),E=yr(!1),I=ft(()=>{const M=t.type==="range",G=t.type==="color";return{"form-control-highlighted":E.value,"form-range":M,"form-control":G||!t.plaintext&&!M,"form-control-color":G,"form-control-plaintext":t.plaintext&&!M&&!G,[`form-control-${t.size}`]:!!t.size,"is-valid":t.state===!0,"is-invalid":t.state===!1}}),O=ft(()=>mO.includes(t.type)?t.type:"text");return{computedClasses:I,localType:O,input:n,computedId:r,computedAriaInvalid:o,onInput:l,onChange:h,onBlur:p,focus:i,blur:b,highlight:()=>{E.value!==!0&&(E.value=!0,setTimeout(()=>{E.value=!1},2e3))}}}}),jie=["id","name","form","type","disabled","placeholder","required","autocomplete","readonly","min","max","step","list","aria-required","aria-invalid"];function $ie(t,e,n,r,o,l){return ve(),et("input",It({id:t.computedId,ref:"input",class:t.computedClasses,name:t.name||void 0,form:t.form||void 0,type:t.localType,disabled:t.disabled,placeholder:t.placeholder,required:t.required,autocomplete:t.autocomplete||void 0,readonly:t.readonly||t.plaintext,min:t.min,max:t.max,step:t.step,list:t.type!=="password"?t.list:void 0,"aria-required":t.required?"true":void 0,"aria-invalid":t.computedAriaInvalid},t.$attrs,{onInput:e[0]||(e[0]=h=>t.onInput(h)),onChange:e[1]||(e[1]=h=>t.onChange(h)),onBlur:e[2]||(e[2]=h=>t.onBlur(h))}),null,16,jie)}const Gie=gu(Hie,[["render",$ie]]),Kie=["id","disabled","required","name","form","aria-label","aria-labelledby","value","aria-required"],qie=["for"],e7=sr({__name:"BFormRadio",props:{ariaLabel:null,ariaLabelledby:null,form:null,id:null,name:null,size:null,autofocus:{default:!1},modelValue:{type:[Boolean,String,Array,Object,Number],default:void 0},plain:{default:!1},button:{default:!1},switch:{default:!1},disabled:{default:!1},buttonVariant:{default:"secondary"},inline:{default:!1},required:{default:!1},state:{default:void 0},value:{type:[String,Boolean,Object,Number],default:!0}},emits:["input","change","update:modelValue"],setup(t,{emit:e}){const n=t,r=mc(),o=Nl(st(n,"id"),"form-check"),l=bt(st(n,"autofocus")),h=bt(st(n,"plain")),p=bt(st(n,"button")),i=bt(st(n,"switch")),b=bt(st(n,"disabled")),E=bt(st(n,"inline")),I=bt(st(n,"required")),O=bt(st(n,"state")),M=yr(null),G=yr(!1),q=ft({get:()=>Array.isArray(n.modelValue)?n.modelValue[0]:n.modelValue,set:Ie=>{const Ae=Ie?n.value:!1,ne=Array.isArray(n.modelValue)?[Ae]:Ae;e("input",ne),e("change",ne),e("update:modelValue",ne)}}),Z=ft(()=>Array.isArray(n.modelValue)?(n.modelValue||[]).find(Ie=>Ie===n.value):JSON.stringify(n.modelValue)===JSON.stringify(n.value)),Y=ft(()=>!Ku(r.default)),te=pu({plain:st(h,"value"),button:st(p,"value"),inline:st(E,"value"),switch:st(i,"value"),size:st(n,"size"),state:st(O,"value"),buttonVariant:st(n,"buttonVariant")}),be=Ez(te),Pe=Bz(te),Se=Sz(te);return ws(()=>{l.value&&M.value!==null&&M.value.focus()}),(Ie,Ae)=>(ve(),et("div",{class:On(tt(be))},[Fo(mt("input",It({id:tt(o)},Ie.$attrs,{ref_key:"input",ref:M,"onUpdate:modelValue":Ae[0]||(Ae[0]=ne=>ga(q)?q.value=ne:null),class:tt(Pe),type:"radio",disabled:tt(b),required:!!t.name&&tt(I),name:t.name,form:t.form,"aria-label":t.ariaLabel,"aria-labelledby":t.ariaLabelledby,value:t.value,"aria-required":t.name&&tt(I)?!0:void 0,onFocus:Ae[1]||(Ae[1]=ne=>G.value=!0),onBlur:Ae[2]||(Ae[2]=ne=>G.value=!1)}),null,16,Kie),[[OX,tt(q)]]),tt(Y)||tt(h)===!1?(ve(),et("label",{key:0,for:tt(o),class:On([tt(Se),{active:tt(Z),focus:G.value}])},[Xt(Ie.$slots,"default")],10,qie)):Sn("",!0)],2))}}),Wie=["id"],Xie=["innerHTML"],Zie=["textContent"],Yie=sr({__name:"BFormRadioGroup",props:{size:null,form:null,id:null,name:null,modelValue:{type:[String,Boolean,Array,Object,Number],default:""},ariaInvalid:{default:void 0},autofocus:{default:!1},buttonVariant:{default:"secondary"},buttons:{default:!1},disabled:{default:!1},disabledField:{default:"disabled"},htmlField:{default:"html"},options:{default:()=>[]},plain:{default:!1},required:{default:!1},stacked:{default:!1},state:{default:void 0},textField:{default:"text"},validated:{default:!1},valueField:{default:"value"}},emits:["input","update:modelValue","change"],setup(t,{emit:e}){const n=t,r=mc(),o="BFormRadio",l=Nl(st(n,"id"),"radio"),h=Nl(st(n,"name"),"checkbox");bt(st(n,"autofocus"));const p=bt(st(n,"buttons")),i=bt(st(n,"disabled"));bt(st(n,"plain"));const b=bt(st(n,"required")),E=bt(st(n,"stacked")),I=bt(st(n,"state")),O=bt(st(n,"validated")),M=ft({get:()=>n.modelValue,set:te=>{e("input",te),e("update:modelValue",te),e("change",te)}}),G=ft(()=>(r.first?_C(r.first(),o,i.value):[]).concat(n.options.map(te=>Pz(te,n))).concat(r.default?_C(r.default(),o,i.value):[]).map((te,be)=>Lz(te,be,n,h,l)).map(te=>({...te}))),q=pu({required:st(b,"value"),ariaInvalid:st(n,"ariaInvalid"),state:st(I,"value"),validated:st(O,"value"),buttons:st(p,"value"),stacked:st(E,"value"),size:st(n,"size")}),Z=Tz(q),Y=Iz(q);return(te,be)=>(ve(),et("div",It(tt(Z),{id:tt(l),role:"radiogroup",class:[tt(Y),"bv-no-focus-ring"],tabindex:"-1"}),[(ve(!0),et(_r,null,Li(tt(G),(Pe,Se)=>(ve(),hn(e7,It({key:Se,modelValue:tt(M),"onUpdate:modelValue":be[0]||(be[0]=Ie=>ga(M)?M.value=Ie:null)},Pe.props),{default:Kn(()=>[Pe.html?(ve(),et("span",{key:0,innerHTML:Pe.html},null,8,Xie)):(ve(),et("span",{key:1,textContent:Ar(Pe.text)},null,8,Zie))]),_:2},1040,["modelValue"]))),128))],16,Wie))}}),Jie=["value","disabled"],E4=sr({__name:"BFormSelectOption",props:{value:null,disabled:{default:!1}},setup(t){const e=bt(st(t,"disabled"));return(n,r)=>(ve(),et("option",{value:t.value,disabled:tt(e)},[Xt(n.$slots,"default")],8,Jie))}}),eoe=["label"],t7=sr({__name:"BFormSelectOptionGroup",props:{label:null,disabledField:{default:"disabled"},htmlField:{default:"html"},options:{default:()=>[]},textField:{default:"text"},valueField:{default:"value"}},setup(t){const e=t,n=ft(()=>w4(e.options,"BFormSelectOptionGroup",e));return(r,o)=>(ve(),et("optgroup",{label:t.label},[Xt(r.$slots,"first"),(ve(!0),et(_r,null,Li(tt(n),(l,h)=>(ve(),hn(E4,It({key:h,value:l.value,disabled:l.disabled},r.$attrs,{innerHTML:l.html||l.text}),null,16,["value","disabled","innerHTML"]))),128)),Xt(r.$slots,"default")],8,eoe))}}),toe=["id","name","form","multiple","size","disabled","required","aria-required","aria-invalid"],noe=sr({__name:"BFormSelect",props:{ariaInvalid:{default:void 0},autofocus:{default:!1},disabled:{default:!1},disabledField:{default:"disabled"},form:null,htmlField:{default:"html"},id:null,labelField:{default:"label"},multiple:{default:!1},name:null,options:{default:()=>[]},optionsField:{default:"options"},plain:{default:!1},required:{default:!1},selectSize:{default:0},size:null,state:{default:void 0},textField:{default:"text"},valueField:{default:"value"},modelValue:{default:""}},emits:["input","update:modelValue","change"],setup(t,{expose:e,emit:n}){const r=t,o=Nl(st(r,"id"),"input"),l=bt(st(r,"autofocus")),h=bt(st(r,"disabled")),p=bt(st(r,"multiple")),i=bt(st(r,"plain")),b=bt(st(r,"required")),E=bt(st(r,"state")),I=yr(),O=ft(()=>({"form-control":i.value,[`form-control-${r.size}`]:r.size&&i.value,"form-select":!i.value,[`form-select-${r.size}`]:r.size&&!i.value,"is-valid":E.value===!0,"is-invalid":E.value===!1})),M=ft(()=>{if(r.selectSize||i.value)return r.selectSize}),G=ft(()=>RE(r.ariaInvalid,E.value)),q=ft(()=>w4(r.options,"BFormSelect",r)),Z=ft({get(){return r.modelValue},set(Pe){n("change",Pe),n("update:modelValue",Pe),n("input",Pe)}}),Y=()=>{var Pe;h.value||(Pe=I.value)==null||Pe.focus()},te=()=>{var Pe;h.value||(Pe=I.value)==null||Pe.blur()},be=()=>{Lh(()=>{var Pe;l.value&&((Pe=I.value)==null||Pe.focus())})};return ws(be),pE(be),e({blur:te,focus:Y}),(Pe,Se)=>Fo((ve(),et("select",It({id:tt(o),ref_key:"input",ref:I},Pe.$attrs,{"onUpdate:modelValue":Se[0]||(Se[0]=Ie=>ga(Z)?Z.value=Ie:null),class:tt(O),name:t.name,form:t.form||void 0,multiple:tt(p)||void 0,size:tt(M),disabled:tt(h),required:tt(b),"aria-required":tt(b)?!0:void 0,"aria-invalid":tt(G)}),[Xt(Pe.$slots,"first"),(ve(!0),et(_r,null,Li(tt(q),(Ie,Ae)=>(ve(),et(_r,{key:Ae},[Array.isArray(Ie.options)?(ve(),hn(t7,{key:0,label:Ie.label,options:Ie.options},null,8,["label","options"])):(ve(),hn(E4,{key:1,value:Ie.value,disabled:Ie.disabled,innerHTML:Ie.html||Ie.text},null,8,["value","disabled","innerHTML"]))],64))),128)),Xt(Pe.$slots,"default")],16,toe)),[[t4,tt(Z)]])}}),roe=["id"],n7=sr({__name:"BFormTag",props:{id:null,title:null,disabled:{default:!1},noRemove:{default:!1},pill:{default:!1},removeLabel:{default:"Remove tag"},tag:{default:"span"},variant:{default:"secondary"}},emits:["remove"],setup(t,{emit:e}){const n=t,r=mc(),o=Nl(st(n,"id")),l=bt(st(n,"disabled")),h=bt(st(n,"noRemove")),p=bt(st(n,"pill")),i=ft(()=>{var I,O,M;return(M=((O=(I=r.default)==null?void 0:I.call(r)[0].children)!=null?O:"").toString()||n.title)!=null?M:""}),b=ft(()=>`${o.value}taglabel__`),E=ft(()=>[`bg-${n.variant}`,{"text-dark":["warning","info","light"].includes(n.variant),"rounded-pill":p.value,disabled:l.value}]);return(I,O)=>(ve(),hn(mr(t.tag),{id:tt(o),title:tt(i),class:On(["badge b-form-tag d-inline-flex align-items-center mw-100",tt(E)]),"aria-labelledby":tt(b)},{default:Kn(()=>[mt("span",{id:tt(b),class:"b-form-tag-content flex-grow-1 text-truncate"},[Xt(I.$slots,"default",{},()=>[jr(Ar(tt(i)),1)])],8,roe),!tt(l)&&!tt(h)?(ve(),hn(H_,{key:0,"aria-keyshortcuts":"Delete","aria-label":t.removeLabel,class:"b-form-tag-remove",white:!["warning","info","light"].includes(t.variant),"aria-describedby":tt(b),"aria-controls":t.id,onClick:O[0]||(O[0]=M=>e("remove",tt(i)))},null,8,["aria-label","white","aria-describedby","aria-controls"])):Sn("",!0)]),_:3},8,["id","title","class","aria-labelledby"]))}}),ioe=["id"],ooe=["id","for","aria-live"],soe=["id","aria-live"],aoe=["id"],loe=["aria-controls"],coe={role:"group",class:"d-flex"},uoe=["id","disabled","value","type","placeholder","form","required"],hoe=["disabled"],doe={"aria-live":"polite","aria-atomic":"true"},foe={key:0,class:"d-block invalid-feedback"},Aoe={key:1,class:"form-text text-muted"},poe={key:2,class:"form-text text-muted"},moe=["name","value"],goe=sr({__name:"BFormTags",props:{addButtonText:{default:"Add"},addButtonVariant:{default:"outline-secondary"},addOnChange:{default:!1},autofocus:{default:!1},disabled:{default:!1},duplicateTagText:{default:"Duplicate tag(s)"},inputAttrs:null,inputClass:null,inputId:null,inputType:{default:"text"},invalidTagText:{default:"Invalid tag(s)"},form:null,limit:null,limitTagsText:{default:"Tag limit reached"},modelValue:{default:()=>[]},name:null,noAddOnEnter:{default:!1},noOuterFocus:{default:!1},noTagRemove:{default:!1},placeholder:{default:"Add tag..."},removeOnDelete:{default:!1},required:{default:!1},separator:null,state:{default:void 0},size:null,tagClass:null,tagPills:{default:!1},tagRemoveLabel:null,tagRemovedLabel:{default:"Tag removed"},tagValidator:{type:Function,default:()=>!0},tagVariant:{default:"secondary"}},emits:["update:modelValue","input","tag-state","focus","focusin","focusout","blur"],setup(t,{emit:e}){const n=t,r=Nl(),o=bt(st(n,"addOnChange")),l=bt(st(n,"autofocus")),h=bt(st(n,"disabled")),p=bt(st(n,"noAddOnEnter")),i=bt(st(n,"noOuterFocus")),b=bt(st(n,"noTagRemove")),E=bt(st(n,"removeOnDelete")),I=bt(st(n,"required")),O=bt(st(n,"state")),M=bt(st(n,"tagPills")),G=yr(null),q=ft(()=>n.inputId||`${r.value}input__`),Z=yr(n.modelValue),Y=yr(""),te=yr(!1),be=yr(!1),Pe=yr(""),Se=yr([]),Ie=yr([]),Ae=yr([]),ne=ft(()=>({[`form-control-${n.size}`]:n.size!==void 0,disabled:h.value,focus:be.value,"is-invalid":O.value===!1,"is-valid":O.value===!0})),ue=ft(()=>Z.value.includes(Y.value)),ye=ft(()=>Y.value===""?!1:!n.tagValidator(Y.value)),se=ft(()=>Z.value.length===n.limit),le=ft(()=>!ye.value&&!ue.value),ge=ft(()=>({addButtonText:n.addButtonText,addButtonVariant:n.addButtonVariant,addTag:In,disableAddButton:le.value,disabled:h.value,duplicateTagText:n.duplicateTagText,duplicateTags:Ae.value,form:n.form,inputAttrs:{...n.inputAttrs,disabled:h.value,form:n.form,id:q,value:Y},inputHandlers:{input:Mt,keydown:Ut,change:on},inputId:q,inputType:n.inputType,invalidTagText:n.invalidTagText,invalidTags:Ie.value,isDuplicate:ue.value,isInvalid:ye.value,isLimitReached:se.value,limitTagsText:n.limitTagsText,limit:n.limit,noTagRemove:b.value,placeholder:n.placeholder,removeTag:Ee,required:I.value,separator:n.separator,size:n.size,state:O.value,tagClass:n.tagClass,tagPills:M.value,tagRemoveLabel:n.tagRemoveLabel,tagVariant:n.tagVariant,tags:Z.value}));Do(()=>n.modelValue,$e=>{Z.value=$e});const lt=()=>{var $e;l.value&&(($e=G.value)==null||$e.focus())},Ot=$e=>{if(h.value){$e.target.blur();return}e("focusin",$e)},gt=$e=>{h.value||i.value||(be.value=!0,e("focus",$e))},Tt=$e=>{be.value=!1,e("blur",$e)},Mt=$e=>{var We,vt;const _t=typeof $e=="string"?$e:$e.target.value;if(te.value=!1,((We=n.separator)==null?void 0:We.includes(_t.charAt(0)))&&_t.length>0){G.value&&(G.value.value="");return}if(Y.value=_t,(vt=n.separator)!=null&&vt.includes(_t.charAt(_t.length-1))){In(_t.slice(0,_t.length-1));return}Se.value=n.tagValidator(_t)&&!ue.value?[_t]:[],Ie.value=n.tagValidator(_t)?[]:[_t],Ae.value=ue.value?[_t]:[],e("tag-state",Se.value,Ie.value,Ae.value)},on=$e=>{o.value&&(Mt($e),ue.value||In(Y.value))},Ut=$e=>{if($e.key==="Enter"&&!p.value){In(Y.value);return}($e.key==="Backspace"||$e.key==="Delete")&&E.value&&Y.value===""&&te.value&&Z.value.length>0?Ee(Z.value[Z.value.length-1]):te.value=!0},In=$e=>{var We;if($e=($e||Y.value).trim(),$e===""||ue.value||!n.tagValidator($e)||n.limit&&se.value)return;const vt=[...n.modelValue,$e];Y.value="",te.value=!0,e("update:modelValue",vt),e("input",vt),(We=G.value)==null||We.focus()},Ee=$e=>{var We;const vt=Z.value.indexOf((We=$e==null?void 0:$e.toString())!=null?We:"");Pe.value=Z.value.splice(vt,1).toString(),e("update:modelValue",Z.value)};return ws(()=>{lt(),n.modelValue.length>0&&(te.value=!0)}),pE(()=>lt()),($e,We)=>(ve(),et("div",{id:tt(r),class:On(["b-form-tags form-control h-auto",tt(ne)]),role:"group",tabindex:"-1",onFocusin:Ot,onFocusout:We[1]||(We[1]=vt=>e("focusout",vt))},[mt("output",{id:`${tt(r)}selected_tags__`,class:"visually-hidden",role:"status",for:tt(q),"aria-live":be.value?"polite":"off","aria-atomic":"true","aria-relevant":"additions text"},Ar(Z.value.join(", ")),9,ooe),mt("div",{id:`${tt(r)}removed_tags__`,role:"status","aria-live":be.value?"assertive":"off","aria-atomic":"true",class:"visually-hidden"}," ("+Ar(t.tagRemovedLabel)+") "+Ar(Pe.value),9,soe),Xt($e.$slots,"default",Ks(Ac(tt(ge))),()=>[mt("ul",{id:`${tt(r)}tag_list__`,class:"b-form-tags-list list-unstyled mb-0 d-flex flex-wrap align-items-center"},[(ve(!0),et(_r,null,Li(Z.value,(vt,_t)=>Xt($e.$slots,"tag",Ks(It({key:_t},{tag:vt,tagClass:t.tagClass,tagVariant:t.tagVariant,tagPills:tt(M),removeTag:Ee})),()=>[Lr(n7,{class:On(t.tagClass),tag:"li",variant:t.tagVariant,pill:t.tagPills,onRemove:Ee},{default:Kn(()=>[jr(Ar(vt),1)]),_:2},1032,["class","variant","pill"])])),128)),mt("li",{role:"none","aria-live":"off",class:"b-from-tags-field flex-grow-1","aria-controls":`${tt(r)}tag_list__`},[mt("div",coe,[mt("input",It({id:tt(q),ref_key:"input",ref:G,disabled:tt(h),value:Y.value,type:t.inputType,placeholder:t.placeholder,class:"b-form-tags-input w-100 flex-grow-1 p-0 m-0 bg-transparent border-0",style:{outline:"currentcolor none 0px","min-width":"5rem"}},t.inputAttrs,{form:t.form,required:tt(I),onInput:Mt,onChange:on,onKeydown:Ut,onFocus:gt,onBlur:Tt}),null,16,uoe),tt(le)?(ve(),et("button",{key:0,type:"button",class:On(["btn b-form-tags-button py-0",[`btn-${t.addButtonVariant}`,{"disabled invisible":Y.value.length===0},t.inputClass]]),style:{"font-size":"90%"},disabled:tt(h)||Y.value.length===0||tt(se),onClick:We[0]||(We[0]=vt=>In(Y.value))},[Xt($e.$slots,"add-button-text",{},()=>[jr(Ar(t.addButtonText),1)])],10,hoe)):Sn("",!0)])],8,loe)],8,aoe),mt("div",doe,[tt(ye)?(ve(),et("div",foe,Ar(t.invalidTagText)+": "+Ar(Y.value),1)):Sn("",!0),tt(ue)?(ve(),et("small",Aoe,Ar(t.duplicateTagText)+": "+Ar(Y.value),1)):Sn("",!0),Z.value.length===t.limit?(ve(),et("small",poe,"Tag limit reached")):Sn("",!0)])]),t.name?(ve(!0),et(_r,{key:0},Li(Z.value,(vt,_t)=>(ve(),et("input",{key:_t,type:"hidden",name:t.name,value:vt},null,8,moe))),128)):Sn("",!0)],42,ioe))}}),yoe=sr({props:{...Fz,noResize:{type:[Boolean,String],default:!1},rows:{type:[String,Number],required:!1,default:2},wrap:{type:String,default:"soft"}},emits:["update:modelValue","change","blur","input"],setup(t,{emit:e}){const{input:n,computedId:r,computedAriaInvalid:o,onInput:l,onChange:h,onBlur:p,focus:i,blur:b}=Rz(t,e),E=bt(st(t,"noResize")),I=ft(()=>({"form-control":!t.plaintext,"form-control-plaintext":t.plaintext,[`form-control-${t.size}`]:!!t.size,"is-valid":t.state===!0,"is-invalid":t.state===!1})),O=ft(()=>E.value?{resize:"none"}:void 0);return{input:n,computedId:r,computedAriaInvalid:o,onInput:l,onChange:h,onBlur:p,focus:i,blur:b,computedClasses:I,computedStyles:O}}}),_oe=["id","name","form","disabled","placeholder","required","autocomplete","readonly","aria-required","aria-invalid","rows","wrap"];function voe(t,e,n,r,o,l){return ve(),et("textarea",It({id:t.computedId,ref:"input",class:t.computedClasses,name:t.name||void 0,form:t.form||void 0,disabled:t.disabled,placeholder:t.placeholder,required:t.required,autocomplete:t.autocomplete||void 0,readonly:t.readonly||t.plaintext,"aria-required":t.required?"true":void 0,"aria-invalid":t.computedAriaInvalid,rows:t.rows,style:t.computedStyles,wrap:t.wrap||void 0},t.$attrs,{onInput:e[0]||(e[0]=h=>t.onInput(h)),onChange:e[1]||(e[1]=h=>t.onChange(h)),onBlur:e[2]||(e[2]=h=>t.onBlur(h))}),null,16,_oe)}const boe=gu(yoe,[["render",voe]]),woe={key:0,class:"input-group-text"},xoe=["innerHTML"],Coe={key:1},Eoe={key:0,class:"input-group-text"},Boe=["innerHTML"],Soe={key:1},Toe=sr({__name:"BInputGroup",props:{append:null,appendHtml:null,id:null,prepend:null,prependHtml:null,size:null,tag:{default:"div"}},setup(t){const e=t,n=ft(()=>({"input-group-sm":e.size==="sm","input-group-lg":e.size==="lg"})),r=ft(()=>!!e.append||!!e.appendHtml),o=ft(()=>!!e.prepend||!!e.prependHtml);return(l,h)=>(ve(),hn(mr(t.tag),{id:t.id,class:On(["input-group",tt(n)]),role:"group"},{default:Kn(()=>[Xt(l.$slots,"prepend",{},()=>[tt(o)?(ve(),et("span",woe,[t.prependHtml?(ve(),et("span",{key:0,innerHTML:t.prependHtml},null,8,xoe)):(ve(),et("span",Coe,Ar(t.prepend),1))])):Sn("",!0)]),Xt(l.$slots,"default"),Xt(l.$slots,"append",{},()=>[tt(r)?(ve(),et("span",Eoe,[t.appendHtml?(ve(),et("span",{key:0,innerHTML:t.appendHtml},null,8,Boe)):(ve(),et("span",Soe,Ar(t.append),1))])):Sn("",!0)])]),_:3},8,["id","class"]))}}),r7=sr({__name:"BInputGroupText",props:{tag:{default:"div"},text:null},setup(t){return(e,n)=>(ve(),hn(mr(t.tag),{class:"input-group-text"},{default:Kn(()=>[Xt(e.$slots,"default",{},()=>[jr(Ar(t.text),1)])]),_:3}))}}),B4=sr({__name:"BInputGroupAddon",props:{isText:{default:!1}},setup(t){const e=bt(st(t,"isText"));return(n,r)=>tt(e)?(ve(),hn(r7,{key:0},{default:Kn(()=>[Xt(n.$slots,"default")]),_:3})):Xt(n.$slots,"default",{key:1})}}),Ioe=sr({__name:"BInputGroupAppend",props:{isText:{default:!1}},setup(t){return(e,n)=>(ve(),hn(B4,{"is-text":t.isText},{default:Kn(()=>[Xt(e.$slots,"default")]),_:3},8,["is-text"]))}}),Poe=sr({__name:"BInputGroupPrepend",props:{isText:{default:!1}},setup(t){return(e,n)=>(ve(),hn(B4,{"is-text":t.isText},{default:Kn(()=>[Xt(e.$slots,"default")]),_:3},8,["is-text"]))}}),i7=Symbol(),Loe=sr({__name:"BListGroup",props:{flush:{default:!1},horizontal:{type:[Boolean,String],default:!1},numbered:{default:!1},tag:{default:"div"}},setup(t){const e=t,n=bt(st(e,"flush")),r=bt(st(e,"numbered")),o=ft(()=>{const h=n.value?!1:e.horizontal;return{"list-group-flush":n.value,"list-group-horizontal":h===!0,[`list-group-horizontal-${h}`]:typeof h=="string","list-group-numbered":r.value}}),l=ft(()=>r.value===!0?"ol":e.tag);return tf(i7,{numbered:r.value}),(h,p)=>(ve(),hn(mr(tt(l)),{class:On(["list-group",tt(o)])},{default:Kn(()=>[Xt(h.$slots,"default")]),_:3},8,["class"]))}}),Foe=sr({__name:"BListGroupItem",props:{action:{default:!1},active:{default:!1},button:{default:!1},disabled:{default:!1},href:null,tag:{default:"div"},target:{default:"_self"},to:null,variant:null},setup(t){const e=t,n=DN(),r=il(i7,null),o=bt(st(e,"action")),l=bt(st(e,"active")),h=bt(st(e,"button")),p=bt(st(e,"disabled")),i=ft(()=>!h.value&&(!!e.href||!!e.to)),b=ft(()=>r!=null&&r.numbered?"li":h.value?"button":i.value?qu:e.tag),E=ft(()=>o.value||i.value||h.value||["a","router-link","button","b-link"].includes(e.tag)),I=ft(()=>({[`list-group-item-${e.variant}`]:e.variant!==void 0,"list-group-item-action":E.value,active:l.value,disabled:p.value})),O=ft(()=>{const M={};return h.value&&((!n||!n.type)&&(M.type="button"),p.value&&(M.disabled=!0)),M});return(M,G)=>(ve(),hn(mr(tt(b)),It({class:["list-group-item",tt(I)],"aria-current":tt(l)?!0:void 0,"aria-disabled":tt(p)?!0:void 0,target:tt(i)?t.target:void 0,href:tt(h)?void 0:t.href,to:tt(h)?void 0:t.to},tt(O)),{default:Kn(()=>[Xt(M.$slots,"default")]),_:3},16,["class","aria-current","aria-disabled","target","href","to"]))}}),Roe=["id","aria-labelledby","aria-describedby"],koe=["id"],Moe={inheritAttrs:!1},Ooe=sr({...Moe,__name:"BModal",props:{bodyBgVariant:null,bodyClass:null,bodyTextVariant:null,busy:{default:!1},lazy:{default:!1},buttonSize:{default:"md"},cancelDisabled:{default:!1},cancelTitle:{default:"Cancel"},cancelVariant:{default:"secondary"},centered:{default:!1},contentClass:null,dialogClass:null,footerBgVariant:null,footerBorderVariant:null,footerClass:null,footerTextVariant:null,fullscreen:{type:[Boolean,String],default:!1},headerBgVariant:null,headerBorderVariant:null,headerClass:null,headerCloseLabel:{default:"Close"},headerCloseWhite:{default:!1},headerTextVariant:null,hideBackdrop:{default:!1},hideFooter:{default:!1},hideHeader:{default:!1},hideHeaderClose:{default:!1},id:null,modalClass:null,modelValue:{default:!1},noCloseOnBackdrop:{default:!1},noCloseOnEsc:{default:!1},noFade:{default:!1},noFocus:{default:!1},okDisabled:{default:!1},okOnly:{default:!1},okTitle:{default:"Ok"},okVariant:{default:"primary"},scrollable:{default:!1},show:{default:!1},size:null,title:null,titleClass:null,titleSrOnly:{default:!1},titleTag:{default:"h5"},static:{default:!1}},emits:["update:modelValue","show","shown","hide","hidden","hide-prevented","show-prevented","ok","cancel","close"],setup(t,{emit:e}){const n=t,r=mc(),o=Nl(st(n,"id"),"modal"),l=bt(st(n,"busy")),h=bt(st(n,"lazy")),p=bt(st(n,"cancelDisabled")),i=bt(st(n,"centered")),b=bt(st(n,"hideBackdrop")),E=bt(st(n,"hideFooter")),I=bt(st(n,"hideHeader")),O=bt(st(n,"hideHeaderClose")),M=bt(st(n,"modelValue")),G=bt(st(n,"noCloseOnBackdrop")),q=bt(st(n,"noCloseOnEsc")),Z=bt(st(n,"noFade")),Y=bt(st(n,"noFocus")),te=bt(st(n,"okDisabled")),be=bt(st(n,"okOnly")),Pe=bt(st(n,"scrollable")),Se=bt(st(n,"titleSrOnly")),Ie=bt(st(n,"static")),Ae=yr(!1),ne=yr(null),ue=yr(!1),ye=ft(()=>[n.modalClass,{fade:!Z.value,show:Ae.value}]),se=ft(()=>!Ku(r["header-close"])),le=ft(()=>[n.dialogClass,{"modal-fullscreen":n.fullscreen===!0,[`modal-fullscreen-${n.fullscreen}-down`]:typeof n.fullscreen=="string",[`modal-${n.size}`]:n.size!==void 0,"modal-dialog-centered":i.value,"modal-dialog-scrollable":Pe.value}]),ge=ft(()=>[n.bodyClass,{[`bg-${n.bodyBgVariant}`]:n.bodyBgVariant!==void 0,[`text-${n.bodyTextVariant}`]:n.bodyTextVariant!==void 0}]),lt=ft(()=>[n.headerClass,{[`bg-${n.headerBgVariant}`]:n.headerBgVariant!==void 0,[`border-${n.headerBorderVariant}`]:n.headerBorderVariant!==void 0,[`text-${n.headerTextVariant}`]:n.headerTextVariant!==void 0}]),Ot=ft(()=>[n.footerClass,{[`bg-${n.footerBgVariant}`]:n.footerBgVariant!==void 0,[`border-${n.footerBorderVariant}`]:n.footerBorderVariant!==void 0,[`text-${n.footerTextVariant}`]:n.footerTextVariant!==void 0}]),gt=ft(()=>[n.titleClass,{"visually-hidden":Se.value}]),Tt=ft(()=>p.value||l.value),Mt=ft(()=>te.value||l.value),on=(_t,at={})=>new lne(_t,{cancelable:!1,target:ne.value||null,relatedTarget:null,trigger:null,...at,componentId:o.value}),Ut=(_t="")=>{const at=on("hide",{cancelable:_t!=="",trigger:_t});if(_t==="ok"&&e(_t,at),_t==="cancel"&&e(_t,at),_t==="close"&&e(_t,at),e("hide",at),at.defaultPrevented||_t==="backdrop"&&G.value||_t==="esc"&&q.value){e("update:modelValue",!0),e("hide-prevented");return}e("update:modelValue",!1)},In=()=>{const _t=on("show",{cancelable:!0});if(e("show",_t),_t.defaultPrevented){e("update:modelValue",!1),e("show-prevented");return}e("update:modelValue",!0)},Ee=()=>In(),$e=()=>{Ae.value=!0,e("shown",on("shown")),h.value===!0&&(ue.value=!0)},We=()=>{Ae.value=!1},vt=()=>{e("hidden",on("hidden")),h.value===!0&&(ue.value=!1)};return Do(()=>M.value,_t=>{_t===!0&&!Y.value&&Lh(()=>{ne.value!==null&&ne.value.focus()})}),(_t,at)=>(ve(),hn(ZN,{to:"body",disabled:tt(Ie)},[Lr(nb,{"no-fade":!0,"trans-props":{enterToClass:"show"},onBeforeEnter:Ee,onAfterEnter:$e,onLeave:We,onAfterLeave:vt},{default:Kn(()=>[Fo(mt("div",It({id:tt(o),ref_key:"element",ref:ne,class:["modal",tt(ye)],role:"dialog","aria-labelledby":`${tt(o)}-label`,"aria-describedby":`${tt(o)}-body`,tabindex:"-1"},_t.$attrs,{onKeyup:at[5]||(at[5]=Tx(Ft=>Ut("esc"),["esc"]))}),[mt("div",{class:On(["modal-dialog",tt(le)])},[!tt(h)||tt(h)&&ue.value||tt(h)&&tt(M)===!0?(ve(),et("div",{key:0,class:On(["modal-content",t.contentClass])},[tt(I)?Sn("",!0):(ve(),et("div",{key:0,class:On(["modal-header",tt(lt)])},[Xt(_t.$slots,"header",{},()=>[(ve(),hn(mr(t.titleTag),{id:`${tt(o)}-label`,class:On(["modal-title",tt(gt)])},{default:Kn(()=>[Xt(_t.$slots,"title",{},()=>[jr(Ar(t.title),1)],!0)]),_:3},8,["id","class"])),tt(O)?Sn("",!0):(ve(),et(_r,{key:0},[tt(se)?(ve(),et("button",{key:0,type:"button",onClick:at[0]||(at[0]=Ft=>Ut("close"))},[Xt(_t.$slots,"header-close",{},void 0,!0)])):(ve(),hn(H_,{key:1,"aria-label":t.headerCloseLabel,white:t.headerCloseWhite,onClick:at[1]||(at[1]=Ft=>Ut("close"))},null,8,["aria-label","white"]))],64))],!0)],2)),mt("div",{id:`${tt(o)}-body`,class:On(["modal-body",tt(ge)])},[Xt(_t.$slots,"default",{},void 0,!0)],10,koe),tt(E)?Sn("",!0):(ve(),et("div",{key:1,class:On(["modal-footer",tt(Ot)])},[Xt(_t.$slots,"footer",{},()=>[Xt(_t.$slots,"cancel",{},()=>[tt(be)?Sn("",!0):(ve(),hn(C_,{key:0,type:"button",class:"btn",disabled:tt(Tt),size:t.buttonSize,variant:t.cancelVariant,onClick:at[2]||(at[2]=Ft=>Ut("cancel"))},{default:Kn(()=>[jr(Ar(t.cancelTitle),1)]),_:1},8,["disabled","size","variant"]))],!0),Xt(_t.$slots,"ok",{},()=>[Lr(C_,{type:"button",class:"btn",disabled:tt(Mt),size:t.buttonSize,variant:t.okVariant,onClick:at[3]||(at[3]=Ft=>Ut("ok"))},{default:Kn(()=>[jr(Ar(t.okTitle),1)]),_:1},8,["disabled","size","variant"])],!0)],!0)],2))],2)):Sn("",!0)],2),tt(b)?Sn("",!0):Xt(_t.$slots,"backdrop",{key:0},()=>[mt("div",{class:"modal-backdrop fade show",onClick:at[4]||(at[4]=Ft=>Ut("backdrop"))})],!0)],16,Roe),[[_X,tt(M)]])]),_:3})],8,["disabled"]))}}),Doe=gu(Ooe,[["__scopeId","data-v-116ecd66"]]),Uoe=sr({__name:"BNav",props:{align:null,cardHeader:{default:!1},fill:{default:!1},justified:{default:!1},pills:{default:!1},small:{default:!1},tabs:{default:!1},tag:{default:"ul"},vertical:{default:!1}},setup(t){const e=t,n=bt(st(e,"cardHeader")),r=bt(st(e,"fill")),o=bt(st(e,"justified")),l=bt(st(e,"pills")),h=bt(st(e,"small")),p=bt(st(e,"tabs")),i=bt(st(e,"vertical")),b=tb(st(e,"align")),E=ft(()=>({"nav-tabs":p.value,"nav-pills":l.value&&!p.value,"card-header-tabs":!i.value&&n.value&&p.value,"card-header-pills":!i.value&&n.value&&l.value&&!p.value,"flex-column":i.value,"nav-fill":!i.value&&r.value,"nav-justified":!i.value&&o.value,[b.value]:!i.value&&e.align!==void 0,small:h.value}));return(I,O)=>(ve(),hn(mr(t.tag),{class:On(["nav",tt(E)])},{default:Kn(()=>[Xt(I.$slots,"default")]),_:3},8,["class"]))}}),Noe=sr({__name:"BNavForm",props:{role:null,id:null,floating:{default:!1},novalidate:{default:!1},validated:{default:!1}},emits:["submit"],setup(t,{emit:e}){const n=t,r=ft(()=>({floating:n.floating,role:n.role,id:n.id,novalidate:n.novalidate,validated:n.validated})),o=l=>e("submit",l);return(l,h)=>(ve(),hn(Zz,It(tt(r),{class:"d-flex",onSubmit:gf(o,["prevent"])}),{default:Kn(()=>[Xt(l.$slots,"default")]),_:3},16,["onSubmit"]))}}),zoe=sr({components:{BLink:qu},props:{...kE(Lg,["event","routerTag"])},setup(t){return{disabledBoolean:bt(st(t,"disabled"))}}}),Voe={class:"nav-item"};function Qoe(t,e,n,r,o,l){const h=Nr("b-link");return ve(),et("li",Voe,[Lr(h,It({class:"nav-link"},t.$props,{"active-class":"active",tabindex:t.disabledBoolean?-1:void 0,"aria-disabled":t.disabledBoolean?!0:void 0}),{default:Kn(()=>[Xt(t.$slots,"default")]),_:3},16,["tabindex","aria-disabled"])])}const Hoe=gu(zoe,[["render",Qoe]]),joe={class:"nav-item dropdown"},$oe=sr({__name:"BNavItemDropdown",props:{id:null,text:null,toggleClass:null,size:null,offset:null,autoClose:{type:[Boolean,String],default:!0},dark:{type:Boolean,default:!1},dropleft:{type:Boolean,default:!1},dropright:{type:Boolean,default:!1},dropup:{type:Boolean,default:!1},right:{type:Boolean,default:!1},left:{type:[Boolean,String],default:!1},split:{type:Boolean,default:!1},splitVariant:null,noCaret:{type:Boolean,default:!1},variant:{default:"link"}},setup(t){const e=t;return(n,r)=>(ve(),et("li",joe,[Lr(Xz,It(e,{"is-nav":""}),gg({_:2},[Li(n.$slots,(o,l,h)=>({name:l,fn:Kn(p=>[Xt(n.$slots,l,Ks(Ac(p||{})))])}))]),1040)]))}}),Goe={class:"navbar-text"},Koe=sr({__name:"BNavText",props:{text:null},setup(t){return(e,n)=>(ve(),et("li",Goe,[Xt(e.$slots,"default",{},()=>[jr(Ar(t.text),1)])]))}}),qoe=sr({__name:"BNavbar",props:{fixed:null,print:{default:!1},sticky:null,tag:{default:"nav"},toggleable:{type:[Boolean,String],default:!1},dark:{default:!1},variant:null,container:{type:[String,Boolean],default:"fluid"}},setup(t){const e=t,n=bt(st(e,"print")),r=bt(st(e,"dark")),o=ft(()=>e.tag==="nav"?void 0:"navigation"),l=ft(()=>typeof e.toggleable=="string"?`navbar-expand-${e.toggleable}`:e.toggleable===!1?"navbar-expand":void 0),h=ft(()=>e.container===!0?"container":"container-fluid"),p=ft(()=>({"d-print":n.value,[`sticky-${e.sticky}`]:e.sticky!==void 0,"navbar-dark":r.value,[`bg-${e.variant}`]:e.variant!==void 0,[`fixed-${e.fixed}`]:e.fixed!==void 0,[`${l.value}`]:l.value!==void 0}));return(i,b)=>(ve(),hn(mr(t.tag),{class:On(["navbar",tt(p)]),role:tt(o)},{default:Kn(()=>[t.container!==!1?(ve(),et("div",{key:0,class:On(tt(h))},[Xt(i.$slots,"default")],2)):Xt(i.$slots,"default",{key:1})]),_:3},8,["class","role"]))}}),gO=kE(Lg,["event","routerTag"]),Woe=sr({components:{BLink:qu},props:{tag:{type:String,default:"div"},...gO},setup(t){const e=ft(()=>i1(t)),n=ft(()=>e.value?qu:t.tag);return{computedLinkProps:ft(()=>e.value?b4(t,gO):{}),computedTag:n}}});function Xoe(t,e,n,r,o,l){return ve(),hn(mr(t.computedTag),It({class:"navbar-brand"},t.computedLinkProps),{default:Kn(()=>[Xt(t.$slots,"default")]),_:3},16)}const Zoe=gu(Woe,[["render",Xoe]]),Yoe=sr({__name:"BNavbarNav",props:{align:null,fill:{default:!1},justified:{default:!1},small:{default:!1},tag:{default:"ul"}},setup(t){const e=t,n=bt(st(e,"fill")),r=bt(st(e,"justified")),o=bt(st(e,"small")),l=tb(st(e,"align")),h=ft(()=>({"nav-fill":n.value,"nav-justified":r.value,[l.value]:e.align!==void 0,small:o.value}));return(p,i)=>(ve(),et("ul",{class:On(["navbar-nav",tt(h)])},[Xt(p.$slots,"default")],2))}}),Joe=mt("span",{class:"navbar-toggler-icon"},null,-1),ese=sr({__name:"BNavbarToggle",props:{disabled:{default:!1},label:{default:"Toggle navigation"},target:null},emits:["click"],setup(t,{emit:e}){const n=t,r=bt(st(n,"disabled")),o=ft(()=>({disabled:r.value,"aria-label":n.label})),l=ft(()=>({disabled:r.value})),h=p=>{r.value||e("click",p)};return(p,i)=>Fo((ve(),et("button",It({class:["navbar-toggler",tt(l)],type:"button"},tt(o),{onClick:h}),[Xt(p.$slots,"default",{},()=>[Joe])],16)),[[tt(x4),tt(r)?void 0:t.target]])}}),tse=["data-bs-backdrop","data-bs-scroll"],nse={key:0,class:"offcanvas-header"},rse={id:"offcanvasLabel",class:"offcanvas-title"},ise={class:"offcanvas-body"},ose={key:1},sse=sr({__name:"BOffcanvas",props:{dismissLabel:{default:"Close"},modelValue:{default:!1},bodyScrolling:{default:!1},backdrop:{default:!0},placement:{default:"start"},title:null,noHeaderClose:{default:!1},noHeader:{default:!1}},emits:["update:modelValue","show","shown","hide","hidden"],setup(t,{emit:e}){const n=t,r=bt(st(n,"modelValue")),o=bt(st(n,"bodyScrolling")),l=bt(st(n,"backdrop")),h=bt(st(n,"noHeaderClose")),p=bt(st(n,"noHeader")),i=mc(),b=yr(),E=yr(),I=ft(()=>!Ku(i.footer)),O=ft(()=>[`offcanvas-${n.placement}`]),M=()=>{e("show"),e("update:modelValue",!0)},G=()=>{e("hide"),e("update:modelValue",!1)};return Do(()=>r.value,q=>{var Z,Y;q?(Z=E.value)==null||Z.show(b.value):(Y=E.value)==null||Y.hide()}),uu(b,"shown.bs.offcanvas",()=>e("shown")),uu(b,"hidden.bs.offcanvas",()=>e("hidden")),uu(b,"show.bs.offcanvas",()=>{M()}),uu(b,"hide.bs.offcanvas",()=>{G()}),ws(()=>{var q;E.value=new gA(b.value),r.value&&((q=E.value)==null||q.show(b.value))}),(q,Z)=>(ve(),et("div",{ref_key:"element",ref:b,class:On(["offcanvas",tt(O)]),tabindex:"-1","aria-labelledby":"offcanvasLabel","data-bs-backdrop":tt(l),"data-bs-scroll":tt(o)},[tt(p)?Sn("",!0):(ve(),et("div",nse,[Xt(q.$slots,"header",Ks(Ac({visible:tt(r),placement:t.placement,hide:G})),()=>[mt("h5",rse,[Xt(q.$slots,"title",{},()=>[jr(Ar(t.title),1)])]),tt(h)?Sn("",!0):(ve(),hn(H_,{key:0,class:"text-reset","data-bs-dismiss":"offcanvas","aria-label":t.dismissLabel},null,8,["aria-label"]))])])),mt("div",ise,[Xt(q.$slots,"default")]),tt(I)?(ve(),et("div",ose,[Xt(q.$slots,"footer",Ks(Ac({visible:tt(r),placement:t.placement,hide:G})))])):Sn("",!0)],10,tse))}}),ase=sr({__name:"BOverlay",props:{bgColor:null,blur:{default:"2px"},fixed:{default:!1},noCenter:{default:!1},noFade:{default:!1},noWrap:{default:!1},opacity:{default:.85},overlayTag:{default:"div"},rounded:{type:[Boolean,String],default:!1},show:{default:!1},spinnerSmall:{default:!1},spinnerType:{default:"border"},spinnerVariant:null,variant:{default:"light"},wrapTag:{default:"div"},zIndex:{default:10}},emits:["click","hidden","shown"],setup(t,{emit:e}){const n=t,r={top:0,left:0,bottom:0,right:0},o=bt(st(n,"fixed")),l=bt(st(n,"noCenter")),h=bt(st(n,"noWrap")),p=bt(st(n,"show")),i=bt(st(n,"spinnerSmall")),b=ft(()=>n.rounded===!0||n.rounded===""?"rounded":n.rounded===!1?"":`rounded-${n.rounded}`),E=ft(()=>n.variant&&!n.bgColor?`bg-${n.variant}`:""),I=ft(()=>p.value?"true":null),O=ft(()=>({type:n.spinnerType||void 0,variant:n.spinnerVariant||void 0,small:i.value})),M=ft(()=>({...r,zIndex:n.zIndex||10})),G=ft(()=>["b-overlay",{"position-absolute":!h.value||!o.value,"position-fixed":h.value&&o.value}]),q=ft(()=>[E.value,b.value]),Z=ft(()=>({...r,opacity:n.opacity,backgroundColor:n.bgColor||void 0,backdropFilter:blur?`blur(${blur})`:void 0})),Y=ft(()=>l.value?r:{top:"50%",left:"50%",transform:"translateX(-50%) translateY(-50%)"});return(te,be)=>(ve(),hn(mr(t.wrapTag),{class:"b-overlay-wrap position-relative","aria-busy":tt(I)},{default:Kn(()=>[Xt(te.$slots,"default"),Lr(nb,{"no-fade":t.noFade,"trans-props":{enterToClass:"show"},name:"fade",onOnAfterEnter:be[1]||(be[1]=Pe=>e("shown")),onOnAfterLeave:be[2]||(be[2]=Pe=>e("hidden"))},{default:Kn(()=>[tt(p)?(ve(),hn(mr(t.overlayTag),{key:0,class:On(tt(G)),style:fc(tt(M)),onClick:be[0]||(be[0]=Pe=>e("click",Pe))},{default:Kn(()=>[mt("div",{class:On(["position-absolute",tt(q)]),style:fc(tt(Z))},null,6),mt("div",{class:"position-absolute",style:fc(tt(Y))},[Xt(te.$slots,"overlay",Ks(Ac(tt(O))),()=>[Lr(ME,Ks(Ac(tt(O))),null,16)])],4)]),_:3},8,["class","style"])):Sn("",!0)]),_:3},8,["no-fade"])]),_:3},8,["aria-busy"]))}}),lse=5,o7=20,s7=0,Kd=3,cse="ellipsis-text",use="first-text",hse="last-text",dse="next-text",fse="page",Ase="prev-text",yO=t=>Math.max(Rp(t)||o7,1),_O=t=>Math.max(Rp(t)||s7,0),pse=(t,e)=>{const n=Rp(t)||1;return n>e?e:n<1?1:n},mse=sr({name:"BPagination",props:{align:{type:String,default:"start"},ariaControls:{type:String,required:!1},ariaLabel:{type:String,default:"Pagination"},disabled:{type:[Boolean,String],default:!1},ellipsisClass:{type:[Array,String],default:()=>[]},ellipsisText:{type:String,default:"…"},firstClass:{type:[Array,String],default:()=>[]},firstNumber:{type:[Boolean,String],default:!1},firstText:{type:String,default:"«"},hideEllipsis:{type:[Boolean,String],default:!1},hideGotoEndButtons:{type:[Boolean,String],default:!1},labelFirstPage:{type:String,default:"Go to first page"},labelLastPage:{type:String,default:"Go to last page"},labelNextPage:{type:String,default:"Go to next page"},labelPage:{type:String,default:"Go to page"},labelPrevPage:{type:String,default:"Go to previous page"},lastClass:{type:[Array,String],default:()=>[]},lastNumber:{type:[Boolean,String],default:!1},lastText:{type:String,default:"»"},limit:{type:Number,default:lse},modelValue:{type:Number,default:1},nextClass:{type:[Array,String],default:()=>[]},nextText:{type:String,default:"›"},pageClass:{type:[Array,String],default:()=>[]},perPage:{type:Number,default:o7},pills:{type:[Boolean,String],default:!1},prevClass:{type:[Array,String],default:()=>[]},prevText:{type:String,default:"‹"},size:{type:String,required:!1},totalRows:{type:Number,default:s7}},emits:["update:modelValue","page-click"],setup(t,{emit:e,slots:n}){const r=bt(st(t,"disabled")),o=bt(st(t,"firstNumber")),l=bt(st(t,"hideEllipsis")),h=bt(st(t,"hideGotoEndButtons")),p=bt(st(t,"lastNumber")),i=bt(st(t,"pills")),b=ft(()=>t.align==="fill"?"start":t.align),E=tb(st(b,"value")),I=ft(()=>Math.ceil(_O(t.totalRows)/yO(t.perPage))),O=ft(()=>{let Se;return I.value-t.modelValue+2<t.limit&&t.limit>Kd?Se=I.value-G.value+1:Se=t.modelValue-Math.floor(G.value/2),Se<1?Se=1:Se>I.value-G.value&&(Se=I.value-G.value+1),t.limit<=Kd&&p.value&&I.value===Se+G.value-1&&(Se=Math.max(Se-1,1)),Se}),M=ft(()=>{const Se=I.value-t.modelValue;let Ie=!1;return Se+2<t.limit&&t.limit>Kd?t.limit>Kd&&(Ie=!0):t.limit>Kd&&(Ie=!!(!l.value||o.value)),O.value<=1&&(Ie=!1),Ie&&o.value&&O.value<4&&(Ie=!1),Ie}),G=ft(()=>{let Se=t.limit;return I.value<=t.limit?Se=I.value:t.modelValue<t.limit-1&&t.limit>Kd?((!l.value||p.value)&&(Se=t.limit-(o.value?0:1)),Se=Math.min(Se,t.limit)):I.value-t.modelValue+2<t.limit&&t.limit>Kd?(!l.value||o.value)&&(Se=t.limit-(p.value?0:1)):t.limit>Kd&&(Se=t.limit-(l.value?0:2)),Se}),q=ft(()=>{const Se=I.value-G.value;let Ie=!1;t.modelValue<t.limit-1&&t.limit>Kd?(!l.value||p.value)&&(Ie=!0):t.limit>Kd&&(Ie=!!(!l.value||p.value)),O.value>Se&&(Ie=!1);const Ae=O.value+G.value-1;return Ie&&p.value&&Ae>I.value-3&&(Ie=!1),Ie}),Z=pu({pageSize:yO(t.perPage),totalRows:_O(t.totalRows),numberOfPages:I.value}),Y=(Se,Ie)=>{if(Ie===t.modelValue)return;const{target:Ae}=Se,ne=new x_("page-click",{cancelable:!0,target:Ae});e("page-click",ne,Ie),!ne.defaultPrevented&&e("update:modelValue",Ie)},te=ft(()=>t.size?`pagination-${t.size}`:""),be=ft(()=>i.value?"b-pagination-pills":"");Do(()=>t.modelValue,Se=>{const Ie=pse(Se,I.value);Ie!==t.modelValue&&e("update:modelValue",Ie)}),Do(Z,(Se,Ie)=>{Se!=null&&(Ie.pageSize!==Se.pageSize&&Ie.totalRows===Se.totalRows||Ie.numberOfPages!==Se.numberOfPages&&t.modelValue>Ie.numberOfPages)&&e("update:modelValue",1)});const Pe=ft(()=>{const Se=[];for(let Ie=0;Ie<G.value;Ie++)Se.push({number:O.value+Ie,classes:null});return Se});return()=>{const Se=[],Ie=Pe.value.map(Ot=>Ot.number),Ae=Ot=>Ot===t.modelValue,ne=t.modelValue<1,ue=t.align==="fill",ye=(Ot,gt,Tt,Mt,on,Ut)=>{const In=r.value||Ae(Ut)||ne||Ot<1||Ot>I.value,Ee=Ot<1?1:Ot>I.value?I.value:Ot,$e={disabled:In,page:Ee,index:Ee-1},We=Ch(Tt,$e,n)||Mt||"";return Ui("li",{class:["page-item",{disabled:In,"flex-fill":ue,"d-flex":ue&&!In},on]},Ui(In?"span":"button",{class:["page-link",{"flex-grow-1":!In&&ue}],"aria-label":gt,"aria-controls":t.ariaControls||null,"aria-disabled":In?"true":null,role:"menuitem",type:In?null:"button",tabindex:In?null:"-1",onClick:vt=>{In||Y(vt,Ee)}},We))},se=Ot=>Ui("li",{class:["page-item","disabled","bv-d-xs-down-none",ue?"flex-fill":"",t.ellipsisClass],role:"separator",key:`ellipsis-${Ot?"last":"first"}`},[Ui("span",{class:["page-link"]},Ch(cse,{},n)||t.ellipsisText||"...")]),le=(Ot,gt)=>{const Tt=Ae(Ot.number)&&!ne,Mt=r.value?null:Tt||ne&&gt===0?"0":"-1",on={active:Tt,disabled:r.value,page:Ot.number,index:Ot.number-1,content:Ot.number},Ut=Ch(fse,on,n)||Ot.number,In=Ui(r.value?"span":"button",{class:["page-link",{"flex-grow-1":!r.value&&ue}],"aria-controls":t.ariaControls||null,"aria-disabled":r.value?"true":null,"aria-label":t.labelPage?`${t.labelPage} ${Ot.number}`:null,role:"menuitemradio",type:r.value?null:"button",tabindex:Mt,onClick:Ee=>{r.value||Y(Ee,Ot.number)}},Ut);return Ui("li",{class:["page-item",{disabled:r.value,active:Tt,"flex-fill":ue,"d-flex":ue&&!r.value},t.pageClass],role:"presentation",key:`page-${Ot.number}`},In)};if(!h.value&&!o.value){const Ot=ye(1,t.labelFirstPage,use,t.firstText,t.firstClass,1);Se.push(Ot)}const ge=ye(t.modelValue-1,t.labelFirstPage,Ase,t.prevText,t.prevClass,1);Se.push(ge),o.value&&Ie[0]!==1&&Se.push(le({number:1},0)),M.value&&Se.push(se(!1)),Pe.value.forEach((Ot,gt)=>{const Tt=M.value&&o.value&&Ie[0]!==1?1:0;Se.push(le(Ot,gt+Tt))}),q.value&&Se.push(se(!0)),p.value&&Ie[Ie.length-1]!==I.value&&Se.push(le({number:I.value},-1));const lt=ye(t.modelValue+1,t.labelNextPage,dse,t.nextText,t.nextClass,I.value);if(Se.push(lt),!p.value&&!h.value){const Ot=ye(I.value,t.labelLastPage,hse,t.lastText,t.lastClass,I.value);Se.push(Ot)}return Ui("ul",{class:["pagination",te.value,E.value,be.value],role:"menubar","aria-disabled":r.value,"aria-label":t.ariaLabel||null},Se)}}}),wh=sr({__name:"BPlaceholder",props:{tag:{default:"span"},width:null,cols:null,variant:null,size:null,animation:null},setup(t){const e=t,n=ft(()=>e.width===void 0?void 0:typeof e.width=="number"?e.width.toString():e.width.includes("%")?e.width.replaceAll("%",""):e.width),r=ft(()=>e.cols===void 0?void 0:typeof e.cols=="number"?e.cols.toString():e.cols),o=ft(()=>({[`col-${r.value}`]:r.value!==void 0&&n.value===void 0,[`bg-${e.variant}`]:e.variant!==void 0,[`placeholder-${e.size}`]:e.size!==void 0,[`placeholder-${e.animation}`]:e.animation!==void 0})),l=ft(()=>n.value===void 0?void 0:`width: ${n.value}%;`);return(h,p)=>(ve(),hn(mr(t.tag),{class:On(["placeholder",tt(o)]),style:fc(tt(l))},null,8,["class","style"]))}}),a7=sr({__name:"BPlaceholderButton",props:{tag:{default:"div"},width:null,cols:null,variant:{default:"primary"},animation:null},setup(t){const e=t,n=ft(()=>["btn",`btn-${e.variant}`,"disabled"]),r=ft(()=>({animation:e.animation,width:e.width,cols:e.cols,tag:e.tag}));return(o,l)=>(ve(),hn(wh,It({class:tt(n)},tt(r)),null,16,["class"]))}}),gse=sr({__name:"BPlaceholderCard",props:{noHeader:{default:!1},headerWidth:{default:100},headerVariant:null,headerAnimation:null,headerSize:null,noFooter:{default:!1},footerWidth:{default:100},footerVariant:null,footerAnimation:null,footerSize:null,animation:null,size:null,variant:null,noButton:{default:!1},imgBottom:{default:!1},imgSrc:null,imgBlankColor:{default:"#868e96"},imgHeight:{default:100},noImg:{default:!1}},setup(t){const e=t,n=bt(st(e,"noButton")),r=bt(st(e,"noHeader")),o=bt(st(e,"noFooter")),l=bt(st(e,"noImg")),h=ft(()=>({width:e.headerWidth,variant:e.headerVariant,animation:e.headerAnimation,size:e.headerSize})),p=ft(()=>({width:e.footerWidth,animation:e.footerAnimation,size:n.value?e.footerSize:void 0,variant:e.footerVariant})),i=ft(()=>({blank:!e.imgSrc,blankColor:e.imgBlankColor,height:e.imgSrc?void 0:e.imgHeight,src:e.imgSrc,top:!e.imgBottom,bottom:e.imgBottom}));return(b,E)=>(ve(),hn($z,{"img-bottom":t.imgBottom},gg({default:Kn(()=>[Xt(b.$slots,"default",{},()=>[Lr(wh,{cols:"7"}),Lr(wh,{cols:"4"}),Lr(wh,{cols:"4"}),Lr(wh,{cols:"6"}),Lr(wh,{cols:"8"})])]),_:2},[tt(l)?void 0:{name:"img",fn:Kn(()=>[Xt(b.$slots,"img",{},()=>[Lr(vC,Ks(Ac(tt(i))),null,16)])]),key:"0"},tt(r)?void 0:{name:"header",fn:Kn(()=>[Xt(b.$slots,"header",{},()=>[Lr(wh,Ks(Ac(tt(h))),null,16)])]),key:"1"},tt(o)?void 0:{name:"footer",fn:Kn(()=>[Xt(b.$slots,"footer",{},()=>[tt(n)?(ve(),hn(wh,Ks(It({key:1},tt(p))),null,16)):(ve(),hn(a7,Ks(It({key:0},tt(p))),null,16))])]),key:"2"}]),1032,["img-bottom"]))}}),OE=sr({__name:"BTableSimple",props:{bordered:{default:!1},borderless:{default:!1},borderVariant:null,captionTop:{default:!1},dark:{default:!1},hover:{default:!1},responsive:{type:[Boolean,String],default:!1},stacked:{type:[Boolean,String],default:!1},striped:{default:!1},small:{default:!1},tableClass:null,tableVariant:null,stickyHeader:{default:!1}},setup(t){const e=t,n=bt(st(e,"captionTop")),r=bt(st(e,"borderless")),o=bt(st(e,"bordered")),l=bt(st(e,"dark")),h=bt(st(e,"hover")),p=bt(st(e,"small")),i=bt(st(e,"striped")),b=bt(st(e,"stickyHeader")),E=ft(()=>["table","b-table",{"table-bordered":o.value,"table-borderless":r.value,[`border-${e.borderVariant}`]:e.borderVariant!==void 0,"caption-top":n.value,"table-dark":l.value,"table-hover":h.value,"b-table-stacked":typeof e.stacked=="boolean"&&e.stacked,[`b-table-stacked-${e.stacked}`]:typeof e.stacked=="string","table-striped":i.value,"table-sm":p.value,[`table-${e.tableVariant}`]:e.tableVariant!==void 0},e.tableClass]),I=ft(()=>[{"table-responsive":e.responsive===!0,[`table-responsive-${e.responsive}`]:typeof e.responsive=="string","b-table-sticky-header":b.value}]);return(O,M)=>t.responsive?(ve(),et("div",{key:1,class:On(tt(I))},[mt("table",{role:"table",class:On(tt(E))},[Xt(O.$slots,"default")],2)],2)):(ve(),et("table",{key:0,role:"table",class:On(tt(E))},[Xt(O.$slots,"default")],2))}}),yse=sr({__name:"BPlaceholderTable",props:{rows:{default:3},columns:{default:5},cellWidth:{default:100},size:null,animation:null,variant:null,headerColumns:null,hideHeader:{default:!1},headerCellWidth:{default:100},headerSize:null,headerAnimation:null,headerVariant:null,footerColumns:null,showFooter:{default:!1},footerCellWidth:{default:100},footerSize:null,footerAnimation:null,footerVariant:null},setup(t){const e=t,n=ft(()=>typeof e.columns=="string"?fv(e.columns,5):e.columns),r=ft(()=>typeof e.rows=="string"?fv(e.rows,3):e.rows),o=ft(()=>e.headerColumns===void 0?n.value:typeof e.headerColumns=="string"?fv(e.headerColumns,n.value):e.headerColumns),l=ft(()=>e.footerColumns===void 0?n.value:typeof e.footerColumns=="string"?fv(e.footerColumns,n.value):e.footerColumns),h=ft(()=>({size:e.size,variant:e.variant,animation:e.animation,width:e.cellWidth})),p=ft(()=>({size:e.headerSize,variant:e.headerVariant,animation:e.headerAnimation,width:e.headerCellWidth})),i=ft(()=>({size:e.footerSize,variant:e.footerVariant,animation:e.footerAnimation,width:e.footerCellWidth})),b=bt(st(e,"hideHeader")),E=bt(st(e,"showFooter"));return(I,O)=>(ve(),hn(OE,null,{default:Kn(()=>[tt(b)?Sn("",!0):Xt(I.$slots,"thead",{key:0},()=>[mt("thead",null,[mt("tr",null,[(ve(!0),et(_r,null,Li(tt(o),(M,G)=>(ve(),et("th",{key:G},[Lr(wh,Ks(Ac(tt(p))),null,16)]))),128))])])]),Xt(I.$slots,"default",{},()=>[mt("tbody",null,[(ve(!0),et(_r,null,Li(tt(r),(M,G)=>(ve(),et("tr",{key:G},[(ve(!0),et(_r,null,Li(tt(n),(q,Z)=>(ve(),et("td",{key:Z},[Lr(wh,Ks(Ac(tt(h))),null,16)]))),128))]))),128))])]),tt(E)?Xt(I.$slots,"tfoot",{key:1},()=>[mt("tfoot",null,[mt("tr",null,[(ve(!0),et(_r,null,Li(tt(l),(M,G)=>(ve(),et("th",{key:G},[Lr(wh,Ks(Ac(tt(i))),null,16)]))),128))])])]):Sn("",!0)]),_:3}))}}),_se=sr({__name:"BPlaceholderWrapper",props:{loading:{default:!1}},setup(t){const e=bt(st(t,"loading"));return(n,r)=>tt(e)?Xt(n.$slots,"loading",{key:0}):Xt(n.$slots,"default",{key:1})}}),vse=sr({props:{container:{type:[String,Object],default:"body"},content:{type:String},id:{type:String},customClass:{type:String,default:""},noninteractive:{type:[Boolean,String],default:!1},placement:{type:String,default:"right"},target:{type:[String,Object],default:void 0},title:{type:String},delay:{type:[Number,Object],default:0},triggers:{type:String,default:"click"},show:{type:[Boolean,String],default:!1},variant:{type:String,default:void 0},html:{type:[Boolean,String],default:!0},sanitize:{type:[Boolean,String],default:!1},offset:{type:String,default:"0"}},emits:["show","shown","hide","hidden","inserted"],setup(t,{emit:e,slots:n}){bt(st(t,"noninteractive"));const r=bt(st(t,"show")),o=bt(st(t,"html")),l=bt(st(t,"sanitize")),h=yr(),p=yr(),i=yr(),b=yr(),E=yr(),I=ft(()=>({[`b-popover-${t.variant}`]:t.variant!==void 0})),O=te=>{if(typeof te=="string"||te instanceof HTMLElement)return te;if(typeof te<"u")return te.$el},M=te=>{if(te)return typeof te=="string"?document.getElementById(te)||void 0:te},G=[{event:"show.bs.popover",handler:()=>e("show")},{event:"shown.bs.popover",handler:()=>e("shown")},{event:"hide.bs.popover",handler:()=>e("hide")},{event:"hidden.bs.popover",handler:()=>e("hidden")},{event:"inserted.bs.popover",handler:()=>e("inserted")}],q=te=>{for(const be of G)te.addEventListener(be.event,be.handler)},Z=te=>{for(const be of G)te.removeEventListener(be.event,be.handler)},Y=te=>{p.value=M(O(te)),p.value&&(q(p.value),i.value=new b_(p.value,{customClass:t.customClass,container:O(t.container),trigger:t.triggers,placement:t.placement,title:t.title||n.title?b.value:"",content:E.value,html:o.value,delay:t.delay,sanitize:l.value,offset:t.offset}))};return Do(()=>t.target,te=>{var be;(be=i.value)==null||be.dispose(),p.value instanceof HTMLElement&&Z(p.value),Y(te)}),Do(()=>r.value,(te,be)=>{var Pe,Se;te!==be&&(te?(Pe=i.value)==null||Pe.show():(Se=i.value)==null||Se.hide())}),ws(()=>{var te,be,Pe;Lh(()=>{Y(t.target)}),(be=(te=h.value)==null?void 0:te.parentNode)==null||be.removeChild(h.value),r.value&&((Pe=i.value)==null||Pe.show())}),q1(()=>{var te;(te=i.value)==null||te.dispose(),p.value instanceof HTMLElement&&Z(p.value)}),{element:h,titleRef:b,contentRef:E,computedClasses:I}}}),bse=["id"],wse={ref:"titleRef"},xse={ref:"contentRef"};function Cse(t,e,n,r,o,l){return ve(),et("div",{id:t.id,ref:"element",class:On(["popover b-popover",t.computedClasses]),role:"tooltip",tabindex:"-1"},[mt("div",wse,[Xt(t.$slots,"title",{},()=>[jr(Ar(t.title),1)])],512),mt("div",xse,[Xt(t.$slots,"default",{},()=>[jr(Ar(t.content),1)])],512)],10,bse)}const Ese=gu(vse,[["render",Cse]]),Bse=["aria-valuenow","aria-valuemax"],l7=sr({__name:"BProgressBar",props:{animated:{default:!1},label:null,labelHtml:null,max:null,precision:{default:0},showProgress:{default:!1},showValue:{default:!1},striped:{default:!1},value:{default:0},variant:null},setup(t){const e=t,n=il(c7),r=bt(st(e,"animated")),o=bt(st(e,"showProgress")),l=bt(st(e,"showValue")),h=bt(st(e,"striped")),p=ft(()=>({"progress-bar-animated":r.value||(n==null?void 0:n.animated),"progress-bar-striped":h.value||(n==null?void 0:n.striped)||r.value||(n==null?void 0:n.animated),[`bg-${e.variant}`]:e.variant!==void 0})),i=ft(()=>typeof e.precision=="number"?e.precision:Number.parseFloat(e.precision)),b=ft(()=>typeof e.value=="number"?e.value:Number.parseFloat(e.value)),E=ft(()=>typeof e.max=="number"?e.max:e.max===void 0?void 0:Number.parseFloat(e.max)),I=ft(()=>e.labelHtml!==void 0?e.labelHtml:l.value||n!=null&&n.showValue?b.value.toFixed(i.value):o.value||n!=null&&n.showProgress?(b.value*100/(E.value||100)).toFixed(i.value):e.label!==void 0?e.label:""),O=ft(()=>n!=null&&n.max?`${b.value*100/(typeof n.max=="number"?n.max:Number.parseInt(n.max))}%`:e.max?`${b.value*100/(typeof e.max=="number"?e.max:Number.parseInt(e.max))}%`:typeof e.value=="string"?e.value:`${e.value}%`);return(M,G)=>(ve(),et("div",{class:On(["progress-bar",tt(p)]),role:"progressbar","aria-valuenow":t.value,"aria-valuemin":"0","aria-valuemax":t.max,style:fc({width:tt(O)})},[Xt(M.$slots,"default",{},()=>[jr(Ar(tt(I)),1)])],14,Bse))}}),c7=Symbol(),Sse=sr({__name:"BProgress",props:{variant:null,max:null,height:null,animated:{default:!1},precision:{default:0},showProgress:{default:!1},showValue:{default:!1},striped:{default:!1},value:{default:0}},setup(t){const e=t,n=bt(st(e,"animated")),r=bt(st(e,"showProgress")),o=bt(st(e,"showValue")),l=bt(st(e,"striped")),h=ft(()=>({animated:e.animated,max:e.max,precision:e.precision,showProgress:e.showProgress,showValue:e.showValue,striped:e.striped,value:e.value,variant:e.variant}));return tf(c7,{animated:n.value,max:e.max,showProgress:r.value,showValue:o.value,striped:l.value}),(p,i)=>(ve(),et("div",{class:"progress",style:fc({height:t.height})},[Xt(p.$slots,"default",{},()=>[Lr(l7,Ks(Ac(tt(h))),null,16)])],4))}}),vO=FE("cols",[""],{type:[String,Number],default:null}),Tse=sr({name:"BRow",props:{tag:{type:String,default:"div"},gutterX:{type:String,default:null},gutterY:{type:String,default:null},noGutters:{type:[Boolean,String],default:!1},alignV:{type:String,default:null},alignH:{type:String,default:null},alignContent:{type:String,default:null},...vO},setup(t){const e=bt(st(t,"noGutters")),n=tb(st(t,"alignH")),r=ft(()=>wz(t,vO,"cols","row-cols"));return{computedClasses:ft(()=>[r.value,{[`gx-${t.gutterX}`]:t.gutterX!==null,[`gy-${t.gutterY}`]:t.gutterY!==null,"g-0":e.value,[`align-items-${t.alignV}`]:t.alignV!==null,[n.value]:t.alignH!==null,[`align-content-${t.alignContent}`]:t.alignContent!==null}])}}});function Ise(t,e,n,r,o,l){return ve(),hn(mr(t.tag),{class:On(["row",t.computedClasses])},{default:Kn(()=>[Xt(t.$slots,"default")]),_:3},8,["class"])}const Pse=gu(Tse,[["render",Ise]]),Mx=sr({__name:"BSkeleton",props:{height:null,width:null,size:null,animation:{default:"wave"},type:{default:"text"},variant:null},setup(t){const e=t,n=ft(()=>[`b-skeleton-${e.type}`,{[`b-skeleton-animate-${e.animation}`]:typeof e.animation=="boolean"?!1:e.animation,[`bg-${e.variant}`]:e.variant!==void 0}]),r=ft(()=>({width:e.size||e.width,height:e.size||e.height}));return(o,l)=>(ve(),et("div",{class:On(["b-skeleton",tt(n)]),style:fc(tt(r))},null,6))}}),Lse=sr({__name:"BSkeletonIcon",props:{animation:{default:"wave"}},setup(t){const e=t,n=ft(()=>[`b-skeleton-animate-${e.animation}`]);return(r,o)=>(ve(),et("div",{class:On(["b-skeleton-icon-wrapper position-relative d-inline-block overflow-hidden",tt(n)])},[Xt(r.$slots,"default")],2))}}),Fse={key:0},Rse={key:1},kse=sr({__name:"BSkeletonTable",props:{animation:{default:"wave"},columns:{default:5},hideHeader:{default:!1},rows:{default:3},showFooter:{default:!1},tableProps:null},setup(t){const e=t,n=bt(st(e,"hideHeader")),r=bt(st(e,"showFooter"));return(o,l)=>(ve(),hn(OE,Ks(Ac(t.tableProps)),{default:Kn(()=>[tt(n)?Sn("",!0):(ve(),et("thead",Fse,[mt("tr",null,[(ve(!0),et(_r,null,Li(t.columns,(h,p)=>(ve(),et("th",{key:p},[Lr(Mx)]))),128))])])),mt("tbody",null,[(ve(!0),et(_r,null,Li(t.rows,(h,p)=>(ve(),et("tr",{key:p},[(ve(!0),et(_r,null,Li(t.columns,(i,b)=>(ve(),et("td",{key:b},[Lr(Mx,{width:"75%"})]))),128))]))),128))]),tt(r)?(ve(),et("tfoot",Rse,[mt("tr",null,[(ve(!0),et(_r,null,Li(t.columns,(h,p)=>(ve(),et("th",{key:p},[Lr(Mx)]))),128))])])):Sn("",!0)]),_:1},16))}}),Mse=sr({__name:"BSkeletonWrapper",props:{loading:{default:!1}},setup(t){const e=bt(st(t,"loading"));return(n,r)=>tt(e)?Xt(n.$slots,"loading",{key:0}):Xt(n.$slots,"default",{key:1})}}),bO=["ar","az","ckb","fa","he","ks","lrc","mzn","ps","sd","te","ug","ur","yi"].map(t=>t.toLowerCase()),Ose=t=>{const e=gC(t).toLowerCase().replace(Ane,"").split("-"),n=e.slice(0,2).join("-"),r=e[0];return bO.includes(n)||bO.includes(r)},Dse=t=>_ne?GT(t)?t:{capture:!!t||!1}:!!(GT(t)?t.capture:t),Use=(t,e,n,r)=>{t&&t.addEventListener&&t.addEventListener(e,n,Dse(r))},Nse=(t,e,n,r)=>{t&&t.removeEventListener&&t.removeEventListener(e,n,r)},wO=(t,e)=>{(t?Use:Nse)(...e)},Dw=(t,{preventDefault:e=!0,propagation:n=!0,immediatePropagation:r=!1}={})=>{e&&t.preventDefault(),n&&t.stopPropagation(),r&&t.stopImmediatePropagation()},tI="ArrowDown",u7="End",h7="Home",d7="PageDown",f7="PageUp",nI="ArrowUp",xO=1,CO=100,EO=1,BO=500,SO=100,TO=10,IO=4,PO=[nI,tI,h7,u7,f7,d7],zse=sr({props:{ariaControls:{type:String,required:!1},ariaLabel:{type:String,required:!1},labelIncrement:{type:String,default:"Increment"},labelDecrement:{type:String,default:"Decrement"},modelValue:{type:Number,default:null},name:{type:String,default:"BFormSpinbutton"},disabled:{type:[Boolean,String],default:!1},placeholder:{type:String,required:!1},locale:{type:String,default:"locale"},form:{type:String,required:!1},inline:{type:Boolean,default:!1},size:{type:String,required:!1},formatterFn:{type:Function},readonly:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},repeatDelay:{type:[String,Number],default:BO},repeatInterval:{type:[String,Number],default:SO},repeatStepMultiplier:{type:[String,Number],default:IO},repeatThreshold:{type:[String,Number],default:TO},required:{type:[Boolean,String],default:!1},step:{type:[String,Number],default:EO},min:{type:[String,Number],default:xO},max:{type:[String,Number],default:CO},wrap:{type:Boolean,default:!1},state:{type:[Boolean,String],default:null}},emits:["update:modelValue","change"],setup(t,{emit:e}){const n=yr(!1),r=ft(()=>1),o=()=>{e("change",h.value)},l=yr(null),h=ft({get(){return Xf(t.modelValue)?l.value:t.modelValue},set(Ee){Xf(t.modelValue)?l.value=Ee:e("update:modelValue",Ee)}});let p,i,b=!1;const E=ft(()=>Uv(t.step,EO)),I=ft(()=>Uv(t.min,xO)),O=ft(()=>{const Ee=Uv(t.max,CO),$e=E.value,We=I.value;return Math.floor((Ee-We)/$e)*$e+We}),M=ft(()=>{const Ee=Rp(t.repeatDelay,0);return Ee>0?Ee:BO}),G=ft(()=>{const Ee=Rp(t.repeatInterval,0);return Ee>0?Ee:SO}),q=ft(()=>Math.max(Rp(t.repeatThreshold,TO),1)),Z=ft(()=>Math.max(Rp(t.repeatStepMultiplier,IO),1)),Y=ft(()=>{const Ee=E.value;return Math.floor(Ee)===Ee?0:(Ee.toString().split(".")[1]||"").length}),te=ft(()=>Math.pow(10,Y.value||0)),be=ft(()=>{const{value:Ee}=h;return Ee===null?"":Ee.toFixed(Y.value)}),Pe=ft(()=>{const Ee=[t.locale];return new Intl.NumberFormat(Ee).resolvedOptions().locale}),Se=ft(()=>Ose(Pe.value)),Ie=()=>{const Ee=Y.value;return new Intl.NumberFormat(Pe.value,{style:"decimal",useGrouping:!1,minimumIntegerDigits:1,minimumFractionDigits:Ee,maximumFractionDigits:Ee,notation:"standard"}).format},Ae=ft(()=>t.formatterFn?t.formatterFn:Ie()),ne=ft(()=>({role:"group",lang:Pe.value,tabindex:t.disabled?null:"-1",title:t.ariaLabel})),ue=ft(()=>!Xf(t.modelValue)||!Xf(l.value)),ye=ft(()=>({dir:Se.value,spinId:r.value,tabindex:t.disabled?null:"0",role:"spinbutton","aria-live":"off","aria-label":t.ariaLabel||null,"aria-controls":t.ariaControls||null,"aria-invalid":t.state===!1||!ue.value&&t.required?"true":null,"aria-required":t.required?"true":null,"aria-valuemin":I.value,"aria-valuemax":O.value,"aria-valuenow":Xf(h.value)?null:h.value,"aria-valuetext":Xf(h.value)?null:Ae.value(h.value)})),se=Ee=>{let{value:$e}=h;if(!t.disabled&&!Xf($e)){const We=E.value*Ee,vt=I.value,_t=O.value,at=te.value,{wrap:Ft}=t;$e=Math.round(($e-vt)/We)*We+vt+We,$e=Math.round($e*at)/at,h.value=$e>_t?Ft?vt:_t:$e<vt?Ft?_t:vt:$e}},le=(Ee=1)=>{Xf(h.value)?h.value=I.value:se(1*Ee)},ge=(Ee=1)=>{Xf(h.value)?h.value=t.wrap?O.value:I.value:se(-1*Ee)},lt=Ee=>{const{code:$e,altKey:We,ctrlKey:vt,metaKey:_t}=Ee;if(!(t.disabled||t.readonly||We||vt||_t)&&PO.includes($e)){if(Dw(Ee,{propagation:!1}),b)return;Ut(),[nI,tI].includes($e)?(b=!0,$e===nI?gt(Ee,le):$e===tI&&gt(Ee,ge)):$e===f7?le(Z.value):$e===d7?ge(Z.value):$e===h7?h.value=I.value:$e===u7&&(h.value=O.value)}},Ot=Ee=>{const{code:$e,altKey:We,ctrlKey:vt,metaKey:_t}=Ee;t.disabled||t.readonly||We||vt||_t||PO.includes($e)&&(Dw(Ee,{propagation:!1}),Ut(),b=!1,o())},gt=(Ee,$e)=>{const{type:We}=Ee||{};if(!t.disabled&&!t.readonly){if(Tt(Ee)&&We==="mousedown"&&Ee.button)return;Ut(),$e(1);const vt=q.value,_t=Z.value,at=M.value,Ft=G.value;p=setTimeout(()=>{let Dt=0;i=setInterval(()=>{$e(Dt<vt?1:_t),Dt++},Ft)},at)}};function Tt(Ee){return Ee.type==="mouseup"||Ee.type==="mousedown"}const Mt=Ee=>{Tt(Ee)&&Ee.type==="mouseup"&&Ee.button||(Dw(Ee,{propagation:!1}),Ut(),on(!1),o())},on=Ee=>{try{wO(Ee,[document.body,"mouseup",Mt,!1]),wO(Ee,[document.body,"touchend",Mt,!1])}catch{return 0}},Ut=()=>{clearTimeout(p),clearInterval(i),p=void 0,i=void 0},In=(Ee,$e,We,vt,_t,at,Ft)=>{const Dt=Ui(We,{props:{scale:n.value?1.5:1.25},attrs:{"aria-hidden":"true"}}),yn={hasFocus:n.value},De=jn=>{!t.disabled&&!t.readonly&&(Dw(jn,{propagation:!1}),on(!0),gt(jn,Ee))};return Ui("button",{class:[{"py-0":!t.vertical},"btn","btn-sm","border-0","rounded-0"],tabindex:"-1",type:"button",disabled:t.disabled||t.readonly||at,"aria-disabled":t.disabled||t.readonly||at?"true":null,"aria-controls":r.value,"aria-label":$e||null,"aria-keyshortcuts":_t||null,onmousedown:De,ontouchstart:De},[Ch(Ft,yn)||Dt])};return()=>{const Ee=In(le,t.labelIncrement,Ui("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-plus",viewBox:"0 0 16 16"},Ui("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"})),"inc","ArrowUp",!1,"increment"),$e=In(ge,t.labelDecrement,Ui("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-dash",viewBox:"0 0 16 16"},Ui("path",{d:"M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8z"})),"dec","ArrowDown",!1,"decrement"),We=[];t.name&&!t.disabled&&We.push(Ui("input",{type:"hidden",name:t.name,form:t.form||null,value:be.value,key:"hidden"}));const vt=Ui("output",{class:[{"d-flex":t.vertical},{"align-self-center":!t.vertical},{"align-items-center":t.vertical},{"border-top":t.vertical},{"border-bottom":t.vertical},{"border-start":!t.vertical},{"border-end":!t.vertical},"flex-grow-1"],...ye.value,key:"output"},[Ui("bdi",ue.value?Ae.value(h.value):t.placeholder||"")]);return Ui("div",{class:["b-form-spinbutton form-control",{disabled:t.disabled},{readonly:t.readonly},{focus:n},{"d-inline-flex":t.inline||t.vertical},{"d-flex":!t.inline&&!t.vertical},{"align-items-stretch":!t.vertical},{"flex-column":t.vertical},t.size?`form-control-${t.size}`:null],...ne.value,onkeydown:lt,onkeyup:Ot},t.vertical?[Ee,We,vt,$e]:[$e,We,vt,Ee])}}}),Vse=["TD","TH","TR"],Qse=["a","a *","button","button *","input:not(.disabled):not([disabled])","select:not(.disabled):not([disabled])","textarea:not(.disabled):not([disabled])",'[role="link"]','[role="link"] *','[role="button"]','[role="button"] *',"[tabindex]:not(.disabled):not([disabled])"].join(","),Uw=t=>{if(!t||!t.target)return!1;const e=t.target;if("disabled"in e&&e.disabled||Vse.indexOf(e.tagName)!==-1)return!1;if(iO(".dropdown-menu",e))return!0;const n=e.tagName==="LABEL"?e:iO("label",e);if(n){const r=v4(n,"for"),o=r?Pne(r):vz("input, select, textarea",n);if(o&&!o.disabled)return!0}return bz(e,Qse)},Hse=()=>{const t=(h,p)=>{const i=[];return!(h!=null&&h.length)&&(p!=null&&p.length)?(Object.keys(p[0]).forEach(b=>i.push({key:b,label:tO(b)})),i):(Array.isArray(h)&&h.forEach(b=>{typeof b=="string"?i.push({key:b,label:tO(b)}):GT(b)&&b.key&&typeof b.key=="string"&&i.push({...b})}),i)},e=yr([]),n=(h,p,i,b)=>(e.value=yC(p),"isFilterableTable"in b&&b.isFilterableTable.value===!0&&i.filter&&(e.value=l(e.value,i.filter,i.filterable)),"isSortable"in b&&b.isSortable.value===!0&&(e.value=o(h,e.value,{key:i.sortBy,desc:b.sortDescBoolean.value},i.sortCompare)),e.value),r=yr(void 0),o=(h,p,i,b)=>{if(!i||!i.key)return p;const E=i.key;return p.sort((I,O)=>{if(b!==void 0)return b(I,O,i.key,i.desc);const M=G=>typeof G=="object"?JSON.stringify(G):G;return M(I[E])>M(O[E])?i.desc?-1:1:M(O[E])>M(I[E])?i.desc?1:-1:0})},l=(h,p,i)=>h.filter(b=>Object.entries(b).filter(E=>{const[I,O]=E;return!O||I[0]==="_"||i.length>0&&!i.includes(I)?!1:(typeof O=="object"?JSON.stringify(Object.values(O)):typeof O=="string"?O:O.toString()).toLowerCase().includes(p.toLowerCase())}).length>0);return{normaliseFields:t,mapItems:n,internalItems:e,updateInternalItems:async h=>{try{return e.value=await qT(h),e.value}catch{return}},filterEvent:r,notifyFilteredItems:()=>{r.value&&r.value(e.value)},formatItem:(h,p)=>{const i=h[p.key];return p.formatter&&typeof p.formatter=="function"?p.formatter(i,p.key,h):h[p.key]}}},jse=["title","abbr","onClick"],$se={class:"d-inline-flex flex-nowrap align-items-center gap-1"},Gse={key:1},Kse=["onClick","onDblclick","onMouseenter","onMouseleave"],qse={key:0,class:"b-table-stacked-label"},Wse=["colspan"],Xse=["colspan"],Zse={class:"d-flex align-items-center justify-content-center gap-2"},Yse=mt("strong",null,"Loading...",-1),Jse={key:1,class:"b-table-empty-slot"},eae=["colspan"],tae={key:0},nae=["title","abbr","onClick"],rae={key:1},iae={key:2},oae={key:3},sae=sr({__name:"BTable",props:{align:null,caption:null,captionTop:{default:!1},borderless:{default:!1},bordered:{default:!1},borderVariant:null,dark:{default:!1},fields:{default:()=>[]},footClone:{default:!1},hover:{default:!1},items:{default:()=>[]},provider:null,sortCompare:null,noProvider:null,noProviderPaging:null,noProviderSorting:null,noProviderFiltering:null,responsive:{type:[Boolean,String],default:!1},small:{default:!1},striped:{default:!1},stacked:{type:[Boolean,String],default:!1},labelStacked:{type:Boolean,default:!1},variant:null,sortBy:null,sortDesc:{default:!1},sortInternal:{default:!0},selectable:{default:!1},stickySelect:{default:!1},selectHead:{type:[Boolean,String],default:!0},selectMode:{default:"single"},selectionVariant:{default:"primary"},stickyHeader:{default:!1},busy:{default:!1},showEmpty:{default:!1},perPage:null,currentPage:{default:1},filter:null,filterable:null,emptyText:{default:"There are no records to show"},emptyFilteredText:{default:"There are no records matching your request"}},emits:["headClicked","rowClicked","rowDblClicked","rowHovered","rowUnhovered","rowSelected","rowUnselected","selection","update:busy","update:sortBy","update:sortDesc","sorted","filtered"],setup(t,{expose:e,emit:n}){const r=t,o=mc(),l=Hse(),h=bt(st(r,"footClone")),p=bt(st(r,"sortDesc")),i=bt(st(r,"sortInternal")),b=bt(st(r,"selectable")),E=bt(st(r,"stickySelect")),I=bt(st(r,"labelStacked")),O=bt(st(r,"busy")),M=bt(st(r,"showEmpty")),G=bt(st(r,"noProviderPaging")),q=bt(st(r,"noProviderSorting")),Z=bt(st(r,"noProviderFiltering")),Y=yr(O.value);l.filterEvent.value=async Te=>{if(ue.value){await $e();return}const Je=await qT(Te);n("filtered",Je)};const te=yr(new Set([])),be=ft(()=>te.value.size>0),Pe=ft(()=>({[`align-${r.align}`]:r.align!==void 0,"b-table-selectable":b.value,[`b-table-select-${r.selectMode}`]:b.value,"b-table-selecting user-select-none":b.value&&be.value,"b-table-busy":Y.value,"b-table-sortable":se.value,"b-table-sort-desc":se.value&&p.value===!0,"b-table-sort-asc":se.value&&p.value===!1})),Se=ft(()=>({bordered:r.bordered,borderless:r.borderless,borderVariant:r.borderVariant,captionTop:r.captionTop,dark:r.dark,hover:r.hover,responsive:r.responsive,striped:r.striped,stacked:r.stacked,small:r.small,tableClass:Pe.value,tableVariant:r.variant,stickyHeader:r.stickyHeader})),Ie=ft(()=>l.normaliseFields(r.fields,r.items)),Ae=ft(()=>Ie.value.length+(b.value?1:0)),ne=ft(()=>r.filter!==void 0&&r.filter!==""),ue=ft(()=>r.provider!==void 0),ye=ft(()=>b.value&&(!!r.selectHead||o.selectHead!==void 0)),se=ft(()=>r.fields.filter(Te=>typeof Te=="string"?!1:Te.sortable).length>0),le=ft(()=>se.value&&i.value===!0),ge=ft(()=>{const Te=ue.value?l.internalItems.value:le.value?l.mapItems(r.fields,r.items,r,{isSortable:se,isFilterableTable:ne,sortDescBoolean:p}):r.items;if(r.perPage!==void 0){const Je=(r.currentPage-1)*r.perPage;return Te.splice(Je,r.perPage)}return Te}),lt=Te=>typeof Te=="string"?nO(Te):Te.label!==void 0?Te.label:typeof Te.key=="string"?nO(Te.key):Te.key,Ot=(Te,Je,Fe=!1)=>{const Re=typeof Te=="string"?Te:Te.key;n("headClicked",Re,Te,Je,Fe),Ut(Te)},gt=(Te,Je,Fe)=>{n("rowClicked",Te,Je,Fe),Ee(Te,Je,Fe.shiftKey)},Tt=(Te,Je,Fe)=>n("rowDblClicked",Te,Je,Fe),Mt=(Te,Je,Fe)=>n("rowHovered",Te,Je,Fe),on=(Te,Je,Fe)=>n("rowUnhovered",Te,Je,Fe),Ut=Te=>{if(!se.value)return;const Je=typeof Te=="string"?Te:Te.key,Fe=typeof Te=="string"?!1:Te.sortable;if(se.value===!0&&Fe===!0){const Re=!p.value;Je!==r.sortBy&&n("update:sortBy",Je),n("update:sortDesc",Re),n("sorted",Je,Re)}},In=()=>{!b.value||n("selection",Array.from(te.value))},Ee=(Te,Je,Fe=!1)=>{if(b.value){if(te.value.has(Te))te.value.delete(Te),n("rowUnselected",Te);else if(r.selectMode==="single"&&te.value.size>0&&(te.value.forEach(Re=>n("rowUnselected",Re)),te.value.clear()),r.selectMode==="range"&&te.value.size>0&&Fe){const Re=Array.from(te.value).pop(),Yt=ge.value.findIndex(Jt=>Jt===Re),rn=Math.min(Yt,Je),zt=Math.max(Yt,Je);ge.value.slice(rn,zt+1).forEach(Jt=>{te.value.has(Jt)||(te.value.add(Jt),n("rowSelected",Jt))})}else te.value.add(Te),n("rowSelected",Te);In()}},$e=async()=>{if(!ue.value||!r.provider||Y.value)return;Y.value=!0;const Te=new Proxy({currentPage:r.currentPage,filter:r.filter,sortBy:r.sortBy,sortDesc:r.sortDesc,perPage:r.perPage},{get(Fe,Re){return Re in Fe?Fe[Re]:void 0},set(){return console.error("BTable provider context is a read-only object."),!0}}),Je=r.provider(Te,l.updateInternalItems);if(Je!==void 0){if(Je instanceof Promise)try{const Fe=await Je;return Array.isArray(Fe)?await l.updateInternalItems(Fe):void 0}finally{Y.value&&(Y.value=!1)}try{return await l.updateInternalItems(Je)}finally{Y.value&&(Y.value=!1)}}},We=Te=>{Te._showDetails=!Te._showDetails},vt=Te=>[Te.class,Te.thClass,Te.variant?`table-${Te.variant}`:void 0,{"b-table-sortable-column":se.value&&Te.sortable,"b-table-sticky-column":Te.stickyColumn}],_t=(Te,Je)=>[Te.class,Te.tdClass,Te.variant?`table-${Te.variant}`:void 0,Je!=null&&Je._cellVariants&&(Je!=null&&Je._cellVariants[Te.key])?`table-${Je==null?void 0:Je._cellVariants[Te.key]}`:void 0,{"b-table-sticky-column":Te.stickyColumn}],at=Te=>[Te._rowVariant?`table-${Te._rowVariant}`:null,Te._rowVariant?`table-${Te._rowVariant}`:null,b.value&&te.value.has(Te)?`selected table-${r.selectionVariant}`:null],Ft=()=>{if(!b.value)return;const Te=te.value.size>0?Array.from(te.value):[];te.value=new Set([...ge.value]),te.value.forEach(Je=>{Te.includes(Je)||n("rowSelected",Je)}),In()},Dt=()=>{!b.value||(te.value.forEach(Te=>{n("rowUnselected",Te)}),te.value=new Set([]),In())},yn=Te=>{if(!b.value)return;const Je=ge.value[Te];!Je||te.value.has(Je)||(te.value.add(Je),n("rowSelected",Je),In())},De=Te=>{if(!b.value)return;const Je=ge.value[Te];!Je||!te.value.has(Je)||(te.value.delete(Je),n("rowUnselected",Je),In())},jn=async(Te,Je,Fe)=>{if(Je===Fe)return;const Re=gn=>r.noProvider&&r.noProvider.includes(gn),Yt=!["currentPage","perPage"].includes(Te),rn=["currentPage","perPage"].includes(Te)&&(Re("paging")||G.value===!0),zt=["filter"].includes(Te)&&(Re("filtering")||Z.value===!0),Jt=["sortBy","sortDesc"].includes(Te)&&(Re("sorting")||q.value===!0);rn||zt||Jt||(await $e(),Yt&&l.notifyFilteredItems())};return Do(()=>r.filter,(Te,Je)=>{Te===Je||ue.value||Te||qT(r.items).then(Fe=>n("filtered",Fe))}),Do(()=>Y.value,()=>Y.value!==O.value&&n("update:busy",Y.value)),Do(()=>O.value,()=>Y.value!==O.value&&(Y.value=O.value)),Do(()=>r.filter,(Te,Je)=>jn("filter",Te,Je)),Do(()=>r.currentPage,(Te,Je)=>jn("currentPage",Te,Je)),Do(()=>r.perPage,(Te,Je)=>jn("perPage",Te,Je)),Do(()=>r.sortBy,(Te,Je)=>jn("sortBy",Te,Je)),Do(()=>r.sortDesc,(Te,Je)=>jn("sortDesc",Te,Je)),ws(()=>{ue.value&&$e()}),e({selectAllRows:Ft,clearSelected:Dt,selectRow:yn,unselectRow:De}),(Te,Je)=>(ve(),hn(OE,Ks(Ac(tt(Se))),{default:Kn(()=>{var Fe;return[mt("thead",null,[Te.$slots["thead-top"]?Xt(Te.$slots,"thead-top",{key:0}):Sn("",!0),mt("tr",null,[tt(ye)?(ve(),et("th",{key:0,class:On(["b-table-selection-column",{"b-table-sticky-column":tt(E)}])},[Xt(Te.$slots,"select-head",{},()=>[jr(Ar(typeof t.selectHead=="boolean"?"Selected":t.selectHead),1)])],2)):Sn("",!0),(ve(!0),et(_r,null,Li(tt(Ie),Re=>(ve(),et("th",It({key:Re.key,scope:"col",class:vt(Re),title:Re.headerTitle,abbr:Re.headerAbbr,style:Re.thStyle},Re.thAttr,{onClick:Yt=>Ot(Re,Yt)}),[mt("div",$se,[Xt(Te.$slots,"sort-icon",{field:Re,sortBy:t.sortBy,selected:Re.key===t.sortBy,isDesc:tt(p),direction:tt(p)?"desc":"asc"},()=>[tt(se)&&Re.sortable?(ve(),et("span",{key:0,class:On(["b-table-sort-icon",{sorted:Re.key===t.sortBy,[`sorted-${tt(p)?"desc":"asc"}`]:Re.key===t.sortBy}])},null,2)):Sn("",!0)]),mt("div",null,[Te.$slots["head("+Re.key+")"]||Te.$slots["head()"]?Xt(Te.$slots,Te.$slots["head("+Re.key+")"]?"head("+Re.key+")":"head()",{key:0,label:Re.label}):(ve(),et(_r,{key:1},[jr(Ar(lt(Re)),1)],64))])])],16,jse))),128))]),Te.$slots["thead-sub"]?(ve(),et("tr",Gse,[(ve(!0),et(_r,null,Li(tt(Ie),Re=>(ve(),et("td",{key:Re.key,scope:"col",class:On([Re.class,Re.thClass,Re.variant?`table-${Re.variant}`:""])},[Te.$slots["thead-sub"]?Xt(Te.$slots,"thead-sub",It({key:0,items:tt(Ie)},Re)):(ve(),et(_r,{key:1},[jr(Ar(Re.label),1)],64))],2))),128))])):Sn("",!0)]),mt("tbody",null,[(ve(!0),et(_r,null,Li(tt(ge),(Re,Yt)=>(ve(),et(_r,{key:Yt},[mt("tr",{class:On(at(Re)),onClick:rn=>!tt(Uw)(rn)&&gt(Re,Yt,rn),onDblclick:rn=>!tt(Uw)(rn)&&Tt(Re,Yt,rn),onMouseenter:rn=>!tt(Uw)(rn)&&Mt(Re,Yt,rn),onMouseleave:rn=>!tt(Uw)(rn)&&on(Re,Yt,rn)},[tt(ye)?(ve(),et("td",{key:0,class:On(["b-table-selection-column",{"b-table-sticky-column":tt(E)}])},[Xt(Te.$slots,"select-cell",{},()=>[mt("span",{class:On(te.value.has(Re)?"text-primary":"")},"🗹",2)])],2)):Sn("",!0),(ve(!0),et(_r,null,Li(tt(Ie),rn=>(ve(),et("td",It({key:rn.key},rn.tdAttr,{class:_t(rn,Re)}),[t.stacked&&tt(I)?(ve(),et("label",qse,Ar(lt(rn)),1)):Sn("",!0),Te.$slots["cell("+rn.key+")"]||Te.$slots["cell()"]?Xt(Te.$slots,Te.$slots["cell("+rn.key+")"]?"cell("+rn.key+")":"cell()",{key:1,value:Re[rn.key],index:Yt,item:Re,field:rn,items:t.items,toggleDetails:()=>We(Re),detailsShowing:Re._showDetails}):(ve(),et(_r,{key:2},[jr(Ar(tt(l).formatItem(Re,rn)),1)],64))],16))),128))],42,Kse),Re._showDetails===!0&&Te.$slots["row-details"]?(ve(),et("tr",{key:0,class:On(at(Re))},[mt("td",{colspan:tt(Ae)},[Xt(Te.$slots,"row-details",{item:Re,toggleDetails:()=>We(Re)})],8,Wse)],2)):Sn("",!0)],64))),128)),Y.value?(ve(),et("tr",{key:0,class:On(["b-table-busy-slot",{"b-table-static-busy":tt(ge).length==0}])},[mt("td",{colspan:tt(Ae)},[Xt(Te.$slots,"table-busy",{},()=>[mt("div",Zse,[Lr(ME,{class:"align-middle"}),Yse])])],8,Xse)],2)):Sn("",!0),tt(M)&&tt(ge).length===0?(ve(),et("tr",Jse,[mt("td",{colspan:tt(Ae)},[Xt(Te.$slots,"empty",{items:tt(ge),filtered:tt(ne)},()=>[jr(Ar(tt(ne)?t.emptyFilteredText:t.emptyText),1)])],8,eae)])):Sn("",!0)]),tt(h)?(ve(),et("tfoot",tae,[mt("tr",null,[(ve(!0),et(_r,null,Li(tt(Ie),Re=>(ve(),et("th",It({key:Re.key},Re.thAttr,{scope:"col",class:[Re.class,Re.thClass,Re.variant?`table-${Re.variant}`:""],title:Re.headerTitle,abbr:Re.headerAbbr,style:Re.thStyle,onClick:Yt=>Ot(Re,Yt,!0)}),Ar(Re.label),17,nae))),128))])])):Te.$slots["custom-foot"]?(ve(),et("tfoot",rae,[Xt(Te.$slots,"custom-foot",{fields:tt(Ie),items:t.items,columns:(Fe=tt(Ie))==null?void 0:Fe.length})])):Sn("",!0),Te.$slots["table-caption"]?(ve(),et("caption",iae,[Xt(Te.$slots,"table-caption")])):t.caption?(ve(),et("caption",oae,Ar(t.caption),1)):Sn("",!0)]}),_:3},16))}}),aae=sr({__name:"BTbody",props:{variant:null},setup(t){const e=t,n=ft(()=>({[`thead-${e.variant}`]:e.variant!==void 0}));return(r,o)=>(ve(),et("tbody",{role:"rowgroup",class:On(tt(n))},[Xt(r.$slots,"default")],2))}}),lae=["scope","colspan","rowspan","data-label"],cae={key:0},uae=sr({__name:"BTd",props:{colspan:null,rowspan:null,stackedHeading:null,stickyColumn:{default:!1},variant:null},setup(t){const e=t,n=bt(st(e,"stickyColumn")),r=ft(()=>({[`table-${e.variant}`]:e.variant!==void 0,"b-table-sticky-column":n.value,"table-b-table-default":n.value&&e.variant===void 0})),o=ft(()=>e.colspan?"colspan":e.rowspan?"rowspan":"col");return(l,h)=>(ve(),et("td",{role:"cell",scope:tt(o),class:On(tt(r)),colspan:t.colspan,rowspan:t.rowspan,"data-label":t.stackedHeading},[t.stackedHeading?(ve(),et("div",cae,[Xt(l.$slots,"default")])):Xt(l.$slots,"default",{key:1})],10,lae))}}),hae=sr({__name:"BTfoot",props:{variant:null},setup(t){const e=t,n=ft(()=>({[`table-${e.variant}`]:e.variant!==void 0}));return(r,o)=>(ve(),et("tfoot",{role:"rowgroup",class:On(tt(n))},[Xt(r.$slots,"default")],2))}}),dae=["scope","colspan","rowspan","data-label"],fae={key:0},Aae=sr({__name:"BTh",props:{colspan:null,rowspan:null,stackedHeading:null,stickyColumn:{default:!1},variant:null},setup(t){const e=t,n=bt(st(e,"stickyColumn")),r=ft(()=>({[`table-${e.variant}`]:e.variant!==void 0,"b-table-sticky-column":n.value,"table-b-table-default":n.value&&e.variant===void 0})),o=ft(()=>e.colspan?"colspan":e.rowspan?"rowspan":"col");return(l,h)=>(ve(),et("th",{role:"columnheader",scope:tt(o),class:On(tt(r)),colspan:t.colspan,rowspan:t.rowspan,"data-label":t.stackedHeading},[t.stackedHeading!==void 0?(ve(),et("div",fae,[Xt(l.$slots,"default")])):Xt(l.$slots,"default",{key:1})],10,dae))}}),pae=sr({__name:"BThead",props:{variant:null},setup(t){const e=t,n=ft(()=>({[`table-${e.variant}`]:e.variant!==void 0}));return(r,o)=>(ve(),et("thead",{role:"rowgroup",class:On(tt(n))},[Xt(r.$slots,"default")],2))}}),mae=sr({__name:"BTr",props:{variant:null},setup(t){const e=t,n=ft(()=>({[`table-${e.variant}`]:e.variant!==void 0}));return(r,o)=>(ve(),et("tr",{role:"row",class:On(tt(n))},[Xt(r.$slots,"default")],2))}}),gae=["id","data-bs-target","aria-controls","aria-selected","onClick"],A7=Symbol(),yae=sr({__name:"BTabs",props:{activeNavItemClass:null,activeTabClass:null,align:null,card:{default:!1},contentClass:null,end:{default:!1},fill:{default:!1},id:null,justified:{default:!1},lazy:{default:!1},navClass:null,navWrapperClass:null,noFade:{default:!1},noNavStyle:{default:!1},pills:{default:!1},small:{default:!1},tag:{default:"div"},vertical:{default:!1},modelValue:{default:-1}},emits:["update:modelValue","activate-tab","click"],setup(t,{emit:e}){const n=t,r=mc(),o=bt(st(n,"card")),l=bt(st(n,"end")),h=bt(st(n,"fill")),p=bt(st(n,"justified")),i=bt(st(n,"lazy")),b=bt(st(n,"noFade")),E=bt(st(n,"noNavStyle")),I=bt(st(n,"pills")),O=bt(st(n,"small")),M=bt(st(n,"vertical")),G=yr(n.modelValue),q=yr(""),Z=ft({get:()=>G.value,set:ue=>{G.value=ue,Y.value.length>0&&ue>=0&&ue<Y.value.length?q.value=Y.value[ue].buttonId:q.value="",e("update:modelValue",ue)}}),Y=ft(()=>{let ue=[];return r.default&&(ue=ne(r).map((ye,se)=>{ye.props||(ye.props={});const le=ye.props["button-id"]||iA("tab"),ge=ye.props.id||iA(),lt=Z.value>-1?se===Z.value:ye.props.active==="",Ot=ye.props["title-item-class"],gt=ye.props["title-link-attributes"];return{buttonId:le,contentId:ge,active:lt,disabled:ye.props.disabled===""||ye.props.disabled===!0,navItemClasses:[{active:lt,disabled:ye.props.disabled===""||ye.props.disabled===!0},lt&&n.activeNavItemClass?n.activeNavItemClass:null,ye.props["title-link-class"]],tabClasses:[{fade:!b.value},lt&&n.activeTabClass?n.activeTabClass:null],target:`#${ge}`,title:ye.props.title,titleItemClass:Ot,titleLinkAttributes:gt,onClick:ye.props.onClick,tab:ye,tabComponent:()=>ne(r)[se]}})),ue}),te=ft(()=>!(Y!=null&&Y.value&&Y.value.length>0)),be=ft(()=>({"d-flex":M.value,"align-items-start":M.value})),Pe=tb(st(n,"align")),Se=ft(()=>({"nav-pills":I.value,"flex-column me-3":M.value,[Pe.value]:n.align!==void 0,"nav-fill":h.value,"card-header-tabs":o.value,"nav-justified":p.value,"nav-tabs":!E.value&&!I.value,small:O.value})),Ie=ue=>{let ye=!1;if(ue!==void 0&&ue>-1&&ue<Y.value.length&&!Y.value[ue].disabled&&(Z.value<0||Y.value[ue].buttonId!==q.value)){const se=new x_("activate-tab",{cancelable:!0});e("activate-tab",ue,Z.value,se),se.defaultPrevented||(Z.value=ue,ye=!0)}return!ye&&n.modelValue!==Z.value&&e("update:modelValue",Z.value),ye},Ae=(ue,ye)=>{var se;Ie(ye),ye>=0&&!Y.value[ye].disabled&&((se=Y.value[ye])!=null&&se.onClick)&&typeof Y.value[ye].onClick=="function"&&Y.value[ye].onClick(ue)},ne=ue=>!ue||!ue.default?[]:ue.default().reduce((ye,se)=>(typeof se.type=="symbol"?ye=ye.concat(se.children):ye.push(se),ye),[]).filter(ye=>{var se;return((se=ye.type)==null?void 0:se.__name)==="BTab"});return Ie(G.value),Do(()=>n.modelValue,(ue,ye)=>{if(ue===ye)return;if(ue=Math.max(ue,-1),ye=Math.max(ye,-1),Y.value.length<=0){Z.value=-1;return}const se=ue>ye;let le=ue;const ge=Y.value.length-1;for(;le>=0&&le<=ge&&Y.value[le].disabled;)le+=se?1:-1;if(le<0){Ie(0);return}if(le>=Y.value.length){Ie(Y.value.length-1);return}Ie(le)}),Do(()=>Y.value,()=>{let ue=Y.value.map(ye=>ye.active&&!ye.disabled).lastIndexOf(!0);ue<0&&(Z.value>=Y.value.length?ue=Y.value.map(ye=>!ye.disabled).lastIndexOf(!0):Y.value[Z.value]&&!Y.value[Z.value].disabled&&(ue=Z.value)),ue<0&&(ue=Y.value.map(ye=>!ye.disabled).indexOf(!0)),Y.value.forEach((ye,se)=>ye.active=se===ue),Ie(ue)}),ws(()=>{if(Z.value<0&&Y.value.length>0&&!Y.value.some(ue=>ue.active)){const ue=Y.value.map(ye=>!ye.disabled).indexOf(!0);Ie(ue>=0?ue:-1)}}),tf(A7,{lazy:i.value,card:o.value}),(ue,ye)=>(ve(),hn(mr(t.tag),{id:t.id,class:On(["tabs",tt(be)])},{default:Kn(()=>[tt(l)?(ve(),et("div",{key:0,class:On(["tab-content",t.contentClass])},[(ve(!0),et(_r,null,Li(tt(Y),({tabComponent:se,contentId:le,tabClasses:ge,active:lt},Ot)=>(ve(),hn(mr(se()),{id:le,key:Ot,class:On(ge),active:lt},null,8,["id","class","active"]))),128)),tt(te)?(ve(),et("div",{key:"bv-empty-tab",class:On(["tab-pane active",{"card-body":tt(o)}])},[Xt(ue.$slots,"empty")],2)):Sn("",!0)],2)):Sn("",!0),mt("div",{class:On([t.navWrapperClass,{"card-header":tt(o),"ms-auto":t.vertical&&tt(l)}])},[mt("ul",{class:On(["nav",[tt(Se),t.navClass]]),role:"tablist"},[Xt(ue.$slots,"tabs-start"),(ve(!0),et(_r,null,Li(tt(Y),({tab:se,buttonId:le,contentId:ge,navItemClasses:lt,active:Ot,target:gt},Tt)=>(ve(),et("li",{key:Tt,class:On(["nav-item",se.props["title-item-class"]])},[mt("button",It({id:le,class:["nav-link",lt],"data-bs-toggle":"tab","data-bs-target":gt,role:"tab","aria-controls":ge,"aria-selected":Ot},se.props["title-link-attributes"],{onClick:gf(Mt=>Ae(Mt,Tt),["stop","prevent"])}),[se.children&&se.children.title?(ve(),hn(mr(se.children.title),{key:0})):(ve(),et(_r,{key:1},[jr(Ar(se.props.title),1)],64))],16,gae)],2))),128)),Xt(ue.$slots,"tabs-end")],2)],2),tt(l)?Sn("",!0):(ve(),et("div",{key:1,class:On(["tab-content",t.contentClass])},[(ve(!0),et(_r,null,Li(tt(Y),({tabComponent:se,contentId:le,tabClasses:ge,active:lt},Ot)=>(ve(),hn(mr(se()),{id:le,key:Ot,class:On(ge),active:lt},null,8,["id","class","active"]))),128)),tt(te)?(ve(),et("div",{key:"bv-empty-tab",class:On(["tab-pane active",{"card-body":tt(o)}])},[Xt(ue.$slots,"empty")],2)):Sn("",!0)],2))]),_:3},8,["id","class"]))}}),_ae=sr({__name:"BTab",props:{id:null,title:null,active:{default:!1},buttonId:{default:void 0},disabled:{default:!1},lazy:{default:void 0},lazyOnce:{default:void 0},noBody:{type:[Boolean,String],default:!1},tag:{default:"div"},titleItemClass:null,titleLinkAttributes:{default:void 0},titleLinkClass:null},setup(t){const e=t,n=il(A7,null),r=bt(st(e,"active")),o=bt(st(e,"disabled")),l=bt(st(e,e.lazyOnce!==void 0?"lazyOnce":"lazy")),h=yr(!1),p=ft(()=>!!(n!=null&&n.lazy||l.value)),i=ft(()=>e.lazyOnce!==void 0),b=ft(()=>r.value&&!o.value),E=ft(()=>{const O=p.value&&i.value&&h.value;return b.value||!p.value||O}),I=ft(()=>({active:r.value,show:r.value,"card-body":(n==null?void 0:n.card)&&e.noBody===!1}));return Do(()=>E.value,O=>{O&&!h.value&&(h.value=!0)}),(O,M)=>(ve(),hn(mr(t.tag),{id:t.id,class:On(["tab-pane",tt(I)]),role:"tabpanel","aria-labelledby":"profile-tab"},{default:Kn(()=>[tt(E)?Xt(O.$slots,"default",{key:0}):Sn("",!0)]),_:3},8,["id","class"]))}}),vae=Object.freeze(Object.defineProperty({__proto__:null,BAccordion:Nne,BAccordionItem:ere,BAlert:lre,BAvatar:fre,BAvatarGroup:cre,BBadge:mre,BBreadcrumb:bre,BBreadcrumbItem:Uz,BButton:C_,BButtonGroup:wre,BButtonToolbar:Cre,BCloseButton:H_,BCard:$z,BCardBody:Hz,BCardFooter:jz,BCardGroup:Bre,BCardHeader:zz,BCardImg:vC,BCardSubtitle:Qz,BCardText:Sre,BCardTitle:Vz,BCarousel:Ure,BCarouselSlide:jre,BCol:Av,BCollapse:Mz,BContainer:Yre,BDropdown:Xz,BDropdownDivider:nie,BDropdownForm:aie,BDropdownGroup:hie,BDropdownHeader:pie,BDropdownItem:gie,BDropdownItemButton:vie,BDropdownText:xie,BForm:Zz,BFormFloatingLabel:Sie,BFormInvalidFeedback:YT,BFormRow:kx,BFormText:JT,BFormValidFeedback:eI,BFormCheckbox:Yz,BFormCheckboxGroup:kie,BFormGroup:Qie,BFormInput:Gie,BFormRadio:e7,BFormRadioGroup:Yie,BFormSelect:noe,BFormSelectOption:E4,BFormSelectOptionGroup:t7,BFormTag:n7,BFormTags:goe,BFormTextarea:boe,BImg:C4,BInputGroup:Toe,BInputGroupAddon:B4,BInputGroupAppend:Ioe,BInputGroupPrepend:Poe,BInputGroupText:r7,BLink:qu,BListGroup:Loe,BListGroupItem:Foe,BModal:Doe,BNav:Uoe,BNavForm:Noe,BNavItem:Hoe,BNavItemDropdown:$oe,BNavText:Koe,BNavbar:qoe,BNavbarBrand:Zoe,BNavbarNav:Yoe,BNavbarToggle:ese,BOffcanvas:sse,BOverlay:ase,BPagination:mse,BPlaceholder:wh,BPlaceholderButton:a7,BPlaceholderCard:gse,BPlaceholderTable:yse,BPlaceholderWrapper:_se,BPopover:Ese,BProgress:Sse,BProgressBar:l7,BRow:Pse,BSkeleton:Mx,BSkeletonIcon:Lse,BSkeletonTable:kse,BSkeletonWrapper:Mse,BSpinner:ME,BFormSpinButton:zse,BTable:sae,BTableSimple:OE,BTbody:aae,BTd:uae,BTfoot:hae,BTh:Aae,BThead:pae,BTr:mae,BTab:_ae,BTabs:yae,BToastContainer:ZT,BTransition:nb,BToast:Wz,BToaster:ZT,BToastPlugin:Xre},Symbol.toStringTag,{value:"Module"})),bae=Object.freeze(Object.defineProperty({__proto__:null,vBColorMode:zne,vBPopover:Vne,vBToggle:x4,vBTooltip:Kne,vBVisible:Wne},Symbol.toStringTag,{value:"Module"})),wae={install(t,e={}){Object.entries(vae).forEach(([n,r])=>{t.component(n,r)}),Object.entries(bae).forEach(([n,r])=>{t.directive(n,r)}),One(t)}};var xae=Object.defineProperty,LO=Object.getOwnPropertySymbols,Cae=Object.prototype.hasOwnProperty,Eae=Object.prototype.propertyIsEnumerable,FO=(t,e,n)=>e in t?xae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bae=(t,e)=>{for(var n in e||(e={}))Cae.call(e,n)&&FO(t,n,e[n]);if(LO)for(var n of LO(e))Eae.call(e,n)&&FO(t,n,e[n]);return t};function mu(t){return t==null||t===""||Array.isArray(t)&&t.length===0||!(t instanceof Date)&&typeof t=="object"&&Object.keys(t).length===0}function Sae(t,e,n,r=1){let o=-1;const l=mu(t),h=mu(e);return l&&h?o=0:l?o=r:h?o=-r:typeof t=="string"&&typeof e=="string"?o=n(t,e):o=t<e?-1:t>e?1:0,o}function rI(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var n=Array.isArray(t),r=Array.isArray(e),o,l,h;if(n&&r){if(l=t.length,l!=e.length)return!1;for(o=l;o--!==0;)if(!rI(t[o],e[o]))return!1;return!0}if(n!=r)return!1;var p=t instanceof Date,i=e instanceof Date;if(p!=i)return!1;if(p&&i)return t.getTime()==e.getTime();var b=t instanceof RegExp,E=e instanceof RegExp;if(b!=E)return!1;if(b&&E)return t.toString()==e.toString();var I=Object.keys(t);if(l=I.length,l!==Object.keys(e).length)return!1;for(o=l;o--!==0;)if(!Object.prototype.hasOwnProperty.call(e,I[o]))return!1;for(o=l;o--!==0;)if(h=I[o],!rI(t[h],e[h]))return!1;return!0}return t!==t&&e!==e}function DE(t){return!!(t&&t.constructor&&t.call&&t.apply)}function Lo(t){return!mu(t)}function po(t,e){if(!t||!e)return null;try{const n=t[e];if(Lo(n))return n}catch{}if(Object.keys(t).length){if(DE(e))return e(t);if(e.indexOf(".")===-1)return t[e];{let n=e.split("."),r=t;for(let o=0,l=n.length;o<l;++o){if(r==null)return null;r=r[n[o]]}return r}}return null}function Fg(t,e,n){return n?po(t,n)===po(e,n):rI(t,e)}function Tae(t,e){if(t!=null&&e&&e.length){for(let n of e)if(Fg(t,n))return!0}return!1}function _2(t,e){let n=-1;if(e){for(let r=0;r<e.length;r++)if(e[r]===t){n=r;break}}return n}function RO(t,e){let n=-1;if(Lo(t))try{n=t.findLastIndex(e)}catch{n=t.lastIndexOf([...t].reverse().find(e))}return n}function ff(t,e=!0){return t instanceof Object&&t.constructor===Object&&(e||Object.keys(t).length!==0)}function rf(t,...e){return DE(t)?t(...e):t}function hu(t,e=!0){return typeof t=="string"&&(e||t!=="")}function ud(t){return hu(t)?t.replace(/(-|_)/g,"").toLowerCase():t}function S4(t,e="",n={}){const r=ud(e).split("."),o=r.shift();return o?ff(t)?S4(rf(t[Object.keys(t).find(l=>ud(l)===o)||""],n),r.join("."),n):void 0:rf(t,n)}function T4(t,e=!0){return Array.isArray(t)&&(e||t.length!==0)}function p7(t){return Lo(t)&&!isNaN(t)}function Iae(t=""){return Lo(t)&&t.length===1&&!!t.match(/\S| /)}function kO(){return new Intl.Collator(void 0,{numeric:!0}).compare}function oA(t,e){if(e){const n=e.test(t);return e.lastIndex=0,n}return!1}function Pae(...t){const e=(n={},r={})=>{const o=Bae({},n);return Object.keys(r).forEach(l=>{ff(r[l])&&l in n&&ff(n[l])?o[l]=e(n[l],r[l]):o[l]=r[l]}),o};return t.reduce((n,r,o)=>o===0?r:e(n,r),{})}function Nv(t){return t&&t.replace(/\/\*(?:(?!\*\/)[\s\S])*\*\/|[\r\n\t]+/g,"").replace(/ {2,}/g," ").replace(/ ([{:}]) /g,"$1").replace(/([;,]) /g,"$1").replace(/ !/g,"!").replace(/: /g,":")}function vh(t){return t&&t.search(/[\xC0-\xFF]/g)>-1&&(t=t.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),t}function MO(t,e,n){t&&e!==n&&(n>=t.length&&(n%=t.length,e%=t.length),t.splice(n,0,t.splice(e,1)[0]))}function OO(t,e,n=1,r,o=1){const l=Sae(t,e,r,n);let h=n;return(mu(t)||mu(e))&&(h=o===1?n:o),h*l}function Lae(t){return hu(t,!1)?t[0].toUpperCase()+t.slice(1):t}function m7(t){return hu(t)?t.replace(/(_)/g,"-").replace(/[A-Z]/g,(e,n)=>n===0?e:"-"+e.toLowerCase()).toLowerCase():t}function DO(t){return hu(t)?t.replace(/[A-Z]/g,(e,n)=>n===0?e:"."+e.toLowerCase()).toLowerCase():t}function I4(){const t=new Map;return{on(e,n){let r=t.get(e);return r?r.push(n):r=[n],t.set(e,r),this},off(e,n){let r=t.get(e);return r&&r.splice(r.indexOf(n)>>>0,1),this},emit(e,n){let r=t.get(e);r&&r.slice().map(o=>{o(n)})},clear(){t.clear()}}}var Fae=Object.defineProperty,Rae=Object.defineProperties,kae=Object.getOwnPropertyDescriptors,bC=Object.getOwnPropertySymbols,g7=Object.prototype.hasOwnProperty,y7=Object.prototype.propertyIsEnumerable,UO=(t,e,n)=>e in t?Fae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Y0=(t,e)=>{for(var n in e||(e={}))g7.call(e,n)&&UO(t,n,e[n]);if(bC)for(var n of bC(e))y7.call(e,n)&&UO(t,n,e[n]);return t},v2=(t,e)=>Rae(t,kae(e)),J0=(t,e)=>{var n={};for(var r in t)g7.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&bC)for(var r of bC(t))e.indexOf(r)<0&&y7.call(t,r)&&(n[r]=t[r]);return n},Mae=I4(),cd=Mae;function NO(t,e){T4(t)?t.push(...e||[]):ff(t)&&Object.assign(t,e)}function Oae(t){return ff(t)&&t.hasOwnProperty("value")&&t.hasOwnProperty("type")?t.value:t}function zO(t,e=""){return["opacity","z-index","line-height","font-weight","flex","flex-grow","flex-shrink","order"].some(r=>e.endsWith(r))?t:`${t}`.trim().split(" ").map(l=>p7(l)?`${l}px`:l).join(" ")}function Dae(t){return t.replaceAll(/ /g,"").replace(/[^\w]/g,"-")}function iI(t="",e=""){return Dae(`${hu(t,!1)&&hu(e,!1)?`${t}-`:t}${e}`)}function _7(t="",e=""){return`--${iI(t,e)}`}function v7(t,e="",n="",r=[],o){if(hu(t)){const l=/{([^}]*)}/g,h=t.trim();if(oA(h,l)){const p=h.replaceAll(l,E=>{const O=E.replace(/{|}/g,"").split(".").filter(M=>!r.some(G=>oA(M,G)));return`var(${_7(n,m7(O.join("-")))}${Lo(o)?`, ${o}`:""})`}),i=/(\d+\s+[\+\-\*\/]\s+\d+)/g,b=/var\([^)]+\)/g;return oA(p.replace(b,"0"),i)?`calc(${p})`:p}return zO(h,e)}else if(p7(t))return zO(t,e)}function Uae(t,e,n){hu(e,!1)&&t.push(`${e}:${n};`)}function pv(t,e){return t?`${t}{${e}}`:""}var b2=(...t)=>Nae(fs.getTheme(),...t),Nae=(t={},e,n,r="variable")=>{if(e){const{variable:o,options:l}=fs.defaults||{},{prefix:h,transform:p}=(t==null?void 0:t.options)||l||{},b=oA(e,/{([^}]*)}/g)?e:`{${e}}`;return r==="value"||p==="strict"?fs.getTokenValue(e):v7(b,void 0,h,[o.excludedKeyRegex],n)}return""};function zae(t,e={}){const n=fs.defaults.variable,{prefix:r=n.prefix,selector:o=n.selector,excludedKeyRegex:l=n.excludedKeyRegex}=e,h=(b,E="")=>Object.entries(b).reduce((I,[O,M])=>{const G=oA(O,l)?iI(E):iI(E,m7(O)),q=Oae(M);if(ff(q)){const{variables:Z,tokens:Y}=h(q,G);NO(I.tokens,Y),NO(I.variables,Z)}else I.tokens.push((r?G.replace(`${r}-`,""):G).replaceAll("-",".")),Uae(I.variables,_7(G),v7(q,G,r,[l]));return I},{variables:[],tokens:[]}),{variables:p,tokens:i}=h(t,r);return{value:p,tokens:i,declarations:p.join(""),css:pv(o,p.join(""))}}var id={regex:{rules:{class:{pattern:/^\.([a-zA-Z][\w-]*)$/,resolve(t){return{type:"class",selector:t,matched:this.pattern.test(t.trim())}}},attr:{pattern:/^\[(.*)\]$/,resolve(t){return{type:"attr",selector:`:root${t}`,matched:this.pattern.test(t.trim())}}},media:{pattern:/^@media (.*)$/,resolve(t){return{type:"media",selector:`${t}{:root{[CSS]}}`,matched:this.pattern.test(t.trim())}}},system:{pattern:/^system$/,resolve(t){return{type:"system",selector:"@media (prefers-color-scheme: dark){:root{[CSS]}}",matched:this.pattern.test(t.trim())}}},custom:{resolve(t){return{type:"custom",selector:t,matched:!0}}}},resolve(t){const e=Object.keys(this.rules).filter(n=>n!=="custom").map(n=>this.rules[n]);return[t].flat().map(n=>{var r;return(r=e.map(o=>o.resolve(n)).find(o=>o.matched))!=null?r:this.rules.custom.resolve(n)})}},_toVariables(t,e){return zae(t,{prefix:e==null?void 0:e.prefix})},getCommon({name:t="",theme:e={},params:n,set:r,defaults:o}){var l,h,p,i;const{preset:b,options:E}=e;let I,O,M,G;if(Lo(b)){const{primitive:q,semantic:Z}=b,Y=Z||{},{colorScheme:te}=Y,be=J0(Y,["colorScheme"]),Pe=te||{},{dark:Se}=Pe,Ie=J0(Pe,["dark"]),Ae=Lo(q)?this._toVariables({primitive:q},E):{},ne=Lo(be)?this._toVariables({semantic:be},E):{},ue=Lo(Ie)?this._toVariables({light:Ie},E):{},ye=Lo(Se)?this._toVariables({dark:Se},E):{},[se,le]=[(l=Ae.declarations)!=null?l:"",Ae.tokens],[ge,lt]=[(h=ne.declarations)!=null?h:"",ne.tokens||[]],[Ot,gt]=[(p=ue.declarations)!=null?p:"",ue.tokens||[]],[Tt,Mt]=[(i=ye.declarations)!=null?i:"",ye.tokens||[]];I=this.transformCSS(t,se,"light","variable",E,r,o),O=le;const on=this.transformCSS(t,`${ge}${Ot}color-scheme:light`,"light","variable",E,r,o),Ut=this.transformCSS(t,`${Tt}color-scheme:dark`,"dark","variable",E,r,o);M=`${on}${Ut}`,G=[...new Set([...lt,...gt,...Mt])]}return{primitive:{css:I,tokens:O},semantic:{css:M,tokens:G}}},getPreset({name:t="",preset:e={},options:n,params:r,set:o,defaults:l,selector:h}){var p,i,b;const E=t.replace("-directive",""),I=e,{colorScheme:O}=I,M=J0(I,["colorScheme"]),G=O||{},{dark:q}=G,Z=J0(G,["dark"]),Y=Lo(M)?this._toVariables({[E]:M},n):{},te=Lo(Z)?this._toVariables({[E]:Z},n):{},be=Lo(q)?this._toVariables({[E]:q},n):{},[Pe,Se]=[(p=Y.declarations)!=null?p:"",Y.tokens||[]],[Ie,Ae]=[(i=te.declarations)!=null?i:"",te.tokens||[]],[ne,ue]=[(b=be.declarations)!=null?b:"",be.tokens||[]],ye=[...new Set([...Se,...Ae,...ue])],se=this.transformCSS(E,`${Pe}${Ie}`,"light","variable",n,o,l,h),le=this.transformCSS(E,ne,"dark","variable",n,o,l,h);return{css:`${se}${le}`,tokens:ye}},getPresetC({name:t="",theme:e={},params:n,set:r,defaults:o}){var l;const{preset:h,options:p}=e,i=(l=h==null?void 0:h.components)==null?void 0:l[t];return this.getPreset({name:t,preset:i,options:p,params:n,set:r,defaults:o})},getPresetD({name:t="",theme:e={},params:n,set:r,defaults:o}){var l;const h=t.replace("-directive",""),{preset:p,options:i}=e,b=(l=p==null?void 0:p.directives)==null?void 0:l[h];return this.getPreset({name:h,preset:b,options:i,params:n,set:r,defaults:o})},getColorSchemeOption(t,e){var n;return this.regex.resolve((n=t.darkModeSelector)!=null?n:e.options.darkModeSelector)},getLayerOrder(t,e={},n,r){const{cssLayer:o}=e;return o?`@layer ${rf(o.order||"primeui",n)}`:""},getCommonStyleSheet({name:t="",theme:e={},params:n,props:r={},set:o,defaults:l}){const h=this.getCommon({name:t,theme:e,params:n,set:o,defaults:l}),p=Object.entries(r).reduce((i,[b,E])=>i.push(`${b}="${E}"`)&&i,[]).join(" ");return Object.entries(h||{}).reduce((i,[b,E])=>{if(E!=null&&E.css){const I=Nv(E==null?void 0:E.css),O=`${b}-variables`;i.push(`<style type="text/css" data-primevue-style-id="${O}" ${p}>${I}</style>`)}return i},[]).join("")},getStyleSheet({name:t="",theme:e={},params:n,props:r={},set:o,defaults:l}){var h;const p={name:t,theme:e,params:n,set:o,defaults:l},i=(h=t.includes("-directive")?this.getPresetD(p):this.getPresetC(p))==null?void 0:h.css,b=Object.entries(r).reduce((E,[I,O])=>E.push(`${I}="${O}"`)&&E,[]).join(" ");return i?`<style type="text/css" data-primevue-style-id="${t}-variables" ${b}>${Nv(i)}</style>`:""},createTokens(t={},e,n="",r="",o={}){return Object.entries(t).forEach(([l,h])=>{const p=oA(l,e.variable.excludedKeyRegex)?n:n?`${n}.${DO(l)}`:DO(l),i=r?`${r}.${l}`:l;ff(h)?this.createTokens(h,e,p,i,o):(o[p]||(o[p]={paths:[],computed(b,E={}){if(b){const I=this.paths.find(O=>O.scheme===b)||this.paths.find(O=>O.scheme==="none");return I==null?void 0:I.computed(b,E.binding)}return this.paths.map(I=>I.computed(I.scheme,E[I.scheme]))}}),o[p].paths.push({path:i,value:h,scheme:i.includes("colorScheme.light")?"light":i.includes("colorScheme.dark")?"dark":"none",computed(b,E={}){const I=/{([^}]*)}/g;let O=h;if(E.name=this.path,E.binding||(E.binding={}),oA(h,I)){const G=h.trim().replaceAll(I,Y=>{var te,be;const Pe=Y.replace(/{|}/g,"");return(be=(te=o[Pe])==null?void 0:te.computed(b,E))==null?void 0:be.value}),q=/(\d+\w*\s+[\+\-\*\/]\s+\d+\w*)/g,Z=/var\([^)]+\)/g;O=oA(G.replace(Z,"0"),q)?`calc(${G})`:G}return mu(E.binding)&&delete E.binding,{colorScheme:b,path:this.path,paths:E,value:O.includes("undefined")?void 0:O}}}))}),o},getTokenValue(t,e,n){var r;const l=(i=>i.split(".").filter(E=>!oA(E.toLowerCase(),n.variable.excludedKeyRegex)).join("."))(e),h=e.includes("colorScheme.light")?"light":e.includes("colorScheme.dark")?"dark":void 0,p=[(r=t[l])==null?void 0:r.computed(h)].flat().filter(i=>i);return p.length===1?p[0].value:p.reduce((i={},b)=>{const E=b,{colorScheme:I}=E,O=J0(E,["colorScheme"]);return i[I]=O,i},void 0)},transformCSS(t,e,n,r,o={},l,h,p){if(Lo(e)){const{cssLayer:i}=o;if(r!=="style"){const b=this.getColorSchemeOption(o,h),E=p?pv(p,e):e;e=n==="dark"?b.reduce((I,{selector:O})=>(Lo(O)&&(I+=O.includes("[CSS]")?O.replace("[CSS]",E):pv(O,E)),I),""):pv(p??":root",e)}if(i){const b={name:"primeui",order:"primeui"};ff(i)&&(b.name=rf(i.name,{name:t,type:r})),Lo(b.name)&&(e=pv(`@layer ${b.name}`,e),l==null||l.layerNames(b.name))}return e}return""}},fs={defaults:{variable:{prefix:"p",selector:":root",excludedKeyRegex:/^(primitive|semantic|components|directives|variables|colorscheme|light|dark|common|root|states)$/gi},options:{prefix:"p",darkModeSelector:"system",cssLayer:!1}},_theme:void 0,_layerNames:new Set,_loadedStyleNames:new Set,_loadingStyles:new Set,_tokens:{},update(t={}){const{theme:e}=t;e&&(this._theme=v2(Y0({},e),{options:Y0(Y0({},this.defaults.options),e.options)}),this._tokens=id.createTokens(this.preset,this.defaults),this.clearLoadedStyleNames())},get theme(){return this._theme},get preset(){var t;return((t=this.theme)==null?void 0:t.preset)||{}},get options(){var t;return((t=this.theme)==null?void 0:t.options)||{}},get tokens(){return this._tokens},getTheme(){return this.theme},setTheme(t){this.update({theme:t}),cd.emit("theme:change",t)},getPreset(){return this.preset},setPreset(t){this._theme=v2(Y0({},this.theme),{preset:t}),this._tokens=id.createTokens(t,this.defaults),this.clearLoadedStyleNames(),cd.emit("preset:change",t),cd.emit("theme:change",this.theme)},getOptions(){return this.options},setOptions(t){this._theme=v2(Y0({},this.theme),{options:t}),this.clearLoadedStyleNames(),cd.emit("options:change",t),cd.emit("theme:change",this.theme)},getLayerNames(){return[...this._layerNames]},setLayerNames(t){this._layerNames.add(t)},getLoadedStyleNames(){return this._loadedStyleNames},isStyleNameLoaded(t){return this._loadedStyleNames.has(t)},setLoadedStyleName(t){this._loadedStyleNames.add(t)},deleteLoadedStyleName(t){this._loadedStyleNames.delete(t)},clearLoadedStyleNames(){this._loadedStyleNames.clear()},getTokenValue(t){return id.getTokenValue(this.tokens,t,this.defaults)},getCommon(t="",e){return id.getCommon({name:t,theme:this.theme,params:e,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}})},getComponent(t="",e){const n={name:t,theme:this.theme,params:e,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}};return id.getPresetC(n)},getDirective(t="",e){const n={name:t,theme:this.theme,params:e,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}};return id.getPresetD(n)},getCustomPreset(t="",e,n,r){const o={name:t,preset:e,options:this.options,selector:n,params:r,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}};return id.getPreset(o)},getLayerOrderCSS(t=""){return id.getLayerOrder(t,this.options,{names:this.getLayerNames()},this.defaults)},transformCSS(t="",e,n="style",r){return id.transformCSS(t,e,r,n,this.options,{layerNames:this.setLayerNames.bind(this)},this.defaults)},getCommonStyleSheet(t="",e,n={}){return id.getCommonStyleSheet({name:t,theme:this.theme,params:e,props:n,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}})},getStyleSheet(t,e,n={}){return id.getStyleSheet({name:t,theme:this.theme,params:e,props:n,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}})},onStyleMounted(t){this._loadingStyles.add(t)},onStyleUpdated(t){this._loadingStyles.add(t)},onStyleLoaded(t,{name:e}){this._loadingStyles.size&&(this._loadingStyles.delete(e),cd.emit(`theme:${e}:load`,t),!this._loadingStyles.size&&cd.emit("theme:load"))}},pl={STARTS_WITH:"startsWith",CONTAINS:"contains",NOT_CONTAINS:"notContains",ENDS_WITH:"endsWith",EQUALS:"equals",NOT_EQUALS:"notEquals",IN:"in",LESS_THAN:"lt",LESS_THAN_OR_EQUAL_TO:"lte",GREATER_THAN:"gt",GREATER_THAN_OR_EQUAL_TO:"gte",BETWEEN:"between",DATE_IS:"dateIs",DATE_IS_NOT:"dateIsNot",DATE_BEFORE:"dateBefore",DATE_AFTER:"dateAfter"},wC={AND:"and",OR:"or"};function VO(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Vae(t))||e){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(b){throw b},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l,h=!0,p=!1;return{s:function(){n=n.call(t)},n:function(){var b=n.next();return h=b.done,b},e:function(b){p=!0,l=b},f:function(){try{h||n.return==null||n.return()}finally{if(p)throw l}}}}function Vae(t,e){if(t){if(typeof t=="string")return QO(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?QO(t,e):void 0}}function QO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var oI={filter:function(e,n,r,o,l){var h=[];if(!e)return h;var p=VO(e),i;try{for(p.s();!(i=p.n()).done;){var b=i.value;if(typeof b=="string"){if(this.filters[o](b,r,l)){h.push(b);continue}}else{var E=VO(n),I;try{for(E.s();!(I=E.n()).done;){var O=I.value,M=po(b,O);if(this.filters[o](M,r,l)){h.push(b);break}}}catch(G){E.e(G)}finally{E.f()}}}}catch(G){p.e(G)}finally{p.f()}return h},filters:{startsWith:function(e,n,r){if(n==null||n==="")return!0;if(e==null)return!1;var o=vh(n.toString()).toLocaleLowerCase(r),l=vh(e.toString()).toLocaleLowerCase(r);return l.slice(0,o.length)===o},contains:function(e,n,r){if(n==null||n==="")return!0;if(e==null)return!1;var o=vh(n.toString()).toLocaleLowerCase(r),l=vh(e.toString()).toLocaleLowerCase(r);return l.indexOf(o)!==-1},notContains:function(e,n,r){if(n==null||n==="")return!0;if(e==null)return!1;var o=vh(n.toString()).toLocaleLowerCase(r),l=vh(e.toString()).toLocaleLowerCase(r);return l.indexOf(o)===-1},endsWith:function(e,n,r){if(n==null||n==="")return!0;if(e==null)return!1;var o=vh(n.toString()).toLocaleLowerCase(r),l=vh(e.toString()).toLocaleLowerCase(r);return l.indexOf(o,l.length-o.length)!==-1},equals:function(e,n,r){return n==null||n===""?!0:e==null?!1:e.getTime&&n.getTime?e.getTime()===n.getTime():vh(e.toString()).toLocaleLowerCase(r)==vh(n.toString()).toLocaleLowerCase(r)},notEquals:function(e,n,r){return n==null||n===""?!1:e==null?!0:e.getTime&&n.getTime?e.getTime()!==n.getTime():vh(e.toString()).toLocaleLowerCase(r)!=vh(n.toString()).toLocaleLowerCase(r)},in:function(e,n){if(n==null||n.length===0)return!0;for(var r=0;r<n.length;r++)if(Fg(e,n[r]))return!0;return!1},between:function(e,n){return n==null||n[0]==null||n[1]==null?!0:e==null?!1:e.getTime?n[0].getTime()<=e.getTime()&&e.getTime()<=n[1].getTime():n[0]<=e&&e<=n[1]},lt:function(e,n){return n==null?!0:e==null?!1:e.getTime&&n.getTime?e.getTime()<n.getTime():e<n},lte:function(e,n){return n==null?!0:e==null?!1:e.getTime&&n.getTime?e.getTime()<=n.getTime():e<=n},gt:function(e,n){return n==null?!0:e==null?!1:e.getTime&&n.getTime?e.getTime()>n.getTime():e>n},gte:function(e,n){return n==null?!0:e==null?!1:e.getTime&&n.getTime?e.getTime()>=n.getTime():e>=n},dateIs:function(e,n){return n==null?!0:e==null?!1:e.toDateString()===n.toDateString()},dateIsNot:function(e,n){return n==null?!0:e==null?!1:e.toDateString()!==n.toDateString()},dateBefore:function(e,n){return n==null?!0:e==null?!1:e.getTime()<n.getTime()},dateAfter:function(e,n){return n==null?!0:e==null?!1:e.getTime()>n.getTime()}},register:function(e,n){this.filters[e]=n}};function Qae(t,e){return t?t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className):!1}function mv(t,e){if(t&&e){const n=r=>{Qae(t,r)||(t.classList?t.classList.add(r):t.className+=" "+r)};[e].flat().filter(Boolean).forEach(r=>r.split(" ").forEach(n))}}function xC(t){for(const e of document==null?void 0:document.styleSheets)try{for(const n of e==null?void 0:e.cssRules)for(const r of n==null?void 0:n.style)if(t.test(r))return{name:r,value:n.style.getPropertyValue(r).trim()}}catch{}return null}function Hae(t){if(t){let e=document.createElement("a");if(e.download!==void 0){const{name:n,src:r}=t;return e.setAttribute("href",r),e.setAttribute("download",n),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e),!0}}return!1}function jae(t,e){let n=new Blob([t],{type:"application/csv;charset=utf-8;"});window.navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(n,e+".csv"):Hae({name:e+".csv",src:URL.createObjectURL(n)})||(t="data:text/csv;charset=utf-8,"+t,window.open(encodeURI(t)))}function Sp(t,e){if(t&&e){const n=r=>{t.classList?t.classList.remove(r):t.className=t.className.replace(new RegExp("(^|\\b)"+r.split(" ").join("|")+"(\\b|$)","gi")," ")};[e].flat().filter(Boolean).forEach(r=>r.split(" ").forEach(n))}}function b7(t){let e={width:0,height:0};return t&&(t.style.visibility="hidden",t.style.display="block",e.width=t.offsetWidth,e.height=t.offsetHeight,t.style.display="none",t.style.visibility="visible"),e}function w7(){let t=window,e=document,n=e.documentElement,r=e.getElementsByTagName("body")[0],o=t.innerWidth||n.clientWidth||r.clientWidth,l=t.innerHeight||n.clientHeight||r.clientHeight;return{width:o,height:l}}function $ae(){let t=document.documentElement;return(window.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}function x7(){let t=document.documentElement;return(window.pageYOffset||t.scrollTop)-(t.clientTop||0)}function C7(t,e,n=!0){var r,o,l,h;if(t){const p=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:b7(t),i=p.height,b=p.width,E=e.offsetHeight,I=e.offsetWidth,O=e.getBoundingClientRect(),M=x7(),G=$ae(),q=w7();let Z,Y,te="top";O.top+E+i>q.height?(Z=O.top+M-i,te="bottom",Z<0&&(Z=M)):Z=E+O.top+M,O.left+b>q.width?Y=Math.max(0,O.left+G+I-b):Y=O.left+G,t.style.top=Z+"px",t.style.left=Y+"px",t.style.transformOrigin=te,n&&(t.style.marginTop=te==="bottom"?`calc(${(o=(r=xC(/-anchor-gutter$/))==null?void 0:r.value)!=null?o:"2px"} * -1)`:(h=(l=xC(/-anchor-gutter$/))==null?void 0:l.value)!=null?h:"")}}function CC(t,e){t&&(typeof e=="string"?t.style.cssText=e:Object.entries(e||{}).forEach(([n,r])=>t.style[n]=r))}function Sh(t,e){return t instanceof HTMLElement?t.offsetWidth:0}function Gae(t,e,n=!0){var r,o,l,h;if(t){const p=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:b7(t),i=e.offsetHeight,b=e.getBoundingClientRect(),E=w7();let I,O,M="top";b.top+i+p.height>E.height?(I=-1*p.height,M="bottom",b.top+I<0&&(I=-1*b.top)):I=i,p.width>E.width?O=b.left*-1:b.left+p.width>E.width?O=(b.left+p.width-E.width)*-1:O=0,t.style.top=I+"px",t.style.left=O+"px",t.style.transformOrigin=M,n&&(t.style.marginTop=M==="bottom"?`calc(${(o=(r=xC(/-anchor-gutter$/))==null?void 0:r.value)!=null?o:"2px"} * -1)`:(h=(l=xC(/-anchor-gutter$/))==null?void 0:l.value)!=null?h:"")}}function j_(t){return typeof HTMLElement=="object"?t instanceof HTMLElement:t&&typeof t=="object"&&t!==null&&t.nodeType===1&&typeof t.nodeName=="string"}function Ox(){if(window.getSelection){const t=window.getSelection()||{};t.empty?t.empty():t.removeAllRanges&&t.rangeCount>0&&t.getRangeAt(0).getClientRects().length>0&&t.removeAllRanges()}}function EC(t,e={}){if(j_(t)){const n=(r,o)=>{var l,h;const p=(l=t==null?void 0:t.$attrs)!=null&&l[r]?[(h=t==null?void 0:t.$attrs)==null?void 0:h[r]]:[];return[o].flat().reduce((i,b)=>{if(b!=null){const E=typeof b;if(E==="string"||E==="number")i.push(b);else if(E==="object"){const I=Array.isArray(b)?n(r,b):Object.entries(b).map(([O,M])=>r==="style"&&(M||M===0)?`${O.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}:${M}`:M?O:void 0);i=I.length?i.concat(I.filter(O=>!!O)):i}}return i},p)};Object.entries(e).forEach(([r,o])=>{if(o!=null){const l=r.match(/^on(.+)/);l?t.addEventListener(l[1].toLowerCase(),o):r==="p-bind"?EC(t,o):(o=r==="class"?[...new Set(n("class",o))].join(" ").trim():r==="style"?n("style",o).join(";").trim():o,(t.$attrs=t.$attrs||{})&&(t.$attrs[r]=o),t.setAttribute(r,o))}})}}function E7(t,e={},...n){{const r=document.createElement(t);return EC(r,e),r.append(...n),r}}function Fy(t,e){return j_(t)?Array.from(t.querySelectorAll(e)):[]}function kp(t,e){return j_(t)?t.matches(e)?t:t.querySelector(e):null}function au(t,e){t&&document.activeElement!==t&&t.focus(e)}function ml(t,e){if(j_(t)){const n=t.getAttribute(e);return isNaN(n)?n==="true"||n==="false"?n==="true":n:+n}}function P4(t,e=""){let n=Fy(t,`button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
            [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
            input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
            select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
            textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
            [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
            [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e}`),r=[];for(let o of n)getComputedStyle(o).display!="none"&&getComputedStyle(o).visibility!="hidden"&&r.push(o);return r}function Xm(t,e){const n=P4(t,e);return n.length>0?n[0]:null}function Zm(t){if(t){let e=t.offsetHeight,n=getComputedStyle(t);return e-=parseFloat(n.paddingTop)+parseFloat(n.paddingBottom)+parseFloat(n.borderTopWidth)+parseFloat(n.borderBottomWidth),e}return 0}function Kae(t){if(t){t.style.visibility="hidden",t.style.display="block";let e=t.offsetHeight;return t.style.display="none",t.style.visibility="visible",e}return 0}function qae(t){if(t){t.style.visibility="hidden",t.style.display="block";let e=t.offsetWidth;return t.style.display="none",t.style.visibility="visible",e}return 0}function L4(t){if(t){let e=t.parentNode;return e&&e instanceof ShadowRoot&&e.host&&(e=e.host),e}return null}function Dx(t){var e;if(t){let n=(e=L4(t))==null?void 0:e.childNodes,r=0;if(n)for(let o=0;o<n.length;o++){if(n[o]===t)return r;n[o].nodeType===1&&r++}}return-1}function B7(t,e){const n=P4(t,e);return n.length>0?n[n.length-1]:null}function F4(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return n;n=n.nextElementSibling}return null}function Ry(t){if(t){let e=t.getBoundingClientRect();return{top:e.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:e.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}return{top:"auto",left:"auto"}}function BC(t,e){return t?t.offsetHeight:0}function S7(t,e=[]){const n=L4(t);return n===null?e:S7(n,e.concat([n]))}function R4(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return n;n=n.previousElementSibling}return null}function Wae(t){let e=[];if(t){let n=S7(t);const r=/(auto|scroll)/,o=l=>{try{let h=window.getComputedStyle(l,null);return r.test(h.getPropertyValue("overflow"))||r.test(h.getPropertyValue("overflowX"))||r.test(h.getPropertyValue("overflowY"))}catch{return!1}};for(let l of n){let h=l.nodeType===1&&l.dataset.scrollselectors;if(h){let p=h.split(",");for(let i of p){let b=kp(l,i);b&&o(b)&&e.push(b)}}l.nodeType!==9&&o(l)&&e.push(l)}}return e}function HO(){if(window.getSelection)return window.getSelection().toString();if(document.getSelection)return document.getSelection().toString()}function Xae(t){return!!(t!==null&&typeof t<"u"&&t.nodeName&&L4(t))}function Ym(t){if(t){let e=t.offsetWidth,n=getComputedStyle(t);return e-=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight)+parseFloat(n.borderLeftWidth)+parseFloat(n.borderRightWidth),e}return 0}function jO(t,e,n){t[e].apply(t,n)}function Zae(){return/(android)/i.test(navigator.userAgent)}function w2(t){if(t){const e=t.nodeName,n=t.parentElement&&t.parentElement.nodeName;return e==="INPUT"||e==="TEXTAREA"||e==="BUTTON"||e==="A"||n==="INPUT"||n==="TEXTAREA"||n==="BUTTON"||n==="A"||!!t.closest(".p-button, .p-checkbox, .p-radiobutton")}return!1}function T7(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function $O(t,e=""){return j_(t)?t.matches(`button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
            [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
            input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
            select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
            textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
            [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
            [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e}`):!1}function SC(t){return!!(t&&t.offsetParent!=null)}function I7(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}function k4(t,e="",n){j_(t)&&n!==null&&n!==void 0&&t.setAttribute(e,n)}function o1(t){"@babel/helpers - typeof";return o1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o1(t)}function GO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function KO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GO(Object(n),!0).forEach(function(r){Yae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yae(t,e,n){return(e=Jae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jae(t){var e=ele(t,"string");return o1(e)=="symbol"?e:e+""}function ele(t,e){if(o1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(o1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tle(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;_E()?ws(t):e?t():Lh(t)}var nle=0;function rle(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=yr(!1),r=yr(t),o=yr(null),l=T7()?window.document:void 0,h=e.document,p=h===void 0?l:h,i=e.immediate,b=i===void 0?!0:i,E=e.manual,I=E===void 0?!1:E,O=e.name,M=O===void 0?"style_".concat(++nle):O,G=e.id,q=G===void 0?void 0:G,Z=e.media,Y=Z===void 0?void 0:Z,te=e.nonce,be=te===void 0?void 0:te,Pe=e.first,Se=Pe===void 0?!1:Pe,Ie=e.onMounted,Ae=Ie===void 0?void 0:Ie,ne=e.onUpdated,ue=ne===void 0?void 0:ne,ye=e.onLoad,se=ye===void 0?void 0:ye,le=e.props,ge=le===void 0?{}:le,lt=function(){},Ot=function(Mt){var on=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(p){var Ut=KO(KO({},ge),on),In=Ut.name||M,Ee=Ut.id||q,$e=Ut.nonce||be;o.value=p.querySelector('style[data-primevue-style-id="'.concat(In,'"]'))||p.getElementById(Ee)||p.createElement("style"),o.value.isConnected||(r.value=Mt||t,EC(o.value,{type:"text/css",id:Ee,media:Y,nonce:$e}),Se?p.head.prepend(o.value):p.head.appendChild(o.value),k4(o.value,"data-primevue-style-id",In),EC(o.value,Ut),o.value.onload=function(We){return se==null?void 0:se(We,{name:In})},Ae==null||Ae(In)),!n.value&&(lt=Do(r,function(We){o.value.textContent=We,ue==null||ue(In)},{immediate:!0}),n.value=!0)}},gt=function(){!p||!n.value||(lt(),Xae(o.value)&&p.head.removeChild(o.value),n.value=!1)};return b&&!I&&tle(Ot),{id:q,name:M,el:o,css:r,unload:gt,load:Ot,isLoaded:h_(n)}}function s1(t){"@babel/helpers - typeof";return s1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s1(t)}function qO(t,e){return ale(t)||sle(t,e)||ole(t,e)||ile()}function ile(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ole(t,e){if(t){if(typeof t=="string")return WO(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?WO(t,e):void 0}}function WO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function sle(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,l,h,p=[],i=!0,b=!1;try{if(l=(n=n.call(t)).next,e!==0)for(;!(i=(r=l.call(n)).done)&&(p.push(r.value),p.length!==e);i=!0);}catch(E){b=!0,o=E}finally{try{if(!i&&n.return!=null&&(h=n.return(),Object(h)!==h))return}finally{if(b)throw o}}return p}}function ale(t){if(Array.isArray(t))return t}function XO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function x2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XO(Object(n),!0).forEach(function(r){lle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lle(t,e,n){return(e=cle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cle(t){var e=ule(t,"string");return s1(e)=="symbol"?e:e+""}function ule(t,e){if(s1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(s1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hle=function(e){var n=e.dt;return`
* {
    box-sizing: border-box;
}

/* Non vue overlay animations */
.p-connected-overlay {
    opacity: 0;
    transform: scaleY(0.8);
    transition: transform 0.12s cubic-bezier(0, 0, 0.2, 1),
        opacity 0.12s cubic-bezier(0, 0, 0.2, 1);
}

.p-connected-overlay-visible {
    opacity: 1;
    transform: scaleY(1);
}

.p-connected-overlay-hidden {
    opacity: 0;
    transform: scaleY(1);
    transition: opacity 0.1s linear;
}

/* Vue based overlay animations */
.p-connected-overlay-enter-from {
    opacity: 0;
    transform: scaleY(0.8);
}

.p-connected-overlay-leave-to {
    opacity: 0;
}

.p-connected-overlay-enter-active {
    transition: transform 0.12s cubic-bezier(0, 0, 0.2, 1),
        opacity 0.12s cubic-bezier(0, 0, 0.2, 1);
}

.p-connected-overlay-leave-active {
    transition: opacity 0.1s linear;
}

/* Toggleable Content */
.p-toggleable-content-enter-from,
.p-toggleable-content-leave-to {
    max-height: 0;
}

.p-toggleable-content-enter-to,
.p-toggleable-content-leave-from {
    max-height: 1000px;
}

.p-toggleable-content-leave-active {
    overflow: hidden;
    transition: max-height 0.45s cubic-bezier(0, 1, 0, 1);
}

.p-toggleable-content-enter-active {
    overflow: hidden;
    transition: max-height 1s ease-in-out;
}

.p-disabled,
.p-disabled * {
    cursor: default;
    pointer-events: none;
    user-select: none;
}

.p-disabled,
.p-component:disabled {
    opacity: `.concat(n("disabled.opacity"),`;
}

.pi {
    font-size: `).concat(n("icon.size"),`;
}

.p-icon {
    width: `).concat(n("icon.size"),`;
    height: `).concat(n("icon.size"),`;
}

.p-overlay-mask {
    background: `).concat(n("mask.background"),`;
    color: `).concat(n("mask.color"),`;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

.p-overlay-mask-enter {
    animation: p-overlay-mask-enter-animation `).concat(n("mask.transition.duration"),` forwards;
}

.p-overlay-mask-leave {
    animation: p-overlay-mask-leave-animation `).concat(n("mask.transition.duration"),` forwards;
}

@keyframes p-overlay-mask-enter-animation {
    from {
        background: transparent;
    }
    to {
        background: `).concat(n("mask.background"),`;
    }
}
@keyframes p-overlay-mask-leave-animation {
    from {
        background: `).concat(n("mask.background"),`;
    }
    to {
        background: transparent;
    }
}
`)},dle=function(e){var n=e.dt;return`
.p-hidden-accessible {
    border: 0;
    clip: rect(0 0 0 0);
    height: 1px;
    margin: -1px;
    overflow: hidden;
    padding: 0;
    position: absolute;
    width: 1px;
}

.p-hidden-accessible input,
.p-hidden-accessible select {
    transform: scale(0);
}

.p-overflow-hidden {
    overflow: hidden;
    padding-right: `.concat(n("scrollbar.width"),`;
}
`)},fle={},Ale={},Uo={name:"base",css:dle,theme:hle,classes:fle,inlineStyles:Ale,load:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(l){return l},o=r(rf(e,{dt:b2}));return o?rle(Nv(o),x2({name:this.name},n)):{}},loadCSS:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.load(this.css,e)},loadTheme:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.load(this.theme,n,function(r){return fs.transformCSS(n.name||e.name,r)})},getCommonTheme:function(e){return fs.getCommon(this.name,e)},getComponentTheme:function(e){return fs.getComponent(this.name,e)},getDirectiveTheme:function(e){return fs.getDirective(this.name,e)},getPresetTheme:function(e,n,r){return fs.getCustomPreset(this.name,e,n,r)},getLayerOrderThemeCSS:function(){return fs.getLayerOrderCSS(this.name)},getStyleSheet:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.css){var r=rf(this.css,{dt:b2}),o=Nv("".concat(r).concat(e)),l=Object.entries(n).reduce(function(h,p){var i=qO(p,2),b=i[0],E=i[1];return h.push("".concat(b,'="').concat(E,'"'))&&h},[]).join(" ");return'<style type="text/css" data-primevue-style-id="'.concat(this.name,'" ').concat(l,">").concat(o,"</style>")}return""},getCommonThemeStyleSheet:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return fs.getCommonStyleSheet(this.name,e,n)},getThemeStyleSheet:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=[fs.getStyleSheet(this.name,e,n)];if(this.theme){var o=this.name==="base"?"global-style":"".concat(this.name,"-style"),l=rf(this.theme,{dt:b2}),h=Nv(fs.transformCSS(o,l)),p=Object.entries(n).reduce(function(i,b){var E=qO(b,2),I=E[0],O=E[1];return i.push("".concat(I,'="').concat(O,'"'))&&i},[]).join(" ");r.push('<style type="text/css" data-primevue-style-id="'.concat(o,'" ').concat(p,">").concat(h,"</style>"))}return r.join("")},extend:function(e){return x2(x2({},this),{},{css:void 0,theme:void 0},e)}},Hy=I4(),Nw={};function ple(t="pui_id_"){return Nw.hasOwnProperty(t)||(Nw[t]=0),Nw[t]++,`${t}${Nw[t]}`}function mle(){let t=[];const e=(h,p,i=999)=>{const b=o(h,p,i),E=b.value+(b.key===h?0:i)+1;return t.push({key:h,value:E}),E},n=h=>{t=t.filter(p=>p.value!==h)},r=(h,p)=>o(h).value,o=(h,p,i=0)=>[...t].reverse().find(b=>!0)||{key:h,value:i},l=h=>h&&parseInt(h.style.zIndex,10)||0;return{get:l,set:(h,p,i)=>{p&&(p.style.zIndex=String(e(h,!0,i)))},clear:h=>{h&&(n(l(h)),h.style.zIndex="")},getCurrent:h=>r(h)}}var Jy=mle();function a1(t){"@babel/helpers - typeof";return a1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a1(t)}function ZO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function C2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZO(Object(n),!0).forEach(function(r){gle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gle(t,e,n){return(e=yle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yle(t){var e=_le(t,"string");return a1(e)=="symbol"?e:e+""}function _le(t,e){if(a1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(a1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vle={ripple:!1,inputStyle:null,inputVariant:null,locale:{startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",completed:"Completed",pending:"Pending",fileSizeTypes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],chooseYear:"Choose Year",chooseMonth:"Choose Month",chooseDate:"Choose Date",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",prevHour:"Previous Hour",nextHour:"Next Hour",prevMinute:"Previous Minute",nextMinute:"Next Minute",prevSecond:"Previous Second",nextSecond:"Next Second",am:"am",pm:"pm",today:"Today",weekHeader:"Wk",firstDayOfWeek:0,showMonthAfterYear:!1,dateFormat:"mm/dd/yy",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyFilterMessage:"No results found",searchMessage:"{0} results are available",selectionMessage:"{0} items selected",emptySelectionMessage:"No selected item",emptySearchMessage:"No results found",fileChosenMessage:"{0} files",noFileChosenMessage:"No file chosen",emptyMessage:"No available options",aria:{trueLabel:"True",falseLabel:"False",nullLabel:"Not Selected",star:"1 star",stars:"{star} stars",selectAll:"All items selected",unselectAll:"All items unselected",close:"Close",previous:"Previous",next:"Next",navigation:"Navigation",scrollTop:"Scroll Top",moveTop:"Move Top",moveUp:"Move Up",moveDown:"Move Down",moveBottom:"Move Bottom",moveToTarget:"Move to Target",moveToSource:"Move to Source",moveAllToTarget:"Move All to Target",moveAllToSource:"Move All to Source",pageLabel:"Page {page}",firstPageLabel:"First Page",lastPageLabel:"Last Page",nextPageLabel:"Next Page",prevPageLabel:"Previous Page",rowsPerPageLabel:"Rows per page",jumpToPageDropdownLabel:"Jump to Page Dropdown",jumpToPageInputLabel:"Jump to Page Input",selectRow:"Row Selected",unselectRow:"Row Unselected",expandRow:"Row Expanded",collapseRow:"Row Collapsed",showFilterMenu:"Show Filter Menu",hideFilterMenu:"Hide Filter Menu",filterOperator:"Filter Operator",filterConstraint:"Filter Constraint",editRow:"Row Edit",saveEdit:"Save Edit",cancelEdit:"Cancel Edit",listView:"List View",gridView:"Grid View",slide:"Slide",slideNumber:"{slideNumber}",zoomImage:"Zoom Image",zoomIn:"Zoom In",zoomOut:"Zoom Out",rotateRight:"Rotate Right",rotateLeft:"Rotate Left",listLabel:"Option List"}},filterMatchModeOptions:{text:[pl.STARTS_WITH,pl.CONTAINS,pl.NOT_CONTAINS,pl.ENDS_WITH,pl.EQUALS,pl.NOT_EQUALS],numeric:[pl.EQUALS,pl.NOT_EQUALS,pl.LESS_THAN,pl.LESS_THAN_OR_EQUAL_TO,pl.GREATER_THAN,pl.GREATER_THAN_OR_EQUAL_TO],date:[pl.DATE_IS,pl.DATE_IS_NOT,pl.DATE_BEFORE,pl.DATE_AFTER]},zIndex:{modal:1100,overlay:1e3,menu:1e3,tooltip:1100},theme:void 0,unstyled:!1,pt:void 0,ptOptions:{mergeSections:!0,mergeProps:!1},csp:{nonce:void 0}},ble=Symbol();function wle(t,e){var n={config:pu(e)};return t.config.globalProperties.$primevue=n,t.provide(ble,n),xle(),Cle(t,n),n}var jy=[];function xle(){cd.clear(),jy.forEach(function(t){return t==null?void 0:t()}),jy=[]}function Cle(t,e){var n=yr(!1),r=function(){if(!fs.isStyleNameLoaded("common")){var b,E,I=((b=Uo.getCommonTheme)===null||b===void 0?void 0:b.call(Uo))||{},O=I.primitive,M=I.semantic,G={nonce:(E=e.config)===null||E===void 0||(E=E.csp)===null||E===void 0?void 0:E.nonce};Uo.load(O==null?void 0:O.css,C2({name:"primitive-variables"},G)),Uo.load(M==null?void 0:M.css,C2({name:"semantic-variables"},G)),Uo.loadTheme(C2({name:"global-style"},G)),fs.setLoadedStyleName("common")}};cd.on("theme:change",function(i){n.value||(t.config.globalProperties.$primevue.config.theme=i,n.value=!0)});var o=Do(e.config,function(i,b){Hy.emit("config:change",{newValue:i,oldValue:b})},{immediate:!0,deep:!0}),l=Do(function(){return e.config.ripple},function(i,b){Hy.emit("config:ripple:change",{newValue:i,oldValue:b})},{immediate:!0,deep:!0}),h=Do(function(){return e.config.theme},function(i,b){n.value||fs.setTheme(i),e.config.unstyled||r(),n.value=!1,Hy.emit("config:theme:change",{newValue:i,oldValue:b})},{immediate:!0,deep:!0}),p=Do(function(){return e.config.unstyled},function(i,b){!i&&e.config.theme&&r(),Hy.emit("config:unstyled:change",{newValue:i,oldValue:b})},{immediate:!0,deep:!0});jy.push(o),jy.push(l),jy.push(h),jy.push(p)}var Ele={install:function(e,n){var r=Pae(vle,n);wle(e,r)}};function l1(t){"@babel/helpers - typeof";return l1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l1(t)}function Ble(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sle(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ile(r.key),r)}}function Tle(t,e,n){return e&&Sle(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ile(t){var e=Ple(t,"string");return l1(e)=="symbol"?e:e+""}function Ple(t,e){if(l1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(l1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var P7=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};Ble(this,t),this.element=e,this.listener=n}return Tle(t,[{key:"bindScrollListener",value:function(){this.scrollableParents=Wae(this.element);for(var n=0;n<this.scrollableParents.length;n++)this.scrollableParents[n].addEventListener("scroll",this.listener)}},{key:"unbindScrollListener",value:function(){if(this.scrollableParents)for(var n=0;n<this.scrollableParents.length;n++)this.scrollableParents[n].removeEventListener("scroll",this.listener)}},{key:"destroy",value:function(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}])}();function c1(t){"@babel/helpers - typeof";return c1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c1(t)}function Lle(t){return Mle(t)||kle(t)||Rle(t)||Fle()}function Fle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rle(t,e){if(t){if(typeof t=="string")return sI(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sI(t,e):void 0}}function kle(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Mle(t){if(Array.isArray(t))return sI(t)}function sI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Ole(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Dle(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,L7(r.key),r)}}function Ule(t,e,n){return e&&Dle(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function YO(t,e,n){return(e=L7(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function L7(t){var e=Nle(t,"string");return c1(e)=="symbol"?e:e+""}function Nle(t,e){if(c1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(c1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var E_=function(){function t(e){var n=e.init,r=e.type;Ole(this,t),YO(this,"helpers",void 0),YO(this,"type",void 0),this.helpers=new Set(n),this.type=r}return Ule(t,[{key:"add",value:function(n){this.helpers.add(n)}},{key:"update",value:function(){}},{key:"delete",value:function(n){this.helpers.delete(n)}},{key:"clear",value:function(){this.helpers.clear()}},{key:"get",value:function(n,r){var o=this._get(n,r),l=o?this._recursive(Lle(this.helpers),o):null;return Lo(l)?l:null}},{key:"_isMatched",value:function(n,r){var o,l=n==null?void 0:n.parent;return(l==null||(o=l.vnode)===null||o===void 0?void 0:o.key)===r||l&&this._isMatched(l,r)||!1}},{key:"_get",value:function(n,r){var o,l;return((o=r||(n==null?void 0:n.$slots))===null||o===void 0||(l=o.default)===null||l===void 0?void 0:l.call(o))||null}},{key:"_recursive",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],l=[];return o.forEach(function(h){h.children instanceof Array?l=l.concat(n._recursive(l,h.children)):h.type.name===n.type?l.push(h):Lo(h.key)&&(l=l.concat(r.filter(function(p){return n._isMatched(p,h.key)}).map(function(p){return p.vnode})))}),l}}])}();function Af(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"pv_id_";return ple(t)}function Rg(t,e){if(t){var n=t.props;if(n){var r=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),o=Object.prototype.hasOwnProperty.call(n,r)?r:e;return t.type.extends.props[e].type===Boolean&&n[o]===""?!0:n[o]}}return null}var Tp={_loadedStyleNames:new Set,getLoadedStyleNames:function(){return this._loadedStyleNames},isStyleNameLoaded:function(e){return this._loadedStyleNames.has(e)},setLoadedStyleName:function(e){this._loadedStyleNames.add(e)},deleteLoadedStyleName:function(e){this._loadedStyleNames.delete(e)},clearLoadedStyleNames:function(){this._loadedStyleNames.clear()}},JO=Uo.extend({name:"common"});function u1(t){"@babel/helpers - typeof";return u1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u1(t)}function zle(t){return k7(t)||Vle(t)||R7(t)||F7()}function Vle(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function zw(t,e){return k7(t)||Qle(t,e)||R7(t,e)||F7()}function F7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R7(t,e){if(t){if(typeof t=="string")return eD(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eD(t,e):void 0}}function eD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Qle(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,l,h,p=[],i=!0,b=!1;try{if(l=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=l.call(n)).done)&&(p.push(r.value),p.length!==e);i=!0);}catch(E){b=!0,o=E}finally{try{if(!i&&n.return!=null&&(h=n.return(),Object(h)!==h))return}finally{if(b)throw o}}return p}}function k7(t){if(Array.isArray(t))return t}function tD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Io(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tD(Object(n),!0).forEach(function(r){Ux(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ux(t,e,n){return(e=Hle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hle(t){var e=jle(t,"string");return u1(e)=="symbol"?e:e+""}function jle(t,e){if(u1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(u1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ro={name:"BaseComponent",props:{pt:{type:Object,default:void 0},ptOptions:{type:Object,default:void 0},unstyled:{type:Boolean,default:void 0},dt:{type:Object,default:void 0}},inject:{$parentInstance:{default:void 0}},watch:{isUnstyled:{immediate:!0,handler:function(e){e||(this._loadCoreStyles(),this._themeChangeListener(this._loadCoreStyles))}},dt:{immediate:!0,handler:function(e){var n=this;e?(this._loadScopedThemeStyles(e),this._themeChangeListener(function(){return n._loadScopedThemeStyles(e)})):this._unloadScopedThemeStyles()}}},scopedStyleEl:void 0,rootEl:void 0,beforeCreate:function(){var e,n,r,o,l,h,p,i,b,E,I,O=(e=this.pt)===null||e===void 0?void 0:e._usept,M=O?(n=this.pt)===null||n===void 0||(n=n.originalValue)===null||n===void 0?void 0:n[this.$.type.name]:void 0,G=O?(r=this.pt)===null||r===void 0||(r=r.value)===null||r===void 0?void 0:r[this.$.type.name]:this.pt;(o=G||M)===null||o===void 0||(o=o.hooks)===null||o===void 0||(l=o.onBeforeCreate)===null||l===void 0||l.call(o);var q=(h=this.$primevueConfig)===null||h===void 0||(h=h.pt)===null||h===void 0?void 0:h._usept,Z=q?(p=this.$primevue)===null||p===void 0||(p=p.config)===null||p===void 0||(p=p.pt)===null||p===void 0?void 0:p.originalValue:void 0,Y=q?(i=this.$primevue)===null||i===void 0||(i=i.config)===null||i===void 0||(i=i.pt)===null||i===void 0?void 0:i.value:(b=this.$primevue)===null||b===void 0||(b=b.config)===null||b===void 0?void 0:b.pt;(E=Y||Z)===null||E===void 0||(E=E[this.$.type.name])===null||E===void 0||(E=E.hooks)===null||E===void 0||(I=E.onBeforeCreate)===null||I===void 0||I.call(E)},created:function(){this._hook("onCreated")},beforeMount:function(){this._loadStyles(),this._hook("onBeforeMount")},mounted:function(){this.rootEl=kp(this.$el,'[data-pc-name="'.concat(ud(this.$.type.name),'"]')),this.rootEl&&(this.rootEl.setAttribute(this.$attrSelector,""),this.rootEl.$pc=Io({name:this.$.type.name},this.$params)),this._hook("onMounted")},beforeUpdate:function(){this._hook("onBeforeUpdate")},updated:function(){this._hook("onUpdated")},beforeUnmount:function(){this._hook("onBeforeUnmount")},unmounted:function(){this._unloadScopedThemeStyles(),this._hook("onUnmounted")},methods:{_hook:function(e){if(!this.$options.hostName){var n=this._usePT(this._getPT(this.pt,this.$.type.name),this._getOptionValue,"hooks.".concat(e)),r=this._useDefaultPT(this._getOptionValue,"hooks.".concat(e));n==null||n(),r==null||r()}},_mergeProps:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return DE(e)?e.apply(void 0,r):It.apply(void 0,r)},_loadStyles:function(){var e=this,n=function(){Tp.isStyleNameLoaded("base")||(Uo.loadCSS(e.$styleOptions),e._loadGlobalStyles(),Tp.setLoadedStyleName("base")),e._loadThemeStyles()};n(),this._themeChangeListener(n)},_loadCoreStyles:function(){var e,n;!Tp.isStyleNameLoaded((e=this.$style)===null||e===void 0?void 0:e.name)&&(n=this.$style)!==null&&n!==void 0&&n.name&&(JO.loadCSS(this.$styleOptions),this.$options.style&&this.$style.loadCSS(this.$styleOptions),Tp.setLoadedStyleName(this.$style.name))},_loadGlobalStyles:function(){var e=this._useGlobalPT(this._getOptionValue,"global.css",this.$params);Lo(e)&&Uo.load(e,Io({name:"global"},this.$styleOptions))},_loadThemeStyles:function(){var e,n;if(!this.isUnstyled){if(!fs.isStyleNameLoaded("common")){var r,o,l=((r=this.$style)===null||r===void 0||(o=r.getCommonTheme)===null||o===void 0?void 0:o.call(r))||{},h=l.primitive,p=l.semantic;Uo.load(h==null?void 0:h.css,Io({name:"primitive-variables"},this.$styleOptions)),Uo.load(p==null?void 0:p.css,Io({name:"semantic-variables"},this.$styleOptions)),Uo.loadTheme(Io({name:"global-style"},this.$styleOptions)),fs.setLoadedStyleName("common")}if(!fs.isStyleNameLoaded((e=this.$style)===null||e===void 0?void 0:e.name)&&(n=this.$style)!==null&&n!==void 0&&n.name){var i,b,E,I,O=((i=this.$style)===null||i===void 0||(b=i.getComponentTheme)===null||b===void 0?void 0:b.call(i))||{},M=O.css;(E=this.$style)===null||E===void 0||E.load(M,Io({name:"".concat(this.$style.name,"-variables")},this.$styleOptions)),(I=this.$style)===null||I===void 0||I.loadTheme(Io({name:"".concat(this.$style.name,"-style")},this.$styleOptions)),fs.setLoadedStyleName(this.$style.name)}if(!fs.isStyleNameLoaded("layer-order")){var G,q,Z=(G=this.$style)===null||G===void 0||(q=G.getLayerOrderThemeCSS)===null||q===void 0?void 0:q.call(G);Uo.load(Z,Io({name:"layer-order",first:!0},this.$styleOptions)),fs.setLoadedStyleName("layer-order")}}},_loadScopedThemeStyles:function(e){var n,r,o,l=((n=this.$style)===null||n===void 0||(r=n.getPresetTheme)===null||r===void 0?void 0:r.call(n,e,"[".concat(this.$attrSelector,"]")))||{},h=l.css,p=(o=this.$style)===null||o===void 0?void 0:o.load(h,Io({name:"".concat(this.$attrSelector,"-").concat(this.$style.name)},this.$styleOptions));this.scopedStyleEl=p.el},_unloadScopedThemeStyles:function(){var e;(e=this.scopedStyleEl)===null||e===void 0||(e=e.value)===null||e===void 0||e.remove()},_themeChangeListener:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};Tp.clearLoadedStyleNames(),cd.on("theme:change",e)},_getHostInstance:function(e){return e?this.$options.hostName?e.$.type.name===this.$options.hostName?e:this._getHostInstance(e.$parentInstance):e.$parentInstance:void 0},_getPropValue:function(e){var n;return this[e]||((n=this._getHostInstance(this))===null||n===void 0?void 0:n[e])},_getOptionValue:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return S4(e,n,r)},_getPTValue:function(){var e,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,h=/./g.test(r)&&!!o[r.split(".")[0]],p=this._getPropValue("ptOptions")||((e=this.$primevueConfig)===null||e===void 0?void 0:e.ptOptions)||{},i=p.mergeSections,b=i===void 0?!0:i,E=p.mergeProps,I=E===void 0?!1:E,O=l?h?this._useGlobalPT(this._getPTClassValue,r,o):this._useDefaultPT(this._getPTClassValue,r,o):void 0,M=h?void 0:this._getPTSelf(n,this._getPTClassValue,r,Io(Io({},o),{},{global:O||{}})),G=this._getPTDatasets(r);return b||!b&&M?I?this._mergeProps(I,O,M,G):Io(Io(Io({},O),M),G):Io(Io({},M),G)},_getPTSelf:function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return It(this._usePT.apply(this,[this._getPT(e,this.$name)].concat(r)),this._usePT.apply(this,[this.$_attrsPT].concat(r)))},_getPTDatasets:function(){var e,n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",o="data-pc-",l=r==="root"&&Lo((e=this.pt)===null||e===void 0?void 0:e["data-pc-section"]);return r!=="transition"&&Io(Io({},r==="root"&&Io(Ux({},"".concat(o,"name"),ud(l?(n=this.pt)===null||n===void 0?void 0:n["data-pc-section"]:this.$.type.name)),l&&Ux({},"".concat(o,"extend"),ud(this.$.type.name)))),{},Ux({},"".concat(o,"section"),ud(r)))},_getPTClassValue:function(){var e=this._getOptionValue.apply(this,arguments);return hu(e)||T4(e)?{class:e}:e},_getPT:function(e){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",o=arguments.length>2?arguments[2]:void 0,l=function(p){var i,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,E=o?o(p):p,I=ud(r),O=ud(n.$name);return(i=b?I!==O?E==null?void 0:E[I]:void 0:E==null?void 0:E[I])!==null&&i!==void 0?i:E};return e!=null&&e.hasOwnProperty("_usept")?{_usept:e._usept,originalValue:l(e.originalValue),value:l(e.value)}:l(e,!0)},_usePT:function(e,n,r,o){var l=function(q){return n(q,r,o)};if(e!=null&&e.hasOwnProperty("_usept")){var h,p=e._usept||((h=this.$primevueConfig)===null||h===void 0?void 0:h.ptOptions)||{},i=p.mergeSections,b=i===void 0?!0:i,E=p.mergeProps,I=E===void 0?!1:E,O=l(e.originalValue),M=l(e.value);return O===void 0&&M===void 0?void 0:hu(M)?M:hu(O)?O:b||!b&&M?I?this._mergeProps(I,O,M):Io(Io({},O),M):M}return l(e)},_useGlobalPT:function(e,n,r){return this._usePT(this.globalPT,e,n,r)},_useDefaultPT:function(e,n,r){return this._usePT(this.defaultPT,e,n,r)},ptm:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this._getPTValue(this.pt,e,Io(Io({},this.$params),n))},ptmi:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return It(this.$_attrsWithoutPT,this.ptm(e,n))},ptmo:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._getPTValue(e,n,Io({instance:this},r),!1)},cx:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.isUnstyled?void 0:this._getOptionValue(this.$style.classes,e,Io(Io({},this.$params),n))},sx:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(n){var o=this._getOptionValue(this.$style.inlineStyles,e,Io(Io({},this.$params),r)),l=this._getOptionValue(JO.inlineStyles,e,Io(Io({},this.$params),r));return[l,o]}}},computed:{globalPT:function(){var e,n=this;return this._getPT((e=this.$primevueConfig)===null||e===void 0?void 0:e.pt,void 0,function(r){return rf(r,{instance:n})})},defaultPT:function(){var e,n=this;return this._getPT((e=this.$primevueConfig)===null||e===void 0?void 0:e.pt,void 0,function(r){return n._getOptionValue(r,n.$name,Io({},n.$params))||rf(r,Io({},n.$params))})},isUnstyled:function(){var e;return this.unstyled!==void 0?this.unstyled:(e=this.$primevueConfig)===null||e===void 0?void 0:e.unstyled},$theme:function(){var e;return(e=this.$primevueConfig)===null||e===void 0?void 0:e.theme},$style:function(){return Io(Io({classes:void 0,inlineStyles:void 0,load:function(){},loadCSS:function(){},loadTheme:function(){}},(this._getHostInstance(this)||{}).$style),this.$options.style)},$styleOptions:function(){var e;return{nonce:(e=this.$primevueConfig)===null||e===void 0||(e=e.csp)===null||e===void 0?void 0:e.nonce}},$primevueConfig:function(){var e;return(e=this.$primevue)===null||e===void 0?void 0:e.config},$name:function(){return this.$options.hostName||this.$.type.name},$params:function(){var e=this._getHostInstance(this)||this.$parent;return{instance:this,props:this.$props,state:this.$data,attrs:this.$attrs,parent:{instance:e,props:e==null?void 0:e.$props,state:e==null?void 0:e.$data,attrs:e==null?void 0:e.$attrs}}},$_attrsPT:function(){return Object.entries(this.$attrs||{}).filter(function(e){var n=zw(e,1),r=n[0];return r==null?void 0:r.startsWith("pt:")}).reduce(function(e,n){var r=zw(n,2),o=r[0],l=r[1],h=o.split(":"),p=zle(h),i=p.slice(1);return i==null||i.reduce(function(b,E,I,O){return!b[E]&&(b[E]=I===O.length-1?l:{}),b[E]},e),e},{})},$_attrsWithoutPT:function(){return Object.entries(this.$attrs||{}).filter(function(e){var n=zw(e,1),r=n[0];return!(r!=null&&r.startsWith("pt:"))}).reduce(function(e,n){var r=zw(n,2),o=r[0],l=r[1];return e[o]=l,e},{})},$attrSelector:function(){return Af("pc")}}},$le=`
.p-icon {
    display: inline-block;
    vertical-align: baseline;
}

.p-icon-spin {
    -webkit-animation: p-icon-spin 2s infinite linear;
    animation: p-icon-spin 2s infinite linear;
}

@-webkit-keyframes p-icon-spin {
    0% {
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
    }
    100% {
        -webkit-transform: rotate(359deg);
        transform: rotate(359deg);
    }
}

@keyframes p-icon-spin {
    0% {
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
    }
    100% {
        -webkit-transform: rotate(359deg);
        transform: rotate(359deg);
    }
}
`,Gle=Uo.extend({name:"baseicon",css:$le});function h1(t){"@babel/helpers - typeof";return h1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h1(t)}function nD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function rD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nD(Object(n),!0).forEach(function(r){Kle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Kle(t,e,n){return(e=qle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qle(t){var e=Wle(t,"string");return h1(e)=="symbol"?e:e+""}function Wle(t,e){if(h1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(h1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Us={name:"BaseIcon",extends:Ro,props:{label:{type:String,default:void 0},spin:{type:Boolean,default:!1}},style:Gle,provide:function(){return{$pcIcon:this,$parentInstance:this}},methods:{pti:function(){var e=mu(this.label);return rD(rD({},!this.isUnstyled&&{class:["p-icon",{"p-icon-spin":this.spin}]}),{},{role:e?void 0:"img","aria-label":e?void 0:this.label,"aria-hidden":e})}}},M7={name:"ArrowDownIcon",extends:Us},Xle=mt("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.99994 14C6.91097 14.0004 6.82281 13.983 6.74064 13.9489C6.65843 13.9148 6.58387 13.8646 6.52133 13.8013L1.10198 8.38193C0.982318 8.25351 0.917175 8.08367 0.920272 7.90817C0.923368 7.73267 0.994462 7.56523 1.11858 7.44111C1.24269 7.317 1.41014 7.2459 1.58563 7.2428C1.76113 7.23971 1.93098 7.30485 2.0594 7.42451L6.32263 11.6877V0.677419C6.32263 0.497756 6.394 0.325452 6.52104 0.198411C6.64808 0.0713706 6.82039 0 7.00005 0C7.17971 0 7.35202 0.0713706 7.47906 0.198411C7.6061 0.325452 7.67747 0.497756 7.67747 0.677419V11.6877L11.9407 7.42451C12.0691 7.30485 12.2389 7.23971 12.4144 7.2428C12.5899 7.2459 12.7574 7.317 12.8815 7.44111C13.0056 7.56523 13.0767 7.73267 13.0798 7.90817C13.0829 8.08367 13.0178 8.25351 12.8981 8.38193L7.47875 13.8013C7.41621 13.8646 7.34164 13.9148 7.25944 13.9489C7.17727 13.983 7.08912 14.0004 7.00015 14C7.00012 14 7.00009 14 7.00005 14C7.00001 14 6.99998 14 6.99994 14Z",fill:"currentColor"},null,-1),Zle=[Xle];function Yle(t,e,n,r,o,l){return ve(),et("svg",It({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),Zle,16)}M7.render=Yle;var O7={name:"ArrowUpIcon",extends:Us},Jle=mt("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.51551 13.799C6.64205 13.9255 6.813 13.9977 6.99193 14C7.17087 13.9977 7.34182 13.9255 7.46835 13.799C7.59489 13.6725 7.66701 13.5015 7.66935 13.3226V2.31233L11.9326 6.57554C11.9951 6.63887 12.0697 6.68907 12.1519 6.72319C12.2341 6.75731 12.3223 6.77467 12.4113 6.77425C12.5003 6.77467 12.5885 6.75731 12.6707 6.72319C12.7529 6.68907 12.8274 6.63887 12.89 6.57554C13.0168 6.44853 13.0881 6.27635 13.0881 6.09683C13.0881 5.91732 13.0168 5.74514 12.89 5.61812L7.48846 0.216594C7.48274 0.210436 7.4769 0.204374 7.47094 0.198411C7.3439 0.0713707 7.1716 0 6.99193 0C6.81227 0 6.63997 0.0713707 6.51293 0.198411C6.50704 0.204296 6.50128 0.210278 6.49563 0.216354L1.09386 5.61812C0.974201 5.74654 0.909057 5.91639 0.912154 6.09189C0.91525 6.26738 0.986345 6.43483 1.11046 6.55894C1.23457 6.68306 1.40202 6.75415 1.57752 6.75725C1.75302 6.76035 1.92286 6.6952 2.05128 6.57554L6.31451 2.31231V13.3226C6.31685 13.5015 6.38898 13.6725 6.51551 13.799Z",fill:"currentColor"},null,-1),ece=[Jle];function tce(t,e,n,r,o,l){return ve(),et("svg",It({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),ece,16)}O7.render=tce;var rb={name:"SpinnerIcon",extends:Us},nce=mt("path",{d:"M6.99701 14C5.85441 13.999 4.72939 13.7186 3.72012 13.1832C2.71084 12.6478 1.84795 11.8737 1.20673 10.9284C0.565504 9.98305 0.165424 8.89526 0.041387 7.75989C-0.0826496 6.62453 0.073125 5.47607 0.495122 4.4147C0.917119 3.35333 1.59252 2.4113 2.46241 1.67077C3.33229 0.930247 4.37024 0.413729 5.4857 0.166275C6.60117 -0.0811796 7.76026 -0.0520535 8.86188 0.251112C9.9635 0.554278 10.9742 1.12227 11.8057 1.90555C11.915 2.01493 11.9764 2.16319 11.9764 2.31778C11.9764 2.47236 11.915 2.62062 11.8057 2.73C11.7521 2.78503 11.688 2.82877 11.6171 2.85864C11.5463 2.8885 11.4702 2.90389 11.3933 2.90389C11.3165 2.90389 11.2404 2.8885 11.1695 2.85864C11.0987 2.82877 11.0346 2.78503 10.9809 2.73C9.9998 1.81273 8.73246 1.26138 7.39226 1.16876C6.05206 1.07615 4.72086 1.44794 3.62279 2.22152C2.52471 2.99511 1.72683 4.12325 1.36345 5.41602C1.00008 6.70879 1.09342 8.08723 1.62775 9.31926C2.16209 10.5513 3.10478 11.5617 4.29713 12.1803C5.48947 12.7989 6.85865 12.988 8.17414 12.7157C9.48963 12.4435 10.6711 11.7264 11.5196 10.6854C12.3681 9.64432 12.8319 8.34282 12.8328 7C12.8328 6.84529 12.8943 6.69692 13.0038 6.58752C13.1132 6.47812 13.2616 6.41667 13.4164 6.41667C13.5712 6.41667 13.7196 6.47812 13.8291 6.58752C13.9385 6.69692 14 6.84529 14 7C14 8.85651 13.2622 10.637 11.9489 11.9497C10.6356 13.2625 8.85432 14 6.99701 14Z",fill:"currentColor"},null,-1),rce=[nce];function ice(t,e,n,r,o,l){return ve(),et("svg",It({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),rce,16)}rb.render=ice;function d1(t){"@babel/helpers - typeof";return d1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d1(t)}function oce(t,e,n){return(e=sce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sce(t){var e=ace(t,"string");return d1(e)=="symbol"?e:e+""}function ace(t,e){if(d1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(d1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lce=function(e){var n=e.dt;return`
.p-paginator {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-wrap: wrap;
    background: `.concat(n("paginator.background"),`;
    color: `).concat(n("paginator.color"),`;
    padding: `).concat(n("paginator.padding"),`;
    border-radius: `).concat(n("paginator.border.radius"),`;
    gap: `).concat(n("paginator.gap"),`;
}

.p-paginator-content {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-wrap: wrap;
    gap: `).concat(n("paginator.gap"),`;
}

.p-paginator-content-start {
    margin-right: auto;
}

.p-paginator-content-end {
    margin-left: auto;
}

.p-paginator-page,
.p-paginator-next,
.p-paginator-last,
.p-paginator-first,
.p-paginator-prev {
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
    user-select: none;
    overflow: hidden;
    position: relative;
    background: `).concat(n("paginator.nav.button.background"),`;
    border: 0 none;
    color: `).concat(n("paginator.nav.button.color"),`;
    min-width: `).concat(n("paginator.nav.button.width"),`;
    height: `).concat(n("paginator.nav.button.height"),`;
    transition: background `).concat(n("paginator.transition.duration"),", color ").concat(n("paginator.transition.duration"),", outline-color ").concat(n("paginator.transition.duration"),", box-shadow ").concat(n("paginator.transition.duration"),`;
    border-radius: `).concat(n("paginator.nav.button.border.radius"),`;
    padding: 0;
    margin: 0;
}

.p-paginator-page:focus-visible,
.p-paginator-next:focus-visible,
.p-paginator-last:focus-visible,
.p-paginator-first:focus-visible,
.p-paginator-prev:focus-visible {
    box-shadow: `).concat(n("paginator.nav.button.focus.ring.shadow"),`;
    outline: `).concat(n("paginator.nav.button.focus.ring.width")," ").concat(n("paginator.nav.button.focus.ring.style")," ").concat(n("paginator.nav.button.focus.ring.color"),`;
    outline-offset: `).concat(n("paginator.nav.button.focus.ring.offset"),`;
}

.p-paginator-page:not(.p-disabled):not(.p-paginator-page-selected):hover,
.p-paginator-first:not(.p-disabled):hover,
.p-paginator-prev:not(.p-disabled):hover,
.p-paginator-next:not(.p-disabled):hover,
.p-paginator-last:not(.p-disabled):hover {
    background: `).concat(n("paginator.nav.button.hover.background"),`;
    color: `).concat(n("paginator.nav.button.hover.color"),`;
}

.p-paginator-page.p-paginator-page-selected {
    background: `).concat(n("paginator.nav.button.selected.background"),`;
    color: `).concat(n("paginator.nav.button.selected.color"),`;
}

.p-paginator-current {
    color: `).concat(n("paginator.current.page.report.color"),`;
}

.p-paginator-pages {
    display: flex;
    align-items: center;
    gap: `).concat(n("paginator.gap"),`;
}

.p-paginator-jtp-input .p-inputtext {
    max-width: `).concat(n("paginator.jump.to.page.input.max.width"),`;
}
`)},cce={paginator:function(e){var n=e.instance,r=e.key;return["p-paginator p-component",oce({"p-paginator-default":!n.hasBreakpoints()},"p-paginator-".concat(r),n.hasBreakpoints())]},content:"p-paginator-content",contentStart:"p-paginator-content-start",contentEnd:"p-paginator-content-end",first:function(e){var n=e.instance;return["p-paginator-first",{"p-disabled":n.$attrs.disabled}]},firstIcon:"p-paginator-first-icon",prev:function(e){var n=e.instance;return["p-paginator-prev",{"p-disabled":n.$attrs.disabled}]},prevIcon:"p-paginator-prev-icon",next:function(e){var n=e.instance;return["p-paginator-next",{"p-disabled":n.$attrs.disabled}]},nextIcon:"p-paginator-next-icon",last:function(e){var n=e.instance;return["p-paginator-last",{"p-disabled":n.$attrs.disabled}]},lastIcon:"p-paginator-last-icon",pages:"p-paginator-pages",page:function(e){var n=e.props,r=e.pageLink;return["p-paginator-page",{"p-paginator-page-selected":r-1===n.page}]},current:"p-paginator-current",pcRowPerPageDropdown:"p-paginator-rpp-dropdown",pcJumpToPageDropdown:"p-paginator-jtp-dropdown",pcJumpToPageInput:"p-paginator-jtp-input"},uce=Uo.extend({name:"paginator",theme:lce,classes:cce}),D7={name:"AngleDoubleLeftIcon",extends:Us},hce=mt("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.71602 11.164C5.80782 11.2021 5.9063 11.2215 6.00569 11.221C6.20216 11.2301 6.39427 11.1612 6.54025 11.0294C6.68191 10.8875 6.76148 10.6953 6.76148 10.4948C6.76148 10.2943 6.68191 10.1021 6.54025 9.96024L3.51441 6.9344L6.54025 3.90855C6.624 3.76126 6.65587 3.59011 6.63076 3.42254C6.60564 3.25498 6.525 3.10069 6.40175 2.98442C6.2785 2.86815 6.11978 2.79662 5.95104 2.7813C5.78229 2.76598 5.61329 2.80776 5.47112 2.89994L1.97123 6.39983C1.82957 6.54167 1.75 6.73393 1.75 6.9344C1.75 7.13486 1.82957 7.32712 1.97123 7.46896L5.47112 10.9991C5.54096 11.0698 5.62422 11.1259 5.71602 11.164ZM11.0488 10.9689C11.1775 11.1156 11.3585 11.2061 11.5531 11.221C11.7477 11.2061 11.9288 11.1156 12.0574 10.9689C12.1815 10.8302 12.25 10.6506 12.25 10.4645C12.25 10.2785 12.1815 10.0989 12.0574 9.96024L9.03158 6.93439L12.0574 3.90855C12.1248 3.76739 12.1468 3.60881 12.1204 3.45463C12.0939 3.30045 12.0203 3.15826 11.9097 3.04765C11.7991 2.93703 11.6569 2.86343 11.5027 2.83698C11.3486 2.81053 11.19 2.83252 11.0488 2.89994L7.51865 6.36957C7.37699 6.51141 7.29742 6.70367 7.29742 6.90414C7.29742 7.1046 7.37699 7.29686 7.51865 7.4387L11.0488 10.9689Z",fill:"currentColor"},null,-1),dce=[hce];function fce(t,e,n,r,o,l){return ve(),et("svg",It({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),dce,16)}D7.render=fce;function f1(t){"@babel/helpers - typeof";return f1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f1(t)}function iD(t,e){return gce(t)||mce(t,e)||pce(t,e)||Ace()}function Ace(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pce(t,e){if(t){if(typeof t=="string")return oD(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oD(t,e):void 0}}function oD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function mce(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,l,h,p=[],i=!0,b=!1;try{if(l=(n=n.call(t)).next,e!==0)for(;!(i=(r=l.call(n)).done)&&(p.push(r.value),p.length!==e);i=!0);}catch(E){b=!0,o=E}finally{try{if(!i&&n.return!=null&&(h=n.return(),Object(h)!==h))return}finally{if(b)throw o}}return p}}function gce(t){if(Array.isArray(t))return t}function sD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Vo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sD(Object(n),!0).forEach(function(r){aI(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aI(t,e,n){return(e=yce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yce(t){var e=_ce(t,"string");return f1(e)=="symbol"?e:e+""}function _ce(t,e){if(f1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(f1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qi={_getMeta:function(){return[ff(arguments.length<=0?void 0:arguments[0])||arguments.length<=0?void 0:arguments[0],rf(ff(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:arguments.length<=1?void 0:arguments[1])]},_getConfig:function(e,n){var r,o,l;return(r=(e==null||(o=e.instance)===null||o===void 0?void 0:o.$primevue)||(n==null||(l=n.ctx)===null||l===void 0||(l=l.appContext)===null||l===void 0||(l=l.config)===null||l===void 0||(l=l.globalProperties)===null||l===void 0?void 0:l.$primevue))===null||r===void 0?void 0:r.config},_getOptionValue:S4,_getPTValue:function(){var e,n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},p=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=function(){var te=qi._getOptionValue.apply(qi,arguments);return hu(te)||T4(te)?{class:te}:te},b=((e=r.binding)===null||e===void 0||(e=e.value)===null||e===void 0?void 0:e.ptOptions)||((n=r.$primevueConfig)===null||n===void 0?void 0:n.ptOptions)||{},E=b.mergeSections,I=E===void 0?!0:E,O=b.mergeProps,M=O===void 0?!1:O,G=p?qi._useDefaultPT(r,r.defaultPT(),i,l,h):void 0,q=qi._usePT(r,qi._getPT(o,r.$name),i,l,Vo(Vo({},h),{},{global:G||{}})),Z=qi._getPTDatasets(r,l);return I||!I&&q?M?qi._mergeProps(r,M,G,q,Z):Vo(Vo(Vo({},G),q),Z):Vo(Vo({},q),Z)},_getPTDatasets:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r="data-pc-";return Vo(Vo({},n==="root"&&aI({},"".concat(r,"name"),ud(e.$name))),{},aI({},"".concat(r,"section"),ud(n)))},_getPT:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0,o=function(h){var p,i=r?r(h):h,b=ud(n);return(p=i==null?void 0:i[b])!==null&&p!==void 0?p:i};return e!=null&&e.hasOwnProperty("_usept")?{_usept:e._usept,originalValue:o(e.originalValue),value:o(e.value)}:o(e)},_usePT:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0,h=function(Z){return r(Z,o,l)};if(n!=null&&n.hasOwnProperty("_usept")){var p,i=n._usept||((p=e.$primevueConfig)===null||p===void 0?void 0:p.ptOptions)||{},b=i.mergeSections,E=b===void 0?!0:b,I=i.mergeProps,O=I===void 0?!1:I,M=h(n.originalValue),G=h(n.value);return M===void 0&&G===void 0?void 0:hu(G)?G:hu(M)?M:E||!E&&G?O?qi._mergeProps(e,O,M,G):Vo(Vo({},M),G):G}return h(n)},_useDefaultPT:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0;return qi._usePT(e,n,r,o,l)},_loadStyles:function(e,n,r){var o,l=qi._getConfig(n,r),h={nonce:l==null||(o=l.csp)===null||o===void 0?void 0:o.nonce};qi._loadCoreStyles(e.$instance,h),qi._loadThemeStyles(e.$instance,h),qi._loadScopedThemeStyles(e.$instance,h),qi._themeChangeListener(function(){return qi._loadThemeStyles(e.$instance,h)})},_loadCoreStyles:function(){var e,n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;if(!Tp.isStyleNameLoaded((e=r.$style)===null||e===void 0?void 0:e.name)&&(n=r.$style)!==null&&n!==void 0&&n.name){var l;Uo.loadCSS(o),r.isUnstyled()&&((l=r.$style)===null||l===void 0||l.loadCSS(o)),Tp.setLoadedStyleName(r.$style.name)}},_loadThemeStyles:function(){var e,n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;if(!(r!=null&&r.isUnstyled())){if(!fs.isStyleNameLoaded("common")){var l,h,p=((l=r.$style)===null||l===void 0||(h=l.getCommonTheme)===null||h===void 0?void 0:h.call(l))||{},i=p.primitive,b=p.semantic;Uo.load(i==null?void 0:i.css,Vo({name:"primitive-variables"},o)),Uo.load(b==null?void 0:b.css,Vo({name:"semantic-variables"},o)),Uo.loadTheme(Vo({name:"global-style"},o)),fs.setLoadedStyleName("common")}if(!fs.isStyleNameLoaded((e=r.$style)===null||e===void 0?void 0:e.name)&&(n=r.$style)!==null&&n!==void 0&&n.name){var E,I,O,M,G=((E=r.$style)===null||E===void 0||(I=E.getDirectiveTheme)===null||I===void 0?void 0:I.call(E))||{},q=G.css;(O=r.$style)===null||O===void 0||O.load(q,Vo({name:"".concat(r.$style.name,"-variables")},o)),(M=r.$style)===null||M===void 0||M.loadTheme(Vo({name:"".concat(r.$style.name,"-style")},o)),fs.setLoadedStyleName(r.$style.name)}if(!fs.isStyleNameLoaded("layer-order")){var Z,Y,te=(Z=r.$style)===null||Z===void 0||(Y=Z.getLayerOrderThemeCSS)===null||Y===void 0?void 0:Y.call(Z);Uo.load(te,Vo({name:"layer-order",first:!0},o)),fs.setLoadedStyleName("layer-order")}}},_loadScopedThemeStyles:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=e.preset();if(r&&e.$attrSelector){var o,l,h,p=((o=e.$style)===null||o===void 0||(l=o.getPresetTheme)===null||l===void 0?void 0:l.call(o,r,"[".concat(e.$attrSelector,"]")))||{},i=p.css,b=(h=e.$style)===null||h===void 0?void 0:h.load(i,Vo({name:"".concat(e.$attrSelector,"-").concat(e.$style.name)},n));e.scopedStyleEl=b.el}},_themeChangeListener:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};Tp.clearLoadedStyleNames(),cd.on("theme:change",e)},_hook:function(e,n,r,o,l,h){var p,i,b="on".concat(Lae(n)),E=qi._getConfig(o,l),I=r==null?void 0:r.$instance,O=qi._usePT(I,qi._getPT(o==null||(p=o.value)===null||p===void 0?void 0:p.pt,e),qi._getOptionValue,"hooks.".concat(b)),M=qi._useDefaultPT(I,E==null||(i=E.pt)===null||i===void 0||(i=i.directives)===null||i===void 0?void 0:i[e],qi._getOptionValue,"hooks.".concat(b)),G={el:r,binding:o,vnode:l,prevVnode:h};O==null||O(I,G),M==null||M(I,G)},_mergeProps:function(){for(var e=arguments.length>1?arguments[1]:void 0,n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return DE(e)?e.apply(void 0,r):It.apply(void 0,r)},_extend:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=function(h,p,i,b,E){var I,O,M;p._$instances=p._$instances||{};var G=qi._getConfig(i,b),q=p._$instances[e]||{},Z=mu(q)?Vo(Vo({},n),n==null?void 0:n.methods):{};p._$instances[e]=Vo(Vo({},q),{},{$name:e,$host:p,$binding:i,$modifiers:i==null?void 0:i.modifiers,$value:i==null?void 0:i.value,$el:q.$el||p||void 0,$style:Vo({classes:void 0,inlineStyles:void 0,load:function(){},loadCSS:function(){},loadTheme:function(){}},n==null?void 0:n.style),$primevueConfig:G,$attrSelector:p.$attrSelector,defaultPT:function(){return qi._getPT(G==null?void 0:G.pt,void 0,function(te){var be;return te==null||(be=te.directives)===null||be===void 0?void 0:be[e]})},isUnstyled:function(){var te,be;return((te=p.$instance)===null||te===void 0||(te=te.$binding)===null||te===void 0||(te=te.value)===null||te===void 0?void 0:te.unstyled)!==void 0?(be=p.$instance)===null||be===void 0||(be=be.$binding)===null||be===void 0||(be=be.value)===null||be===void 0?void 0:be.unstyled:G==null?void 0:G.unstyled},theme:function(){var te;return(te=p.$instance)===null||te===void 0||(te=te.$primevueConfig)===null||te===void 0?void 0:te.theme},preset:function(){var te;return(te=p.$instance)===null||te===void 0||(te=te.$binding)===null||te===void 0||(te=te.value)===null||te===void 0?void 0:te.dt},ptm:function(){var te,be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",Pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return qi._getPTValue(p.$instance,(te=p.$instance)===null||te===void 0||(te=te.$binding)===null||te===void 0||(te=te.value)===null||te===void 0?void 0:te.pt,be,Vo({},Pe))},ptmo:function(){var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",Pe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return qi._getPTValue(p.$instance,te,be,Pe,!1)},cx:function(){var te,be,Pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",Se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(te=p.$instance)!==null&&te!==void 0&&te.isUnstyled()?void 0:qi._getOptionValue((be=p.$instance)===null||be===void 0||(be=be.$style)===null||be===void 0?void 0:be.classes,Pe,Vo({},Se))},sx:function(){var te,be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",Pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Pe?qi._getOptionValue((te=p.$instance)===null||te===void 0||(te=te.$style)===null||te===void 0?void 0:te.inlineStyles,be,Vo({},Se)):void 0}},Z),p.$instance=p._$instances[e],(I=(O=p.$instance)[h])===null||I===void 0||I.call(O,p,i,b,E),p["$".concat(e)]=p.$instance,qi._hook(e,h,p,i,b,E),p.$pd||(p.$pd={}),p.$pd[e]=Vo(Vo({},(M=p.$pd)===null||M===void 0?void 0:M[e]),{},{name:e,instance:p.$instance})},o=function(h){var p,i,b,E,I,O=(p=h.$instance)===null||p===void 0?void 0:p.watch;O==null||(i=O.config)===null||i===void 0||i.call(h.$instance,(b=h.$instance)===null||b===void 0?void 0:b.$primevueConfig),Hy.on("config:change",function(M){var G,q=M.newValue,Z=M.oldValue;return O==null||(G=O.config)===null||G===void 0?void 0:G.call(h.$instance,q,Z)}),O==null||(E=O["config.ripple"])===null||E===void 0||E.call(h.$instance,(I=h.$instance)===null||I===void 0||(I=I.$primevueConfig)===null||I===void 0?void 0:I.ripple),Hy.on("config:ripple:change",function(M){var G,q=M.newValue,Z=M.oldValue;return O==null||(G=O["config.ripple"])===null||G===void 0?void 0:G.call(h.$instance,q,Z)})};return{created:function(h,p,i,b){r("created",h,p,i,b)},beforeMount:function(h,p,i,b){h.$attrSelector=Af("pd"),qi._loadStyles(h,p,i),r("beforeMount",h,p,i,b),o(h)},mounted:function(h,p,i,b){qi._loadStyles(h,p,i),r("mounted",h,p,i,b)},beforeUpdate:function(h,p,i,b){r("beforeUpdate",h,p,i,b)},updated:function(h,p,i,b){qi._loadStyles(h,p,i),r("updated",h,p,i,b)},beforeUnmount:function(h,p,i,b){r("beforeUnmount",h,p,i,b)},unmounted:function(h,p,i,b){var E;(E=h.$instance)===null||E===void 0||(E=E.scopedStyleEl)===null||E===void 0||(E=E.value)===null||E===void 0||E.remove(),r("unmounted",h,p,i,b)}}},extend:function(){var e=qi._getMeta.apply(qi,arguments),n=iD(e,2),r=n[0],o=n[1];return Vo({extend:function(){var h=qi._getMeta.apply(qi,arguments),p=iD(h,2),i=p[0],b=p[1];return qi.extend(i,Vo(Vo(Vo({},o),o==null?void 0:o.methods),b))}},qi._extend(r,o))}},vce=function(e){var n=e.dt;return`
.p-ink {
    display: block;
    position: absolute;
    background: `.concat(n("ripple.background"),`;
    border-radius: 100%;
    transform: scale(0);
    pointer-events: none;
}

.p-ink-active {
    animation: ripple 0.4s linear;
}

@keyframes ripple {
    100% {
        opacity: 0;
        transform: scale(2.5);
    }
}
`)},bce={root:"p-ink"},wce=Uo.extend({name:"ripple-directive",theme:vce,classes:bce}),xce=qi.extend({style:wce});function A1(t){"@babel/helpers - typeof";return A1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A1(t)}function Cce(t){return Tce(t)||Sce(t)||Bce(t)||Ece()}function Ece(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bce(t,e){if(t){if(typeof t=="string")return lI(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lI(t,e):void 0}}function Sce(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Tce(t){if(Array.isArray(t))return lI(t)}function lI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function aD(t,e,n){return(e=Ice(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ice(t){var e=Pce(t,"string");return A1(e)=="symbol"?e:e+""}function Pce(t,e){if(A1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(A1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pm=xce.extend("ripple",{watch:{"config.ripple":function(e){e?(this.createRipple(this.$host),this.bindEvents(this.$host),this.$host.setAttribute("data-pd-ripple",!0),this.$host.style.overflow="hidden",this.$host.style.position="relative"):(this.remove(this.$host),this.$host.removeAttribute("data-pd-ripple"))}},unmounted:function(e){this.remove(e)},timeout:void 0,methods:{bindEvents:function(e){e.addEventListener("mousedown",this.onMouseDown.bind(this))},unbindEvents:function(e){e.removeEventListener("mousedown",this.onMouseDown.bind(this))},createRipple:function(e){var n=E7("span",aD(aD({role:"presentation","aria-hidden":!0,"data-p-ink":!0,"data-p-ink-active":!1,class:!this.isUnstyled()&&this.cx("root"),onAnimationEnd:this.onAnimationEnd.bind(this)},this.$attrSelector,""),"p-bind",this.ptm("root")));e.appendChild(n),this.$el=n},remove:function(e){var n=this.getInk(e);n&&(this.$host.style.overflow="",this.$host.style.position="",this.unbindEvents(e),n.removeEventListener("animationend",this.onAnimationEnd),n.remove())},onMouseDown:function(e){var n=this,r=e.currentTarget,o=this.getInk(r);if(!(!o||getComputedStyle(o,null).display==="none")){if(!this.isUnstyled()&&Sp(o,"p-ink-active"),o.setAttribute("data-p-ink-active","false"),!Zm(o)&&!Ym(o)){var l=Math.max(Sh(r),BC(r));o.style.height=l+"px",o.style.width=l+"px"}var h=Ry(r),p=e.pageX-h.left+document.body.scrollTop-Ym(o)/2,i=e.pageY-h.top+document.body.scrollLeft-Zm(o)/2;o.style.top=i+"px",o.style.left=p+"px",!this.isUnstyled()&&mv(o,"p-ink-active"),o.setAttribute("data-p-ink-active","true"),this.timeout=setTimeout(function(){o&&(!n.isUnstyled()&&Sp(o,"p-ink-active"),o.setAttribute("data-p-ink-active","false"))},401)}},onAnimationEnd:function(e){this.timeout&&clearTimeout(this.timeout),!this.isUnstyled()&&Sp(e.currentTarget,"p-ink-active"),e.currentTarget.setAttribute("data-p-ink-active","false")},getInk:function(e){return e&&e.children?Cce(e.children).find(function(n){return ml(n,"data-pc-name")==="ripple"}):void 0}}}),U7={name:"BlankIcon",extends:Us},Lce=mt("rect",{width:"1",height:"1",fill:"currentColor","fill-opacity":"0"},null,-1),Fce=[Lce];function Rce(t,e,n,r,o,l){return ve(),et("svg",It({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),Fce,16)}U7.render=Rce;var $_={name:"CheckIcon",extends:Us},kce=mt("path",{d:"M4.86199 11.5948C4.78717 11.5923 4.71366 11.5745 4.64596 11.5426C4.57826 11.5107 4.51779 11.4652 4.46827 11.4091L0.753985 7.69483C0.683167 7.64891 0.623706 7.58751 0.580092 7.51525C0.536478 7.44299 0.509851 7.36177 0.502221 7.27771C0.49459 7.19366 0.506156 7.10897 0.536046 7.03004C0.565935 6.95111 0.613367 6.88 0.674759 6.82208C0.736151 6.76416 0.8099 6.72095 0.890436 6.69571C0.970973 6.67046 1.05619 6.66385 1.13966 6.67635C1.22313 6.68886 1.30266 6.72017 1.37226 6.76792C1.44186 6.81567 1.4997 6.8786 1.54141 6.95197L4.86199 10.2503L12.6397 2.49483C12.7444 2.42694 12.8689 2.39617 12.9932 2.40745C13.1174 2.41873 13.2343 2.47141 13.3251 2.55705C13.4159 2.64268 13.4753 2.75632 13.4938 2.87973C13.5123 3.00315 13.4888 3.1292 13.4271 3.23768L5.2557 11.4091C5.20618 11.4652 5.14571 11.5107 5.07801 11.5426C5.01031 11.5745 4.9368 11.5923 4.86199 11.5948Z",fill:"currentColor"},null,-1),Mce=[kce];function Oce(t,e,n,r,o,l){return ve(),et("svg",It({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),Mce,16)}$_.render=Oce;var UE={name:"ChevronDownIcon",extends:Us},Dce=mt("path",{d:"M7.01744 10.398C6.91269 10.3985 6.8089 10.378 6.71215 10.3379C6.61541 10.2977 6.52766 10.2386 6.45405 10.1641L1.13907 4.84913C1.03306 4.69404 0.985221 4.5065 1.00399 4.31958C1.02276 4.13266 1.10693 3.95838 1.24166 3.82747C1.37639 3.69655 1.55301 3.61742 1.74039 3.60402C1.92777 3.59062 2.11386 3.64382 2.26584 3.75424L7.01744 8.47394L11.769 3.75424C11.9189 3.65709 12.097 3.61306 12.2748 3.62921C12.4527 3.64535 12.6199 3.72073 12.7498 3.84328C12.8797 3.96582 12.9647 4.12842 12.9912 4.30502C13.0177 4.48162 12.9841 4.662 12.8958 4.81724L7.58083 10.1322C7.50996 10.2125 7.42344 10.2775 7.32656 10.3232C7.22968 10.3689 7.12449 10.3944 7.01744 10.398Z",fill:"currentColor"},null,-1),Uce=[Dce];function Nce(t,e,n,r,o,l){return ve(),et("svg",It({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),Uce,16)}UE.render=Nce;var N7={name:"SearchIcon",extends:Us},zce=mt("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.67602 11.0265C3.6661 11.688 4.83011 12.0411 6.02086 12.0411C6.81149 12.0411 7.59438 11.8854 8.32483 11.5828C8.87005 11.357 9.37808 11.0526 9.83317 10.6803L12.9769 13.8241C13.0323 13.8801 13.0983 13.9245 13.171 13.9548C13.2438 13.985 13.3219 14.0003 13.4007 14C13.4795 14.0003 13.5575 13.985 13.6303 13.9548C13.7031 13.9245 13.7691 13.8801 13.8244 13.8241C13.9367 13.7116 13.9998 13.5592 13.9998 13.4003C13.9998 13.2414 13.9367 13.089 13.8244 12.9765L10.6807 9.8328C11.053 9.37773 11.3573 8.86972 11.5831 8.32452C11.8857 7.59408 12.0414 6.81119 12.0414 6.02056C12.0414 4.8298 11.6883 3.66579 11.0268 2.67572C10.3652 1.68564 9.42494 0.913972 8.32483 0.45829C7.22472 0.00260857 6.01418 -0.116618 4.84631 0.115686C3.67844 0.34799 2.60568 0.921393 1.76369 1.76338C0.921698 2.60537 0.348296 3.67813 0.115991 4.84601C-0.116313 6.01388 0.00291375 7.22441 0.458595 8.32452C0.914277 9.42464 1.68595 10.3649 2.67602 11.0265ZM3.35565 2.0158C4.14456 1.48867 5.07206 1.20731 6.02086 1.20731C7.29317 1.20731 8.51338 1.71274 9.41304 2.6124C10.3127 3.51206 10.8181 4.73226 10.8181 6.00457C10.8181 6.95337 10.5368 7.88088 10.0096 8.66978C9.48251 9.45868 8.73328 10.0736 7.85669 10.4367C6.98011 10.7997 6.01554 10.8947 5.08496 10.7096C4.15439 10.5245 3.2996 10.0676 2.62869 9.39674C1.95778 8.72583 1.50089 7.87104 1.31579 6.94046C1.13068 6.00989 1.22568 5.04532 1.58878 4.16874C1.95187 3.29215 2.56675 2.54292 3.35565 2.0158Z",fill:"currentColor"},null,-1),Vce=[zce];function Qce(t,e,n,r,o,l){return ve(),et("svg",It({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),Vce,16)}N7.render=Qce;var M4={name:"TimesIcon",extends:Us},Hce=mt("path",{d:"M8.01186 7.00933L12.27 2.75116C12.341 2.68501 12.398 2.60524 12.4375 2.51661C12.4769 2.42798 12.4982 2.3323 12.4999 2.23529C12.5016 2.13827 12.4838 2.0419 12.4474 1.95194C12.4111 1.86197 12.357 1.78024 12.2884 1.71163C12.2198 1.64302 12.138 1.58893 12.0481 1.55259C11.9581 1.51625 11.8617 1.4984 11.7647 1.50011C11.6677 1.50182 11.572 1.52306 11.4834 1.56255C11.3948 1.60204 11.315 1.65898 11.2488 1.72997L6.99067 5.98814L2.7325 1.72997C2.59553 1.60234 2.41437 1.53286 2.22718 1.53616C2.03999 1.53946 1.8614 1.61529 1.72901 1.74767C1.59663 1.88006 1.5208 2.05865 1.5175 2.24584C1.5142 2.43303 1.58368 2.61419 1.71131 2.75116L5.96948 7.00933L1.71131 11.2675C1.576 11.403 1.5 11.5866 1.5 11.7781C1.5 11.9696 1.576 12.1532 1.71131 12.2887C1.84679 12.424 2.03043 12.5 2.2219 12.5C2.41338 12.5 2.59702 12.424 2.7325 12.2887L6.99067 8.03052L11.2488 12.2887C11.3843 12.424 11.568 12.5 11.7594 12.5C11.9509 12.5 12.1346 12.424 12.27 12.2887C12.4053 12.1532 12.4813 11.9696 12.4813 11.7781C12.4813 11.5866 12.4053 11.403 12.27 11.2675L8.01186 7.00933Z",fill:"currentColor"},null,-1),jce=[Hce];function $ce(t,e,n,r,o,l){return ve(),et("svg",It({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),jce,16)}M4.render=$ce;var Gce=function(e){var n=e.dt;return`
.p-iconfield {
    position: relative;
}

.p-inputicon {
    position: absolute;
    top: 50%;
    margin-top: calc(-1 * (`.concat(n("icon.size"),` / 2));
    color: `).concat(n("iconfield.icon.color"),`;
    line-height: 1;
}

.p-iconfield .p-inputicon:first-child {
    left: `).concat(n("form.field.padding.x"),`;
}

.p-iconfield .p-inputicon:last-child {
    right: `).concat(n("form.field.padding.x"),`;
}

.p-iconfield .p-inputtext:not(:first-child) {
    padding-left: calc((`).concat(n("form.field.padding.x")," * 2) + ").concat(n("icon.size"),`);
}

.p-iconfield .p-inputtext:not(:last-child) {
    padding-right: calc((`).concat(n("form.field.padding.x")," * 2) + ").concat(n("icon.size"),`);
}
`)},Kce={root:"p-iconfield"},qce=Uo.extend({name:"iconfield",theme:Gce,classes:Kce}),Wce={name:"BaseIconField",extends:Ro,style:qce,provide:function(){return{$pcIconField:this,$parentInstance:this}}},z7={name:"IconField",extends:Wce,inheritAttrs:!1};function Xce(t,e,n,r,o,l){return ve(),et("div",It({class:t.cx("root")},t.ptmi("root")),[Xt(t.$slots,"default")],16)}z7.render=Xce;var Zce={root:"p-inputicon"},Yce=Uo.extend({name:"inputicon",classes:Zce}),Jce={name:"BaseInputIcon",extends:Ro,style:Yce,props:{class:null},provide:function(){return{$pcInputIcon:this,$parentInstance:this}}},V7={name:"InputIcon",extends:Jce,inheritAttrs:!1,computed:{containerClass:function(){return[this.cx("root"),this.class]}}};function eue(t,e,n,r,o,l){return ve(),et("span",It({class:l.containerClass},t.ptmi("root")),[Xt(t.$slots,"default")],16)}V7.render=eue;var tue=function(e){var n=e.dt;return`
.p-inputtext {
    font-family: inherit;
    font-feature-settings: inherit;
    font-size: 1rem;
    color: `.concat(n("inputtext.color"),`;
    background: `).concat(n("inputtext.background"),`;
    padding: `).concat(n("inputtext.padding.y")," ").concat(n("inputtext.padding.x"),`;
    border: 1px solid `).concat(n("inputtext.border.color"),`;
    transition: background `).concat(n("inputtext.transition.duration"),", color ").concat(n("inputtext.transition.duration"),", border-color ").concat(n("inputtext.transition.duration"),", outline-color ").concat(n("inputtext.transition.duration"),", box-shadow ").concat(n("inputtext.transition.duration"),`;
    appearance: none;
    border-radius: `).concat(n("inputtext.border.radius"),`;
    outline-color: transparent;
    box-shadow: `).concat(n("inputtext.shadow"),`;
}

.p-inputtext:enabled:hover {
    border-color: `).concat(n("inputtext.hover.border.color"),`;
}

.p-inputtext:enabled:focus {
    border-color: `).concat(n("inputtext.focus.border.color"),`;
    box-shadow: `).concat(n("inputtext.focus.ring.shadow"),`;
    outline: `).concat(n("inputtext.focus.ring.width")," ").concat(n("inputtext.focus.ring.style")," ").concat(n("inputtext.focus.ring.color"),`;
    outline-offset: `).concat(n("inputtext.focus.ring.offset"),`;
}

.p-inputtext.p-invalid {
    border-color: `).concat(n("inputtext.invalid.border.color"),`;
}

.p-inputtext.p-variant-filled {
    background: `).concat(n("inputtext.filled.background"),`;
}

.p-inputtext.p-variant-filled:enabled:focus {
    background: `).concat(n("inputtext.filled.focus.background"),`;
}

.p-inputtext:disabled {
    opacity: 1;
    background: `).concat(n("inputtext.disabled.background"),`;
    color: `).concat(n("inputtext.disabled.color"),`;
}

.p-inputtext::placeholder {
    color: `).concat(n("inputtext.placeholder.color"),`;
}

.p-inputtext-sm {
    font-size: `).concat(n("inputtext.sm.font.size"),`;
    padding: `).concat(n("inputtext.sm.padding.y")," ").concat(n("inputtext.sm.padding.x"),`;
}

.p-inputtext-lg {
    font-size: `).concat(n("inputtext.lg.font.size"),`;
    padding: `).concat(n("inputtext.lg.padding.y")," ").concat(n("inputtext.lg.padding.x"),`;
}

.p-inputtext-fluid {
    width: 100%;
}
`)},nue={root:function(e){var n=e.instance,r=e.props;return["p-inputtext p-component",{"p-filled":n.filled,"p-inputtext-sm":r.size==="small","p-inputtext-lg":r.size==="large","p-invalid":r.invalid,"p-variant-filled":r.variant?r.variant==="filled":n.$primevue.config.inputStyle==="filled"||n.$primevue.config.inputVariant==="filled","p-inputtext-fluid":n.hasFluid}]}},rue=Uo.extend({name:"inputtext",theme:tue,classes:nue}),iue={name:"BaseInputText",extends:Ro,props:{modelValue:null,size:{type:String,default:null},invalid:{type:Boolean,default:!1},variant:{type:String,default:null},fluid:{type:Boolean,default:null}},style:rue,provide:function(){return{$pcInputText:this,$parentInstance:this}}},O4={name:"InputText",extends:iue,inheritAttrs:!1,emits:["update:modelValue"],inject:{$pcFluid:{default:null}},methods:{getPTOptions:function(e){var n=e==="root"?this.ptmi:this.ptm;return n(e,{context:{filled:this.filled,disabled:this.$attrs.disabled||this.$attrs.disabled===""}})},onInput:function(e){this.$emit("update:modelValue",e.target.value)}},computed:{filled:function(){return this.modelValue!=null&&this.modelValue.toString().length>0},hasFluid:function(){return mu(this.fluid)?!!this.$pcFluid:this.fluid}}},oue=["value","aria-invalid"];function sue(t,e,n,r,o,l){return ve(),et("input",It({type:"text",class:t.cx("root"),value:t.modelValue,"aria-invalid":t.invalid||void 0,onInput:e[0]||(e[0]=function(){return l.onInput&&l.onInput.apply(l,arguments)})},l.getPTOptions("root")),null,16,oue)}O4.render=sue;var Mp=I4(),D4={name:"Portal",props:{appendTo:{type:[String,Object],default:"body"},disabled:{type:Boolean,default:!1}},data:function(){return{mounted:!1}},mounted:function(){this.mounted=T7()},computed:{inline:function(){return this.disabled||this.appendTo==="self"}}};function aue(t,e,n,r,o,l){return l.inline?Xt(t.$slots,"default",{key:0}):o.mounted?(ve(),hn(ZN,{key:1,to:n.appendTo},[Xt(t.$slots,"default")],8,["to"])):Sn("",!0)}D4.render=aue;var lue=function(e){var n=e.dt;return`
.p-virtualscroller {
    position: relative;
    overflow: auto;
    contain: strict;
    transform: translateZ(0);
    will-change: scroll-position;
    outline: 0 none;
}

.p-virtualscroller-content {
    position: absolute;
    top: 0;
    left: 0;
    min-height: 100%;
    min-width: 100%;
    will-change: transform;
}

.p-virtualscroller-spacer {
    position: absolute;
    top: 0;
    left: 0;
    height: 1px;
    width: 1px;
    transform-origin: 0 0;
    pointer-events: none;
}

.p-virtualscroller-loader {
    position: sticky;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: `.concat(n("virtualscroller.loader.mask.background"),`;
    color: `).concat(n("virtualscroller.loader.mask.color"),`;
}

.p-virtualscroller-loader-mask {
    display: flex;
    align-items: center;
    justify-content: center;
}

.p-virtualscroller-loading-icon {
    font-size: `).concat(n("virtualscroller.loader.icon.size"),`;
    width: `).concat(n("virtualscroller.loader.icon.size"),`;
    height: `).concat(n("virtualscroller.loader.icon.size"),`;
}

.p-virtualscroller-horizontal > .p-virtualscroller-content {
    display: flex;
}

.p-virtualscroller-inline .p-virtualscroller-content {
    position: static;
}
`)},lD=Uo.extend({name:"virtualscroller",theme:lue}),cue={name:"BaseVirtualScroller",extends:Ro,props:{id:{type:String,default:null},style:null,class:null,items:{type:Array,default:null},itemSize:{type:[Number,Array],default:0},scrollHeight:null,scrollWidth:null,orientation:{type:String,default:"vertical"},numToleratedItems:{type:Number,default:null},delay:{type:Number,default:0},resizeDelay:{type:Number,default:10},lazy:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},loaderDisabled:{type:Boolean,default:!1},columns:{type:Array,default:null},loading:{type:Boolean,default:!1},showSpacer:{type:Boolean,default:!0},showLoader:{type:Boolean,default:!1},tabindex:{type:Number,default:0},inline:{type:Boolean,default:!1},step:{type:Number,default:0},appendOnly:{type:Boolean,default:!1},autoSize:{type:Boolean,default:!1}},style:lD,provide:function(){return{$pcVirtualScroller:this,$parentInstance:this}},beforeMount:function(){var e;lD.loadCSS({nonce:(e=this.$primevueConfig)===null||e===void 0||(e=e.csp)===null||e===void 0?void 0:e.nonce})}};function p1(t){"@babel/helpers - typeof";return p1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p1(t)}function cD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function ev(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cD(Object(n),!0).forEach(function(r){Q7(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Q7(t,e,n){return(e=uue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uue(t){var e=hue(t,"string");return p1(e)=="symbol"?e:e+""}function hue(t,e){if(p1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(p1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var U4={name:"VirtualScroller",extends:cue,inheritAttrs:!1,emits:["update:numToleratedItems","scroll","scroll-index-change","lazy-load"],data:function(){var e=this.isBoth();return{first:e?{rows:0,cols:0}:0,last:e?{rows:0,cols:0}:0,page:e?{rows:0,cols:0}:0,numItemsInViewport:e?{rows:0,cols:0}:0,lastScrollPos:e?{top:0,left:0}:0,d_numToleratedItems:this.numToleratedItems,d_loading:this.loading,loaderArr:[],spacerStyle:{},contentStyle:{}}},element:null,content:null,lastScrollPos:null,scrollTimeout:null,resizeTimeout:null,defaultWidth:0,defaultHeight:0,defaultContentWidth:0,defaultContentHeight:0,isRangeChanged:!1,lazyLoadState:{},resizeListener:null,initialized:!1,watch:{numToleratedItems:function(e){this.d_numToleratedItems=e},loading:function(e,n){this.lazy&&e!==n&&e!==this.d_loading&&(this.d_loading=e)},items:function(e,n){(!n||n.length!==(e||[]).length)&&(this.init(),this.calculateAutoSize())},itemSize:function(){this.init(),this.calculateAutoSize()},orientation:function(){this.lastScrollPos=this.isBoth()?{top:0,left:0}:0},scrollHeight:function(){this.init(),this.calculateAutoSize()},scrollWidth:function(){this.init(),this.calculateAutoSize()}},mounted:function(){this.viewInit(),this.lastScrollPos=this.isBoth()?{top:0,left:0}:0,this.lazyLoadState=this.lazyLoadState||{}},updated:function(){!this.initialized&&this.viewInit()},unmounted:function(){this.unbindResizeListener(),this.initialized=!1},methods:{viewInit:function(){SC(this.element)&&(this.setContentEl(this.content),this.init(),this.calculateAutoSize(),this.bindResizeListener(),this.defaultWidth=Ym(this.element),this.defaultHeight=Zm(this.element),this.defaultContentWidth=Ym(this.content),this.defaultContentHeight=Zm(this.content),this.initialized=!0)},init:function(){this.disabled||(this.setSize(),this.calculateOptions(),this.setSpacerSize())},isVertical:function(){return this.orientation==="vertical"},isHorizontal:function(){return this.orientation==="horizontal"},isBoth:function(){return this.orientation==="both"},scrollTo:function(e){this.element&&this.element.scrollTo(e)},scrollToIndex:function(e){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"auto",o=this.isBoth(),l=this.isHorizontal(),h=o?e.every(function(Ae){return Ae>-1}):e>-1;if(h){var p=this.first,i=this.element,b=i.scrollTop,E=b===void 0?0:b,I=i.scrollLeft,O=I===void 0?0:I,M=this.calculateNumItems(),G=M.numToleratedItems,q=this.getContentPosition(),Z=this.itemSize,Y=function(){var ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,ue=arguments.length>1?arguments[1]:void 0;return ne<=ue?0:ne},te=function(ne,ue,ye){return ne*ue+ye},be=function(){var ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return n.scrollTo({left:ne,top:ue,behavior:r})},Pe=o?{rows:0,cols:0}:0,Se=!1,Ie=!1;o?(Pe={rows:Y(e[0],G[0]),cols:Y(e[1],G[1])},be(te(Pe.cols,Z[1],q.left),te(Pe.rows,Z[0],q.top)),Ie=this.lastScrollPos.top!==E||this.lastScrollPos.left!==O,Se=Pe.rows!==p.rows||Pe.cols!==p.cols):(Pe=Y(e,G),l?be(te(Pe,Z,q.left),E):be(O,te(Pe,Z,q.top)),Ie=this.lastScrollPos!==(l?O:E),Se=Pe!==p),this.isRangeChanged=Se,Ie&&(this.first=Pe)}},scrollInView:function(e,n){var r=this,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"auto";if(n){var l=this.isBoth(),h=this.isHorizontal(),p=l?e.every(function(Z){return Z>-1}):e>-1;if(p){var i=this.getRenderedRange(),b=i.first,E=i.viewport,I=function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return r.scrollTo({left:Y,top:te,behavior:o})},O=n==="to-start",M=n==="to-end";if(O){if(l)E.first.rows-b.rows>e[0]?I(E.first.cols*this.itemSize[1],(E.first.rows-1)*this.itemSize[0]):E.first.cols-b.cols>e[1]&&I((E.first.cols-1)*this.itemSize[1],E.first.rows*this.itemSize[0]);else if(E.first-b>e){var G=(E.first-1)*this.itemSize;h?I(G,0):I(0,G)}}else if(M){if(l)E.last.rows-b.rows<=e[0]+1?I(E.first.cols*this.itemSize[1],(E.first.rows+1)*this.itemSize[0]):E.last.cols-b.cols<=e[1]+1&&I((E.first.cols+1)*this.itemSize[1],E.first.rows*this.itemSize[0]);else if(E.last-b<=e+1){var q=(E.first+1)*this.itemSize;h?I(q,0):I(0,q)}}}}else this.scrollToIndex(e,o)},getRenderedRange:function(){var e=function(I,O){return Math.floor(I/(O||I))},n=this.first,r=0;if(this.element){var o=this.isBoth(),l=this.isHorizontal(),h=this.element,p=h.scrollTop,i=h.scrollLeft;if(o)n={rows:e(p,this.itemSize[0]),cols:e(i,this.itemSize[1])},r={rows:n.rows+this.numItemsInViewport.rows,cols:n.cols+this.numItemsInViewport.cols};else{var b=l?i:p;n=e(b,this.itemSize),r=n+this.numItemsInViewport}}return{first:this.first,last:this.last,viewport:{first:n,last:r}}},calculateNumItems:function(){var e=this.isBoth(),n=this.isHorizontal(),r=this.itemSize,o=this.getContentPosition(),l=this.element?this.element.offsetWidth-o.left:0,h=this.element?this.element.offsetHeight-o.top:0,p=function(O,M){return Math.ceil(O/(M||O))},i=function(O){return Math.ceil(O/2)},b=e?{rows:p(h,r[0]),cols:p(l,r[1])}:p(n?l:h,r),E=this.d_numToleratedItems||(e?[i(b.rows),i(b.cols)]:i(b));return{numItemsInViewport:b,numToleratedItems:E}},calculateOptions:function(){var e=this,n=this.isBoth(),r=this.first,o=this.calculateNumItems(),l=o.numItemsInViewport,h=o.numToleratedItems,p=function(E,I,O){var M=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return e.getLast(E+I+(E<O?2:3)*O,M)},i=n?{rows:p(r.rows,l.rows,h[0]),cols:p(r.cols,l.cols,h[1],!0)}:p(r,l,h);this.last=i,this.numItemsInViewport=l,this.d_numToleratedItems=h,this.$emit("update:numToleratedItems",this.d_numToleratedItems),this.showLoader&&(this.loaderArr=n?Array.from({length:l.rows}).map(function(){return Array.from({length:l.cols})}):Array.from({length:l})),this.lazy&&Promise.resolve().then(function(){var b;e.lazyLoadState={first:e.step?n?{rows:0,cols:r.cols}:0:r,last:Math.min(e.step?e.step:i,((b=e.items)===null||b===void 0?void 0:b.length)||0)},e.$emit("lazy-load",e.lazyLoadState)})},calculateAutoSize:function(){var e=this;this.autoSize&&!this.d_loading&&Promise.resolve().then(function(){if(e.content){var n=e.isBoth(),r=e.isHorizontal(),o=e.isVertical();e.content.style.minHeight=e.content.style.minWidth="auto",e.content.style.position="relative",e.element.style.contain="none";var l=[Ym(e.element),Zm(e.element)],h=l[0],p=l[1];(n||r)&&(e.element.style.width=h<e.defaultWidth?h+"px":e.scrollWidth||e.defaultWidth+"px"),(n||o)&&(e.element.style.height=p<e.defaultHeight?p+"px":e.scrollHeight||e.defaultHeight+"px"),e.content.style.minHeight=e.content.style.minWidth="",e.content.style.position="",e.element.style.contain=""}})},getLast:function(){var e,n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,o=arguments.length>1?arguments[1]:void 0;return this.items?Math.min(o?((e=this.columns||this.items[0])===null||e===void 0?void 0:e.length)||0:((n=this.items)===null||n===void 0?void 0:n.length)||0,r):0},getContentPosition:function(){if(this.content){var e=getComputedStyle(this.content),n=parseFloat(e.paddingLeft)+Math.max(parseFloat(e.left)||0,0),r=parseFloat(e.paddingRight)+Math.max(parseFloat(e.right)||0,0),o=parseFloat(e.paddingTop)+Math.max(parseFloat(e.top)||0,0),l=parseFloat(e.paddingBottom)+Math.max(parseFloat(e.bottom)||0,0);return{left:n,right:r,top:o,bottom:l,x:n+r,y:o+l}}return{left:0,right:0,top:0,bottom:0,x:0,y:0}},setSize:function(){var e=this;if(this.element){var n=this.isBoth(),r=this.isHorizontal(),o=this.element.parentElement,l=this.scrollWidth||"".concat(this.element.offsetWidth||o.offsetWidth,"px"),h=this.scrollHeight||"".concat(this.element.offsetHeight||o.offsetHeight,"px"),p=function(b,E){return e.element.style[b]=E};n||r?(p("height",h),p("width",l)):p("height",h)}},setSpacerSize:function(){var e=this,n=this.items;if(n){var r=this.isBoth(),o=this.isHorizontal(),l=this.getContentPosition(),h=function(i,b,E){var I=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return e.spacerStyle=ev(ev({},e.spacerStyle),Q7({},"".concat(i),(b||[]).length*E+I+"px"))};r?(h("height",n,this.itemSize[0],l.y),h("width",this.columns||n[1],this.itemSize[1],l.x)):o?h("width",this.columns||n,this.itemSize,l.x):h("height",n,this.itemSize,l.y)}},setContentPosition:function(e){var n=this;if(this.content&&!this.appendOnly){var r=this.isBoth(),o=this.isHorizontal(),l=e?e.first:this.first,h=function(E,I){return E*I},p=function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return n.contentStyle=ev(ev({},n.contentStyle),{transform:"translate3d(".concat(E,"px, ").concat(I,"px, 0)")})};if(r)p(h(l.cols,this.itemSize[1]),h(l.rows,this.itemSize[0]));else{var i=h(l,this.itemSize);o?p(i,0):p(0,i)}}},onScrollPositionChange:function(e){var n=this,r=e.target,o=this.isBoth(),l=this.isHorizontal(),h=this.getContentPosition(),p=function(se,le){return se?se>le?se-le:se:0},i=function(se,le){return Math.floor(se/(le||se))},b=function(se,le,ge,lt,Ot,gt){return se<=Ot?Ot:gt?ge-lt-Ot:le+Ot-1},E=function(se,le,ge,lt,Ot,gt,Tt){return se<=gt?0:Math.max(0,Tt?se<le?ge:se-gt:se>le?ge:se-2*gt)},I=function(se,le,ge,lt,Ot,gt){var Tt=le+lt+2*Ot;return se>=Ot&&(Tt+=Ot+1),n.getLast(Tt,gt)},O=p(r.scrollTop,h.top),M=p(r.scrollLeft,h.left),G=o?{rows:0,cols:0}:0,q=this.last,Z=!1,Y=this.lastScrollPos;if(o){var te=this.lastScrollPos.top<=O,be=this.lastScrollPos.left<=M;if(!this.appendOnly||this.appendOnly&&(te||be)){var Pe={rows:i(O,this.itemSize[0]),cols:i(M,this.itemSize[1])},Se={rows:b(Pe.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],te),cols:b(Pe.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],be)};G={rows:E(Pe.rows,Se.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],te),cols:E(Pe.cols,Se.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],be)},q={rows:I(Pe.rows,G.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0]),cols:I(Pe.cols,G.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],!0)},Z=G.rows!==this.first.rows||q.rows!==this.last.rows||G.cols!==this.first.cols||q.cols!==this.last.cols||this.isRangeChanged,Y={top:O,left:M}}}else{var Ie=l?M:O,Ae=this.lastScrollPos<=Ie;if(!this.appendOnly||this.appendOnly&&Ae){var ne=i(Ie,this.itemSize),ue=b(ne,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,Ae);G=E(ne,ue,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,Ae),q=I(ne,G,this.last,this.numItemsInViewport,this.d_numToleratedItems),Z=G!==this.first||q!==this.last||this.isRangeChanged,Y=Ie}}return{first:G,last:q,isRangeChanged:Z,scrollPos:Y}},onScrollChange:function(e){var n=this.onScrollPositionChange(e),r=n.first,o=n.last,l=n.isRangeChanged,h=n.scrollPos;if(l){var p={first:r,last:o};if(this.setContentPosition(p),this.first=r,this.last=o,this.lastScrollPos=h,this.$emit("scroll-index-change",p),this.lazy&&this.isPageChanged(r)){var i,b,E={first:this.step?Math.min(this.getPageByFirst(r)*this.step,(((i=this.items)===null||i===void 0?void 0:i.length)||0)-this.step):r,last:Math.min(this.step?(this.getPageByFirst(r)+1)*this.step:o,((b=this.items)===null||b===void 0?void 0:b.length)||0)},I=this.lazyLoadState.first!==E.first||this.lazyLoadState.last!==E.last;I&&this.$emit("lazy-load",E),this.lazyLoadState=E}}},onScroll:function(e){var n=this;if(this.$emit("scroll",e),this.delay){if(this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.isPageChanged()){if(!this.d_loading&&this.showLoader){var r=this.onScrollPositionChange(e),o=r.isRangeChanged,l=o||(this.step?this.isPageChanged():!1);l&&(this.d_loading=!0)}this.scrollTimeout=setTimeout(function(){n.onScrollChange(e),n.d_loading&&n.showLoader&&(!n.lazy||n.loading===void 0)&&(n.d_loading=!1,n.page=n.getPageByFirst())},this.delay)}}else this.onScrollChange(e)},onResize:function(){var e=this;this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){if(SC(e.element)){var n=e.isBoth(),r=e.isVertical(),o=e.isHorizontal(),l=[Ym(e.element),Zm(e.element)],h=l[0],p=l[1],i=h!==e.defaultWidth,b=p!==e.defaultHeight,E=n?i||b:o?i:r?b:!1;E&&(e.d_numToleratedItems=e.numToleratedItems,e.defaultWidth=h,e.defaultHeight=p,e.defaultContentWidth=Ym(e.content),e.defaultContentHeight=Zm(e.content),e.init())}},this.resizeDelay)},bindResizeListener:function(){this.resizeListener||(this.resizeListener=this.onResize.bind(this),window.addEventListener("resize",this.resizeListener),window.addEventListener("orientationchange",this.resizeListener))},unbindResizeListener:function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),window.removeEventListener("orientationchange",this.resizeListener),this.resizeListener=null)},getOptions:function(e){var n=(this.items||[]).length,r=this.isBoth()?this.first.rows+e:this.first+e;return{index:r,count:n,first:r===0,last:r===n-1,even:r%2===0,odd:r%2!==0}},getLoaderOptions:function(e,n){var r=this.loaderArr.length;return ev({index:e,count:r,first:e===0,last:e===r-1,even:e%2===0,odd:e%2!==0},n)},getPageByFirst:function(e){return Math.floor(((e??this.first)+this.d_numToleratedItems*4)/(this.step||1))},isPageChanged:function(e){return this.step?this.page!==this.getPageByFirst(e??this.first):!0},setContentEl:function(e){this.content=e||this.content||kp(this.element,'[data-pc-section="content"]')},elementRef:function(e){this.element=e},contentRef:function(e){this.content=e}},computed:{containerClass:function(){return["p-virtualscroller",this.class,{"p-virtualscroller-inline":this.inline,"p-virtualscroller-both p-both-scroll":this.isBoth(),"p-virtualscroller-horizontal p-horizontal-scroll":this.isHorizontal()}]},contentClass:function(){return["p-virtualscroller-content",{"p-virtualscroller-loading":this.d_loading}]},loaderClass:function(){return["p-virtualscroller-loader",{"p-virtualscroller-loader-mask":!this.$slots.loader}]},loadedItems:function(){var e=this;return this.items&&!this.d_loading?this.isBoth()?this.items.slice(this.appendOnly?0:this.first.rows,this.last.rows).map(function(n){return e.columns?n:n.slice(e.appendOnly?0:e.first.cols,e.last.cols)}):this.isHorizontal()&&this.columns?this.items:this.items.slice(this.appendOnly?0:this.first,this.last):[]},loadedRows:function(){return this.d_loading?this.loaderDisabled?this.loaderArr:[]:this.loadedItems},loadedColumns:function(){if(this.columns){var e=this.isBoth(),n=this.isHorizontal();if(e||n)return this.d_loading&&this.loaderDisabled?e?this.loaderArr[0]:this.loaderArr:this.columns.slice(e?this.first.cols:this.first,e?this.last.cols:this.last)}return this.columns}},components:{SpinnerIcon:rb}},due=["tabindex"];function fue(t,e,n,r,o,l){var h=Nr("SpinnerIcon");return t.disabled?(ve(),et(_r,{key:1},[Xt(t.$slots,"default"),Xt(t.$slots,"content",{items:t.items,rows:t.items,columns:l.loadedColumns})],64)):(ve(),et("div",It({key:0,ref:l.elementRef,class:l.containerClass,tabindex:t.tabindex,style:t.style,onScroll:e[0]||(e[0]=function(){return l.onScroll&&l.onScroll.apply(l,arguments)})},t.ptmi("root")),[Xt(t.$slots,"content",{styleClass:l.contentClass,items:l.loadedItems,getItemOptions:l.getOptions,loading:o.d_loading,getLoaderOptions:l.getLoaderOptions,itemSize:t.itemSize,rows:l.loadedRows,columns:l.loadedColumns,contentRef:l.contentRef,spacerStyle:o.spacerStyle,contentStyle:o.contentStyle,vertical:l.isVertical(),horizontal:l.isHorizontal(),both:l.isBoth()},function(){return[mt("div",It({ref:l.contentRef,class:l.contentClass,style:o.contentStyle},t.ptm("content")),[(ve(!0),et(_r,null,Li(l.loadedItems,function(p,i){return Xt(t.$slots,"item",{key:i,item:p,options:l.getOptions(i)})}),128))],16)]}),t.showSpacer?(ve(),et("div",It({key:0,class:"p-virtualscroller-spacer",style:o.spacerStyle},t.ptm("spacer")),null,16)):Sn("",!0),!t.loaderDisabled&&t.showLoader&&o.d_loading?(ve(),et("div",It({key:1,class:l.loaderClass},t.ptm("loader")),[t.$slots&&t.$slots.loader?(ve(!0),et(_r,{key:0},Li(o.loaderArr,function(p,i){return Xt(t.$slots,"loader",{key:i,options:l.getLoaderOptions(i,l.isBoth()&&{numCols:t.d_numItemsInViewport.cols})})}),128)):Sn("",!0),Xt(t.$slots,"loadingicon",{},function(){return[Lr(h,It({spin:"",class:"p-virtualscroller-loading-icon"},t.ptm("loadingIcon")),null,16)]})],16)):Sn("",!0)],16,due))}U4.render=fue;var Aue=function(e){var n=e.dt;return`
.p-select {
    display: inline-flex;
    cursor: pointer;
    position: relative;
    user-select: none;
    background: `.concat(n("select.background"),`;
    border: 1px solid `).concat(n("select.border.color"),`;
    transition: background `).concat(n("select.transition.duration"),", color ").concat(n("select.transition.duration"),", border-color ").concat(n("select.transition.duration"),`,
        outline-color `).concat(n("select.transition.duration"),", box-shadow ").concat(n("select.transition.duration"),`;
    border-radius: `).concat(n("select.border.radius"),`;
    outline-color: transparent;
    box-shadow: `).concat(n("select.shadow"),`;
}

.p-select:not(.p-disabled):hover {
    border-color: `).concat(n("select.hover.border.color"),`;
}

.p-select:not(.p-disabled).p-focus {
    border-color: `).concat(n("select.focus.border.color"),`;
    box-shadow: `).concat(n("select.focus.ring.shadow"),`;
    outline: `).concat(n("select.focus.ring.width")," ").concat(n("select.focus.ring.style")," ").concat(n("select.focus.ring.color"),`;
    outline-offset: `).concat(n("select.focus.ring.offset"),`;
}

.p-select.p-variant-filled {
    background: `).concat(n("select.filled.background"),`;
}

.p-select.p-variant-filled.p-focus {
    background: `).concat(n("select.filled.focus.background"),`;
}

.p-select.p-invalid {
    border-color: `).concat(n("select.invalid.border.color"),`;
}

.p-select.p-disabled {
    opacity: 1;
    background: `).concat(n("select.disabled.background"),`;
}

.p-select-clear-icon {
    position: absolute;
    top: 50%;
    margin-top: -0.5rem;
    color: `).concat(n("select.clear.icon.color"),`;
    right: `).concat(n("select.dropdown.width"),`;
}

.p-select-dropdown {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    background: transparent;
    color: `).concat(n("select.dropdown.color"),`;
    width: `).concat(n("select.dropdown.width"),`;
    border-top-right-radius: `).concat(n("select.border.radius"),`;
    border-bottom-right-radius: `).concat(n("select.border.radius"),`;
}

.p-select-label {
    display: block;
    white-space: nowrap;
    overflow: hidden;
    flex: 1 1 auto;
    width: 1%;
    padding: `).concat(n("select.padding.y")," ").concat(n("select.padding.x"),`;
    text-overflow: ellipsis;
    cursor: pointer;
    color: `).concat(n("select.color"),`;
    background: transparent;
    border: 0 none;
    outline: 0 none;
}

.p-select-label.p-placeholder {
    color: `).concat(n("select.placeholder.color"),`;
}

.p-select:has(.p-select-clear-icon) .p-select-label {
    padding-right: calc(1rem + `).concat(n("select.padding.x"),`);
}

.p-select.p-disabled .p-select-label {
    color: `).concat(n("select.disabled.color"),`;
}

.p-select-label-empty {
    overflow: hidden;
    opacity: 0;
}

input.p-select-label {
    cursor: default;
}

.p-select .p-select-overlay {
    min-width: 100%;
}

.p-select-overlay {
    position: absolute;
    top: 0;
    left: 0;
    background: `).concat(n("select.overlay.background"),`;
    color: `).concat(n("select.overlay.color"),`;
    border: 1px solid `).concat(n("select.overlay.border.color"),`;
    border-radius: `).concat(n("select.overlay.border.radius"),`;
    box-shadow: `).concat(n("select.overlay.shadow"),`;
}

.p-select-header {
    padding: `).concat(n("select.list.header.padding"),`;
}

.p-select-filter {
    width: 100%;
}

.p-select-list-container {
    overflow: auto;
}

.p-select-option-group {
    cursor: auto;
    margin: 0;
    padding: `).concat(n("select.option.group.padding"),`;
    background: `).concat(n("select.option.group.background"),`;
    color: `).concat(n("select.option.group.color"),`;
    font-weight: `).concat(n("select.option.group.font.weight"),`;
}

.p-select-list {
    margin: 0;
    padding: 0;
    list-style-type: none;
    padding: `).concat(n("select.list.padding"),`;
    gap: `).concat(n("select.list.gap"),`;
    display: flex;
    flex-direction: column;
}

.p-select-option {
    cursor: pointer;
    font-weight: normal;
    white-space: nowrap;
    position: relative;
    overflow: hidden;
    display: flex;
    align-items: center;
    padding: `).concat(n("select.option.padding"),`;
    border: 0 none;
    color: `).concat(n("select.option.color"),`;
    background: transparent;
    transition: background `).concat(n("select.transition.duration"),", color ").concat(n("select.transition.duration"),", border-color ").concat(n("select.transition.duration"),`,
            box-shadow `).concat(n("select.transition.duration"),", outline-color ").concat(n("select.transition.duration"),`;
    border-radius: `).concat(n("select.option.border.radius"),`;
}

.p-select-option:not(.p-select-option-selected):not(.p-disabled).p-focus {
    background: `).concat(n("select.option.focus.background"),`;
    color: `).concat(n("select.option.focus.color"),`;
}

.p-select-option.p-select-option-selected {
    background: `).concat(n("select.option.selected.background"),`;
    color: `).concat(n("select.option.selected.color"),`;
}

.p-select-option.p-select-option-selected.p-focus {
    background: `).concat(n("select.option.selected.focus.background"),`;
    color: `).concat(n("select.option.selected.focus.color"),`;
}

.p-select-option-check-icon {
    position: relative;
    margin-inline-start: `).concat(n("select.checkmark.gutter.start"),`;
    margin-inline-end: `).concat(n("select.checkmark.gutter.end"),`;
    color: `).concat(n("select.checkmark.color"),`;
}

.p-select-empty-message {
    padding: `).concat(n("select.empty.message.padding"),`;
}

.p-select-fluid {
    display: flex;
}
`)},pue={root:function(e){var n=e.instance,r=e.props,o=e.state;return["p-select p-component p-inputwrapper",{"p-disabled":r.disabled,"p-invalid":r.invalid,"p-variant-filled":r.variant?r.variant==="filled":n.$primevue.config.inputStyle==="filled"||n.$primevue.config.inputVariant==="filled","p-focus":o.focused,"p-inputwrapper-filled":n.hasSelectedOption,"p-inputwrapper-focus":o.focused||o.overlayVisible,"p-select-open":o.overlayVisible,"p-select-fluid":n.hasFluid}]},label:function(e){var n=e.instance,r=e.props;return["p-select-label",{"p-placeholder":!r.editable&&n.label===r.placeholder,"p-select-label-empty":!r.editable&&!n.$slots.value&&(n.label==="p-emptylabel"||n.label.length===0)}]},clearIcon:"p-select-clear-icon",dropdown:"p-select-dropdown",loadingicon:"p-select-loading-icon",dropdownIcon:"p-select-dropdown-icon",overlay:"p-select-overlay p-component",header:"p-select-header",pcFilter:"p-select-filter",listContainer:"p-select-list-container",list:"p-select-list",optionGroup:"p-select-option-group",optionGroupLabel:"p-select-option-group-label",option:function(e){var n=e.instance,r=e.props,o=e.state,l=e.option,h=e.focusedOption;return["p-select-option",{"p-select-option-selected":n.isSelected(l)&&r.highlightOnSelect,"p-focus":o.focusedOptionIndex===h,"p-disabled":n.isOptionDisabled(l)}]},optionLabel:"p-select-option-label",optionCheckIcon:"p-select-option-check-icon",optionBlankIcon:"p-select-option-blank-icon",emptyMessage:"p-select-empty-message"},mue=Uo.extend({name:"select",theme:Aue,classes:pue}),gue={name:"BaseSelect",extends:Ro,props:{modelValue:null,options:Array,optionLabel:[String,Function],optionValue:[String,Function],optionDisabled:[String,Function],optionGroupLabel:[String,Function],optionGroupChildren:[String,Function],scrollHeight:{type:String,default:"14rem"},filter:Boolean,filterPlaceholder:String,filterLocale:String,filterMatchMode:{type:String,default:"contains"},filterFields:{type:Array,default:null},editable:Boolean,placeholder:{type:String,default:null},variant:{type:String,default:null},invalid:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},dataKey:null,showClear:{type:Boolean,default:!1},fluid:{type:Boolean,default:null},inputId:{type:String,default:null},inputClass:{type:[String,Object],default:null},inputStyle:{type:Object,default:null},labelId:{type:String,default:null},labelClass:{type:[String,Object],default:null},labelStyle:{type:Object,default:null},panelClass:{type:[String,Object],default:null},overlayStyle:{type:Object,default:null},overlayClass:{type:[String,Object],default:null},panelStyle:{type:Object,default:null},appendTo:{type:[String,Object],default:"body"},loading:{type:Boolean,default:!1},clearIcon:{type:String,default:void 0},dropdownIcon:{type:String,default:void 0},filterIcon:{type:String,default:void 0},loadingIcon:{type:String,default:void 0},resetFilterOnHide:{type:Boolean,default:!1},resetFilterOnClear:{type:Boolean,default:!1},virtualScrollerOptions:{type:Object,default:null},autoOptionFocus:{type:Boolean,default:!1},autoFilterFocus:{type:Boolean,default:!1},selectOnFocus:{type:Boolean,default:!1},focusOnHover:{type:Boolean,default:!0},highlightOnSelect:{type:Boolean,default:!0},checkmark:{type:Boolean,default:!1},filterMessage:{type:String,default:null},selectionMessage:{type:String,default:null},emptySelectionMessage:{type:String,default:null},emptyFilterMessage:{type:String,default:null},emptyMessage:{type:String,default:null},tabindex:{type:Number,default:0},ariaLabel:{type:String,default:null},ariaLabelledby:{type:String,default:null}},style:mue,provide:function(){return{$pcSelect:this,$parentInstance:this}}};function m1(t){"@babel/helpers - typeof";return m1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m1(t)}function yue(t){return wue(t)||bue(t)||vue(t)||_ue()}function _ue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vue(t,e){if(t){if(typeof t=="string")return cI(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cI(t,e):void 0}}function bue(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function wue(t){if(Array.isArray(t))return cI(t)}function cI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function uD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function hD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uD(Object(n),!0).forEach(function(r){H7(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function H7(t,e,n){return(e=xue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xue(t){var e=Cue(t,"string");return m1(e)=="symbol"?e:e+""}function Cue(t,e){if(m1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(m1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var NE={name:"Select",extends:gue,inheritAttrs:!1,emits:["update:modelValue","change","focus","blur","before-show","before-hide","show","hide","filter"],inject:{$pcFluid:{default:null}},outsideClickListener:null,scrollHandler:null,resizeListener:null,labelClickListener:null,overlay:null,list:null,virtualScroller:null,searchTimeout:null,searchValue:null,isModelValueChanged:!1,data:function(){return{id:this.$attrs.id,clicked:!1,focused:!1,focusedOptionIndex:-1,filterValue:null,overlayVisible:!1}},watch:{"$attrs.id":function(e){this.id=e||Af()},modelValue:function(){this.isModelValueChanged=!0},options:function(){this.autoUpdateModel()}},mounted:function(){this.id=this.id||Af(),this.autoUpdateModel(),this.bindLabelClickListener()},updated:function(){this.overlayVisible&&this.isModelValueChanged&&this.scrollInView(this.findSelectedOptionIndex()),this.isModelValueChanged=!1},beforeUnmount:function(){this.unbindOutsideClickListener(),this.unbindResizeListener(),this.unbindLabelClickListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&(Jy.clear(this.overlay),this.overlay=null)},methods:{getOptionIndex:function(e,n){return this.virtualScrollerDisabled?e:n&&n(e).index},getOptionLabel:function(e){return this.optionLabel?po(e,this.optionLabel):e},getOptionValue:function(e){return this.optionValue?po(e,this.optionValue):e},getOptionRenderKey:function(e,n){return(this.dataKey?po(e,this.dataKey):this.getOptionLabel(e))+"_"+n},getPTItemOptions:function(e,n,r,o){return this.ptm(o,{context:{option:e,index:r,selected:this.isSelected(e),focused:this.focusedOptionIndex===this.getOptionIndex(r,n),disabled:this.isOptionDisabled(e)}})},isOptionDisabled:function(e){return this.optionDisabled?po(e,this.optionDisabled):!1},isOptionGroup:function(e){return this.optionGroupLabel&&e.optionGroup&&e.group},getOptionGroupLabel:function(e){return po(e,this.optionGroupLabel)},getOptionGroupChildren:function(e){return po(e,this.optionGroupChildren)},getAriaPosInset:function(e){var n=this;return(this.optionGroupLabel?e-this.visibleOptions.slice(0,e).filter(function(r){return n.isOptionGroup(r)}).length:e)+1},show:function(e){this.$emit("before-show"),this.overlayVisible=!0,this.focusedOptionIndex=this.focusedOptionIndex!==-1?this.focusedOptionIndex:this.autoOptionFocus?this.findFirstFocusedOptionIndex():this.editable?-1:this.findSelectedOptionIndex(),e&&au(this.$refs.focusInput)},hide:function(e){var n=this,r=function(){n.$emit("before-hide"),n.overlayVisible=!1,n.clicked=!1,n.focusedOptionIndex=-1,n.searchValue="",n.resetFilterOnHide&&(n.filterValue=null),e&&au(n.$refs.focusInput)};setTimeout(function(){r()},0)},onFocus:function(e){this.disabled||(this.focused=!0,this.overlayVisible&&(this.focusedOptionIndex=this.focusedOptionIndex!==-1?this.focusedOptionIndex:this.autoOptionFocus?this.findFirstFocusedOptionIndex():this.editable?-1:this.findSelectedOptionIndex(),this.scrollInView(this.focusedOptionIndex)),this.$emit("focus",e))},onBlur:function(e){this.focused=!1,this.focusedOptionIndex=-1,this.searchValue="",this.$emit("blur",e)},onKeyDown:function(e){if(this.disabled||Zae()){e.preventDefault();return}var n=e.metaKey||e.ctrlKey;switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e,this.editable);break;case"ArrowLeft":case"ArrowRight":this.onArrowLeftKey(e,this.editable);break;case"Home":this.onHomeKey(e,this.editable);break;case"End":this.onEndKey(e,this.editable);break;case"PageDown":this.onPageDownKey(e);break;case"PageUp":this.onPageUpKey(e);break;case"Space":this.onSpaceKey(e,this.editable);break;case"Enter":case"NumpadEnter":this.onEnterKey(e);break;case"Escape":this.onEscapeKey(e);break;case"Tab":this.onTabKey(e);break;case"Backspace":this.onBackspaceKey(e,this.editable);break;case"ShiftLeft":case"ShiftRight":break;default:!n&&Iae(e.key)&&(!this.overlayVisible&&this.show(),!this.editable&&this.searchOptions(e,e.key));break}this.clicked=!1},onEditableInput:function(e){var n=e.target.value;this.searchValue="";var r=this.searchOptions(e,n);!r&&(this.focusedOptionIndex=-1),this.updateModel(e,n),!this.overlayVisible&&Lo(n)&&this.show()},onContainerClick:function(e){this.disabled||this.loading||e.target.tagName==="INPUT"||e.target.getAttribute("data-pc-section")==="clearicon"||e.target.closest('[data-pc-section="clearicon"]')||((!this.overlay||!this.overlay.contains(e.target))&&(this.overlayVisible?this.hide(!0):this.show(!0)),this.clicked=!0)},onClearClick:function(e){this.updateModel(e,null),this.resetFilterOnClear&&(this.filterValue=null)},onFirstHiddenFocus:function(e){var n=e.relatedTarget===this.$refs.focusInput?Xm(this.overlay,':not([data-p-hidden-focusable="true"])'):this.$refs.focusInput;au(n)},onLastHiddenFocus:function(e){var n=e.relatedTarget===this.$refs.focusInput?B7(this.overlay,':not([data-p-hidden-focusable="true"])'):this.$refs.focusInput;au(n)},onOptionSelect:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=this.getOptionValue(n);this.updateModel(e,o),r&&this.hide(!0)},onOptionMouseMove:function(e,n){this.focusOnHover&&this.changeFocusedOptionIndex(e,n)},onFilterChange:function(e){var n=e.target.value;this.filterValue=n,this.focusedOptionIndex=-1,this.$emit("filter",{originalEvent:e,value:n}),!this.virtualScrollerDisabled&&this.virtualScroller.scrollToIndex(0)},onFilterKeyDown:function(e){switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e,!0);break;case"ArrowLeft":case"ArrowRight":this.onArrowLeftKey(e,!0);break;case"Home":this.onHomeKey(e,!0);break;case"End":this.onEndKey(e,!0);break;case"Enter":case"NumpadEnter":this.onEnterKey(e);break;case"Escape":this.onEscapeKey(e);break;case"Tab":this.onTabKey(e,!0);break}},onFilterBlur:function(){this.focusedOptionIndex=-1},onFilterUpdated:function(){this.overlayVisible&&this.alignOverlay()},onOverlayClick:function(e){Mp.emit("overlay-click",{originalEvent:e,target:this.$el})},onOverlayKeyDown:function(e){switch(e.code){case"Escape":this.onEscapeKey(e);break}},onArrowDownKey:function(e){if(!this.overlayVisible)this.show(),this.editable&&this.changeFocusedOptionIndex(e,this.findSelectedOptionIndex());else{var n=this.focusedOptionIndex!==-1?this.findNextOptionIndex(this.focusedOptionIndex):this.clicked?this.findFirstOptionIndex():this.findFirstFocusedOptionIndex();this.changeFocusedOptionIndex(e,n)}e.preventDefault()},onArrowUpKey:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.altKey&&!n)this.focusedOptionIndex!==-1&&this.onOptionSelect(e,this.visibleOptions[this.focusedOptionIndex]),this.overlayVisible&&this.hide(),e.preventDefault();else{var r=this.focusedOptionIndex!==-1?this.findPrevOptionIndex(this.focusedOptionIndex):this.clicked?this.findLastOptionIndex():this.findLastFocusedOptionIndex();this.changeFocusedOptionIndex(e,r),!this.overlayVisible&&this.show(),e.preventDefault()}},onArrowLeftKey:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n&&(this.focusedOptionIndex=-1)},onHomeKey:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(n){var r=e.currentTarget;e.shiftKey?r.setSelectionRange(0,e.target.selectionStart):(r.setSelectionRange(0,0),this.focusedOptionIndex=-1)}else this.changeFocusedOptionIndex(e,this.findFirstOptionIndex()),!this.overlayVisible&&this.show();e.preventDefault()},onEndKey:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(n){var r=e.currentTarget;if(e.shiftKey)r.setSelectionRange(e.target.selectionStart,r.value.length);else{var o=r.value.length;r.setSelectionRange(o,o),this.focusedOptionIndex=-1}}else this.changeFocusedOptionIndex(e,this.findLastOptionIndex()),!this.overlayVisible&&this.show();e.preventDefault()},onPageUpKey:function(e){this.scrollInView(0),e.preventDefault()},onPageDownKey:function(e){this.scrollInView(this.visibleOptions.length-1),e.preventDefault()},onEnterKey:function(e){this.overlayVisible?(this.focusedOptionIndex!==-1&&this.onOptionSelect(e,this.visibleOptions[this.focusedOptionIndex]),this.hide()):(this.focusedOptionIndex=-1,this.onArrowDownKey(e)),e.preventDefault()},onSpaceKey:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;!n&&this.onEnterKey(e)},onEscapeKey:function(e){this.overlayVisible&&this.hide(!0),e.preventDefault(),e.stopPropagation()},onTabKey:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n||(this.overlayVisible&&this.hasFocusableElements()?(au(this.$refs.firstHiddenFocusableElementOnOverlay),e.preventDefault()):(this.focusedOptionIndex!==-1&&this.onOptionSelect(e,this.visibleOptions[this.focusedOptionIndex]),this.overlayVisible&&this.hide(this.filter)))},onBackspaceKey:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n&&!this.overlayVisible&&this.show()},onOverlayEnter:function(e){Jy.set("overlay",e,this.$primevue.config.zIndex.overlay),CC(e,{position:"absolute",top:"0",left:"0"}),this.alignOverlay(),this.scrollInView(),this.autoFilterFocus&&au(this.$refs.filterInput.$el)},onOverlayAfterEnter:function(){this.bindOutsideClickListener(),this.bindScrollListener(),this.bindResizeListener(),this.$emit("show")},onOverlayLeave:function(){this.unbindOutsideClickListener(),this.unbindScrollListener(),this.unbindResizeListener(),this.autoFilterFocus&&au(this.$refs.focusInput),this.$emit("hide"),this.overlay=null},onOverlayAfterLeave:function(e){Jy.clear(e)},alignOverlay:function(){this.appendTo==="self"?Gae(this.overlay,this.$el):(this.overlay.style.minWidth=Sh(this.$el)+"px",C7(this.overlay,this.$el))},bindOutsideClickListener:function(){var e=this;this.outsideClickListener||(this.outsideClickListener=function(n){e.overlayVisible&&e.overlay&&!e.$el.contains(n.target)&&!e.overlay.contains(n.target)&&e.hide()},document.addEventListener("click",this.outsideClickListener))},unbindOutsideClickListener:function(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)},bindScrollListener:function(){var e=this;this.scrollHandler||(this.scrollHandler=new P7(this.$refs.container,function(){e.overlayVisible&&e.hide()})),this.scrollHandler.bindScrollListener()},unbindScrollListener:function(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener:function(){var e=this;this.resizeListener||(this.resizeListener=function(){e.overlayVisible&&!I7()&&e.hide()},window.addEventListener("resize",this.resizeListener))},unbindResizeListener:function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},bindLabelClickListener:function(){var e=this;if(!this.editable&&!this.labelClickListener){var n=document.querySelector('label[for="'.concat(this.inputId,'"]'));n&&SC(n)&&(this.labelClickListener=function(){au(e.$refs.focusInput)},n.addEventListener("click",this.labelClickListener))}},unbindLabelClickListener:function(){if(this.labelClickListener){var e=document.querySelector('label[for="'.concat(this.inputId,'"]'));e&&SC(e)&&e.removeEventListener("click",this.labelClickListener)}},hasFocusableElements:function(){return P4(this.overlay,':not([data-p-hidden-focusable="true"])').length>0},isOptionMatched:function(e){var n;return this.isValidOption(e)&&typeof this.getOptionLabel(e)=="string"&&((n=this.getOptionLabel(e))===null||n===void 0?void 0:n.toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale)))},isValidOption:function(e){return Lo(e)&&!(this.isOptionDisabled(e)||this.isOptionGroup(e))},isValidSelectedOption:function(e){return this.isValidOption(e)&&this.isSelected(e)},isSelected:function(e){return this.isValidOption(e)&&Fg(this.modelValue,this.getOptionValue(e),this.equalityKey)},findFirstOptionIndex:function(){var e=this;return this.visibleOptions.findIndex(function(n){return e.isValidOption(n)})},findLastOptionIndex:function(){var e=this;return RO(this.visibleOptions,function(n){return e.isValidOption(n)})},findNextOptionIndex:function(e){var n=this,r=e<this.visibleOptions.length-1?this.visibleOptions.slice(e+1).findIndex(function(o){return n.isValidOption(o)}):-1;return r>-1?r+e+1:e},findPrevOptionIndex:function(e){var n=this,r=e>0?RO(this.visibleOptions.slice(0,e),function(o){return n.isValidOption(o)}):-1;return r>-1?r:e},findSelectedOptionIndex:function(){var e=this;return this.hasSelectedOption?this.visibleOptions.findIndex(function(n){return e.isValidSelectedOption(n)}):-1},findFirstFocusedOptionIndex:function(){var e=this.findSelectedOptionIndex();return e<0?this.findFirstOptionIndex():e},findLastFocusedOptionIndex:function(){var e=this.findSelectedOptionIndex();return e<0?this.findLastOptionIndex():e},searchOptions:function(e,n){var r=this;this.searchValue=(this.searchValue||"")+n;var o=-1,l=!1;return Lo(this.searchValue)&&(this.focusedOptionIndex!==-1?(o=this.visibleOptions.slice(this.focusedOptionIndex).findIndex(function(h){return r.isOptionMatched(h)}),o=o===-1?this.visibleOptions.slice(0,this.focusedOptionIndex).findIndex(function(h){return r.isOptionMatched(h)}):o+this.focusedOptionIndex):o=this.visibleOptions.findIndex(function(h){return r.isOptionMatched(h)}),o!==-1&&(l=!0),o===-1&&this.focusedOptionIndex===-1&&(o=this.findFirstFocusedOptionIndex()),o!==-1&&this.changeFocusedOptionIndex(e,o)),this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(function(){r.searchValue="",r.searchTimeout=null},500),l},changeFocusedOptionIndex:function(e,n){this.focusedOptionIndex!==n&&(this.focusedOptionIndex=n,this.scrollInView(),this.selectOnFocus&&this.onOptionSelect(e,this.visibleOptions[n],!1))},scrollInView:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1;this.$nextTick(function(){var r=n!==-1?"".concat(e.id,"_").concat(n):e.focusedOptionId,o=kp(e.list,'li[id="'.concat(r,'"]'));o?o.scrollIntoView&&o.scrollIntoView({block:"nearest",inline:"start"}):e.virtualScrollerDisabled||e.virtualScroller&&e.virtualScroller.scrollToIndex(n!==-1?n:e.focusedOptionIndex)})},autoUpdateModel:function(){this.selectOnFocus&&this.autoOptionFocus&&!this.hasSelectedOption&&(this.focusedOptionIndex=this.findFirstFocusedOptionIndex(),this.onOptionSelect(null,this.visibleOptions[this.focusedOptionIndex],!1))},updateModel:function(e,n){this.$emit("update:modelValue",n),this.$emit("change",{originalEvent:e,value:n})},flatOptions:function(e){var n=this;return(e||[]).reduce(function(r,o,l){r.push({optionGroup:o,group:!0,index:l});var h=n.getOptionGroupChildren(o);return h&&h.forEach(function(p){return r.push(p)}),r},[])},overlayRef:function(e){this.overlay=e},listRef:function(e,n){this.list=e,n&&n(e)},virtualScrollerRef:function(e){this.virtualScroller=e}},computed:{visibleOptions:function(){var e=this,n=this.optionGroupLabel?this.flatOptions(this.options):this.options||[];if(this.filterValue){var r=oI.filter(n,this.searchFields,this.filterValue,this.filterMatchMode,this.filterLocale);if(this.optionGroupLabel){var o=this.options||[],l=[];return o.forEach(function(h){var p=e.getOptionGroupChildren(h),i=p.filter(function(b){return r.includes(b)});i.length>0&&l.push(hD(hD({},h),{},H7({},typeof e.optionGroupChildren=="string"?e.optionGroupChildren:"items",yue(i))))}),this.flatOptions(l)}return r}return n},hasSelectedOption:function(){return Lo(this.modelValue)},label:function(){var e=this.findSelectedOptionIndex();return e!==-1?this.getOptionLabel(this.visibleOptions[e]):this.placeholder||"p-emptylabel"},editableInputValue:function(){var e=this.findSelectedOptionIndex();return e!==-1?this.getOptionLabel(this.visibleOptions[e]):this.modelValue||""},equalityKey:function(){return this.optionValue?null:this.dataKey},searchFields:function(){return this.filterFields||[this.optionLabel]},filterResultMessageText:function(){return Lo(this.visibleOptions)?this.filterMessageText.replaceAll("{0}",this.visibleOptions.length):this.emptyFilterMessageText},filterMessageText:function(){return this.filterMessage||this.$primevue.config.locale.searchMessage||""},emptyFilterMessageText:function(){return this.emptyFilterMessage||this.$primevue.config.locale.emptySearchMessage||this.$primevue.config.locale.emptyFilterMessage||""},emptyMessageText:function(){return this.emptyMessage||this.$primevue.config.locale.emptyMessage||""},selectionMessageText:function(){return this.selectionMessage||this.$primevue.config.locale.selectionMessage||""},emptySelectionMessageText:function(){return this.emptySelectionMessage||this.$primevue.config.locale.emptySelectionMessage||""},selectedMessageText:function(){return this.hasSelectedOption?this.selectionMessageText.replaceAll("{0}","1"):this.emptySelectionMessageText},focusedOptionId:function(){return this.focusedOptionIndex!==-1?"".concat(this.id,"_").concat(this.focusedOptionIndex):null},ariaSetSize:function(){var e=this;return this.visibleOptions.filter(function(n){return!e.isOptionGroup(n)}).length},isClearIconVisible:function(){return this.showClear&&this.modelValue!=null&&Lo(this.options)},virtualScrollerDisabled:function(){return!this.virtualScrollerOptions},hasFluid:function(){return mu(this.fluid)?!!this.$pcFluid:this.fluid}},directives:{ripple:pm},components:{InputText:O4,VirtualScroller:U4,Portal:D4,InputIcon:V7,IconField:z7,TimesIcon:M4,ChevronDownIcon:UE,SpinnerIcon:rb,SearchIcon:N7,CheckIcon:$_,BlankIcon:U7}},Eue=["id"],Bue=["id","value","placeholder","tabindex","disabled","aria-label","aria-labelledby","aria-expanded","aria-controls","aria-activedescendant","aria-invalid"],Sue=["id","tabindex","aria-label","aria-labelledby","aria-expanded","aria-controls","aria-activedescendant","aria-disabled"],Tue=["id"],Iue=["id"],Pue=["id","aria-label","aria-selected","aria-disabled","aria-setsize","aria-posinset","onClick","onMousemove","data-p-selected","data-p-focused","data-p-disabled"];function Lue(t,e,n,r,o,l){var h=Nr("SpinnerIcon"),p=Nr("InputText"),i=Nr("SearchIcon"),b=Nr("InputIcon"),E=Nr("IconField"),I=Nr("CheckIcon"),O=Nr("BlankIcon"),M=Nr("VirtualScroller"),G=Nr("Portal"),q=CA("ripple");return ve(),et("div",It({ref:"container",id:o.id,class:t.cx("root"),onClick:e[11]||(e[11]=function(){return l.onContainerClick&&l.onContainerClick.apply(l,arguments)})},t.ptmi("root")),[t.editable?(ve(),et("input",It({key:0,ref:"focusInput",id:t.labelId||t.inputId,type:"text",class:[t.cx("label"),t.inputClass,t.labelClass],style:[t.inputStyle,t.labelStyle],value:l.editableInputValue,placeholder:t.placeholder,tabindex:t.disabled?-1:t.tabindex,disabled:t.disabled,autocomplete:"off",role:"combobox","aria-label":t.ariaLabel,"aria-labelledby":t.ariaLabelledby,"aria-haspopup":"listbox","aria-expanded":o.overlayVisible,"aria-controls":o.id+"_list","aria-activedescendant":o.focused?l.focusedOptionId:void 0,"aria-invalid":t.invalid||void 0,onFocus:e[0]||(e[0]=function(){return l.onFocus&&l.onFocus.apply(l,arguments)}),onBlur:e[1]||(e[1]=function(){return l.onBlur&&l.onBlur.apply(l,arguments)}),onKeydown:e[2]||(e[2]=function(){return l.onKeyDown&&l.onKeyDown.apply(l,arguments)}),onInput:e[3]||(e[3]=function(){return l.onEditableInput&&l.onEditableInput.apply(l,arguments)})},t.ptm("label")),null,16,Bue)):(ve(),et("span",It({key:1,ref:"focusInput",id:t.labelId||t.inputId,class:[t.cx("label"),t.inputClass,t.labelClass],style:[t.inputStyle,t.labelStyle],tabindex:t.disabled?-1:t.tabindex,role:"combobox","aria-label":t.ariaLabel||(l.label==="p-emptylabel"?void 0:l.label),"aria-labelledby":t.ariaLabelledby,"aria-haspopup":"listbox","aria-expanded":o.overlayVisible,"aria-controls":o.id+"_list","aria-activedescendant":o.focused?l.focusedOptionId:void 0,"aria-disabled":t.disabled,onFocus:e[4]||(e[4]=function(){return l.onFocus&&l.onFocus.apply(l,arguments)}),onBlur:e[5]||(e[5]=function(){return l.onBlur&&l.onBlur.apply(l,arguments)}),onKeydown:e[6]||(e[6]=function(){return l.onKeyDown&&l.onKeyDown.apply(l,arguments)})},t.ptm("label")),[Xt(t.$slots,"value",{value:t.modelValue,placeholder:t.placeholder},function(){return[jr(Ar(l.label==="p-emptylabel"?" ":l.label||"empty"),1)]})],16,Sue)),l.isClearIconVisible?Xt(t.$slots,"clearicon",{key:2,class:On(t.cx("clearIcon")),clearCallback:l.onClearClick},function(){return[(ve(),hn(mr(t.clearIcon?"i":"TimesIcon"),It({ref:"clearIcon",class:[t.cx("clearIcon"),t.clearIcon],onClick:l.onClearClick},t.ptm("clearIcon"),{"data-pc-section":"clearicon"}),null,16,["class","onClick"]))]}):Sn("",!0),mt("div",It({class:t.cx("dropdown")},t.ptm("dropdown")),[t.loading?Xt(t.$slots,"loadingicon",{key:0,class:On(t.cx("loadingIcon"))},function(){return[t.loadingIcon?(ve(),et("span",It({key:0,class:[t.cx("loadingIcon"),"pi-spin",t.loadingIcon],"aria-hidden":"true"},t.ptm("loadingIcon")),null,16)):(ve(),hn(h,It({key:1,class:t.cx("loadingIcon"),spin:"","aria-hidden":"true"},t.ptm("loadingIcon")),null,16,["class"]))]}):Xt(t.$slots,"dropdownicon",{key:1,class:On(t.cx("dropdownIcon"))},function(){return[(ve(),hn(mr(t.dropdownIcon?"span":"ChevronDownIcon"),It({class:[t.cx("dropdownIcon"),t.dropdownIcon],"aria-hidden":"true"},t.ptm("dropdownIcon")),null,16,["class"]))]})],16),Lr(G,{appendTo:t.appendTo},{default:Kn(function(){return[Lr(X1,It({name:"p-connected-overlay",onEnter:l.onOverlayEnter,onAfterEnter:l.onOverlayAfterEnter,onLeave:l.onOverlayLeave,onAfterLeave:l.onOverlayAfterLeave},t.ptm("transition")),{default:Kn(function(){return[o.overlayVisible?(ve(),et("div",It({key:0,ref:l.overlayRef,class:[t.cx("overlay"),t.panelClass,t.overlayClass],style:[t.panelStyle,t.overlayStyle],onClick:e[9]||(e[9]=function(){return l.onOverlayClick&&l.onOverlayClick.apply(l,arguments)}),onKeydown:e[10]||(e[10]=function(){return l.onOverlayKeyDown&&l.onOverlayKeyDown.apply(l,arguments)})},t.ptm("overlay")),[mt("span",It({ref:"firstHiddenFocusableElementOnOverlay",role:"presentation","aria-hidden":"true",class:"p-hidden-accessible p-hidden-focusable",tabindex:0,onFocus:e[7]||(e[7]=function(){return l.onFirstHiddenFocus&&l.onFirstHiddenFocus.apply(l,arguments)})},t.ptm("hiddenFirstFocusableEl"),{"data-p-hidden-accessible":!0,"data-p-hidden-focusable":!0}),null,16),Xt(t.$slots,"header",{value:t.modelValue,options:l.visibleOptions}),t.filter?(ve(),et("div",It({key:0,class:t.cx("header")},t.ptm("header")),[Lr(E,{unstyled:t.unstyled,pt:t.ptm("pcFilterContainer")},{default:Kn(function(){return[Lr(p,{ref:"filterInput",type:"text",value:o.filterValue,onVnodeMounted:l.onFilterUpdated,onVnodeUpdated:l.onFilterUpdated,class:On(t.cx("pcFilter")),placeholder:t.filterPlaceholder,variant:t.variant,unstyled:t.unstyled,role:"searchbox",autocomplete:"off","aria-owns":o.id+"_list","aria-activedescendant":l.focusedOptionId,onKeydown:l.onFilterKeyDown,onBlur:l.onFilterBlur,onInput:l.onFilterChange,pt:t.ptm("pcFilter")},null,8,["value","onVnodeMounted","onVnodeUpdated","class","placeholder","variant","unstyled","aria-owns","aria-activedescendant","onKeydown","onBlur","onInput","pt"]),Lr(b,It({unstyled:t.unstyled},t.ptm("pcFilterIconContainer")),{default:Kn(function(){return[Xt(t.$slots,"filtericon",{},function(){return[t.filterIcon?(ve(),et("span",It({key:0,class:t.filterIcon},t.ptm("filterIcon")),null,16)):(ve(),hn(i,Ks(It({key:1},t.ptm("filterIcon"))),null,16))]})]}),_:3},16,["unstyled"])]}),_:3},8,["unstyled","pt"]),mt("span",It({role:"status","aria-live":"polite",class:"p-hidden-accessible"},t.ptm("hiddenFilterResult"),{"data-p-hidden-accessible":!0}),Ar(l.filterResultMessageText),17)],16)):Sn("",!0),mt("div",It({class:t.cx("listContainer"),style:{"max-height":l.virtualScrollerDisabled?t.scrollHeight:""}},t.ptm("listContainer")),[Lr(M,It({ref:l.virtualScrollerRef},t.virtualScrollerOptions,{items:l.visibleOptions,style:{height:t.scrollHeight},tabindex:-1,disabled:l.virtualScrollerDisabled,pt:t.ptm("virtualScroller")}),gg({content:Kn(function(Z){var Y=Z.styleClass,te=Z.contentRef,be=Z.items,Pe=Z.getItemOptions,Se=Z.contentStyle,Ie=Z.itemSize;return[mt("ul",It({ref:function(ne){return l.listRef(ne,te)},id:o.id+"_list",class:[t.cx("list"),Y],style:Se,role:"listbox"},t.ptm("list")),[(ve(!0),et(_r,null,Li(be,function(Ae,ne){return ve(),et(_r,{key:l.getOptionRenderKey(Ae,l.getOptionIndex(ne,Pe))},[l.isOptionGroup(Ae)?(ve(),et("li",It({key:0,id:o.id+"_"+l.getOptionIndex(ne,Pe),style:{height:Ie?Ie+"px":void 0},class:t.cx("optionGroup"),role:"option",ref_for:!0},t.ptm("optionGroup")),[Xt(t.$slots,"optiongroup",{option:Ae.optionGroup,index:l.getOptionIndex(ne,Pe)},function(){return[mt("span",It({class:t.cx("optionGroupLabel"),ref_for:!0},t.ptm("optionGroupLabel")),Ar(l.getOptionGroupLabel(Ae.optionGroup)),17)]})],16,Iue)):Fo((ve(),et("li",It({key:1,id:o.id+"_"+l.getOptionIndex(ne,Pe),class:t.cx("option",{option:Ae,focusedOption:l.getOptionIndex(ne,Pe)}),style:{height:Ie?Ie+"px":void 0},role:"option","aria-label":l.getOptionLabel(Ae),"aria-selected":l.isSelected(Ae),"aria-disabled":l.isOptionDisabled(Ae),"aria-setsize":l.ariaSetSize,"aria-posinset":l.getAriaPosInset(l.getOptionIndex(ne,Pe)),onClick:function(ye){return l.onOptionSelect(ye,Ae)},onMousemove:function(ye){return l.onOptionMouseMove(ye,l.getOptionIndex(ne,Pe))},"data-p-selected":l.isSelected(Ae),"data-p-focused":o.focusedOptionIndex===l.getOptionIndex(ne,Pe),"data-p-disabled":l.isOptionDisabled(Ae),ref_for:!0},l.getPTItemOptions(Ae,Pe,ne,"option")),[t.checkmark?(ve(),et(_r,{key:0},[l.isSelected(Ae)?(ve(),hn(I,It({key:0,class:t.cx("optionCheckIcon"),ref_for:!0},t.ptm("optionCheckIcon")),null,16,["class"])):(ve(),hn(O,It({key:1,class:t.cx("optionBlankIcon"),ref_for:!0},t.ptm("optionBlankIcon")),null,16,["class"]))],64)):Sn("",!0),Xt(t.$slots,"option",{option:Ae,selected:l.isSelected(Ae),index:l.getOptionIndex(ne,Pe)},function(){return[mt("span",It({class:t.cx("optionLabel"),ref_for:!0},t.ptm("optionLabel")),Ar(l.getOptionLabel(Ae)),17)]})],16,Pue)),[[q]])],64)}),128)),o.filterValue&&(!be||be&&be.length===0)?(ve(),et("li",It({key:0,class:t.cx("emptyMessage"),role:"option"},t.ptm("emptyMessage"),{"data-p-hidden-accessible":!0}),[Xt(t.$slots,"emptyfilter",{},function(){return[jr(Ar(l.emptyFilterMessageText),1)]})],16)):!t.options||t.options&&t.options.length===0?(ve(),et("li",It({key:1,class:t.cx("emptyMessage"),role:"option"},t.ptm("emptyMessage"),{"data-p-hidden-accessible":!0}),[Xt(t.$slots,"empty",{},function(){return[jr(Ar(l.emptyMessageText),1)]})],16)):Sn("",!0)],16,Tue)]}),_:2},[t.$slots.loader?{name:"loader",fn:Kn(function(Z){var Y=Z.options;return[Xt(t.$slots,"loader",{options:Y})]}),key:"0"}:void 0]),1040,["items","style","disabled","pt"])],16),Xt(t.$slots,"footer",{value:t.modelValue,options:l.visibleOptions}),!t.options||t.options&&t.options.length===0?(ve(),et("span",It({key:1,role:"status","aria-live":"polite",class:"p-hidden-accessible"},t.ptm("hiddenEmptyMessage"),{"data-p-hidden-accessible":!0}),Ar(l.emptyMessageText),17)):Sn("",!0),mt("span",It({role:"status","aria-live":"polite",class:"p-hidden-accessible"},t.ptm("hiddenSelectedMessage"),{"data-p-hidden-accessible":!0}),Ar(l.selectedMessageText),17),mt("span",It({ref:"lastHiddenFocusableElementOnOverlay",role:"presentation","aria-hidden":"true",class:"p-hidden-accessible p-hidden-focusable",tabindex:0,onFocus:e[8]||(e[8]=function(){return l.onLastHiddenFocus&&l.onLastHiddenFocus.apply(l,arguments)})},t.ptm("hiddenLastFocusableEl"),{"data-p-hidden-accessible":!0,"data-p-hidden-focusable":!0}),null,16)],16)):Sn("",!0)]}),_:3},16,["onEnter","onAfterEnter","onLeave","onAfterLeave"])]}),_:3},8,["appendTo"])],16,Eue)}NE.render=Lue;var j7={name:"AngleDownIcon",extends:Us},Fue=mt("path",{d:"M3.58659 4.5007C3.68513 4.50023 3.78277 4.51945 3.87379 4.55723C3.9648 4.59501 4.04735 4.65058 4.11659 4.7207L7.11659 7.7207L10.1166 4.7207C10.2619 4.65055 10.4259 4.62911 10.5843 4.65956C10.7427 4.69002 10.8871 4.77074 10.996 4.88976C11.1049 5.00877 11.1726 5.15973 11.1889 5.32022C11.2052 5.48072 11.1693 5.6422 11.0866 5.7807L7.58659 9.2807C7.44597 9.42115 7.25534 9.50004 7.05659 9.50004C6.85784 9.50004 6.66722 9.42115 6.52659 9.2807L3.02659 5.7807C2.88614 5.64007 2.80725 5.44945 2.80725 5.2507C2.80725 5.05195 2.88614 4.86132 3.02659 4.7207C3.09932 4.64685 3.18675 4.58911 3.28322 4.55121C3.37969 4.51331 3.48305 4.4961 3.58659 4.5007Z",fill:"currentColor"},null,-1),Rue=[Fue];function kue(t,e,n,r,o,l){return ve(),et("svg",It({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),Rue,16)}j7.render=kue;var $7={name:"AngleUpIcon",extends:Us},Mue=mt("path",{d:"M10.4134 9.49931C10.3148 9.49977 10.2172 9.48055 10.1262 9.44278C10.0352 9.405 9.95263 9.34942 9.88338 9.27931L6.88338 6.27931L3.88338 9.27931C3.73811 9.34946 3.57409 9.3709 3.41567 9.34044C3.25724 9.30999 3.11286 9.22926 3.00395 9.11025C2.89504 8.99124 2.82741 8.84028 2.8111 8.67978C2.79478 8.51928 2.83065 8.35781 2.91338 8.21931L6.41338 4.71931C6.55401 4.57886 6.74463 4.49997 6.94338 4.49997C7.14213 4.49997 7.33276 4.57886 7.47338 4.71931L10.9734 8.21931C11.1138 8.35994 11.1927 8.55056 11.1927 8.74931C11.1927 8.94806 11.1138 9.13868 10.9734 9.27931C10.9007 9.35315 10.8132 9.41089 10.7168 9.44879C10.6203 9.48669 10.5169 9.5039 10.4134 9.49931Z",fill:"currentColor"},null,-1),Oue=[Mue];function Due(t,e,n,r,o,l){return ve(),et("svg",It({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),Oue,16)}$7.render=Due;var Uue=function(e){var n=e.dt;return`
.p-inputnumber {
    display: inline-flex;
    position: relative;
}

.p-inputnumber-button {
    display: flex;
    align-items: center;
    justify-content: center;
    flex: 0 0 auto;
    cursor: pointer;
    background: `.concat(n("inputnumber.button.background"),`;
    color: `).concat(n("inputnumber.button.color"),`;
    width: `).concat(n("inputnumber.button.width"),`;
    transition: background `).concat(n("inputnumber.transition.duration"),", color ").concat(n("inputnumber.transition.duration"),", border-color ").concat(n("inputnumber.transition.duration"),", outline-color ").concat(n("inputnumber.transition.duration"),`;
}

.p-inputnumber-button:hover {
    background: `).concat(n("inputnumber.button.hover.background"),`;
    color: `).concat(n("inputnumber.button.hover.color"),`;
}

.p-inputnumber-button:active {
    background: `).concat(n("inputnumber.button.active.background"),`;
    color: `).concat(n("inputnumber.button.active.color"),`;
}

.p-inputnumber-stacked .p-inputnumber-button {
    position: relative;
    border: 0 none;
}

.p-inputnumber-stacked .p-inputnumber-button-group {
    display: flex;
    flex-direction: column;
    position: absolute;
    top: 1px;
    right: 1px;
    height: calc(100% - 2px);
    z-index: 1;
}

.p-inputnumber-stacked .p-inputnumber-increment-button {
    padding: 0;
    border-top-right-radius: calc(`).concat(n("inputnumber.button.border.radius"),` - 1px);
}

.p-inputnumber-stacked .p-inputnumber-decrement-button {
    padding: 0;
    border-bottom-right-radius: calc(`).concat(n("inputnumber.button.border.radius"),` - 1px);
}

.p-inputnumber-stacked .p-inputnumber-button {
    flex: 1 1 auto;
    border: 0 none;
}

.p-inputnumber-horizontal .p-inputnumber-button {
    border: 1px solid `).concat(n("inputnumber.button.border.color"),`;
}

.p-inputnumber-horizontal .p-inputnumber-button:hover {
    border-color: `).concat(n("inputnumber.button.hover.border.color"),`;
}

.p-inputnumber-horizontal .p-inputnumber-button:active {
    border-color: `).concat(n("inputnumber.button.active.border.color"),`;
}

.p-inputnumber-horizontal .p-inputnumber-increment-button {
    order: 3;
    border-top-right-radius: `).concat(n("inputnumber.button.border.radius"),`;
    border-bottom-right-radius: `).concat(n("inputnumber.button.border.radius"),`;
    border-left: 0 none;
}

.p-inputnumber-horizontal .p-inputnumber-input {
    order: 2;
    border-radius: 0;
}

.p-inputnumber-horizontal .p-inputnumber-decrement-button {
    order: 1;
    border-top-left-radius: `).concat(n("inputnumber.button.border.radius"),`;
    border-bottom-left-radius: `).concat(n("inputnumber.button.border.radius"),`;
    border-right: 0 none;
}

.p-inputnumber-vertical {
    flex-direction: column;
}

.p-inputnumber-vertical .p-inputnumber-button {
    border: 1px solid `).concat(n("inputnumber.button.border.color"),`;
    padding: `).concat(n("inputnumber.button.vertical.padding"),`; 0;
}

.p-inputnumber-vertical .p-inputnumber-button:hover {
    border-color: `).concat(n("inputnumber.button.hover.border.color"),`;
}

.p-inputnumber-vertical .p-inputnumber-button:active {
    border-color: `).concat(n("inputnumber.button.active.border.color"),`;
}

.p-inputnumber-vertical .p-inputnumber-increment-button {
    order: 1;
    border-top-left-radius: `).concat(n("inputnumber.button.border.radius"),`;
    border-top-right-radius: `).concat(n("inputnumber.button.border.radius"),`;
    width: 100%;
    border-bottom: 0 none;
}

.p-inputnumber-vertical .p-inputnumber-input {
    order: 2;
    border-radius: 0;
    text-align: center;
}

.p-inputnumber-vertical .p-inputnumber-decrement-button {
    order: 3;
    border-bottom-left-radius: `).concat(n("inputnumber.button.border.radius"),`;
    border-bottom-right-radius: `).concat(n("inputnumber.button.border.radius"),`;
    width: 100%;
    border-top: 0 none;
}

.p-inputnumber-input {
    flex: 1 1 auto;
}

.p-inputnumber-fluid {
    width: 100%;
}

.p-inputnumber-fluid .p-inputnumber-input {
    width: 1%;
}

.p-inputnumber-fluid.p-inputnumber-vertical .p-inputnumber-input {
    width: 100%;
}
`)},Nue={root:function(e){var n=e.instance,r=e.props;return["p-inputnumber p-component p-inputwrapper",{"p-inputwrapper-filled":n.filled||r.allowEmpty===!1,"p-inputwrapper-focus":n.focused,"p-inputnumber-stacked":r.showButtons&&r.buttonLayout==="stacked","p-inputnumber-horizontal":r.showButtons&&r.buttonLayout==="horizontal","p-inputnumber-vertical":r.showButtons&&r.buttonLayout==="vertical","p-inputnumber-fluid":n.hasFluid}]},pcInput:"p-inputnumber-input",buttonGroup:"p-inputnumber-button-group",incrementButton:function(e){var n=e.instance,r=e.props;return["p-inputnumber-button p-inputnumber-increment-button",{"p-disabled":r.showButtons&&r.max!==null&&n.maxBoundry()}]},decrementButton:function(e){var n=e.instance,r=e.props;return["p-inputnumber-button p-inputnumber-decrement-button",{"p-disabled":r.showButtons&&r.min!==null&&n.minBoundry()}]}},zue=Uo.extend({name:"inputnumber",theme:Uue,classes:Nue}),Vue={name:"BaseInputNumber",extends:Ro,props:{modelValue:{type:Number,default:null},format:{type:Boolean,default:!0},showButtons:{type:Boolean,default:!1},buttonLayout:{type:String,default:"stacked"},incrementButtonClass:{type:String,default:null},decrementButtonClass:{type:String,default:null},incrementButtonIcon:{type:String,default:void 0},incrementIcon:{type:String,default:void 0},decrementButtonIcon:{type:String,default:void 0},decrementIcon:{type:String,default:void 0},locale:{type:String,default:void 0},localeMatcher:{type:String,default:void 0},mode:{type:String,default:"decimal"},prefix:{type:String,default:null},suffix:{type:String,default:null},currency:{type:String,default:void 0},currencyDisplay:{type:String,default:void 0},useGrouping:{type:Boolean,default:!0},minFractionDigits:{type:Number,default:void 0},maxFractionDigits:{type:Number,default:void 0},roundingMode:{type:String,default:"halfExpand",validator:function(e){return["ceil","floor","expand","trunc","halfCeil","halfFloor","halfExpand","halfTrunc","halfEven"].includes(e)}},min:{type:Number,default:null},max:{type:Number,default:null},step:{type:Number,default:1},allowEmpty:{type:Boolean,default:!0},highlightOnFocus:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},variant:{type:String,default:null},invalid:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:null},fluid:{type:Boolean,default:null},inputId:{type:String,default:null},inputClass:{type:[String,Object],default:null},inputStyle:{type:Object,default:null},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:zue,provide:function(){return{$pcInputNumber:this,$parentInstance:this}}};function g1(t){"@babel/helpers - typeof";return g1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g1(t)}function dD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function fD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dD(Object(n),!0).forEach(function(r){Que(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Que(t,e,n){return(e=Hue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hue(t){var e=jue(t,"string");return g1(e)=="symbol"?e:e+""}function jue(t,e){if(g1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(g1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $ue(t){return Wue(t)||que(t)||Kue(t)||Gue()}function Gue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kue(t,e){if(t){if(typeof t=="string")return uI(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?uI(t,e):void 0}}function que(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Wue(t){if(Array.isArray(t))return uI(t)}function uI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var G7={name:"InputNumber",extends:Vue,inheritAttrs:!1,emits:["update:modelValue","input","focus","blur"],inject:{$pcFluid:{default:null}},numberFormat:null,_numeral:null,_decimal:null,_group:null,_minusSign:null,_currency:null,_suffix:null,_prefix:null,_index:null,groupChar:"",isSpecialChar:null,prefixChar:null,suffixChar:null,timer:null,data:function(){return{d_modelValue:this.modelValue,focused:!1}},watch:{modelValue:function(e){this.d_modelValue=e},locale:function(e,n){this.updateConstructParser(e,n)},localeMatcher:function(e,n){this.updateConstructParser(e,n)},mode:function(e,n){this.updateConstructParser(e,n)},currency:function(e,n){this.updateConstructParser(e,n)},currencyDisplay:function(e,n){this.updateConstructParser(e,n)},useGrouping:function(e,n){this.updateConstructParser(e,n)},minFractionDigits:function(e,n){this.updateConstructParser(e,n)},maxFractionDigits:function(e,n){this.updateConstructParser(e,n)},suffix:function(e,n){this.updateConstructParser(e,n)},prefix:function(e,n){this.updateConstructParser(e,n)}},created:function(){this.constructParser()},methods:{getOptions:function(){return{localeMatcher:this.localeMatcher,style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,useGrouping:this.useGrouping,minimumFractionDigits:this.minFractionDigits,maximumFractionDigits:this.maxFractionDigits,roundingMode:this.roundingMode}},constructParser:function(){this.numberFormat=new Intl.NumberFormat(this.locale,this.getOptions());var e=$ue(new Intl.NumberFormat(this.locale,{useGrouping:!1}).format(9876543210)).reverse(),n=new Map(e.map(function(r,o){return[r,o]}));this._numeral=new RegExp("[".concat(e.join(""),"]"),"g"),this._group=this.getGroupingExpression(),this._minusSign=this.getMinusSignExpression(),this._currency=this.getCurrencyExpression(),this._decimal=this.getDecimalExpression(),this._suffix=this.getSuffixExpression(),this._prefix=this.getPrefixExpression(),this._index=function(r){return n.get(r)}},updateConstructParser:function(e,n){e!==n&&this.constructParser()},escapeRegExp:function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},getDecimalExpression:function(){var e=new Intl.NumberFormat(this.locale,fD(fD({},this.getOptions()),{},{useGrouping:!1}));return new RegExp("[".concat(e.format(1.1).replace(this._currency,"").trim().replace(this._numeral,""),"]"),"g")},getGroupingExpression:function(){var e=new Intl.NumberFormat(this.locale,{useGrouping:!0});return this.groupChar=e.format(1e6).trim().replace(this._numeral,"").charAt(0),new RegExp("[".concat(this.groupChar,"]"),"g")},getMinusSignExpression:function(){var e=new Intl.NumberFormat(this.locale,{useGrouping:!1});return new RegExp("[".concat(e.format(-1).trim().replace(this._numeral,""),"]"),"g")},getCurrencyExpression:function(){if(this.currency){var e=new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0,roundingMode:this.roundingMode});return new RegExp("[".concat(e.format(1).replace(/\s/g,"").replace(this._numeral,"").replace(this._group,""),"]"),"g")}return new RegExp("[]","g")},getPrefixExpression:function(){if(this.prefix)this.prefixChar=this.prefix;else{var e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay});this.prefixChar=e.format(1).split("1")[0]}return new RegExp("".concat(this.escapeRegExp(this.prefixChar||"")),"g")},getSuffixExpression:function(){if(this.suffix)this.suffixChar=this.suffix;else{var e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0,roundingMode:this.roundingMode});this.suffixChar=e.format(1).split("1")[1]}return new RegExp("".concat(this.escapeRegExp(this.suffixChar||"")),"g")},formatValue:function(e){if(e!=null){if(e==="-")return e;if(this.format){var n=new Intl.NumberFormat(this.locale,this.getOptions()),r=n.format(e);return this.prefix&&(r=this.prefix+r),this.suffix&&(r=r+this.suffix),r}return e.toString()}return""},parseValue:function(e){var n=e.replace(this._suffix,"").replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").replace(this._group,"").replace(this._minusSign,"-").replace(this._decimal,".").replace(this._numeral,this._index);if(n){if(n==="-")return n;var r=+n;return isNaN(r)?null:r}return null},repeat:function(e,n,r){var o=this;if(!this.readonly){var l=n||500;this.clearTimer(),this.timer=setTimeout(function(){o.repeat(e,40,r)},l),this.spin(e,r)}},spin:function(e,n){if(this.$refs.input){var r=this.step*n,o=this.parseValue(this.$refs.input.$el.value)||0,l=this.validateValue(o+r);this.updateInput(l,null,"spin"),this.updateModel(e,l),this.handleOnInput(e,o,l)}},onUpButtonMouseDown:function(e){this.disabled||(this.$refs.input.$el.focus(),this.repeat(e,null,1),e.preventDefault())},onUpButtonMouseUp:function(){this.disabled||this.clearTimer()},onUpButtonMouseLeave:function(){this.disabled||this.clearTimer()},onUpButtonKeyUp:function(){this.disabled||this.clearTimer()},onUpButtonKeyDown:function(e){(e.code==="Space"||e.code==="Enter"||e.code==="NumpadEnter")&&this.repeat(e,null,1)},onDownButtonMouseDown:function(e){this.disabled||(this.$refs.input.$el.focus(),this.repeat(e,null,-1),e.preventDefault())},onDownButtonMouseUp:function(){this.disabled||this.clearTimer()},onDownButtonMouseLeave:function(){this.disabled||this.clearTimer()},onDownButtonKeyUp:function(){this.disabled||this.clearTimer()},onDownButtonKeyDown:function(e){(e.code==="Space"||e.code==="Enter"||e.code==="NumpadEnter")&&this.repeat(e,null,-1)},onUserInput:function(){this.isSpecialChar&&(this.$refs.input.$el.value=this.lastValue),this.isSpecialChar=!1},onInputKeyDown:function(e){if(!this.readonly){if(e.altKey||e.ctrlKey||e.metaKey){this.isSpecialChar=!0,this.lastValue=this.$refs.input.$el.value;return}this.lastValue=e.target.value;var n=e.target.selectionStart,r=e.target.selectionEnd,o=e.target.value,l=null;switch(e.code){case"ArrowUp":this.spin(e,1),e.preventDefault();break;case"ArrowDown":this.spin(e,-1),e.preventDefault();break;case"ArrowLeft":this.isNumeralChar(o.charAt(n-1))||e.preventDefault();break;case"ArrowRight":this.isNumeralChar(o.charAt(n))||e.preventDefault();break;case"Tab":case"Enter":case"NumpadEnter":l=this.validateValue(this.parseValue(o)),this.$refs.input.$el.value=this.formatValue(l),this.$refs.input.$el.setAttribute("aria-valuenow",l),this.updateModel(e,l);break;case"Backspace":{if(e.preventDefault(),n===r){var h=o.charAt(n-1),p=this.getDecimalCharIndexes(o),i=p.decimalCharIndex,b=p.decimalCharIndexWithoutPrefix;if(this.isNumeralChar(h)){var E=this.getDecimalLength(o);if(this._group.test(h))this._group.lastIndex=0,l=o.slice(0,n-2)+o.slice(n-1);else if(this._decimal.test(h))this._decimal.lastIndex=0,E?this.$refs.input.$el.setSelectionRange(n-1,n-1):l=o.slice(0,n-1)+o.slice(n);else if(i>0&&n>i){var I=this.isDecimalMode()&&(this.minFractionDigits||0)<E?"":"0";l=o.slice(0,n-1)+I+o.slice(n)}else b===1?(l=o.slice(0,n-1)+"0"+o.slice(n),l=this.parseValue(l)>0?l:""):l=o.slice(0,n-1)+o.slice(n)}this.updateValue(e,l,null,"delete-single")}else l=this.deleteRange(o,n,r),this.updateValue(e,l,null,"delete-range");break}case"Delete":if(e.preventDefault(),n===r){var O=o.charAt(n),M=this.getDecimalCharIndexes(o),G=M.decimalCharIndex,q=M.decimalCharIndexWithoutPrefix;if(this.isNumeralChar(O)){var Z=this.getDecimalLength(o);if(this._group.test(O))this._group.lastIndex=0,l=o.slice(0,n)+o.slice(n+2);else if(this._decimal.test(O))this._decimal.lastIndex=0,Z?this.$refs.input.$el.setSelectionRange(n+1,n+1):l=o.slice(0,n)+o.slice(n+1);else if(G>0&&n>G){var Y=this.isDecimalMode()&&(this.minFractionDigits||0)<Z?"":"0";l=o.slice(0,n)+Y+o.slice(n+1)}else q===1?(l=o.slice(0,n)+"0"+o.slice(n+1),l=this.parseValue(l)>0?l:""):l=o.slice(0,n)+o.slice(n+1)}this.updateValue(e,l,null,"delete-back-single")}else l=this.deleteRange(o,n,r),this.updateValue(e,l,null,"delete-range");break;case"Home":e.preventDefault(),Lo(this.min)&&this.updateModel(e,this.min);break;case"End":e.preventDefault(),Lo(this.max)&&this.updateModel(e,this.max);break}}},onInputKeyPress:function(e){if(!this.readonly){var n=e.key,r=this.isDecimalSign(n),o=this.isMinusSign(n);e.code!=="Enter"&&e.preventDefault(),(Number(n)>=0&&Number(n)<=9||o||r)&&this.insert(e,n,{isDecimalSign:r,isMinusSign:o})}},onPaste:function(e){e.preventDefault();var n=(e.clipboardData||window.clipboardData).getData("Text");if(n){var r=this.parseValue(n);r!=null&&this.insert(e,r.toString())}},allowMinusSign:function(){return this.min===null||this.min<0},isMinusSign:function(e){return this._minusSign.test(e)||e==="-"?(this._minusSign.lastIndex=0,!0):!1},isDecimalSign:function(e){return this._decimal.test(e)?(this._decimal.lastIndex=0,!0):!1},isDecimalMode:function(){return this.mode==="decimal"},getDecimalCharIndexes:function(e){var n=e.search(this._decimal);this._decimal.lastIndex=0;var r=e.replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,""),o=r.search(this._decimal);return this._decimal.lastIndex=0,{decimalCharIndex:n,decimalCharIndexWithoutPrefix:o}},getCharIndexes:function(e){var n=e.search(this._decimal);this._decimal.lastIndex=0;var r=e.search(this._minusSign);this._minusSign.lastIndex=0;var o=e.search(this._suffix);this._suffix.lastIndex=0;var l=e.search(this._currency);return this._currency.lastIndex=0,{decimalCharIndex:n,minusCharIndex:r,suffixCharIndex:o,currencyCharIndex:l}},insert:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{isDecimalSign:!1,isMinusSign:!1},o=n.search(this._minusSign);if(this._minusSign.lastIndex=0,!(!this.allowMinusSign()&&o!==-1)){var l=this.$refs.input.$el.selectionStart,h=this.$refs.input.$el.selectionEnd,p=this.$refs.input.$el.value.trim(),i=this.getCharIndexes(p),b=i.decimalCharIndex,E=i.minusCharIndex,I=i.suffixCharIndex,O=i.currencyCharIndex,M;if(r.isMinusSign)l===0&&(M=p,(E===-1||h!==0)&&(M=this.insertText(p,n,0,h)),this.updateValue(e,M,n,"insert"));else if(r.isDecimalSign)b>0&&l===b?this.updateValue(e,p,n,"insert"):b>l&&b<h?(M=this.insertText(p,n,l,h),this.updateValue(e,M,n,"insert")):b===-1&&this.maxFractionDigits&&(M=this.insertText(p,n,l,h),this.updateValue(e,M,n,"insert"));else{var G=this.numberFormat.resolvedOptions().maximumFractionDigits,q=l!==h?"range-insert":"insert";if(b>0&&l>b){if(l+n.length-(b+1)<=G){var Z=O>=l?O-1:I>=l?I:p.length;M=p.slice(0,l)+n+p.slice(l+n.length,Z)+p.slice(Z),this.updateValue(e,M,n,q)}}else M=this.insertText(p,n,l,h),this.updateValue(e,M,n,q)}}},insertText:function(e,n,r,o){var l=n==="."?n:n.split(".");if(l.length===2){var h=e.slice(r,o).search(this._decimal);return this._decimal.lastIndex=0,h>0?e.slice(0,r)+this.formatValue(n)+e.slice(o):this.formatValue(n)||e}else return o-r===e.length?this.formatValue(n):r===0?n+e.slice(o):o===e.length?e.slice(0,r)+n:e.slice(0,r)+n+e.slice(o)},deleteRange:function(e,n,r){var o;return r-n===e.length?o="":n===0?o=e.slice(r):r===e.length?o=e.slice(0,n):o=e.slice(0,n)+e.slice(r),o},initCursor:function(){var e=this.$refs.input.$el.selectionStart,n=this.$refs.input.$el.value,r=n.length,o=null,l=(this.prefixChar||"").length;n=n.replace(this._prefix,""),e=e-l;var h=n.charAt(e);if(this.isNumeralChar(h))return e+l;for(var p=e-1;p>=0;)if(h=n.charAt(p),this.isNumeralChar(h)){o=p+l;break}else p--;if(o!==null)this.$refs.input.$el.setSelectionRange(o+1,o+1);else{for(p=e;p<r;)if(h=n.charAt(p),this.isNumeralChar(h)){o=p+l;break}else p++;o!==null&&this.$refs.input.$el.setSelectionRange(o,o)}return o||0},onInputClick:function(){var e=this.$refs.input.$el.value;!this.readonly&&e!==HO()&&this.initCursor()},isNumeralChar:function(e){return e.length===1&&(this._numeral.test(e)||this._decimal.test(e)||this._group.test(e)||this._minusSign.test(e))?(this.resetRegex(),!0):!1},resetRegex:function(){this._numeral.lastIndex=0,this._decimal.lastIndex=0,this._group.lastIndex=0,this._minusSign.lastIndex=0},updateValue:function(e,n,r,o){var l=this.$refs.input.$el.value,h=null;n!=null&&(h=this.parseValue(n),h=!h&&!this.allowEmpty?0:h,this.updateInput(h,r,o,n),this.handleOnInput(e,l,h))},handleOnInput:function(e,n,r){this.isValueChanged(n,r)&&this.$emit("input",{originalEvent:e,value:r,formattedValue:n})},isValueChanged:function(e,n){if(n===null&&e!==null)return!0;if(n!=null){var r=typeof e=="string"?this.parseValue(e):e;return n!==r}return!1},validateValue:function(e){return e==="-"||e==null?null:this.min!=null&&e<this.min?this.min:this.max!=null&&e>this.max?this.max:e},updateInput:function(e,n,r,o){n=n||"";var l=this.$refs.input.$el.value,h=this.formatValue(e),p=l.length;if(h!==o&&(h=this.concatValues(h,o)),p===0){this.$refs.input.$el.value=h,this.$refs.input.$el.setSelectionRange(0,0);var i=this.initCursor(),b=i+n.length;this.$refs.input.$el.setSelectionRange(b,b)}else{var E=this.$refs.input.$el.selectionStart,I=this.$refs.input.$el.selectionEnd;this.$refs.input.$el.value=h;var O=h.length;if(r==="range-insert"){var M=this.parseValue((l||"").slice(0,E)),G=M!==null?M.toString():"",q=G.split("").join("(".concat(this.groupChar,")?")),Z=new RegExp(q,"g");Z.test(h);var Y=n.split("").join("(".concat(this.groupChar,")?")),te=new RegExp(Y,"g");te.test(h.slice(Z.lastIndex)),I=Z.lastIndex+te.lastIndex,this.$refs.input.$el.setSelectionRange(I,I)}else if(O===p)r==="insert"||r==="delete-back-single"?this.$refs.input.$el.setSelectionRange(I+1,I+1):r==="delete-single"?this.$refs.input.$el.setSelectionRange(I-1,I-1):(r==="delete-range"||r==="spin")&&this.$refs.input.$el.setSelectionRange(I,I);else if(r==="delete-back-single"){var be=l.charAt(I-1),Pe=l.charAt(I),Se=p-O,Ie=this._group.test(Pe);Ie&&Se===1?I+=1:!Ie&&this.isNumeralChar(be)&&(I+=-1*Se+1),this._group.lastIndex=0,this.$refs.input.$el.setSelectionRange(I,I)}else if(l==="-"&&r==="insert"){this.$refs.input.$el.setSelectionRange(0,0);var Ae=this.initCursor(),ne=Ae+n.length+1;this.$refs.input.$el.setSelectionRange(ne,ne)}else I=I+(O-p),this.$refs.input.$el.setSelectionRange(I,I)}this.$refs.input.$el.setAttribute("aria-valuenow",e)},concatValues:function(e,n){if(e&&n){var r=n.search(this._decimal);return this._decimal.lastIndex=0,this.suffixChar?r!==-1?e.replace(this.suffixChar,"").split(this._decimal)[0]+n.replace(this.suffixChar,"").slice(r)+this.suffixChar:e:r!==-1?e.split(this._decimal)[0]+n.slice(r):e}return e},getDecimalLength:function(e){if(e){var n=e.split(this._decimal);if(n.length===2)return n[1].replace(this._suffix,"").trim().replace(/\s/g,"").replace(this._currency,"").length}return 0},updateModel:function(e,n){this.d_modelValue=n,this.$emit("update:modelValue",n)},onInputFocus:function(e){this.focused=!0,!this.disabled&&!this.readonly&&this.$refs.input.$el.value!==HO()&&this.highlightOnFocus&&e.target.select(),this.$emit("focus",e)},onInputBlur:function(e){this.focused=!1;var n=e.target,r=this.validateValue(this.parseValue(n.value));this.$emit("blur",{originalEvent:e,value:n.value}),n.value=this.formatValue(r),n.setAttribute("aria-valuenow",r),this.updateModel(e,r),!this.disabled&&!this.readonly&&this.highlightOnFocus&&Ox()},clearTimer:function(){this.timer&&clearInterval(this.timer)},maxBoundry:function(){return this.d_modelValue>=this.max},minBoundry:function(){return this.d_modelValue<=this.min}},computed:{filled:function(){return this.modelValue!=null&&this.modelValue.toString().length>0},upButtonListeners:function(){var e=this;return{mousedown:function(r){return e.onUpButtonMouseDown(r)},mouseup:function(r){return e.onUpButtonMouseUp(r)},mouseleave:function(r){return e.onUpButtonMouseLeave(r)},keydown:function(r){return e.onUpButtonKeyDown(r)},keyup:function(r){return e.onUpButtonKeyUp(r)}}},downButtonListeners:function(){var e=this;return{mousedown:function(r){return e.onDownButtonMouseDown(r)},mouseup:function(r){return e.onDownButtonMouseUp(r)},mouseleave:function(r){return e.onDownButtonMouseLeave(r)},keydown:function(r){return e.onDownButtonKeyDown(r)},keyup:function(r){return e.onDownButtonKeyUp(r)}}},formattedValue:function(){var e=!this.modelValue&&!this.allowEmpty?0:this.modelValue;return this.formatValue(e)},getFormatter:function(){return this.numberFormat},hasFluid:function(){return mu(this.fluid)?!!this.$pcFluid:this.fluid}},components:{InputText:O4,AngleUpIcon:$7,AngleDownIcon:j7}},Xue=["disabled"],Zue=["disabled"],Yue=["disabled"],Jue=["disabled"];function ehe(t,e,n,r,o,l){var h=Nr("InputText");return ve(),et("span",It({class:t.cx("root")},t.ptmi("root")),[Lr(h,{ref:"input",id:t.inputId,role:"spinbutton",class:On([t.cx("pcInput"),t.inputClass]),style:fc(t.inputStyle),value:l.formattedValue,"aria-valuemin":t.min,"aria-valuemax":t.max,"aria-valuenow":t.modelValue,inputmode:t.mode==="decimal"&&!t.minFractionDigits?"numeric":"decimal",disabled:t.disabled,readonly:t.readonly,placeholder:t.placeholder,"aria-labelledby":t.ariaLabelledby,"aria-label":t.ariaLabel,invalid:t.invalid,variant:t.variant,onInput:l.onUserInput,onKeydown:l.onInputKeyDown,onKeypress:l.onInputKeyPress,onPaste:l.onPaste,onClick:l.onInputClick,onFocus:l.onInputFocus,onBlur:l.onInputBlur,pt:t.ptm("pcInput"),unstyled:t.unstyled},null,8,["id","class","style","value","aria-valuemin","aria-valuemax","aria-valuenow","inputmode","disabled","readonly","placeholder","aria-labelledby","aria-label","invalid","variant","onInput","onKeydown","onKeypress","onPaste","onClick","onFocus","onBlur","pt","unstyled"]),t.showButtons&&t.buttonLayout==="stacked"?(ve(),et("span",It({key:0,class:t.cx("buttonGroup")},t.ptm("buttonGroup")),[Xt(t.$slots,"incrementbutton",{listeners:l.upButtonListeners},function(){return[mt("button",It({class:[t.cx("incrementButton"),t.incrementButtonClass]},Bw(l.upButtonListeners),{disabled:t.disabled,tabindex:-1,"aria-hidden":"true",type:"button"},t.ptm("incrementButton")),[Xt(t.$slots,t.$slots.incrementicon?"incrementicon":"incrementbuttonicon",{},function(){return[(ve(),hn(mr(t.incrementIcon||t.incrementButtonIcon?"span":"AngleUpIcon"),It({class:[t.incrementIcon,t.incrementButtonIcon]},t.ptm("incrementIcon"),{"data-pc-section":"incrementicon"}),null,16,["class"]))]})],16,Xue)]}),Xt(t.$slots,"decrementbutton",{listeners:l.downButtonListeners},function(){return[mt("button",It({class:[t.cx("decrementButton"),t.decrementButtonClass]},Bw(l.downButtonListeners),{disabled:t.disabled,tabindex:-1,"aria-hidden":"true",type:"button"},t.ptm("decrementButton")),[Xt(t.$slots,t.$slots.decrementicon?"decrementicon":"decrementbuttonicon",{},function(){return[(ve(),hn(mr(t.decrementIcon||t.decrementButtonIcon?"span":"AngleDownIcon"),It({class:[t.decrementIcon,t.decrementButtonIcon]},t.ptm("decrementIcon"),{"data-pc-section":"decrementicon"}),null,16,["class"]))]})],16,Zue)]})],16)):Sn("",!0),Xt(t.$slots,"incrementbutton",{listeners:l.upButtonListeners},function(){return[t.showButtons&&t.buttonLayout!=="stacked"?(ve(),et("button",It({key:0,class:[t.cx("incrementButton"),t.incrementButtonClass]},Bw(l.upButtonListeners),{disabled:t.disabled,tabindex:-1,"aria-hidden":"true",type:"button"},t.ptm("incrementButton")),[Xt(t.$slots,t.$slots.incrementicon?"incrementicon":"incrementbuttonicon",{},function(){return[(ve(),hn(mr(t.incrementIcon||t.incrementButtonIcon?"span":"AngleUpIcon"),It({class:[t.incrementIcon,t.incrementButtonIcon]},t.ptm("incrementIcon"),{"data-pc-section":"incrementicon"}),null,16,["class"]))]})],16,Yue)):Sn("",!0)]}),Xt(t.$slots,"decrementbutton",{listeners:l.downButtonListeners},function(){return[t.showButtons&&t.buttonLayout!=="stacked"?(ve(),et("button",It({key:0,class:[t.cx("decrementButton"),t.decrementButtonClass]},Bw(l.downButtonListeners),{disabled:t.disabled,tabindex:-1,"aria-hidden":"true",type:"button"},t.ptm("decrementButton")),[Xt(t.$slots,t.$slots.decrementicon?"decrementicon":"decrementbuttonicon",{},function(){return[(ve(),hn(mr(t.decrementIcon||t.decrementButtonIcon?"span":"AngleDownIcon"),It({class:[t.decrementIcon,t.decrementButtonIcon]},t.ptm("decrementIcon"),{"data-pc-section":"decrementicon"}),null,16,["class"]))]})],16,Jue)):Sn("",!0)]})],16)}G7.render=ehe;var K7={name:"AngleDoubleRightIcon",extends:Us},the=mt("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.68757 11.1451C7.7791 11.1831 7.8773 11.2024 7.9764 11.2019C8.07769 11.1985 8.17721 11.1745 8.26886 11.1312C8.36052 11.088 8.44238 11.0265 8.50943 10.9505L12.0294 7.49085C12.1707 7.34942 12.25 7.15771 12.25 6.95782C12.25 6.75794 12.1707 6.56622 12.0294 6.42479L8.50943 2.90479C8.37014 2.82159 8.20774 2.78551 8.04633 2.80192C7.88491 2.81833 7.73309 2.88635 7.6134 2.99588C7.4937 3.10541 7.41252 3.25061 7.38189 3.40994C7.35126 3.56927 7.37282 3.73423 7.44337 3.88033L10.4605 6.89748L7.44337 9.91463C7.30212 10.0561 7.22278 10.2478 7.22278 10.4477C7.22278 10.6475 7.30212 10.8393 7.44337 10.9807C7.51301 11.0512 7.59603 11.1071 7.68757 11.1451ZM1.94207 10.9505C2.07037 11.0968 2.25089 11.1871 2.44493 11.2019C2.63898 11.1871 2.81949 11.0968 2.94779 10.9505L6.46779 7.49085C6.60905 7.34942 6.68839 7.15771 6.68839 6.95782C6.68839 6.75793 6.60905 6.56622 6.46779 6.42479L2.94779 2.90479C2.80704 2.83757 2.6489 2.81563 2.49517 2.84201C2.34143 2.86839 2.19965 2.94178 2.08936 3.05207C1.97906 3.16237 1.90567 3.30415 1.8793 3.45788C1.85292 3.61162 1.87485 3.76975 1.94207 3.9105L4.95922 6.92765L1.94207 9.9448C1.81838 10.0831 1.75 10.2621 1.75 10.4477C1.75 10.6332 1.81838 10.8122 1.94207 10.9505Z",fill:"currentColor"},null,-1),nhe=[the];function rhe(t,e,n,r,o,l){return ve(),et("svg",It({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),nhe,16)}K7.render=rhe;var q7={name:"AngleRightIcon",extends:Us},ihe=mt("path",{d:"M5.25 11.1728C5.14929 11.1694 5.05033 11.1455 4.9592 11.1025C4.86806 11.0595 4.78666 10.9984 4.72 10.9228C4.57955 10.7822 4.50066 10.5916 4.50066 10.3928C4.50066 10.1941 4.57955 10.0035 4.72 9.86283L7.72 6.86283L4.72 3.86283C4.66067 3.71882 4.64765 3.55991 4.68275 3.40816C4.71785 3.25642 4.79932 3.11936 4.91585 3.01602C5.03238 2.91268 5.17819 2.84819 5.33305 2.83149C5.4879 2.81479 5.64411 2.84671 5.78 2.92283L9.28 6.42283C9.42045 6.56346 9.49934 6.75408 9.49934 6.95283C9.49934 7.15158 9.42045 7.34221 9.28 7.48283L5.78 10.9228C5.71333 10.9984 5.63193 11.0595 5.5408 11.1025C5.44966 11.1455 5.35071 11.1694 5.25 11.1728Z",fill:"currentColor"},null,-1),ohe=[ihe];function she(t,e,n,r,o,l){return ve(),et("svg",It({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),ohe,16)}q7.render=she;var W7={name:"AngleLeftIcon",extends:Us},ahe=mt("path",{d:"M8.75 11.185C8.65146 11.1854 8.55381 11.1662 8.4628 11.1284C8.37179 11.0906 8.28924 11.0351 8.22 10.965L4.72 7.46496C4.57955 7.32433 4.50066 7.13371 4.50066 6.93496C4.50066 6.73621 4.57955 6.54558 4.72 6.40496L8.22 2.93496C8.36095 2.84357 8.52851 2.80215 8.69582 2.81733C8.86312 2.83252 9.02048 2.90344 9.14268 3.01872C9.26487 3.134 9.34483 3.28696 9.36973 3.4531C9.39463 3.61924 9.36303 3.78892 9.28 3.93496L6.28 6.93496L9.28 9.93496C9.42045 10.0756 9.49934 10.2662 9.49934 10.465C9.49934 10.6637 9.42045 10.8543 9.28 10.995C9.13526 11.1257 8.9448 11.1939 8.75 11.185Z",fill:"currentColor"},null,-1),lhe=[ahe];function che(t,e,n,r,o,l){return ve(),et("svg",It({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),lhe,16)}W7.render=che;var uhe={name:"BasePaginator",extends:Ro,props:{totalRecords:{type:Number,default:0},rows:{type:Number,default:0},first:{type:Number,default:0},pageLinkSize:{type:Number,default:5},rowsPerPageOptions:{type:Array,default:null},template:{type:[Object,String],default:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown"},currentPageReportTemplate:{type:null,default:"({currentPage} of {totalPages})"},alwaysShow:{type:Boolean,default:!0}},style:uce,provide:function(){return{$pcPaginator:this,$parentInstance:this}}},X7={name:"CurrentPageReport",hostName:"Paginator",extends:Ro,props:{pageCount:{type:Number,default:0},currentPage:{type:Number,default:0},page:{type:Number,default:0},first:{type:Number,default:0},rows:{type:Number,default:0},totalRecords:{type:Number,default:0},template:{type:String,default:"({currentPage} of {totalPages})"}},computed:{text:function(){var e=this.template.replace("{currentPage}",this.currentPage).replace("{totalPages}",this.pageCount).replace("{first}",this.pageCount>0?this.first+1:0).replace("{last}",Math.min(this.first+this.rows,this.totalRecords)).replace("{rows}",this.rows).replace("{totalRecords}",this.totalRecords);return e}}};function hhe(t,e,n,r,o,l){return ve(),et("span",It({class:t.cx("current")},t.ptm("current")),Ar(l.text),17)}X7.render=hhe;var Z7={name:"FirstPageLink",hostName:"Paginator",extends:Ro,props:{template:{type:Function,default:null}},methods:{getPTOptions:function(e){return this.ptm(e,{context:{disabled:this.$attrs.disabled}})}},components:{AngleDoubleLeftIcon:D7},directives:{ripple:pm}};function dhe(t,e,n,r,o,l){var h=CA("ripple");return Fo((ve(),et("button",It({class:t.cx("first"),type:"button"},l.getPTOptions("first"),{"data-pc-group-section":"pagebutton"}),[(ve(),hn(mr(n.template||"AngleDoubleLeftIcon"),It({class:t.cx("firstIcon")},l.getPTOptions("firstIcon")),null,16,["class"]))],16)),[[h]])}Z7.render=dhe;var Y7={name:"JumpToPageDropdown",hostName:"Paginator",extends:Ro,emits:["page-change"],props:{page:Number,pageCount:Number,disabled:Boolean,templates:null},methods:{onChange:function(e){this.$emit("page-change",e)}},computed:{pageOptions:function(){for(var e=[],n=0;n<this.pageCount;n++)e.push({label:String(n+1),value:n});return e}},components:{JTPSelect:NE}};function fhe(t,e,n,r,o,l){var h=Nr("JTPSelect");return ve(),hn(h,{modelValue:n.page,options:l.pageOptions,optionLabel:"label",optionValue:"value","onUpdate:modelValue":e[0]||(e[0]=function(p){return l.onChange(p)}),class:On(t.cx("pcJumpToPageDropdown")),disabled:n.disabled,unstyled:t.unstyled,pt:t.ptm("pcJumpToPageDropdown"),"data-pc-group-section":"pagedropdown"},gg({_:2},[n.templates.jumptopagedropdownicon?{name:"dropdownicon",fn:Kn(function(p){return[(ve(),hn(mr(n.templates.jumptopagedropdownicon),{class:On(p.class)},null,8,["class"]))]}),key:"0"}:void 0]),1032,["modelValue","options","class","disabled","unstyled","pt"])}Y7.render=fhe;var J7={name:"JumpToPageInput",hostName:"Paginator",extends:Ro,inheritAttrs:!1,emits:["page-change"],props:{page:Number,pageCount:Number,disabled:Boolean},data:function(){return{d_page:this.page}},watch:{page:function(e){this.d_page=e}},methods:{onChange:function(e){e!==this.page&&(this.d_page=e,this.$emit("page-change",e-1))}},computed:{inputArialabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.jumpToPageInputLabel:void 0}},components:{JTPInput:G7}};function Ahe(t,e,n,r,o,l){var h=Nr("JTPInput");return ve(),hn(h,{ref:"jtpInput",modelValue:o.d_page,class:On(t.cx("pcJumpToPageInput")),"aria-label":l.inputArialabel,disabled:n.disabled,"onUpdate:modelValue":l.onChange,unstyled:t.unstyled,pt:t.ptm("pcJumpToPageInput")},null,8,["modelValue","class","aria-label","disabled","onUpdate:modelValue","unstyled","pt"])}J7.render=Ahe;var eV={name:"LastPageLink",hostName:"Paginator",extends:Ro,props:{template:{type:Function,default:null}},methods:{getPTOptions:function(e){return this.ptm(e,{context:{disabled:this.$attrs.disabled}})}},components:{AngleDoubleRightIcon:K7},directives:{ripple:pm}};function phe(t,e,n,r,o,l){var h=CA("ripple");return Fo((ve(),et("button",It({class:t.cx("last"),type:"button"},l.getPTOptions("last"),{"data-pc-group-section":"pagebutton"}),[(ve(),hn(mr(n.template||"AngleDoubleRightIcon"),It({class:t.cx("lastIcon")},l.getPTOptions("lastIcon")),null,16,["class"]))],16)),[[h]])}eV.render=phe;var tV={name:"NextPageLink",hostName:"Paginator",extends:Ro,props:{template:{type:Function,default:null}},methods:{getPTOptions:function(e){return this.ptm(e,{context:{disabled:this.$attrs.disabled}})}},components:{AngleRightIcon:q7},directives:{ripple:pm}};function mhe(t,e,n,r,o,l){var h=CA("ripple");return Fo((ve(),et("button",It({class:t.cx("next"),type:"button"},l.getPTOptions("next"),{"data-pc-group-section":"pagebutton"}),[(ve(),hn(mr(n.template||"AngleRightIcon"),It({class:t.cx("nextIcon")},l.getPTOptions("nextIcon")),null,16,["class"]))],16)),[[h]])}tV.render=mhe;var nV={name:"PageLinks",hostName:"Paginator",extends:Ro,inheritAttrs:!1,emits:["click"],props:{value:Array,page:Number},methods:{getPTOptions:function(e,n){return this.ptm(n,{context:{active:e===this.page}})},onPageLinkClick:function(e,n){this.$emit("click",{originalEvent:e,value:n})},ariaPageLabel:function(e){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.pageLabel.replace(/{page}/g,e):void 0}},directives:{ripple:pm}},ghe=["aria-label","aria-current","onClick","data-p-active"];function yhe(t,e,n,r,o,l){var h=CA("ripple");return ve(),et("span",It({class:t.cx("pages")},t.ptm("pages")),[(ve(!0),et(_r,null,Li(n.value,function(p){return Fo((ve(),et("button",It({key:p,class:t.cx("page",{pageLink:p}),type:"button","aria-label":l.ariaPageLabel(p),"aria-current":p-1===n.page?"page":void 0,onClick:function(b){return l.onPageLinkClick(b,p)},ref_for:!0},l.getPTOptions(p-1,"page"),{"data-p-active":p-1===n.page}),[jr(Ar(p),1)],16,ghe)),[[h]])}),128))],16)}nV.render=yhe;var rV={name:"PrevPageLink",hostName:"Paginator",extends:Ro,props:{template:{type:Function,default:null}},methods:{getPTOptions:function(e){return this.ptm(e,{context:{disabled:this.$attrs.disabled}})}},components:{AngleLeftIcon:W7},directives:{ripple:pm}};function _he(t,e,n,r,o,l){var h=CA("ripple");return Fo((ve(),et("button",It({class:t.cx("prev"),type:"button"},l.getPTOptions("prev"),{"data-pc-group-section":"pagebutton"}),[(ve(),hn(mr(n.template||"AngleLeftIcon"),It({class:t.cx("prevIcon")},l.getPTOptions("prevIcon")),null,16,["class"]))],16)),[[h]])}rV.render=_he;var iV={name:"RowsPerPageDropdown",hostName:"Paginator",extends:Ro,emits:["rows-change"],props:{options:Array,rows:Number,disabled:Boolean,templates:null},methods:{onChange:function(e){this.$emit("rows-change",e)}},computed:{rowsOptions:function(){var e=[];if(this.options)for(var n=0;n<this.options.length;n++)e.push({label:String(this.options[n]),value:this.options[n]});return e}},components:{RPPSelect:NE}};function vhe(t,e,n,r,o,l){var h=Nr("RPPSelect");return ve(),hn(h,{modelValue:n.rows,options:l.rowsOptions,optionLabel:"label",optionValue:"value","onUpdate:modelValue":e[0]||(e[0]=function(p){return l.onChange(p)}),class:On(t.cx("pcRowPerPageDropdown")),disabled:n.disabled,unstyled:t.unstyled,pt:t.ptm("pcRowPerPageDropdown"),"data-pc-group-section":"pagedropdown"},gg({_:2},[n.templates.rowsperpagedropdownicon?{name:"dropdownicon",fn:Kn(function(p){return[(ve(),hn(mr(n.templates.rowsperpagedropdownicon),{class:On(p.class)},null,8,["class"]))]}),key:"0"}:void 0]),1032,["modelValue","options","class","disabled","unstyled","pt"])}iV.render=vhe;function bhe(t){return Che(t)||xhe(t)||oV(t)||whe()}function whe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xhe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Che(t){if(Array.isArray(t))return dI(t)}function hI(t){"@babel/helpers - typeof";return hI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hI(t)}function AD(t,e){return She(t)||Bhe(t,e)||oV(t,e)||Ehe()}function Ehe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oV(t,e){if(t){if(typeof t=="string")return dI(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dI(t,e):void 0}}function dI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Bhe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,l,h,p=[],i=!0,b=!1;try{if(l=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=l.call(n)).done)&&(p.push(r.value),p.length!==e);i=!0);}catch(E){b=!0,o=E}finally{try{if(!i&&n.return!=null&&(h=n.return(),Object(h)!==h))return}finally{if(b)throw o}}return p}}function She(t){if(Array.isArray(t))return t}var sV={name:"Paginator",extends:uhe,inheritAttrs:!1,emits:["update:first","update:rows","page"],data:function(){return{d_first:this.first,d_rows:this.rows}},watch:{first:function(e){this.d_first=e},rows:function(e){this.d_rows=e},totalRecords:function(e){this.page>0&&e&&this.d_first>=e&&this.changePage(this.pageCount-1)}},mounted:function(){this.setPaginatorAttribute(),this.createStyle()},methods:{changePage:function(e){var n=this.pageCount;if(e>=0&&e<n){this.d_first=this.d_rows*e;var r={page:e,first:this.d_first,rows:this.d_rows,pageCount:n};this.$emit("update:first",this.d_first),this.$emit("update:rows",this.d_rows),this.$emit("page",r)}},changePageToFirst:function(e){this.isFirstPage||this.changePage(0),e.preventDefault()},changePageToPrev:function(e){this.changePage(this.page-1),e.preventDefault()},changePageLink:function(e){this.changePage(e.value-1),e.originalEvent.preventDefault()},changePageToNext:function(e){this.changePage(this.page+1),e.preventDefault()},changePageToLast:function(e){this.isLastPage||this.changePage(this.pageCount-1),e.preventDefault()},onRowChange:function(e){this.d_rows=e,this.changePage(this.page)},createStyle:function(){var e=this;if(this.hasBreakpoints()&&!this.isUnstyled){var n;this.styleElement=document.createElement("style"),this.styleElement.type="text/css",k4(this.styleElement,"nonce",(n=this.$primevue)===null||n===void 0||(n=n.config)===null||n===void 0||(n=n.csp)===null||n===void 0?void 0:n.nonce),document.head.appendChild(this.styleElement);var r="",o=Object.keys(this.template),l={};o.sort(function(G,q){return parseInt(G)-parseInt(q)}).forEach(function(G){l[G]=e.template[G]});for(var h=0,p=Object.entries(Object.entries(l));h<p.length;h++){var i=AD(p[h],2),b=i[0],E=AD(i[1],1),I=E[0],O=void 0,M=void 0;I!=="default"&&typeof Object.keys(l)[b-1]=="string"?M=Number(Object.keys(l)[b-1].slice(0,-2))+1+"px":M=Object.keys(l)[b-1],O=Object.entries(l)[b-1]?"and (min-width:".concat(M,")"):"",I==="default"?r+=`
                            @media screen `.concat(O,` {
                                .paginator[`).concat(this.attributeSelector,`],
                                    display: flex;
                                }
                            }
                        `):r+=`
.paginator[`.concat(this.attributeSelector,"], .p-paginator-").concat(I,` {
    display: none;
}
@media screen `).concat(O," and (max-width: ").concat(I,`) {
    .paginator[`).concat(this.attributeSelector,"], .p-paginator-").concat(I,` {
        display: flex;
    }
    .paginator[`).concat(this.attributeSelector,`],
    .p-paginator-default{
        display: none;
    }
}
                    `)}this.styleElement.innerHTML=r}},hasBreakpoints:function(){return hI(this.template)==="object"},setPaginatorAttribute:function(){var e=this;this.$refs.paginator&&this.$refs.paginator.length>=0&&bhe(this.$refs.paginator).forEach(function(n){n.setAttribute(e.attributeSelector,"")})},getAriaLabel:function(e){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria[e]:void 0}},computed:{templateItems:function(){var e={};if(this.hasBreakpoints()){e=this.template,e.default||(e.default="FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown");for(var n in e)e[n]=this.template[n].split(" ").map(function(r){return r.trim()});return e}return e.default=this.template.split(" ").map(function(r){return r.trim()}),e},page:function(){return Math.floor(this.d_first/this.d_rows)},pageCount:function(){return Math.ceil(this.totalRecords/this.d_rows)},isFirstPage:function(){return this.page===0},isLastPage:function(){return this.page===this.pageCount-1},calculatePageLinkBoundaries:function(){var e=this.pageCount,n=Math.min(this.pageLinkSize,e),r=Math.max(0,Math.ceil(this.page-n/2)),o=Math.min(e-1,r+n-1),l=this.pageLinkSize-(o-r+1);return r=Math.max(0,r-l),[r,o]},pageLinks:function(){for(var e=[],n=this.calculatePageLinkBoundaries,r=n[0],o=n[1],l=r;l<=o;l++)e.push(l+1);return e},currentState:function(){return{page:this.page,first:this.d_first,rows:this.d_rows}},empty:function(){return this.pageCount===0},currentPage:function(){return this.pageCount>0?this.page+1:0},attributeSelector:function(){return Af()}},components:{CurrentPageReport:X7,FirstPageLink:Z7,LastPageLink:eV,NextPageLink:tV,PageLinks:nV,PrevPageLink:rV,RowsPerPageDropdown:iV,JumpToPageDropdown:Y7,JumpToPageInput:J7}};function The(t,e,n,r,o,l){var h=Nr("FirstPageLink"),p=Nr("PrevPageLink"),i=Nr("NextPageLink"),b=Nr("LastPageLink"),E=Nr("PageLinks"),I=Nr("CurrentPageReport"),O=Nr("RowsPerPageDropdown"),M=Nr("JumpToPageDropdown"),G=Nr("JumpToPageInput");return t.alwaysShow||l.pageLinks&&l.pageLinks.length>1?(ve(),et("nav",Ks(It({key:0},t.ptmi("paginatorContainer"))),[(ve(!0),et(_r,null,Li(l.templateItems,function(q,Z){return ve(),et("div",It({key:Z,ref_for:!0,ref:"paginator",class:t.cx("paginator",{key:Z})},t.ptm("root")),[t.$slots.start?(ve(),et("div",It({key:0,class:t.cx("contentStart"),ref_for:!0},t.ptm("contentStart")),[Xt(t.$slots,"start",{state:l.currentState})],16)):Sn("",!0),mt("div",It({class:t.cx("content"),ref_for:!0},t.ptm("content")),[(ve(!0),et(_r,null,Li(q,function(Y){return ve(),et(_r,{key:Y},[Y==="FirstPageLink"?(ve(),hn(h,{key:0,"aria-label":l.getAriaLabel("firstPageLabel"),template:t.$slots.firsticon||t.$slots.firstpagelinkicon,onClick:e[0]||(e[0]=function(te){return l.changePageToFirst(te)}),disabled:l.isFirstPage||l.empty,unstyled:t.unstyled,pt:t.pt},null,8,["aria-label","template","disabled","unstyled","pt"])):Y==="PrevPageLink"?(ve(),hn(p,{key:1,"aria-label":l.getAriaLabel("prevPageLabel"),template:t.$slots.previcon||t.$slots.prevpagelinkicon,onClick:e[1]||(e[1]=function(te){return l.changePageToPrev(te)}),disabled:l.isFirstPage||l.empty,unstyled:t.unstyled,pt:t.pt},null,8,["aria-label","template","disabled","unstyled","pt"])):Y==="NextPageLink"?(ve(),hn(i,{key:2,"aria-label":l.getAriaLabel("nextPageLabel"),template:t.$slots.nexticon||t.$slots.nextpagelinkicon,onClick:e[2]||(e[2]=function(te){return l.changePageToNext(te)}),disabled:l.isLastPage||l.empty,unstyled:t.unstyled,pt:t.pt},null,8,["aria-label","template","disabled","unstyled","pt"])):Y==="LastPageLink"?(ve(),hn(b,{key:3,"aria-label":l.getAriaLabel("lastPageLabel"),template:t.$slots.lasticon||t.$slots.lastpagelinkicon,onClick:e[3]||(e[3]=function(te){return l.changePageToLast(te)}),disabled:l.isLastPage||l.empty,unstyled:t.unstyled,pt:t.pt},null,8,["aria-label","template","disabled","unstyled","pt"])):Y==="PageLinks"?(ve(),hn(E,{key:4,"aria-label":l.getAriaLabel("pageLabel"),value:l.pageLinks,page:l.page,onClick:e[4]||(e[4]=function(te){return l.changePageLink(te)}),unstyled:t.unstyled,pt:t.pt},null,8,["aria-label","value","page","unstyled","pt"])):Y==="CurrentPageReport"?(ve(),hn(I,{key:5,"aria-live":"polite",template:t.currentPageReportTemplate,currentPage:l.currentPage,page:l.page,pageCount:l.pageCount,first:o.d_first,rows:o.d_rows,totalRecords:t.totalRecords,unstyled:t.unstyled,pt:t.pt},null,8,["template","currentPage","page","pageCount","first","rows","totalRecords","unstyled","pt"])):Y==="RowsPerPageDropdown"&&t.rowsPerPageOptions?(ve(),hn(O,{key:6,"aria-label":l.getAriaLabel("rowsPerPageLabel"),rows:o.d_rows,options:t.rowsPerPageOptions,onRowsChange:e[5]||(e[5]=function(te){return l.onRowChange(te)}),disabled:l.empty,templates:t.$slots,unstyled:t.unstyled,pt:t.pt},null,8,["aria-label","rows","options","disabled","templates","unstyled","pt"])):Y==="JumpToPageDropdown"?(ve(),hn(M,{key:7,"aria-label":l.getAriaLabel("jumpToPageDropdownLabel"),page:l.page,pageCount:l.pageCount,onPageChange:e[6]||(e[6]=function(te){return l.changePage(te)}),disabled:l.empty,templates:t.$slots,unstyled:t.unstyled,pt:t.pt},null,8,["aria-label","page","pageCount","disabled","templates","unstyled","pt"])):Y==="JumpToPageInput"?(ve(),hn(G,{key:8,page:l.currentPage,onPageChange:e[7]||(e[7]=function(te){return l.changePage(te)}),disabled:l.empty,unstyled:t.unstyled,pt:t.pt},null,8,["page","disabled","unstyled","pt"])):Sn("",!0)],64)}),128))],16),t.$slots.end?(ve(),et("div",It({key:1,class:t.cx("contentEnd"),ref_for:!0},t.ptm("contentEnd")),[Xt(t.$slots,"end",{state:l.currentState})],16)):Sn("",!0)],16)}),128))],16)):Sn("",!0)}sV.render=The;var Ihe=function(e){var n=e.dt;return`
.p-datatable {
    position: relative;
}

.p-datatable-table {
    border-spacing: 0;
    width: 100%;
}

.p-datatable-scrollable > .p-datatable-table-container {
    position: relative;
}

.p-datatable-scrollable-table > .p-datatable-thead {
    top: 0;
    z-index: 1;
}

.p-datatable-scrollable-table > .p-datatable-frozen-tbody {
    position: sticky;
    z-index: 1;
}

.p-datatable-scrollable-table>.p-datatable-tfoot {
    bottom: 0;
    z-index: 1;
}

.p-datatable-scrollable .p-datatable-frozen-column {
    position: sticky;
    background: `.concat(n("datatable.header.cell.background"),`;
}

.p-datatable-scrollable th.p-datatable-frozen-column {
    z-index: 1;
}

.p-datatable-scrollable > .p-datatable-table-container > .p-datatable-table > .p-datatable-thead,
.p-datatable-scrollable > .p-datatable-table-container > .p-virtualscroller > .p-datatable-table > .p-datatable-thead {
    background: `).concat(n("datatable.header.cell.background"),`;
}

.p-datatable-scrollable > .p-datatable-table-container > .p-datatable-table > .p-datatable-tfoot,
.p-datatable-scrollable > .p-datatable-table-container > .p-virtualscroller > .p-datatable-table > .p-datatable-tfoot {
    background: `).concat(n("datatable.footer.cell.background"),`;
}

.p-datatable-flex-scrollable {
    display: flex;
    flex-direction: column;
    height: 100%;
}

.p-datatable-flex-scrollable > .p-datatable-table-container {
    display: flex;
    flex-direction: column;
    flex: 1;
    height: 100%;
}

.p-datatable-scrollable-table > .p-datatable-tbody > .p-datatable-row-group-header {
    position: sticky;
    z-index: 1;
}

.p-datatable-resizable-table > .p-datatable-thead > tr > th,
.p-datatable-resizable-table > .p-datatable-tfoot > tr > td,
.p-datatable-resizable-table > .p-datatable-tbody > tr > td {
    overflow: hidden;
    white-space: nowrap;
}

.p-datatable-resizable-table > .p-datatable-thead > tr > th.p-datatable-resizable-column:not(.p-datatable-frozen-column) {
    background-clip: padding-box;
    position: relative;
}

.p-datatable-resizable-table-fit > .p-datatable-thead > tr > th.p-datatable-resizable-column:last-child .p-datatable-column-resizer {
    display: none;
}

.p-datatable-column-resizer {
    display: block;
    position: absolute;
    top: 0;
    right: 0;
    margin: 0;
    width: `).concat(n("datatable.column.resizer.width"),`;
    height: 100%;
    padding: 0px;
    cursor: col-resize;
    border: 1px solid transparent;
}

.p-datatable-column-header-content {
    display: flex;
    align-items: center;
    gap: `).concat(n("datatable.header.cell.gap"),`;
}

.p-datatable-column-resize-indicator {
    width: `).concat(n("datatable.resize.indicator.width"),`;
    position: absolute;
    z-index: 10;
    display: none;
    background: `).concat(n("datatable.resize.indicator.color"),`;
}

.p-datatable-row-reorder-indicator-up,
.p-datatable-row-reorder-indicator-down {
    position: absolute;
    display: none;
}

.p-datatable-reorderable-column,
.p-datatable-reorderable-row-handle {
    cursor: move;
}

.p-datatable-mask {
    position: absolute;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 2;
}

.p-datatable-inline-filter {
    display: flex;
    align-items: center;
    width: 100%;
    gap: `).concat(n("datatable.filter.inline.gap"),`;
}

.p-datatable-inline-filter .p-datatable-filter-element-container {
    flex: 1 1 auto;
    width: 1%;
}

.p-datatable-filter-overlay {
    background: `).concat(n("datatable.filter.overlay.select.background"),`;
    color: `).concat(n("datatable.filter.overlay.select.color"),`;
    border: 1px solid `).concat(n("datatable.filter.overlay.select.border.color"),`;
    border-radius: `).concat(n("datatable.filter.overlay.select.border.radius"),`;
    box-shadow: `).concat(n("datatable.filter.overlay.select.shadow"),`;
    min-width: 12.5rem;
}

.p-datatable-filter-constraint-list {
    margin: 0;
    list-style: none;
    display: flex;
    flex-direction: column;
    padding: `).concat(n("datatable.filter.constraint.list.padding"),`;
    gap: `).concat(n("datatable.filter.constraint.list.gap"),`;
}

.p-datatable-filter-constraint {
    padding: `).concat(n("datatable.filter.constraint.padding"),`;
    color: `).concat(n("datatable.filter.constraint.color"),`;
    border-radius: `).concat(n("datatable.filter.constraint.border.radius"),`;
    cursor: pointer;
    transition: background `).concat(n("datatable.transition.duration"),", color ").concat(n("datatable.transition.duration"),", border-color ").concat(n("datatable.transition.duration"),`,
        box-shadow `).concat(n("datatable.transition.duration"),`;
}

.p-datatable-filter-constraint-selected {
    background: `).concat(n("datatable.filter.constraint.selected.background"),`;
    color: `).concat(n("datatable.filter.constraint.selected.color"),`;
}

.p-datatable-filter-constraint:not(.p-datatable-filter-constraint-selected):not(.p-disabled):hover {
    background: `).concat(n("datatable.filter.constraint.focus.background"),`;
    color: `).concat(n("datatable.filter.constraint.focus.color"),`;
}

.p-datatable-filter-constraint:focus-visible {
    outline: 0 none;
    background: `).concat(n("datatable.filter.constraint.focus.background"),`;
    color: `).concat(n("datatable.filter.constraint.focus.color"),`;
}

.p-datatable-filter-constraint-selected:focus-visible {
    outline: 0 none;
    background: `).concat(n("datatable.filter.constraint.selected.focus.background"),`;
    color: `).concat(n("datatable.filter.constraint.selected.focus.color"),`;
}

.p-datatable-filter-constraint-separator {
    border-top: 1px solid `).concat(n("datatable.filter.constraint.separator.border.color"),`;
}

.p-datatable-popover-filter {
    display: inline-flex;
    margin-left: auto;
}

.p-datatable-filter-overlay-popover {
    background: `).concat(n("datatable.filter.overlay.popover.background"),`;
    color: `).concat(n("datatable.filter.overlay.popover.color"),`;
    border: 1px solid `).concat(n("datatable.filter.overlay.popover.border.color"),`;
    border-radius: `).concat(n("datatable.filter.overlay.popover.border.radius"),`;
    box-shadow: `).concat(n("datatable.filter.overlay.popover.shadow"),`;
    min-width: 12.5rem;
    padding: `).concat(n("datatable.filter.overlay.popover.padding"),`;
    display: flex;
    flex-direction: column;
    gap: `).concat(n("datatable.filter.overlay.popover.gap"),`;
}

.p-datatable-filter-operator-dropdown {
    width: 100%;
}

.p-datatable-filter-rule-list,
.p-datatable-filter-rule {
    display: flex;
    flex-direction: column;
    gap: `).concat(n("datatable.filter.overlay.popover.gap"),`;
}

.p-datatable-filter-rule {
    border-bottom: 1px solid `).concat(n("datatable.filter.rule.border.color"),`;
}

.p-datatable-filter-rule:last-child {
    border-bottom: 0 none;
}

.p-datatable-filter-add-rule-button {
    width: 100%;
}

.p-datatable-filter-remove-button {
    width: 100%;
}

.p-datatable-filter-buttonbar {
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.p-datatable-virtualscroller-spacer {
    display: flex;
}

.p-datatable .p-virtualscroller .p-virtualscroller-loading {
    transform: none !important;
    min-height: 0;
    position: sticky;
    top: 0;
    left: 0;
}

.p-datatable-paginator-top {
    border-color: `).concat(n("datatable.paginator.top.border.color"),`;
    border-style: solid;
    border-width: `).concat(n("datatable.paginator.top.border.width"),`;
}

.p-datatable-paginator-bottom {
    border-color: `).concat(n("datatable.paginator.bottom.border.color"),`;
    border-style: solid;
    border-width: `).concat(n("datatable.paginator.bottom.border.width"),`;
}

.p-datatable-header {
    background: `).concat(n("datatable.header.background"),`;
    color: `).concat(n("datatable.header.color"),`;
    border-color: `).concat(n("datatable.header.border.color"),`;
    border-style: solid;
    border-width: `).concat(n("datatable.header.border.width"),`;
    padding: `).concat(n("datatable.header.padding"),`;
}

.p-datatable-footer {
    background: `).concat(n("datatable.footer.background"),`;
    color: `).concat(n("datatable.footer.color"),`;
    border-color: `).concat(n("datatable.footer.border.color"),`;
    border-style: solid;
    border-width: `).concat(n("datatable.footer.border.width"),`;
    padding: `).concat(n("datatable.footer.padding"),`;
}

.p-datatable-header-cell {
    padding: `).concat(n("datatable.header.cell.padding"),`;
    background: `).concat(n("datatable.header.cell.background"),`;
    border-color: `).concat(n("datatable.header.cell.border.color"),`;
    border-style: solid;
    border-width: 0 0 1px 0;
    color: `).concat(n("datatable.header.cell.color"),`;
    font-weight: normal;
    text-align: left;
    transition: background `).concat(n("datatable.transition.duration"),", color ").concat(n("datatable.transition.duration"),", border-color ").concat(n("datatable.transition.duration"),`,
            outline-color `).concat(n("datatable.transition.duration"),", box-shadow ").concat(n("datatable.transition.duration"),`;
}

.p-datatable-column-title {
    font-weight: `).concat(n("datatable.column.title.font.weight"),`;
}

.p-datatable-tbody > tr {
    outline-color: transparent;
    background: `).concat(n("datatable.row.background"),`;
    color: `).concat(n("datatable.row.color"),`;
    transition: background `).concat(n("datatable.transition.duration"),", color ").concat(n("datatable.transition.duration"),", border-color ").concat(n("datatable.transition.duration"),`,
            outline-color `).concat(n("datatable.transition.duration"),", box-shadow ").concat(n("datatable.transition.duration"),`;
}

.p-datatable-tbody > tr > td {
    text-align: left;
    border-color: `).concat(n("datatable.body.cell.border.color"),`;
    border-style: solid;
    border-width: 0 0 1px 0;
    padding: `).concat(n("datatable.body.cell.padding"),`;
}

.p-datatable-hoverable .p-datatable-tbody > tr:not(.p-datatable-row-selected):hover {
    background: `).concat(n("datatable.row.hover.background"),`;
    color: `).concat(n("datatable.row.hover.color"),`;
}

.p-datatable-tbody > tr.p-datatable-row-selected {
    background: `).concat(n("datatable.row.selected.background"),`;
    color: `).concat(n("datatable.row.selected.color"),`;
}

.p-datatable-tbody > tr:has(+ .p-datatable-row-selected) > td {
    border-bottom-color: `).concat(n("datatable.body.cell.selected.border.color"),`;
}

.p-datatable-tbody > tr.p-datatable-row-selected > td {
    border-bottom-color: `).concat(n("datatable.body.cell.selected.border.color"),`;
}

.p-datatable-tbody > tr:focus-visible,
.p-datatable-tbody > tr.p-datatable-contextmenu-row-selected {
    box-shadow: `).concat(n("datatable.body.cell.focus.ring.shadow"),`;
    outline: `).concat(n("datatable.body.cell.focus.ring.width")," ").concat(n("datatable.body.cell.focus.ring.style")," ").concat(n("datatable.body.cell.focus.ring.color"),`;
    outline-offset: `).concat(n("datatable.body.cell.focus.ring.offset"),`;
}

.p-datatable-tfoot > tr > td {
    text-align: left;
    padding: `).concat(n("datatable.footer.cell.padding"),`;
    border-color: `).concat(n("datatable.footer.cell.border.color"),`;
    border-style: solid;
    border-width: 0 0 1px 0;
    color: `).concat(n("datatable.footer.cell.color"),`;
    background: `).concat(n("datatable.footer.cell.background"),`;
}

.p-datatable-column-footer {
    font-weight: `).concat(n("datatable.column.footer.font.weight"),`;
}

.p-datatable-sortable-column {
    cursor: pointer;
    user-select: none;
    outline-color: transparent;
}

.p-datatable-column-title,
.p-datatable-sort-icon,
.p-datatable-sort-badge {
    vertical-align: middle;
}

.p-datatable-sort-icon {
    color: `).concat(n("datatable.sort.icon.color"),`;
    transition: color `).concat(n("datatable.transition.duration"),`;
}

.p-datatable-sortable-column:not(.p-datatable-column-sorted):hover {
    background: `).concat(n("datatable.header.cell.hover.background"),`;
    color: `).concat(n("datatable.header.cell.hover.color"),`;
}

.p-datatable-sortable-column:not(.p-datatable-column-sorted):hover .p-datatable-sort-icon {
    color: `).concat(n("datatable.sort.icon.hover.color"),`;
}

.p-datatable-column-sorted {
    background: `).concat(n("datatable.header.cell.selected.background"),`;
    color: `).concat(n("datatable.header.cell.selected.color"),`;
}

.p-datatable-column-sorted .p-datatable-sort-icon {
    color: `).concat(n("datatable.header.cell.selected.color"),`;
}

.p-datatable-sortable-column:focus-visible {
    box-shadow: `).concat(n("datatable.header.cell.focus.ring.shadow"),`;
    outline: `).concat(n("datatable.header.cell.focus.ring.width")," ").concat(n("datatable.header.cell.focus.ring.style")," ").concat(n("datatable.header.cell.focus.ring.color"),`;
    outline-offset: `).concat(n("datatable.header.cell.focus.ring.offset"),`;
}

.p-datatable-hoverable .p-datatable-selectable-row {
    cursor: pointer;
}

.p-datatable-tbody > tr.p-datatable-dragpoint-top > td {
    box-shadow: inset 0 2px 0 0 `).concat(n("datatable.drop.point.color"),`;
}

.p-datatable-tbody > tr.p-datatable-dragpoint-bottom > td {
    box-shadow: inset 0 -2px 0 0 `).concat(n("datatable.drop.point.color"),`;
}

.p-datatable-loading-icon {
    font-size: `).concat(n("datatable.loading.icon.size"),`;
    width: `).concat(n("datatable.loading.icon.size"),`;
    height: `).concat(n("datatable.loading.icon.size"),`;
}

.p-datatable-gridlines .p-datatable-header {
    border-width: 1px 1px 0 1px;
}

.p-datatable-gridlines .p-datatable-footer {
    border-width: 0 1px 1px 1px;
}

.p-datatable-gridlines .p-datatable-paginator-top {
    border-width: 1px 1px 0 1px;
}

.p-datatable-gridlines .p-datatable-paginator-bottom {
    border-width: 0 1px 1px 1px;
}

.p-datatable-gridlines .p-datatable-thead > tr > th {
    border-width: 1px 0 1px 1px;
}

.p-datatable-gridlines .p-datatable-thead > tr > th:last-child {
    border-width: 1px;
}

.p-datatable-gridlines .p-datatable-tbody > tr > td {
    border-width: 1px 0 0 1px;
}

.p-datatable-gridlines .p-datatable-tbody > tr > td:last-child {
    border-width: 1px 1px 0 1px;
}

p-datatable-gridlines .p-datatable-tbody > tr:last-child > td {
    border-width: 1px 0 1px 1px;
}

.p-datatable-gridlines .p-datatable-tbody > tr:last-child > td:last-child {
    border-width: 1px;
}

.p-datatable-gridlines .p-datatable-tfoot > tr > td {
    border-width: 1px 0 1px 1px;
}

.p-datatable-gridlines .p-datatable-tfoot > tr > td:last-child {
    border-width: 1px 1px 1px 1px;
}

.p-datatable.p-datatable-gridlines .p-datatable-thead + .p-datatable-tfoot > tr > td {
    border-width: 0 0 1px 1px;
}

.p-datatable.p-datatable-gridlines .p-datatable-thead + .p-datatable-tfoot > tr > td:last-child {
    border-width: 0 1px 1px 1px;
}

.p-datatable.p-datatable-gridlines:has(.p-datatable-thead):has(.p-datatable-tbody) .p-datatable-tbody > tr > td {
    border-width: 0 0 1px 1px;
}

.p-datatable.p-datatable-gridlines:has(.p-datatable-thead):has(.p-datatable-tbody) .p-datatable-tbody > tr > td:last-child {
    border-width: 0 1px 1px 1px;
}

.p-datatable.p-datatable-gridlines:has(.p-datatable-tbody):has(.p-datatable-tfoot) .p-datatable-tbody > tr:last-child > td {
    border-width: 0 0 0 1px;
}

.p-datatable.p-datatable-gridlines:has(.p-datatable-tbody):has(.p-datatable-tfoot) .p-datatable-tbody > tr:last-child > td:last-child {
    border-width: 0 1px 0 1px;
}

.p-datatable.p-datatable-striped .p-datatable-tbody > tr.p-row-odd {
    background: `).concat(n("datatable.row.striped.background"),`;
}

.p-datatable.p-datatable-striped .p-datatable-tbody > tr.p-row-odd.p-datatable-row-selected {
    background: `).concat(n("datatable.row.selected.background"),`;
    color: `).concat(n("datatable.row.selected.color"),`;
}

.p-datatable.p-datatable-sm .p-datatable-header {
    padding: 0.375rem 0.5rem;
}

.p-datatable.p-datatable-sm .p-datatable-thead > tr > th {
    padding: 0.375rem 0.5rem;
}

.p-datatable.p-datatable-sm .p-datatable-tbody > tr > td {
    padding: 0.375rem 0.5rem;
}

.p-datatable.p-datatable-sm .p-datatable-tfoot > tr > td {
    padding: 0.375rem 0.5rem;
}

.p-datatable.p-datatable-sm .p-datatable-footer {
    padding: 0.375rem 0.5rem;
}

.p-datatable.p-datatable-lg .p-datatable-header {
    padding: 0.9375rem 1.25rem;
}

.p-datatable.p-datatable-lg .p-datatable-thead > tr > th {
    padding: 0.9375rem 1.25rem;
}

.p-datatable.p-datatable-lg .p-datatable-tbody>tr>td {
    padding: 0.9375rem 1.25rem;
}

.p-datatable.p-datatable-lg .p-datatable-tfoot>tr>td {
    padding: 0.9375rem 1.25rem;
}

.p-datatable.p-datatable-lg .p-datatable-footer {
    padding: 0.9375rem 1.25rem;
}

.p-datatable-row-toggle-button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    position: relative;
    width: `).concat(n("datatable.row.toggle.button.size"),`;
    height: `).concat(n("datatable.row.toggle.button.size"),`;
    color: `).concat(n("datatable.row.toggle.button.color"),`;
    border: 0 none;
    background: transparent;
    cursor: pointer;
    border-radius: `).concat(n("datatable.row.toggle.button.border.radius"),`;
    transition: background `).concat(n("datatable.transition.duration"),", color ").concat(n("datatable.transition.duration"),", border-color ").concat(n("datatable.transition.duration"),`,
            outline-color `).concat(n("datatable.transition.duration"),", box-shadow ").concat(n("datatable.transition.duration"),`;
    outline-color: transparent;
    user-select: none;
}

.p-datatable-row-toggle-button:enabled:hover {
    color: `).concat(n("datatable.row.toggle.button.hover.color"),`;
    background: `).concat(n("datatable.row.toggle.button.hover.background"),`;
}

.p-datatable-tbody > tr.p-datatable-row-selected .p-datatable-row-toggle-button:hover {
    background: `).concat(n("datatable.row.toggle.button.selected.hover.background"),`;
    `).concat(n("datatable.row.toggle.button.selected.hover.color"),`;
}

.p-datatable-row-toggle-button:focus-visible {
    box-shadow: `).concat(n("datatable.row.toggle.button.focus.ring.shadow"),`;
    outline: `).concat(n("datatable.row.toggle.button.focus.ring.width")," ").concat(n("datatable.row.toggle.button.focus.ring.style")," ").concat(n("datatable.row.toggle.button.focus.ring.color"),`;
    outline-offset: `).concat(n("datatable.row.toggle.button.focus.ring.offset"),`;
}
`)},Phe={root:function(e){var n=e.props;return["p-datatable p-component",{"p-datatable-hoverable":n.rowHover||n.selectionMode,"p-datatable-resizable":n.resizableColumns,"p-datatable-resizable-fit":n.resizableColumns&&n.columnResizeMode==="fit","p-datatable-scrollable":n.scrollable,"p-datatable-flex-scrollable":n.scrollable&&n.scrollHeight==="flex","p-datatable-striped":n.stripedRows,"p-datatable-gridlines":n.showGridlines,"p-datatable-sm":n.size==="small","p-datatable-lg":n.size==="large"}]},mask:"p-datatable-mask p-overlay-mask",loadingIcon:"p-datatable-loading-icon",header:"p-datatable-header",pcPaginator:function(e){var n=e.position;return"p-datatable-paginator-"+n},tableContainer:"p-datatable-table-container",table:function(e){var n=e.props;return["p-datatable-table",{"p-datatable-scrollable-table":n.scrollable,"p-datatable-resizable-table":n.resizableColumns,"p-datatable-resizable-table-fit":n.resizableColumns&&n.columnResizeMode==="fit"}]},thead:"p-datatable-thead",headerCell:function(e){var n=e.instance,r=e.props,o=e.column;return o&&!n.columnProp(o,"hidden")&&(r.rowGroupMode!=="subheader"||r.groupRowsBy!==n.columnProp(o,"field"))?["p-datatable-header-cell",{"p-datatable-frozen-column":n.columnProp(o,"frozen")}]:["p-datatable-header-cell",{"p-datatable-sortable-column":n.columnProp("sortable"),"p-datatable-resizable-column":n.resizableColumns,"p-datatable-column-sorted":n.isColumnSorted(),"p-datatable-frozen-column":n.columnProp("frozen"),"p-datatable-reorderable-column":r.reorderableColumns}]},columnResizer:"p-datatable-column-resizer",columnHeaderContent:"p-datatable-column-header-content",columnTitle:"p-datatable-column-title",columnFooter:"p-datatable-column-footer",sortIcon:"p-datatable-sort-icon",pcSortBadge:"p-datatable-sort-badge",filter:function(e){var n=e.props;return["p-datatable-filter",{"p-datatable-inline-filter":n.display==="row","p-datatable-popover-filter":n.display==="menu"}]},filterElementContainer:"p-datatable-filter-element-container",pcColumnFilterButton:"p-datatable-column-filter-button",pcColumnFilterClearButton:"p-datatable-column-filter-clear-button",filterOverlay:function(e){e.instance;var n=e.props;return["p-datatable-filter-overlay p-component",{"p-datatable-filter-overlay-popover":n.display==="menu"}]},filterConstraintList:"p-datatable-filter-constraint-list",filterConstraint:function(e){var n=e.instance,r=e.matchMode;return["p-datatable-filter-constraint",{"p-datatable-filter-constraint-selected":r&&n.isRowMatchModeSelected(r.value)}]},filterConstraintSeparator:"p-datatable-filter-constraint-separator",filterOperator:"p-datatable-filter-operator",pcFilterOperatorDropdown:"p-datatable-filter-operator-dropdown",filterRuleList:"p-datatable-filter-rule-list",filterRule:"p-datatable-filter-rule",pcFilterConstraintDropdown:"p-datatable-filter-constraint-dropdown",pcFilterRemoveRuleButton:"p-datatable-filter-remove-rule-button",pcFilterAddRuleButton:"p-datatable-filter-add-rule-button",filterButtonbar:"p-datatable-filter-buttonbar",pcFilterClearButton:"p-datatable-filter-clear-button",pcFilterApplyButton:"p-datatable-filter-apply-button",tbody:function(e){var n=e.props;return n.frozenRow?"p-datatable-tbody p-datatable-frozen-tbody":"p-datatable-tbody"},rowGroupHeader:"p-datatable-row-group-header",rowToggleButton:"p-datatable-row-toggle-button",rowToggleIcon:"p-datatable-row-toggle-icon",row:function(e){var n=e.instance,r=e.props,o=e.index,l=e.columnSelectionMode,h=[];return r.selectionMode&&h.push("p-datatable-selectable-row"),r.selection&&h.push({"p-datatable-row-selected":l?n.isSelected&&n.$parentInstance.$parentInstance.highlightOnSelect:n.isSelected}),r.contextMenuSelection&&h.push({"p-datatable-contextmenu-row-selected":n.isSelectedWithContextMenu}),h.push(o%2===0?"p-row-even":"p-row-odd"),h},rowExpansion:"p-datatable-row-expansion",rowGroupFooter:"p-datatable-row-group-footer",emptyMessage:"p-datatable-empty-message",bodyCell:function(e){var n=e.instance;return[{"p-datatable-frozen-column":n.columnProp("frozen")}]},reorderableRowHandle:"p-datatable-reorderable-row-handle",pcRowEditorInit:"p-datatable-row-editor-init",pcRowEditorSave:"p-datatable-row-editor-save",pcRowEditorCancel:"p-datatable-row-editor-cancel",tfoot:"p-datatable-tfoot",footerCell:function(e){var n=e.instance;return[{"p-datatable-frozen-column":n.columnProp("frozen")}]},virtualScrollerSpacer:"p-datatable-virtualscroller-spacer",footer:"p-datatable-footer",columnResizeIndicator:"p-datatable-column-resize-indicator",rowReorderIndicatorUp:"p-datatable-row-reorder-indicator-up",rowReorderIndicatorDown:"p-datatable-row-reorder-indicator-down"},Lhe={tableContainer:{overflow:"auto"},thead:{position:"sticky"},tfoot:{position:"sticky"}},Fhe=Uo.extend({name:"datatable",theme:Ihe,classes:Phe,inlineStyles:Lhe}),N4={name:"ChevronRightIcon",extends:Us},Rhe=mt("path",{d:"M4.38708 13C4.28408 13.0005 4.18203 12.9804 4.08691 12.9409C3.99178 12.9014 3.9055 12.8433 3.83313 12.7701C3.68634 12.6231 3.60388 12.4238 3.60388 12.2161C3.60388 12.0084 3.68634 11.8091 3.83313 11.6622L8.50507 6.99022L3.83313 2.31827C3.69467 2.16968 3.61928 1.97313 3.62287 1.77005C3.62645 1.56698 3.70872 1.37322 3.85234 1.22959C3.99596 1.08597 4.18972 1.00371 4.3928 1.00012C4.59588 0.996539 4.79242 1.07192 4.94102 1.21039L10.1669 6.43628C10.3137 6.58325 10.3962 6.78249 10.3962 6.99022C10.3962 7.19795 10.3137 7.39718 10.1669 7.54416L4.94102 12.7701C4.86865 12.8433 4.78237 12.9014 4.68724 12.9409C4.59212 12.9804 4.49007 13.0005 4.38708 13Z",fill:"currentColor"},null,-1),khe=[Rhe];function Mhe(t,e,n,r,o,l){return ve(),et("svg",It({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),khe,16)}N4.render=Mhe;var aV={name:"BarsIcon",extends:Us},Ohe=mt("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.3226 3.6129H0.677419C0.497757 3.6129 0.325452 3.54152 0.198411 3.41448C0.0713707 3.28744 0 3.11514 0 2.93548C0 2.75581 0.0713707 2.58351 0.198411 2.45647C0.325452 2.32943 0.497757 2.25806 0.677419 2.25806H13.3226C13.5022 2.25806 13.6745 2.32943 13.8016 2.45647C13.9286 2.58351 14 2.75581 14 2.93548C14 3.11514 13.9286 3.28744 13.8016 3.41448C13.6745 3.54152 13.5022 3.6129 13.3226 3.6129ZM13.3226 7.67741H0.677419C0.497757 7.67741 0.325452 7.60604 0.198411 7.479C0.0713707 7.35196 0 7.17965 0 6.99999C0 6.82033 0.0713707 6.64802 0.198411 6.52098C0.325452 6.39394 0.497757 6.32257 0.677419 6.32257H13.3226C13.5022 6.32257 13.6745 6.39394 13.8016 6.52098C13.9286 6.64802 14 6.82033 14 6.99999C14 7.17965 13.9286 7.35196 13.8016 7.479C13.6745 7.60604 13.5022 7.67741 13.3226 7.67741ZM0.677419 11.7419H13.3226C13.5022 11.7419 13.6745 11.6706 13.8016 11.5435C13.9286 11.4165 14 11.2442 14 11.0645C14 10.8848 13.9286 10.7125 13.8016 10.5855C13.6745 10.4585 13.5022 10.3871 13.3226 10.3871H0.677419C0.497757 10.3871 0.325452 10.4585 0.198411 10.5855C0.0713707 10.7125 0 10.8848 0 11.0645C0 11.2442 0.0713707 11.4165 0.198411 11.5435C0.325452 11.6706 0.497757 11.7419 0.677419 11.7419Z",fill:"currentColor"},null,-1),Dhe=[Ohe];function Uhe(t,e,n,r,o,l){return ve(),et("svg",It({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),Dhe,16)}aV.render=Uhe;var lV={name:"PencilIcon",extends:Us},Nhe=mt("path",{d:"M0.609628 13.959C0.530658 13.9599 0.452305 13.9451 0.379077 13.9156C0.305849 13.8861 0.239191 13.8424 0.18294 13.787C0.118447 13.7234 0.0688234 13.6464 0.0376166 13.5614C0.00640987 13.4765 -0.00560954 13.3857 0.00241768 13.2956L0.25679 10.1501C0.267698 10.0041 0.331934 9.86709 0.437312 9.76516L9.51265 0.705715C10.0183 0.233014 10.6911 -0.0203041 11.3835 0.00127367C12.0714 0.00660201 12.7315 0.27311 13.2298 0.746671C13.7076 1.23651 13.9824 1.88848 13.9992 2.57201C14.0159 3.25554 13.7733 3.92015 13.32 4.4327L4.23648 13.5331C4.13482 13.6342 4.0017 13.6978 3.85903 13.7133L0.667067 14L0.609628 13.959ZM1.43018 10.4696L1.25787 12.714L3.50619 12.5092L12.4502 3.56444C12.6246 3.35841 12.7361 3.10674 12.7714 2.83933C12.8067 2.57193 12.7644 2.30002 12.6495 2.05591C12.5346 1.8118 12.3519 1.60575 12.1231 1.46224C11.8943 1.31873 11.6291 1.2438 11.3589 1.24633C11.1813 1.23508 11.0033 1.25975 10.8355 1.31887C10.6677 1.37798 10.5136 1.47033 10.3824 1.59036L1.43018 10.4696Z",fill:"currentColor"},null,-1),zhe=[Nhe];function Vhe(t,e,n,r,o,l){return ve(),et("svg",It({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),zhe,16)}lV.render=Vhe;var Qhe=function(e){var n=e.dt;return`
.p-badge {
    display: inline-flex;
    border-radius: `.concat(n("badge.border.radius"),`;
    align-items: center;
    justify-content: center;
    padding: `).concat(n("badge.padding"),`;
    background: `).concat(n("badge.primary.background"),`;
    color: `).concat(n("badge.primary.color"),`;
    font-size: `).concat(n("badge.font.size"),`;
    font-weight: `).concat(n("badge.font.weight"),`;
    min-width: `).concat(n("badge.min.width"),`;
    height: `).concat(n("badge.height"),`;
}

.p-badge-dot {
    width: `).concat(n("badge.dot.size"),`;
    min-width: `).concat(n("badge.dot.size"),`;
    height: `).concat(n("badge.dot.size"),`;
    border-radius: 50%;
    padding: 0;
}

.p-badge-circle {
    padding: 0;
    border-radius: 50%;
}

.p-badge-secondary {
    background: `).concat(n("badge.secondary.background"),`;
    color: `).concat(n("badge.secondary.color"),`;
}

.p-badge-success {
    background: `).concat(n("badge.success.background"),`;
    color: `).concat(n("badge.success.color"),`;
}

.p-badge-info {
    background: `).concat(n("badge.info.background"),`;
    color: `).concat(n("badge.info.color"),`;
}

.p-badge-warn {
    background: `).concat(n("badge.warn.background"),`;
    color: `).concat(n("badge.warn.color"),`;
}

.p-badge-danger {
    background: `).concat(n("badge.danger.background"),`;
    color: `).concat(n("badge.danger.color"),`;
}

.p-badge-contrast {
    background: `).concat(n("badge.contrast.background"),`;
    color: `).concat(n("badge.contrast.color"),`;
}

.p-badge-sm {
    font-size: `).concat(n("badge.sm.font.size"),`;
    min-width: `).concat(n("badge.sm.min.width"),`;
    height: `).concat(n("badge.sm.height"),`;
}

.p-badge-lg {
    font-size: `).concat(n("badge.lg.font.size"),`;
    min-width: `).concat(n("badge.lg.min.width"),`;
    height: `).concat(n("badge.lg.height"),`;
}

.p-badge-xl {
    font-size: `).concat(n("badge.xl.font.size"),`;
    min-width: `).concat(n("badge.xl.min.width"),`;
    height: `).concat(n("badge.xl.height"),`;
}
`)},Hhe={root:function(e){var n=e.props,r=e.instance;return["p-badge p-component",{"p-badge-circle":Lo(n.value)&&String(n.value).length===1,"p-badge-dot":mu(n.value)&&!r.$slots.default,"p-badge-sm":n.size==="small","p-badge-lg":n.size==="large","p-badge-xl":n.size==="xlarge","p-badge-info":n.severity==="info","p-badge-success":n.severity==="success","p-badge-warn":n.severity==="warn","p-badge-danger":n.severity==="danger","p-badge-secondary":n.severity==="secondary","p-badge-contrast":n.severity==="contrast"}]}},jhe=Uo.extend({name:"badge",theme:Qhe,classes:Hhe}),$he={name:"BaseBadge",extends:Ro,props:{value:{type:[String,Number],default:null},severity:{type:String,default:null},size:{type:String,default:null}},style:jhe,provide:function(){return{$pcBadge:this,$parentInstance:this}}},z4={name:"Badge",extends:$he,inheritAttrs:!1};function Ghe(t,e,n,r,o,l){return ve(),et("span",It({class:t.cx("root")},t.ptmi("root")),[Xt(t.$slots,"default",{},function(){return[jr(Ar(t.value),1)]})],16)}z4.render=Ghe;function y1(t){"@babel/helpers - typeof";return y1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y1(t)}function qd(t,e,n){return(e=Khe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Khe(t){var e=qhe(t,"string");return y1(e)=="symbol"?e:e+""}function qhe(t,e){if(y1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(y1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Whe=function(e){var n=e.dt;return`
.p-button {
    display: inline-flex;
    cursor: pointer;
    user-select: none;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    position: relative;
    color: `.concat(n("button.primary.color"),`;
    background: `).concat(n("button.primary.background"),`;
    border: 1px solid `).concat(n("button.primary.border.color"),`;
    padding: `).concat(n("button.padding.y")," ").concat(n("button.padding.x"),`;
    font-size: 1rem;
    font-family: inherit;
    font-feature-settings: inherit;
    transition: background `).concat(n("button.transition.duration"),", color ").concat(n("button.transition.duration"),", border-color ").concat(n("button.transition.duration"),`,
            outline-color `).concat(n("button.transition.duration"),", box-shadow ").concat(n("button.transition.duration"),`;
    border-radius: `).concat(n("button.border.radius"),`;
    outline-color: transparent;
    gap: `).concat(n("button.gap"),`;
}

.p-button:disabled {
    cursor: default;
}

.p-button-icon-right {
    order: 1;
}

.p-button-icon-bottom {
    order: 2;
}

.p-button-icon-only {
    width: `).concat(n("button.icon.only.width"),`;
    padding-left: 0;
    padding-right: 0;
    gap: 0;
}

.p-button-icon-only.p-button-rounded {
    border-radius: 50%;
    height: `).concat(n("button.icon.only.width"),`;
}

.p-button-icon-only .p-button-label {
    visibility: hidden;
    width: 0;
}

.p-button-sm {
    font-size: `).concat(n("button.sm.font.size"),`;
    padding: `).concat(n("button.sm.padding.y")," ").concat(n("button.sm.padding.x"),`;
}

.p-button-sm .p-button-icon {
    font-size: `).concat(n("button.sm.font.size"),`;
}

.p-button-lg {
    font-size: `).concat(n("button.lg.font.size"),`;
    padding: `).concat(n("button.lg.padding.y")," ").concat(n("button.lg.padding.x"),`;
}

.p-button-lg .p-button-icon {
    font-size: `).concat(n("button.lg.font.size"),`;
}

.p-button-vertical {
    flex-direction: column;
}

.p-button-label {
    font-weight: `).concat(n("button.label.font.weight"),`;
}

.p-button-fluid {
    width: 100%;
}

.p-button-fluid.p-button-icon-only {
    width: `).concat(n("button.icon.only.width"),`;
}

.p-button:not(:disabled):hover {
    background: `).concat(n("button.primary.hover.background"),`;
    border: 1px solid `).concat(n("button.primary.hover.border.color"),`;
    color: `).concat(n("button.primary.hover.color"),`;
}

.p-button:not(:disabled):active {
    background: `).concat(n("button.primary.active.background"),`;
    border: 1px solid `).concat(n("button.primary.active.border.color"),`;
    color: `).concat(n("button.primary.active.color"),`;
}

.p-button:focus-visible {
    box-shadow: `).concat(n("button.primary.focus.ring.shadow"),`;
    outline: `).concat(n("button.focus.ring.width")," ").concat(n("button.focus.ring.style")," ").concat(n("button.primary.focus.ring.color"),`;
    outline-offset: `).concat(n("button.focus.ring.offset"),`;
}

.p-button .p-badge {
    min-width: `).concat(n("button.badge.size"),`;
    height: `).concat(n("button.badge.size"),`;
    line-height: `).concat(n("button.badge.size"),`;
}

.p-button-raised {
    box-shadow: `).concat(n("button.raised.shadow"),`;
}

.p-button-rounded {
    border-radius: `).concat(n("button.rounded.border.radius"),`;
}

.p-button-secondary {
    background: `).concat(n("button.secondary.background"),`;
    border: 1px solid `).concat(n("button.secondary.border.color"),`;
    color: `).concat(n("button.secondary.color"),`;
}

.p-button-secondary:not(:disabled):hover {
    background: `).concat(n("button.secondary.hover.background"),`;
    border: 1px solid `).concat(n("button.secondary.hover.border.color"),`;
    color: `).concat(n("button.secondary.hover.color"),`;
}

.p-button-secondary:not(:disabled):active {
    background: `).concat(n("button.secondary.active.background"),`;
    border: 1px solid `).concat(n("button.secondary.active.border.color"),`;
    color: `).concat(n("button.secondary.active.color"),`;
}

.p-button-secondary:focus-visible {
    outline-color: `).concat(n("button.secondary.focus.ring.color"),`;
    box-shadow: `).concat(n("button.secondary.focus.ring.shadow"),`;
}

.p-button-success {
    background: `).concat(n("button.success.background"),`;
    border: 1px solid `).concat(n("button.success.border.color"),`;
    color: `).concat(n("button.success.color"),`;
}

.p-button-success:not(:disabled):hover {
    background: `).concat(n("button.success.hover.background"),`;
    border: 1px solid `).concat(n("button.success.hover.border.color"),`;
    color: `).concat(n("button.success.hover.color"),`;
}

.p-button-success:not(:disabled):active {
    background: `).concat(n("button.success.active.background"),`;
    border: 1px solid `).concat(n("button.success.active.border.color"),`;
    color: `).concat(n("button.success.active.color"),`;
}

.p-button-success:focus-visible {
    outline-color: `).concat(n("button.success.focus.ring.color"),`;
    box-shadow: `).concat(n("button.success.focus.ring.shadow"),`;
}

.p-button-info {
    background: `).concat(n("button.info.background"),`;
    border: 1px solid `).concat(n("button.info.border.color"),`;
    color: `).concat(n("button.info.color"),`;
}

.p-button-info:not(:disabled):hover {
    background: `).concat(n("button.info.hover.background"),`;
    border: 1px solid `).concat(n("button.info.hover.border.color"),`;
    color: `).concat(n("button.info.hover.color"),`;
}

.p-button-info:not(:disabled):active {
    background: `).concat(n("button.info.active.background"),`;
    border: 1px solid `).concat(n("button.info.active.border.color"),`;
    color: `).concat(n("button.info.active.color"),`;
}

.p-button-info:focus-visible {
    outline-color: `).concat(n("button.info.focus.ring.color"),`;
    box-shadow: `).concat(n("button.info.focus.ring.shadow"),`;
}

.p-button-warn {
    background: `).concat(n("button.warn.background"),`;
    border: 1px solid `).concat(n("button.warn.border.color"),`;
    color: `).concat(n("button.warn.color"),`;
}

.p-button-warn:not(:disabled):hover {
    background: `).concat(n("button.warn.hover.background"),`;
    border: 1px solid `).concat(n("button.warn.hover.border.color"),`;
    color: `).concat(n("button.warn.hover.color"),`;
}

.p-button-warn:not(:disabled):active {
    background: `).concat(n("button.warn.active.background"),`;
    border: 1px solid `).concat(n("button.warn.active.border.color"),`;
    color: `).concat(n("button.warn.active.color"),`;
}

.p-button-warn:focus-visible {
    outline-color: `).concat(n("button.warn.focus.ring.color"),`;
    box-shadow: `).concat(n("button.warn.focus.ring.shadow"),`;
}

.p-button-help {
    background: `).concat(n("button.help.background"),`;
    border: 1px solid `).concat(n("button.help.border.color"),`;
    color: `).concat(n("button.help.color"),`;
}

.p-button-help:not(:disabled):hover {
    background: `).concat(n("button.help.hover.background"),`;
    border: 1px solid `).concat(n("button.help.hover.border.color"),`;
    color: `).concat(n("button.help.hover.color"),`;
}

.p-button-help:not(:disabled):active {
    background: `).concat(n("button.help.active.background"),`;
    border: 1px solid `).concat(n("button.help.active.border.color"),`;
    color: `).concat(n("button.help.active.color"),`;
}

.p-button-help:focus-visible {
    outline-color: `).concat(n("button.help.focus.ring.color"),`;
    box-shadow: `).concat(n("button.help.focus.ring.shadow"),`;
}

.p-button-danger {
    background: `).concat(n("button.danger.background"),`;
    border: 1px solid `).concat(n("button.danger.border.color"),`;
    color: `).concat(n("button.danger.color"),`;
}

.p-button-danger:not(:disabled):hover {
    background: `).concat(n("button.danger.hover.background"),`;
    border: 1px solid `).concat(n("button.danger.hover.border.color"),`;
    color: `).concat(n("button.danger.hover.color"),`;
}

.p-button-danger:not(:disabled):active {
    background: `).concat(n("button.danger.active.background"),`;
    border: 1px solid `).concat(n("button.danger.active.border.color"),`;
    color: `).concat(n("button.danger.active.color"),`;
}

.p-button-danger:focus-visible {
    outline-color: `).concat(n("button.danger.focus.ring.color"),`;
    box-shadow: `).concat(n("button.danger.focus.ring.shadow"),`;
}

.p-button-contrast {
    background: `).concat(n("button.contrast.background"),`;
    border: 1px solid `).concat(n("button.contrast.border.color"),`;
    color: `).concat(n("button.contrast.color"),`;
}

.p-button-contrast:not(:disabled):hover {
    background: `).concat(n("button.contrast.hover.background"),`;
    border: 1px solid `).concat(n("button.contrast.hover.border.color"),`;
    color: `).concat(n("button.contrast.hover.color"),`;
}

.p-button-contrast:not(:disabled):active {
    background: `).concat(n("button.contrast.active.background"),`;
    border: 1px solid `).concat(n("button.contrast.active.border.color"),`;
    color: `).concat(n("button.contrast.active.color"),`;
}

.p-button-contrast:focus-visible {
    outline-color: `).concat(n("button.contrast.focus.ring.color"),`;
    box-shadow: `).concat(n("button.contrast.focus.ring.shadow"),`;
}

.p-button-outlined {
    background: transparent;
    border-color: `).concat(n("button.outlined.primary.border.color"),`;
    color: `).concat(n("button.outlined.primary.color"),`;
}

.p-button-outlined:not(:disabled):hover {
    background: `).concat(n("button.outlined.primary.hover.background"),`;
    border-color: `).concat(n("button.outlined.primary.border.color"),`;
    color: `).concat(n("button.outlined.primary.color"),`;
}

.p-button-outlined:not(:disabled):active {
    background: `).concat(n("button.outlined.primary.active.background"),`;
    border-color: `).concat(n("button.outlined.primary.border.color"),`;
    color: `).concat(n("button.outlined.primary.color"),`;
}

.p-button-outlined.p-button-secondary {
    border-color: `).concat(n("button.outlined.secondary.border.color"),`;
    color: `).concat(n("button.outlined.secondary.color"),`;
}

.p-button-outlined.p-button-secondary:not(:disabled):hover {
    background: `).concat(n("button.outlined.secondary.hover.background"),`;
    border-color: `).concat(n("button.outlined.secondary.border.color"),`;
    color: `).concat(n("button.outlined.secondary.color"),`;
}

.p-button-outlined.p-button-secondary:not(:disabled):active {
    background: `).concat(n("button.outlined.secondary.active.background"),`;
    border-color: `).concat(n("button.outlined.secondary.border.color"),`;
    color: `).concat(n("button.outlined.secondary.color"),`;
}

.p-button-outlined.p-button-success {
    border-color: `).concat(n("button.outlined.success.border.color"),`;
    color: `).concat(n("button.outlined.success.color"),`;
}

.p-button-outlined.p-button-success:not(:disabled):hover {
    background: `).concat(n("button.outlined.success.hover.background"),`;
    border-color: `).concat(n("button.outlined.success.border.color"),`;
    color: `).concat(n("button.outlined.success.color"),`;
}

.p-button-outlined.p-button-success:not(:disabled):active {
    background: `).concat(n("button.outlined.success.active.background"),`;
    border-color: `).concat(n("button.outlined.success.border.color"),`;
    color: `).concat(n("button.outlined.success.color"),`;
}

.p-button-outlined.p-button-info {
    border-color: `).concat(n("button.outlined.info.border.color"),`;
    color: `).concat(n("button.outlined.info.color"),`;
}

.p-button-outlined.p-button-info:not(:disabled):hover {
    background: `).concat(n("button.outlined.info.hover.background"),`;
    border-color: `).concat(n("button.outlined.info.border.color"),`;
    color: `).concat(n("button.outlined.info.color"),`;
}

.p-button-outlined.p-button-info:not(:disabled):active {
    background: `).concat(n("button.outlined.info.active.background"),`;
    border-color: `).concat(n("button.outlined.info.border.color"),`;
    color: `).concat(n("button.outlined.info.color"),`;
}

.p-button-outlined.p-button-warn {
    border-color: `).concat(n("button.outlined.warn.border.color"),`;
    color: `).concat(n("button.outlined.warn.color"),`;
}

.p-button-outlined.p-button-warn:not(:disabled):hover {
    background: `).concat(n("button.outlined.warn.hover.background"),`;
    border-color: `).concat(n("button.outlined.warn.border.color"),`;
    color: `).concat(n("button.outlined.warn.color"),`;
}

.p-button-outlined.p-button-warn:not(:disabled):active {
    background: `).concat(n("button.outlined.warn.active.background"),`;
    border-color: `).concat(n("button.outlined.warn.border.color"),`;
    color: `).concat(n("button.outlined.warn.color"),`;
}

.p-button-outlined.p-button-help {
    border-color: `).concat(n("button.outlined.help.border.color"),`;
    color: `).concat(n("button.outlined.help.color"),`;
}

.p-button-outlined.p-button-help:not(:disabled):hover {
    background: `).concat(n("button.outlined.help.hover.background"),`;
    border-color: `).concat(n("button.outlined.help.border.color"),`;
    color: `).concat(n("button.outlined.help.color"),`;
}

.p-button-outlined.p-button-help:not(:disabled):active {
    background: `).concat(n("button.outlined.help.active.background"),`;
    border-color: `).concat(n("button.outlined.help.border.color"),`;
    color: `).concat(n("button.outlined.help.color"),`;
}

.p-button-outlined.p-button-danger {
    border-color: `).concat(n("button.outlined.danger.border.color"),`;
    color: `).concat(n("button.outlined.danger.color"),`;
}

.p-button-outlined.p-button-danger:not(:disabled):hover {
    background: `).concat(n("button.outlined.danger.hover.background"),`;
    border-color: `).concat(n("button.outlined.danger.border.color"),`;
    color: `).concat(n("button.outlined.danger.color"),`;
}

.p-button-outlined.p-button-danger:not(:disabled):active {
    background: `).concat(n("button.outlined.danger.active.background"),`;
    border-color: `).concat(n("button.outlined.danger.border.color"),`;
    color: `).concat(n("button.outlined.danger.color"),`;
}

.p-button-outlined.p-button-contrast {
    border-color: `).concat(n("button.outlined.contrast.border.color"),`;
    color: `).concat(n("button.outlined.contrast.color"),`;
}

.p-button-outlined.p-button-contrast:not(:disabled):hover {
    background: `).concat(n("button.outlined.contrast.hover.background"),`;
    border-color: `).concat(n("button.outlined.contrast.border.color"),`;
    color: `).concat(n("button.outlined.contrast.color"),`;
}

.p-button-outlined.p-button-contrast:not(:disabled):active {
    background: `).concat(n("button.outlined.contrast.active.background"),`;
    border-color: `).concat(n("button.outlined.contrast.border.color"),`;
    color: `).concat(n("button.outlined.contrast.color"),`;
}

.p-button-outlined.p-button-plain {
    border-color: `).concat(n("button.outlined.plain.border.color"),`;
    color: `).concat(n("button.outlined.plain.color"),`;
}

.p-button-outlined.p-button-plain:not(:disabled):hover {
    background: `).concat(n("button.outlined.plain.hover.background"),`;
    border-color: `).concat(n("button.outlined.plain.border.color"),`;
    color: `).concat(n("button.outlined.plain.color"),`;
}

.p-button-outlined.p-button-plain:not(:disabled):active {
    background: `).concat(n("button.outlined.plain.active.background"),`;
    border-color: `).concat(n("button.outlined.plain.border.color"),`;
    color: `).concat(n("button.outlined.plain.color"),`;
}

.p-button-text {
    background: transparent;
    border-color: transparent;
    color: `).concat(n("button.text.primary.color"),`;
}

.p-button-text:not(:disabled):hover {
    background: `).concat(n("button.text.primary.hover.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.primary.color"),`;
}

.p-button-text:not(:disabled):active {
    background: `).concat(n("button.text.primary.active.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.primary.color"),`;
}

.p-button-text.p-button-secondary {
    background: transparent;
    border-color: transparent;
    color: `).concat(n("button.text.secondary.color"),`;
}

.p-button-text.p-button-secondary:not(:disabled):hover {
    background: `).concat(n("button.text.secondary.hover.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.secondary.color"),`;
}

.p-button-text.p-button-secondary:not(:disabled):active {
    background: `).concat(n("button.text.secondary.active.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.secondary.color"),`;
}

.p-button-text.p-button-success {
    background: transparent;
    border-color: transparent;
    color: `).concat(n("button.text.success.color"),`;
}

.p-button-text.p-button-success:not(:disabled):hover {
    background: `).concat(n("button.text.success.hover.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.success.color"),`;
}

.p-button-text.p-button-success:not(:disabled):active {
    background: `).concat(n("button.text.success.active.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.success.color"),`;
}

.p-button-text.p-button-info {
    background: transparent;
    border-color: transparent;
    color: `).concat(n("button.text.info.color"),`;
}

.p-button-text.p-button-info:not(:disabled):hover {
    background: `).concat(n("button.text.info.hover.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.info.color"),`;
}

.p-button-text.p-button-info:not(:disabled):active {
    background: `).concat(n("button.text.info.active.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.info.color"),`;
}

.p-button-text.p-button-warn {
    background: transparent;
    border-color: transparent;
    color: `).concat(n("button.text.warn.color"),`;
}

.p-button-text.p-button-warn:not(:disabled):hover {
    background: `).concat(n("button.text.warn.hover.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.warn.color"),`;
}

.p-button-text.p-button-warn:not(:disabled):active {
    background: `).concat(n("button.text.warn.active.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.warn.color"),`;
}

.p-button-text.p-button-help {
    background: transparent;
    border-color: transparent;
    color: `).concat(n("button.text.help.color"),`;
}

.p-button-text.p-button-help:not(:disabled):hover {
    background: `).concat(n("button.text.help.hover.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.help.color"),`;
}

.p-button-text.p-button-help:not(:disabled):active {
    background: `).concat(n("button.text.help.active.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.help.color"),`;
}

.p-button-text.p-button-danger {
    background: transparent;
    border-color: transparent;
    color: `).concat(n("button.text.danger.color"),`;
}

.p-button-text.p-button-danger:not(:disabled):hover {
    background: `).concat(n("button.text.danger.hover.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.danger.color"),`;
}

.p-button-text.p-button-danger:not(:disabled):active {
    background: `).concat(n("button.text.danger.active.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.danger.color"),`;
}

.p-button-text.p-button-plain {
    background: transparent;
    border-color: transparent;
    color: `).concat(n("button.text.plain.color"),`;
}

.p-button-text.p-button-plain:not(:disabled):hover {
    background: `).concat(n("button.text.plain.hover.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.plain.color"),`;
}

.p-button-text.p-button-plain:not(:disabled):active {
    background: `).concat(n("button.text.plain.active.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.plain.color"),`;
}

.p-button-link {
    background: transparent;
    border-color: transparent;
    color: `).concat(n("button.link.color"),`;
}

.p-button-link:not(:disabled):hover {
    background: transparent;
    border-color: transparent;
    color: `).concat(n("button.link.hover.color"),`;
}

.p-button-link:not(:disabled):hover .p-button-label {
    text-decoration: underline;
}

.p-button-link:not(:disabled):active {
    background: transparent;
    border-color: transparent;
    color: `).concat(n("button.link.active.color"),`;
}
`)},Xhe={root:function(e){var n=e.instance,r=e.props;return["p-button p-component",qd(qd(qd(qd(qd(qd(qd(qd(qd({"p-button-icon-only":n.hasIcon&&!r.label&&!r.badge,"p-button-vertical":(r.iconPos==="top"||r.iconPos==="bottom")&&r.label,"p-button-loading":r.loading,"p-button-link":r.link},"p-button-".concat(r.severity),r.severity),"p-button-raised",r.raised),"p-button-rounded",r.rounded),"p-button-text",r.text),"p-button-outlined",r.outlined),"p-button-sm",r.size==="small"),"p-button-lg",r.size==="large"),"p-button-plain",r.plain),"p-button-fluid",n.hasFluid)]},loadingIcon:"p-button-loading-icon",icon:function(e){var n=e.props;return["p-button-icon",qd({},"p-button-icon-".concat(n.iconPos),n.label)]},label:"p-button-label"},Zhe=Uo.extend({name:"button",theme:Whe,classes:Xhe}),Yhe={name:"BaseButton",extends:Ro,props:{label:{type:String,default:null},icon:{type:String,default:null},iconPos:{type:String,default:"left"},iconClass:{type:String,default:null},badge:{type:String,default:null},badgeClass:{type:String,default:null},badgeSeverity:{type:String,default:"secondary"},loading:{type:Boolean,default:!1},loadingIcon:{type:String,default:void 0},as:{type:[String,Object],default:"BUTTON"},asChild:{type:Boolean,default:!1},link:{type:Boolean,default:!1},severity:{type:String,default:null},raised:{type:Boolean,default:!1},rounded:{type:Boolean,default:!1},text:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},size:{type:String,default:null},plain:{type:Boolean,default:!1},fluid:{type:Boolean,default:null}},style:Zhe,provide:function(){return{$pcButton:this,$parentInstance:this}}},V4={name:"Button",extends:Yhe,inheritAttrs:!1,inject:{$pcFluid:{default:null}},methods:{getPTOptions:function(e){var n=e==="root"?this.ptmi:this.ptm;return n(e,{context:{disabled:this.disabled}})}},computed:{disabled:function(){return this.$attrs.disabled||this.$attrs.disabled===""||this.loading},defaultAriaLabel:function(){return this.label?this.label+(this.badge?" "+this.badge:""):this.$attrs.ariaLabel},hasIcon:function(){return this.icon||this.$slots.icon},attrs:function(){return It(this.asAttrs,this.a11yAttrs,this.getPTOptions("root"))},asAttrs:function(){return this.as==="BUTTON"?{type:"button",disabled:this.disabled}:void 0},a11yAttrs:function(){return{"aria-label":this.defaultAriaLabel,"data-pc-name":"button","data-p-disabled":this.disabled,"data-p-severity":this.severity}},hasFluid:function(){return mu(this.fluid)?!!this.$pcFluid:this.fluid}},components:{SpinnerIcon:rb,Badge:z4},directives:{ripple:pm}};function Jhe(t,e,n,r,o,l){var h=Nr("SpinnerIcon"),p=Nr("Badge"),i=CA("ripple");return t.asChild?Xt(t.$slots,"default",{key:1,class:On(t.cx("root")),a11yAttrs:l.a11yAttrs}):Fo((ve(),hn(mr(t.as),It({key:0,class:t.cx("root")},l.attrs),{default:Kn(function(){return[Xt(t.$slots,"default",{},function(){return[t.loading?Xt(t.$slots,"loadingicon",{key:0,class:On([t.cx("loadingIcon"),t.cx("icon")])},function(){return[t.loadingIcon?(ve(),et("span",It({key:0,class:[t.cx("loadingIcon"),t.cx("icon"),t.loadingIcon]},t.ptm("loadingIcon")),null,16)):(ve(),hn(h,It({key:1,class:[t.cx("loadingIcon"),t.cx("icon")],spin:""},t.ptm("loadingIcon")),null,16,["class"]))]}):Xt(t.$slots,"icon",{key:1,class:On([t.cx("icon")])},function(){return[t.icon?(ve(),et("span",It({key:0,class:[t.cx("icon"),t.icon,t.iconClass]},t.ptm("icon")),null,16)):Sn("",!0)]}),mt("span",It({class:t.cx("label")},t.ptm("label")),Ar(t.label||" "),17),t.badge?(ve(),hn(p,It({key:2,value:t.badge,class:t.badgeClass,severity:t.badgeSeverity,unstyled:t.unstyled},t.ptm("pcBadge")),null,16,["value","class","severity","unstyled"])):Sn("",!0)]})]}),_:3},16,["class"])),[[i]])}V4.render=Jhe;var cV={name:"MinusIcon",extends:Us},ede=mt("path",{d:"M13.2222 7.77778H0.777778C0.571498 7.77778 0.373667 7.69584 0.227806 7.54998C0.0819442 7.40412 0 7.20629 0 7.00001C0 6.79373 0.0819442 6.5959 0.227806 6.45003C0.373667 6.30417 0.571498 6.22223 0.777778 6.22223H13.2222C13.4285 6.22223 13.6263 6.30417 13.7722 6.45003C13.9181 6.5959 14 6.79373 14 7.00001C14 7.20629 13.9181 7.40412 13.7722 7.54998C13.6263 7.69584 13.4285 7.77778 13.2222 7.77778Z",fill:"currentColor"},null,-1),tde=[ede];function nde(t,e,n,r,o,l){return ve(),et("svg",It({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),tde,16)}cV.render=nde;var rde=function(e){var n=e.dt;return`
.p-checkbox {
    position: relative;
    display: inline-flex;
    user-select: none;
    vertical-align: bottom;
    width: `.concat(n("checkbox.width"),`;
    height: `).concat(n("checkbox.height"),`;
}

.p-checkbox-input {
    cursor: pointer;
    appearance: none;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    padding: 0;
    margin: 0;
    opacity: 0;
    z-index: 1;
    outline: 0 none;
    border: 1px solid transparent;
    border-radius: `).concat(n("checkbox.border.radius"),`;
}

.p-checkbox-box {
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: `).concat(n("checkbox.border.radius"),`;
    border: 1px solid `).concat(n("checkbox.border.color"),`;
    background: `).concat(n("checkbox.background"),`;
    width: `).concat(n("checkbox.width"),`;
    height: `).concat(n("checkbox.height"),`;
    transition: background `).concat(n("checkbox.transition.duration"),", color ").concat(n("checkbox.transition.duration"),", border-color ").concat(n("checkbox.transition.duration"),", box-shadow ").concat(n("checkbox.transition.duration"),", outline-color ").concat(n("checkbox.transition.duration"),`;
    outline-color: transparent;
    box-shadow: `).concat(n("checkbox.shadow"),`;
}

.p-checkbox-icon {
    transition-duration: `).concat(n("checkbox.transition.duration"),`;
    color: `).concat(n("checkbox.icon.color"),`;
    font-size: `).concat(n("checkbox.icon.size"),`;
    width: `).concat(n("checkbox.icon.size"),`;
    height: `).concat(n("checkbox.icon.size"),`;
}

.p-checkbox:not(.p-disabled):has(.p-checkbox-input:hover) .p-checkbox-box {
    border-color: `).concat(n("checkbox.hover.border.color"),`;
}

.p-checkbox-checked .p-checkbox-box {
    border-color: `).concat(n("checkbox.checked.border.color"),`;
    background: `).concat(n("checkbox.checked.background"),`;
}

.p-checkbox-checked .p-checkbox-icon {
    color: `).concat(n("checkbox.icon.checked.color"),`;
}

.p-checkbox-checked:not(.p-disabled):has(.p-checkbox-input:hover) .p-checkbox-box {
    background: `).concat(n("checkbox.checked.hover.background"),`;
    border-color: `).concat(n("checkbox.checked.hover.border.color"),`;
}

.p-checkbox-checked:not(.p-disabled):has(.p-checkbox-input:hover) .p-checkbox-icon {
    color: `).concat(n("checkbox.icon.checked.hover.color"),`;
}

.p-checkbox:not(.p-disabled):has(.p-checkbox-input:focus-visible) .p-checkbox-box {
    border-color: `).concat(n("checkbox.focus.border.color"),`;
    box-shadow: `).concat(n("checkbox.focus.ring.shadow"),`;
    outline: `).concat(n("checkbox.focus.ring.width")," ").concat(n("checkbox.focus.ring.style")," ").concat(n("checkbox.focus.ring.color"),`;
    outline-offset: `).concat(n("checkbox.focus.ring.offset"),`;
}

.p-checkbox-checked:not(.p-disabled):has(.p-checkbox-input:focus-visible) .p-checkbox-box {
    border-color: `).concat(n("checkbox.checked.focus.border.color"),`;
}

.p-checkbox.p-invalid > .p-checkbox-box {
    border-color: `).concat(n("checkbox.invalid.border.color"),`;
}

.p-checkbox.p-variant-filled .p-checkbox-box {
    background: `).concat(n("checkbox.filled.background"),`;
}

.p-checkbox-checked.p-variant-filled .p-checkbox-box {
    background: `).concat(n("checkbox.checked.background"),`;
}

.p-checkbox-checked.p-variant-filled:not(.p-disabled):has(.p-checkbox-input:hover) .p-checkbox-box {
    background: `).concat(n("checkbox.checked.hover.background"),`;
}

.p-checkbox.p-disabled {
    opacity: 1;
}

.p-checkbox.p-disabled .p-checkbox-box {
    background: `).concat(n("checkbox.disabled.background"),`;
    border-color: `).concat(n("checkbox.checked.disabled.border.color"),`;
}

.p-checkbox.p-disabled .p-checkbox-box .p-checkbox-icon {
    color: `).concat(n("checkbox.icon.disabled.color"),`;
}
`)},ide={root:function(e){var n=e.instance,r=e.props;return["p-checkbox p-component",{"p-checkbox-checked":n.checked,"p-disabled":r.disabled,"p-invalid":r.invalid,"p-variant-filled":r.variant?r.variant==="filled":n.$primevue.config.inputStyle==="filled"||n.$primevue.config.inputVariant==="filled"}]},box:"p-checkbox-box",input:"p-checkbox-input",icon:"p-checkbox-icon"},ode=Uo.extend({name:"checkbox",theme:rde,classes:ide}),sde={name:"BaseCheckbox",extends:Ro,props:{value:null,modelValue:null,binary:Boolean,name:{type:String,default:null},indeterminate:{type:Boolean,default:!1},trueValue:{type:null,default:!0},falseValue:{type:null,default:!1},variant:{type:String,default:null},invalid:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},tabindex:{type:Number,default:null},inputId:{type:String,default:null},inputClass:{type:[String,Object],default:null},inputStyle:{type:Object,default:null},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:ode,provide:function(){return{$pcCheckbox:this,$parentInstance:this}}};function ade(t){return hde(t)||ude(t)||cde(t)||lde()}function lde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cde(t,e){if(t){if(typeof t=="string")return fI(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fI(t,e):void 0}}function ude(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function hde(t){if(Array.isArray(t))return fI(t)}function fI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var Q4={name:"Checkbox",extends:sde,inheritAttrs:!1,emits:["update:modelValue","change","focus","blur","update:indeterminate"],data:function(){return{d_indeterminate:this.indeterminate}},watch:{indeterminate:function(e){this.d_indeterminate=e}},methods:{getPTOptions:function(e){var n=e==="root"?this.ptmi:this.ptm;return n(e,{context:{checked:this.checked,indeterminate:this.d_indeterminate,disabled:this.disabled}})},onChange:function(e){var n=this;if(!this.disabled&&!this.readonly){var r;this.binary?r=this.d_indeterminate?this.trueValue:this.checked?this.falseValue:this.trueValue:this.checked||this.d_indeterminate?r=this.modelValue.filter(function(o){return!Fg(o,n.value)}):r=this.modelValue?[].concat(ade(this.modelValue),[this.value]):[this.value],this.d_indeterminate&&(this.d_indeterminate=!1,this.$emit("update:indeterminate",this.d_indeterminate)),this.$emit("update:modelValue",r),this.$emit("change",e)}},onFocus:function(e){this.$emit("focus",e)},onBlur:function(e){this.$emit("blur",e)}},computed:{checked:function(){return this.d_indeterminate?!1:this.binary?this.modelValue===this.trueValue:Tae(this.value,this.modelValue)}},components:{CheckIcon:$_,MinusIcon:cV}},dde=["data-p-checked","data-p-indeterminate","data-p-disabled"],fde=["id","value","name","checked","tabindex","disabled","readonly","required","aria-labelledby","aria-label","aria-invalid","aria-checked"];function Ade(t,e,n,r,o,l){var h=Nr("CheckIcon"),p=Nr("MinusIcon");return ve(),et("div",It({class:t.cx("root")},l.getPTOptions("root"),{"data-p-checked":l.checked,"data-p-indeterminate":o.d_indeterminate||void 0,"data-p-disabled":t.disabled}),[mt("input",It({id:t.inputId,type:"checkbox",class:[t.cx("input"),t.inputClass],style:t.inputStyle,value:t.value,name:t.name,checked:l.checked,tabindex:t.tabindex,disabled:t.disabled,readonly:t.readonly,required:t.required,"aria-labelledby":t.ariaLabelledby,"aria-label":t.ariaLabel,"aria-invalid":t.invalid||void 0,"aria-checked":o.d_indeterminate?"mixed":void 0,onFocus:e[0]||(e[0]=function(){return l.onFocus&&l.onFocus.apply(l,arguments)}),onBlur:e[1]||(e[1]=function(){return l.onBlur&&l.onBlur.apply(l,arguments)}),onChange:e[2]||(e[2]=function(){return l.onChange&&l.onChange.apply(l,arguments)})},l.getPTOptions("input")),null,16,fde),mt("div",It({class:t.cx("box")},l.getPTOptions("box")),[Xt(t.$slots,"icon",{checked:l.checked,indeterminate:o.d_indeterminate,class:On(t.cx("icon"))},function(){return[l.checked?(ve(),hn(h,It({key:0,class:t.cx("icon")},l.getPTOptions("icon")),null,16,["class"])):o.d_indeterminate?(ve(),hn(p,It({key:1,class:t.cx("icon")},l.getPTOptions("icon")),null,16,["class"])):Sn("",!0)]})],16)],16,dde)}Q4.render=Ade;var pde=function(e){var n=e.dt;return`
.p-radiobutton {
    position: relative;
    display: inline-flex;
    user-select: none;
    vertical-align: bottom;
    width: `.concat(n("radiobutton.width"),`;
    height: `).concat(n("radiobutton.height"),`;
}

.p-radiobutton-input {
    cursor: pointer;
    appearance: none;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    padding: 0;
    margin: 0;
    opacity: 0;
    z-index: 1;
    outline: 0 none;
    border: 1px solid transparent;
    border-radius: 50%;
}

.p-radiobutton-box {
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: 50%;
    border: 1px solid `).concat(n("radiobutton.border.color"),`;
    background: `).concat(n("radiobutton.background"),`;
    width: `).concat(n("radiobutton.width"),`;
    height: `).concat(n("radiobutton.height"),`;
    transition: background `).concat(n("radiobutton.transition.duration"),", color ").concat(n("radiobutton.transition.duration"),", border-color ").concat(n("radiobutton.transition.duration"),", box-shadow ").concat(n("radiobutton.transition.duration"),", outline-color ").concat(n("radiobutton.transition.duration"),`;
    outline-color: transparent;
    box-shadow: `).concat(n("radiobutton.shadow"),`;
}

.p-radiobutton-icon {
    transition-duration: `).concat(n("radiobutton.transition.duration"),`;
    background: transparent;
    font-size: `).concat(n("radiobutton.icon.size"),`;
    width: `).concat(n("radiobutton.icon.size"),`;
    height: `).concat(n("radiobutton.icon.size"),`;
    border-radius: 50%;
    backface-visibility: hidden;
    transform: translateZ(0) scale(0.1);
}

.p-radiobutton:not(.p-disabled):has(.p-radiobutton-input:hover) .p-radiobutton-box {
    border-color: `).concat(n("radiobutton.hover.border.color"),`;
}

.p-radiobutton-checked .p-radiobutton-box {
    border-color: `).concat(n("radiobutton.checked.border.color"),`;
    background: `).concat(n("radiobutton.checked.background"),`;
}

.p-radiobutton-checked .p-radiobutton-box .p-radiobutton-icon {
    background: `).concat(n("radiobutton.icon.checked.color"),`;
    transform: translateZ(0) scale(1, 1);
    visibility: visible;
}

.p-radiobutton-checked:not(.p-disabled):has(.p-radiobutton-input:hover) .p-radiobutton-box {
    border-color: `).concat(n("radiobutton.checked.hover.border.color"),`;
    background: `).concat(n("radiobutton.checked.hover.background"),`;
}

.p-radiobutton:not(.p-disabled):has(.p-radiobutton-input:hover).p-radiobutton-checked .p-radiobutton-box .p-radiobutton-icon {
    background: `).concat(n("radiobutton.icon.checked.hover.color"),`;
}

.p-radiobutton:not(.p-disabled):has(.p-radiobutton-input:focus-visible) .p-radiobutton-box {
    border-color: `).concat(n("radiobutton.focus.border.color"),`;
    box-shadow: `).concat(n("radiobutton.focus.ring.shadow"),`;
    outline: `).concat(n("radiobutton.focus.ring.width")," ").concat(n("radiobutton.focus.ring.style")," ").concat(n("radiobutton.focus.ring.color"),`;
    outline-offset: `).concat(n("radiobutton.focus.ring.offset"),`;
}

.p-radiobutton-checked:not(.p-disabled):has(.p-radiobutton-input:focus-visible) .p-radiobutton-box {
    border-color: `).concat(n("radiobutton.checked.focus.border.color"),`;
}

.p-radiobutton.p-invalid > .p-radiobutton-box {
    border-color: `).concat(n("radiobutton.invalid.border.color"),`;
}

.p-radiobutton.p-variant-filled .p-radiobutton-box {
    background: `).concat(n("radiobutton.filled.background"),`;
}

.p-radiobutton.p-variant-filled.p-radiobutton-checked .p-radiobutton-box {
    background: `).concat(n("radiobutton.checked.background"),`;
}

.p-radiobutton.p-variant-filled:not(.p-disabled):has(.p-radiobutton-input:hover).p-radiobutton-checked .p-radiobutton-box {
    background: `).concat(n("radiobutton.checked.hover.background"),`;
}

.p-radiobutton.p-disabled {
    opacity: 1;
}

.p-radiobutton.p-disabled .p-radiobutton-box {
    background: `).concat(n("radiobutton.disabled.background"),`;
    border-color: `).concat(n("radiobutton.checked.disabled.border.color"),`;
}

.p-radiobutton-checked.p-disabled .p-radiobutton-box .p-radiobutton-icon {
    background: `).concat(n("radiobutton.icon.disabled.color"),`;
}
`)},mde={root:function(e){var n=e.instance,r=e.props;return["p-radiobutton p-component",{"p-radiobutton-checked":n.checked,"p-disabled":r.disabled,"p-invalid":r.invalid,"p-variant-filled":r.variant?r.variant==="filled":n.$primevue.config.inputStyle==="filled"||n.$primevue.config.inputVariant==="filled"}]},box:"p-radiobutton-box",input:"p-radiobutton-input",icon:"p-radiobutton-icon"},gde=Uo.extend({name:"radiobutton",theme:pde,classes:mde}),yde={name:"BaseRadioButton",extends:Ro,props:{value:null,modelValue:null,binary:Boolean,name:{type:String,default:null},variant:{type:String,default:null},invalid:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},tabindex:{type:Number,default:null},inputId:{type:String,default:null},inputClass:{type:[String,Object],default:null},inputStyle:{type:Object,default:null},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:gde,provide:function(){return{$pcRadioButton:this,$parentInstance:this}}},uV={name:"RadioButton",extends:yde,inheritAttrs:!1,emits:["update:modelValue","change","focus","blur"],methods:{getPTOptions:function(e){var n=e==="root"?this.ptmi:this.ptm;return n(e,{context:{checked:this.checked,disabled:this.disabled}})},onChange:function(e){if(!this.disabled&&!this.readonly){var n=this.binary?!this.checked:this.value;this.$emit("update:modelValue",n),this.$emit("change",e)}},onFocus:function(e){this.$emit("focus",e)},onBlur:function(e){this.$emit("blur",e)}},computed:{checked:function(){return this.modelValue!=null&&(this.binary?!!this.modelValue:Fg(this.modelValue,this.value))}}},_de=["data-p-checked","data-p-disabled"],vde=["id","value","name","checked","tabindex","disabled","readonly","aria-labelledby","aria-label","aria-invalid"];function bde(t,e,n,r,o,l){return ve(),et("div",It({class:t.cx("root")},l.getPTOptions("root"),{"data-p-checked":l.checked,"data-p-disabled":t.disabled}),[mt("input",It({id:t.inputId,type:"radio",class:[t.cx("input"),t.inputClass],style:t.inputStyle,value:t.value,name:t.name,checked:l.checked,tabindex:t.tabindex,disabled:t.disabled,readonly:t.readonly,"aria-labelledby":t.ariaLabelledby,"aria-label":t.ariaLabel,"aria-invalid":t.invalid||void 0,onFocus:e[0]||(e[0]=function(){return l.onFocus&&l.onFocus.apply(l,arguments)}),onBlur:e[1]||(e[1]=function(){return l.onBlur&&l.onBlur.apply(l,arguments)}),onChange:e[2]||(e[2]=function(){return l.onChange&&l.onChange.apply(l,arguments)})},l.getPTOptions("input")),null,16,vde),mt("div",It({class:t.cx("box")},l.getPTOptions("box")),[mt("div",It({class:t.cx("icon")},l.getPTOptions("icon")),null,16)],16)],16,_de)}uV.render=bde;var hV={name:"FilterIcon",extends:Us},wde=mt("path",{d:"M8.64708 14H5.35296C5.18981 13.9979 5.03395 13.9321 4.91858 13.8167C4.8032 13.7014 4.73745 13.5455 4.73531 13.3824V7L0.329431 0.98C0.259794 0.889466 0.217389 0.780968 0.20718 0.667208C0.19697 0.553448 0.219379 0.439133 0.271783 0.337647C0.324282 0.236453 0.403423 0.151519 0.500663 0.0920138C0.597903 0.0325088 0.709548 0.000692754 0.823548 0H13.1765C13.2905 0.000692754 13.4021 0.0325088 13.4994 0.0920138C13.5966 0.151519 13.6758 0.236453 13.7283 0.337647C13.7807 0.439133 13.8031 0.553448 13.7929 0.667208C13.7826 0.780968 13.7402 0.889466 13.6706 0.98L9.26472 7V13.3824C9.26259 13.5455 9.19683 13.7014 9.08146 13.8167C8.96609 13.9321 8.81022 13.9979 8.64708 14ZM5.97061 12.7647H8.02943V6.79412C8.02878 6.66289 8.07229 6.53527 8.15296 6.43177L11.9412 1.23529H2.05884L5.86355 6.43177C5.94422 6.53527 5.98773 6.66289 5.98708 6.79412L5.97061 12.7647Z",fill:"currentColor"},null,-1),xde=[wde];function Cde(t,e,n,r,o,l){return ve(),et("svg",It({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),xde,16)}hV.render=Cde;var dV={name:"FilterSlashIcon",extends:Us},Ede=mt("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.4994 0.0920138C13.5967 0.151519 13.6758 0.236453 13.7283 0.337647C13.7807 0.439133 13.8031 0.553448 13.7929 0.667208C13.7827 0.780968 13.7403 0.889466 13.6707 0.98L11.406 4.06823C11.3099 4.19928 11.1656 4.28679 11.005 4.3115C10.8444 4.33621 10.6805 4.2961 10.5495 4.2C10.4184 4.1039 10.3309 3.95967 10.3062 3.79905C10.2815 3.63843 10.3216 3.47458 10.4177 3.34353L11.9412 1.23529H7.41184C7.24803 1.23529 7.09093 1.17022 6.97509 1.05439C6.85926 0.938558 6.79419 0.781457 6.79419 0.617647C6.79419 0.453837 6.85926 0.296736 6.97509 0.180905C7.09093 0.0650733 7.24803 0 7.41184 0H13.1765C13.2905 0.000692754 13.4022 0.0325088 13.4994 0.0920138ZM4.20008 0.181168H4.24126L13.2013 9.03411C13.3169 9.14992 13.3819 9.3069 13.3819 9.47058C13.3819 9.63426 13.3169 9.79124 13.2013 9.90705C13.1445 9.96517 13.0766 10.0112 13.0016 10.0423C12.9266 10.0735 12.846 10.0891 12.7648 10.0882C12.6836 10.0886 12.6032 10.0728 12.5283 10.0417C12.4533 10.0106 12.3853 9.96479 12.3283 9.90705L9.3142 6.92587L9.26479 6.99999V13.3823C9.26265 13.5455 9.19689 13.7014 9.08152 13.8167C8.96615 13.9321 8.81029 13.9979 8.64714 14H5.35302C5.18987 13.9979 5.03401 13.9321 4.91864 13.8167C4.80327 13.7014 4.73751 13.5455 4.73537 13.3823V6.99999L0.329492 1.02117C0.259855 0.930634 0.21745 0.822137 0.207241 0.708376C0.197031 0.594616 0.21944 0.480301 0.271844 0.378815C0.324343 0.277621 0.403484 0.192687 0.500724 0.133182C0.597964 0.073677 0.709609 0.041861 0.823609 0.0411682H3.86243C3.92448 0.0461551 3.9855 0.060022 4.04361 0.0823446C4.10037 0.10735 4.15311 0.140655 4.20008 0.181168ZM8.02949 6.79411C8.02884 6.66289 8.07235 6.53526 8.15302 6.43176L8.42478 6.05293L3.55773 1.23529H2.0589L5.84714 6.43176C5.92781 6.53526 5.97132 6.66289 5.97067 6.79411V12.7647H8.02949V6.79411Z",fill:"currentColor"},null,-1),Bde=[Ede];function Sde(t,e,n,r,o,l){return ve(),et("svg",It({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),Bde,16)}dV.render=Sde;var fV={name:"PlusIcon",extends:Us},Tde=mt("path",{d:"M7.67742 6.32258V0.677419C7.67742 0.497757 7.60605 0.325452 7.47901 0.198411C7.35197 0.0713707 7.17966 0 7 0C6.82034 0 6.64803 0.0713707 6.52099 0.198411C6.39395 0.325452 6.32258 0.497757 6.32258 0.677419V6.32258H0.677419C0.497757 6.32258 0.325452 6.39395 0.198411 6.52099C0.0713707 6.64803 0 6.82034 0 7C0 7.17966 0.0713707 7.35197 0.198411 7.47901C0.325452 7.60605 0.497757 7.67742 0.677419 7.67742H6.32258V13.3226C6.32492 13.5015 6.39704 13.6725 6.52358 13.799C6.65012 13.9255 6.82106 13.9977 7 14C7.17966 14 7.35197 13.9286 7.47901 13.8016C7.60605 13.6745 7.67742 13.5022 7.67742 13.3226V7.67742H13.3226C13.5022 7.67742 13.6745 7.60605 13.8016 7.47901C13.9286 7.35197 14 7.17966 14 7C13.9977 6.82106 13.9255 6.65012 13.799 6.52358C13.6725 6.39704 13.5015 6.32492 13.3226 6.32258H7.67742Z",fill:"currentColor"},null,-1),Ide=[Tde];function Pde(t,e,n,r,o,l){return ve(),et("svg",It({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),Ide,16)}fV.render=Pde;var AV={name:"TrashIcon",extends:Us},Lde=mt("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.44802 13.9955H10.552C10.8056 14.0129 11.06 13.9797 11.3006 13.898C11.5412 13.8163 11.7632 13.6877 11.9537 13.5196C12.1442 13.3515 12.2995 13.1473 12.4104 12.9188C12.5213 12.6903 12.5858 12.442 12.6 12.1884V4.36041H13.4C13.5591 4.36041 13.7117 4.29722 13.8243 4.18476C13.9368 4.07229 14 3.91976 14 3.76071C14 3.60166 13.9368 3.44912 13.8243 3.33666C13.7117 3.22419 13.5591 3.16101 13.4 3.16101H12.0537C12.0203 3.1557 11.9863 3.15299 11.952 3.15299C11.9178 3.15299 11.8838 3.1557 11.8503 3.16101H11.2285C11.2421 3.10893 11.2487 3.05513 11.248 3.00106V1.80966C11.2171 1.30262 10.9871 0.828306 10.608 0.48989C10.229 0.151475 9.73159 -0.0236625 9.22402 0.00257442H4.77602C4.27251 -0.0171866 3.78126 0.160868 3.40746 0.498617C3.03365 0.836366 2.807 1.30697 2.77602 1.80966V3.00106C2.77602 3.0556 2.78346 3.10936 2.79776 3.16101H0.6C0.521207 3.16101 0.443185 3.17652 0.37039 3.20666C0.297595 3.2368 0.231451 3.28097 0.175736 3.33666C0.120021 3.39235 0.0758251 3.45846 0.0456722 3.53121C0.0155194 3.60397 0 3.68196 0 3.76071C0 3.83946 0.0155194 3.91744 0.0456722 3.9902C0.0758251 4.06296 0.120021 4.12907 0.175736 4.18476C0.231451 4.24045 0.297595 4.28462 0.37039 4.31476C0.443185 4.3449 0.521207 4.36041 0.6 4.36041H1.40002V12.1884C1.41426 12.442 1.47871 12.6903 1.58965 12.9188C1.7006 13.1473 1.85582 13.3515 2.04633 13.5196C2.23683 13.6877 2.45882 13.8163 2.69944 13.898C2.94005 13.9797 3.1945 14.0129 3.44802 13.9955ZM2.60002 4.36041H11.304V12.1884C11.304 12.5163 10.952 12.7961 10.504 12.7961H3.40002C2.97602 12.7961 2.60002 12.5163 2.60002 12.1884V4.36041ZM3.95429 3.16101C3.96859 3.10936 3.97602 3.0556 3.97602 3.00106V1.80966C3.97602 1.48183 4.33602 1.20197 4.77602 1.20197H9.24802C9.66403 1.20197 10.048 1.48183 10.048 1.80966V3.00106C10.0473 3.05515 10.054 3.10896 10.0678 3.16101H3.95429ZM5.57571 10.997C5.41731 10.995 5.26597 10.9311 5.15395 10.8191C5.04193 10.7071 4.97808 10.5558 4.97601 10.3973V6.77517C4.97601 6.61612 5.0392 6.46359 5.15166 6.35112C5.26413 6.23866 5.41666 6.17548 5.57571 6.17548C5.73476 6.17548 5.8873 6.23866 5.99976 6.35112C6.11223 6.46359 6.17541 6.61612 6.17541 6.77517V10.3894C6.17647 10.4688 6.16174 10.5476 6.13208 10.6213C6.10241 10.695 6.05841 10.762 6.00261 10.8186C5.94682 10.8751 5.88035 10.92 5.80707 10.9506C5.73378 10.9813 5.65514 10.9971 5.57571 10.997ZM7.99968 10.8214C8.11215 10.9339 8.26468 10.997 8.42373 10.997C8.58351 10.9949 8.73604 10.93 8.84828 10.8163C8.96052 10.7025 9.02345 10.5491 9.02343 10.3894V6.77517C9.02343 6.61612 8.96025 6.46359 8.84778 6.35112C8.73532 6.23866 8.58278 6.17548 8.42373 6.17548C8.26468 6.17548 8.11215 6.23866 7.99968 6.35112C7.88722 6.46359 7.82404 6.61612 7.82404 6.77517V10.3973C7.82404 10.5564 7.88722 10.7089 7.99968 10.8214Z",fill:"currentColor"},null,-1),Fde=[Lde];function Rde(t,e,n,r,o,l){return ve(),et("svg",It({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),Fde,16)}AV.render=Rde;var kde=Uo.extend({name:"focustrap-directive"}),Mde=qi.extend({style:kde});function _1(t){"@babel/helpers - typeof";return _1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_1(t)}function pD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function mD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pD(Object(n),!0).forEach(function(r){Ode(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ode(t,e,n){return(e=Dde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dde(t){var e=Ude(t,"string");return _1(e)=="symbol"?e:e+""}function Ude(t,e){if(_1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(_1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Nde=Mde.extend("focustrap",{mounted:function(e,n){var r=n.value||{},o=r.disabled;o||(this.createHiddenFocusableElements(e,n),this.bind(e,n),this.autoElementFocus(e,n)),e.setAttribute("data-pd-focustrap",!0),this.$el=e},updated:function(e,n){var r=n.value||{},o=r.disabled;o&&this.unbind(e)},unmounted:function(e){this.unbind(e)},methods:{getComputedSelector:function(e){return':not(.p-hidden-focusable):not([data-p-hidden-focusable="true"])'.concat(e??"")},bind:function(e,n){var r=this,o=n.value||{},l=o.onFocusIn,h=o.onFocusOut;e.$_pfocustrap_mutationobserver=new MutationObserver(function(p){p.forEach(function(i){if(i.type==="childList"&&!e.contains(document.activeElement)){var b=function(I){var O=$O(I)?$O(I,r.getComputedSelector(e.$_pfocustrap_focusableselector))?I:Xm(e,r.getComputedSelector(e.$_pfocustrap_focusableselector)):Xm(I);return Lo(O)?O:I.nextSibling&&b(I.nextSibling)};au(b(i.nextSibling))}})}),e.$_pfocustrap_mutationobserver.disconnect(),e.$_pfocustrap_mutationobserver.observe(e,{childList:!0}),e.$_pfocustrap_focusinlistener=function(p){return l&&l(p)},e.$_pfocustrap_focusoutlistener=function(p){return h&&h(p)},e.addEventListener("focusin",e.$_pfocustrap_focusinlistener),e.addEventListener("focusout",e.$_pfocustrap_focusoutlistener)},unbind:function(e){e.$_pfocustrap_mutationobserver&&e.$_pfocustrap_mutationobserver.disconnect(),e.$_pfocustrap_focusinlistener&&e.removeEventListener("focusin",e.$_pfocustrap_focusinlistener)&&(e.$_pfocustrap_focusinlistener=null),e.$_pfocustrap_focusoutlistener&&e.removeEventListener("focusout",e.$_pfocustrap_focusoutlistener)&&(e.$_pfocustrap_focusoutlistener=null)},autoFocus:function(e){this.autoElementFocus(this.$el,{value:mD(mD({},e),{},{autoFocus:!0})})},autoElementFocus:function(e,n){var r=n.value||{},o=r.autoFocusSelector,l=o===void 0?"":o,h=r.firstFocusableSelector,p=h===void 0?"":h,i=r.autoFocus,b=i===void 0?!1:i,E=Xm(e,"[autofocus]".concat(this.getComputedSelector(l)));b&&!E&&(E=Xm(e,this.getComputedSelector(p))),au(E)},onFirstHiddenElementFocus:function(e){var n,r=e.currentTarget,o=e.relatedTarget,l=o===r.$_pfocustrap_lasthiddenfocusableelement||!((n=this.$el)!==null&&n!==void 0&&n.contains(o))?Xm(r.parentElement,this.getComputedSelector(r.$_pfocustrap_focusableselector)):r.$_pfocustrap_lasthiddenfocusableelement;au(l)},onLastHiddenElementFocus:function(e){var n,r=e.currentTarget,o=e.relatedTarget,l=o===r.$_pfocustrap_firsthiddenfocusableelement||!((n=this.$el)!==null&&n!==void 0&&n.contains(o))?B7(r.parentElement,this.getComputedSelector(r.$_pfocustrap_focusableselector)):r.$_pfocustrap_firsthiddenfocusableelement;au(l)},createHiddenFocusableElements:function(e,n){var r=this,o=n.value||{},l=o.tabIndex,h=l===void 0?0:l,p=o.firstFocusableSelector,i=p===void 0?"":p,b=o.lastFocusableSelector,E=b===void 0?"":b,I=function(q){return E7("span",{class:"p-hidden-accessible p-hidden-focusable",tabIndex:h,role:"presentation","aria-hidden":!0,"data-p-hidden-accessible":!0,"data-p-hidden-focusable":!0,onFocus:q==null?void 0:q.bind(r)})},O=I(this.onFirstHiddenElementFocus),M=I(this.onLastHiddenElementFocus);O.$_pfocustrap_lasthiddenfocusableelement=M,O.$_pfocustrap_focusableselector=i,O.setAttribute("data-pc-section","firstfocusableelement"),M.$_pfocustrap_firsthiddenfocusableelement=O,M.$_pfocustrap_focusableselector=E,M.setAttribute("data-pc-section","lastfocusableelement"),e.prepend(O),e.append(M)}}}),AI={name:"SortAltIcon",extends:Us},zde=mt("path",{d:"M5.64515 3.61291C5.47353 3.61291 5.30192 3.54968 5.16644 3.4142L3.38708 1.63484L1.60773 3.4142C1.34579 3.67613 0.912244 3.67613 0.650309 3.4142C0.388374 3.15226 0.388374 2.71871 0.650309 2.45678L2.90837 0.198712C3.17031 -0.0632236 3.60386 -0.0632236 3.86579 0.198712L6.12386 2.45678C6.38579 2.71871 6.38579 3.15226 6.12386 3.4142C5.98837 3.54968 5.81676 3.61291 5.64515 3.61291Z",fill:"currentColor"},null,-1),Vde=mt("path",{d:"M3.38714 14C3.01681 14 2.70972 13.6929 2.70972 13.3226V0.677419C2.70972 0.307097 3.01681 0 3.38714 0C3.75746 0 4.06456 0.307097 4.06456 0.677419V13.3226C4.06456 13.6929 3.75746 14 3.38714 14Z",fill:"currentColor"},null,-1),Qde=mt("path",{d:"M10.6129 14C10.4413 14 10.2697 13.9368 10.1342 13.8013L7.87611 11.5432C7.61418 11.2813 7.61418 10.8477 7.87611 10.5858C8.13805 10.3239 8.5716 10.3239 8.83353 10.5858L10.6129 12.3652L12.3922 10.5858C12.6542 10.3239 13.0877 10.3239 13.3497 10.5858C13.6116 10.8477 13.6116 11.2813 13.3497 11.5432L11.0916 13.8013C10.9561 13.9368 10.7845 14 10.6129 14Z",fill:"currentColor"},null,-1),Hde=mt("path",{d:"M10.6129 14C10.2426 14 9.93552 13.6929 9.93552 13.3226V0.677419C9.93552 0.307097 10.2426 0 10.6129 0C10.9833 0 11.2904 0.307097 11.2904 0.677419V13.3226C11.2904 13.6929 10.9832 14 10.6129 14Z",fill:"currentColor"},null,-1),jde=[zde,Vde,Qde,Hde];function $de(t,e,n,r,o,l){return ve(),et("svg",It({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),jde,16)}AI.render=$de;var pI={name:"SortAmountDownIcon",extends:Us},Gde=mt("path",{d:"M4.93953 10.5858L3.83759 11.6877V0.677419C3.83759 0.307097 3.53049 0 3.16017 0C2.78985 0 2.48275 0.307097 2.48275 0.677419V11.6877L1.38082 10.5858C1.11888 10.3239 0.685331 10.3239 0.423396 10.5858C0.16146 10.8477 0.16146 11.2813 0.423396 11.5432L2.68146 13.8013C2.74469 13.8645 2.81694 13.9097 2.89823 13.9458C2.97952 13.9819 3.06985 14 3.16017 14C3.25049 14 3.33178 13.9819 3.42211 13.9458C3.5034 13.9097 3.57565 13.8645 3.63888 13.8013L5.89694 11.5432C6.15888 11.2813 6.15888 10.8477 5.89694 10.5858C5.63501 10.3239 5.20146 10.3239 4.93953 10.5858ZM13.0957 0H7.22468C6.85436 0 6.54726 0.307097 6.54726 0.677419C6.54726 1.04774 6.85436 1.35484 7.22468 1.35484H13.0957C13.466 1.35484 13.7731 1.04774 13.7731 0.677419C13.7731 0.307097 13.466 0 13.0957 0ZM7.22468 5.41935H9.48275C9.85307 5.41935 10.1602 5.72645 10.1602 6.09677C10.1602 6.4671 9.85307 6.77419 9.48275 6.77419H7.22468C6.85436 6.77419 6.54726 6.4671 6.54726 6.09677C6.54726 5.72645 6.85436 5.41935 7.22468 5.41935ZM7.6763 8.12903H7.22468C6.85436 8.12903 6.54726 8.43613 6.54726 8.80645C6.54726 9.17677 6.85436 9.48387 7.22468 9.48387H7.6763C8.04662 9.48387 8.35372 9.17677 8.35372 8.80645C8.35372 8.43613 8.04662 8.12903 7.6763 8.12903ZM7.22468 2.70968H11.2892C11.6595 2.70968 11.9666 3.01677 11.9666 3.3871C11.9666 3.75742 11.6595 4.06452 11.2892 4.06452H7.22468C6.85436 4.06452 6.54726 3.75742 6.54726 3.3871C6.54726 3.01677 6.85436 2.70968 7.22468 2.70968Z",fill:"currentColor"},null,-1),Kde=[Gde];function qde(t,e,n,r,o,l){return ve(),et("svg",It({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),Kde,16)}pI.render=qde;var mI={name:"SortAmountUpAltIcon",extends:Us},Wde=mt("path",{d:"M3.63435 0.19871C3.57113 0.135484 3.49887 0.0903226 3.41758 0.0541935C3.255 -0.0180645 3.06532 -0.0180645 2.90274 0.0541935C2.82145 0.0903226 2.74919 0.135484 2.68597 0.19871L0.427901 2.45677C0.165965 2.71871 0.165965 3.15226 0.427901 3.41419C0.689836 3.67613 1.12338 3.67613 1.38532 3.41419L2.48726 2.31226V13.3226C2.48726 13.6929 2.79435 14 3.16467 14C3.535 14 3.84209 13.6929 3.84209 13.3226V2.31226L4.94403 3.41419C5.07951 3.54968 5.25113 3.6129 5.42274 3.6129C5.59435 3.6129 5.76597 3.54968 5.90145 3.41419C6.16338 3.15226 6.16338 2.71871 5.90145 2.45677L3.64338 0.19871H3.63435ZM13.7685 13.3226C13.7685 12.9523 13.4615 12.6452 13.0911 12.6452H7.22016C6.84984 12.6452 6.54274 12.9523 6.54274 13.3226C6.54274 13.6929 6.84984 14 7.22016 14H13.0911C13.4615 14 13.7685 13.6929 13.7685 13.3226ZM7.22016 8.58064C6.84984 8.58064 6.54274 8.27355 6.54274 7.90323C6.54274 7.5329 6.84984 7.22581 7.22016 7.22581H9.47823C9.84855 7.22581 10.1556 7.5329 10.1556 7.90323C10.1556 8.27355 9.84855 8.58064 9.47823 8.58064H7.22016ZM7.22016 5.87097H7.67177C8.0421 5.87097 8.34919 5.56387 8.34919 5.19355C8.34919 4.82323 8.0421 4.51613 7.67177 4.51613H7.22016C6.84984 4.51613 6.54274 4.82323 6.54274 5.19355C6.54274 5.56387 6.84984 5.87097 7.22016 5.87097ZM11.2847 11.2903H7.22016C6.84984 11.2903 6.54274 10.9832 6.54274 10.6129C6.54274 10.2426 6.84984 9.93548 7.22016 9.93548H11.2847C11.655 9.93548 11.9621 10.2426 11.9621 10.6129C11.9621 10.9832 11.655 11.2903 11.2847 11.2903Z",fill:"currentColor"},null,-1),Xde=[Wde];function Zde(t,e,n,r,o,l){return ve(),et("svg",It({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),Xde,16)}mI.render=Zde;var Yde={name:"BaseDataTable",extends:Ro,props:{value:{type:Array,default:null},dataKey:{type:[String,Function],default:null},rows:{type:Number,default:0},first:{type:Number,default:0},totalRecords:{type:Number,default:0},paginator:{type:Boolean,default:!1},paginatorPosition:{type:String,default:"bottom"},alwaysShowPaginator:{type:Boolean,default:!0},paginatorTemplate:{type:[Object,String],default:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown"},pageLinkSize:{type:Number,default:5},rowsPerPageOptions:{type:Array,default:null},currentPageReportTemplate:{type:String,default:"({currentPage} of {totalPages})"},lazy:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},loadingIcon:{type:String,default:void 0},sortField:{type:[String,Function],default:null},sortOrder:{type:Number,default:null},defaultSortOrder:{type:Number,default:1},nullSortOrder:{type:Number,default:1},multiSortMeta:{type:Array,default:null},sortMode:{type:String,default:"single"},removableSort:{type:Boolean,default:!1},filters:{type:Object,default:null},filterDisplay:{type:String,default:null},globalFilterFields:{type:Array,default:null},filterLocale:{type:String,default:void 0},selection:{type:[Array,Object],default:null},selectionMode:{type:String,default:null},compareSelectionBy:{type:String,default:"deepEquals"},metaKeySelection:{type:Boolean,default:!1},contextMenu:{type:Boolean,default:!1},contextMenuSelection:{type:Object,default:null},selectAll:{type:Boolean,default:null},rowHover:{type:Boolean,default:!1},csvSeparator:{type:String,default:","},exportFilename:{type:String,default:"download"},exportFunction:{type:Function,default:null},resizableColumns:{type:Boolean,default:!1},columnResizeMode:{type:String,default:"fit"},reorderableColumns:{type:Boolean,default:!1},expandedRows:{type:[Array,Object],default:null},expandedRowIcon:{type:String,default:void 0},collapsedRowIcon:{type:String,default:void 0},rowGroupMode:{type:String,default:null},groupRowsBy:{type:[Array,String,Function],default:null},expandableRowGroups:{type:Boolean,default:!1},expandedRowGroups:{type:Array,default:null},stateStorage:{type:String,default:"session"},stateKey:{type:String,default:null},editMode:{type:String,default:null},editingRows:{type:Array,default:null},rowClass:{type:Function,default:null},rowStyle:{type:Function,default:null},scrollable:{type:Boolean,default:!1},virtualScrollerOptions:{type:Object,default:null},scrollHeight:{type:String,default:null},frozenValue:{type:Array,default:null},breakpoint:{type:String,default:"960px"},showGridlines:{type:Boolean,default:!1},stripedRows:{type:Boolean,default:!1},highlightOnSelect:{type:Boolean,default:!1},size:{type:String,default:null},tableStyle:{type:null,default:null},tableClass:{type:[String,Object],default:null},tableProps:{type:Object,default:null},filterInputProps:{type:null,default:null},filterButtonProps:{type:Object,default:function(){return{filter:{severity:"secondary",text:!0,rounded:!0},inline:{clear:{severity:"secondary",text:!0,rounded:!0}},popover:{addRule:{severity:"info",text:!0,size:"small"},removeRule:{severity:"danger",text:!0,size:"small"},apply:{size:"small"},clear:{outlined:!0,size:"small"}}}}},editButtonProps:{type:Object,default:function(){return{init:{severity:"secondary",text:!0,rounded:!0},save:{severity:"secondary",text:!0,rounded:!0},cancel:{severity:"secondary",text:!0,rounded:!0}}}}},style:Fhe,provide:function(){return{$pcDataTable:this,$parentInstance:this}}},pV={name:"RowCheckbox",hostName:"DataTable",extends:Ro,emits:["change"],props:{value:null,checked:null,column:null,rowCheckboxIconTemplate:{type:Function,default:null},index:{type:Number,default:null}},methods:{getColumnPT:function(e){var n={props:this.column.props,parent:{instance:this,props:this.$props,state:this.$data},context:{index:this.index,checked:this.checked,disabled:this.$attrs.disabled}};return It(this.ptm("column.".concat(e),{column:n}),this.ptm("column.".concat(e),n),this.ptmo(this.getColumnProp(),e,n))},getColumnProp:function(){return this.column.props&&this.column.props.pt?this.column.props.pt:void 0},onChange:function(e){this.$attrs.disabled||this.$emit("change",{originalEvent:e,data:this.value})}},computed:{checkboxAriaLabel:function(){return this.$primevue.config.locale.aria?this.checked?this.$primevue.config.locale.aria.selectRow:this.$primevue.config.locale.aria.unselectRow:void 0}},components:{CheckIcon:$_,Checkbox:Q4}};function Jde(t,e,n,r,o,l){var h=Nr("CheckIcon"),p=Nr("Checkbox");return ve(),hn(p,{modelValue:n.checked,binary:!0,disabled:t.$attrs.disabled,"aria-label":l.checkboxAriaLabel,onChange:l.onChange,unstyled:t.unstyled,pt:l.getColumnPT("pcRowCheckbox")},{icon:Kn(function(i){return[n.rowCheckboxIconTemplate?(ve(),hn(mr(n.rowCheckboxIconTemplate),{key:0,checked:i.checked,class:On(i.class)},null,8,["checked","class"])):!n.rowCheckboxIconTemplate&&i.checked?(ve(),hn(h,It({key:1,class:i.class},l.getColumnPT("pcRowCheckbox").icon),null,16,["class"])):Sn("",!0)]}),_:1},8,["modelValue","disabled","aria-label","onChange","unstyled","pt"])}pV.render=Jde;var mV={name:"RowRadioButton",hostName:"DataTable",extends:Ro,emits:["change"],props:{value:null,checked:null,name:null,column:null,index:{type:Number,default:null}},methods:{getColumnPT:function(e){var n={props:this.column.props,parent:{instance:this,props:this.$props,state:this.$data},context:{index:this.index,checked:this.checked,disabled:this.$attrs.disabled}};return It(this.ptm("column.".concat(e),{column:n}),this.ptm("column.".concat(e),n),this.ptmo(this.getColumnProp(),e,n))},getColumnProp:function(){return this.column.props&&this.column.props.pt?this.column.props.pt:void 0},onChange:function(e){this.$attrs.disabled||this.$emit("change",{originalEvent:e,data:this.value})}},components:{RadioButton:uV}};function efe(t,e,n,r,o,l){var h=Nr("RadioButton");return ve(),hn(h,{modelValue:n.checked,binary:!0,disabled:t.$attrs.disabled,name:n.name,onChange:l.onChange,unstyled:t.unstyled,pt:l.getColumnPT("pcRowRadiobutton")},null,8,["modelValue","disabled","name","onChange","unstyled","pt"])}mV.render=efe;var gV={name:"BodyCell",hostName:"DataTable",extends:Ro,emits:["cell-edit-init","cell-edit-complete","cell-edit-cancel","row-edit-init","row-edit-save","row-edit-cancel","row-toggle","radio-change","checkbox-change","editing-meta-change"],props:{rowData:{type:Object,default:null},column:{type:Object,default:null},frozenRow:{type:Boolean,default:!1},rowIndex:{type:Number,default:null},index:{type:Number,default:null},isRowExpanded:{type:Boolean,default:!1},selected:{type:Boolean,default:!1},editing:{type:Boolean,default:!1},editingMeta:{type:Object,default:null},editMode:{type:String,default:null},virtualScrollerContentProps:{type:Object,default:null},ariaControls:{type:String,default:null},name:{type:String,default:null},expandedRowIcon:{type:String,default:null},collapsedRowIcon:{type:String,default:null},editButtonProps:{type:Object,default:null}},documentEditListener:null,selfClick:!1,overlayEventListener:null,data:function(){return{d_editing:this.editing,styleObject:{}}},watch:{editing:function(e){this.d_editing=e},"$data.d_editing":function(e){this.$emit("editing-meta-change",{data:this.rowData,field:this.field||"field_".concat(this.index),index:this.rowIndex,editing:e})}},mounted:function(){this.columnProp("frozen")&&this.updateStickyPosition()},updated:function(){var e=this;this.columnProp("frozen")&&this.updateStickyPosition(),this.d_editing&&(this.editMode==="cell"||this.editMode==="row"&&this.columnProp("rowEditor"))&&setTimeout(function(){var n=Xm(e.$el);n&&n.focus()},1)},beforeUnmount:function(){this.overlayEventListener&&(Mp.off("overlay-click",this.overlayEventListener),this.overlayEventListener=null)},methods:{columnProp:function(e){return Rg(this.column,e)},getColumnPT:function(e){var n,r,o={props:this.column.props,parent:{instance:this,props:this.$props,state:this.$data},context:{index:this.index,size:(n=this.$parentInstance)===null||n===void 0||(n=n.$parentInstance)===null||n===void 0?void 0:n.size,showGridlines:(r=this.$parentInstance)===null||r===void 0||(r=r.$parentInstance)===null||r===void 0?void 0:r.showGridlines}};return It(this.ptm("column.".concat(e),{column:o}),this.ptm("column.".concat(e),o),this.ptmo(this.getColumnProp(),e,o))},getColumnProp:function(){return this.column.props&&this.column.props.pt?this.column.props.pt:void 0},resolveFieldData:function(){return po(this.rowData,this.field)},toggleRow:function(e){this.$emit("row-toggle",{originalEvent:e,data:this.rowData})},toggleRowWithRadio:function(e,n){this.$emit("radio-change",{originalEvent:e.originalEvent,index:n,data:e.data})},toggleRowWithCheckbox:function(e,n){this.$emit("checkbox-change",{originalEvent:e.originalEvent,index:n,data:e.data})},isEditable:function(){return this.column.children&&this.column.children.editor!=null},bindDocumentEditListener:function(){var e=this;this.documentEditListener||(this.documentEditListener=function(n){e.selfClick||e.completeEdit(n,"outside"),e.selfClick=!1},document.addEventListener("click",this.documentEditListener))},unbindDocumentEditListener:function(){this.documentEditListener&&(document.removeEventListener("click",this.documentEditListener),this.documentEditListener=null,this.selfClick=!1)},switchCellToViewMode:function(){this.d_editing=!1,this.unbindDocumentEditListener(),Mp.off("overlay-click",this.overlayEventListener),this.overlayEventListener=null},onClick:function(e){var n=this;this.editMode==="cell"&&this.isEditable()&&(this.selfClick=!0,this.d_editing||(this.d_editing=!0,this.bindDocumentEditListener(),this.$emit("cell-edit-init",{originalEvent:e,data:this.rowData,field:this.field,index:this.rowIndex}),this.overlayEventListener=function(r){n.$el&&n.$el.contains(r.target)&&(n.selfClick=!0)},Mp.on("overlay-click",this.overlayEventListener)))},completeEdit:function(e,n){var r={originalEvent:e,data:this.rowData,newData:this.editingRowData,value:this.rowData[this.field],newValue:this.editingRowData[this.field],field:this.field,index:this.rowIndex,type:n,defaultPrevented:!1,preventDefault:function(){this.defaultPrevented=!0}};this.$emit("cell-edit-complete",r),r.defaultPrevented||this.switchCellToViewMode()},onKeyDown:function(e){if(this.editMode==="cell")switch(e.code){case"Enter":case"NumpadEnter":this.completeEdit(e,"enter");break;case"Escape":this.switchCellToViewMode(),this.$emit("cell-edit-cancel",{originalEvent:e,data:this.rowData,field:this.field,index:this.rowIndex});break;case"Tab":this.completeEdit(e,"tab"),e.shiftKey?this.moveToPreviousCell(e):this.moveToNextCell(e);break}},moveToPreviousCell:function(e){var n=this.findCell(e.target),r=this.findPreviousEditableColumn(n);r&&(jO(r,"click"),e.preventDefault())},moveToNextCell:function(e){var n=this.findCell(e.target),r=this.findNextEditableColumn(n);r&&(jO(r,"click"),e.preventDefault())},findCell:function(e){if(e){for(var n=e;n&&!ml(n,"data-p-cell-editing");)n=n.parentElement;return n}else return null},findPreviousEditableColumn:function(e){var n=e.previousElementSibling;if(!n){var r=e.parentElement.previousElementSibling;r&&(n=r.lastElementChild)}return n?ml(n,"data-p-editable-column")?n:this.findPreviousEditableColumn(n):null},findNextEditableColumn:function(e){var n=e.nextElementSibling;if(!n){var r=e.parentElement.nextElementSibling;r&&(n=r.firstElementChild)}return n?ml(n,"data-p-editable-column")?n:this.findNextEditableColumn(n):null},onRowEditInit:function(e){this.$emit("row-edit-init",{originalEvent:e,data:this.rowData,newData:this.editingRowData,field:this.field,index:this.rowIndex})},onRowEditSave:function(e){this.$emit("row-edit-save",{originalEvent:e,data:this.rowData,newData:this.editingRowData,field:this.field,index:this.rowIndex})},onRowEditCancel:function(e){this.$emit("row-edit-cancel",{originalEvent:e,data:this.rowData,newData:this.editingRowData,field:this.field,index:this.rowIndex})},editorInitCallback:function(e){this.$emit("row-edit-init",{originalEvent:e,data:this.rowData,newData:this.editingRowData,field:this.field,index:this.rowIndex})},editorSaveCallback:function(e){this.editMode==="row"?this.$emit("row-edit-save",{originalEvent:e,data:this.rowData,newData:this.editingRowData,field:this.field,index:this.rowIndex}):this.completeEdit(e,"enter")},editorCancelCallback:function(e){this.editMode==="row"?this.$emit("row-edit-cancel",{originalEvent:e,data:this.rowData,newData:this.editingRowData,field:this.field,index:this.rowIndex}):(this.switchCellToViewMode(),this.$emit("cell-edit-cancel",{originalEvent:e,data:this.rowData,field:this.field,index:this.rowIndex}))},updateStickyPosition:function(){if(this.columnProp("frozen")){var e=this.columnProp("alignFrozen");if(e==="right"){var n=0,r=F4(this.$el,'[data-p-frozen-column="true"]');r&&(n=Sh(r)+parseFloat(r.style.right||0)),this.styleObject.right=n+"px"}else{var o=0,l=R4(this.$el,'[data-p-frozen-column="true"]');l&&(o=Sh(l)+parseFloat(l.style.left||0)),this.styleObject.left=o+"px"}}},getVirtualScrollerProp:function(e){return this.virtualScrollerContentProps?this.virtualScrollerContentProps[e]:null}},computed:{editingRowData:function(){return this.editingMeta[this.rowIndex]?this.editingMeta[this.rowIndex].data:this.rowData},field:function(){return this.columnProp("field")},containerClass:function(){return[this.columnProp("bodyClass"),this.columnProp("class"),this.cx("bodyCell")]},containerStyle:function(){var e=this.columnProp("bodyStyle"),n=this.columnProp("style");return this.columnProp("frozen")?[n,e,this.styleObject]:[n,e]},loading:function(){return this.getVirtualScrollerProp("loading")},loadingOptions:function(){var e=this.getVirtualScrollerProp("getLoaderOptions");return e&&e(this.rowIndex,{cellIndex:this.index,cellFirst:this.index===0,cellLast:this.index===this.getVirtualScrollerProp("columns").length-1,cellEven:this.index%2===0,cellOdd:this.index%2!==0,column:this.column,field:this.field})},expandButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.isRowExpanded?this.$primevue.config.locale.aria.expandRow:this.$primevue.config.locale.aria.collapseRow:void 0},initButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.editRow:void 0},saveButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.saveEdit:void 0},cancelButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.cancelEdit:void 0}},components:{DTRadioButton:mV,DTCheckbox:pV,Button:V4,ChevronDownIcon:UE,ChevronRightIcon:N4,BarsIcon:aV,PencilIcon:lV,CheckIcon:$_,TimesIcon:M4},directives:{ripple:pm}};function v1(t){"@babel/helpers - typeof";return v1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v1(t)}function gD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Vw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gD(Object(n),!0).forEach(function(r){tfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tfe(t,e,n){return(e=nfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nfe(t){var e=rfe(t,"string");return v1(e)=="symbol"?e:e+""}function rfe(t,e){if(v1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(v1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ife=["colspan","rowspan","data-p-selection-column","data-p-editable-column","data-p-cell-editing","data-p-frozen-column"],ofe=["aria-expanded","aria-controls","aria-label"];function sfe(t,e,n,r,o,l){var h=Nr("DTRadioButton"),p=Nr("DTCheckbox"),i=Nr("BarsIcon"),b=Nr("ChevronDownIcon"),E=Nr("ChevronRightIcon"),I=Nr("Button"),O=CA("ripple");return l.loading?(ve(),et("td",It({key:0,style:l.containerStyle,class:l.containerClass,role:"cell"},Vw(Vw({},l.getColumnPT("root")),l.getColumnPT("bodyCell"))),[(ve(),hn(mr(n.column.children.loading),{data:n.rowData,column:n.column,field:l.field,index:n.rowIndex,frozenRow:n.frozenRow,loadingOptions:l.loadingOptions},null,8,["data","column","field","index","frozenRow","loadingOptions"]))],16)):(ve(),et("td",It({key:1,style:l.containerStyle,class:l.containerClass,colspan:l.columnProp("colspan"),rowspan:l.columnProp("rowspan"),onClick:e[3]||(e[3]=function(){return l.onClick&&l.onClick.apply(l,arguments)}),onKeydown:e[4]||(e[4]=function(){return l.onKeyDown&&l.onKeyDown.apply(l,arguments)}),role:"cell"},Vw(Vw({},l.getColumnPT("root")),l.getColumnPT("bodyCell")),{"data-p-selection-column":l.columnProp("selectionMode")!=null,"data-p-editable-column":l.isEditable(),"data-p-cell-editing":o.d_editing,"data-p-frozen-column":l.columnProp("frozen")}),[n.column.children&&n.column.children.body&&!o.d_editing?(ve(),hn(mr(n.column.children.body),{key:0,data:n.rowData,column:n.column,field:l.field,index:n.rowIndex,frozenRow:n.frozenRow,editorInitCallback:l.editorInitCallback,rowTogglerCallback:l.toggleRow},null,8,["data","column","field","index","frozenRow","editorInitCallback","rowTogglerCallback"])):n.column.children&&n.column.children.editor&&o.d_editing?(ve(),hn(mr(n.column.children.editor),{key:1,data:l.editingRowData,column:n.column,field:l.field,index:n.rowIndex,frozenRow:n.frozenRow,editorSaveCallback:l.editorSaveCallback,editorCancelCallback:l.editorCancelCallback},null,8,["data","column","field","index","frozenRow","editorSaveCallback","editorCancelCallback"])):n.column.children&&n.column.children.body&&!n.column.children.editor&&o.d_editing?(ve(),hn(mr(n.column.children.body),{key:2,data:l.editingRowData,column:n.column,field:l.field,index:n.rowIndex,frozenRow:n.frozenRow},null,8,["data","column","field","index","frozenRow"])):l.columnProp("selectionMode")?(ve(),et(_r,{key:3},[l.columnProp("selectionMode")==="single"?(ve(),hn(h,{key:0,value:n.rowData,name:n.name,checked:n.selected,onChange:e[0]||(e[0]=function(M){return l.toggleRowWithRadio(M,n.rowIndex)}),column:n.column,index:n.index,unstyled:t.unstyled,pt:t.pt},null,8,["value","name","checked","column","index","unstyled","pt"])):l.columnProp("selectionMode")==="multiple"?(ve(),hn(p,{key:1,value:n.rowData,checked:n.selected,rowCheckboxIconTemplate:n.column.children&&n.column.children.rowcheckboxicon,"aria-selected":n.selected?!0:void 0,onChange:e[1]||(e[1]=function(M){return l.toggleRowWithCheckbox(M,n.rowIndex)}),column:n.column,index:n.index,unstyled:t.unstyled,pt:t.pt},null,8,["value","checked","rowCheckboxIconTemplate","aria-selected","column","index","unstyled","pt"])):Sn("",!0)],64)):l.columnProp("rowReorder")?(ve(),et(_r,{key:4},[n.column.children&&n.column.children.rowreordericon?(ve(),hn(mr(n.column.children.rowreordericon),{key:0,class:On(t.cx("reorderableRowHandle"))},null,8,["class"])):l.columnProp("rowReorderIcon")?(ve(),et("i",It({key:1,class:[t.cx("reorderableRowHandle"),l.columnProp("rowReorderIcon")]},l.getColumnPT("reorderableRowHandle")),null,16)):(ve(),hn(i,It({key:2,class:t.cx("reorderableRowHandle")},l.getColumnPT("reorderableRowHandle")),null,16,["class"]))],64)):l.columnProp("expander")?Fo((ve(),et("button",It({key:5,class:t.cx("rowToggleButton"),type:"button","aria-expanded":n.isRowExpanded,"aria-controls":n.ariaControls,"aria-label":l.expandButtonAriaLabel,onClick:e[2]||(e[2]=function(){return l.toggleRow&&l.toggleRow.apply(l,arguments)})},l.getColumnPT("rowToggleButton"),{"data-pc-group-section":"rowactionbutton"}),[n.column.children&&n.column.children.rowtogglericon?(ve(),hn(mr(n.column.children.rowtogglericon),{key:0,class:On(t.cx("rowToggleIcon")),rowExpanded:n.isRowExpanded},null,8,["class","rowExpanded"])):(ve(),et(_r,{key:1},[n.isRowExpanded&&n.expandedRowIcon?(ve(),et("span",{key:0,class:On([t.cx("rowToggleIcon"),n.expandedRowIcon])},null,2)):n.isRowExpanded&&!n.expandedRowIcon?(ve(),hn(b,It({key:1,class:t.cx("rowToggleIcon")},l.getColumnPT("rowToggleIcon")),null,16,["class"])):!n.isRowExpanded&&n.collapsedRowIcon?(ve(),et("span",{key:2,class:On([t.cx("rowToggleIcon"),n.collapsedRowIcon])},null,2)):!n.isRowExpanded&&!n.collapsedRowIcon?(ve(),hn(E,It({key:3,class:t.cx("rowToggleIcon")},l.getColumnPT("rowToggleIcon")),null,16,["class"])):Sn("",!0)],64))],16,ofe)),[[O]]):n.editMode==="row"&&l.columnProp("rowEditor")?(ve(),et(_r,{key:6},[o.d_editing?Sn("",!0):(ve(),hn(I,It({key:0,class:t.cx("pcRowEditorInit"),"aria-label":l.initButtonAriaLabel,unstyled:t.unstyled,onClick:l.onRowEditInit},n.editButtonProps.init,{pt:l.getColumnPT("pcRowEditorInit"),"data-pc-group-section":"rowactionbutton"}),{icon:Kn(function(M){return[(ve(),hn(mr(n.column.children&&n.column.children.roweditoriniticon||"PencilIcon"),It({class:M.class},l.getColumnPT("pcRowEditorInit").icon),null,16,["class"]))]}),_:1},16,["class","aria-label","unstyled","onClick","pt"])),o.d_editing?(ve(),hn(I,It({key:1,class:t.cx("pcRowEditorSave"),"aria-label":l.saveButtonAriaLabel,unstyled:t.unstyled,onClick:l.onRowEditSave},n.editButtonProps.save,{pt:l.getColumnPT("pcRowEditorSave"),"data-pc-group-section":"rowactionbutton"}),{icon:Kn(function(M){return[(ve(),hn(mr(n.column.children&&n.column.children.roweditorsaveicon||"CheckIcon"),It({class:M.class},l.getColumnPT("pcRowEditorSave").icon),null,16,["class"]))]}),_:1},16,["class","aria-label","unstyled","onClick","pt"])):Sn("",!0),o.d_editing?(ve(),hn(I,It({key:2,class:t.cx("pcRowEditorCancel"),"aria-label":l.cancelButtonAriaLabel,unstyled:t.unstyled,onClick:l.onRowEditCancel},n.editButtonProps.cancel,{pt:l.getColumnPT("pcRowEditorCancel"),"data-pc-group-section":"rowactionbutton"}),{icon:Kn(function(M){return[(ve(),hn(mr(n.column.children&&n.column.children.roweditorcancelicon||"TimesIcon"),It({class:M.class},l.getColumnPT("pcRowEditorCancel").icon),null,16,["class"]))]}),_:1},16,["class","aria-label","unstyled","onClick","pt"])):Sn("",!0)],64)):(ve(),et(_r,{key:7},[jr(Ar(l.resolveFieldData()),1)],64))],16,ife))}gV.render=sfe;function b1(t){"@babel/helpers - typeof";return b1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b1(t)}function afe(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=lfe(t))||e){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(b){throw b},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l,h=!0,p=!1;return{s:function(){n=n.call(t)},n:function(){var b=n.next();return h=b.done,b},e:function(b){p=!0,l=b},f:function(){try{h||n.return==null||n.return()}finally{if(p)throw l}}}}function lfe(t,e){if(t){if(typeof t=="string")return yD(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yD(t,e):void 0}}function yD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function _D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function vD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_D(Object(n),!0).forEach(function(r){cfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_D(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cfe(t,e,n){return(e=ufe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ufe(t){var e=hfe(t,"string");return b1(e)=="symbol"?e:e+""}function hfe(t,e){if(b1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(b1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yV={name:"BodyRow",hostName:"DataTable",extends:Ro,emits:["rowgroup-toggle","row-click","row-dblclick","row-rightclick","row-touchend","row-keydown","row-mousedown","row-dragstart","row-dragover","row-dragleave","row-dragend","row-drop","row-toggle","radio-change","checkbox-change","cell-edit-init","cell-edit-complete","cell-edit-cancel","row-edit-init","row-edit-save","row-edit-cancel","editing-meta-change"],props:{rowData:{type:Object,default:null},index:{type:Number,default:0},value:{type:Array,default:null},columns:{type:null,default:null},frozenRow:{type:Boolean,default:!1},empty:{type:Boolean,default:!1},rowGroupMode:{type:String,default:null},groupRowsBy:{type:[Array,String,Function],default:null},expandableRowGroups:{type:Boolean,default:!1},expandedRowGroups:{type:Array,default:null},first:{type:Number,default:0},dataKey:{type:[String,Function],default:null},expandedRowIcon:{type:String,default:null},collapsedRowIcon:{type:String,default:null},expandedRows:{type:[Array,Object],default:null},selection:{type:[Array,Object],default:null},selectionKeys:{type:null,default:null},selectionMode:{type:String,default:null},contextMenu:{type:Boolean,default:!1},contextMenuSelection:{type:Object,default:null},rowClass:{type:null,default:null},rowStyle:{type:null,default:null},rowGroupHeaderStyle:{type:null,default:null},editMode:{type:String,default:null},compareSelectionBy:{type:String,default:"deepEquals"},editingRows:{type:Array,default:null},editingRowKeys:{type:null,default:null},editingMeta:{type:Object,default:null},templates:{type:null,default:null},scrollable:{type:Boolean,default:!1},editButtonProps:{type:Object,default:null},virtualScrollerContentProps:{type:Object,default:null},isVirtualScrollerDisabled:{type:Boolean,default:!1},expandedRowId:{type:String,default:null},nameAttributeSelector:{type:String,default:null}},data:function(){return{d_rowExpanded:!1}},watch:{expandedRows:{deep:!0,immediate:!0,handler:function(e){var n=this;this.d_rowExpanded=this.dataKey?(e==null?void 0:e[po(this.rowData,this.dataKey)])!==void 0:e==null?void 0:e.some(function(r){return n.equals(n.rowData,r)})}}},methods:{columnProp:function(e,n){return Rg(e,n)},getColumnPT:function(e){var n={parent:{instance:this,props:this.$props,state:this.$data}};return It(this.ptm("column.".concat(e),{column:n}),this.ptm("column.".concat(e),n),this.ptmo(this.columnProp({},"pt"),e,n))},getBodyRowPTOptions:function(e){var n,r=(n=this.$parentInstance)===null||n===void 0?void 0:n.$parentInstance;return this.ptm(e,{context:{index:this.rowIndex,selectable:(r==null?void 0:r.rowHover)||(r==null?void 0:r.selectionMode),selected:this.isSelected,stripedRows:(r==null?void 0:r.stripedRows)||!1}})},shouldRenderBodyCell:function(e){var n=this.columnProp(e,"hidden");if(this.rowGroupMode&&!n){var r=this.columnProp(e,"field");if(this.rowGroupMode==="subheader")return this.groupRowsBy!==r;if(this.rowGroupMode==="rowspan")if(this.isGrouped(e)){var o=this.value[this.rowIndex-1];if(o){var l=po(this.value[this.rowIndex],r),h=po(o,r);return l!==h}else return!0}else return!0}else return!n},calculateRowGroupSize:function(e){if(this.isGrouped(e)){for(var n=this.rowIndex,r=this.columnProp(e,"field"),o=po(this.value[n],r),l=o,h=0;o===l;){h++;var p=this.value[++n];if(p)l=po(p,r);else break}return h===1?null:h}else return null},isGrouped:function(e){var n=this.columnProp(e,"field");return this.groupRowsBy&&n?Array.isArray(this.groupRowsBy)?this.groupRowsBy.indexOf(n)>-1:this.groupRowsBy===n:!1},findIndexInSelection:function(e){return this.findIndex(e,this.selection)},findIndex:function(e,n){var r=-1;if(n&&n.length){for(var o=0;o<n.length;o++)if(this.equals(e,n[o])){r=o;break}}return r},equals:function(e,n){return this.compareSelectionBy==="equals"?e===n:Fg(e,n,this.dataKey)},onRowGroupToggle:function(e){this.$emit("rowgroup-toggle",{originalEvent:e,data:this.rowData})},onRowClick:function(e){this.$emit("row-click",{originalEvent:e,data:this.rowData,index:this.rowIndex})},onRowDblClick:function(e){this.$emit("row-dblclick",{originalEvent:e,data:this.rowData,index:this.rowIndex})},onRowRightClick:function(e){this.$emit("row-rightclick",{originalEvent:e,data:this.rowData,index:this.rowIndex})},onRowTouchEnd:function(e){this.$emit("row-touchend",e)},onRowKeyDown:function(e){this.$emit("row-keydown",{originalEvent:e,data:this.rowData,index:this.rowIndex})},onRowMouseDown:function(e){this.$emit("row-mousedown",e)},onRowDragStart:function(e){this.$emit("row-dragstart",{originalEvent:e,index:this.rowIndex})},onRowDragOver:function(e){this.$emit("row-dragover",{originalEvent:e,index:this.rowIndex})},onRowDragLeave:function(e){this.$emit("row-dragleave",e)},onRowDragEnd:function(e){this.$emit("row-dragend",e)},onRowDrop:function(e){this.$emit("row-drop",e)},onRowToggle:function(e){this.d_rowExpanded=!this.d_rowExpanded,this.$emit("row-toggle",vD(vD({},e),{},{expanded:this.d_rowExpanded}))},onRadioChange:function(e){this.$emit("radio-change",e)},onCheckboxChange:function(e){this.$emit("checkbox-change",e)},onCellEditInit:function(e){this.$emit("cell-edit-init",e)},onCellEditComplete:function(e){this.$emit("cell-edit-complete",e)},onCellEditCancel:function(e){this.$emit("cell-edit-cancel",e)},onRowEditInit:function(e){this.$emit("row-edit-init",e)},onRowEditSave:function(e){this.$emit("row-edit-save",e)},onRowEditCancel:function(e){this.$emit("row-edit-cancel",e)},onEditingMetaChange:function(e){this.$emit("editing-meta-change",e)},getVirtualScrollerProp:function(e,n){return n=n||this.virtualScrollerContentProps,n?n[e]:null}},computed:{rowIndex:function(){var e=this.getVirtualScrollerProp("getItemOptions");return e?e(this.index).index:this.index},rowStyles:function(){var e;return(e=this.rowStyle)===null||e===void 0?void 0:e.call(this,this.rowData)},rowClasses:function(){var e=[],n=null;if(this.rowClass){var r=this.rowClass(this.rowData);r&&e.push(r)}if(this.columns){var o=afe(this.columns),l;try{for(o.s();!(l=o.n()).done;){var h=l.value,p=this.columnProp(h,"selectionMode");if(Lo(p)){n=p;break}}}catch(i){o.e(i)}finally{o.f()}}return[this.cx("row",{rowData:this.rowData,index:this.rowIndex,columnSelectionMode:n}),e]},rowTabindex:function(){return this.selection===null&&(this.selectionMode==="single"||this.selectionMode==="multiple")&&this.rowIndex===0?0:-1},isRowEditing:function(){return this.rowData&&this.editingRows?this.dataKey?this.editingRowKeys?this.editingRowKeys[po(this.rowData,this.dataKey)]!==void 0:!1:this.findIndex(this.rowData,this.editingRows)>-1:!1},isRowGroupExpanded:function(){if(this.expandableRowGroups&&this.expandedRowGroups){var e=po(this.rowData,this.groupRowsBy);return this.expandedRowGroups.indexOf(e)>-1}return!1},isSelected:function(){return this.rowData&&this.selection?this.dataKey?this.selectionKeys?this.selectionKeys[po(this.rowData,this.dataKey)]!==void 0:!1:this.selection instanceof Array?this.findIndexInSelection(this.rowData)>-1:this.equals(this.rowData,this.selection):!1},isSelectedWithContextMenu:function(){return this.rowData&&this.contextMenuSelection?this.equals(this.rowData,this.contextMenuSelection,this.dataKey):!1},shouldRenderRowGroupHeader:function(){var e=po(this.rowData,this.groupRowsBy),n=this.value[this.rowIndex-1];if(n){var r=po(n,this.groupRowsBy);return e!==r}else return!0},shouldRenderRowGroupFooter:function(){if(this.expandableRowGroups&&!this.isRowGroupExpanded)return!1;var e=po(this.rowData,this.groupRowsBy),n=this.value[this.rowIndex+1];if(n){var r=po(n,this.groupRowsBy);return e!==r}else return!0},columnsLength:function(){var e=this;if(this.columns){var n=0;return this.columns.forEach(function(r){e.columnProp(r,"selectionMode")==="single"&&n--,e.columnProp(r,"hidden")&&n++}),this.columns.length-n}return 0}},components:{DTBodyCell:gV,ChevronDownIcon:UE,ChevronRightIcon:N4}};function w1(t){"@babel/helpers - typeof";return w1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w1(t)}function bD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function hp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bD(Object(n),!0).forEach(function(r){dfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dfe(t,e,n){return(e=ffe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ffe(t){var e=Afe(t,"string");return w1(e)=="symbol"?e:e+""}function Afe(t,e){if(w1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(w1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pfe=["colspan"],mfe=["tabindex","aria-selected","data-p-index","data-p-selectable-row","data-p-selected","data-p-selected-contextmenu"],gfe=["id"],yfe=["colspan"],_fe=["colspan"],vfe=["colspan"];function bfe(t,e,n,r,o,l){var h=Nr("ChevronDownIcon"),p=Nr("ChevronRightIcon"),i=Nr("DTBodyCell");return n.empty?(ve(),et("tr",It({key:1,class:t.cx("emptyMessage"),role:"row"},t.ptm("emptyMessage")),[mt("td",It({colspan:l.columnsLength},hp(hp({},l.getColumnPT("bodycell")),t.ptm("emptyMessageCell"))),[n.templates.empty?(ve(),hn(mr(n.templates.empty),{key:0})):Sn("",!0)],16,vfe)],16)):(ve(),et(_r,{key:0},[n.templates.groupheader&&n.rowGroupMode==="subheader"&&l.shouldRenderRowGroupHeader?(ve(),et("tr",It({key:0,class:t.cx("rowGroupHeader"),style:n.rowGroupHeaderStyle,role:"row"},t.ptm("rowGroupHeader")),[mt("td",It({colspan:l.columnsLength-1},hp(hp({},l.getColumnPT("bodycell")),t.ptm("rowGroupHeaderCell"))),[n.expandableRowGroups?(ve(),et("button",It({key:0,class:t.cx("rowToggleButton"),onClick:e[0]||(e[0]=function(){return l.onRowGroupToggle&&l.onRowGroupToggle.apply(l,arguments)}),type:"button"},t.ptm("rowToggleButton")),[n.templates.rowtoggleicon||n.templates.rowgrouptogglericon?(ve(),hn(mr(n.templates.rowtoggleicon||n.templates.rowgrouptogglericon),{key:0,expanded:l.isRowGroupExpanded},null,8,["expanded"])):(ve(),et(_r,{key:1},[l.isRowGroupExpanded&&n.expandedRowIcon?(ve(),et("span",It({key:0,class:[t.cx("rowToggleIcon"),n.expandedRowIcon]},t.ptm("rowToggleIcon")),null,16)):l.isRowGroupExpanded&&!n.expandedRowIcon?(ve(),hn(h,It({key:1,class:t.cx("rowToggleIcon")},t.ptm("rowToggleIcon")),null,16,["class"])):!l.isRowGroupExpanded&&n.collapsedRowIcon?(ve(),et("span",It({key:2,class:[t.cx("rowToggleIcon"),n.collapsedRowIcon]},t.ptm("rowToggleIcon")),null,16)):!l.isRowGroupExpanded&&!n.collapsedRowIcon?(ve(),hn(p,It({key:3,class:t.cx("rowToggleIcon")},t.ptm("rowToggleIcon")),null,16,["class"])):Sn("",!0)],64))],16)):Sn("",!0),(ve(),hn(mr(n.templates.groupheader),{data:n.rowData,index:l.rowIndex},null,8,["data","index"]))],16,pfe)],16)):Sn("",!0),!n.expandableRowGroups||l.isRowGroupExpanded?(ve(),et("tr",It({key:1,class:l.rowClasses,style:l.rowStyles,tabindex:l.rowTabindex,role:"row","aria-selected":n.selectionMode?l.isSelected:null,onClick:e[1]||(e[1]=function(){return l.onRowClick&&l.onRowClick.apply(l,arguments)}),onDblclick:e[2]||(e[2]=function(){return l.onRowDblClick&&l.onRowDblClick.apply(l,arguments)}),onContextmenu:e[3]||(e[3]=function(){return l.onRowRightClick&&l.onRowRightClick.apply(l,arguments)}),onTouchend:e[4]||(e[4]=function(){return l.onRowTouchEnd&&l.onRowTouchEnd.apply(l,arguments)}),onKeydown:e[5]||(e[5]=gf(function(){return l.onRowKeyDown&&l.onRowKeyDown.apply(l,arguments)},["self"])),onMousedown:e[6]||(e[6]=function(){return l.onRowMouseDown&&l.onRowMouseDown.apply(l,arguments)}),onDragstart:e[7]||(e[7]=function(){return l.onRowDragStart&&l.onRowDragStart.apply(l,arguments)}),onDragover:e[8]||(e[8]=function(){return l.onRowDragOver&&l.onRowDragOver.apply(l,arguments)}),onDragleave:e[9]||(e[9]=function(){return l.onRowDragLeave&&l.onRowDragLeave.apply(l,arguments)}),onDragend:e[10]||(e[10]=function(){return l.onRowDragEnd&&l.onRowDragEnd.apply(l,arguments)}),onDrop:e[11]||(e[11]=function(){return l.onRowDrop&&l.onRowDrop.apply(l,arguments)})},l.getBodyRowPTOptions("bodyRow"),{"data-p-index":l.rowIndex,"data-p-selectable-row":!!n.selectionMode,"data-p-selected":n.selection&&l.isSelected,"data-p-selected-contextmenu":n.contextMenuSelection&&l.isSelectedWithContextMenu}),[(ve(!0),et(_r,null,Li(n.columns,function(b,E){return ve(),et(_r,null,[l.shouldRenderBodyCell(b)?(ve(),hn(i,{key:l.columnProp(b,"columnKey")||l.columnProp(b,"field")||E,rowData:n.rowData,column:b,rowIndex:l.rowIndex,index:E,selected:l.isSelected,frozenRow:n.frozenRow,rowspan:n.rowGroupMode==="rowspan"?l.calculateRowGroupSize(b):null,editMode:n.editMode,editing:n.editMode==="row"&&l.isRowEditing,editingMeta:n.editingMeta,virtualScrollerContentProps:n.virtualScrollerContentProps,ariaControls:n.expandedRowId+"_"+l.rowIndex+"_expansion",name:n.nameAttributeSelector,isRowExpanded:o.d_rowExpanded,expandedRowIcon:n.expandedRowIcon,collapsedRowIcon:n.collapsedRowIcon,editButtonProps:n.editButtonProps,onRadioChange:l.onRadioChange,onCheckboxChange:l.onCheckboxChange,onRowToggle:l.onRowToggle,onCellEditInit:l.onCellEditInit,onCellEditComplete:l.onCellEditComplete,onCellEditCancel:l.onCellEditCancel,onRowEditInit:l.onRowEditInit,onRowEditSave:l.onRowEditSave,onRowEditCancel:l.onRowEditCancel,onEditingMetaChange:l.onEditingMetaChange,unstyled:t.unstyled,pt:t.pt},null,8,["rowData","column","rowIndex","index","selected","frozenRow","rowspan","editMode","editing","editingMeta","virtualScrollerContentProps","ariaControls","name","isRowExpanded","expandedRowIcon","collapsedRowIcon","editButtonProps","onRadioChange","onCheckboxChange","onRowToggle","onCellEditInit","onCellEditComplete","onCellEditCancel","onRowEditInit","onRowEditSave","onRowEditCancel","onEditingMetaChange","unstyled","pt"])):Sn("",!0)],64)}),256))],16,mfe)):Sn("",!0),n.templates.expansion&&n.expandedRows&&o.d_rowExpanded?(ve(),et("tr",It({key:2,id:n.expandedRowId+"_"+l.rowIndex+"_expansion",class:t.cx("rowExpansion"),role:"row"},t.ptm("rowExpansion")),[mt("td",It({colspan:l.columnsLength},hp(hp({},l.getColumnPT("bodycell")),t.ptm("rowExpansionCell"))),[(ve(),hn(mr(n.templates.expansion),{data:n.rowData,index:l.rowIndex},null,8,["data","index"]))],16,yfe)],16,gfe)):Sn("",!0),n.templates.groupfooter&&n.rowGroupMode==="subheader"&&l.shouldRenderRowGroupFooter?(ve(),et("tr",It({key:3,class:t.cx("rowGroupFooter"),role:"row"},t.ptm("rowGroupFooter")),[mt("td",It({colspan:l.columnsLength-1},hp(hp({},l.getColumnPT("bodycell")),t.ptm("rowGroupFooterCell"))),[(ve(),hn(mr(n.templates.groupfooter),{data:n.rowData,index:l.rowIndex},null,8,["data","index"]))],16,_fe)],16)):Sn("",!0)],64))}yV.render=bfe;var _V={name:"TableBody",hostName:"DataTable",extends:Ro,emits:["rowgroup-toggle","row-click","row-dblclick","row-rightclick","row-touchend","row-keydown","row-mousedown","row-dragstart","row-dragover","row-dragleave","row-dragend","row-drop","row-toggle","radio-change","checkbox-change","cell-edit-init","cell-edit-complete","cell-edit-cancel","row-edit-init","row-edit-save","row-edit-cancel","editing-meta-change"],props:{value:{type:Array,default:null},columns:{type:null,default:null},frozenRow:{type:Boolean,default:!1},empty:{type:Boolean,default:!1},rowGroupMode:{type:String,default:null},groupRowsBy:{type:[Array,String,Function],default:null},expandableRowGroups:{type:Boolean,default:!1},expandedRowGroups:{type:Array,default:null},first:{type:Number,default:0},dataKey:{type:[String,Function],default:null},expandedRowIcon:{type:String,default:null},collapsedRowIcon:{type:String,default:null},expandedRows:{type:[Array,Object],default:null},selection:{type:[Array,Object],default:null},selectionKeys:{type:null,default:null},selectionMode:{type:String,default:null},contextMenu:{type:Boolean,default:!1},contextMenuSelection:{type:Object,default:null},rowClass:{type:null,default:null},rowStyle:{type:null,default:null},editMode:{type:String,default:null},compareSelectionBy:{type:String,default:"deepEquals"},editingRows:{type:Array,default:null},editingRowKeys:{type:null,default:null},editingMeta:{type:Object,default:null},templates:{type:null,default:null},scrollable:{type:Boolean,default:!1},editButtonProps:{type:Object,default:null},virtualScrollerContentProps:{type:Object,default:null},isVirtualScrollerDisabled:{type:Boolean,default:!1}},data:function(){return{rowGroupHeaderStyleObject:{}}},mounted:function(){this.frozenRow&&this.updateFrozenRowStickyPosition(),this.scrollable&&this.rowGroupMode==="subheader"&&this.updateFrozenRowGroupHeaderStickyPosition()},updated:function(){this.frozenRow&&this.updateFrozenRowStickyPosition(),this.scrollable&&this.rowGroupMode==="subheader"&&this.updateFrozenRowGroupHeaderStickyPosition()},methods:{getRowKey:function(e,n){return this.dataKey?po(e,this.dataKey):n},updateFrozenRowStickyPosition:function(){this.$el.style.top=BC(this.$el.previousElementSibling)+"px"},updateFrozenRowGroupHeaderStickyPosition:function(){var e=BC(this.$el.previousElementSibling);this.rowGroupHeaderStyleObject.top=e+"px"},getVirtualScrollerProp:function(e,n){return n=n||this.virtualScrollerContentProps,n?n[e]:null},bodyRef:function(e){var n=this.getVirtualScrollerProp("contentRef");n&&n(e)}},computed:{rowGroupHeaderStyle:function(){return this.scrollable?{top:this.rowGroupHeaderStyleObject.top}:null},bodyContentStyle:function(){return this.getVirtualScrollerProp("contentStyle")},ptmTBodyOptions:function(){var e;return{context:{scrollable:(e=this.$parentInstance)===null||e===void 0||(e=e.$parentInstance)===null||e===void 0?void 0:e.scrollable}}},expandedRowId:function(){return Af()},nameAttributeSelector:function(){return Af()}},components:{DTBodyRow:yV}};function wfe(t,e,n,r,o,l){var h=Nr("DTBodyRow");return ve(),et("tbody",It({ref:l.bodyRef,class:t.cx("tbody"),role:"rowgroup",style:l.bodyContentStyle},t.ptm("tbody",l.ptmTBodyOptions)),[n.empty?(ve(),hn(h,{key:1,empty:n.empty,columns:n.columns,templates:n.templates},null,8,["empty","columns","templates"])):(ve(!0),et(_r,{key:0},Li(n.value,function(p,i){return ve(),hn(h,{key:l.getRowKey(p,i),rowData:p,index:i,value:n.value,columns:n.columns,frozenRow:n.frozenRow,empty:n.empty,first:n.first,dataKey:n.dataKey,selection:n.selection,selectionKeys:n.selectionKeys,selectionMode:n.selectionMode,contextMenu:n.contextMenu,contextMenuSelection:n.contextMenuSelection,rowGroupMode:n.rowGroupMode,groupRowsBy:n.groupRowsBy,expandableRowGroups:n.expandableRowGroups,rowClass:n.rowClass,rowStyle:n.rowStyle,editMode:n.editMode,compareSelectionBy:n.compareSelectionBy,scrollable:n.scrollable,expandedRowIcon:n.expandedRowIcon,collapsedRowIcon:n.collapsedRowIcon,expandedRows:n.expandedRows,expandedRowGroups:n.expandedRowGroups,editingRows:n.editingRows,editingRowKeys:n.editingRowKeys,templates:n.templates,editButtonProps:n.editButtonProps,virtualScrollerContentProps:n.virtualScrollerContentProps,isVirtualScrollerDisabled:n.isVirtualScrollerDisabled,editingMeta:n.editingMeta,rowGroupHeaderStyle:l.rowGroupHeaderStyle,expandedRowId:l.expandedRowId,nameAttributeSelector:l.nameAttributeSelector,onRowgroupToggle:e[0]||(e[0]=function(b){return t.$emit("rowgroup-toggle",b)}),onRowClick:e[1]||(e[1]=function(b){return t.$emit("row-click",b)}),onRowDblclick:e[2]||(e[2]=function(b){return t.$emit("row-dblclick",b)}),onRowRightclick:e[3]||(e[3]=function(b){return t.$emit("row-rightclick",b)}),onRowTouchend:e[4]||(e[4]=function(b){return t.$emit("row-touchend",b)}),onRowKeydown:e[5]||(e[5]=function(b){return t.$emit("row-keydown",b)}),onRowMousedown:e[6]||(e[6]=function(b){return t.$emit("row-mousedown",b)}),onRowDragstart:e[7]||(e[7]=function(b){return t.$emit("row-dragstart",b)}),onRowDragover:e[8]||(e[8]=function(b){return t.$emit("row-dragover",b)}),onRowDragleave:e[9]||(e[9]=function(b){return t.$emit("row-dragleave",b)}),onRowDragend:e[10]||(e[10]=function(b){return t.$emit("row-dragend",b)}),onRowDrop:e[11]||(e[11]=function(b){return t.$emit("row-drop",b)}),onRowToggle:e[12]||(e[12]=function(b){return t.$emit("row-toggle",b)}),onRadioChange:e[13]||(e[13]=function(b){return t.$emit("radio-change",b)}),onCheckboxChange:e[14]||(e[14]=function(b){return t.$emit("checkbox-change",b)}),onCellEditInit:e[15]||(e[15]=function(b){return t.$emit("cell-edit-init",b)}),onCellEditComplete:e[16]||(e[16]=function(b){return t.$emit("cell-edit-complete",b)}),onCellEditCancel:e[17]||(e[17]=function(b){return t.$emit("cell-edit-cancel",b)}),onRowEditInit:e[18]||(e[18]=function(b){return t.$emit("row-edit-init",b)}),onRowEditSave:e[19]||(e[19]=function(b){return t.$emit("row-edit-save",b)}),onRowEditCancel:e[20]||(e[20]=function(b){return t.$emit("row-edit-cancel",b)}),onEditingMetaChange:e[21]||(e[21]=function(b){return t.$emit("editing-meta-change",b)}),unstyled:t.unstyled,pt:t.pt},null,8,["rowData","index","value","columns","frozenRow","empty","first","dataKey","selection","selectionKeys","selectionMode","contextMenu","contextMenuSelection","rowGroupMode","groupRowsBy","expandableRowGroups","rowClass","rowStyle","editMode","compareSelectionBy","scrollable","expandedRowIcon","collapsedRowIcon","expandedRows","expandedRowGroups","editingRows","editingRowKeys","templates","editButtonProps","virtualScrollerContentProps","isVirtualScrollerDisabled","editingMeta","rowGroupHeaderStyle","expandedRowId","nameAttributeSelector","unstyled","pt"])}),128))],16)}_V.render=wfe;var vV={name:"FooterCell",hostName:"DataTable",extends:Ro,props:{column:{type:Object,default:null},index:{type:Number,default:null}},data:function(){return{styleObject:{}}},mounted:function(){this.columnProp("frozen")&&this.updateStickyPosition()},updated:function(){this.columnProp("frozen")&&this.updateStickyPosition()},methods:{columnProp:function(e){return Rg(this.column,e)},getColumnPT:function(e){var n,r,o={props:this.column.props,parent:{instance:this,props:this.$props,state:this.$data},context:{index:this.index,size:(n=this.$parentInstance)===null||n===void 0||(n=n.$parentInstance)===null||n===void 0?void 0:n.size,showGridlines:((r=this.$parentInstance)===null||r===void 0||(r=r.$parentInstance)===null||r===void 0?void 0:r.showGridlines)||!1}};return It(this.ptm("column.".concat(e),{column:o}),this.ptm("column.".concat(e),o),this.ptmo(this.getColumnProp(),e,o))},getColumnProp:function(){return this.column.props&&this.column.props.pt?this.column.props.pt:void 0},updateStickyPosition:function(){if(this.columnProp("frozen")){var e=this.columnProp("alignFrozen");if(e==="right"){var n=0,r=F4(this.$el,'[data-p-frozen-column="true"]');r&&(n=Sh(r)+parseFloat(r.style.right||0)),this.styleObject.right=n+"px"}else{var o=0,l=R4(this.$el,'[data-p-frozen-column="true"]');l&&(o=Sh(l)+parseFloat(l.style.left||0)),this.styleObject.left=o+"px"}}}},computed:{containerClass:function(){return[this.columnProp("footerClass"),this.columnProp("class"),this.cx("footerCell")]},containerStyle:function(){var e=this.columnProp("footerStyle"),n=this.columnProp("style");return this.columnProp("frozen")?[n,e,this.styleObject]:[n,e]}}};function x1(t){"@babel/helpers - typeof";return x1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x1(t)}function wD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function xD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wD(Object(n),!0).forEach(function(r){xfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xfe(t,e,n){return(e=Cfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cfe(t){var e=Efe(t,"string");return x1(e)=="symbol"?e:e+""}function Efe(t,e){if(x1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(x1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Bfe=["colspan","rowspan","data-p-frozen-column"];function Sfe(t,e,n,r,o,l){return ve(),et("td",It({style:l.containerStyle,class:l.containerClass,role:"cell",colspan:l.columnProp("colspan"),rowspan:l.columnProp("rowspan")},xD(xD({},l.getColumnPT("root")),l.getColumnPT("footerCell")),{"data-p-frozen-column":l.columnProp("frozen")}),[n.column.children&&n.column.children.footer?(ve(),hn(mr(n.column.children.footer),{key:0,column:n.column},null,8,["column"])):Sn("",!0),l.columnProp("footer")?(ve(),et("span",It({key:1,class:t.cx("columnFooter")},l.getColumnPT("columnFooter")),Ar(l.columnProp("footer")),17)):Sn("",!0)],16,Bfe)}vV.render=Sfe;function Tfe(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Ife(t))||e){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(b){throw b},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l,h=!0,p=!1;return{s:function(){n=n.call(t)},n:function(){var b=n.next();return h=b.done,b},e:function(b){p=!0,l=b},f:function(){try{h||n.return==null||n.return()}finally{if(p)throw l}}}}function Ife(t,e){if(t){if(typeof t=="string")return CD(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?CD(t,e):void 0}}function CD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var bV={name:"TableFooter",hostName:"DataTable",extends:Ro,props:{columnGroup:{type:null,default:null},columns:{type:Object,default:null}},provide:function(){return{$rows:this.d_footerRows,$columns:this.d_footerColumns}},data:function(){return{d_footerRows:new E_({type:"Row"}),d_footerColumns:new E_({type:"Column"})}},beforeUnmount:function(){this.d_footerRows.clear(),this.d_footerColumns.clear()},methods:{columnProp:function(e,n){return Rg(e,n)},getColumnGroupPT:function(e){var n={props:this.getColumnGroupProps(),parent:{instance:this,props:this.$props,state:this.$data},context:{type:"footer",scrollable:this.ptmTFootOptions.context.scrollable}};return It(this.ptm("columnGroup.".concat(e),{columnGroup:n}),this.ptm("columnGroup.".concat(e),n),this.ptmo(this.getColumnGroupProps(),e,n))},getColumnGroupProps:function(){return this.columnGroup&&this.columnGroup.props&&this.columnGroup.props.pt?this.columnGroup.props.pt:void 0},getRowPT:function(e,n,r){var o={props:e.props,parent:{instance:this,props:this.$props,state:this.$data},context:{index:r}};return It(this.ptm("row.".concat(n),{row:o}),this.ptm("row.".concat(n),o),this.ptmo(this.getRowProp(e),n,o))},getRowProp:function(e){return e.props&&e.props.pt?e.props.pt:void 0},getFooterRows:function(){var e;return(e=this.d_footerRows)===null||e===void 0?void 0:e.get(this.columnGroup,this.columnGroup.children)},getFooterColumns:function(e){var n;return(n=this.d_footerColumns)===null||n===void 0?void 0:n.get(e,e.children)}},computed:{hasFooter:function(){var e=!1;if(this.columnGroup)e=!0;else if(this.columns){var n=Tfe(this.columns),r;try{for(n.s();!(r=n.n()).done;){var o=r.value;if(this.columnProp(o,"footer")||o.children&&o.children.footer){e=!0;break}}}catch(l){n.e(l)}finally{n.f()}}return e},ptmTFootOptions:function(){var e;return{context:{scrollable:(e=this.$parentInstance)===null||e===void 0||(e=e.$parentInstance)===null||e===void 0?void 0:e.scrollable}}}},components:{DTFooterCell:vV}};function C1(t){"@babel/helpers - typeof";return C1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C1(t)}function ED(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Qw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ED(Object(n),!0).forEach(function(r){Pfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ED(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pfe(t,e,n){return(e=Lfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lfe(t){var e=Ffe(t,"string");return C1(e)=="symbol"?e:e+""}function Ffe(t,e){if(C1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(C1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Rfe(t,e,n,r,o,l){var h=Nr("DTFooterCell");return l.hasFooter?(ve(),et("tfoot",It({key:0,class:t.cx("tfoot"),style:t.sx("tfoot"),role:"rowgroup"},n.columnGroup?Qw(Qw({},t.ptm("tfoot",l.ptmTFootOptions)),l.getColumnGroupPT("root")):t.ptm("tfoot",l.ptmTFootOptions),{"data-pc-section":"tfoot"}),[n.columnGroup?(ve(!0),et(_r,{key:1},Li(l.getFooterRows(),function(p,i){return ve(),et("tr",It({key:i,role:"row",ref_for:!0},Qw(Qw({},t.ptm("footerRow")),l.getRowPT(p,"root",i))),[(ve(!0),et(_r,null,Li(l.getFooterColumns(p),function(b,E){return ve(),et(_r,{key:l.columnProp(b,"columnKey")||l.columnProp(b,"field")||E},[l.columnProp(b,"hidden")?Sn("",!0):(ve(),hn(h,{key:0,column:b,index:i,pt:t.pt},null,8,["column","index","pt"]))],64)}),128))],16)}),128)):(ve(),et("tr",It({key:0,role:"row"},t.ptm("footerRow")),[(ve(!0),et(_r,null,Li(n.columns,function(p,i){return ve(),et(_r,{key:l.columnProp(p,"columnKey")||l.columnProp(p,"field")||i},[l.columnProp(p,"hidden")?Sn("",!0):(ve(),hn(h,{key:0,column:p,pt:t.pt},null,8,["column","pt"]))],64)}),128))],16))],16)):Sn("",!0)}bV.render=Rfe;function E1(t){"@babel/helpers - typeof";return E1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E1(t)}function BD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Qm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BD(Object(n),!0).forEach(function(r){kfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kfe(t,e,n){return(e=Mfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mfe(t){var e=Ofe(t,"string");return E1(e)=="symbol"?e:e+""}function Ofe(t,e){if(E1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(E1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var H4={name:"ColumnFilter",hostName:"DataTable",extends:Ro,emits:["filter-change","filter-apply","operator-change","matchmode-change","constraint-add","constraint-remove","filter-clear","apply-click"],props:{field:{type:String,default:null},type:{type:String,default:"text"},display:{type:String,default:null},showMenu:{type:Boolean,default:!0},matchMode:{type:String,default:null},showOperator:{type:Boolean,default:!0},showClearButton:{type:Boolean,default:!0},showApplyButton:{type:Boolean,default:!0},showMatchModes:{type:Boolean,default:!0},showAddButton:{type:Boolean,default:!0},matchModeOptions:{type:Array,default:null},maxConstraints:{type:Number,default:2},filterElement:{type:Function,default:null},filterHeaderTemplate:{type:Function,default:null},filterFooterTemplate:{type:Function,default:null},filterClearTemplate:{type:Function,default:null},filterApplyTemplate:{type:Function,default:null},filterIconTemplate:{type:Function,default:null},filterAddIconTemplate:{type:Function,default:null},filterRemoveIconTemplate:{type:Function,default:null},filterClearIconTemplate:{type:Function,default:null},filters:{type:Object,default:null},filtersStore:{type:Object,default:null},filterMenuClass:{type:String,default:null},filterMenuStyle:{type:null,default:null},filterInputProps:{type:null,default:null},filterButtonProps:{type:null,default:null},column:null},data:function(){return{id:this.$attrs.id,overlayVisible:!1,defaultMatchMode:null,defaultOperator:null}},watch:{"$attrs.id":function(e){this.id=e||Af()}},overlay:null,selfClick:!1,overlayEventListener:null,beforeUnmount:function(){this.overlayEventListener&&(Mp.off("overlay-click",this.overlayEventListener),this.overlayEventListener=null),this.overlay&&(Jy.clear(this.overlay),this.onOverlayHide())},mounted:function(){if(this.id=this.id||Af(),this.filters&&this.filters[this.field]){var e=this.filters[this.field];e.operator?(this.defaultMatchMode=e.constraints[0].matchMode,this.defaultOperator=e.operator):this.defaultMatchMode=this.filters[this.field].matchMode}},methods:{getColumnPT:function(e,n){var r=Qm({props:this.column.props,parent:{instance:this,props:this.$props,state:this.$data}},n);return It(this.ptm("column.".concat(e),{column:r}),this.ptm("column.".concat(e),r),this.ptmo(this.getColumnProp(),e,r))},getColumnProp:function(){return this.column.props&&this.column.props.pt?this.column.props.pt:void 0},ptmFilterConstraintOptions:function(e){return{context:{highlighted:e&&this.isRowMatchModeSelected(e.value)}}},clearFilter:function(){var e=Qm({},this.filters);e[this.field].operator?(e[this.field].constraints.splice(1),e[this.field].operator=this.defaultOperator,e[this.field].constraints[0]={value:null,matchMode:this.defaultMatchMode}):(e[this.field].value=null,e[this.field].matchMode=this.defaultMatchMode),this.$emit("filter-clear"),this.$emit("filter-change",e),this.$emit("filter-apply"),this.hide()},applyFilter:function(){this.$emit("apply-click",{field:this.field,constraints:this.filters[this.field]}),this.$emit("filter-apply"),this.hide()},hasFilter:function(){if(this.filtersStore){var e=this.filtersStore[this.field];if(e)return e.operator?!this.isFilterBlank(e.constraints[0].value):!this.isFilterBlank(e.value)}return!1},hasRowFilter:function(){return this.filters[this.field]&&!this.isFilterBlank(this.filters[this.field].value)},isFilterBlank:function(e){return e!=null?typeof e=="string"&&e.trim().length==0||e instanceof Array&&e.length==0:!0},toggleMenu:function(e){this.overlayVisible=!this.overlayVisible,e.preventDefault()},onToggleButtonKeyDown:function(e){switch(e.code){case"Enter":case"NumpadEnter":case"Space":this.toggleMenu(e);break;case"Escape":this.overlayVisible=!1;break}},onRowMatchModeChange:function(e){var n=Qm({},this.filters);n[this.field].matchMode=e,this.$emit("matchmode-change",{field:this.field,matchMode:e}),this.$emit("filter-change",n),this.$emit("filter-apply"),this.hide()},onRowMatchModeKeyDown:function(e){var n=e.target;switch(e.code){case"ArrowDown":var r=this.findNextItem(n);r&&(n.removeAttribute("tabindex"),r.tabIndex="0",r.focus()),e.preventDefault();break;case"ArrowUp":var o=this.findPrevItem(n);o&&(n.removeAttribute("tabindex"),o.tabIndex="0",o.focus()),e.preventDefault();break}},isRowMatchModeSelected:function(e){return this.filters[this.field].matchMode===e},onOperatorChange:function(e){var n=Qm({},this.filters);n[this.field].operator=e,this.$emit("filter-change",n),this.$emit("operator-change",{field:this.field,operator:e}),this.showApplyButton||this.$emit("filter-apply")},onMenuMatchModeChange:function(e,n){var r=Qm({},this.filters);r[this.field].constraints[n].matchMode=e,this.$emit("matchmode-change",{field:this.field,matchMode:e,index:n}),this.showApplyButton||this.$emit("filter-apply")},addConstraint:function(){var e=Qm({},this.filters),n={value:null,matchMode:this.defaultMatchMode};e[this.field].constraints.push(n),this.$emit("constraint-add",{field:this.field,constraing:n}),this.$emit("filter-change",e),this.showApplyButton||this.$emit("filter-apply")},removeConstraint:function(e){var n=Qm({},this.filters),r=n[this.field].constraints.splice(e,1);this.$emit("constraint-remove",{field:this.field,constraing:r}),this.$emit("filter-change",n),this.showApplyButton||this.$emit("filter-apply")},filterCallback:function(){this.$emit("filter-apply")},findNextItem:function(e){var n=e.nextElementSibling;return n?ml(n,"data-pc-section")==="filterconstraintseparator"?this.findNextItem(n):n:e.parentElement.firstElementChild},findPrevItem:function(e){var n=e.previousElementSibling;return n?ml(n,"data-pc-section")==="filterconstraintseparator"?this.findPrevItem(n):n:e.parentElement.lastElementChild},hide:function(){this.overlayVisible=!1,this.showMenuButton&&au(this.$refs.icon.$el)},onContentClick:function(e){this.selfClick=!0,Mp.emit("overlay-click",{originalEvent:e,target:this.overlay})},onContentMouseDown:function(){this.selfClick=!0},onOverlayEnter:function(e){var n=this;this.filterMenuStyle&&CC(this.overlay,this.filterMenuStyle),Jy.set("overlay",e,this.$primevue.config.zIndex.overlay),CC(e,{position:"absolute",top:"0",left:"0"}),C7(this.overlay,this.$refs.icon.$el),this.bindOutsideClickListener(),this.bindScrollListener(),this.bindResizeListener(),this.overlayEventListener=function(r){n.isOutsideClicked(r.target)||(n.selfClick=!0)},Mp.on("overlay-click",this.overlayEventListener)},onOverlayAfterEnter:function(){var e;(e=this.overlay)===null||e===void 0||(e=e.$focustrap)===null||e===void 0||e.autoFocus()},onOverlayLeave:function(){this.onOverlayHide()},onOverlayAfterLeave:function(e){Jy.clear(e)},onOverlayHide:function(){this.unbindOutsideClickListener(),this.unbindResizeListener(),this.unbindScrollListener(),this.overlay=null,Mp.off("overlay-click",this.overlayEventListener),this.overlayEventListener=null},overlayRef:function(e){this.overlay=e},isOutsideClicked:function(e){return!this.isTargetClicked(e)&&this.overlay&&!(this.overlay.isSameNode(e)||this.overlay.contains(e))},isTargetClicked:function(e){return this.$refs.icon&&(this.$refs.icon.$el.isSameNode(e)||this.$refs.icon.$el.contains(e))},bindOutsideClickListener:function(){var e=this;this.outsideClickListener||(this.outsideClickListener=function(n){e.overlayVisible&&!e.selfClick&&e.isOutsideClicked(n.target)&&(e.overlayVisible=!1),e.selfClick=!1},document.addEventListener("click",this.outsideClickListener))},unbindOutsideClickListener:function(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null,this.selfClick=!1)},bindScrollListener:function(){var e=this;this.scrollHandler||(this.scrollHandler=new P7(this.$refs.icon.$el,function(){e.overlayVisible&&e.hide()})),this.scrollHandler.bindScrollListener()},unbindScrollListener:function(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener:function(){var e=this;this.resizeListener||(this.resizeListener=function(){e.overlayVisible&&!I7()&&e.hide()},window.addEventListener("resize",this.resizeListener))},unbindResizeListener:function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}},computed:{showMenuButton:function(){return this.showMenu&&(this.display==="row"?this.type!=="boolean":!0)},overlayId:function(){return this.id+"_overlay"},matchModes:function(){var e=this;return this.matchModeOptions||this.$primevue.config.filterMatchModeOptions[this.type].map(function(n){return{label:e.$primevue.config.locale[n],value:n}})},isShowMatchModes:function(){return this.type!=="boolean"&&this.showMatchModes&&this.matchModes},operatorOptions:function(){return[{label:this.$primevue.config.locale.matchAll,value:wC.AND},{label:this.$primevue.config.locale.matchAny,value:wC.OR}]},noFilterLabel:function(){return this.$primevue.config.locale?this.$primevue.config.locale.noFilter:void 0},isShowOperator:function(){return this.showOperator&&this.filters[this.field].operator},operator:function(){return this.filters[this.field].operator},fieldConstraints:function(){return this.filters[this.field].constraints||[this.filters[this.field]]},showRemoveIcon:function(){return this.fieldConstraints.length>1},removeRuleButtonLabel:function(){return this.$primevue.config.locale?this.$primevue.config.locale.removeRule:void 0},addRuleButtonLabel:function(){return this.$primevue.config.locale?this.$primevue.config.locale.addRule:void 0},isShowAddConstraint:function(){return this.showAddButton&&this.filters[this.field].operator&&this.fieldConstraints&&this.fieldConstraints.length<this.maxConstraints},clearButtonLabel:function(){return this.$primevue.config.locale?this.$primevue.config.locale.clear:void 0},applyButtonLabel:function(){return this.$primevue.config.locale?this.$primevue.config.locale.apply:void 0},columnFilterButtonAriaLabel:function(){return this.$primevue.config.locale?this.overlayVisible?this.$primevue.config.locale.showFilterMenu:this.$primevue.config.locale.hideFilterMenu:void 0},filterOperatorAriaLabel:function(){return this.$primevue.config.locale?this.$primevue.config.locale.filterOperator:void 0},filterRuleAriaLabel:function(){return this.$primevue.config.locale?this.$primevue.config.locale.filterConstraint:void 0},ptmHeaderFilterClearParams:function(){return{context:{hidden:this.hasRowFilter()}}},ptmFilterMenuParams:function(){return{context:{overlayVisible:this.overlayVisible,active:this.hasFilter()}}}},components:{Select:NE,Button:V4,Portal:D4,FilterSlashIcon:dV,FilterIcon:hV,TrashIcon:AV,PlusIcon:fV},directives:{focustrap:Nde}};function B1(t){"@babel/helpers - typeof";return B1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B1(t)}function SD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function yy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SD(Object(n),!0).forEach(function(r){Dfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Dfe(t,e,n){return(e=Ufe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ufe(t){var e=Nfe(t,"string");return B1(e)=="symbol"?e:e+""}function Nfe(t,e){if(B1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(B1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zfe=["id","aria-modal"],Vfe=["onClick","onKeydown","tabindex"];function Qfe(t,e,n,r,o,l){var h=Nr("Button"),p=Nr("Select"),i=Nr("Portal"),b=CA("focustrap");return ve(),et("div",It({class:t.cx("filter")},l.getColumnPT("filter")),[n.display==="row"?(ve(),et("div",It({key:0,class:t.cx("filterElementContainer")},yy(yy({},n.filterInputProps),l.getColumnPT("filterElementContainer"))),[(ve(),hn(mr(n.filterElement),{field:n.field,filterModel:n.filters[n.field],filterCallback:l.filterCallback},null,8,["field","filterModel","filterCallback"]))],16)):Sn("",!0),l.showMenuButton?(ve(),hn(h,It({key:1,ref:"icon","aria-label":l.columnFilterButtonAriaLabel,"aria-haspopup":"true","aria-expanded":o.overlayVisible,"aria-controls":l.overlayId,class:t.cx("pcColumnFilterButton"),unstyled:t.unstyled,onClick:e[0]||(e[0]=function(E){return l.toggleMenu(E)}),onKeydown:e[1]||(e[1]=function(E){return l.onToggleButtonKeyDown(E)})},yy(yy({},l.getColumnPT("pcColumnFilterButton",l.ptmFilterMenuParams)),n.filterButtonProps.filter)),{icon:Kn(function(E){return[(ve(),hn(mr(n.filterIconTemplate||"FilterIcon"),It({class:E.class},l.getColumnPT("filterMenuIcon")),null,16,["class"]))]}),_:1},16,["aria-label","aria-expanded","aria-controls","class","unstyled"])):Sn("",!0),n.showClearButton&&n.display==="row"&&l.hasRowFilter()?(ve(),hn(h,It({key:2,class:t.cx("pcColumnFilterClearButton"),unstyled:t.unstyled,onClick:e[2]||(e[2]=function(E){return l.clearFilter()})},yy(yy({},l.getColumnPT("pcColumnFilterClearButton",l.ptmHeaderFilterClearParams)),n.filterButtonProps.inline.clear)),{icon:Kn(function(E){return[(ve(),hn(mr(n.filterClearIconTemplate||"FilterSlashIcon"),It({class:E.class},l.getColumnPT("filterClearIcon")),null,16,["class"]))]}),_:1},16,["class","unstyled"])):Sn("",!0),Lr(i,null,{default:Kn(function(){return[Lr(X1,It({name:"p-connected-overlay",onEnter:l.onOverlayEnter,onAfterEnter:l.onOverlayAfterEnter,onLeave:l.onOverlayLeave,onAfterLeave:l.onOverlayAfterLeave},l.getColumnPT("transition")),{default:Kn(function(){return[o.overlayVisible?Fo((ve(),et("div",It({key:0,ref:l.overlayRef,id:l.overlayId,"aria-modal":o.overlayVisible,role:"dialog",class:[t.cx("filterOverlay"),n.filterMenuClass],onKeydown:e[10]||(e[10]=Tx(function(){return l.hide&&l.hide.apply(l,arguments)},["escape"])),onClick:e[11]||(e[11]=function(){return l.onContentClick&&l.onContentClick.apply(l,arguments)}),onMousedown:e[12]||(e[12]=function(){return l.onContentMouseDown&&l.onContentMouseDown.apply(l,arguments)})},l.getColumnPT("filterOverlay")),[(ve(),hn(mr(n.filterHeaderTemplate),{field:n.field,filterModel:n.filters[n.field],filterCallback:l.filterCallback},null,8,["field","filterModel","filterCallback"])),n.display==="row"?(ve(),et("ul",It({key:0,class:t.cx("filterConstraintList")},l.getColumnPT("filterConstraintList")),[(ve(!0),et(_r,null,Li(l.matchModes,function(E,I){return ve(),et("li",It({key:E.label,class:t.cx("filterConstraint",{matchMode:E}),onClick:function(M){return l.onRowMatchModeChange(E.value)},onKeydown:[e[3]||(e[3]=function(O){return l.onRowMatchModeKeyDown(O)}),Tx(gf(function(O){return l.onRowMatchModeChange(E.value)},["prevent"]),["enter"])],tabindex:I===0?"0":null,ref_for:!0},l.getColumnPT("filterConstraint",l.ptmFilterConstraintOptions(E))),Ar(E.label),17,Vfe)}),128)),mt("li",It({class:t.cx("filterConstraintSeparator")},l.getColumnPT("filterConstraintSeparator")),null,16),mt("li",It({class:t.cx("filterConstraint"),onClick:e[4]||(e[4]=function(E){return l.clearFilter()}),onKeydown:[e[5]||(e[5]=function(E){return l.onRowMatchModeKeyDown(E)}),e[6]||(e[6]=Tx(function(E){return t.onRowClearItemClick()},["enter"]))]},l.getColumnPT("filterConstraint")),Ar(l.noFilterLabel),17)],16)):(ve(),et(_r,{key:1},[l.isShowOperator?(ve(),et("div",It({key:0,class:t.cx("filterOperator")},l.getColumnPT("filterOperator")),[Lr(p,{options:l.operatorOptions,modelValue:l.operator,"aria-label":l.filterOperatorAriaLabel,class:On(t.cx("pcFilterOperatorDropdown")),optionLabel:"label",optionValue:"value","onUpdate:modelValue":e[7]||(e[7]=function(E){return l.onOperatorChange(E)}),unstyled:t.unstyled,pt:l.getColumnPT("pcFilterOperatorDropdown")},null,8,["options","modelValue","aria-label","class","unstyled","pt"])],16)):Sn("",!0),mt("div",It({class:t.cx("filterRuleList")},l.getColumnPT("filterRuleList")),[(ve(!0),et(_r,null,Li(l.fieldConstraints,function(E,I){return ve(),et("div",It({key:I,class:t.cx("filterRule"),ref_for:!0},l.getColumnPT("filterRule")),[l.isShowMatchModes?(ve(),hn(p,{key:0,options:l.matchModes,modelValue:E.matchMode,class:On(t.cx("pcFilterConstraintDropdown")),optionLabel:"label",optionValue:"value","aria-label":l.filterRuleAriaLabel,"onUpdate:modelValue":function(M){return l.onMenuMatchModeChange(M,I)},unstyled:t.unstyled,pt:l.getColumnPT("pcFilterConstraintDropdown")},null,8,["options","modelValue","class","aria-label","onUpdate:modelValue","unstyled","pt"])):Sn("",!0),n.display==="menu"?(ve(),hn(mr(n.filterElement),{key:1,field:n.field,filterModel:E,filterCallback:l.filterCallback,applyFilter:l.applyFilter},null,8,["field","filterModel","filterCallback","applyFilter"])):Sn("",!0),l.showRemoveIcon?(ve(),et("div",It({key:2,ref_for:!0},l.getColumnPT("filterRemove")),[Lr(h,It({type:"button",class:t.cx("pcFilterRemoveRuleButton"),onClick:function(M){return l.removeConstraint(I)},label:l.removeRuleButtonLabel,unstyled:t.unstyled,ref_for:!0},n.filterButtonProps.popover.removeRule,{pt:l.getColumnPT("pcFilterRemoveRuleButton")}),{icon:Kn(function(O){return[(ve(),hn(mr(n.filterRemoveIconTemplate||"TrashIcon"),It({class:O.class,ref_for:!0},l.getColumnPT("pcFilterRemoveRuleButton").icon),null,16,["class"]))]}),_:2},1040,["class","onClick","label","unstyled","pt"])],16)):Sn("",!0)],16)}),128))],16),l.isShowAddConstraint?(ve(),et("div",Ks(It({key:1},l.getColumnPT("filterAddButtonContainer"))),[Lr(h,It({type:"button",label:l.addRuleButtonLabel,iconPos:"left",class:t.cx("pcFilterAddRuleButton"),onClick:e[8]||(e[8]=function(E){return l.addConstraint()}),unstyled:t.unstyled},n.filterButtonProps.popover.addRule,{pt:l.getColumnPT("pcFilterAddRuleButton")}),{icon:Kn(function(E){return[(ve(),hn(mr(n.filterAddIconTemplate||"PlusIcon"),It({class:E.class},l.getColumnPT("pcFilterAddRuleButton").icon),null,16,["class"]))]}),_:1},16,["label","class","unstyled","pt"])],16)):Sn("",!0),mt("div",It({class:t.cx("filterButtonbar")},l.getColumnPT("filterButtonbar")),[!n.filterClearTemplate&&n.showClearButton?(ve(),hn(h,It({key:0,type:"button",class:t.cx("pcFilterClearButton"),label:l.clearButtonLabel,onClick:l.clearFilter,unstyled:t.unstyled},n.filterButtonProps.popover.clear,{pt:l.getColumnPT("pcFilterClearButton")}),null,16,["class","label","onClick","unstyled","pt"])):(ve(),hn(mr(n.filterClearTemplate),{key:1,field:n.field,filterModel:n.filters[n.field],filterCallback:l.clearFilter},null,8,["field","filterModel","filterCallback"])),n.showApplyButton?(ve(),et(_r,{key:2},[n.filterApplyTemplate?(ve(),hn(mr(n.filterApplyTemplate),{key:1,field:n.field,filterModel:n.filters[n.field],filterCallback:l.applyFilter},null,8,["field","filterModel","filterCallback"])):(ve(),hn(h,It({key:0,type:"button",class:t.cx("pcFilterApplyButton"),label:l.applyButtonLabel,onClick:e[9]||(e[9]=function(E){return l.applyFilter()}),unstyled:t.unstyled},n.filterButtonProps.popover.apply,{pt:l.getColumnPT("pcFilterApplyButton")}),null,16,["class","label","unstyled","pt"]))],64)):Sn("",!0)],16)],64)),(ve(),hn(mr(n.filterFooterTemplate),{field:n.field,filterModel:n.filters[n.field],filterCallback:l.filterCallback},null,8,["field","filterModel","filterCallback"]))],16,zfe)),[[b]]):Sn("",!0)]}),_:1},16,["onEnter","onAfterEnter","onLeave","onAfterLeave"])]}),_:1})],16)}H4.render=Qfe;var j4={name:"HeaderCheckbox",hostName:"DataTable",extends:Ro,emits:["change"],props:{checked:null,disabled:null,column:null,headerCheckboxIconTemplate:{type:Function,default:null}},methods:{getColumnPT:function(e){var n={props:this.column.props,parent:{instance:this,props:this.$props,state:this.$data},context:{checked:this.checked,disabled:this.disabled}};return It(this.ptm("column.".concat(e),{column:n}),this.ptm("column.".concat(e),n),this.ptmo(this.getColumnProp(),e,n))},getColumnProp:function(){return this.column.props&&this.column.props.pt?this.column.props.pt:void 0},onChange:function(e){this.$emit("change",{originalEvent:e,checked:!this.checked})}},computed:{headerCheckboxAriaLabel:function(){return this.$primevue.config.locale.aria?this.checked?this.$primevue.config.locale.aria.selectAll:this.$primevue.config.locale.aria.unselectAll:void 0}},components:{CheckIcon:$_,Checkbox:Q4}};function Hfe(t,e,n,r,o,l){var h=Nr("CheckIcon"),p=Nr("Checkbox");return ve(),hn(p,{modelValue:n.checked,binary:!0,disabled:n.disabled,"aria-label":l.headerCheckboxAriaLabel,onChange:l.onChange,pt:l.getColumnPT("pcHeaderCheckbox")},{icon:Kn(function(i){return[n.headerCheckboxIconTemplate?(ve(),hn(mr(n.headerCheckboxIconTemplate),{key:0,checked:i.checked,class:On(i.class)},null,8,["checked","class"])):!n.headerCheckboxIconTemplate&&i.checked?(ve(),hn(h,It({key:1,class:i.class},l.getColumnPT("pcHeaderCheckbox").icon),null,16,["class"])):Sn("",!0)]}),_:1},8,["modelValue","disabled","aria-label","onChange","pt"])}j4.render=Hfe;var wV={name:"HeaderCell",hostName:"DataTable",extends:Ro,emits:["column-click","column-mousedown","column-dragstart","column-dragover","column-dragleave","column-drop","column-resizestart","checkbox-change","filter-change","filter-apply","operator-change","matchmode-change","constraint-add","constraint-remove","filter-clear","apply-click"],props:{column:{type:Object,default:null},index:{type:Number,default:null},resizableColumns:{type:Boolean,default:!1},groupRowsBy:{type:[Array,String,Function],default:null},sortMode:{type:String,default:"single"},groupRowSortField:{type:[String,Function],default:null},sortField:{type:[String,Function],default:null},sortOrder:{type:Number,default:null},multiSortMeta:{type:Array,default:null},allRowsSelected:{type:Boolean,default:!1},empty:{type:Boolean,default:!1},filterDisplay:{type:String,default:null},filters:{type:Object,default:null},filtersStore:{type:Object,default:null},filterColumn:{type:Boolean,default:!1},reorderableColumns:{type:Boolean,default:!1},filterInputProps:{type:null,default:null},filterButtonProps:{type:null,default:null}},data:function(){return{styleObject:{}}},mounted:function(){this.columnProp("frozen")&&this.updateStickyPosition()},updated:function(){this.columnProp("frozen")&&this.updateStickyPosition()},methods:{columnProp:function(e){return Rg(this.column,e)},getColumnPT:function(e){var n,r,o={props:this.column.props,parent:{instance:this,props:this.$props,state:this.$data},context:{index:this.index,sortable:this.columnProp("sortable")===""||this.columnProp("sortable"),sorted:this.isColumnSorted(),resizable:this.resizableColumns,size:(n=this.$parentInstance)===null||n===void 0||(n=n.$parentInstance)===null||n===void 0?void 0:n.size,showGridlines:((r=this.$parentInstance)===null||r===void 0||(r=r.$parentInstance)===null||r===void 0?void 0:r.showGridlines)||!1}};return It(this.ptm("column.".concat(e),{column:o}),this.ptm("column.".concat(e),o),this.ptmo(this.getColumnProp(),e,o))},getColumnProp:function(){return this.column.props&&this.column.props.pt?this.column.props.pt:void 0},onClick:function(e){this.$emit("column-click",{originalEvent:e,column:this.column})},onKeyDown:function(e){(e.code==="Enter"||e.code==="NumpadEnter"||e.code==="Space")&&e.currentTarget.nodeName==="TH"&&ml(e.currentTarget,"data-p-sortable-column")&&(this.$emit("column-click",{originalEvent:e,column:this.column}),e.preventDefault())},onMouseDown:function(e){this.$emit("column-mousedown",{originalEvent:e,column:this.column})},onDragStart:function(e){this.$emit("column-dragstart",{originalEvent:e,column:this.column})},onDragOver:function(e){this.$emit("column-dragover",{originalEvent:e,column:this.column})},onDragLeave:function(e){this.$emit("column-dragleave",{originalEvent:e,column:this.column})},onDrop:function(e){this.$emit("column-drop",{originalEvent:e,column:this.column})},onResizeStart:function(e){this.$emit("column-resizestart",e)},getMultiSortMetaIndex:function(){var e=this;return this.multiSortMeta.findIndex(function(n){return n.field===e.columnProp("field")||n.field===e.columnProp("sortField")})},getBadgeValue:function(){var e=this.getMultiSortMetaIndex();return this.groupRowsBy&&this.groupRowsBy===this.groupRowSortField&&e>-1?e:e+1},isMultiSorted:function(){return this.sortMode==="multiple"&&this.columnProp("sortable")&&this.getMultiSortMetaIndex()>-1},isColumnSorted:function(){return this.sortMode==="single"?this.sortField&&(this.sortField===this.columnProp("field")||this.sortField===this.columnProp("sortField")):this.isMultiSorted()},updateStickyPosition:function(){if(this.columnProp("frozen")){var e=this.columnProp("alignFrozen");if(e==="right"){var n=0,r=F4(this.$el,'[data-p-frozen-column="true"]');r&&(n=Sh(r)+parseFloat(r.style.right||0)),this.styleObject.right=n+"px"}else{var o=0,l=R4(this.$el,'[data-p-frozen-column="true"]');l&&(o=Sh(l)+parseFloat(l.style.left||0)),this.styleObject.left=o+"px"}var h=this.$el.parentElement.nextElementSibling;if(h){var p=Dx(this.$el);h.children[p]&&(h.children[p].style.left=this.styleObject.left,h.children[p].style.right=this.styleObject.right)}}},onHeaderCheckboxChange:function(e){this.$emit("checkbox-change",e)}},computed:{containerClass:function(){return[this.cx("headerCell"),this.filterColumn?this.columnProp("filterHeaderClass"):this.columnProp("headerClass"),this.columnProp("class")]},containerStyle:function(){var e=this.filterColumn?this.columnProp("filterHeaderStyle"):this.columnProp("headerStyle"),n=this.columnProp("style");return this.columnProp("frozen")?[n,e,this.styleObject]:[n,e]},sortState:function(){var e=!1,n=null;if(this.sortMode==="single")e=this.sortField&&(this.sortField===this.columnProp("field")||this.sortField===this.columnProp("sortField")),n=e?this.sortOrder:0;else if(this.sortMode==="multiple"){var r=this.getMultiSortMetaIndex();r>-1&&(e=!0,n=this.multiSortMeta[r].order)}return{sorted:e,sortOrder:n}},sortableColumnIcon:function(){var e=this.sortState,n=e.sorted,r=e.sortOrder;if(n){if(n&&r>0)return mI;if(n&&r<0)return pI}else return AI;return null},ariaSort:function(){if(this.columnProp("sortable")){var e=this.sortState,n=e.sorted,r=e.sortOrder;return n&&r<0?"descending":n&&r>0?"ascending":"none"}else return null}},components:{Badge:z4,DTHeaderCheckbox:j4,DTColumnFilter:H4,SortAltIcon:AI,SortAmountUpAltIcon:mI,SortAmountDownIcon:pI}};function S1(t){"@babel/helpers - typeof";return S1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S1(t)}function TD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function ID(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TD(Object(n),!0).forEach(function(r){jfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jfe(t,e,n){return(e=$fe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $fe(t){var e=Gfe(t,"string");return S1(e)=="symbol"?e:e+""}function Gfe(t,e){if(S1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(S1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Kfe=["tabindex","colspan","rowspan","aria-sort","data-p-sortable-column","data-p-resizable-column","data-p-sorted","data-p-filter-column","data-p-frozen-column","data-p-reorderable-column"];function qfe(t,e,n,r,o,l){var h=Nr("Badge"),p=Nr("DTHeaderCheckbox"),i=Nr("DTColumnFilter");return ve(),et("th",It({style:l.containerStyle,class:l.containerClass,tabindex:l.columnProp("sortable")?"0":null,role:"columnheader",colspan:l.columnProp("colspan"),rowspan:l.columnProp("rowspan"),"aria-sort":l.ariaSort,onClick:e[8]||(e[8]=function(){return l.onClick&&l.onClick.apply(l,arguments)}),onKeydown:e[9]||(e[9]=function(){return l.onKeyDown&&l.onKeyDown.apply(l,arguments)}),onMousedown:e[10]||(e[10]=function(){return l.onMouseDown&&l.onMouseDown.apply(l,arguments)}),onDragstart:e[11]||(e[11]=function(){return l.onDragStart&&l.onDragStart.apply(l,arguments)}),onDragover:e[12]||(e[12]=function(){return l.onDragOver&&l.onDragOver.apply(l,arguments)}),onDragleave:e[13]||(e[13]=function(){return l.onDragLeave&&l.onDragLeave.apply(l,arguments)}),onDrop:e[14]||(e[14]=function(){return l.onDrop&&l.onDrop.apply(l,arguments)})},ID(ID({},l.getColumnPT("root")),l.getColumnPT("headerCell")),{"data-p-sortable-column":l.columnProp("sortable"),"data-p-resizable-column":n.resizableColumns,"data-p-sorted":l.isColumnSorted(),"data-p-filter-column":n.filterColumn,"data-p-frozen-column":l.columnProp("frozen"),"data-p-reorderable-column":n.reorderableColumns}),[n.resizableColumns&&!l.columnProp("frozen")?(ve(),et("span",It({key:0,class:t.cx("columnResizer"),onMousedown:e[0]||(e[0]=function(){return l.onResizeStart&&l.onResizeStart.apply(l,arguments)})},l.getColumnPT("columnResizer")),null,16)):Sn("",!0),mt("div",It({class:t.cx("columnHeaderContent")},l.getColumnPT("columnHeaderContent")),[n.column.children&&n.column.children.header?(ve(),hn(mr(n.column.children.header),{key:0,column:n.column},null,8,["column"])):Sn("",!0),l.columnProp("header")?(ve(),et("span",It({key:1,class:t.cx("columnTitle")},l.getColumnPT("columnTitle")),Ar(l.columnProp("header")),17)):Sn("",!0),l.columnProp("sortable")?(ve(),et("span",Ks(It({key:2},l.getColumnPT("sort"))),[(ve(),hn(mr(n.column.children&&n.column.children.sorticon||l.sortableColumnIcon),It({sorted:l.sortState.sorted,sortOrder:l.sortState.sortOrder,class:t.cx("sortIcon")},l.getColumnPT("sorticon")),null,16,["sorted","sortOrder","class"]))],16)):Sn("",!0),l.isMultiSorted()?(ve(),hn(h,{key:3,class:On(t.cx("pcSortBadge")),pt:l.getColumnPT("pcSortBadge"),value:l.getBadgeValue(),size:"small"},null,8,["class","pt","value"])):Sn("",!0),l.columnProp("selectionMode")==="multiple"&&n.filterDisplay!=="row"?(ve(),hn(p,{key:4,checked:n.allRowsSelected,onChange:l.onHeaderCheckboxChange,disabled:n.empty,headerCheckboxIconTemplate:n.column.children&&n.column.children.headercheckboxicon,column:n.column,unstyled:t.unstyled,pt:t.pt},null,8,["checked","onChange","disabled","headerCheckboxIconTemplate","column","unstyled","pt"])):Sn("",!0),n.filterDisplay==="menu"&&n.column.children&&n.column.children.filter?(ve(),hn(i,{key:5,field:l.columnProp("filterField")||l.columnProp("field"),type:l.columnProp("dataType"),display:"menu",showMenu:l.columnProp("showFilterMenu"),filterElement:n.column.children&&n.column.children.filter,filterHeaderTemplate:n.column.children&&n.column.children.filterheader,filterFooterTemplate:n.column.children&&n.column.children.filterfooter,filterClearTemplate:n.column.children&&n.column.children.filterclear,filterApplyTemplate:n.column.children&&n.column.children.filterapply,filterIconTemplate:n.column.children&&n.column.children.filtericon,filterAddIconTemplate:n.column.children&&n.column.children.filteraddicon,filterRemoveIconTemplate:n.column.children&&n.column.children.filterremoveicon,filterClearIconTemplate:n.column.children&&n.column.children.filterclearicon,filters:n.filters,filtersStore:n.filtersStore,filterInputProps:n.filterInputProps,filterButtonProps:n.filterButtonProps,onFilterChange:e[1]||(e[1]=function(b){return t.$emit("filter-change",b)}),onFilterApply:e[2]||(e[2]=function(b){return t.$emit("filter-apply")}),filterMenuStyle:l.columnProp("filterMenuStyle"),filterMenuClass:l.columnProp("filterMenuClass"),showOperator:l.columnProp("showFilterOperator"),showClearButton:l.columnProp("showClearButton"),showApplyButton:l.columnProp("showApplyButton"),showMatchModes:l.columnProp("showFilterMatchModes"),showAddButton:l.columnProp("showAddButton"),matchModeOptions:l.columnProp("filterMatchModeOptions"),maxConstraints:l.columnProp("maxConstraints"),onOperatorChange:e[3]||(e[3]=function(b){return t.$emit("operator-change",b)}),onMatchmodeChange:e[4]||(e[4]=function(b){return t.$emit("matchmode-change",b)}),onConstraintAdd:e[5]||(e[5]=function(b){return t.$emit("constraint-add",b)}),onConstraintRemove:e[6]||(e[6]=function(b){return t.$emit("constraint-remove",b)}),onApplyClick:e[7]||(e[7]=function(b){return t.$emit("apply-click",b)}),column:n.column,unstyled:t.unstyled,pt:t.pt},null,8,["field","type","showMenu","filterElement","filterHeaderTemplate","filterFooterTemplate","filterClearTemplate","filterApplyTemplate","filterIconTemplate","filterAddIconTemplate","filterRemoveIconTemplate","filterClearIconTemplate","filters","filtersStore","filterInputProps","filterButtonProps","filterMenuStyle","filterMenuClass","showOperator","showClearButton","showApplyButton","showMatchModes","showAddButton","matchModeOptions","maxConstraints","column","unstyled","pt"])):Sn("",!0)],16)],16,Kfe)}wV.render=qfe;var xV={name:"TableHeader",hostName:"DataTable",extends:Ro,emits:["column-click","column-mousedown","column-dragstart","column-dragover","column-dragleave","column-drop","column-resizestart","checkbox-change","filter-change","filter-apply","operator-change","matchmode-change","constraint-add","constraint-remove","filter-clear","apply-click"],props:{columnGroup:{type:null,default:null},columns:{type:null,default:null},rowGroupMode:{type:String,default:null},groupRowsBy:{type:[Array,String,Function],default:null},resizableColumns:{type:Boolean,default:!1},allRowsSelected:{type:Boolean,default:!1},empty:{type:Boolean,default:!1},sortMode:{type:String,default:"single"},groupRowSortField:{type:[String,Function],default:null},sortField:{type:[String,Function],default:null},sortOrder:{type:Number,default:null},multiSortMeta:{type:Array,default:null},filterDisplay:{type:String,default:null},filters:{type:Object,default:null},filtersStore:{type:Object,default:null},reorderableColumns:{type:Boolean,default:!1},first:{type:Number,default:0},filterInputProps:{type:null,default:null},filterButtonProps:{type:null,default:null}},provide:function(){return{$rows:this.d_headerRows,$columns:this.d_headerColumns}},data:function(){return{d_headerRows:new E_({type:"Row"}),d_headerColumns:new E_({type:"Column"})}},beforeUnmount:function(){this.d_headerRows.clear(),this.d_headerColumns.clear()},methods:{columnProp:function(e,n){return Rg(e,n)},getColumnGroupPT:function(e){var n,r={props:this.getColumnGroupProps(),parent:{instance:this,props:this.$props,state:this.$data},context:{type:"header",scrollable:(n=this.$parentInstance)===null||n===void 0||(n=n.$parentInstance)===null||n===void 0?void 0:n.scrollable}};return It(this.ptm("columnGroup.".concat(e),{columnGroup:r}),this.ptm("columnGroup.".concat(e),r),this.ptmo(this.getColumnGroupProps(),e,r))},getColumnGroupProps:function(){return this.columnGroup&&this.columnGroup.props&&this.columnGroup.props.pt?this.columnGroup.props.pt:void 0},getRowPT:function(e,n,r){var o={props:e.props,parent:{instance:this,props:this.$props,state:this.$data},context:{index:r}};return It(this.ptm("row.".concat(n),{row:o}),this.ptm("row.".concat(n),o),this.ptmo(this.getRowProp(e),n,o))},getRowProp:function(e){return e.props&&e.props.pt?e.props.pt:void 0},getColumnPT:function(e,n,r){var o={props:e.props,parent:{instance:this,props:this.$props,state:this.$data},context:{index:r}};return It(this.ptm("column.".concat(n),{column:o}),this.ptm("column.".concat(n),o),this.ptmo(this.getColumnProp(e),n,o))},getColumnProp:function(e){return e.props&&e.props.pt?e.props.pt:void 0},getFilterColumnHeaderClass:function(e){return[this.cx("headerCell",{column:e}),this.columnProp(e,"filterHeaderClass"),this.columnProp(e,"class")]},getFilterColumnHeaderStyle:function(e){return[this.columnProp(e,"filterHeaderStyle"),this.columnProp(e,"style")]},getHeaderRows:function(){var e;return(e=this.d_headerRows)===null||e===void 0?void 0:e.get(this.columnGroup,this.columnGroup.children)},getHeaderColumns:function(e){var n;return(n=this.d_headerColumns)===null||n===void 0?void 0:n.get(e,e.children)}},computed:{ptmTHeadOptions:function(){var e;return{context:{scrollable:(e=this.$parentInstance)===null||e===void 0||(e=e.$parentInstance)===null||e===void 0?void 0:e.scrollable}}}},components:{DTHeaderCell:wV,DTHeaderCheckbox:j4,DTColumnFilter:H4}};function T1(t){"@babel/helpers - typeof";return T1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T1(t)}function PD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function _y(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PD(Object(n),!0).forEach(function(r){Wfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wfe(t,e,n){return(e=Xfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xfe(t){var e=Zfe(t,"string");return T1(e)=="symbol"?e:e+""}function Zfe(t,e){if(T1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(T1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yfe(t,e,n,r,o,l){var h=Nr("DTHeaderCell"),p=Nr("DTHeaderCheckbox"),i=Nr("DTColumnFilter");return ve(),et("thead",It({class:t.cx("thead"),style:t.sx("thead"),role:"rowgroup"},n.columnGroup?_y(_y({},t.ptm("thead",l.ptmTHeadOptions)),l.getColumnGroupPT("root")):t.ptm("thead",l.ptmTHeadOptions),{"data-pc-section":"thead"}),[n.columnGroup?(ve(!0),et(_r,{key:1},Li(l.getHeaderRows(),function(b,E){return ve(),et("tr",It({key:E,role:"row",ref_for:!0},_y(_y({},t.ptm("headerRow")),l.getRowPT(b,"root",E))),[(ve(!0),et(_r,null,Li(l.getHeaderColumns(b),function(I,O){return ve(),et(_r,{key:l.columnProp(I,"columnKey")||l.columnProp(I,"field")||O},[!l.columnProp(I,"hidden")&&(n.rowGroupMode!=="subheader"||n.groupRowsBy!==l.columnProp(I,"field"))&&typeof I.children!="string"?(ve(),hn(h,{key:0,column:I,onColumnClick:e[23]||(e[23]=function(M){return t.$emit("column-click",M)}),onColumnMousedown:e[24]||(e[24]=function(M){return t.$emit("column-mousedown",M)}),groupRowsBy:n.groupRowsBy,groupRowSortField:n.groupRowSortField,sortMode:n.sortMode,sortField:n.sortField,sortOrder:n.sortOrder,multiSortMeta:n.multiSortMeta,allRowsSelected:n.allRowsSelected,empty:n.empty,onCheckboxChange:e[25]||(e[25]=function(M){return t.$emit("checkbox-change",M)}),filters:n.filters,filterDisplay:n.filterDisplay,filtersStore:n.filtersStore,onFilterChange:e[26]||(e[26]=function(M){return t.$emit("filter-change",M)}),onFilterApply:e[27]||(e[27]=function(M){return t.$emit("filter-apply")}),onOperatorChange:e[28]||(e[28]=function(M){return t.$emit("operator-change",M)}),onMatchmodeChange:e[29]||(e[29]=function(M){return t.$emit("matchmode-change",M)}),onConstraintAdd:e[30]||(e[30]=function(M){return t.$emit("constraint-add",M)}),onConstraintRemove:e[31]||(e[31]=function(M){return t.$emit("constraint-remove",M)}),onApplyClick:e[32]||(e[32]=function(M){return t.$emit("apply-click",M)}),unstyled:t.unstyled,pt:t.pt},null,8,["column","groupRowsBy","groupRowSortField","sortMode","sortField","sortOrder","multiSortMeta","allRowsSelected","empty","filters","filterDisplay","filtersStore","unstyled","pt"])):Sn("",!0)],64)}),128))],16)}),128)):(ve(),et(_r,{key:0},[mt("tr",It({role:"row"},t.ptm("headerRow")),[(ve(!0),et(_r,null,Li(n.columns,function(b,E){return ve(),et(_r,{key:l.columnProp(b,"columnKey")||l.columnProp(b,"field")||E},[!l.columnProp(b,"hidden")&&(n.rowGroupMode!=="subheader"||n.groupRowsBy!==l.columnProp(b,"field"))?(ve(),hn(h,{key:0,column:b,index:E,onColumnClick:e[0]||(e[0]=function(I){return t.$emit("column-click",I)}),onColumnMousedown:e[1]||(e[1]=function(I){return t.$emit("column-mousedown",I)}),onColumnDragstart:e[2]||(e[2]=function(I){return t.$emit("column-dragstart",I)}),onColumnDragover:e[3]||(e[3]=function(I){return t.$emit("column-dragover",I)}),onColumnDragleave:e[4]||(e[4]=function(I){return t.$emit("column-dragleave",I)}),onColumnDrop:e[5]||(e[5]=function(I){return t.$emit("column-drop",I)}),groupRowsBy:n.groupRowsBy,groupRowSortField:n.groupRowSortField,reorderableColumns:n.reorderableColumns,resizableColumns:n.resizableColumns,onColumnResizestart:e[6]||(e[6]=function(I){return t.$emit("column-resizestart",I)}),sortMode:n.sortMode,sortField:n.sortField,sortOrder:n.sortOrder,multiSortMeta:n.multiSortMeta,allRowsSelected:n.allRowsSelected,empty:n.empty,onCheckboxChange:e[7]||(e[7]=function(I){return t.$emit("checkbox-change",I)}),filters:n.filters,filterDisplay:n.filterDisplay,filtersStore:n.filtersStore,filterInputProps:n.filterInputProps,filterButtonProps:n.filterButtonProps,first:n.first,onFilterChange:e[8]||(e[8]=function(I){return t.$emit("filter-change",I)}),onFilterApply:e[9]||(e[9]=function(I){return t.$emit("filter-apply")}),onOperatorChange:e[10]||(e[10]=function(I){return t.$emit("operator-change",I)}),onMatchmodeChange:e[11]||(e[11]=function(I){return t.$emit("matchmode-change",I)}),onConstraintAdd:e[12]||(e[12]=function(I){return t.$emit("constraint-add",I)}),onConstraintRemove:e[13]||(e[13]=function(I){return t.$emit("constraint-remove",I)}),onApplyClick:e[14]||(e[14]=function(I){return t.$emit("apply-click",I)}),unstyled:t.unstyled,pt:t.pt},null,8,["column","index","groupRowsBy","groupRowSortField","reorderableColumns","resizableColumns","sortMode","sortField","sortOrder","multiSortMeta","allRowsSelected","empty","filters","filterDisplay","filtersStore","filterInputProps","filterButtonProps","first","unstyled","pt"])):Sn("",!0)],64)}),128))],16),n.filterDisplay==="row"?(ve(),et("tr",It({key:0,role:"row"},t.ptm("headerRow")),[(ve(!0),et(_r,null,Li(n.columns,function(b,E){return ve(),et(_r,{key:l.columnProp(b,"columnKey")||l.columnProp(b,"field")||E},[!l.columnProp(b,"hidden")&&(n.rowGroupMode!=="subheader"||n.groupRowsBy!==l.columnProp(b,"field"))?(ve(),et("th",It({key:0,style:l.getFilterColumnHeaderStyle(b),class:l.getFilterColumnHeaderClass(b),ref_for:!0},_y(_y({},l.getColumnPT(b,"root",E)),l.getColumnPT(b,"headerCell",E))),[l.columnProp(b,"selectionMode")==="multiple"?(ve(),hn(p,{key:0,checked:n.allRowsSelected,disabled:n.empty,onChange:e[15]||(e[15]=function(I){return t.$emit("checkbox-change",I)}),column:b,unstyled:t.unstyled,pt:t.pt},null,8,["checked","disabled","column","unstyled","pt"])):Sn("",!0),b.children&&b.children.filter?(ve(),hn(i,{key:1,field:l.columnProp(b,"filterField")||l.columnProp(b,"field"),type:l.columnProp(b,"dataType"),display:"row",showMenu:l.columnProp(b,"showFilterMenu"),filterElement:b.children&&b.children.filter,filterHeaderTemplate:b.children&&b.children.filterheader,filterFooterTemplate:b.children&&b.children.filterfooter,filterClearTemplate:b.children&&b.children.filterclear,filterApplyTemplate:b.children&&b.children.filterapply,filterIconTemplate:b.children&&b.children.filtericon,filterAddIconTemplate:b.children&&b.children.filteraddicon,filterRemoveIconTemplate:b.children&&b.children.filterremoveicon,filterClearIconTemplate:b.children&&b.children.filterclearicon,filters:n.filters,filtersStore:n.filtersStore,filterInputProps:n.filterInputProps,filterButtonProps:n.filterButtonProps,onFilterChange:e[16]||(e[16]=function(I){return t.$emit("filter-change",I)}),onFilterApply:e[17]||(e[17]=function(I){return t.$emit("filter-apply")}),filterMenuStyle:l.columnProp(b,"filterMenuStyle"),filterMenuClass:l.columnProp(b,"filterMenuClass"),showOperator:l.columnProp(b,"showFilterOperator"),showClearButton:l.columnProp(b,"showClearButton"),showApplyButton:l.columnProp(b,"showApplyButton"),showMatchModes:l.columnProp(b,"showFilterMatchModes"),showAddButton:l.columnProp(b,"showAddButton"),matchModeOptions:l.columnProp(b,"filterMatchModeOptions"),maxConstraints:l.columnProp(b,"maxConstraints"),onOperatorChange:e[18]||(e[18]=function(I){return t.$emit("operator-change",I)}),onMatchmodeChange:e[19]||(e[19]=function(I){return t.$emit("matchmode-change",I)}),onConstraintAdd:e[20]||(e[20]=function(I){return t.$emit("constraint-add",I)}),onConstraintRemove:e[21]||(e[21]=function(I){return t.$emit("constraint-remove",I)}),onApplyClick:e[22]||(e[22]=function(I){return t.$emit("apply-click",I)}),column:b,unstyled:t.unstyled,pt:t.pt},null,8,["field","type","showMenu","filterElement","filterHeaderTemplate","filterFooterTemplate","filterClearTemplate","filterApplyTemplate","filterIconTemplate","filterAddIconTemplate","filterRemoveIconTemplate","filterClearIconTemplate","filters","filtersStore","filterInputProps","filterButtonProps","filterMenuStyle","filterMenuClass","showOperator","showClearButton","showApplyButton","showMatchModes","showAddButton","matchModeOptions","maxConstraints","column","unstyled","pt"])):Sn("",!0)],16)):Sn("",!0)],64)}),128))],16)):Sn("",!0)],64))],16)}xV.render=Yfe;function I1(t){"@babel/helpers - typeof";return I1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I1(t)}var Jfe=["expanded"];function eAe(t,e){if(t==null)return{};var n,r,o=tAe(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(r=0;r<l.length;r++)n=l[r],e.includes(n)||{}.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function tAe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}function LD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Du(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LD(Object(n),!0).forEach(function(r){nAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nAe(t,e,n){return(e=rAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rAe(t){var e=iAe(t,"string");return I1(e)=="symbol"?e:e+""}function iAe(t,e){if(I1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(I1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function FD(t,e){return aAe(t)||sAe(t,e)||$4(t,e)||oAe()}function oAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sAe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,l,h,p=[],i=!0,b=!1;try{if(l=(n=n.call(t)).next,e!==0)for(;!(i=(r=l.call(n)).done)&&(p.push(r.value),p.length!==e);i=!0);}catch(E){b=!0,o=E}finally{try{if(!i&&n.return!=null&&(h=n.return(),Object(h)!==h))return}finally{if(b)throw o}}return p}}function aAe(t){if(Array.isArray(t))return t}function tv(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=$4(t))||e){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(b){throw b},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l,h=!0,p=!1;return{s:function(){n=n.call(t)},n:function(){var b=n.next();return h=b.done,b},e:function(b){p=!0,l=b},f:function(){try{h||n.return==null||n.return()}finally{if(p)throw l}}}}function Hs(t){return uAe(t)||cAe(t)||$4(t)||lAe()}function lAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $4(t,e){if(t){if(typeof t=="string")return gI(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gI(t,e):void 0}}function cAe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function uAe(t){if(Array.isArray(t))return gI(t)}function gI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var CV={name:"DataTable",extends:Yde,inheritAttrs:!1,emits:["value-change","update:first","update:rows","page","update:sortField","update:sortOrder","update:multiSortMeta","sort","filter","row-click","row-dblclick","update:selection","row-select","row-unselect","update:contextMenuSelection","row-contextmenu","row-unselect-all","row-select-all","select-all-change","column-resize-end","column-reorder","row-reorder","update:expandedRows","row-collapse","row-expand","update:expandedRowGroups","rowgroup-collapse","rowgroup-expand","update:filters","state-restore","state-save","cell-edit-init","cell-edit-complete","cell-edit-cancel","update:editingRows","row-edit-init","row-edit-save","row-edit-cancel"],provide:function(){return{$columns:this.d_columns,$columnGroups:this.d_columnGroups}},data:function(){return{d_first:this.first,d_rows:this.rows,d_sortField:this.sortField,d_sortOrder:this.sortOrder,d_nullSortOrder:this.nullSortOrder,d_multiSortMeta:this.multiSortMeta?Hs(this.multiSortMeta):[],d_groupRowsSortMeta:null,d_selectionKeys:null,d_columnOrder:null,d_editingRowKeys:null,d_editingMeta:{},d_filters:this.cloneFilters(this.filters),d_columns:new E_({type:"Column"}),d_columnGroups:new E_({type:"ColumnGroup"})}},rowTouched:!1,anchorRowIndex:null,rangeRowIndex:null,documentColumnResizeListener:null,documentColumnResizeEndListener:null,lastResizeHelperX:null,resizeColumnElement:null,columnResizing:!1,colReorderIconWidth:null,colReorderIconHeight:null,draggedColumn:null,draggedColumnElement:null,draggedRowIndex:null,droppedRowIndex:null,rowDragging:null,columnWidthsState:null,tableWidthState:null,columnWidthsRestored:!1,watch:{first:function(e){this.d_first=e},rows:function(e){this.d_rows=e},sortField:function(e){this.d_sortField=e},sortOrder:function(e){this.d_sortOrder=e},nullSortOrder:function(e){this.d_nullSortOrder=e},multiSortMeta:function(e){this.d_multiSortMeta=e},selection:{immediate:!0,handler:function(e){this.dataKey&&this.updateSelectionKeys(e)}},editingRows:{immediate:!0,handler:function(e){this.dataKey&&this.updateEditingRowKeys(e)}},filters:{deep:!0,handler:function(e){this.d_filters=this.cloneFilters(e)}}},mounted:function(){this.$el.setAttribute(this.attributeSelector,""),this.isStateful()&&(this.restoreState(),this.resizableColumns&&this.restoreColumnWidths()),this.editMode==="row"&&this.dataKey&&!this.d_editingRowKeys&&this.updateEditingRowKeys(this.editingRows)},beforeUnmount:function(){this.unbindColumnResizeEvents(),this.destroyStyleElement(),this.d_columns.clear(),this.d_columnGroups.clear()},updated:function(){this.isStateful()&&this.saveState(),this.editMode==="row"&&this.dataKey&&!this.d_editingRowKeys&&this.updateEditingRowKeys(this.editingRows)},methods:{columnProp:function(e,n){return Rg(e,n)},onPage:function(e){var n=this;this.clearEditingMetaData(),this.d_first=e.first,this.d_rows=e.rows;var r=this.createLazyLoadEvent(e);r.pageCount=e.pageCount,r.page=e.page,this.$emit("update:first",this.d_first),this.$emit("update:rows",this.d_rows),this.$emit("page",r),this.$nextTick(function(){n.$emit("value-change",n.processedData)})},onColumnHeaderClick:function(e){var n=this,r=e.originalEvent,o=e.column;if(this.columnProp(o,"sortable")){var l=r.target,h=this.columnProp(o,"sortField")||this.columnProp(o,"field");if(ml(l,"data-p-sortable-column")===!0||ml(l,"data-pc-section")==="columntitle"||ml(l,"data-pc-section")==="columnheadercontent"||ml(l,"data-pc-section")==="sorticon"||ml(l.parentElement,"data-pc-section")==="sorticon"||ml(l.parentElement.parentElement,"data-pc-section")==="sorticon"||l.closest('[data-p-sortable-column="true"]')&&!l.closest('[data-pc-section="columnfilterbutton"]')&&!w2(r.target)){if(Ox(),this.sortMode==="single")this.d_sortField===h?this.removableSort&&this.d_sortOrder*-1===this.defaultSortOrder?(this.d_sortOrder=null,this.d_sortField=null):this.d_sortOrder=this.d_sortOrder*-1:(this.d_sortOrder=this.defaultSortOrder,this.d_sortField=h),this.$emit("update:sortField",this.d_sortField),this.$emit("update:sortOrder",this.d_sortOrder),this.resetPage();else if(this.sortMode==="multiple"){var p=r.metaKey||r.ctrlKey;p||(this.d_multiSortMeta=this.d_multiSortMeta.filter(function(i){return i.field===h})),this.addMultiSortField(h),this.$emit("update:multiSortMeta",this.d_multiSortMeta)}this.$emit("sort",this.createLazyLoadEvent(r)),this.$nextTick(function(){n.$emit("value-change",n.processedData)})}}},sortSingle:function(e){var n=this;if(this.clearEditingMetaData(),this.groupRowsBy&&this.groupRowsBy===this.sortField)return this.d_multiSortMeta=[{field:this.sortField,order:this.sortOrder||this.defaultSortOrder},{field:this.d_sortField,order:this.d_sortOrder}],this.sortMultiple(e);var r=Hs(e),o=new Map,l=tv(r),h;try{for(l.s();!(h=l.n()).done;){var p=h.value;o.set(p,po(p,this.d_sortField))}}catch(b){l.e(b)}finally{l.f()}var i=kO();return r.sort(function(b,E){var I=o.get(b),O=o.get(E);return OO(I,O,n.d_sortOrder,i,n.d_nullSortOrder)}),r},sortMultiple:function(e){var n=this;if(this.clearEditingMetaData(),this.groupRowsBy&&(this.d_groupRowsSortMeta||this.d_multiSortMeta.length&&this.groupRowsBy===this.d_multiSortMeta[0].field)){var r=this.d_multiSortMeta[0];!this.d_groupRowsSortMeta&&(this.d_groupRowsSortMeta=r),r.field!==this.d_groupRowsSortMeta.field&&(this.d_multiSortMeta=[this.d_groupRowsSortMeta].concat(Hs(this.d_multiSortMeta)))}var o=Hs(e);return o.sort(function(l,h){return n.multisortField(l,h,0)}),o},multisortField:function(e,n,r){var o=po(e,this.d_multiSortMeta[r].field),l=po(n,this.d_multiSortMeta[r].field),h=kO();return o===l?this.d_multiSortMeta.length-1>r?this.multisortField(e,n,r+1):0:OO(o,l,this.d_multiSortMeta[r].order,h,this.d_nullSortOrder)},addMultiSortField:function(e){var n=this.d_multiSortMeta.findIndex(function(r){return r.field===e});n>=0?this.removableSort&&this.d_multiSortMeta[n].order*-1===this.defaultSortOrder?this.d_multiSortMeta.splice(n,1):this.d_multiSortMeta[n]={field:e,order:this.d_multiSortMeta[n].order*-1}:this.d_multiSortMeta.push({field:e,order:this.defaultSortOrder}),this.d_multiSortMeta=Hs(this.d_multiSortMeta)},getActiveFilters:function(e){var n=function(h){var p=FD(h,2),i=p[0],b=p[1];if(b.constraints){var E=b.constraints.filter(function(I){return I.value!==null});if(E.length>0)return[i,Du(Du({},b),{},{constraints:E})]}else if(b.value!==null)return[i,b]},r=function(h){return h!==void 0},o=Object.entries(e).map(n).filter(r);return Object.fromEntries(o)},filter:function(e){var n=this;if(e){this.clearEditingMetaData();var r=this.getActiveFilters(this.filters),o;r.global&&(o=this.globalFilterFields||this.columns.map(function(Pe){return n.columnProp(Pe,"filterField")||n.columnProp(Pe,"field")}));for(var l=[],h=0;h<e.length;h++){var p=!0,i=!1,b=!1;for(var E in r)if(Object.prototype.hasOwnProperty.call(r,E)&&E!=="global"){b=!0;var I=E,O=r[I];if(O.operator){var M=tv(O.constraints),G;try{for(M.s();!(G=M.n()).done;){var q=G.value;if(p=this.executeLocalFilter(I,e[h],q),O.operator===wC.OR&&p||O.operator===wC.AND&&!p)break}}catch(Pe){M.e(Pe)}finally{M.f()}}else p=this.executeLocalFilter(I,e[h],O);if(!p)break}if(p&&r.global&&!i&&o)for(var Z=0;Z<o.length;Z++){var Y=o[Z];if(i=oI.filters[r.global.matchMode||pl.CONTAINS](po(e[h],Y),r.global.value,this.filterLocale),i)break}var te=void 0;r.global?te=b?b&&p&&i:i:te=b&&p,te&&l.push(e[h])}(l.length===this.value.length||Object.keys(r).length==0)&&(l=e);var be=this.createLazyLoadEvent();return be.filteredValue=l,this.$emit("filter",be),this.$nextTick(function(){n.$emit("value-change",n.processedData)}),l}},executeLocalFilter:function(e,n,r){var o=r.value,l=r.matchMode||pl.STARTS_WITH,h=po(n,e),p=oI.filters[l];return p(h,o,this.filterLocale)},onRowClick:function(e){var n=e.originalEvent,r=this.$refs.bodyRef&&this.$refs.bodyRef.$el,o=kp(r,'tr[data-p-selectable-row="true"][tabindex="0"]');if(!w2(n.target)){if(this.$emit("row-click",e),this.selectionMode){var l=e.data,h=this.d_first+e.index;if(this.isMultipleSelectionMode()&&n.shiftKey&&this.anchorRowIndex!=null)Ox(),this.rangeRowIndex=h,this.selectRange(n);else{var p=this.isSelected(l),i=this.rowTouched?!1:this.metaKeySelection;if(this.anchorRowIndex=h,this.rangeRowIndex=h,i){var b=n.metaKey||n.ctrlKey;if(p&&b){if(this.isSingleSelectionMode())this.$emit("update:selection",null);else{var E=this.findIndexInSelection(l),I=this.selection.filter(function(Pe,Se){return Se!=E});this.$emit("update:selection",I)}this.$emit("row-unselect",{originalEvent:n,data:l,index:h,type:"row"})}else{if(this.isSingleSelectionMode())this.$emit("update:selection",l);else if(this.isMultipleSelectionMode()){var O=b?this.selection||[]:[];O=[].concat(Hs(O),[l]),this.$emit("update:selection",O)}this.$emit("row-select",{originalEvent:n,data:l,index:h,type:"row"})}}else if(this.selectionMode==="single")p?(this.$emit("update:selection",null),this.$emit("row-unselect",{originalEvent:n,data:l,index:h,type:"row"})):(this.$emit("update:selection",l),this.$emit("row-select",{originalEvent:n,data:l,index:h,type:"row"}));else if(this.selectionMode==="multiple")if(p){var M=this.findIndexInSelection(l),G=this.selection.filter(function(Pe,Se){return Se!=M});this.$emit("update:selection",G),this.$emit("row-unselect",{originalEvent:n,data:l,index:h,type:"row"})}else{var q=this.selection?[].concat(Hs(this.selection),[l]):[l];this.$emit("update:selection",q),this.$emit("row-select",{originalEvent:n,data:l,index:h,type:"row"})}}}if(this.rowTouched=!1,o){var Z,Y,te;if(((Z=n.target)===null||Z===void 0?void 0:Z.getAttribute("data-pc-section"))==="rowtoggleicon"||((Y=n.target)===null||Y===void 0||(Y=Y.parentElement)===null||Y===void 0?void 0:Y.getAttribute("data-pc-section"))==="rowtoggleicon")return;var be=(te=n.target)===null||te===void 0?void 0:te.closest('tr[data-p-selectable-row="true"]');o.tabIndex="-1",be.tabIndex="0"}}},onRowDblClick:function(e){var n=e.originalEvent;w2(n.target)||this.$emit("row-dblclick",e)},onRowRightClick:function(e){this.contextMenu&&(Ox(),e.originalEvent.target.focus()),this.$emit("update:contextMenuSelection",e.data),this.$emit("row-contextmenu",e)},onRowTouchEnd:function(){this.rowTouched=!0},onRowKeyDown:function(e,n){var r=e.originalEvent,o=e.data,l=e.index,h=r.metaKey||r.ctrlKey;if(this.selectionMode){var p=r.target;switch(r.code){case"ArrowDown":this.onArrowDownKey(r,p,l,n);break;case"ArrowUp":this.onArrowUpKey(r,p,l,n);break;case"Home":this.onHomeKey(r,p,l,n);break;case"End":this.onEndKey(r,p,l,n);break;case"Enter":case"NumpadEnter":this.onEnterKey(r,o,l);break;case"Space":this.onSpaceKey(r,o,l,n);break;case"Tab":this.onTabKey(r,l);break;default:if(r.code==="KeyA"&&h&&this.isMultipleSelectionMode()){var i=this.dataToRender(n.rows);this.$emit("update:selection",i)}r.preventDefault();break}}},onArrowDownKey:function(e,n,r,o){var l=this.findNextSelectableRow(n);if(l&&this.focusRowChange(n,l),e.shiftKey){var h=this.dataToRender(o.rows),p=r+1>=h.length?h.length-1:r+1;this.onRowClick({originalEvent:e,data:h[p],index:p})}e.preventDefault()},onArrowUpKey:function(e,n,r,o){var l=this.findPrevSelectableRow(n);if(l&&this.focusRowChange(n,l),e.shiftKey){var h=this.dataToRender(o.rows),p=r-1<=0?0:r-1;this.onRowClick({originalEvent:e,data:h[p],index:p})}e.preventDefault()},onHomeKey:function(e,n,r,o){var l=this.findFirstSelectableRow();if(l&&this.focusRowChange(n,l),e.ctrlKey&&e.shiftKey){var h=this.dataToRender(o.rows);this.$emit("update:selection",h.slice(0,r+1))}e.preventDefault()},onEndKey:function(e,n,r,o){var l=this.findLastSelectableRow();if(l&&this.focusRowChange(n,l),e.ctrlKey&&e.shiftKey){var h=this.dataToRender(o.rows);this.$emit("update:selection",h.slice(r,h.length))}e.preventDefault()},onEnterKey:function(e,n,r){this.onRowClick({originalEvent:e,data:n,index:r}),e.preventDefault()},onSpaceKey:function(e,n,r,o){if(this.onEnterKey(e,n,r),e.shiftKey&&this.selection!==null){var l=this.dataToRender(o.rows),h;if(this.selection.length>0){var p,i;p=_2(this.selection[0],l),i=_2(this.selection[this.selection.length-1],l),h=r<=p?i:p}else h=_2(this.selection,l);var b=h!==r?l.slice(Math.min(h,r),Math.max(h,r)+1):n;this.$emit("update:selection",b)}},onTabKey:function(e,n){var r=this.$refs.bodyRef&&this.$refs.bodyRef.$el,o=Fy(r,'tr[data-p-selectable-row="true"]');if(e.code==="Tab"&&o&&o.length>0){var l=kp(r,'tr[data-p-selected="true"]'),h=kp(r,'tr[data-p-selectable-row="true"][tabindex="0"]');l?(l.tabIndex="0",h&&h!==l&&(h.tabIndex="-1")):(o[0].tabIndex="0",h!==o[0]&&(o[n].tabIndex="-1"))}},findNextSelectableRow:function(e){var n=e.nextElementSibling;return n?ml(n,"data-p-selectable-row")===!0?n:this.findNextSelectableRow(n):null},findPrevSelectableRow:function(e){var n=e.previousElementSibling;return n?ml(n,"data-p-selectable-row")===!0?n:this.findPrevSelectableRow(n):null},findFirstSelectableRow:function(){var e=kp(this.$refs.table,'tr[data-p-selectable-row="true"]');return e},findLastSelectableRow:function(){var e=Fy(this.$refs.table,'tr[data-p-selectable-row="true"]');return e?e[e.length-1]:null},focusRowChange:function(e,n){e.tabIndex="-1",n.tabIndex="0",au(n)},toggleRowWithRadio:function(e){var n=e.data;this.isSelected(n)?(this.$emit("update:selection",null),this.$emit("row-unselect",{originalEvent:e.originalEvent,data:n,index:e.index,type:"radiobutton"})):(this.$emit("update:selection",n),this.$emit("row-select",{originalEvent:e.originalEvent,data:n,index:e.index,type:"radiobutton"}))},toggleRowWithCheckbox:function(e){var n=e.data;if(this.isSelected(n)){var r=this.findIndexInSelection(n),o=this.selection.filter(function(h,p){return p!=r});this.$emit("update:selection",o),this.$emit("row-unselect",{originalEvent:e.originalEvent,data:n,index:e.index,type:"checkbox"})}else{var l=this.selection?Hs(this.selection):[];l=[].concat(Hs(l),[n]),this.$emit("update:selection",l),this.$emit("row-select",{originalEvent:e.originalEvent,data:n,index:e.index,type:"checkbox"})}},toggleRowsWithCheckbox:function(e){if(this.selectAll!==null)this.$emit("select-all-change",e);else{var n=e.originalEvent,r=e.checked,o=[];r?(o=this.frozenValue?[].concat(Hs(this.frozenValue),Hs(this.processedData)):this.processedData,this.$emit("row-select-all",{originalEvent:n,data:o})):this.$emit("row-unselect-all",{originalEvent:n}),this.$emit("update:selection",o)}},isSingleSelectionMode:function(){return this.selectionMode==="single"},isMultipleSelectionMode:function(){return this.selectionMode==="multiple"},isSelected:function(e){return e&&this.selection?this.dataKey?this.d_selectionKeys?this.d_selectionKeys[po(e,this.dataKey)]!==void 0:!1:this.selection instanceof Array?this.findIndexInSelection(e)>-1:this.equals(e,this.selection):!1},findIndexInSelection:function(e){return this.findIndex(e,this.selection)},findIndex:function(e,n){var r=-1;if(n&&n.length){for(var o=0;o<n.length;o++)if(this.equals(e,n[o])){r=o;break}}return r},updateSelectionKeys:function(e){if(this.d_selectionKeys={},Array.isArray(e)){var n=tv(e),r;try{for(n.s();!(r=n.n()).done;){var o=r.value;this.d_selectionKeys[String(po(o,this.dataKey))]=1}}catch(l){n.e(l)}finally{n.f()}}else this.d_selectionKeys[String(po(e,this.dataKey))]=1},updateEditingRowKeys:function(e){if(e&&e.length){this.d_editingRowKeys={};var n=tv(e),r;try{for(n.s();!(r=n.n()).done;){var o=r.value;this.d_editingRowKeys[String(po(o,this.dataKey))]=1}}catch(l){n.e(l)}finally{n.f()}}else this.d_editingRowKeys=null},equals:function(e,n){return this.compareSelectionBy==="equals"?e===n:Fg(e,n,this.dataKey)},selectRange:function(e){var n,r;this.rangeRowIndex>this.anchorRowIndex?(n=this.anchorRowIndex,r=this.rangeRowIndex):this.rangeRowIndex<this.anchorRowIndex?(n=this.rangeRowIndex,r=this.anchorRowIndex):(n=this.rangeRowIndex,r=this.rangeRowIndex),this.lazy&&this.paginator&&(n-=this.first,r-=this.first);for(var o=this.processedData,l=[],h=n;h<=r;h++){var p=o[h];l.push(p),this.$emit("row-select",{originalEvent:e,data:p,type:"row"})}this.$emit("update:selection",l)},exportCSV:function(e,n){var r=this,o="\uFEFF";n||(n=this.processedData,e&&e.selectionOnly?n=this.selection||[]:this.frozenValue&&(n=n?[].concat(Hs(this.frozenValue),Hs(n)):this.frozenValue));for(var l=!1,h=0;h<this.columns.length;h++){var p=this.columns[h];this.columnProp(p,"exportable")!==!1&&this.columnProp(p,"field")&&(l?o+=this.csvSeparator:l=!0,o+='"'+(this.columnProp(p,"exportHeader")||this.columnProp(p,"header")||this.columnProp(p,"field"))+'"')}n&&n.forEach(function(I){o+=`
`;for(var O=!1,M=0;M<r.columns.length;M++){var G=r.columns[M];if(r.columnProp(G,"exportable")!==!1&&r.columnProp(G,"field")){O?o+=r.csvSeparator:O=!0;var q=po(I,r.columnProp(G,"field"));q!=null?r.exportFunction?q=r.exportFunction({data:q,field:r.columnProp(G,"field")}):q=String(q).replace(/"/g,'""'):q="",o+='"'+q+'"'}}});for(var i=!1,b=0;b<this.columns.length;b++){var E=this.columns[b];b===0&&(o+=`
`),this.columnProp(E,"exportable")!==!1&&this.columnProp(E,"exportFooter")&&(i?o+=this.csvSeparator:i=!0,o+='"'+(this.columnProp(E,"exportFooter")||this.columnProp(E,"footer")||this.columnProp(E,"field"))+'"')}jae(o,this.exportFilename)},resetPage:function(){this.d_first=0,this.$emit("update:first",this.d_first)},onColumnResizeStart:function(e){var n=Ry(this.$el).left;this.resizeColumnElement=e.target.parentElement,this.columnResizing=!0,this.lastResizeHelperX=e.pageX-n+this.$el.scrollLeft,this.bindColumnResizeEvents()},onColumnResize:function(e){var n=Ry(this.$el).left;this.$el.setAttribute("data-p-unselectable-text","true"),!this.isUnstyled&&CC(this.$el,{"user-select":"none"}),this.$refs.resizeHelper.style.height=this.$el.offsetHeight+"px",this.$refs.resizeHelper.style.top="0px",this.$refs.resizeHelper.style.left=e.pageX-n+this.$el.scrollLeft+"px",this.$refs.resizeHelper.style.display="block"},onColumnResizeEnd:function(){var e=this.$refs.resizeHelper.offsetLeft-this.lastResizeHelperX,n=this.resizeColumnElement.offsetWidth,r=n+e,o=this.resizeColumnElement.style.minWidth||15;if(n+e>parseInt(o,10)){if(this.columnResizeMode==="fit"){var l=this.resizeColumnElement.nextElementSibling,h=l.offsetWidth-e;r>15&&h>15&&this.resizeTableCells(r,h)}else if(this.columnResizeMode==="expand"){var p=this.$refs.table.offsetWidth+e+"px",i=function(O){O&&(O.style.width=O.style.minWidth=p)};if(this.resizeTableCells(r),i(this.$refs.table),!this.virtualScrollerDisabled){var b=this.$refs.bodyRef&&this.$refs.bodyRef.$el,E=this.$refs.frozenBodyRef&&this.$refs.frozenBodyRef.$el;i(b),i(E)}}this.$emit("column-resize-end",{element:this.resizeColumnElement,delta:e})}this.$refs.resizeHelper.style.display="none",this.resizeColumn=null,this.$el.removeAttribute("data-p-unselectable-text"),!this.isUnstyled&&(this.$el.style["user-select"]=""),this.unbindColumnResizeEvents(),this.isStateful()&&this.saveState()},resizeTableCells:function(e,n){var r=Dx(this.resizeColumnElement),o=[],l=Fy(this.$refs.table,'thead[data-pc-section="thead"] > tr > th');l.forEach(function(i){return o.push(Sh(i))}),this.destroyStyleElement(),this.createStyleElement();var h="",p='[data-pc-name="datatable"]['.concat(this.attributeSelector,'] > [data-pc-section="tablecontainer"] ').concat(this.virtualScrollerDisabled?"":'> [data-pc-name="virtualscroller"]',' > table[data-pc-section="table"]');o.forEach(function(i,b){var E=b===r?e:n&&b===r+1?n:i,I="width: ".concat(E,"px !important; max-width: ").concat(E,"px !important");h+=`
                    `.concat(p,' > thead[data-pc-section="thead"] > tr > th:nth-child(').concat(b+1,`),
                    `).concat(p,' > tbody[data-pc-section="tbody"] > tr > td:nth-child(').concat(b+1,`),
                    `).concat(p,' > tfoot[data-pc-section="tfoot"] > tr > td:nth-child(').concat(b+1,`) {
                        `).concat(I,`
                    }
                `)}),this.styleElement.innerHTML=h},bindColumnResizeEvents:function(){var e=this;this.documentColumnResizeListener||(this.documentColumnResizeListener=document.addEventListener("mousemove",function(){e.columnResizing&&e.onColumnResize(event)})),this.documentColumnResizeEndListener||(this.documentColumnResizeEndListener=document.addEventListener("mouseup",function(){e.columnResizing&&(e.columnResizing=!1,e.onColumnResizeEnd())}))},unbindColumnResizeEvents:function(){this.documentColumnResizeListener&&(document.removeEventListener("document",this.documentColumnResizeListener),this.documentColumnResizeListener=null),this.documentColumnResizeEndListener&&(document.removeEventListener("document",this.documentColumnResizeEndListener),this.documentColumnResizeEndListener=null)},onColumnHeaderMouseDown:function(e){var n=e.originalEvent,r=e.column;this.reorderableColumns&&this.columnProp(r,"reorderableColumn")!==!1&&(n.target.nodeName==="INPUT"||n.target.nodeName==="TEXTAREA"||ml(n.target,'[data-pc-section="columnresizer"]')?n.currentTarget.draggable=!1:n.currentTarget.draggable=!0)},onColumnHeaderDragStart:function(e){var n=e.originalEvent,r=e.column;if(this.columnResizing){n.preventDefault();return}this.colReorderIconWidth=qae(this.$refs.reorderIndicatorUp),this.colReorderIconHeight=Kae(this.$refs.reorderIndicatorUp),this.draggedColumn=r,this.draggedColumnElement=this.findParentHeader(n.target),n.dataTransfer.setData("text","b")},onColumnHeaderDragOver:function(e){var n=e.originalEvent,r=e.column,o=this.findParentHeader(n.target);if(this.reorderableColumns&&this.draggedColumnElement&&o&&!this.columnProp(r,"frozen")){n.preventDefault();var l=Ry(this.$el),h=Ry(o);if(this.draggedColumnElement!==o){var p=h.left-l.left,i=h.left+o.offsetWidth/2;this.$refs.reorderIndicatorUp.style.top=h.top-l.top-(this.colReorderIconHeight-1)+"px",this.$refs.reorderIndicatorDown.style.top=h.top-l.top+o.offsetHeight+"px",n.pageX>i?(this.$refs.reorderIndicatorUp.style.left=p+o.offsetWidth-Math.ceil(this.colReorderIconWidth/2)+"px",this.$refs.reorderIndicatorDown.style.left=p+o.offsetWidth-Math.ceil(this.colReorderIconWidth/2)+"px",this.dropPosition=1):(this.$refs.reorderIndicatorUp.style.left=p-Math.ceil(this.colReorderIconWidth/2)+"px",this.$refs.reorderIndicatorDown.style.left=p-Math.ceil(this.colReorderIconWidth/2)+"px",this.dropPosition=-1),this.$refs.reorderIndicatorUp.style.display="block",this.$refs.reorderIndicatorDown.style.display="block"}}},onColumnHeaderDragLeave:function(e){var n=e.originalEvent;this.reorderableColumns&&this.draggedColumnElement&&(n.preventDefault(),this.$refs.reorderIndicatorUp.style.display="none",this.$refs.reorderIndicatorDown.style.display="none")},onColumnHeaderDrop:function(e){var n=this,r=e.originalEvent,o=e.column;if(r.preventDefault(),this.draggedColumnElement){var l=Dx(this.draggedColumnElement),h=Dx(this.findParentHeader(r.target)),p=l!==h;if(p&&(h-l===1&&this.dropPosition===-1||h-l===-1&&this.dropPosition===1)&&(p=!1),p){var i=function(Y,te){return n.columnProp(Y,"columnKey")||n.columnProp(te,"columnKey")?n.columnProp(Y,"columnKey")===n.columnProp(te,"columnKey"):n.columnProp(Y,"field")===n.columnProp(te,"field")},b=this.columns.findIndex(function(Z){return i(Z,n.draggedColumn)}),E=this.columns.findIndex(function(Z){return i(Z,o)}),I=[],O=Fy(this.$el,'thead[data-pc-section="thead"] > tr > th');O.forEach(function(Z){return I.push(Sh(Z))});var M=I.find(function(Z,Y){return Y===b}),G=I.filter(function(Z,Y){return Y!==b}),q=[].concat(Hs(G.slice(0,E)),[M],Hs(G.slice(E)));this.addColumnWidthStyles(q),E<b&&this.dropPosition===1&&E++,E>b&&this.dropPosition===-1&&E--,MO(this.columns,b,E),this.updateReorderableColumns(),this.$emit("column-reorder",{originalEvent:r,dragIndex:b,dropIndex:E})}this.$refs.reorderIndicatorUp.style.display="none",this.$refs.reorderIndicatorDown.style.display="none",this.draggedColumnElement.draggable=!1,this.draggedColumnElement=null,this.draggedColumn=null,this.dropPosition=null}},findParentHeader:function(e){if(e.nodeName==="TH")return e;for(var n=e.parentElement;n.nodeName!=="TH"&&(n=n.parentElement,!!n););return n},findColumnByKey:function(e,n){if(e&&e.length)for(var r=0;r<e.length;r++){var o=e[r];if(this.columnProp(o,"columnKey")===n||this.columnProp(o,"field")===n)return o}return null},onRowMouseDown:function(e){ml(e.target,"data-pc-section")==="reorderablerowhandle"||ml(e.target.parentElement,"data-pc-section")==="reorderablerowhandle"?e.currentTarget.draggable=!0:e.currentTarget.draggable=!1},onRowDragStart:function(e){var n=e.originalEvent,r=e.index;this.rowDragging=!0,this.draggedRowIndex=r,n.dataTransfer.setData("text","b")},onRowDragOver:function(e){var n=e.originalEvent,r=e.index;if(this.rowDragging&&this.draggedRowIndex!==r){var o=n.currentTarget,l=Ry(o).top+x7(),h=n.pageY,p=l+BC(o)/2,i=o.previousElementSibling;h<p?(o.setAttribute("data-p-datatable-dragpoint-bottom","false"),!this.isUnstyled&&Sp(o,"p-datatable-dragpoint-bottom"),this.droppedRowIndex=r,i?(i.setAttribute("data-p-datatable-dragpoint-bottom","true"),!this.isUnstyled&&mv(i,"p-datatable-dragpoint-bottom")):(o.setAttribute("data-p-datatable-dragpoint-top","true"),!this.isUnstyled&&mv(o,"p-datatable-dragpoint-top"))):(i?(i.setAttribute("data-p-datatable-dragpoint-bottom","false"),!this.isUnstyled&&Sp(i,"p-datatable-dragpoint-bottom")):(o.setAttribute("data-p-datatable-dragpoint-top","true"),!this.isUnstyled&&mv(o,"p-datatable-dragpoint-top")),this.droppedRowIndex=r+1,o.setAttribute("data-p-datatable-dragpoint-bottom","true"),!this.isUnstyled&&mv(o,"p-datatable-dragpoint-bottom")),n.preventDefault()}},onRowDragLeave:function(e){var n=e.currentTarget,r=n.previousElementSibling;r&&(r.setAttribute("data-p-datatable-dragpoint-bottom","false"),!this.isUnstyled&&Sp(r,"p-datatable-dragpoint-bottom")),n.setAttribute("data-p-datatable-dragpoint-bottom","false"),!this.isUnstyled&&Sp(n,"p-datatable-dragpoint-bottom"),n.setAttribute("data-p-datatable-dragpoint-top","false"),!this.isUnstyled&&Sp(n,"p-datatable-dragpoint-top")},onRowDragEnd:function(e){this.rowDragging=!1,this.draggedRowIndex=null,this.droppedRowIndex=null,e.currentTarget.draggable=!1},onRowDrop:function(e){if(this.droppedRowIndex!=null){var n=this.draggedRowIndex>this.droppedRowIndex?this.droppedRowIndex:this.droppedRowIndex===0?0:this.droppedRowIndex-1,r=Hs(this.processedData);MO(r,this.draggedRowIndex+this.d_first,n+this.d_first),this.$emit("row-reorder",{originalEvent:e,dragIndex:this.draggedRowIndex,dropIndex:n,value:r})}this.onRowDragLeave(e),this.onRowDragEnd(e),e.preventDefault()},toggleRow:function(e){var n=this,r=e.expanded,o=eAe(e,Jfe),l=e.data,h;if(this.dataKey){var p=po(l,this.dataKey);h=this.expandedRows?Du({},this.expandedRows):{},r?h[p]=!0:delete h[p]}else h=this.expandedRows?Hs(this.expandedRows):[],r?h.push(l):h=h.filter(function(i){return!n.equals(l,i)});this.$emit("update:expandedRows",h),r?this.$emit("row-expand",o):this.$emit("row-collapse",o)},toggleRowGroup:function(e){var n=e.originalEvent,r=e.data,o=po(r,this.groupRowsBy),l=this.expandedRowGroups?Hs(this.expandedRowGroups):[];this.isRowGroupExpanded(r)?(l=l.filter(function(h){return h!==o}),this.$emit("update:expandedRowGroups",l),this.$emit("rowgroup-collapse",{originalEvent:n,data:o})):(l.push(o),this.$emit("update:expandedRowGroups",l),this.$emit("rowgroup-expand",{originalEvent:n,data:o}))},isRowGroupExpanded:function(e){if(this.expandableRowGroups&&this.expandedRowGroups){var n=po(e,this.groupRowsBy);return this.expandedRowGroups.indexOf(n)>-1}return!1},isStateful:function(){return this.stateKey!=null},getStorage:function(){switch(this.stateStorage){case"local":return window.localStorage;case"session":return window.sessionStorage;default:throw new Error(this.stateStorage+' is not a valid value for the state storage, supported values are "local" and "session".')}},saveState:function(){var e=this.getStorage(),n={};this.paginator&&(n.first=this.d_first,n.rows=this.d_rows),this.d_sortField&&(n.sortField=this.d_sortField,n.sortOrder=this.d_sortOrder),this.d_multiSortMeta&&(n.multiSortMeta=this.d_multiSortMeta),this.hasFilters&&(n.filters=this.filters),this.resizableColumns&&this.saveColumnWidths(n),this.reorderableColumns&&(n.columnOrder=this.d_columnOrder),this.expandedRows&&(n.expandedRows=this.expandedRows),this.expandedRowGroups&&(n.expandedRowGroups=this.expandedRowGroups),this.selection&&(n.selection=this.selection,n.selectionKeys=this.d_selectionKeys),Object.keys(n).length&&e.setItem(this.stateKey,JSON.stringify(n)),this.$emit("state-save",n)},restoreState:function(){var e=this.getStorage(),n=e.getItem(this.stateKey),r=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/,o=function(p,i){return typeof i=="string"&&r.test(i)?new Date(i):i};if(n){var l=JSON.parse(n,o);this.paginator&&(this.d_first=l.first,this.d_rows=l.rows),l.sortField&&(this.d_sortField=l.sortField,this.d_sortOrder=l.sortOrder),l.multiSortMeta&&(this.d_multiSortMeta=l.multiSortMeta),l.filters&&this.$emit("update:filters",l.filters),this.resizableColumns&&(this.columnWidthsState=l.columnWidths,this.tableWidthState=l.tableWidth),this.reorderableColumns&&(this.d_columnOrder=l.columnOrder),l.expandedRows&&this.$emit("update:expandedRows",l.expandedRows),l.expandedRowGroups&&this.$emit("update:expandedRowGroups",l.expandedRowGroups),l.selection&&(this.d_selectionKeys=l.d_selectionKeys,this.$emit("update:selection",l.selection)),this.$emit("state-restore",l)}},saveColumnWidths:function(e){var n=[],r=Fy(this.$el,'thead[data-pc-section="thead"] > tr > th');r.forEach(function(o){return n.push(Sh(o))}),e.columnWidths=n.join(","),this.columnResizeMode==="expand"&&(e.tableWidth=Sh(this.$refs.table)+"px")},addColumnWidthStyles:function(e){this.createStyleElement();var n="",r='[data-pc-name="datatable"]['.concat(this.attributeSelector,'] > [data-pc-section="tablecontainer"] ').concat(this.virtualScrollerDisabled?"":'> [data-pc-name="virtualscroller"]',' > table[data-pc-section="table"]');e.forEach(function(o,l){var h="width: ".concat(o,"px !important; max-width: ").concat(o,"px !important");n+=`
        `.concat(r,' > thead[data-pc-section="thead"] > tr > th:nth-child(').concat(l+1,`),
        `).concat(r,' > tbody[data-pc-section="tbody"] > tr > td:nth-child(').concat(l+1,`),
        `).concat(r,' > tfoot[data-pc-section="tfoot"] > tr > td:nth-child(').concat(l+1,`) {
            `).concat(h,`
        }
    `)}),this.styleElement.innerHTML=n},restoreColumnWidths:function(){if(this.columnWidthsState){var e=this.columnWidthsState.split(",");this.columnResizeMode==="expand"&&this.tableWidthState&&(this.$refs.table.style.width=this.tableWidthState,this.$refs.table.style.minWidth=this.tableWidthState),Lo(e)&&this.addColumnWidthStyles(e)}},onCellEditInit:function(e){this.$emit("cell-edit-init",e)},onCellEditComplete:function(e){this.$emit("cell-edit-complete",e)},onCellEditCancel:function(e){this.$emit("cell-edit-cancel",e)},onRowEditInit:function(e){var n=this.editingRows?Hs(this.editingRows):[];n.push(e.data),this.$emit("update:editingRows",n),this.$emit("row-edit-init",e)},onRowEditSave:function(e){var n=Hs(this.editingRows);n.splice(this.findIndex(e.data,n),1),this.$emit("update:editingRows",n),this.$emit("row-edit-save",e)},onRowEditCancel:function(e){var n=Hs(this.editingRows);n.splice(this.findIndex(e.data,n),1),this.$emit("update:editingRows",n),this.$emit("row-edit-cancel",e)},onEditingMetaChange:function(e){var n=e.data,r=e.field,o=e.index,l=e.editing,h=Du({},this.d_editingMeta),p=h[o];if(l)!p&&(p=h[o]={data:Du({},n),fields:[]}),p.fields.push(r);else if(p){var i=p.fields.filter(function(b){return b!==r});i.length?p.fields=i:delete h[o]}this.d_editingMeta=h},clearEditingMetaData:function(){this.editMode&&(this.d_editingMeta={})},createLazyLoadEvent:function(e){return{originalEvent:e,first:this.d_first,rows:this.d_rows,sortField:this.d_sortField,sortOrder:this.d_sortOrder,multiSortMeta:this.d_multiSortMeta,filters:this.d_filters}},hasGlobalFilter:function(){return this.filters&&Object.prototype.hasOwnProperty.call(this.filters,"global")},onFilterChange:function(e){this.d_filters=e},onFilterApply:function(){this.d_first=0,this.$emit("update:first",this.d_first),this.$emit("update:filters",this.d_filters),this.lazy&&this.$emit("filter",this.createLazyLoadEvent())},cloneFilters:function(){var e={};return this.filters&&Object.entries(this.filters).forEach(function(n){var r=FD(n,2),o=r[0],l=r[1];e[o]=l.operator?{operator:l.operator,constraints:l.constraints.map(function(h){return Du({},h)})}:Du({},l)}),e},updateReorderableColumns:function(){var e=this,n=[];this.columns.forEach(function(r){return n.push(e.columnProp(r,"columnKey")||e.columnProp(r,"field"))}),this.d_columnOrder=n},createStyleElement:function(){var e;this.styleElement=document.createElement("style"),this.styleElement.type="text/css",k4(this.styleElement,"nonce",(e=this.$primevue)===null||e===void 0||(e=e.config)===null||e===void 0||(e=e.csp)===null||e===void 0?void 0:e.nonce),document.head.appendChild(this.styleElement)},destroyStyleElement:function(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)},dataToRender:function(e){var n=e||this.processedData;if(n&&this.paginator){var r=this.lazy?0:this.d_first;return n.slice(r,r+this.d_rows)}return n},getVirtualScrollerRef:function(){return this.$refs.virtualScroller},hasSpacerStyle:function(e){return Lo(e)}},computed:{columns:function(){var e=this.d_columns.get(this);if(this.reorderableColumns&&this.d_columnOrder){var n=[],r=tv(this.d_columnOrder),o;try{for(r.s();!(o=r.n()).done;){var l=o.value,h=this.findColumnByKey(e,l);h&&!this.columnProp(h,"hidden")&&n.push(h)}}catch(p){r.e(p)}finally{r.f()}return[].concat(n,Hs(e.filter(function(p){return n.indexOf(p)<0})))}return e},columnGroups:function(){return this.d_columnGroups.get(this)},headerColumnGroup:function(){var e,n=this;return(e=this.columnGroups)===null||e===void 0?void 0:e.find(function(r){return n.columnProp(r,"type")==="header"})},footerColumnGroup:function(){var e,n=this;return(e=this.columnGroups)===null||e===void 0?void 0:e.find(function(r){return n.columnProp(r,"type")==="footer"})},hasFilters:function(){return this.filters&&Object.keys(this.filters).length>0&&this.filters.constructor===Object},processedData:function(){var e,n=this.value||[];return!this.lazy&&!((e=this.virtualScrollerOptions)!==null&&e!==void 0&&e.lazy)&&n&&n.length&&(this.hasFilters&&(n=this.filter(n)),this.sorted&&(this.sortMode==="single"?n=this.sortSingle(n):this.sortMode==="multiple"&&(n=this.sortMultiple(n)))),n},totalRecordsLength:function(){if(this.lazy)return this.totalRecords;var e=this.processedData;return e?e.length:0},empty:function(){var e=this.processedData;return!e||e.length===0},paginatorTop:function(){return this.paginator&&(this.paginatorPosition!=="bottom"||this.paginatorPosition==="both")},paginatorBottom:function(){return this.paginator&&(this.paginatorPosition!=="top"||this.paginatorPosition==="both")},sorted:function(){return this.d_sortField||this.d_multiSortMeta&&this.d_multiSortMeta.length>0},allRowsSelected:function(){var e=this;if(this.selectAll!==null)return this.selectAll;var n=this.frozenValue?[].concat(Hs(this.frozenValue),Hs(this.processedData)):this.processedData;return Lo(n)&&this.selection&&Array.isArray(this.selection)&&n.every(function(r){return e.selection.some(function(o){return e.equals(o,r)})})},attributeSelector:function(){return Af()},groupRowSortField:function(){return this.sortMode==="single"?this.sortField:this.d_groupRowsSortMeta?this.d_groupRowsSortMeta.field:null},headerFilterButtonProps:function(){return Du(Du({filter:{severity:"secondary",text:!0,rounded:!0}},this.filterButtonProps),{},{inline:Du({clear:{severity:"secondary",text:!0,rounded:!0}},this.filterButtonProps.inline),popover:Du({addRule:{severity:"info",text:!0,size:"small"},removeRule:{severity:"danger",text:!0,size:"small"},apply:{size:"small"},clear:{outlined:!0,size:"small"}},this.filterButtonProps.popover)})},rowEditButtonProps:function(){return Du(Du({},{init:{severity:"secondary",text:!0,rounded:!0},save:{severity:"secondary",text:!0,rounded:!0},cancel:{severity:"secondary",text:!0,rounded:!0}}),this.editButtonProps)},virtualScrollerDisabled:function(){return mu(this.virtualScrollerOptions)||!this.scrollable}},components:{DTPaginator:sV,DTTableHeader:xV,DTTableBody:_V,DTTableFooter:bV,DTVirtualScroller:U4,ArrowDownIcon:M7,ArrowUpIcon:O7,SpinnerIcon:rb}};function P1(t){"@babel/helpers - typeof";return P1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P1(t)}function RD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function kD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RD(Object(n),!0).forEach(function(r){hAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hAe(t,e,n){return(e=dAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dAe(t){var e=fAe(t,"string");return P1(e)=="symbol"?e:e+""}function fAe(t,e){if(P1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(P1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function AAe(t,e,n,r,o,l){var h=Nr("SpinnerIcon"),p=Nr("DTPaginator"),i=Nr("DTTableHeader"),b=Nr("DTTableBody"),E=Nr("DTTableFooter"),I=Nr("DTVirtualScroller");return ve(),et("div",It({class:t.cx("root"),"data-scrollselectors":".p-datatable-wrapper"},t.ptmi("root")),[Xt(t.$slots,"default"),t.loading?(ve(),et("div",It({key:0,class:t.cx("mask")},t.ptm("mask")),[t.$slots.loading?Xt(t.$slots,"loading",{key:0}):(ve(),et(_r,{key:1},[t.$slots.loadingicon?(ve(),hn(mr(t.$slots.loadingicon),{key:0,class:On(t.cx("loadingIcon"))},null,8,["class"])):t.loadingIcon?(ve(),et("i",It({key:1,class:[t.cx("loadingIcon"),"pi-spin",t.loadingIcon]},t.ptm("loadingIcon")),null,16)):(ve(),hn(h,It({key:2,spin:"",class:t.cx("loadingIcon")},t.ptm("loadingIcon")),null,16,["class"]))],64))],16)):Sn("",!0),t.$slots.header?(ve(),et("div",It({key:1,class:t.cx("header")},t.ptm("header")),[Xt(t.$slots,"header")],16)):Sn("",!0),l.paginatorTop?(ve(),hn(p,{key:2,rows:o.d_rows,first:o.d_first,totalRecords:l.totalRecordsLength,pageLinkSize:t.pageLinkSize,template:t.paginatorTemplate,rowsPerPageOptions:t.rowsPerPageOptions,currentPageReportTemplate:t.currentPageReportTemplate,class:On(t.cx("pcPaginator",{position:"top"})),onPage:e[0]||(e[0]=function(O){return l.onPage(O)}),alwaysShow:t.alwaysShowPaginator,unstyled:t.unstyled,pt:t.ptm("pcPaginator")},gg({_:2},[t.$slots.paginatorstart?{name:"start",fn:Kn(function(){return[Xt(t.$slots,"paginatorstart")]}),key:"0"}:void 0,t.$slots.paginatorend?{name:"end",fn:Kn(function(){return[Xt(t.$slots,"paginatorend")]}),key:"1"}:void 0,t.$slots.paginatorfirstpagelinkicon?{name:"firstpagelinkicon",fn:Kn(function(O){return[Xt(t.$slots,"paginatorfirstpagelinkicon",{class:On(O.class)})]}),key:"2"}:void 0,t.$slots.paginatorprevpagelinkicon?{name:"prevpagelinkicon",fn:Kn(function(O){return[Xt(t.$slots,"paginatorprevpagelinkicon",{class:On(O.class)})]}),key:"3"}:void 0,t.$slots.paginatornextpagelinkicon?{name:"nextpagelinkicon",fn:Kn(function(O){return[Xt(t.$slots,"paginatornextpagelinkicon",{class:On(O.class)})]}),key:"4"}:void 0,t.$slots.paginatorlastpagelinkicon?{name:"lastpagelinkicon",fn:Kn(function(O){return[Xt(t.$slots,"paginatorlastpagelinkicon",{class:On(O.class)})]}),key:"5"}:void 0,t.$slots.paginatorjumptopagedropdownicon?{name:"jumptopagedropdownicon",fn:Kn(function(O){return[Xt(t.$slots,"paginatorjumptopagedropdownicon",{class:On(O.class)})]}),key:"6"}:void 0,t.$slots.paginatorrowsperpagedropdownicon?{name:"rowsperpagedropdownicon",fn:Kn(function(O){return[Xt(t.$slots,"paginatorrowsperpagedropdownicon",{class:On(O.class)})]}),key:"7"}:void 0]),1032,["rows","first","totalRecords","pageLinkSize","template","rowsPerPageOptions","currentPageReportTemplate","class","alwaysShow","unstyled","pt"])):Sn("",!0),mt("div",It({class:t.cx("tableContainer"),style:[t.sx("tableContainer"),{maxHeight:l.virtualScrollerDisabled?t.scrollHeight:""}]},t.ptm("tableContainer")),[Lr(I,It({ref:"virtualScroller"},t.virtualScrollerOptions,{items:l.processedData,columns:l.columns,style:t.scrollHeight!=="flex"?{height:t.scrollHeight}:void 0,scrollHeight:t.scrollHeight!=="flex"?void 0:"100%",disabled:l.virtualScrollerDisabled,loaderDisabled:"",inline:"",autoSize:"",showSpacer:!1,pt:t.ptm("virtualScroller")}),{content:Kn(function(O){return[mt("table",It({ref:"table",role:"table",class:[t.cx("table"),t.tableClass],style:[t.tableStyle,O.spacerStyle]},kD(kD({},t.tableProps),t.ptm("table"))),[Lr(i,{columnGroup:l.headerColumnGroup,columns:O.columns,rowGroupMode:t.rowGroupMode,groupRowsBy:t.groupRowsBy,groupRowSortField:l.groupRowSortField,reorderableColumns:t.reorderableColumns,resizableColumns:t.resizableColumns,allRowsSelected:l.allRowsSelected,empty:l.empty,sortMode:t.sortMode,sortField:o.d_sortField,sortOrder:o.d_sortOrder,multiSortMeta:o.d_multiSortMeta,filters:o.d_filters,filtersStore:t.filters,filterDisplay:t.filterDisplay,filterButtonProps:l.headerFilterButtonProps,filterInputProps:t.filterInputProps,first:o.d_first,onColumnClick:e[1]||(e[1]=function(M){return l.onColumnHeaderClick(M)}),onColumnMousedown:e[2]||(e[2]=function(M){return l.onColumnHeaderMouseDown(M)}),onFilterChange:l.onFilterChange,onFilterApply:l.onFilterApply,onColumnDragstart:e[3]||(e[3]=function(M){return l.onColumnHeaderDragStart(M)}),onColumnDragover:e[4]||(e[4]=function(M){return l.onColumnHeaderDragOver(M)}),onColumnDragleave:e[5]||(e[5]=function(M){return l.onColumnHeaderDragLeave(M)}),onColumnDrop:e[6]||(e[6]=function(M){return l.onColumnHeaderDrop(M)}),onColumnResizestart:e[7]||(e[7]=function(M){return l.onColumnResizeStart(M)}),onCheckboxChange:e[8]||(e[8]=function(M){return l.toggleRowsWithCheckbox(M)}),unstyled:t.unstyled,pt:t.pt},null,8,["columnGroup","columns","rowGroupMode","groupRowsBy","groupRowSortField","reorderableColumns","resizableColumns","allRowsSelected","empty","sortMode","sortField","sortOrder","multiSortMeta","filters","filtersStore","filterDisplay","filterButtonProps","filterInputProps","first","onFilterChange","onFilterApply","unstyled","pt"]),t.frozenValue?(ve(),hn(b,{key:0,ref:"frozenBodyRef",value:t.frozenValue,frozenRow:!0,columns:O.columns,first:o.d_first,dataKey:t.dataKey,selection:t.selection,selectionKeys:o.d_selectionKeys,selectionMode:t.selectionMode,contextMenu:t.contextMenu,contextMenuSelection:t.contextMenuSelection,rowGroupMode:t.rowGroupMode,groupRowsBy:t.groupRowsBy,expandableRowGroups:t.expandableRowGroups,rowClass:t.rowClass,rowStyle:t.rowStyle,editMode:t.editMode,compareSelectionBy:t.compareSelectionBy,scrollable:t.scrollable,expandedRowIcon:t.expandedRowIcon,collapsedRowIcon:t.collapsedRowIcon,expandedRows:t.expandedRows,expandedRowGroups:t.expandedRowGroups,editingRows:t.editingRows,editingRowKeys:o.d_editingRowKeys,templates:t.$slots,editButtonProps:l.rowEditButtonProps,isVirtualScrollerDisabled:!0,onRowgroupToggle:l.toggleRowGroup,onRowClick:e[9]||(e[9]=function(M){return l.onRowClick(M)}),onRowDblclick:e[10]||(e[10]=function(M){return l.onRowDblClick(M)}),onRowRightclick:e[11]||(e[11]=function(M){return l.onRowRightClick(M)}),onRowTouchend:l.onRowTouchEnd,onRowKeydown:l.onRowKeyDown,onRowMousedown:l.onRowMouseDown,onRowDragstart:e[12]||(e[12]=function(M){return l.onRowDragStart(M)}),onRowDragover:e[13]||(e[13]=function(M){return l.onRowDragOver(M)}),onRowDragleave:e[14]||(e[14]=function(M){return l.onRowDragLeave(M)}),onRowDragend:e[15]||(e[15]=function(M){return l.onRowDragEnd(M)}),onRowDrop:e[16]||(e[16]=function(M){return l.onRowDrop(M)}),onRowToggle:e[17]||(e[17]=function(M){return l.toggleRow(M)}),onRadioChange:e[18]||(e[18]=function(M){return l.toggleRowWithRadio(M)}),onCheckboxChange:e[19]||(e[19]=function(M){return l.toggleRowWithCheckbox(M)}),onCellEditInit:e[20]||(e[20]=function(M){return l.onCellEditInit(M)}),onCellEditComplete:e[21]||(e[21]=function(M){return l.onCellEditComplete(M)}),onCellEditCancel:e[22]||(e[22]=function(M){return l.onCellEditCancel(M)}),onRowEditInit:e[23]||(e[23]=function(M){return l.onRowEditInit(M)}),onRowEditSave:e[24]||(e[24]=function(M){return l.onRowEditSave(M)}),onRowEditCancel:e[25]||(e[25]=function(M){return l.onRowEditCancel(M)}),editingMeta:o.d_editingMeta,onEditingMetaChange:l.onEditingMetaChange,unstyled:t.unstyled,pt:t.pt},null,8,["value","columns","first","dataKey","selection","selectionKeys","selectionMode","contextMenu","contextMenuSelection","rowGroupMode","groupRowsBy","expandableRowGroups","rowClass","rowStyle","editMode","compareSelectionBy","scrollable","expandedRowIcon","collapsedRowIcon","expandedRows","expandedRowGroups","editingRows","editingRowKeys","templates","editButtonProps","onRowgroupToggle","onRowTouchend","onRowKeydown","onRowMousedown","editingMeta","onEditingMetaChange","unstyled","pt"])):Sn("",!0),Lr(b,{ref:"bodyRef",value:l.dataToRender(O.rows),class:On(O.styleClass),columns:O.columns,empty:l.empty,first:o.d_first,dataKey:t.dataKey,selection:t.selection,selectionKeys:o.d_selectionKeys,selectionMode:t.selectionMode,contextMenu:t.contextMenu,contextMenuSelection:t.contextMenuSelection,rowGroupMode:t.rowGroupMode,groupRowsBy:t.groupRowsBy,expandableRowGroups:t.expandableRowGroups,rowClass:t.rowClass,rowStyle:t.rowStyle,editMode:t.editMode,compareSelectionBy:t.compareSelectionBy,scrollable:t.scrollable,expandedRowIcon:t.expandedRowIcon,collapsedRowIcon:t.collapsedRowIcon,expandedRows:t.expandedRows,expandedRowGroups:t.expandedRowGroups,editingRows:t.editingRows,editingRowKeys:o.d_editingRowKeys,templates:t.$slots,editButtonProps:l.rowEditButtonProps,virtualScrollerContentProps:O,isVirtualScrollerDisabled:l.virtualScrollerDisabled,onRowgroupToggle:l.toggleRowGroup,onRowClick:e[26]||(e[26]=function(M){return l.onRowClick(M)}),onRowDblclick:e[27]||(e[27]=function(M){return l.onRowDblClick(M)}),onRowRightclick:e[28]||(e[28]=function(M){return l.onRowRightClick(M)}),onRowTouchend:l.onRowTouchEnd,onRowKeydown:function(G){return l.onRowKeyDown(G,O)},onRowMousedown:l.onRowMouseDown,onRowDragstart:e[29]||(e[29]=function(M){return l.onRowDragStart(M)}),onRowDragover:e[30]||(e[30]=function(M){return l.onRowDragOver(M)}),onRowDragleave:e[31]||(e[31]=function(M){return l.onRowDragLeave(M)}),onRowDragend:e[32]||(e[32]=function(M){return l.onRowDragEnd(M)}),onRowDrop:e[33]||(e[33]=function(M){return l.onRowDrop(M)}),onRowToggle:e[34]||(e[34]=function(M){return l.toggleRow(M)}),onRadioChange:e[35]||(e[35]=function(M){return l.toggleRowWithRadio(M)}),onCheckboxChange:e[36]||(e[36]=function(M){return l.toggleRowWithCheckbox(M)}),onCellEditInit:e[37]||(e[37]=function(M){return l.onCellEditInit(M)}),onCellEditComplete:e[38]||(e[38]=function(M){return l.onCellEditComplete(M)}),onCellEditCancel:e[39]||(e[39]=function(M){return l.onCellEditCancel(M)}),onRowEditInit:e[40]||(e[40]=function(M){return l.onRowEditInit(M)}),onRowEditSave:e[41]||(e[41]=function(M){return l.onRowEditSave(M)}),onRowEditCancel:e[42]||(e[42]=function(M){return l.onRowEditCancel(M)}),editingMeta:o.d_editingMeta,onEditingMetaChange:l.onEditingMetaChange,unstyled:t.unstyled,pt:t.pt},null,8,["value","class","columns","empty","first","dataKey","selection","selectionKeys","selectionMode","contextMenu","contextMenuSelection","rowGroupMode","groupRowsBy","expandableRowGroups","rowClass","rowStyle","editMode","compareSelectionBy","scrollable","expandedRowIcon","collapsedRowIcon","expandedRows","expandedRowGroups","editingRows","editingRowKeys","templates","editButtonProps","virtualScrollerContentProps","isVirtualScrollerDisabled","onRowgroupToggle","onRowTouchend","onRowKeydown","onRowMousedown","editingMeta","onEditingMetaChange","unstyled","pt"]),l.hasSpacerStyle(O.spacerStyle)?(ve(),et("tbody",It({key:1,class:t.cx("virtualScrollerSpacer"),style:{height:"calc(".concat(O.spacerStyle.height," - ").concat(O.rows.length*O.itemSize,"px)")}},t.ptm("virtualScrollerSpacer")),null,16)):Sn("",!0),Lr(E,{columnGroup:l.footerColumnGroup,columns:O.columns,pt:t.pt},null,8,["columnGroup","columns","pt"])],16)]}),_:1},16,["items","columns","style","scrollHeight","disabled","pt"])],16),l.paginatorBottom?(ve(),hn(p,{key:3,rows:o.d_rows,first:o.d_first,totalRecords:l.totalRecordsLength,pageLinkSize:t.pageLinkSize,template:t.paginatorTemplate,rowsPerPageOptions:t.rowsPerPageOptions,currentPageReportTemplate:t.currentPageReportTemplate,class:On(t.cx("pcPaginator",{position:"bottom"})),onPage:e[43]||(e[43]=function(O){return l.onPage(O)}),alwaysShow:t.alwaysShowPaginator,unstyled:t.unstyled,pt:t.ptm("pcPaginator")},gg({_:2},[t.$slots.paginatorstart?{name:"start",fn:Kn(function(){return[Xt(t.$slots,"paginatorstart")]}),key:"0"}:void 0,t.$slots.paginatorend?{name:"end",fn:Kn(function(){return[Xt(t.$slots,"paginatorend")]}),key:"1"}:void 0,t.$slots.paginatorfirstpagelinkicon?{name:"firstpagelinkicon",fn:Kn(function(O){return[Xt(t.$slots,"paginatorfirstpagelinkicon",{class:On(O.class)})]}),key:"2"}:void 0,t.$slots.paginatorprevpagelinkicon?{name:"prevpagelinkicon",fn:Kn(function(O){return[Xt(t.$slots,"paginatorprevpagelinkicon",{class:On(O.class)})]}),key:"3"}:void 0,t.$slots.paginatornextpagelinkicon?{name:"nextpagelinkicon",fn:Kn(function(O){return[Xt(t.$slots,"paginatornextpagelinkicon",{class:On(O.class)})]}),key:"4"}:void 0,t.$slots.paginatorlastpagelinkicon?{name:"lastpagelinkicon",fn:Kn(function(O){return[Xt(t.$slots,"paginatorlastpagelinkicon",{class:On(O.class)})]}),key:"5"}:void 0,t.$slots.paginatorjumptopagedropdownicon?{name:"jumptopagedropdownicon",fn:Kn(function(O){return[Xt(t.$slots,"paginatorjumptopagedropdownicon",{class:On(O.class)})]}),key:"6"}:void 0,t.$slots.paginatorrowsperpagedropdownicon?{name:"rowsperpagedropdownicon",fn:Kn(function(O){return[Xt(t.$slots,"paginatorrowsperpagedropdownicon",{class:On(O.class)})]}),key:"7"}:void 0]),1032,["rows","first","totalRecords","pageLinkSize","template","rowsPerPageOptions","currentPageReportTemplate","class","alwaysShow","unstyled","pt"])):Sn("",!0),t.$slots.footer?(ve(),et("div",It({key:4,class:t.cx("footer")},t.ptm("footer")),[Xt(t.$slots,"footer")],16)):Sn("",!0),mt("div",It({ref:"resizeHelper",class:t.cx("columnResizeIndicator"),style:{display:"none"}},t.ptm("columnResizeIndicator")),null,16),t.reorderableColumns?(ve(),et("span",It({key:5,ref:"reorderIndicatorUp",class:t.cx("rowReorderIndicatorUp"),style:{position:"absolute",display:"none"}},t.ptm("rowReorderIndicatorUp")),[(ve(),hn(mr(t.$slots.rowreorderindicatorupicon||t.$slots.reorderindicatorupicon||"ArrowDownIcon")))],16)):Sn("",!0),t.reorderableColumns?(ve(),et("span",It({key:6,ref:"reorderIndicatorDown",class:t.cx("rowReorderIndicatorDown"),style:{position:"absolute",display:"none"}},t.ptm("rowReorderIndicatorDown")),[(ve(),hn(mr(t.$slots.rowreorderindicatordownicon||t.$slots.reorderindicatordownicon||"ArrowUpIcon")))],16)):Sn("",!0)],16)}CV.render=AAe;var pAe=Uo.extend({name:"column"}),mAe={name:"BaseColumn",extends:Ro,props:{columnKey:{type:null,default:null},field:{type:[String,Function],default:null},sortField:{type:[String,Function],default:null},filterField:{type:[String,Function],default:null},dataType:{type:String,default:"text"},sortable:{type:Boolean,default:!1},header:{type:null,default:null},footer:{type:null,default:null},style:{type:null,default:null},class:{type:String,default:null},headerStyle:{type:null,default:null},headerClass:{type:String,default:null},bodyStyle:{type:null,default:null},bodyClass:{type:String,default:null},footerStyle:{type:null,default:null},footerClass:{type:String,default:null},showFilterMenu:{type:Boolean,default:!0},showFilterOperator:{type:Boolean,default:!0},showClearButton:{type:Boolean,default:!0},showApplyButton:{type:Boolean,default:!0},showFilterMatchModes:{type:Boolean,default:!0},showAddButton:{type:Boolean,default:!0},filterMatchModeOptions:{type:Array,default:null},maxConstraints:{type:Number,default:2},excludeGlobalFilter:{type:Boolean,default:!1},filterHeaderClass:{type:String,default:null},filterHeaderStyle:{type:null,default:null},filterMenuClass:{type:String,default:null},filterMenuStyle:{type:null,default:null},selectionMode:{type:String,default:null},expander:{type:Boolean,default:!1},colspan:{type:Number,default:null},rowspan:{type:Number,default:null},rowReorder:{type:Boolean,default:!1},rowReorderIcon:{type:String,default:void 0},reorderableColumn:{type:Boolean,default:!0},rowEditor:{type:Boolean,default:!1},frozen:{type:Boolean,default:!1},alignFrozen:{type:String,default:"left"},exportable:{type:Boolean,default:!0},exportHeader:{type:String,default:null},exportFooter:{type:String,default:null},filterMatchMode:{type:String,default:null},hidden:{type:Boolean,default:!1}},style:pAe,provide:function(){return{$pcColumn:this,$parentInstance:this}}},gAe={name:"Column",extends:mAe,inheritAttrs:!1,inject:["$columns"],mounted:function(){var e;(e=this.$columns)===null||e===void 0||e.add(this.$)},unmounted:function(){var e;(e=this.$columns)===null||e===void 0||e.delete(this.$)},render:function(){return null}},MD={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let o=t.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},yAe=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const o=t[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const l=t[n++];e[r++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=t[n++],h=t[n++],p=t[n++],i=((o&7)<<18|(l&63)<<12|(h&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(i>>10)),e[r++]=String.fromCharCode(56320+(i&1023))}else{const l=t[n++],h=t[n++];e[r++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},BV={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<t.length;o+=3){const l=t[o],h=o+1<t.length,p=h?t[o+1]:0,i=o+2<t.length,b=i?t[o+2]:0,E=l>>2,I=(l&3)<<4|p>>4;let O=(p&15)<<2|b>>6,M=b&63;i||(M=64,h||(O=64)),r.push(n[E],n[I],n[O],n[M])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(EV(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yAe(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<t.length;){const l=n[t.charAt(o++)],p=o<t.length?n[t.charAt(o)]:0;++o;const b=o<t.length?n[t.charAt(o)]:64;++o;const I=o<t.length?n[t.charAt(o)]:64;if(++o,l==null||p==null||b==null||I==null)throw new _Ae;const O=l<<2|p>>4;if(r.push(O),b!==64){const M=p<<4&240|b>>2;if(r.push(M),I!==64){const G=b<<6&192|I;r.push(G)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class _Ae extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const vAe=function(t){const e=EV(t);return BV.encodeByteArray(e,!0)},TC=function(t){return vAe(t).replace(/\./g,"")},SV=function(t){try{return BV.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bAe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wAe=()=>bAe().__FIREBASE_DEFAULTS__,xAe=()=>{if(typeof process>"u"||typeof MD>"u")return;const t=MD.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},CAe=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&SV(t[1]);return e&&JSON.parse(e)},zE=()=>{try{return wAe()||xAe()||CAe()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},TV=t=>{var e,n;return(n=(e=zE())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},EAe=t=>{const e=TV(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},IV=()=>{var t;return(t=zE())===null||t===void 0?void 0:t.config},PV=t=>{var e;return(e=zE())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BAe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SAe(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},t);return[TC(JSON.stringify(n)),TC(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function TAe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pc())}function IAe(){var t;const e=(t=zE())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function PAe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function LAe(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function FAe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function RAe(){const t=pc();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function kAe(){return!IAe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function MAe(){try{return typeof indexedDB=="object"}catch{return!1}}function OAe(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DAe="FirebaseError";class BA extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=DAe,Object.setPrototypeOf(this,BA.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ib.prototype.create)}}class ib{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?UAe(l,r):"Error",p=`${this.serviceName}: ${h} (${o}).`;return new BA(o,p,r)}}function UAe(t,e){return t.replace(NAe,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const NAe=/\{\$([^}]+)}/g;function zAe(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function IC(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const l=t[o],h=e[o];if(OD(l)&&OD(h)){if(!IC(l,h))return!1}else if(l!==h)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function OD(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function gv(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,l]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function yv(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function VAe(t,e){const n=new QAe(t,e);return n.subscribe.bind(n)}class QAe{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");HAe(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=E2),o.error===void 0&&(o.error=E2),o.complete===void 0&&(o.complete=E2);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function HAe(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function E2(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(t){return t&&t._delegate?t._delegate:t}class vg{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jAe{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new BAe;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(GAe(e))try{this.getOrInitializeService({instanceIdentifier:$m})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:o});r.resolve(l)}catch{}}}}clearInstance(e=$m){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$m){return this.instances.has(e)}getOptions(e=$m){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[l,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(l);r===p&&h.resolve(o)}return o}onInit(e,n){var r;const o=this.normalizeInstanceIdentifier(n),l=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$Ae(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$m){return this.component?this.component.multipleInstances?e:$m:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $Ae(t){return t===$m?void 0:t}function GAe(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KAe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new jAe(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xo;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(xo||(xo={}));const qAe={debug:xo.DEBUG,verbose:xo.VERBOSE,info:xo.INFO,warn:xo.WARN,error:xo.ERROR,silent:xo.SILENT},WAe=xo.INFO,XAe={[xo.DEBUG]:"log",[xo.VERBOSE]:"log",[xo.INFO]:"info",[xo.WARN]:"warn",[xo.ERROR]:"error"},ZAe=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),o=XAe[e];if(o)console[o](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let G4=class{constructor(e){this.name=e,this._logLevel=WAe,this._logHandler=ZAe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xo))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qAe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xo.DEBUG,...e),this._logHandler(this,xo.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xo.VERBOSE,...e),this._logHandler(this,xo.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xo.INFO,...e),this._logHandler(this,xo.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xo.WARN,...e),this._logHandler(this,xo.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xo.ERROR,...e),this._logHandler(this,xo.ERROR,...e)}};const YAe=(t,e)=>e.some(n=>t instanceof n);let DD,UD;function JAe(){return DD||(DD=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function epe(){return UD||(UD=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const LV=new WeakMap,yI=new WeakMap,FV=new WeakMap,B2=new WeakMap,K4=new WeakMap;function tpe(t){const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("success",l),t.removeEventListener("error",h)},l=()=>{n(Hp(t.result)),o()},h=()=>{r(t.error),o()};t.addEventListener("success",l),t.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&LV.set(n,t)}).catch(()=>{}),K4.set(e,t),e}function npe(t){if(yI.has(t))return;const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",h),t.removeEventListener("abort",h)},l=()=>{n(),o()},h=()=>{r(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",l),t.addEventListener("error",h),t.addEventListener("abort",h)});yI.set(t,e)}let _I={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return yI.get(t);if(e==="objectStoreNames")return t.objectStoreNames||FV.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hp(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function rpe(t){_I=t(_I)}function ipe(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(S2(this),e,...n);return FV.set(r,e.sort?e.sort():[e]),Hp(r)}:epe().includes(t)?function(...e){return t.apply(S2(this),e),Hp(LV.get(this))}:function(...e){return Hp(t.apply(S2(this),e))}}function ope(t){return typeof t=="function"?ipe(t):(t instanceof IDBTransaction&&npe(t),YAe(t,JAe())?new Proxy(t,_I):t)}function Hp(t){if(t instanceof IDBRequest)return tpe(t);if(B2.has(t))return B2.get(t);const e=ope(t);return e!==t&&(B2.set(t,e),K4.set(e,t)),e}const S2=t=>K4.get(t);function spe(t,e,{blocked:n,upgrade:r,blocking:o,terminated:l}={}){const h=indexedDB.open(t,e),p=Hp(h);return r&&h.addEventListener("upgradeneeded",i=>{r(Hp(h.result),i.oldVersion,i.newVersion,Hp(h.transaction),i)}),n&&h.addEventListener("blocked",i=>n(i.oldVersion,i.newVersion,i)),p.then(i=>{l&&i.addEventListener("close",()=>l()),o&&i.addEventListener("versionchange",b=>o(b.oldVersion,b.newVersion,b))}).catch(()=>{}),p}const ape=["get","getKey","getAll","getAllKeys","count"],lpe=["put","add","delete","clear"],T2=new Map;function ND(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(T2.get(e))return T2.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=lpe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||ape.includes(n)))return;const l=async function(h,...p){const i=this.transaction(h,o?"readwrite":"readonly");let b=i.store;return r&&(b=b.index(p.shift())),(await Promise.all([b[n](...p),o&&i.done]))[0]};return T2.set(e,l),l}rpe(t=>({...t,get:(e,n,r)=>ND(e,n)||t.get(e,n,r),has:(e,n)=>!!ND(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cpe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(upe(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function upe(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const vI="@firebase/app",zD="0.10.12";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA=new G4("@firebase/app"),hpe="@firebase/app-compat",dpe="@firebase/analytics-compat",fpe="@firebase/analytics",Ape="@firebase/app-check-compat",ppe="@firebase/app-check",mpe="@firebase/auth",gpe="@firebase/auth-compat",ype="@firebase/database",_pe="@firebase/data-connect",vpe="@firebase/database-compat",bpe="@firebase/functions",wpe="@firebase/functions-compat",xpe="@firebase/installations",Cpe="@firebase/installations-compat",Epe="@firebase/messaging",Bpe="@firebase/messaging-compat",Spe="@firebase/performance",Tpe="@firebase/performance-compat",Ipe="@firebase/remote-config",Ppe="@firebase/remote-config-compat",Lpe="@firebase/storage",Fpe="@firebase/storage-compat",Rpe="@firebase/firestore",kpe="@firebase/vertexai-preview",Mpe="@firebase/firestore-compat",Ope="firebase",Dpe="10.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI="[DEFAULT]",Upe={[vI]:"fire-core",[hpe]:"fire-core-compat",[fpe]:"fire-analytics",[dpe]:"fire-analytics-compat",[ppe]:"fire-app-check",[Ape]:"fire-app-check-compat",[mpe]:"fire-auth",[gpe]:"fire-auth-compat",[ype]:"fire-rtdb",[_pe]:"fire-data-connect",[vpe]:"fire-rtdb-compat",[bpe]:"fire-fn",[wpe]:"fire-fn-compat",[xpe]:"fire-iid",[Cpe]:"fire-iid-compat",[Epe]:"fire-fcm",[Bpe]:"fire-fcm-compat",[Spe]:"fire-perf",[Tpe]:"fire-perf-compat",[Ipe]:"fire-rc",[Ppe]:"fire-rc-compat",[Lpe]:"fire-gcs",[Fpe]:"fire-gcs-compat",[Rpe]:"fire-fst",[Mpe]:"fire-fst-compat",[kpe]:"fire-vertex","fire-js":"fire-js",[Ope]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=new Map,Npe=new Map,wI=new Map;function VD(t,e){try{t.container.addComponent(e)}catch(n){yA.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function B_(t){const e=t.name;if(wI.has(e))return yA.debug(`There were multiple attempts to register component ${e}.`),!1;wI.set(e,t);for(const n of PC.values())VD(n,t);for(const n of Npe.values())VD(n,t);return!0}function q4(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Jd(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zpe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jp=new ib("app","Firebase",zpe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vpe{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new vg("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jp.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_=Dpe;function RV(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:bI,automaticDataCollectionEnabled:!1},e),o=r.name;if(typeof o!="string"||!o)throw jp.create("bad-app-name",{appName:String(o)});if(n||(n=IV()),!n)throw jp.create("no-options");const l=PC.get(o);if(l){if(IC(n,l.options)&&IC(r,l.config))return l;throw jp.create("duplicate-app",{appName:o})}const h=new KAe(o);for(const i of wI.values())h.addComponent(i);const p=new Vpe(n,r,h);return PC.set(o,p),p}function kV(t=bI){const e=PC.get(t);if(!e&&t===bI&&IV())return RV();if(!e)throw jp.create("no-app",{appName:t});return e}function $p(t,e,n){var r;let o=(r=Upe[t])!==null&&r!==void 0?r:t;n&&(o+=`-${n}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const p=[`Unable to register library "${o}" with version "${e}":`];l&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&p.push("and"),h&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yA.warn(p.join(" "));return}B_(new vg(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qpe="firebase-heartbeat-database",Hpe=1,L1="firebase-heartbeat-store";let I2=null;function MV(){return I2||(I2=spe(Qpe,Hpe,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(L1)}catch(n){console.warn(n)}}}}).catch(t=>{throw jp.create("idb-open",{originalErrorMessage:t.message})})),I2}async function jpe(t){try{const n=(await MV()).transaction(L1),r=await n.objectStore(L1).get(OV(t));return await n.done,r}catch(e){if(e instanceof BA)yA.warn(e.message);else{const n=jp.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});yA.warn(n.message)}}}async function QD(t,e){try{const r=(await MV()).transaction(L1,"readwrite");await r.objectStore(L1).put(e,OV(t)),await r.done}catch(n){if(n instanceof BA)yA.warn(n.message);else{const r=jp.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});yA.warn(r.message)}}}function OV(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $pe=1024,Gpe=30*24*60*60*1e3;class Kpe{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Wpe(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=HD();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const p=new Date(h.date).valueOf();return Date.now()-p<=Gpe}),this._storage.overwrite(this._heartbeatsCache))}catch(r){yA.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=HD(),{heartbeatsToSend:r,unsentEntries:o}=qpe(this._heartbeatsCache.heartbeats),l=TC(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return yA.warn(n),""}}}function HD(){return new Date().toISOString().substring(0,10)}function qpe(t,e=$pe){const n=[];let r=t.slice();for(const o of t){const l=n.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),jD(n)>e){l.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),jD(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Wpe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return MAe()?OAe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await jpe(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return QD(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return QD(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function jD(t){return TC(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xpe(t){B_(new vg("platform-logger",e=>new cpe(e),"PRIVATE")),B_(new vg("heartbeat",e=>new Kpe(e),"PRIVATE")),$p(vI,zD,t),$p(vI,zD,"esm2017"),$p("fire-js","")}Xpe("");function W4(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function DV(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Zpe=DV,UV=new ib("auth","Firebase",DV());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=new G4("@firebase/auth");function Ype(t,...e){LC.logLevel<=xo.WARN&&LC.warn(`Auth (${G_}): ${t}`,...e)}function Nx(t,...e){LC.logLevel<=xo.ERROR&&LC.error(`Auth (${G_}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(t,...e){throw X4(t,...e)}function of(t,...e){return X4(t,...e)}function NV(t,e,n){const r=Object.assign(Object.assign({},Zpe()),{[e]:n});return new ib("auth","Firebase",r).create(e,{appName:t.name})}function fA(t){return NV(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function X4(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return UV.create(t,...e)}function wi(t,e,...n){if(!t)throw X4(e,...n)}function sA(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Nx(e),new Error(e)}function _A(t,e){t||sA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Jpe(){return $D()==="http:"||$D()==="https:"}function $D(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eme(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Jpe()||LAe()||"connection"in navigator)?navigator.onLine:!0}function tme(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e,n){this.shortDelay=e,this.longDelay=n,_A(n>e,"Short delay should be less than long delay!"),this.isMobile=TAe()||FAe()}get(){return eme()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z4(t,e){_A(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zV{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;sA("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;sA("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;sA("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nme={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rme=new sb(3e4,6e4);function mm(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function gm(t,e,n,r,o={}){return VV(t,o,async()=>{let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});const p=ob(Object.assign({key:t.config.apiKey},h)).slice(1),i=await t._getAdditionalHeaders();i["Content-Type"]="application/json",t.languageCode&&(i["X-Firebase-Locale"]=t.languageCode);const b=Object.assign({method:e,headers:i},l);return PAe()||(b.referrerPolicy="no-referrer"),zV.fetch()(QV(t,t.config.apiHost,n,p),b)})}async function VV(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},nme),e);try{const o=new ome(t),l=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Hw(t,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const p=l.ok?h.errorMessage:h.error.message,[i,b]=p.split(" : ");if(i==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hw(t,"credential-already-in-use",h);if(i==="EMAIL_EXISTS")throw Hw(t,"email-already-in-use",h);if(i==="USER_DISABLED")throw Hw(t,"user-disabled",h);const E=r[i]||i.toLowerCase().replace(/[_\s]+/g,"-");if(b)throw NV(t,E,b);pd(t,E)}}catch(o){if(o instanceof BA)throw o;pd(t,"network-request-failed",{message:String(o)})}}async function ab(t,e,n,r,o={}){const l=await gm(t,e,n,r,o);return"mfaPendingCredential"in l&&pd(t,"multi-factor-auth-required",{_serverResponse:l}),l}function QV(t,e,n,r){const o=`${e}${n}?${r}`;return t.config.emulator?Z4(t.config,o):`${t.config.apiScheme}://${o}`}function ime(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ome{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(of(this.auth,"network-request-failed")),rme.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Hw(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=of(t,e,r);return o.customData._tokenResponse=n,o}function GD(t){return t!==void 0&&t.enterprise!==void 0}class sme{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return ime(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function ame(t,e){return gm(t,"GET","/v2/recaptchaConfig",mm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lme(t,e){return gm(t,"POST","/v1/accounts:delete",e)}async function HV(t,e){return gm(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zv(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function cme(t,e=!1){const n=Wu(t),r=await n.getIdToken(e),o=Y4(r);wi(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:r,authTime:zv(P2(o.auth_time)),issuedAtTime:zv(P2(o.iat)),expirationTime:zv(P2(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function P2(t){return Number(t)*1e3}function Y4(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Nx("JWT malformed, contained fewer than 3 sections"),null;try{const o=SV(n);return o?JSON.parse(o):(Nx("Failed to decode base64 JWT payload"),null)}catch(o){return Nx("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function KD(t){const e=Y4(t);return wi(e,"internal-error"),wi(typeof e.exp<"u","internal-error"),wi(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F1(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof BA&&ume(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function ume({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hme{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zv(this.lastLoginAt),this.creationTime=zv(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FC(t){var e;const n=t.auth,r=await t.getIdToken(),o=await F1(t,HV(n,{idToken:r}));wi(o==null?void 0:o.users.length,n,"internal-error");const l=o.users[0];t._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?jV(l.providerUserInfo):[],p=fme(t.providerData,h),i=t.isAnonymous,b=!(t.email&&l.passwordHash)&&!(p!=null&&p.length),E=i?b:!1,I={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:p,metadata:new CI(l.createdAt,l.lastLoginAt),isAnonymous:E};Object.assign(t,I)}async function dme(t){const e=Wu(t);await FC(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function fme(t,e){return[...t.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function jV(t){return t.map(e=>{var{providerId:n}=e,r=W4(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ame(t,e){const n=await VV(t,{},async()=>{const r=ob({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=t.config,h=QV(t,o,"/v1/token",`key=${l}`),p=await t._getAdditionalHeaders();return p["Content-Type"]="application/x-www-form-urlencoded",zV.fetch()(h,{method:"POST",headers:p,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function pme(t,e){return gm(t,"POST","/v2/accounts:revokeToken",mm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){wi(e.idToken,"internal-error"),wi(typeof e.idToken<"u","internal-error"),wi(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):KD(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){wi(e.length!==0,"internal-error");const n=KD(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(wi(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:l}=await Ame(e,n);this.updateTokensAndExpiration(r,o,Number(l))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:l}=n,h=new e_;return r&&(wi(typeof r=="string","internal-error",{appName:e}),h.refreshToken=r),o&&(wi(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(wi(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new e_,this.toJSON())}_performRefresh(){return sA("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(t,e){wi(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class aA{constructor(e){var{uid:n,auth:r,stsTokenManager:o}=e,l=W4(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hme(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new CI(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await F1(this,this.stsTokenManager.getToken(this.auth,e));return wi(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return cme(this,e)}reload(){return dme(this)}_assign(e){this!==e&&(wi(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new aA(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){wi(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await FC(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Jd(this.auth.app))return Promise.reject(fA(this.auth));const e=await this.getIdToken();return await F1(this,lme(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,o,l,h,p,i,b,E;const I=(r=n.displayName)!==null&&r!==void 0?r:void 0,O=(o=n.email)!==null&&o!==void 0?o:void 0,M=(l=n.phoneNumber)!==null&&l!==void 0?l:void 0,G=(h=n.photoURL)!==null&&h!==void 0?h:void 0,q=(p=n.tenantId)!==null&&p!==void 0?p:void 0,Z=(i=n._redirectEventId)!==null&&i!==void 0?i:void 0,Y=(b=n.createdAt)!==null&&b!==void 0?b:void 0,te=(E=n.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:be,emailVerified:Pe,isAnonymous:Se,providerData:Ie,stsTokenManager:Ae}=n;wi(be&&Ae,e,"internal-error");const ne=e_.fromJSON(this.name,Ae);wi(typeof be=="string",e,"internal-error"),dp(I,e.name),dp(O,e.name),wi(typeof Pe=="boolean",e,"internal-error"),wi(typeof Se=="boolean",e,"internal-error"),dp(M,e.name),dp(G,e.name),dp(q,e.name),dp(Z,e.name),dp(Y,e.name),dp(te,e.name);const ue=new aA({uid:be,auth:e,email:O,emailVerified:Pe,displayName:I,isAnonymous:Se,photoURL:G,phoneNumber:M,tenantId:q,stsTokenManager:ne,createdAt:Y,lastLoginAt:te});return Ie&&Array.isArray(Ie)&&(ue.providerData=Ie.map(ye=>Object.assign({},ye))),Z&&(ue._redirectEventId=Z),ue}static async _fromIdTokenResponse(e,n,r=!1){const o=new e_;o.updateFromServerResponse(n);const l=new aA({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await FC(l),l}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];wi(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?jV(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),p=new e_;p.updateFromIdToken(r);const i=new aA({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:h}),b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new CI(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(i,b),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=new Map;function lA(t){_A(t instanceof Function,"Expected a class definition");let e=qD.get(t);return e?(_A(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,qD.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}$V.type="NONE";const WD=$V;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(t,e,n){return`firebase:${t}:${e}:${n}`}class t_{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:l}=this.auth;this.fullUserKey=zx(this.userKey,o.apiKey,l),this.fullPersistenceKey=zx("persistence",o.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?aA._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new t_(lA(WD),e,r);const o=(await Promise.all(n.map(async b=>{if(await b._isAvailable())return b}))).filter(b=>b);let l=o[0]||lA(WD);const h=zx(r,e.config.apiKey,e.name);let p=null;for(const b of n)try{const E=await b._get(h);if(E){const I=aA._fromJSON(e,E);b!==l&&(p=I),l=b;break}}catch{}const i=o.filter(b=>b._shouldAllowMigration);return!l._shouldAllowMigration||!i.length?new t_(l,e,r):(l=i[0],p&&await l._set(h,p.toJSON()),await Promise.all(n.map(async b=>{if(b!==l)try{await b._remove(h)}catch{}})),new t_(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XD(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(WV(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(GV(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ZV(e))return"Blackberry";if(YV(e))return"Webos";if(KV(e))return"Safari";if((e.includes("chrome/")||qV(e))&&!e.includes("edge/"))return"Chrome";if(XV(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function GV(t=pc()){return/firefox\//i.test(t)}function KV(t=pc()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qV(t=pc()){return/crios\//i.test(t)}function WV(t=pc()){return/iemobile/i.test(t)}function XV(t=pc()){return/android/i.test(t)}function ZV(t=pc()){return/blackberry/i.test(t)}function YV(t=pc()){return/webos/i.test(t)}function J4(t=pc()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function mme(t=pc()){var e;return J4(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function gme(){return RAe()&&document.documentMode===10}function JV(t=pc()){return J4(t)||XV(t)||YV(t)||ZV(t)||/windows phone/i.test(t)||WV(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e9(t,e=[]){let n;switch(t){case"Browser":n=XD(pc());break;case"Worker":n=`${XD(pc())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${G_}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yme{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=l=>new Promise((h,p)=>{try{const i=e(l);h(i)}catch(i){p(i)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _me(t,e={}){return gm(t,"GET","/v2/passwordPolicy",mm(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vme=6;class bme{constructor(e){var n,r,o,l;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=h.minPasswordLength)!==null&&n!==void 0?n:vme,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,o,l,h,p;const i={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,i),this.validatePasswordCharacterOptions(e,i),i.isValid&&(i.isValid=(n=i.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),i.isValid&&(i.isValid=(r=i.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),i.isValid&&(i.isValid=(o=i.containsLowercaseLetter)!==null&&o!==void 0?o:!0),i.isValid&&(i.isValid=(l=i.containsUppercaseLetter)!==null&&l!==void 0?l:!0),i.isValid&&(i.isValid=(h=i.containsNumericCharacter)!==null&&h!==void 0?h:!0),i.isValid&&(i.isValid=(p=i.containsNonAlphanumericCharacter)!==null&&p!==void 0?p:!0),i}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wme{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ZD(this),this.idTokenSubscription=new ZD(this),this.beforeStateQueue=new yme(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=UV,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=lA(n)),this._initializationPromise=this.queue(async()=>{var r,o;if(!this._deleted&&(this.persistenceManager=await t_.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await HV(this,{idToken:e}),r=await aA._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Jd(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(p,p))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let o=r,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,p=o==null?void 0:o._redirectEventId,i=await this.tryRedirectSignIn(e);(!h||h===p)&&(i!=null&&i.user)&&(o=i.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return wi(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await FC(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tme()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Jd(this.app))return Promise.reject(fA(this));const n=e?Wu(e):null;return n&&wi(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&wi(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Jd(this.app)?Promise.reject(fA(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Jd(this.app)?Promise.reject(fA(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(lA(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _me(this),n=new bme(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ib("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await pme(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&lA(e)||this._popupRedirectResolver;wi(n,this,"argument-error"),this.redirectPersistenceManager=await t_.create(this,[lA(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let h=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(wi(p,this,"internal-error"),p.then(()=>{h||l(this.currentUser)}),typeof n=="function"){const i=e.addObserver(n,r,o);return()=>{h=!0,i()}}else{const i=e.addObserver(n);return()=>{h=!0,i()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return wi(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=e9(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Ype(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function kg(t){return Wu(t)}class ZD{constructor(e){this.auth=e,this.observer=null,this.addObserver=VAe(n=>this.observer=n)}get next(){return wi(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VE={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xme(t){VE=t}function t9(t){return VE.loadJS(t)}function Cme(){return VE.recaptchaEnterpriseScript}function Eme(){return VE.gapiScript}function Bme(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Sme="recaptcha-enterprise",Tme="NO_RECAPTCHA";class Ime{constructor(e){this.type=Sme,this.auth=kg(e)}async verify(e="verify",n=!1){async function r(l){if(!n){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,p)=>{ame(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(i=>{if(i.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const b=new sme(i);return l.tenantId==null?l._agentRecaptchaConfig=b:l._tenantRecaptchaConfigs[l.tenantId]=b,h(b.siteKey)}}).catch(i=>{p(i)})})}function o(l,h,p){const i=window.grecaptcha;GD(i)?i.enterprise.ready(()=>{i.enterprise.execute(l,{action:e}).then(b=>{h(b)}).catch(()=>{h(Tme)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((l,h)=>{r(this.auth).then(p=>{if(!n&&GD(window.grecaptcha))o(p,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let i=Cme();i.length!==0&&(i+=p),t9(i).then(()=>{o(p,l,h)}).catch(b=>{h(b)})}}).catch(p=>{h(p)})})}}async function YD(t,e,n,r=!1){const o=new Ime(t);let l;try{l=await o.verify(n)}catch{l=await o.verify(n,!0)}const h=Object.assign({},e);return r?Object.assign(h,{captchaResp:l}):Object.assign(h,{captchaResponse:l}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function EI(t,e,n,r){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await YD(t,e,n,n==="getOobCode");return r(t,l)}else return r(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await YD(t,e,n,n==="getOobCode");return r(t,h)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pme(t,e){const n=q4(t,"auth");if(n.isInitialized()){const o=n.getImmediate(),l=n.getOptions();if(IC(l,e??{}))return o;pd(o,"already-initialized")}return n.initialize({options:e})}function Lme(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(lA);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Fme(t,e,n){const r=kg(t);wi(r._canInitEmulator,r,"emulator-config-failed"),wi(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,l=n9(e),{host:h,port:p}=Rme(e),i=p===null?"":`:${p}`;r.config.emulator={url:`${l}//${h}${i}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:h,port:p,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})}),kme()}function n9(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Rme(t){const e=n9(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const l=o[1];return{host:l,port:JD(r.substr(l.length+1))}}else{const[l,h]=r.split(":");return{host:l,port:JD(h)}}}function JD(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function kme(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return sA("not implemented")}_getIdTokenResponse(e){return sA("not implemented")}_linkToIdToken(e,n){return sA("not implemented")}_getReauthenticationResolver(e){return sA("not implemented")}}async function Mme(t,e){return gm(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ome(t,e){return ab(t,"POST","/v1/accounts:signInWithPassword",mm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dme(t,e){return ab(t,"POST","/v1/accounts:signInWithEmailLink",mm(t,e))}async function Ume(t,e){return ab(t,"POST","/v1/accounts:signInWithEmailLink",mm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1 extends eP{constructor(e,n,r,o=null){super("password",r),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new R1(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new R1(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return EI(e,n,"signInWithPassword",Ome);case"emailLink":return Dme(e,{email:this._email,oobCode:this._password});default:pd(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return EI(e,r,"signUpPassword",Mme);case"emailLink":return Ume(e,{idToken:n,email:this._email,oobCode:this._password});default:pd(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n_(t,e){return ab(t,"POST","/v1/accounts:signInWithIdp",mm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nme="http://localhost";class bg extends eP{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new bg(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):pd("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o}=n,l=W4(n,["providerId","signInMethod"]);if(!r||!o)return null;const h=new bg(r,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return n_(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,n_(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,n_(e,n)}buildRequest(){const e={requestUri:Nme,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ob(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zme(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Vme(t){const e=gv(yv(t)).link,n=e?gv(yv(e)).deep_link_id:null,r=gv(yv(t)).deep_link_id;return(r?gv(yv(r)).link:null)||r||n||e||t}class tP{constructor(e){var n,r,o,l,h,p;const i=gv(yv(e)),b=(n=i.apiKey)!==null&&n!==void 0?n:null,E=(r=i.oobCode)!==null&&r!==void 0?r:null,I=zme((o=i.mode)!==null&&o!==void 0?o:null);wi(b&&E&&I,"argument-error"),this.apiKey=b,this.operation=I,this.code=E,this.continueUrl=(l=i.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(h=i.languageCode)!==null&&h!==void 0?h:null,this.tenantId=(p=i.tenantId)!==null&&p!==void 0?p:null}static parseLink(e){const n=Vme(e);try{return new tP(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(){this.providerId=K_.PROVIDER_ID}static credential(e,n){return R1._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=tP.parseLink(n);return wi(r,"argument-error"),R1._fromEmailAndCode(e,r.code,r.tenantId)}}K_.PROVIDER_ID="password";K_.EMAIL_PASSWORD_SIGN_IN_METHOD="password";K_.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r9{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb extends r9{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip extends lb{constructor(){super("facebook.com")}static credential(e){return bg._fromParams({providerId:Ip.PROVIDER_ID,signInMethod:Ip.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ip.credentialFromTaggedObject(e)}static credentialFromError(e){return Ip.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ip.credential(e.oauthAccessToken)}catch{return null}}}Ip.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ip.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp extends lb{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return bg._fromParams({providerId:Pp.PROVIDER_ID,signInMethod:Pp.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Pp.credentialFromTaggedObject(e)}static credentialFromError(e){return Pp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Pp.credential(n,r)}catch{return null}}}Pp.GOOGLE_SIGN_IN_METHOD="google.com";Pp.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp extends lb{constructor(){super("github.com")}static credential(e){return bg._fromParams({providerId:Lp.PROVIDER_ID,signInMethod:Lp.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Lp.credentialFromTaggedObject(e)}static credentialFromError(e){return Lp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Lp.credential(e.oauthAccessToken)}catch{return null}}}Lp.GITHUB_SIGN_IN_METHOD="github.com";Lp.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp extends lb{constructor(){super("twitter.com")}static credential(e,n){return bg._fromParams({providerId:Fp.PROVIDER_ID,signInMethod:Fp.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Fp.credentialFromTaggedObject(e)}static credentialFromError(e){return Fp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Fp.credential(n,r)}catch{return null}}}Fp.TWITTER_SIGN_IN_METHOD="twitter.com";Fp.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qme(t,e){return ab(t,"POST","/v1/accounts:signUp",mm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const l=await aA._fromIdTokenResponse(e,r,o),h=e6(r);return new wg({user:l,providerId:h,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=e6(r);return new wg({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function e6(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC extends BA{constructor(e,n,r,o){var l;super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,RC.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new RC(e,n,r,o)}}function i9(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?RC._fromErrorAndOperation(t,l,e,r):l})}async function Hme(t,e,n=!1){const r=await F1(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return wg._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jme(t,e,n=!1){const{auth:r}=t;if(Jd(r.app))return Promise.reject(fA(r));const o="reauthenticate";try{const l=await F1(t,i9(r,o,e,t),n);wi(l.idToken,r,"internal-error");const h=Y4(l.idToken);wi(h,r,"internal-error");const{sub:p}=h;return wi(t.uid===p,r,"user-mismatch"),wg._forOperation(t,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&pd(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o9(t,e,n=!1){if(Jd(t.app))return Promise.reject(fA(t));const r="signIn",o=await i9(t,r,e),l=await wg._fromIdTokenResponse(t,r,o);return n||await t._updateCurrentUser(l.user),l}async function $me(t,e){return o9(kg(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s9(t){const e=kg(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Gme(t,e,n){if(Jd(t.app))return Promise.reject(fA(t));const r=kg(t),h=await EI(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Qme).catch(i=>{throw i.code==="auth/password-does-not-meet-requirements"&&s9(t),i}),p=await wg._fromIdTokenResponse(r,"signIn",h);return await r._updateCurrentUser(p.user),p}function Kme(t,e,n){return Jd(t.app)?Promise.reject(fA(t)):$me(Wu(t),K_.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&s9(t),r})}function qme(t,e,n,r){return Wu(t).onIdTokenChanged(e,n,r)}function Wme(t,e,n){return Wu(t).beforeAuthStateChanged(e,n)}function a9(t){return Wu(t).signOut()}const kC="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l9{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(kC,"1"),this.storage.removeItem(kC),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xme=1e3,Zme=10;class c9 extends l9{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=JV(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,p,i)=>{this.notifyListeners(h,i)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(r);!n&&this.localCache[r]===h||this.notifyListeners(r,h)},l=this.storage.getItem(r);gme()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Zme):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Xme)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}c9.type="LOCAL";const Yme=c9;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u9 extends l9{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}u9.type="SESSION";const h9=u9;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jme(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new QE(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:l}=n.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const p=Array.from(h).map(async b=>b(n.origin,l)),i=await Jme(p);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:i})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}QE.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nP(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ege{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((p,i)=>{const b=nP("",20);o.port1.start();const E=setTimeout(()=>{i(new Error("unsupported_event"))},r);h={messageChannel:o,onMessage(I){const O=I;if(O.data.eventId===b)switch(O.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{i(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),p(O.data.response);break;default:clearTimeout(E),clearTimeout(l),i(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:b,data:n},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sf(){return window}function tge(t){sf().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d9(){return typeof sf().WorkerGlobalScope<"u"&&typeof sf().importScripts=="function"}async function nge(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function rge(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function ige(){return d9()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f9="firebaseLocalStorageDb",oge=1,MC="firebaseLocalStorage",A9="fbase_key";class cb{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function HE(t,e){return t.transaction([MC],e?"readwrite":"readonly").objectStore(MC)}function sge(){const t=indexedDB.deleteDatabase(f9);return new cb(t).toPromise()}function BI(){const t=indexedDB.open(f9,oge);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(MC,{keyPath:A9})}catch(o){n(o)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(MC)?e(r):(r.close(),await sge(),e(await BI()))})})}async function t6(t,e,n){const r=HE(t,!0).put({[A9]:e,value:n});return new cb(r).toPromise()}async function age(t,e){const n=HE(t,!1).get(e),r=await new cb(n).toPromise();return r===void 0?null:r.value}function n6(t,e){const n=HE(t,!0).delete(e);return new cb(n).toPromise()}const lge=800,cge=3;class p9{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await BI(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>cge)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return d9()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=QE._getInstance(ige()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await nge(),!this.activeServiceWorker)return;this.sender=new ege(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||rge()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await BI();return await t6(e,kC,"1"),await n6(e,kC),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>t6(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>age(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>n6(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=HE(o,!1).getAll();return new cb(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),lge)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}p9.type="LOCAL";const uge=p9;new sb(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hge(t,e){return e?lA(e):(wi(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP extends eP{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return n_(e,this._buildIdpRequest())}_linkToIdToken(e,n){return n_(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return n_(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function dge(t){return o9(t.auth,new rP(t),t.bypassAuthState)}function fge(t){const{auth:e,user:n}=t;return wi(n,e,"internal-error"),jme(n,new rP(t),t.bypassAuthState)}async function Age(t){const{auth:e,user:n}=t;return wi(n,e,"internal-error"),Hme(n,new rP(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m9{constructor(e,n,r,o,l=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:l,error:h,type:p}=e;if(h){this.reject(h);return}const i={auth:this.auth,requestUri:n,sessionId:r,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(i))}catch(b){this.reject(b)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dge;case"linkViaPopup":case"linkViaRedirect":return Age;case"reauthViaPopup":case"reauthViaRedirect":return fge;default:pd(this.auth,"internal-error")}}resolve(e){_A(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_A(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pge=new sb(2e3,1e4);class $y extends m9{constructor(e,n,r,o,l){super(e,n,o,l),this.provider=r,this.authWindow=null,this.pollId=null,$y.currentPopupAction&&$y.currentPopupAction.cancel(),$y.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return wi(e,this.auth,"internal-error"),e}async onExecution(){_A(this.filter.length===1,"Popup operations only handle one event");const e=nP();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(of(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(of(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$y.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(of(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,pge.get())};e()}}$y.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mge="pendingRedirect",Vx=new Map;class gge extends m9{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Vx.get(this.auth._key());if(!e){try{const r=await yge(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Vx.set(this.auth._key(),e)}return this.bypassAuthState||Vx.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function yge(t,e){const n=bge(e),r=vge(t);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function _ge(t,e){Vx.set(t._key(),e)}function vge(t){return lA(t._redirectPersistence)}function bge(t){return zx(mge,t.config.apiKey,t.name)}async function wge(t,e,n=!1){if(Jd(t.app))return Promise.reject(fA(t));const r=kg(t),o=hge(r,e),h=await new gge(r,o,n).execute();return h&&!n&&(delete h.user._redirectEventId,await r._persistUserIfCurrent(h.user),await r._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xge=10*60*1e3;class Cge{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Ege(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!g9(e)){const o=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(of(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=xge&&this.cachedEventUids.clear(),this.cachedEventUids.has(r6(e))}saveEventToCache(e){this.cachedEventUids.add(r6(e)),this.lastProcessedEventTime=Date.now()}}function r6(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function g9({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Ege(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return g9(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bge(t,e={}){return gm(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sge=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Tge=/^https?/;async function Ige(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Bge(t);for(const n of e)try{if(Pge(n))return}catch{}pd(t,"unauthorized-domain")}function Pge(t){const e=xI(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const h=new URL(t);return h.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===r}if(!Tge.test(n))return!1;if(Sge.test(t))return r===t;const o=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lge=new sb(3e4,6e4);function i6(){const t=sf().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Fge(t){return new Promise((e,n)=>{var r,o,l;function h(){i6(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{i6(),n(of(t,"network-request-failed"))},timeout:Lge.get()})}if(!((o=(r=sf().gapi)===null||r===void 0?void 0:r.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=sf().gapi)===null||l===void 0)&&l.load)h();else{const p=Bme("iframefcb");return sf()[p]=()=>{gapi.load?h():n(of(t,"network-request-failed"))},t9(`${Eme()}?onload=${p}`).catch(i=>n(i))}}).catch(e=>{throw Qx=null,e})}let Qx=null;function Rge(t){return Qx=Qx||Fge(t),Qx}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kge=new sb(5e3,15e3),Mge="__/auth/iframe",Oge="emulator/auth/iframe",Dge={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Uge=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Nge(t){const e=t.config;wi(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Z4(e,Oge):`https://${t.config.authDomain}/${Mge}`,r={apiKey:e.apiKey,appName:t.name,v:G_},o=Uge.get(t.config.apiHost);o&&(r.eid=o);const l=t._getFrameworks();return l.length&&(r.fw=l.join(",")),`${n}?${ob(r).slice(1)}`}async function zge(t){const e=await Rge(t),n=sf().gapi;return wi(n,t,"internal-error"),e.open({where:document.body,url:Nge(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Dge,dontclear:!0},r=>new Promise(async(o,l)=>{await r.restyle({setHideOnLeave:!1});const h=of(t,"network-request-failed"),p=sf().setTimeout(()=>{l(h)},kge.get());function i(){sf().clearTimeout(p),o(r)}r.ping(i).then(i,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vge={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Qge=500,Hge=600,jge="_blank",$ge="http://localhost";class o6{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Gge(t,e,n,r=Qge,o=Hge){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const i=Object.assign(Object.assign({},Vge),{width:r.toString(),height:o.toString(),top:l,left:h}),b=pc().toLowerCase();n&&(p=qV(b)?jge:n),GV(b)&&(e=e||$ge,i.scrollbars="yes");const E=Object.entries(i).reduce((O,[M,G])=>`${O}${M}=${G},`,"");if(mme(b)&&p!=="_self")return Kge(e||"",p),new o6(null);const I=window.open(e||"",p,E);wi(I,t,"popup-blocked");try{I.focus()}catch{}return new o6(I)}function Kge(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qge="__/auth/handler",Wge="emulator/auth/handler",Xge=encodeURIComponent("fac");async function s6(t,e,n,r,o,l){wi(t.config.authDomain,t,"auth-domain-config-required"),wi(t.config.apiKey,t,"invalid-api-key");const h={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:G_,eventId:o};if(e instanceof r9){e.setDefaultLanguage(t.languageCode),h.providerId=e.providerId||"",zAe(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,I]of Object.entries({}))h[E]=I}if(e instanceof lb){const E=e.getScopes().filter(I=>I!=="");E.length>0&&(h.scopes=E.join(","))}t.tenantId&&(h.tid=t.tenantId);const p=h;for(const E of Object.keys(p))p[E]===void 0&&delete p[E];const i=await t._getAppCheckToken(),b=i?`#${Xge}=${encodeURIComponent(i)}`:"";return`${Zge(t)}?${ob(p).slice(1)}${b}`}function Zge({config:t}){return t.emulator?Z4(t,Wge):`https://${t.authDomain}/${qge}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2="webStorageSupport";class Yge{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=h9,this._completeRedirectFn=wge,this._overrideRedirectResult=_ge}async _openPopup(e,n,r,o){var l;_A((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await s6(e,n,r,xI(),o);return Gge(e,h,nP())}async _openRedirect(e,n,r,o){await this._originValidation(e);const l=await s6(e,n,r,xI(),o);return tge(l),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:l}=this.eventManagers[n];return o?Promise.resolve(o):(_A(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await zge(e),r=new Cge(e);return n.register("authEvent",o=>(wi(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(L2,{type:L2},o=>{var l;const h=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[L2];h!==void 0&&n(!!h),pd(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Ige(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return JV()||KV()||J4()}}const Jge=Yge;var a6="@firebase/auth",l6="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eye{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){wi(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tye(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nye(t){B_(new vg("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:p}=r.options;wi(h&&!h.includes(":"),"invalid-api-key",{appName:r.name});const i={apiKey:h,authDomain:p,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:e9(t)},b=new wme(r,o,l,i);return Lme(b,n),b},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),B_(new vg("auth-internal",e=>{const n=kg(e.getProvider("auth").getImmediate());return(r=>new eye(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),$p(a6,l6,tye(t)),$p(a6,l6,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rye=5*60,iye=PV("authIdTokenMaxAge")||rye;let c6=null;const oye=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>iye)return;const o=n==null?void 0:n.token;c6!==o&&(c6=o,await fetch(t,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function ub(t=kV()){const e=q4(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Pme(t,{popupRedirectResolver:Jge,persistence:[uge,Yme,h9]}),r=PV("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const h=oye(l.toString());Wme(n,h,()=>h(n.currentUser)),qme(n,p=>h(p))}}const o=TV("auth");return o&&Fme(n,`http://${o}`),n}function sye(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}xme({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=o=>{const l=of("internal-error");l.customData=o,n(l)},r.type="text/javascript",r.charset="UTF-8",sye().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nye("Browser");var u6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ug,y9;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(Ae,ne){function ue(){}ue.prototype=ne.prototype,Ae.D=ne.prototype,Ae.prototype=new ue,Ae.prototype.constructor=Ae,Ae.C=function(ye,se,le){for(var ge=Array(arguments.length-2),lt=2;lt<arguments.length;lt++)ge[lt-2]=arguments[lt];return ne.prototype[se].apply(ye,ge)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(Ae,ne,ue){ue||(ue=0);var ye=Array(16);if(typeof ne=="string")for(var se=0;16>se;++se)ye[se]=ne.charCodeAt(ue++)|ne.charCodeAt(ue++)<<8|ne.charCodeAt(ue++)<<16|ne.charCodeAt(ue++)<<24;else for(se=0;16>se;++se)ye[se]=ne[ue++]|ne[ue++]<<8|ne[ue++]<<16|ne[ue++]<<24;ne=Ae.g[0],ue=Ae.g[1],se=Ae.g[2];var le=Ae.g[3],ge=ne+(le^ue&(se^le))+ye[0]+3614090360&4294967295;ne=ue+(ge<<7&4294967295|ge>>>25),ge=le+(se^ne&(ue^se))+ye[1]+3905402710&4294967295,le=ne+(ge<<12&4294967295|ge>>>20),ge=se+(ue^le&(ne^ue))+ye[2]+606105819&4294967295,se=le+(ge<<17&4294967295|ge>>>15),ge=ue+(ne^se&(le^ne))+ye[3]+3250441966&4294967295,ue=se+(ge<<22&4294967295|ge>>>10),ge=ne+(le^ue&(se^le))+ye[4]+4118548399&4294967295,ne=ue+(ge<<7&4294967295|ge>>>25),ge=le+(se^ne&(ue^se))+ye[5]+1200080426&4294967295,le=ne+(ge<<12&4294967295|ge>>>20),ge=se+(ue^le&(ne^ue))+ye[6]+2821735955&4294967295,se=le+(ge<<17&4294967295|ge>>>15),ge=ue+(ne^se&(le^ne))+ye[7]+4249261313&4294967295,ue=se+(ge<<22&4294967295|ge>>>10),ge=ne+(le^ue&(se^le))+ye[8]+1770035416&4294967295,ne=ue+(ge<<7&4294967295|ge>>>25),ge=le+(se^ne&(ue^se))+ye[9]+2336552879&4294967295,le=ne+(ge<<12&4294967295|ge>>>20),ge=se+(ue^le&(ne^ue))+ye[10]+4294925233&4294967295,se=le+(ge<<17&4294967295|ge>>>15),ge=ue+(ne^se&(le^ne))+ye[11]+2304563134&4294967295,ue=se+(ge<<22&4294967295|ge>>>10),ge=ne+(le^ue&(se^le))+ye[12]+1804603682&4294967295,ne=ue+(ge<<7&4294967295|ge>>>25),ge=le+(se^ne&(ue^se))+ye[13]+4254626195&4294967295,le=ne+(ge<<12&4294967295|ge>>>20),ge=se+(ue^le&(ne^ue))+ye[14]+2792965006&4294967295,se=le+(ge<<17&4294967295|ge>>>15),ge=ue+(ne^se&(le^ne))+ye[15]+1236535329&4294967295,ue=se+(ge<<22&4294967295|ge>>>10),ge=ne+(se^le&(ue^se))+ye[1]+4129170786&4294967295,ne=ue+(ge<<5&4294967295|ge>>>27),ge=le+(ue^se&(ne^ue))+ye[6]+3225465664&4294967295,le=ne+(ge<<9&4294967295|ge>>>23),ge=se+(ne^ue&(le^ne))+ye[11]+643717713&4294967295,se=le+(ge<<14&4294967295|ge>>>18),ge=ue+(le^ne&(se^le))+ye[0]+3921069994&4294967295,ue=se+(ge<<20&4294967295|ge>>>12),ge=ne+(se^le&(ue^se))+ye[5]+3593408605&4294967295,ne=ue+(ge<<5&4294967295|ge>>>27),ge=le+(ue^se&(ne^ue))+ye[10]+38016083&4294967295,le=ne+(ge<<9&4294967295|ge>>>23),ge=se+(ne^ue&(le^ne))+ye[15]+3634488961&4294967295,se=le+(ge<<14&4294967295|ge>>>18),ge=ue+(le^ne&(se^le))+ye[4]+3889429448&4294967295,ue=se+(ge<<20&4294967295|ge>>>12),ge=ne+(se^le&(ue^se))+ye[9]+568446438&4294967295,ne=ue+(ge<<5&4294967295|ge>>>27),ge=le+(ue^se&(ne^ue))+ye[14]+3275163606&4294967295,le=ne+(ge<<9&4294967295|ge>>>23),ge=se+(ne^ue&(le^ne))+ye[3]+4107603335&4294967295,se=le+(ge<<14&4294967295|ge>>>18),ge=ue+(le^ne&(se^le))+ye[8]+1163531501&4294967295,ue=se+(ge<<20&4294967295|ge>>>12),ge=ne+(se^le&(ue^se))+ye[13]+2850285829&4294967295,ne=ue+(ge<<5&4294967295|ge>>>27),ge=le+(ue^se&(ne^ue))+ye[2]+4243563512&4294967295,le=ne+(ge<<9&4294967295|ge>>>23),ge=se+(ne^ue&(le^ne))+ye[7]+1735328473&4294967295,se=le+(ge<<14&4294967295|ge>>>18),ge=ue+(le^ne&(se^le))+ye[12]+2368359562&4294967295,ue=se+(ge<<20&4294967295|ge>>>12),ge=ne+(ue^se^le)+ye[5]+4294588738&4294967295,ne=ue+(ge<<4&4294967295|ge>>>28),ge=le+(ne^ue^se)+ye[8]+2272392833&4294967295,le=ne+(ge<<11&4294967295|ge>>>21),ge=se+(le^ne^ue)+ye[11]+1839030562&4294967295,se=le+(ge<<16&4294967295|ge>>>16),ge=ue+(se^le^ne)+ye[14]+4259657740&4294967295,ue=se+(ge<<23&4294967295|ge>>>9),ge=ne+(ue^se^le)+ye[1]+2763975236&4294967295,ne=ue+(ge<<4&4294967295|ge>>>28),ge=le+(ne^ue^se)+ye[4]+1272893353&4294967295,le=ne+(ge<<11&4294967295|ge>>>21),ge=se+(le^ne^ue)+ye[7]+4139469664&4294967295,se=le+(ge<<16&4294967295|ge>>>16),ge=ue+(se^le^ne)+ye[10]+3200236656&4294967295,ue=se+(ge<<23&4294967295|ge>>>9),ge=ne+(ue^se^le)+ye[13]+681279174&4294967295,ne=ue+(ge<<4&4294967295|ge>>>28),ge=le+(ne^ue^se)+ye[0]+3936430074&4294967295,le=ne+(ge<<11&4294967295|ge>>>21),ge=se+(le^ne^ue)+ye[3]+3572445317&4294967295,se=le+(ge<<16&4294967295|ge>>>16),ge=ue+(se^le^ne)+ye[6]+76029189&4294967295,ue=se+(ge<<23&4294967295|ge>>>9),ge=ne+(ue^se^le)+ye[9]+3654602809&4294967295,ne=ue+(ge<<4&4294967295|ge>>>28),ge=le+(ne^ue^se)+ye[12]+3873151461&4294967295,le=ne+(ge<<11&4294967295|ge>>>21),ge=se+(le^ne^ue)+ye[15]+530742520&4294967295,se=le+(ge<<16&4294967295|ge>>>16),ge=ue+(se^le^ne)+ye[2]+3299628645&4294967295,ue=se+(ge<<23&4294967295|ge>>>9),ge=ne+(se^(ue|~le))+ye[0]+4096336452&4294967295,ne=ue+(ge<<6&4294967295|ge>>>26),ge=le+(ue^(ne|~se))+ye[7]+1126891415&4294967295,le=ne+(ge<<10&4294967295|ge>>>22),ge=se+(ne^(le|~ue))+ye[14]+2878612391&4294967295,se=le+(ge<<15&4294967295|ge>>>17),ge=ue+(le^(se|~ne))+ye[5]+4237533241&4294967295,ue=se+(ge<<21&4294967295|ge>>>11),ge=ne+(se^(ue|~le))+ye[12]+1700485571&4294967295,ne=ue+(ge<<6&4294967295|ge>>>26),ge=le+(ue^(ne|~se))+ye[3]+2399980690&4294967295,le=ne+(ge<<10&4294967295|ge>>>22),ge=se+(ne^(le|~ue))+ye[10]+4293915773&4294967295,se=le+(ge<<15&4294967295|ge>>>17),ge=ue+(le^(se|~ne))+ye[1]+2240044497&4294967295,ue=se+(ge<<21&4294967295|ge>>>11),ge=ne+(se^(ue|~le))+ye[8]+1873313359&4294967295,ne=ue+(ge<<6&4294967295|ge>>>26),ge=le+(ue^(ne|~se))+ye[15]+4264355552&4294967295,le=ne+(ge<<10&4294967295|ge>>>22),ge=se+(ne^(le|~ue))+ye[6]+2734768916&4294967295,se=le+(ge<<15&4294967295|ge>>>17),ge=ue+(le^(se|~ne))+ye[13]+1309151649&4294967295,ue=se+(ge<<21&4294967295|ge>>>11),ge=ne+(se^(ue|~le))+ye[4]+4149444226&4294967295,ne=ue+(ge<<6&4294967295|ge>>>26),ge=le+(ue^(ne|~se))+ye[11]+3174756917&4294967295,le=ne+(ge<<10&4294967295|ge>>>22),ge=se+(ne^(le|~ue))+ye[2]+718787259&4294967295,se=le+(ge<<15&4294967295|ge>>>17),ge=ue+(le^(se|~ne))+ye[9]+3951481745&4294967295,Ae.g[0]=Ae.g[0]+ne&4294967295,Ae.g[1]=Ae.g[1]+(se+(ge<<21&4294967295|ge>>>11))&4294967295,Ae.g[2]=Ae.g[2]+se&4294967295,Ae.g[3]=Ae.g[3]+le&4294967295}r.prototype.u=function(Ae,ne){ne===void 0&&(ne=Ae.length);for(var ue=ne-this.blockSize,ye=this.B,se=this.h,le=0;le<ne;){if(se==0)for(;le<=ue;)o(this,Ae,le),le+=this.blockSize;if(typeof Ae=="string"){for(;le<ne;)if(ye[se++]=Ae.charCodeAt(le++),se==this.blockSize){o(this,ye),se=0;break}}else for(;le<ne;)if(ye[se++]=Ae[le++],se==this.blockSize){o(this,ye),se=0;break}}this.h=se,this.o+=ne},r.prototype.v=function(){var Ae=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);Ae[0]=128;for(var ne=1;ne<Ae.length-8;++ne)Ae[ne]=0;var ue=8*this.o;for(ne=Ae.length-8;ne<Ae.length;++ne)Ae[ne]=ue&255,ue/=256;for(this.u(Ae),Ae=Array(16),ne=ue=0;4>ne;++ne)for(var ye=0;32>ye;ye+=8)Ae[ue++]=this.g[ne]>>>ye&255;return Ae};function l(Ae,ne){var ue=p;return Object.prototype.hasOwnProperty.call(ue,Ae)?ue[Ae]:ue[Ae]=ne(Ae)}function h(Ae,ne){this.h=ne;for(var ue=[],ye=!0,se=Ae.length-1;0<=se;se--){var le=Ae[se]|0;ye&&le==ne||(ue[se]=le,ye=!1)}this.g=ue}var p={};function i(Ae){return-128<=Ae&&128>Ae?l(Ae,function(ne){return new h([ne|0],0>ne?-1:0)}):new h([Ae|0],0>Ae?-1:0)}function b(Ae){if(isNaN(Ae)||!isFinite(Ae))return I;if(0>Ae)return Z(b(-Ae));for(var ne=[],ue=1,ye=0;Ae>=ue;ye++)ne[ye]=Ae/ue|0,ue*=4294967296;return new h(ne,0)}function E(Ae,ne){if(Ae.length==0)throw Error("number format error: empty string");if(ne=ne||10,2>ne||36<ne)throw Error("radix out of range: "+ne);if(Ae.charAt(0)=="-")return Z(E(Ae.substring(1),ne));if(0<=Ae.indexOf("-"))throw Error('number format error: interior "-" character');for(var ue=b(Math.pow(ne,8)),ye=I,se=0;se<Ae.length;se+=8){var le=Math.min(8,Ae.length-se),ge=parseInt(Ae.substring(se,se+le),ne);8>le?(le=b(Math.pow(ne,le)),ye=ye.j(le).add(b(ge))):(ye=ye.j(ue),ye=ye.add(b(ge)))}return ye}var I=i(0),O=i(1),M=i(16777216);t=h.prototype,t.m=function(){if(q(this))return-Z(this).m();for(var Ae=0,ne=1,ue=0;ue<this.g.length;ue++){var ye=this.i(ue);Ae+=(0<=ye?ye:4294967296+ye)*ne,ne*=4294967296}return Ae},t.toString=function(Ae){if(Ae=Ae||10,2>Ae||36<Ae)throw Error("radix out of range: "+Ae);if(G(this))return"0";if(q(this))return"-"+Z(this).toString(Ae);for(var ne=b(Math.pow(Ae,6)),ue=this,ye="";;){var se=Pe(ue,ne).g;ue=Y(ue,se.j(ne));var le=((0<ue.g.length?ue.g[0]:ue.h)>>>0).toString(Ae);if(ue=se,G(ue))return le+ye;for(;6>le.length;)le="0"+le;ye=le+ye}},t.i=function(Ae){return 0>Ae?0:Ae<this.g.length?this.g[Ae]:this.h};function G(Ae){if(Ae.h!=0)return!1;for(var ne=0;ne<Ae.g.length;ne++)if(Ae.g[ne]!=0)return!1;return!0}function q(Ae){return Ae.h==-1}t.l=function(Ae){return Ae=Y(this,Ae),q(Ae)?-1:G(Ae)?0:1};function Z(Ae){for(var ne=Ae.g.length,ue=[],ye=0;ye<ne;ye++)ue[ye]=~Ae.g[ye];return new h(ue,~Ae.h).add(O)}t.abs=function(){return q(this)?Z(this):this},t.add=function(Ae){for(var ne=Math.max(this.g.length,Ae.g.length),ue=[],ye=0,se=0;se<=ne;se++){var le=ye+(this.i(se)&65535)+(Ae.i(se)&65535),ge=(le>>>16)+(this.i(se)>>>16)+(Ae.i(se)>>>16);ye=ge>>>16,le&=65535,ge&=65535,ue[se]=ge<<16|le}return new h(ue,ue[ue.length-1]&-2147483648?-1:0)};function Y(Ae,ne){return Ae.add(Z(ne))}t.j=function(Ae){if(G(this)||G(Ae))return I;if(q(this))return q(Ae)?Z(this).j(Z(Ae)):Z(Z(this).j(Ae));if(q(Ae))return Z(this.j(Z(Ae)));if(0>this.l(M)&&0>Ae.l(M))return b(this.m()*Ae.m());for(var ne=this.g.length+Ae.g.length,ue=[],ye=0;ye<2*ne;ye++)ue[ye]=0;for(ye=0;ye<this.g.length;ye++)for(var se=0;se<Ae.g.length;se++){var le=this.i(ye)>>>16,ge=this.i(ye)&65535,lt=Ae.i(se)>>>16,Ot=Ae.i(se)&65535;ue[2*ye+2*se]+=ge*Ot,te(ue,2*ye+2*se),ue[2*ye+2*se+1]+=le*Ot,te(ue,2*ye+2*se+1),ue[2*ye+2*se+1]+=ge*lt,te(ue,2*ye+2*se+1),ue[2*ye+2*se+2]+=le*lt,te(ue,2*ye+2*se+2)}for(ye=0;ye<ne;ye++)ue[ye]=ue[2*ye+1]<<16|ue[2*ye];for(ye=ne;ye<2*ne;ye++)ue[ye]=0;return new h(ue,0)};function te(Ae,ne){for(;(Ae[ne]&65535)!=Ae[ne];)Ae[ne+1]+=Ae[ne]>>>16,Ae[ne]&=65535,ne++}function be(Ae,ne){this.g=Ae,this.h=ne}function Pe(Ae,ne){if(G(ne))throw Error("division by zero");if(G(Ae))return new be(I,I);if(q(Ae))return ne=Pe(Z(Ae),ne),new be(Z(ne.g),Z(ne.h));if(q(ne))return ne=Pe(Ae,Z(ne)),new be(Z(ne.g),ne.h);if(30<Ae.g.length){if(q(Ae)||q(ne))throw Error("slowDivide_ only works with positive integers.");for(var ue=O,ye=ne;0>=ye.l(Ae);)ue=Se(ue),ye=Se(ye);var se=Ie(ue,1),le=Ie(ye,1);for(ye=Ie(ye,2),ue=Ie(ue,2);!G(ye);){var ge=le.add(ye);0>=ge.l(Ae)&&(se=se.add(ue),le=ge),ye=Ie(ye,1),ue=Ie(ue,1)}return ne=Y(Ae,se.j(ne)),new be(se,ne)}for(se=I;0<=Ae.l(ne);){for(ue=Math.max(1,Math.floor(Ae.m()/ne.m())),ye=Math.ceil(Math.log(ue)/Math.LN2),ye=48>=ye?1:Math.pow(2,ye-48),le=b(ue),ge=le.j(ne);q(ge)||0<ge.l(Ae);)ue-=ye,le=b(ue),ge=le.j(ne);G(le)&&(le=O),se=se.add(le),Ae=Y(Ae,ge)}return new be(se,Ae)}t.A=function(Ae){return Pe(this,Ae).h},t.and=function(Ae){for(var ne=Math.max(this.g.length,Ae.g.length),ue=[],ye=0;ye<ne;ye++)ue[ye]=this.i(ye)&Ae.i(ye);return new h(ue,this.h&Ae.h)},t.or=function(Ae){for(var ne=Math.max(this.g.length,Ae.g.length),ue=[],ye=0;ye<ne;ye++)ue[ye]=this.i(ye)|Ae.i(ye);return new h(ue,this.h|Ae.h)},t.xor=function(Ae){for(var ne=Math.max(this.g.length,Ae.g.length),ue=[],ye=0;ye<ne;ye++)ue[ye]=this.i(ye)^Ae.i(ye);return new h(ue,this.h^Ae.h)};function Se(Ae){for(var ne=Ae.g.length+1,ue=[],ye=0;ye<ne;ye++)ue[ye]=Ae.i(ye)<<1|Ae.i(ye-1)>>>31;return new h(ue,Ae.h)}function Ie(Ae,ne){var ue=ne>>5;ne%=32;for(var ye=Ae.g.length-ue,se=[],le=0;le<ye;le++)se[le]=0<ne?Ae.i(le+ue)>>>ne|Ae.i(le+ue+1)<<32-ne:Ae.i(le+ue);return new h(se,Ae.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,y9=r,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=b,h.fromString=E,ug=h}).apply(typeof u6<"u"?u6:typeof self<"u"?self:typeof window<"u"?window:{});var jw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _9,_v,v9,Hx,SI,b9,w9,x9;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(N,ae,fe){return N==Array.prototype||N==Object.prototype||(N[ae]=fe.value),N};function n(N){N=[typeof globalThis=="object"&&globalThis,N,typeof window=="object"&&window,typeof self=="object"&&self,typeof jw=="object"&&jw];for(var ae=0;ae<N.length;++ae){var fe=N[ae];if(fe&&fe.Math==Math)return fe}throw Error("Cannot find global object")}var r=n(this);function o(N,ae){if(ae)e:{var fe=r;N=N.split(".");for(var Le=0;Le<N.length-1;Le++){var an=N[Le];if(!(an in fe))break e;fe=fe[an]}N=N[N.length-1],Le=fe[N],ae=ae(Le),ae!=Le&&ae!=null&&e(fe,N,{configurable:!0,writable:!0,value:ae})}}function l(N,ae){N instanceof String&&(N+="");var fe=0,Le=!1,an={next:function(){if(!Le&&fe<N.length){var Qt=fe++;return{value:ae(Qt,N[Qt]),done:!1}}return Le=!0,{done:!0,value:void 0}}};return an[Symbol.iterator]=function(){return an},an}o("Array.prototype.values",function(N){return N||function(){return l(this,function(ae,fe){return fe})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},p=this||self;function i(N){var ae=typeof N;return ae=ae!="object"?ae:N?Array.isArray(N)?"array":ae:"null",ae=="array"||ae=="object"&&typeof N.length=="number"}function b(N){var ae=typeof N;return ae=="object"&&N!=null||ae=="function"}function E(N,ae,fe){return N.call.apply(N.bind,arguments)}function I(N,ae,fe){if(!N)throw Error();if(2<arguments.length){var Le=Array.prototype.slice.call(arguments,2);return function(){var an=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(an,Le),N.apply(ae,an)}}return function(){return N.apply(ae,arguments)}}function O(N,ae,fe){return O=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:I,O.apply(null,arguments)}function M(N,ae){var fe=Array.prototype.slice.call(arguments,1);return function(){var Le=fe.slice();return Le.push.apply(Le,arguments),N.apply(this,Le)}}function G(N,ae){function fe(){}fe.prototype=ae.prototype,N.aa=ae.prototype,N.prototype=new fe,N.prototype.constructor=N,N.Qb=function(Le,an,Qt){for(var nr=Array(arguments.length-2),di=2;di<arguments.length;di++)nr[di-2]=arguments[di];return ae.prototype[an].apply(Le,nr)}}function q(N){const ae=N.length;if(0<ae){const fe=Array(ae);for(let Le=0;Le<ae;Le++)fe[Le]=N[Le];return fe}return[]}function Z(N,ae){for(let fe=1;fe<arguments.length;fe++){const Le=arguments[fe];if(i(Le)){const an=N.length||0,Qt=Le.length||0;N.length=an+Qt;for(let nr=0;nr<Qt;nr++)N[an+nr]=Le[nr]}else N.push(Le)}}class Y{constructor(ae,fe){this.i=ae,this.j=fe,this.h=0,this.g=null}get(){let ae;return 0<this.h?(this.h--,ae=this.g,this.g=ae.next,ae.next=null):ae=this.i(),ae}}function te(N){return/^[\s\xa0]*$/.test(N)}function be(){var N=p.navigator;return N&&(N=N.userAgent)?N:""}function Pe(N){return Pe[" "](N),N}Pe[" "]=function(){};var Se=be().indexOf("Gecko")!=-1&&!(be().toLowerCase().indexOf("webkit")!=-1&&be().indexOf("Edge")==-1)&&!(be().indexOf("Trident")!=-1||be().indexOf("MSIE")!=-1)&&be().indexOf("Edge")==-1;function Ie(N,ae,fe){for(const Le in N)ae.call(fe,N[Le],Le,N)}function Ae(N,ae){for(const fe in N)ae.call(void 0,N[fe],fe,N)}function ne(N){const ae={};for(const fe in N)ae[fe]=N[fe];return ae}const ue="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ye(N,ae){let fe,Le;for(let an=1;an<arguments.length;an++){Le=arguments[an];for(fe in Le)N[fe]=Le[fe];for(let Qt=0;Qt<ue.length;Qt++)fe=ue[Qt],Object.prototype.hasOwnProperty.call(Le,fe)&&(N[fe]=Le[fe])}}function se(N){var ae=1;N=N.split(":");const fe=[];for(;0<ae&&N.length;)fe.push(N.shift()),ae--;return N.length&&fe.push(N.join(":")),fe}function le(N){p.setTimeout(()=>{throw N},0)}function ge(){var N=on;let ae=null;return N.g&&(ae=N.g,N.g=N.g.next,N.g||(N.h=null),ae.next=null),ae}class lt{constructor(){this.h=this.g=null}add(ae,fe){const Le=Ot.get();Le.set(ae,fe),this.h?this.h.next=Le:this.g=Le,this.h=Le}}var Ot=new Y(()=>new gt,N=>N.reset());class gt{constructor(){this.next=this.g=this.h=null}set(ae,fe){this.h=ae,this.g=fe,this.next=null}reset(){this.next=this.g=this.h=null}}let Tt,Mt=!1,on=new lt,Ut=()=>{const N=p.Promise.resolve(void 0);Tt=()=>{N.then(In)}};var In=()=>{for(var N;N=ge();){try{N.h.call(N.g)}catch(fe){le(fe)}var ae=Ot;ae.j(N),100>ae.h&&(ae.h++,N.next=ae.g,ae.g=N)}Mt=!1};function Ee(){this.s=this.s,this.C=this.C}Ee.prototype.s=!1,Ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $e(N,ae){this.type=N,this.g=this.target=ae,this.defaultPrevented=!1}$e.prototype.h=function(){this.defaultPrevented=!0};var We=function(){if(!p.addEventListener||!Object.defineProperty)return!1;var N=!1,ae=Object.defineProperty({},"passive",{get:function(){N=!0}});try{const fe=()=>{};p.addEventListener("test",fe,ae),p.removeEventListener("test",fe,ae)}catch{}return N}();function vt(N,ae){if($e.call(this,N?N.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,N){var fe=this.type=N.type,Le=N.changedTouches&&N.changedTouches.length?N.changedTouches[0]:null;if(this.target=N.target||N.srcElement,this.g=ae,ae=N.relatedTarget){if(Se){e:{try{Pe(ae.nodeName);var an=!0;break e}catch{}an=!1}an||(ae=null)}}else fe=="mouseover"?ae=N.fromElement:fe=="mouseout"&&(ae=N.toElement);this.relatedTarget=ae,Le?(this.clientX=Le.clientX!==void 0?Le.clientX:Le.pageX,this.clientY=Le.clientY!==void 0?Le.clientY:Le.pageY,this.screenX=Le.screenX||0,this.screenY=Le.screenY||0):(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0),this.button=N.button,this.key=N.key||"",this.ctrlKey=N.ctrlKey,this.altKey=N.altKey,this.shiftKey=N.shiftKey,this.metaKey=N.metaKey,this.pointerId=N.pointerId||0,this.pointerType=typeof N.pointerType=="string"?N.pointerType:_t[N.pointerType]||"",this.state=N.state,this.i=N,N.defaultPrevented&&vt.aa.h.call(this)}}G(vt,$e);var _t={2:"touch",3:"pen",4:"mouse"};vt.prototype.h=function(){vt.aa.h.call(this);var N=this.i;N.preventDefault?N.preventDefault():N.returnValue=!1};var at="closure_listenable_"+(1e6*Math.random()|0),Ft=0;function Dt(N,ae,fe,Le,an){this.listener=N,this.proxy=null,this.src=ae,this.type=fe,this.capture=!!Le,this.ha=an,this.key=++Ft,this.da=this.fa=!1}function yn(N){N.da=!0,N.listener=null,N.proxy=null,N.src=null,N.ha=null}function De(N){this.src=N,this.g={},this.h=0}De.prototype.add=function(N,ae,fe,Le,an){var Qt=N.toString();N=this.g[Qt],N||(N=this.g[Qt]=[],this.h++);var nr=Te(N,ae,Le,an);return-1<nr?(ae=N[nr],fe||(ae.fa=!1)):(ae=new Dt(ae,this.src,Qt,!!Le,an),ae.fa=fe,N.push(ae)),ae};function jn(N,ae){var fe=ae.type;if(fe in N.g){var Le=N.g[fe],an=Array.prototype.indexOf.call(Le,ae,void 0),Qt;(Qt=0<=an)&&Array.prototype.splice.call(Le,an,1),Qt&&(yn(ae),N.g[fe].length==0&&(delete N.g[fe],N.h--))}}function Te(N,ae,fe,Le){for(var an=0;an<N.length;++an){var Qt=N[an];if(!Qt.da&&Qt.listener==ae&&Qt.capture==!!fe&&Qt.ha==Le)return an}return-1}var Je="closure_lm_"+(1e6*Math.random()|0),Fe={};function Re(N,ae,fe,Le,an){if(Array.isArray(ae)){for(var Qt=0;Qt<ae.length;Qt++)Re(N,ae[Qt],fe,Le,an);return null}return fe=_n(fe),N&&N[at]?N.K(ae,fe,b(Le)?!!Le.capture:!!Le,an):Yt(N,ae,fe,!1,Le,an)}function Yt(N,ae,fe,Le,an,Qt){if(!ae)throw Error("Invalid event type");var nr=b(an)?!!an.capture:!!an,di=Fn(N);if(di||(N[Je]=di=new De(N)),fe=di.add(ae,fe,Le,nr,Qt),fe.proxy)return fe;if(Le=rn(),fe.proxy=Le,Le.src=N,Le.listener=fe,N.addEventListener)We||(an=nr),an===void 0&&(an=!1),N.addEventListener(ae.toString(),Le,an);else if(N.attachEvent)N.attachEvent(gn(ae.toString()),Le);else if(N.addListener&&N.removeListener)N.addListener(Le);else throw Error("addEventListener and attachEvent are unavailable.");return fe}function rn(){function N(fe){return ae.call(N.src,N.listener,fe)}const ae=fn;return N}function zt(N,ae,fe,Le,an){if(Array.isArray(ae))for(var Qt=0;Qt<ae.length;Qt++)zt(N,ae[Qt],fe,Le,an);else Le=b(Le)?!!Le.capture:!!Le,fe=_n(fe),N&&N[at]?(N=N.i,ae=String(ae).toString(),ae in N.g&&(Qt=N.g[ae],fe=Te(Qt,fe,Le,an),-1<fe&&(yn(Qt[fe]),Array.prototype.splice.call(Qt,fe,1),Qt.length==0&&(delete N.g[ae],N.h--)))):N&&(N=Fn(N))&&(ae=N.g[ae.toString()],N=-1,ae&&(N=Te(ae,fe,Le,an)),(fe=-1<N?ae[N]:null)&&Jt(fe))}function Jt(N){if(typeof N!="number"&&N&&!N.da){var ae=N.src;if(ae&&ae[at])jn(ae.i,N);else{var fe=N.type,Le=N.proxy;ae.removeEventListener?ae.removeEventListener(fe,Le,N.capture):ae.detachEvent?ae.detachEvent(gn(fe),Le):ae.addListener&&ae.removeListener&&ae.removeListener(Le),(fe=Fn(ae))?(jn(fe,N),fe.h==0&&(fe.src=null,ae[Je]=null)):yn(N)}}}function gn(N){return N in Fe?Fe[N]:Fe[N]="on"+N}function fn(N,ae){if(N.da)N=!0;else{ae=new vt(ae,this);var fe=N.listener,Le=N.ha||N.src;N.fa&&Jt(N),N=fe.call(Le,ae)}return N}function Fn(N){return N=N[Je],N instanceof De?N:null}var Wn="__closure_events_fn_"+(1e9*Math.random()>>>0);function _n(N){return typeof N=="function"?N:(N[Wn]||(N[Wn]=function(ae){return N.handleEvent(ae)}),N[Wn])}function er(){Ee.call(this),this.i=new De(this),this.M=this,this.F=null}G(er,Ee),er.prototype[at]=!0,er.prototype.removeEventListener=function(N,ae,fe,Le){zt(this,N,ae,fe,Le)};function ar(N,ae){var fe,Le=N.F;if(Le)for(fe=[];Le;Le=Le.F)fe.push(Le);if(N=N.M,Le=ae.type||ae,typeof ae=="string")ae=new $e(ae,N);else if(ae instanceof $e)ae.target=ae.target||N;else{var an=ae;ae=new $e(Le,N),ye(ae,an)}if(an=!0,fe)for(var Qt=fe.length-1;0<=Qt;Qt--){var nr=ae.g=fe[Qt];an=Fr(nr,Le,!0,ae)&&an}if(nr=ae.g=N,an=Fr(nr,Le,!0,ae)&&an,an=Fr(nr,Le,!1,ae)&&an,fe)for(Qt=0;Qt<fe.length;Qt++)nr=ae.g=fe[Qt],an=Fr(nr,Le,!1,ae)&&an}er.prototype.N=function(){if(er.aa.N.call(this),this.i){var N=this.i,ae;for(ae in N.g){for(var fe=N.g[ae],Le=0;Le<fe.length;Le++)yn(fe[Le]);delete N.g[ae],N.h--}}this.F=null},er.prototype.K=function(N,ae,fe,Le){return this.i.add(String(N),ae,!1,fe,Le)},er.prototype.L=function(N,ae,fe,Le){return this.i.add(String(N),ae,!0,fe,Le)};function Fr(N,ae,fe,Le){if(ae=N.i.g[String(ae)],!ae)return!0;ae=ae.concat();for(var an=!0,Qt=0;Qt<ae.length;++Qt){var nr=ae[Qt];if(nr&&!nr.da&&nr.capture==fe){var di=nr.listener,ir=nr.ha||nr.src;nr.fa&&jn(N.i,nr),an=di.call(ir,Le)!==!1&&an}}return an&&!Le.defaultPrevented}function lr(N,ae,fe){if(typeof N=="function")fe&&(N=O(N,fe));else if(N&&typeof N.handleEvent=="function")N=O(N.handleEvent,N);else throw Error("Invalid listener argument");return 2147483647<Number(ae)?-1:p.setTimeout(N,ae||0)}function Ir(N){N.g=lr(()=>{N.g=null,N.i&&(N.i=!1,Ir(N))},N.l);const ae=N.h;N.h=null,N.m.apply(null,ae)}class pr extends Ee{constructor(ae,fe){super(),this.m=ae,this.l=fe,this.h=null,this.i=!1,this.g=null}j(ae){this.h=arguments,this.g?this.i=!0:Ir(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function to(N){Ee.call(this),this.h=N,this.g={}}G(to,Ee);var xi=[];function No(N){Ie(N.g,function(ae,fe){this.g.hasOwnProperty(fe)&&Jt(ae)},N),N.g={}}to.prototype.N=function(){to.aa.N.call(this),No(this)},to.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fi=p.JSON.stringify,pi=p.JSON.parse,Wi=class{stringify(N){return p.JSON.stringify(N,void 0)}parse(N){return p.JSON.parse(N,void 0)}};function Ti(){}Ti.prototype.h=null;function Jr(N){return N.h||(N.h=N.i())}function Xi(){}var Ns={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ns(){$e.call(this,"d")}G(ns,$e);function lo(){$e.call(this,"c")}G(lo,$e);var Gr={},Ni=null;function Pa(){return Ni=Ni||new er}Gr.La="serverreachability";function Zo(N){$e.call(this,Gr.La,N)}G(Zo,$e);function jt(N){const ae=Pa();ar(ae,new Zo(ae))}Gr.STAT_EVENT="statevent";function we(N,ae){$e.call(this,Gr.STAT_EVENT,N),this.stat=ae}G(we,$e);function Ce(N){const ae=Pa();ar(ae,new we(ae,N))}Gr.Ma="timingevent";function Ye(N,ae){$e.call(this,Gr.Ma,N),this.size=ae}G(Ye,$e);function dt(N,ae){if(typeof N!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){N()},ae)}function ot(){this.g=!0}ot.prototype.xa=function(){this.g=!1};function wt(N,ae,fe,Le,an,Qt){N.info(function(){if(N.g)if(Qt)for(var nr="",di=Qt.split("&"),ir=0;ir<di.length;ir++){var Ai=di[ir].split("=");if(1<Ai.length){var ro=Ai[0];Ai=Ai[1];var ko=ro.split("_");nr=2<=ko.length&&ko[1]=="type"?nr+(ro+"="+Ai+"&"):nr+(ro+"=redacted&")}}else nr=null;else nr=Qt;return"XMLHTTP REQ ("+Le+") [attempt "+an+"]: "+ae+`
`+fe+`
`+nr})}function Vt(N,ae,fe,Le,an,Qt,nr){N.info(function(){return"XMLHTTP RESP ("+Le+") [ attempt "+an+"]: "+ae+`
`+fe+`
`+Qt+" "+nr})}function St(N,ae,fe,Le){N.info(function(){return"XMLHTTP TEXT ("+ae+"): "+nn(N,fe)+(Le?" "+Le:"")})}function Gt(N,ae){N.info(function(){return"TIMEOUT: "+ae})}ot.prototype.info=function(){};function nn(N,ae){if(!N.g)return ae;if(!ae)return null;try{var fe=JSON.parse(ae);if(fe){for(N=0;N<fe.length;N++)if(Array.isArray(fe[N])){var Le=fe[N];if(!(2>Le.length)){var an=Le[1];if(Array.isArray(an)&&!(1>an.length)){var Qt=an[0];if(Qt!="noop"&&Qt!="stop"&&Qt!="close")for(var nr=1;nr<an.length;nr++)an[nr]=""}}}}return Fi(fe)}catch{return ae}}var qt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},En={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},zn;function Vn(){}G(Vn,Ti),Vn.prototype.g=function(){return new XMLHttpRequest},Vn.prototype.i=function(){return{}},zn=new Vn;function gr(N,ae,fe,Le){this.j=N,this.i=ae,this.l=fe,this.R=Le||1,this.U=new to(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Er}function Er(){this.i=null,this.g="",this.h=!1}var Tr={},Br={};function hi(N,ae,fe){N.L=1,N.v=Qc(qs(ae)),N.m=fe,N.P=!0,mi(N,null)}function mi(N,ae){N.F=Date.now(),$i(N),N.A=qs(N.v);var fe=N.A,Le=N.R;Array.isArray(Le)||(Le=[String(Le)]),$n(fe.i,"t",Le),N.C=0,fe=N.j.J,N.h=new Er,N.g=ke(N.j,fe?ae:null,!N.m),0<N.O&&(N.M=new pr(O(N.Y,N,N.g),N.O)),ae=N.U,fe=N.g,Le=N.ca;var an="readystatechange";Array.isArray(an)||(an&&(xi[0]=an.toString()),an=xi);for(var Qt=0;Qt<an.length;Qt++){var nr=Re(fe,an[Qt],Le||ae.handleEvent,!1,ae.h||ae);if(!nr)break;ae.g[nr.key]=nr}ae=N.H?ne(N.H):{},N.m?(N.u||(N.u="POST"),ae["Content-Type"]="application/x-www-form-urlencoded",N.g.ea(N.A,N.u,N.m,ae)):(N.u="GET",N.g.ea(N.A,N.u,null,ae)),jt(),wt(N.i,N.u,N.A,N.l,N.R,N.m)}gr.prototype.ca=function(N){N=N.target;const ae=this.M;ae&&yo(N)==3?ae.j():this.Y(N)},gr.prototype.Y=function(N){try{if(N==this.g)e:{const ko=yo(this.g);var ae=this.g.Ba();const ha=this.g.Z();if(!(3>ko)&&(ko!=3||this.g&&(this.h.h||this.g.oa()||Rs(this.g)))){this.J||ko!=4||ae==7||(ae==8||0>=ha?jt(3):jt(2)),Co(this);var fe=this.g.Z();this.X=fe;t:if(Mr(this)){var Le=Rs(this.g);N="";var an=Le.length,Qt=yo(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ps(this),$o(this);var nr="";break t}this.h.i=new p.TextDecoder}for(ae=0;ae<an;ae++)this.h.h=!0,N+=this.h.i.decode(Le[ae],{stream:!(Qt&&ae==an-1)});Le.length=0,this.h.g+=N,this.C=0,nr=this.h.g}else nr=this.g.oa();if(this.o=fe==200,Vt(this.i,this.u,this.A,this.l,this.R,ko,fe),this.o){if(this.T&&!this.K){t:{if(this.g){var di,ir=this.g;if((di=ir.g?ir.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!te(di)){var Ai=di;break t}}Ai=null}if(fe=Ai)St(this.i,this.l,fe,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ya(this,fe);else{this.o=!1,this.s=3,Ce(12),Ps(this),$o(this);break e}}if(this.P){fe=!0;let ys;for(;!this.J&&this.C<nr.length;)if(ys=Ci(this,nr),ys==Br){ko==4&&(this.s=4,Ce(14),fe=!1),St(this.i,this.l,null,"[Incomplete Response]");break}else if(ys==Tr){this.s=4,Ce(15),St(this.i,this.l,nr,"[Invalid Chunk]"),fe=!1;break}else St(this.i,this.l,ys,null),ya(this,ys);if(Mr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ko!=4||nr.length!=0||this.h.h||(this.s=1,Ce(16),fe=!1),this.o=this.o&&fe,!fe)St(this.i,this.l,nr,"[Invalid Chunked Response]"),Ps(this),$o(this);else if(0<nr.length&&!this.W){this.W=!0;var ro=this.j;ro.g==this&&ro.ba&&!ro.M&&(ro.j.info("Great, no buffering proxy detected. Bytes received: "+nr.length),Ma(ro),ro.M=!0,Ce(11))}}else St(this.i,this.l,nr,null),ya(this,nr);ko==4&&Ps(this),this.o&&!this.J&&(ko==4?gs(this.j,this):(this.o=!1,$i(this)))}else us(this.g),fe==400&&0<nr.indexOf("Unknown SID")?(this.s=3,Ce(12)):(this.s=0,Ce(13)),Ps(this),$o(this)}}}catch{}finally{}};function Mr(N){return N.g?N.u=="GET"&&N.L!=2&&N.j.Ca:!1}function Ci(N,ae){var fe=N.C,Le=ae.indexOf(`
`,fe);return Le==-1?Br:(fe=Number(ae.substring(fe,Le)),isNaN(fe)?Tr:(Le+=1,Le+fe>ae.length?Br:(ae=ae.slice(Le,Le+fe),N.C=Le+fe,ae)))}gr.prototype.cancel=function(){this.J=!0,Ps(this)};function $i(N){N.S=Date.now()+N.I,jo(N,N.I)}function jo(N,ae){if(N.B!=null)throw Error("WatchDog timer not null");N.B=dt(O(N.ba,N),ae)}function Co(N){N.B&&(p.clearTimeout(N.B),N.B=null)}gr.prototype.ba=function(){this.B=null;const N=Date.now();0<=N-this.S?(Gt(this.i,this.A),this.L!=2&&(jt(),Ce(17)),Ps(this),this.s=2,$o(this)):jo(this,this.S-N)};function $o(N){N.j.G==0||N.J||gs(N.j,N)}function Ps(N){Co(N);var ae=N.M;ae&&typeof ae.ma=="function"&&ae.ma(),N.M=null,No(N.U),N.g&&(ae=N.g,N.g=null,ae.abort(),ae.ma())}function ya(N,ae){try{var fe=N.j;if(fe.G!=0&&(fe.g==N||Ql(fe.h,N))){if(!N.K&&Ql(fe.h,N)&&fe.G==3){try{var Le=fe.Da.g.parse(ae)}catch{Le=null}if(Array.isArray(Le)&&Le.length==3){var an=Le;if(an[0]==0){e:if(!fe.u){if(fe.g)if(fe.g.F+3e3<N.F)ql(fe),xs(fe);else break e;Kl(fe),Ce(18)}}else fe.za=an[1],0<fe.za-fe.T&&37500>an[2]&&fe.F&&fe.v==0&&!fe.C&&(fe.C=dt(O(fe.Za,fe),6e3));if(1>=Vl(fe.h)&&fe.ca){try{fe.ca()}catch{}fe.ca=void 0}}else Zs(fe,11)}else if((N.K||fe.g==N)&&ql(fe),!te(ae))for(an=fe.Da.g.parse(ae),ae=0;ae<an.length;ae++){let Ai=an[ae];if(fe.T=Ai[0],Ai=Ai[1],fe.G==2)if(Ai[0]=="c"){fe.K=Ai[1],fe.ia=Ai[2];const ro=Ai[3];ro!=null&&(fe.la=ro,fe.j.info("VER="+fe.la));const ko=Ai[4];ko!=null&&(fe.Aa=ko,fe.j.info("SVER="+fe.Aa));const ha=Ai[5];ha!=null&&typeof ha=="number"&&0<ha&&(Le=1.5*ha,fe.L=Le,fe.j.info("backChannelRequestTimeoutMs_="+Le)),Le=fe;const ys=N.g;if(ys){const Jo=ys.g?ys.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jo){var Qt=Le.h;Qt.g||Jo.indexOf("spdy")==-1&&Jo.indexOf("quic")==-1&&Jo.indexOf("h2")==-1||(Qt.j=Qt.l,Qt.g=new Set,Qt.h&&(Go(Qt,Qt.h),Qt.h=null))}if(Le.D){const xl=ys.g?ys.g.getResponseHeader("X-HTTP-Session-Id"):null;xl&&(Le.ya=xl,co(Le.I,Le.D,xl))}}fe.G=3,fe.l&&fe.l.ua(),fe.ba&&(fe.R=Date.now()-N.F,fe.j.info("Handshake RTT: "+fe.R+"ms")),Le=fe;var nr=N;if(Le.qa=X(Le,Le.J?Le.ia:null,Le.W),nr.K){vu(Le.h,nr);var di=nr,ir=Le.L;ir&&(di.I=ir),di.B&&(Co(di),$i(di)),Le.g=nr}else ll(Le);0<fe.i.length&&qo(fe)}else Ai[0]!="stop"&&Ai[0]!="close"||Zs(fe,7);else fe.G==3&&(Ai[0]=="stop"||Ai[0]=="close"?Ai[0]=="stop"?Zs(fe,7):no(fe):Ai[0]!="noop"&&fe.l&&fe.l.ta(Ai),fe.v=0)}}jt(4)}catch{}}var Xu=class{constructor(N,ae){this.g=N,this.map=ae}};function yc(N){this.l=N||10,p.PerformanceNavigationTiming?(N=p.performance.getEntriesByType("navigation"),N=0<N.length&&(N[0].nextHopProtocol=="hq"||N[0].nextHopProtocol=="h2")):N=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=N?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _c(N){return N.h?!0:N.g?N.g.size>=N.j:!1}function Vl(N){return N.h?1:N.g?N.g.size:0}function Ql(N,ae){return N.h?N.h==ae:N.g?N.g.has(ae):!1}function Go(N,ae){N.g?N.g.add(ae):N.h=ae}function vu(N,ae){N.h&&N.h==ae?N.h=null:N.g&&N.g.has(ae)&&N.g.delete(ae)}yc.prototype.cancel=function(){if(this.i=vc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const N of this.g.values())N.cancel();this.g.clear()}};function vc(N){if(N.h!=null)return N.i.concat(N.h.D);if(N.g!=null&&N.g.size!==0){let ae=N.i;for(const fe of N.g.values())ae=ae.concat(fe.D);return ae}return q(N.i)}function bc(N){if(N.V&&typeof N.V=="function")return N.V();if(typeof Map<"u"&&N instanceof Map||typeof Set<"u"&&N instanceof Set)return Array.from(N.values());if(typeof N=="string")return N.split("");if(i(N)){for(var ae=[],fe=N.length,Le=0;Le<fe;Le++)ae.push(N[Le]);return ae}ae=[],fe=0;for(Le in N)ae[fe++]=N[Le];return ae}function sa(N){if(N.na&&typeof N.na=="function")return N.na();if(!N.V||typeof N.V!="function"){if(typeof Map<"u"&&N instanceof Map)return Array.from(N.keys());if(!(typeof Set<"u"&&N instanceof Set)){if(i(N)||typeof N=="string"){var ae=[];N=N.length;for(var fe=0;fe<N;fe++)ae.push(fe);return ae}ae=[],fe=0;for(const Le in N)ae[fe++]=Le;return ae}}}function La(N,ae){if(N.forEach&&typeof N.forEach=="function")N.forEach(ae,void 0);else if(i(N)||typeof N=="string")Array.prototype.forEach.call(N,ae,void 0);else for(var fe=sa(N),Le=bc(N),an=Le.length,Qt=0;Qt<an;Qt++)ae.call(void 0,Le[Qt],fe&&fe[Qt],N)}var ls=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ls(N,ae){if(N){N=N.split("&");for(var fe=0;fe<N.length;fe++){var Le=N[fe].indexOf("="),an=null;if(0<=Le){var Qt=N[fe].substring(0,Le);an=N[fe].substring(Le+1)}else Qt=N[fe];ae(Qt,an?decodeURIComponent(an.replace(/\+/g," ")):"")}}}function go(N){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,N instanceof go){this.h=N.h,wc(this,N.j),this.o=N.o,this.g=N.g,Vc(this,N.s),this.l=N.l;var ae=N.i,fe=new ei;fe.i=ae.i,ae.g&&(fe.g=new Map(ae.g),fe.h=ae.h),Fa(this,fe),this.m=N.m}else N&&(ae=String(N).match(ls))?(this.h=!1,wc(this,ae[1]||"",!0),this.o=bu(ae[2]||""),this.g=bu(ae[3]||"",!0),Vc(this,ae[4]),this.l=bu(ae[5]||"",!0),Fa(this,ae[6]||"",!0),this.m=bu(ae[7]||"")):(this.h=!1,this.i=new ei(null,this.h))}go.prototype.toString=function(){var N=[],ae=this.j;ae&&N.push(cs(ae,Hc,!0),":");var fe=this.g;return(fe||ae=="file")&&(N.push("//"),(ae=this.o)&&N.push(cs(ae,Hc,!0),"@"),N.push(encodeURIComponent(String(fe)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),fe=this.s,fe!=null&&N.push(":",String(fe))),(fe=this.l)&&(this.g&&fe.charAt(0)!="/"&&N.push("/"),N.push(cs(fe,fe.charAt(0)=="/"?bl:jc,!0))),(fe=this.i.toString())&&N.push("?",fe),(fe=this.m)&&N.push("#",cs(fe,$c)),N.join("")};function qs(N){return new go(N)}function wc(N,ae,fe){N.j=fe?bu(ae,!0):ae,N.j&&(N.j=N.j.replace(/:$/,""))}function Vc(N,ae){if(ae){if(ae=Number(ae),isNaN(ae)||0>ae)throw Error("Bad port number "+ae);N.s=ae}else N.s=null}function Fa(N,ae,fe){ae instanceof ei?(N.i=ae,xc(N.i,N.h)):(fe||(ae=cs(ae,wl)),N.i=new ei(ae,N.h))}function co(N,ae,fe){N.i.set(ae,fe)}function Qc(N){return co(N,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),N}function bu(N,ae){return N?ae?decodeURI(N.replace(/%25/g,"%2525")):decodeURIComponent(N):""}function cs(N,ae,fe){return typeof N=="string"?(N=encodeURI(N).replace(ae,Hl),fe&&(N=N.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N):null}function Hl(N){return N=N.charCodeAt(0),"%"+(N>>4&15).toString(16)+(N&15).toString(16)}var Hc=/[#\/\?@]/g,jc=/[#\?:]/g,bl=/[#\?]/g,wl=/[#\?@]/g,$c=/#/g;function ei(N,ae){this.h=this.g=null,this.i=N||null,this.j=!!ae}function Ko(N){N.g||(N.g=new Map,N.h=0,N.i&&Ls(N.i,function(ae,fe){N.add(decodeURIComponent(ae.replace(/\+/g," ")),fe)}))}t=ei.prototype,t.add=function(N,ae){Ko(this),this.i=null,N=sl(this,N);var fe=this.g.get(N);return fe||this.g.set(N,fe=[]),fe.push(ae),this.h+=1,this};function _i(N,ae){Ko(N),ae=sl(N,ae),N.g.has(ae)&&(N.i=null,N.h-=N.g.get(ae).length,N.g.delete(ae))}function Dh(N,ae){return Ko(N),ae=sl(N,ae),N.g.has(ae)}t.forEach=function(N,ae){Ko(this),this.g.forEach(function(fe,Le){fe.forEach(function(an){N.call(ae,an,Le,this)},this)},this)},t.na=function(){Ko(this);const N=Array.from(this.g.values()),ae=Array.from(this.g.keys()),fe=[];for(let Le=0;Le<ae.length;Le++){const an=N[Le];for(let Qt=0;Qt<an.length;Qt++)fe.push(ae[Le])}return fe},t.V=function(N){Ko(this);let ae=[];if(typeof N=="string")Dh(this,N)&&(ae=ae.concat(this.g.get(sl(this,N))));else{N=Array.from(this.g.values());for(let fe=0;fe<N.length;fe++)ae=ae.concat(N[fe])}return ae},t.set=function(N,ae){return Ko(this),this.i=null,N=sl(this,N),Dh(this,N)&&(this.h-=this.g.get(N).length),this.g.set(N,[ae]),this.h+=1,this},t.get=function(N,ae){return N?(N=this.V(N),0<N.length?String(N[0]):ae):ae};function $n(N,ae,fe){_i(N,ae),0<fe.length&&(N.i=null,N.g.set(sl(N,ae),q(fe)),N.h+=fe.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const N=[],ae=Array.from(this.g.keys());for(var fe=0;fe<ae.length;fe++){var Le=ae[fe];const Qt=encodeURIComponent(String(Le)),nr=this.V(Le);for(Le=0;Le<nr.length;Le++){var an=Qt;nr[Le]!==""&&(an+="="+encodeURIComponent(String(nr[Le]))),N.push(an)}}return this.i=N.join("&")};function sl(N,ae){return ae=String(ae),N.j&&(ae=ae.toLowerCase()),ae}function xc(N,ae){ae&&!N.j&&(Ko(N),N.i=null,N.g.forEach(function(fe,Le){var an=Le.toLowerCase();Le!=an&&(_i(this,Le),$n(this,an,fe))},N)),N.j=ae}function _a(N,ae){const fe=new ot;if(p.Image){const Le=new Image;Le.onload=M(Ra,fe,"TestLoadImage: loaded",!0,ae,Le),Le.onerror=M(Ra,fe,"TestLoadImage: error",!1,ae,Le),Le.onabort=M(Ra,fe,"TestLoadImage: abort",!1,ae,Le),Le.ontimeout=M(Ra,fe,"TestLoadImage: timeout",!1,ae,Le),p.setTimeout(function(){Le.ontimeout&&Le.ontimeout()},1e4),Le.src=N}else ae(!1)}function ja(N,ae){const fe=new ot,Le=new AbortController,an=setTimeout(()=>{Le.abort(),Ra(fe,"TestPingServer: timeout",!1,ae)},1e4);fetch(N,{signal:Le.signal}).then(Qt=>{clearTimeout(an),Qt.ok?Ra(fe,"TestPingServer: ok",!0,ae):Ra(fe,"TestPingServer: server error",!1,ae)}).catch(()=>{clearTimeout(an),Ra(fe,"TestPingServer: error",!1,ae)})}function Ra(N,ae,fe,Le,an){try{an&&(an.onload=null,an.onerror=null,an.onabort=null,an.ontimeout=null),Le(fe)}catch{}}function aa(){this.g=new Wi}function tr(N,ae,fe){const Le=fe||"";try{La(N,function(an,Qt){let nr=an;b(an)&&(nr=Fi(an)),ae.push(Le+Qt+"="+encodeURIComponent(nr))})}catch(an){throw ae.push(Le+"type="+encodeURIComponent("_badmap")),an}}function ti(N){this.l=N.Ub||null,this.j=N.eb||!1}G(ti,Ti),ti.prototype.g=function(){return new ni(this.l,this.j)},ti.prototype.i=function(N){return function(){return N}}({});function ni(N,ae){er.call(this),this.D=N,this.o=ae,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}G(ni,er),t=ni.prototype,t.open=function(N,ae){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=N,this.A=ae,this.readyState=1,$r(this)},t.send=function(N){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const ae={headers:this.u,method:this.B,credentials:this.m,cache:void 0};N&&(ae.body=N),(this.D||p).fetch(new Request(this.A,ae)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yo(this)),this.readyState=0},t.Sa=function(N){if(this.g&&(this.l=N,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=N.headers,this.readyState=2,$r(this)),this.g&&(this.readyState=3,$r(this),this.g)))if(this.responseType==="arraybuffer")N.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in N){if(this.j=N.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ws(this)}else N.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ws(N){N.j.read().then(N.Pa.bind(N)).catch(N.ga.bind(N))}t.Pa=function(N){if(this.g){if(this.o&&N.value)this.response.push(N.value);else if(!this.o){var ae=N.value?N.value:new Uint8Array(0);(ae=this.v.decode(ae,{stream:!N.done}))&&(this.response=this.responseText+=ae)}N.done?Yo(this):$r(this),this.readyState==3&&Ws(this)}},t.Ra=function(N){this.g&&(this.response=this.responseText=N,Yo(this))},t.Qa=function(N){this.g&&(this.response=N,Yo(this))},t.ga=function(){this.g&&Yo(this)};function Yo(N){N.readyState=4,N.l=null,N.j=null,N.v=null,$r(N)}t.setRequestHeader=function(N,ae){this.u.append(N,ae)},t.getResponseHeader=function(N){return this.h&&this.h.get(N.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const N=[],ae=this.h.entries();for(var fe=ae.next();!fe.done;)fe=fe.value,N.push(fe[0]+": "+fe[1]),fe=ae.next();return N.join(`\r
`)};function $r(N){N.onreadystatechange&&N.onreadystatechange.call(N)}Object.defineProperty(ni.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(N){this.m=N?"include":"same-origin"}});function al(N){let ae="";return Ie(N,function(fe,Le){ae+=Le,ae+=":",ae+=fe,ae+=`\r
`}),ae}function jl(N,ae,fe){e:{for(Le in fe){var Le=!1;break e}Le=!0}Le||(fe=al(fe),typeof N=="string"?fe!=null&&encodeURIComponent(String(fe)):co(N,ae,fe))}function Gi(N){er.call(this),this.headers=new Map,this.o=N||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}G(Gi,er);var Fs=/^https?$/i,uo=["POST","PUT"];t=Gi.prototype,t.Ha=function(N){this.J=N},t.ea=function(N,ae,fe,Le){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+N);ae=ae?ae.toUpperCase():"GET",this.D=N,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():zn.g(),this.v=this.o?Jr(this.o):Jr(zn),this.g.onreadystatechange=O(this.Ea,this);try{this.B=!0,this.g.open(ae,String(N),!0),this.B=!1}catch(Qt){Zu(this,Qt);return}if(N=fe||"",fe=new Map(this.headers),Le)if(Object.getPrototypeOf(Le)===Object.prototype)for(var an in Le)fe.set(an,Le[an]);else if(typeof Le.keys=="function"&&typeof Le.get=="function")for(const Qt of Le.keys())fe.set(Qt,Le.get(Qt));else throw Error("Unknown input type for opt_headers: "+String(Le));Le=Array.from(fe.keys()).find(Qt=>Qt.toLowerCase()=="content-type"),an=p.FormData&&N instanceof p.FormData,!(0<=Array.prototype.indexOf.call(uo,ae,void 0))||Le||an||fe.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Qt,nr]of fe)this.g.setRequestHeader(Qt,nr);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ka(this),this.u=!0,this.g.send(N),this.u=!1}catch(Qt){Zu(this,Qt)}};function Zu(N,ae){N.h=!1,N.g&&(N.j=!0,N.g.abort(),N.j=!1),N.l=ae,N.m=5,$l(N),la(N)}function $l(N){N.A||(N.A=!0,ar(N,"complete"),ar(N,"error"))}t.abort=function(N){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=N||7,ar(this,"complete"),ar(this,"abort"),la(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),la(this,!0)),Gi.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Gl(this):this.bb())},t.bb=function(){Gl(this)};function Gl(N){if(N.h&&typeof h<"u"&&(!N.v[1]||yo(N)!=4||N.Z()!=2)){if(N.u&&yo(N)==4)lr(N.Ea,0,N);else if(ar(N,"readystatechange"),yo(N)==4){N.h=!1;try{const nr=N.Z();e:switch(nr){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var ae=!0;break e;default:ae=!1}var fe;if(!(fe=ae)){var Le;if(Le=nr===0){var an=String(N.D).match(ls)[1]||null;!an&&p.self&&p.self.location&&(an=p.self.location.protocol.slice(0,-1)),Le=!Fs.test(an?an.toLowerCase():"")}fe=Le}if(fe)ar(N,"complete"),ar(N,"success");else{N.m=6;try{var Qt=2<yo(N)?N.g.statusText:""}catch{Qt=""}N.l=Qt+" ["+N.Z()+"]",$l(N)}}finally{la(N)}}}}function la(N,ae){if(N.g){ka(N);const fe=N.g,Le=N.v[0]?()=>{}:null;N.g=null,N.v=null,ae||ar(N,"ready");try{fe.onreadystatechange=Le}catch{}}}function ka(N){N.I&&(p.clearTimeout(N.I),N.I=null)}t.isActive=function(){return!!this.g};function yo(N){return N.g?N.g.readyState:0}t.Z=function(){try{return 2<yo(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(N){if(this.g){var ae=this.g.responseText;return N&&ae.indexOf(N)==0&&(ae=ae.substring(N.length)),pi(ae)}};function Rs(N){try{if(!N.g)return null;if("response"in N.g)return N.g.response;switch(N.H){case"":case"text":return N.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in N.g)return N.g.mozResponseArrayBuffer}return null}catch{return null}}function us(N){const ae={};N=(N.g&&2<=yo(N)&&N.g.getAllResponseHeaders()||"").split(`\r
`);for(let Le=0;Le<N.length;Le++){if(te(N[Le]))continue;var fe=se(N[Le]);const an=fe[0];if(fe=fe[1],typeof fe!="string")continue;fe=fe.trim();const Qt=ae[an]||[];ae[an]=Qt,Qt.push(fe)}Ae(ae,function(Le){return Le.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ca(N,ae,fe){return fe&&fe.internalChannelParams&&fe.internalChannelParams[N]||ae}function $a(N){this.Aa=0,this.i=[],this.j=new ot,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ca("failFast",!1,N),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ca("baseRetryDelayMs",5e3,N),this.cb=ca("retryDelaySeedMs",1e4,N),this.Wa=ca("forwardChannelMaxRetries",2,N),this.wa=ca("forwardChannelRequestTimeoutMs",2e4,N),this.pa=N&&N.xmlHttpFactory||void 0,this.Xa=N&&N.Tb||void 0,this.Ca=N&&N.useFetchStreams||!1,this.L=void 0,this.J=N&&N.supportsCrossDomainXhr||!1,this.K="",this.h=new yc(N&&N.concurrentRequestLimit),this.Da=new aa,this.P=N&&N.fastHandshake||!1,this.O=N&&N.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=N&&N.Rb||!1,N&&N.xa&&this.j.xa(),N&&N.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&N&&N.detectBufferingProxy||!1,this.ja=void 0,N&&N.longPollingTimeout&&0<N.longPollingTimeout&&(this.ja=N.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=$a.prototype,t.la=8,t.G=1,t.connect=function(N,ae,fe,Le){Ce(0),this.W=N,this.H=ae||{},fe&&Le!==void 0&&(this.H.OSID=fe,this.H.OAID=Le),this.F=this.X,this.I=X(this,null,this.W),qo(this)};function no(N){if(Xs(N),N.G==3){var ae=N.U++,fe=qs(N.I);if(co(fe,"SID",N.K),co(fe,"RID",ae),co(fe,"TYPE","terminate"),Ga(N,fe),ae=new gr(N,N.j,ae),ae.L=2,ae.v=Qc(qs(fe)),fe=!1,p.navigator&&p.navigator.sendBeacon)try{fe=p.navigator.sendBeacon(ae.v.toString(),"")}catch{}!fe&&p.Image&&(new Image().src=ae.v,fe=!0),fe||(ae.g=ke(ae.j,null),ae.g.ea(ae.v)),ae.F=Date.now(),$i(ae)}xu(N)}function xs(N){N.g&&(Ma(N),N.g.cancel(),N.g=null)}function Xs(N){xs(N),N.u&&(p.clearTimeout(N.u),N.u=null),ql(N),N.h.cancel(),N.s&&(typeof N.s=="number"&&p.clearTimeout(N.s),N.s=null)}function qo(N){if(!_c(N.h)&&!N.s){N.s=!0;var ae=N.Ga;Tt||Ut(),Mt||(Tt(),Mt=!0),on.add(ae,N),N.B=0}}function wu(N,ae){return Vl(N.h)>=N.h.j-(N.s?1:0)?!1:N.s?(N.i=ae.D.concat(N.i),!0):N.G==1||N.G==2||N.B>=(N.Va?0:N.Wa)?!1:(N.s=dt(O(N.Ga,N,ae),Yu(N,N.B)),N.B++,!0)}t.Ga=function(N){if(this.s)if(this.s=null,this.G==1){if(!N){this.U=Math.floor(1e5*Math.random()),N=this.U++;const an=new gr(this,this.j,N);let Qt=this.o;if(this.S&&(Qt?(Qt=ne(Qt),ye(Qt,this.S)):Qt=this.S),this.m!==null||this.O||(an.H=Qt,Qt=null),this.P)e:{for(var ae=0,fe=0;fe<this.i.length;fe++){t:{var Le=this.i[fe];if("__data__"in Le.map&&(Le=Le.map.__data__,typeof Le=="string")){Le=Le.length;break t}Le=void 0}if(Le===void 0)break;if(ae+=Le,4096<ae){ae=fe;break e}if(ae===4096||fe===this.i.length-1){ae=fe+1;break e}}ae=1e3}else ae=1e3;ae=Ka(this,an,ae),fe=qs(this.I),co(fe,"RID",N),co(fe,"CVER",22),this.D&&co(fe,"X-HTTP-Session-Id",this.D),Ga(this,fe),Qt&&(this.O?ae="headers="+encodeURIComponent(String(al(Qt)))+"&"+ae:this.m&&jl(fe,this.m,Qt)),Go(this.h,an),this.Ua&&co(fe,"TYPE","init"),this.P?(co(fe,"$req",ae),co(fe,"SID","null"),an.T=!0,hi(an,fe,null)):hi(an,fe,ae),this.G=2}}else this.G==3&&(N?ua(this,N):this.i.length==0||_c(this.h)||ua(this))};function ua(N,ae){var fe;ae?fe=ae.l:fe=N.U++;const Le=qs(N.I);co(Le,"SID",N.K),co(Le,"RID",fe),co(Le,"AID",N.T),Ga(N,Le),N.m&&N.o&&jl(Le,N.m,N.o),fe=new gr(N,N.j,fe,N.B+1),N.m===null&&(fe.H=N.o),ae&&(N.i=ae.D.concat(N.i)),ae=Ka(N,fe,1e3),fe.I=Math.round(.5*N.wa)+Math.round(.5*N.wa*Math.random()),Go(N.h,fe),hi(fe,Le,ae)}function Ga(N,ae){N.H&&Ie(N.H,function(fe,Le){co(ae,Le,fe)}),N.l&&La({},function(fe,Le){co(ae,Le,fe)})}function Ka(N,ae,fe){fe=Math.min(N.i.length,fe);var Le=N.l?O(N.l.Na,N.l,N):null;e:{var an=N.i;let Qt=-1;for(;;){const nr=["count="+fe];Qt==-1?0<fe?(Qt=an[0].g,nr.push("ofs="+Qt)):Qt=0:nr.push("ofs="+Qt);let di=!0;for(let ir=0;ir<fe;ir++){let Ai=an[ir].g;const ro=an[ir].map;if(Ai-=Qt,0>Ai)Qt=Math.max(0,an[ir].g-100),di=!1;else try{tr(ro,nr,"req"+Ai+"_")}catch{Le&&Le(ro)}}if(di){Le=nr.join("&");break e}}}return N=N.i.splice(0,fe),ae.D=N,Le}function ll(N){if(!N.g&&!N.u){N.Y=1;var ae=N.Fa;Tt||Ut(),Mt||(Tt(),Mt=!0),on.add(ae,N),N.v=0}}function Kl(N){return N.g||N.u||3<=N.v?!1:(N.Y++,N.u=dt(O(N.Fa,N),Yu(N,N.v)),N.v++,!0)}t.Fa=function(){if(this.u=null,xd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var N=2*this.R;this.j.info("BP detection timer enabled: "+N),this.A=dt(O(this.ab,this),N)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ce(10),xs(this),xd(this))};function Ma(N){N.A!=null&&(p.clearTimeout(N.A),N.A=null)}function xd(N){N.g=new gr(N,N.j,"rpc",N.Y),N.m===null&&(N.g.H=N.o),N.g.O=0;var ae=qs(N.qa);co(ae,"RID","rpc"),co(ae,"SID",N.K),co(ae,"AID",N.T),co(ae,"CI",N.F?"0":"1"),!N.F&&N.ja&&co(ae,"TO",N.ja),co(ae,"TYPE","xmlhttp"),Ga(N,ae),N.m&&N.o&&jl(ae,N.m,N.o),N.L&&(N.g.I=N.L);var fe=N.g;N=N.ia,fe.L=1,fe.v=Qc(qs(ae)),fe.m=null,fe.P=!0,mi(fe,N)}t.Za=function(){this.C!=null&&(this.C=null,xs(this),Kl(this),Ce(19))};function ql(N){N.C!=null&&(p.clearTimeout(N.C),N.C=null)}function gs(N,ae){var fe=null;if(N.g==ae){ql(N),Ma(N),N.g=null;var Le=2}else if(Ql(N.h,ae))fe=ae.D,vu(N.h,ae),Le=1;else return;if(N.G!=0){if(ae.o)if(Le==1){fe=ae.m?ae.m.length:0,ae=Date.now()-ae.F;var an=N.B;Le=Pa(),ar(Le,new Ye(Le,fe)),qo(N)}else ll(N);else if(an=ae.s,an==3||an==0&&0<ae.X||!(Le==1&&wu(N,ae)||Le==2&&Kl(N)))switch(fe&&0<fe.length&&(ae=N.h,ae.i=ae.i.concat(fe)),an){case 1:Zs(N,5);break;case 4:Zs(N,10);break;case 3:Zs(N,6);break;default:Zs(N,2)}}}function Yu(N,ae){let fe=N.Ta+Math.floor(Math.random()*N.cb);return N.isActive()||(fe*=2),fe*ae}function Zs(N,ae){if(N.j.info("Error code "+ae),ae==2){var fe=O(N.fb,N),Le=N.Xa;const an=!Le;Le=new go(Le||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||wc(Le,"https"),Qc(Le),an?_a(Le.toString(),fe):ja(Le.toString(),fe)}else Ce(2);N.G=0,N.l&&N.l.sa(ae),xu(N),Xs(N)}t.fb=function(N){N?(this.j.info("Successfully pinged google.com"),Ce(2)):(this.j.info("Failed to ping google.com"),Ce(1))};function xu(N){if(N.G=0,N.ka=[],N.l){const ae=vc(N.h);(ae.length!=0||N.i.length!=0)&&(Z(N.ka,ae),Z(N.ka,N.i),N.h.i.length=0,q(N.i),N.i.length=0),N.l.ra()}}function X(N,ae,fe){var Le=fe instanceof go?qs(fe):new go(fe);if(Le.g!="")ae&&(Le.g=ae+"."+Le.g),Vc(Le,Le.s);else{var an=p.location;Le=an.protocol,ae=ae?ae+"."+an.hostname:an.hostname,an=+an.port;var Qt=new go(null);Le&&wc(Qt,Le),ae&&(Qt.g=ae),an&&Vc(Qt,an),fe&&(Qt.l=fe),Le=Qt}return fe=N.D,ae=N.ya,fe&&ae&&co(Le,fe,ae),co(Le,"VER",N.la),Ga(N,Le),Le}function ke(N,ae,fe){if(ae&&!N.J)throw Error("Can't create secondary domain capable XhrIo object.");return ae=N.Ca&&!N.pa?new Gi(new ti({eb:fe})):new Gi(N.pa),ae.Ha(N.J),ae}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bt(){}t=Bt.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ht(){}Ht.prototype.g=function(N,ae){return new sn(N,ae)};function sn(N,ae){er.call(this),this.g=new $a(ae),this.l=N,this.h=ae&&ae.messageUrlParams||null,N=ae&&ae.messageHeaders||null,ae&&ae.clientProtocolHeaderRequired&&(N?N["X-Client-Protocol"]="webchannel":N={"X-Client-Protocol":"webchannel"}),this.g.o=N,N=ae&&ae.initMessageHeaders||null,ae&&ae.messageContentType&&(N?N["X-WebChannel-Content-Type"]=ae.messageContentType:N={"X-WebChannel-Content-Type":ae.messageContentType}),ae&&ae.va&&(N?N["X-WebChannel-Client-Profile"]=ae.va:N={"X-WebChannel-Client-Profile":ae.va}),this.g.S=N,(N=ae&&ae.Sb)&&!te(N)&&(this.g.m=N),this.v=ae&&ae.supportsCrossDomainXhr||!1,this.u=ae&&ae.sendRawJson||!1,(ae=ae&&ae.httpSessionIdParam)&&!te(ae)&&(this.g.D=ae,N=this.h,N!==null&&ae in N&&(N=this.h,ae in N&&delete N[ae])),this.j=new xr(this)}G(sn,er),sn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){no(this.g)},sn.prototype.o=function(N){var ae=this.g;if(typeof N=="string"){var fe={};fe.__data__=N,N=fe}else this.u&&(fe={},fe.__data__=Fi(N),N=fe);ae.i.push(new Xu(ae.Ya++,N)),ae.G==3&&qo(ae)},sn.prototype.N=function(){this.g.l=null,delete this.j,no(this.g),delete this.g,sn.aa.N.call(this)};function Dn(N){ns.call(this),N.__headers__&&(this.headers=N.__headers__,this.statusCode=N.__status__,delete N.__headers__,delete N.__status__);var ae=N.__sm__;if(ae){e:{for(const fe in ae){N=fe;break e}N=void 0}(this.i=N)&&(N=this.i,ae=ae!==null&&N in ae?ae[N]:void 0),this.data=ae}else this.data=N}G(Dn,ns);function Zn(){lo.call(this),this.status=1}G(Zn,lo);function xr(N){this.g=N}G(xr,Bt),xr.prototype.ua=function(){ar(this.g,"a")},xr.prototype.ta=function(N){ar(this.g,new Dn(N))},xr.prototype.sa=function(N){ar(this.g,new Zn)},xr.prototype.ra=function(){ar(this.g,"b")},Ht.prototype.createWebChannel=Ht.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,x9=function(){return new Ht},w9=function(){return Pa()},b9=Gr,SI={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},qt.NO_ERROR=0,qt.TIMEOUT=8,qt.HTTP_ERROR=6,Hx=qt,En.COMPLETE="complete",v9=En,Xi.EventType=Ns,Ns.OPEN="a",Ns.CLOSE="b",Ns.ERROR="c",Ns.MESSAGE="d",er.prototype.listen=er.prototype.K,_v=Xi,Gi.prototype.listenOnce=Gi.prototype.L,Gi.prototype.getLastError=Gi.prototype.Ka,Gi.prototype.getLastErrorCode=Gi.prototype.Ba,Gi.prototype.getStatus=Gi.prototype.Z,Gi.prototype.getResponseJson=Gi.prototype.Oa,Gi.prototype.getResponseText=Gi.prototype.oa,Gi.prototype.send=Gi.prototype.ea,Gi.prototype.setWithCredentials=Gi.prototype.Ha,_9=Gi}).apply(typeof jw<"u"?jw:typeof self<"u"?self:typeof window<"u"?window:{});const h6="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}lc.UNAUTHENTICATED=new lc(null),lc.GOOGLE_CREDENTIALS=new lc("google-credentials-uid"),lc.FIRST_PARTY=new lc("first-party-uid"),lc.MOCK_USER=new lc("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let q_="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg=new G4("@firebase/firestore");function nv(){return xg.logLevel}function Hr(t,...e){if(xg.logLevel<=xo.DEBUG){const n=e.map(iP);xg.debug(`Firestore (${q_}): ${t}`,...n)}}function vA(t,...e){if(xg.logLevel<=xo.ERROR){const n=e.map(iP);xg.error(`Firestore (${q_}): ${t}`,...n)}}function S_(t,...e){if(xg.logLevel<=xo.WARN){const n=e.map(iP);xg.warn(`Firestore (${q_}): ${t}`,...n)}}function iP(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(t="Unexpected state"){const e=`FIRESTORE (${q_}) INTERNAL ASSERTION FAILED: `+t;throw vA(e),new Error(e)}function as(t,e){t||Si()}function Mi(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oi extends BA{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C9{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aye{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(lc.UNAUTHENTICATED))}shutdown(){}}class lye{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class cye{constructor(e){this.t=e,this.currentUser=lc.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){as(this.o===void 0);let r=this.i;const o=i=>this.i!==r?(r=this.i,n(i)):Promise.resolve();let l=new AA;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new AA,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const i=l;e.enqueueRetryable(async()=>{await i.promise,await o(this.currentUser)})},p=i=>{Hr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=i,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(i=>p(i)),setTimeout(()=>{if(!this.auth){const i=this.t.getImmediate({optional:!0});i?p(i):(Hr("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new AA)}},0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Hr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(as(typeof r.accessToken=="string"),new C9(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return as(e===null||typeof e=="string"),new lc(e)}}class uye{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=lc.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class hye{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new uye(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(lc.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class dye{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fye{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){as(this.o===void 0);const r=l=>{l.error!=null&&Hr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.R;return this.R=l.token,Hr("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const o=l=>{Hr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?o(l):Hr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(as(typeof n.token=="string"),this.R=n.token,new dye(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aye(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E9{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=Aye(40);for(let l=0;l<o.length;++l)r.length<20&&o[l]<n&&(r+=e.charAt(o[l]%e.length))}return r}}function Qo(t,e){return t<e?-1:t>e?1:0}function T_(t,e,n){return t.length===e.length&&t.every((r,o)=>n(r,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new oi(ur.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new oi(ur.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new oi(ur.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oi(ur.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ol.fromMillis(Date.now())}static fromDate(e){return ol.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ol(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Qo(this.nanoseconds,e.nanoseconds):Qo(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ki(e)}static min(){return new ki(new ol(0,0))}static max(){return new ki(new ol(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e,n,r){n===void 0?n=0:n>e.length&&Si(),r===void 0?r=e.length-n:r>e.length-n&&Si(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return k1.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof k1?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const l=e.get(o),h=n.get(o);if(l<h)return-1;if(l>h)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Gs extends k1{construct(e,n,r){return new Gs(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new oi(ur.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(o=>o.length>0))}return new Gs(n)}static emptyPath(){return new Gs([])}}const pye=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ml extends k1{construct(e,n,r){return new Ml(e,n,r)}static isValidIdentifier(e){return pye.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ml.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ml(["__name__"])}static fromServerFormat(e){const n=[];let r="",o=0;const l=()=>{if(r.length===0)throw new oi(ur.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let h=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new oi(ur.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const i=e[o+1];if(i!=="\\"&&i!=="."&&i!=="`")throw new oi(ur.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=i,o+=2}else p==="`"?(h=!h,o++):p!=="."||h?(r+=p,o++):(l(),o++)}if(l(),h)throw new oi(ur.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ml(n)}static emptyPath(){return new Ml([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this.path=e}static fromPath(e){return new fi(Gs.fromString(e))}static fromName(e){return new fi(Gs.fromString(e).popFirst(5))}static empty(){return new fi(Gs.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Gs.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Gs.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fi(new Gs(e.slice()))}}function mye(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,o=ki.fromTimestamp(r===1e9?new ol(n+1,0):new ol(n,r));return new em(o,fi.empty(),e)}function gye(t){return new em(t.readTime,t.key,-1)}class em{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new em(ki.min(),fi.empty(),-1)}static max(){return new em(ki.max(),fi.empty(),-1)}}function yye(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=fi.comparator(t.documentKey,e.documentKey),n!==0?n:Qo(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _ye="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vye{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hb(t){if(t.code!==ur.FAILED_PRECONDITION||t.message!==_ye)throw t;Hr("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Si(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new hr((r,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,o)},this.catchCallback=l=>{this.wrapFailure(n,l).next(r,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof hr?n:hr.resolve(n)}catch(n){return hr.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):hr.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):hr.reject(n)}static resolve(e){return new hr((n,r)=>{n(e)})}static reject(e){return new hr((n,r)=>{r(e)})}static waitFor(e){return new hr((n,r)=>{let o=0,l=0,h=!1;e.forEach(p=>{++o,p.next(()=>{++l,h&&l===o&&n()},i=>r(i))}),h=!0,l===o&&n()})}static or(e){let n=hr.resolve(!1);for(const r of e)n=n.next(o=>o?hr.resolve(o):r());return n}static forEach(e,n){const r=[];return e.forEach((o,l)=>{r.push(n.call(this,o,l))}),this.waitFor(r)}static mapArray(e,n){return new hr((r,o)=>{const l=e.length,h=new Array(l);let p=0;for(let i=0;i<l;i++){const b=i;n(e[b]).next(E=>{h[b]=E,++p,p===l&&r(h)},E=>o(E))}})}static doWhile(e,n){return new hr((r,o)=>{const l=()=>{e()===!0?n().next(()=>{l()},o):r()};l()})}}function bye(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function db(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}oP.oe=-1;function jE(t){return t==null}function OC(t){return t===0&&1/t==-1/0}function wye(t){return typeof t=="number"&&Number.isInteger(t)&&!OC(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d6(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function W_(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function B9(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,n){this.comparator=e,this.root=n||Rl.EMPTY}insert(e,n){return new oa(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Rl.BLACK,null,null))}remove(e){return new oa(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rl.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $w(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $w(this.root,e,this.comparator,!1)}getReverseIterator(){return new $w(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $w(this.root,e,this.comparator,!0)}}class $w{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?r(e.key,n):1,n&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rl{constructor(e,n,r,o,l){this.key=e,this.value=n,this.color=r??Rl.RED,this.left=o??Rl.EMPTY,this.right=l??Rl.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,l){return new Rl(e??this.key,n??this.value,r??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const l=r(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,n,r),null):l===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Rl.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Rl.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rl.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Si();const e=this.left.check();if(e!==this.right.check())throw Si();return e+(this.isRed()?0:1)}}Rl.EMPTY=null,Rl.RED=!0,Rl.BLACK=!1;Rl.EMPTY=new class{constructor(){this.size=0}get key(){throw Si()}get value(){throw Si()}get color(){throw Si()}get left(){throw Si()}get right(){throw Si()}copy(e,n,r,o,l){return this}insert(e,n,r){return new Rl(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e){this.comparator=e,this.data=new oa(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new f6(this.data.getIterator())}getIteratorFrom(e){return new f6(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ul)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,l=r.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ul(this.comparator);return n.data=e,n}}class f6{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e){this.fields=e,e.sort(Ml.comparator)}static empty(){return new hd([])}unionWith(e){let n=new Ul(Ml.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new hd(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return T_(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S9 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new S9("Invalid base64 string: "+l):l}}(e);return new zl(n)}static fromUint8Array(e){const n=function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l}(e);return new zl(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qo(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zl.EMPTY_BYTE_STRING=new zl("");const xye=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function tm(t){if(as(!!t),typeof t=="string"){let e=0;const n=xye.exec(t);if(as(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ba(t.seconds),nanos:Ba(t.nanos)}}function Ba(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Cg(t){return typeof t=="string"?zl.fromBase64String(t):zl.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sP(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function aP(t){const e=t.mapValue.fields.__previous_value__;return sP(e)?aP(e):e}function M1(t){const e=tm(t.mapValue.fields.__local_write_time__.timestampValue);return new ol(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cye{constructor(e,n,r,o,l,h,p,i,b){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.longPollingOptions=i,this.useFetchStreams=b}}class O1{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new O1("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof O1&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Eg(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?sP(t)?4:Bye(t)?9007199254740991:Eye(t)?10:11:Si()}function pf(t,e){if(t===e)return!0;const n=Eg(t);if(n!==Eg(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return M1(t).isEqual(M1(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=tm(o.timestampValue),p=tm(l.timestampValue);return h.seconds===p.seconds&&h.nanos===p.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(o,l){return Cg(o.bytesValue).isEqual(Cg(l.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(o,l){return Ba(o.geoPointValue.latitude)===Ba(l.geoPointValue.latitude)&&Ba(o.geoPointValue.longitude)===Ba(l.geoPointValue.longitude)}(t,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return Ba(o.integerValue)===Ba(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=Ba(o.doubleValue),p=Ba(l.doubleValue);return h===p?OC(h)===OC(p):isNaN(h)&&isNaN(p)}return!1}(t,e);case 9:return T_(t.arrayValue.values||[],e.arrayValue.values||[],pf);case 10:case 11:return function(o,l){const h=o.mapValue.fields||{},p=l.mapValue.fields||{};if(d6(h)!==d6(p))return!1;for(const i in h)if(h.hasOwnProperty(i)&&(p[i]===void 0||!pf(h[i],p[i])))return!1;return!0}(t,e);default:return Si()}}function D1(t,e){return(t.values||[]).find(n=>pf(n,e))!==void 0}function I_(t,e){if(t===e)return 0;const n=Eg(t),r=Eg(e);if(n!==r)return Qo(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Qo(t.booleanValue,e.booleanValue);case 2:return function(l,h){const p=Ba(l.integerValue||l.doubleValue),i=Ba(h.integerValue||h.doubleValue);return p<i?-1:p>i?1:p===i?0:isNaN(p)?isNaN(i)?0:-1:1}(t,e);case 3:return A6(t.timestampValue,e.timestampValue);case 4:return A6(M1(t),M1(e));case 5:return Qo(t.stringValue,e.stringValue);case 6:return function(l,h){const p=Cg(l),i=Cg(h);return p.compareTo(i)}(t.bytesValue,e.bytesValue);case 7:return function(l,h){const p=l.split("/"),i=h.split("/");for(let b=0;b<p.length&&b<i.length;b++){const E=Qo(p[b],i[b]);if(E!==0)return E}return Qo(p.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return function(l,h){const p=Qo(Ba(l.latitude),Ba(h.latitude));return p!==0?p:Qo(Ba(l.longitude),Ba(h.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return p6(t.arrayValue,e.arrayValue);case 10:return function(l,h){var p,i,b,E;const I=l.fields||{},O=h.fields||{},M=(p=I.value)===null||p===void 0?void 0:p.arrayValue,G=(i=O.value)===null||i===void 0?void 0:i.arrayValue,q=Qo(((b=M==null?void 0:M.values)===null||b===void 0?void 0:b.length)||0,((E=G==null?void 0:G.values)===null||E===void 0?void 0:E.length)||0);return q!==0?q:p6(M,G)}(t.mapValue,e.mapValue);case 11:return function(l,h){if(l===Gw.mapValue&&h===Gw.mapValue)return 0;if(l===Gw.mapValue)return 1;if(h===Gw.mapValue)return-1;const p=l.fields||{},i=Object.keys(p),b=h.fields||{},E=Object.keys(b);i.sort(),E.sort();for(let I=0;I<i.length&&I<E.length;++I){const O=Qo(i[I],E[I]);if(O!==0)return O;const M=I_(p[i[I]],b[E[I]]);if(M!==0)return M}return Qo(i.length,E.length)}(t.mapValue,e.mapValue);default:throw Si()}}function A6(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Qo(t,e);const n=tm(t),r=tm(e),o=Qo(n.seconds,r.seconds);return o!==0?o:Qo(n.nanos,r.nanos)}function p6(t,e){const n=t.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){const l=I_(n[o],r[o]);if(l)return l}return Qo(n.length,r.length)}function P_(t){return TI(t)}function TI(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=tm(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Cg(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return fi.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",o=!0;for(const l of n.values||[])o?o=!1:r+=",",r+=TI(l);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let o="{",l=!0;for(const h of r)l?l=!1:o+=",",o+=`${h}:${TI(n.fields[h])}`;return o+"}"}(t.mapValue):Si()}function II(t){return!!t&&"integerValue"in t}function lP(t){return!!t&&"arrayValue"in t}function m6(t){return!!t&&"nullValue"in t}function g6(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jx(t){return!!t&&"mapValue"in t}function Eye(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Vv(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return W_(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Vv(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Vv(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Bye(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e){this.value=e}static empty(){return new Eh({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!jx(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vv(n)}setAll(e){let n=Ml.emptyPath(),r={},o=[];e.forEach((h,p)=>{if(!n.isImmediateParentOf(p)){const i=this.getFieldsMap(n);this.applyChanges(i,r,o),r={},o=[],n=p.popLast()}h?r[p.lastSegment()]=Vv(h):o.push(p.lastSegment())});const l=this.getFieldsMap(n);this.applyChanges(l,r,o)}delete(e){const n=this.field(e.popLast());jx(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return pf(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];jx(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){W_(n,(o,l)=>e[o]=l);for(const o of r)delete e[o]}clone(){return new Eh(Vv(this.value))}}function T9(t){const e=[];return W_(t.fields,(n,r)=>{const o=new Ml([n]);if(jx(r)){const l=T9(r.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)}),new hd(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,n,r,o,l,h,p){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=l,this.data=h,this.documentState=p}static newInvalidDocument(e){return new uc(e,0,ki.min(),ki.min(),ki.min(),Eh.empty(),0)}static newFoundDocument(e,n,r,o){return new uc(e,1,n,ki.min(),r,o,0)}static newNoDocument(e,n){return new uc(e,2,n,ki.min(),ki.min(),Eh.empty(),0)}static newUnknownDocument(e,n){return new uc(e,3,n,ki.min(),ki.min(),Eh.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ki.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Eh.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Eh.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ki.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof uc&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new uc(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,n){this.position=e,this.inclusive=n}}function y6(t,e,n){let r=0;for(let o=0;o<t.position.length;o++){const l=e[o],h=t.position[o];if(l.field.isKeyField()?r=fi.comparator(fi.fromName(h.referenceValue),n.key):r=I_(h,n.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function _6(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!pf(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e,n="asc"){this.field=e,this.dir=n}}function Sye(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I9{}class rl extends I9{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Iye(e,n,r):n==="array-contains"?new Fye(e,r):n==="in"?new Rye(e,r):n==="not-in"?new kye(e,r):n==="array-contains-any"?new Mye(e,r):new rl(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Pye(e,r):new Lye(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(I_(n,this.value)):n!==null&&Eg(this.value)===Eg(n)&&this.matchesComparison(I_(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Si()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mf extends I9{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new mf(e,n)}matches(e){return P9(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function P9(t){return t.op==="and"}function L9(t){return Tye(t)&&P9(t)}function Tye(t){for(const e of t.filters)if(e instanceof mf)return!1;return!0}function PI(t){if(t instanceof rl)return t.field.canonicalString()+t.op.toString()+P_(t.value);if(L9(t))return t.filters.map(e=>PI(e)).join(",");{const e=t.filters.map(n=>PI(n)).join(",");return`${t.op}(${e})`}}function F9(t,e){return t instanceof rl?function(r,o){return o instanceof rl&&r.op===o.op&&r.field.isEqual(o.field)&&pf(r.value,o.value)}(t,e):t instanceof mf?function(r,o){return o instanceof mf&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((l,h,p)=>l&&F9(h,o.filters[p]),!0):!1}(t,e):void Si()}function R9(t){return t instanceof rl?function(n){return`${n.field.canonicalString()} ${n.op} ${P_(n.value)}`}(t):t instanceof mf?function(n){return n.op.toString()+" {"+n.getFilters().map(R9).join(" ,")+"}"}(t):"Filter"}class Iye extends rl{constructor(e,n,r){super(e,n,r),this.key=fi.fromName(r.referenceValue)}matches(e){const n=fi.comparator(e.key,this.key);return this.matchesComparison(n)}}class Pye extends rl{constructor(e,n){super(e,"in",n),this.keys=k9("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Lye extends rl{constructor(e,n){super(e,"not-in",n),this.keys=k9("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function k9(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>fi.fromName(r.referenceValue))}class Fye extends rl{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return lP(n)&&D1(n.arrayValue,this.value)}}class Rye extends rl{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&D1(this.value.arrayValue,n)}}class kye extends rl{constructor(e,n){super(e,"not-in",n)}matches(e){if(D1(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!D1(this.value.arrayValue,n)}}class Mye extends rl{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!lP(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>D1(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oye{constructor(e,n=null,r=[],o=[],l=null,h=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=l,this.startAt=h,this.endAt=p,this.ue=null}}function v6(t,e=null,n=[],r=[],o=null,l=null,h=null){return new Oye(t,e,n,r,o,l,h)}function cP(t){const e=Mi(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>PI(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(l){return l.field.canonicalString()+l.dir}(r)).join(","),jE(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>P_(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>P_(r)).join(",")),e.ue=n}return e.ue}function uP(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Sye(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!F9(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_6(t.startAt,e.startAt)&&_6(t.endAt,e.endAt)}function LI(t){return fi.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e,n=null,r=[],o=[],l=null,h="F",p=null,i=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=l,this.limitType=h,this.startAt=p,this.endAt=i,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Dye(t,e,n,r,o,l,h,p){return new $E(t,e,n,r,o,l,h,p)}function hP(t){return new $E(t)}function b6(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Uye(t){return t.collectionGroup!==null}function Qv(t){const e=Mi(t);if(e.ce===null){e.ce=[];const n=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),n.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let p=new Ul(Ml.comparator);return h.filters.forEach(i=>{i.getFlattenedFilters().forEach(b=>{b.isInequality()&&(p=p.add(b.field))})}),p})(e).forEach(l=>{n.has(l.canonicalString())||l.isKeyField()||e.ce.push(new UC(l,r))}),n.has(Ml.keyField().canonicalString())||e.ce.push(new UC(Ml.keyField(),r))}return e.ce}function af(t){const e=Mi(t);return e.le||(e.le=Nye(e,Qv(t))),e.le}function Nye(t,e){if(t.limitType==="F")return v6(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new UC(o.field,l)});const n=t.endAt?new DC(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new DC(t.startAt.position,t.startAt.inclusive):null;return v6(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function FI(t,e,n){return new $E(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function GE(t,e){return uP(af(t),af(e))&&t.limitType===e.limitType}function M9(t){return`${cP(af(t))}|lt:${t.limitType}`}function ky(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(o=>R9(o)).join(", ")}]`),jE(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(o=>P_(o)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(o=>P_(o)).join(",")),`Target(${r})`}(af(t))}; limitType=${t.limitType})`}function KE(t,e){return e.isFoundDocument()&&function(r,o){const l=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):fi.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(t,e)&&function(r,o){for(const l of Qv(r))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(t,e)&&function(r,o){for(const l of r.filters)if(!l.matches(o))return!1;return!0}(t,e)&&function(r,o){return!(r.startAt&&!function(h,p,i){const b=y6(h,p,i);return h.inclusive?b<=0:b<0}(r.startAt,Qv(r),o)||r.endAt&&!function(h,p,i){const b=y6(h,p,i);return h.inclusive?b>=0:b>0}(r.endAt,Qv(r),o))}(t,e)}function zye(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function O9(t){return(e,n)=>{let r=!1;for(const o of Qv(t)){const l=Vye(o,e,n);if(l!==0)return l;r=r||o.field.isKeyField()}return 0}}function Vye(t,e,n){const r=t.field.isKeyField()?fi.comparator(e.key,n.key):function(l,h,p){const i=h.data.field(l),b=p.data.field(l);return i!==null&&b!==null?I_(i,b):Si()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Si()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,l]of r)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){W_(this.inner,(n,r)=>{for(const[o,l]of r)e(o,l)})}isEmpty(){return B9(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qye=new oa(fi.comparator);function bA(){return Qye}const D9=new oa(fi.comparator);function vv(...t){let e=D9;for(const n of t)e=e.insert(n.key,n);return e}function U9(t){let e=D9;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function rg(){return Hv()}function N9(){return Hv()}function Hv(){return new X_(t=>t.toString(),(t,e)=>t.isEqual(e))}const Hye=new oa(fi.comparator),jye=new Ul(fi.comparator);function mo(...t){let e=jye;for(const n of t)e=e.add(n);return e}const $ye=new Ul(Qo);function Gye(){return $ye}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dP(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:OC(e)?"-0":e}}function z9(t){return{integerValue:""+t}}function Kye(t,e){return wye(e)?z9(e):dP(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(){this._=void 0}}function qye(t,e,n){return t instanceof NC?function(o,l){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&sP(l)&&(l=aP(l)),l&&(h.fields.__previous_value__=l),{mapValue:h}}(n,e):t instanceof U1?Q9(t,e):t instanceof N1?H9(t,e):function(o,l){const h=V9(o,l),p=w6(h)+w6(o.Pe);return II(h)&&II(o.Pe)?z9(p):dP(o.serializer,p)}(t,e)}function Wye(t,e,n){return t instanceof U1?Q9(t,e):t instanceof N1?H9(t,e):n}function V9(t,e){return t instanceof zC?function(r){return II(r)||function(l){return!!l&&"doubleValue"in l}(r)}(e)?e:{integerValue:0}:null}class NC extends qE{}class U1 extends qE{constructor(e){super(),this.elements=e}}function Q9(t,e){const n=j9(e);for(const r of t.elements)n.some(o=>pf(o,r))||n.push(r);return{arrayValue:{values:n}}}class N1 extends qE{constructor(e){super(),this.elements=e}}function H9(t,e){let n=j9(e);for(const r of t.elements)n=n.filter(o=>!pf(o,r));return{arrayValue:{values:n}}}class zC extends qE{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function w6(t){return Ba(t.integerValue||t.doubleValue)}function j9(t){return lP(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Xye(t,e){return t.field.isEqual(e.field)&&function(r,o){return r instanceof U1&&o instanceof U1||r instanceof N1&&o instanceof N1?T_(r.elements,o.elements,pf):r instanceof zC&&o instanceof zC?pf(r.Pe,o.Pe):r instanceof NC&&o instanceof NC}(t.transform,e.transform)}class Zye{constructor(e,n){this.version=e,this.transformResults=n}}class lf{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new lf}static exists(e){return new lf(void 0,e)}static updateTime(e){return new lf(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $x(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class WE{}function $9(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new fP(t.key,lf.none()):new fb(t.key,t.data,lf.none());{const n=t.data,r=Eh.empty();let o=new Ul(Ml.comparator);for(let l of e.fields)if(!o.has(l)){let h=n.field(l);h===null&&l.length>1&&(l=l.popLast(),h=n.field(l)),h===null?r.delete(l):r.set(l,h),o=o.add(l)}return new Mg(t.key,r,new hd(o.toArray()),lf.none())}}function Yye(t,e,n){t instanceof fb?function(o,l,h){const p=o.value.clone(),i=C6(o.fieldTransforms,l,h.transformResults);p.setAll(i),l.convertToFoundDocument(h.version,p).setHasCommittedMutations()}(t,e,n):t instanceof Mg?function(o,l,h){if(!$x(o.precondition,l))return void l.convertToUnknownDocument(h.version);const p=C6(o.fieldTransforms,l,h.transformResults),i=l.data;i.setAll(G9(o)),i.setAll(p),l.convertToFoundDocument(h.version,i).setHasCommittedMutations()}(t,e,n):function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,n)}function jv(t,e,n,r){return t instanceof fb?function(l,h,p,i){if(!$x(l.precondition,h))return p;const b=l.value.clone(),E=E6(l.fieldTransforms,i,h);return b.setAll(E),h.convertToFoundDocument(h.version,b).setHasLocalMutations(),null}(t,e,n,r):t instanceof Mg?function(l,h,p,i){if(!$x(l.precondition,h))return p;const b=E6(l.fieldTransforms,i,h),E=h.data;return E.setAll(G9(l)),E.setAll(b),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),p===null?null:p.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(I=>I.field))}(t,e,n,r):function(l,h,p){return $x(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):p}(t,e,n)}function Jye(t,e){let n=null;for(const r of t.fieldTransforms){const o=e.data.field(r.field),l=V9(r.transform,o||null);l!=null&&(n===null&&(n=Eh.empty()),n.set(r.field,l))}return n||null}function x6(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&T_(r,o,(l,h)=>Xye(l,h))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class fb extends WE{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Mg extends WE{constructor(e,n,r,o,l=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function G9(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function C6(t,e,n){const r=new Map;as(t.length===n.length);for(let o=0;o<n.length;o++){const l=t[o],h=l.transform,p=e.data.field(l.field);r.set(l.field,Wye(h,p,n[o]))}return r}function E6(t,e,n){const r=new Map;for(const o of t){const l=o.transform,h=n.data.field(o.field);r.set(o.field,qye(l,h,e))}return r}class fP extends WE{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class e_e extends WE{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_e{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&Yye(l,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=jv(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=jv(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=N9();return this.mutations.forEach(o=>{const l=e.get(o.key),h=l.overlayedDocument;let p=this.applyToLocalView(h,l.mutatedFields);p=n.has(o.key)?null:p;const i=$9(h,p);i!==null&&r.set(o.key,i),h.isValidDocument()||h.convertToNoDocument(ki.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),mo())}isEqual(e){return this.batchId===e.batchId&&T_(this.mutations,e.mutations,(n,r)=>x6(n,r))&&T_(this.baseMutations,e.baseMutations,(n,r)=>x6(n,r))}}class AP{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){as(e.mutations.length===r.length);let o=function(){return Hye}();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,r[h].version);return new AP(e,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_e{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_e{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Va,Po;function i_e(t){switch(t){default:return Si();case ur.CANCELLED:case ur.UNKNOWN:case ur.DEADLINE_EXCEEDED:case ur.RESOURCE_EXHAUSTED:case ur.INTERNAL:case ur.UNAVAILABLE:case ur.UNAUTHENTICATED:return!1;case ur.INVALID_ARGUMENT:case ur.NOT_FOUND:case ur.ALREADY_EXISTS:case ur.PERMISSION_DENIED:case ur.FAILED_PRECONDITION:case ur.ABORTED:case ur.OUT_OF_RANGE:case ur.UNIMPLEMENTED:case ur.DATA_LOSS:return!0}}function K9(t){if(t===void 0)return vA("GRPC error has no .code"),ur.UNKNOWN;switch(t){case Va.OK:return ur.OK;case Va.CANCELLED:return ur.CANCELLED;case Va.UNKNOWN:return ur.UNKNOWN;case Va.DEADLINE_EXCEEDED:return ur.DEADLINE_EXCEEDED;case Va.RESOURCE_EXHAUSTED:return ur.RESOURCE_EXHAUSTED;case Va.INTERNAL:return ur.INTERNAL;case Va.UNAVAILABLE:return ur.UNAVAILABLE;case Va.UNAUTHENTICATED:return ur.UNAUTHENTICATED;case Va.INVALID_ARGUMENT:return ur.INVALID_ARGUMENT;case Va.NOT_FOUND:return ur.NOT_FOUND;case Va.ALREADY_EXISTS:return ur.ALREADY_EXISTS;case Va.PERMISSION_DENIED:return ur.PERMISSION_DENIED;case Va.FAILED_PRECONDITION:return ur.FAILED_PRECONDITION;case Va.ABORTED:return ur.ABORTED;case Va.OUT_OF_RANGE:return ur.OUT_OF_RANGE;case Va.UNIMPLEMENTED:return ur.UNIMPLEMENTED;case Va.DATA_LOSS:return ur.DATA_LOSS;default:return Si()}}(Po=Va||(Va={}))[Po.OK=0]="OK",Po[Po.CANCELLED=1]="CANCELLED",Po[Po.UNKNOWN=2]="UNKNOWN",Po[Po.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Po[Po.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Po[Po.NOT_FOUND=5]="NOT_FOUND",Po[Po.ALREADY_EXISTS=6]="ALREADY_EXISTS",Po[Po.PERMISSION_DENIED=7]="PERMISSION_DENIED",Po[Po.UNAUTHENTICATED=16]="UNAUTHENTICATED",Po[Po.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Po[Po.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Po[Po.ABORTED=10]="ABORTED",Po[Po.OUT_OF_RANGE=11]="OUT_OF_RANGE",Po[Po.UNIMPLEMENTED=12]="UNIMPLEMENTED",Po[Po.INTERNAL=13]="INTERNAL",Po[Po.UNAVAILABLE=14]="UNAVAILABLE",Po[Po.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_e(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_e=new ug([4294967295,4294967295],0);function B6(t){const e=o_e().encode(t),n=new y9;return n.update(e),new Uint8Array(n.digest())}function S6(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ug([n,r],0),new ug([o,l],0)]}class pP{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new bv(`Invalid padding: ${n}`);if(r<0)throw new bv(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new bv(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new bv(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ug.fromNumber(this.Ie)}Ee(e,n,r){let o=e.add(n.multiply(ug.fromNumber(r)));return o.compare(s_e)===1&&(o=new ug([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=B6(e),[r,o]=S6(n);for(let l=0;l<this.hashCount;l++){const h=this.Ee(r,o,l);if(!this.de(h))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new pP(l,o,n);return r.forEach(p=>h.insert(p)),h}insert(e){if(this.Ie===0)return;const n=B6(e),[r,o]=S6(n);for(let l=0;l<this.hashCount;l++){const h=this.Ee(r,o,l);this.Ae(h)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class bv extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,n,r,o,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,Ab.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new XE(ki.min(),o,new oa(Qo),bA(),mo())}}class Ab{constructor(e,n,r,o,l){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ab(r,n,mo(),mo(),mo())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,n,r,o){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=o}}class q9{constructor(e,n){this.targetId=e,this.me=n}}class W9{constructor(e,n,r=zl.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class T6{constructor(){this.fe=0,this.ge=P6(),this.pe=zl.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=mo(),n=mo(),r=mo();return this.ge.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:Si()}}),new Ab(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=P6()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,as(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class a_e{constructor(e){this.Le=e,this.Be=new Map,this.ke=bA(),this.qe=I6(),this.Qe=new oa(Qo)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Si()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,o)=>{this.ze(o)&&n(o)})}He(e){const n=e.targetId,r=e.me.count,o=this.Je(n);if(o){const l=o.target;if(LI(l))if(r===0){const h=new fi(l.path);this.Ue(n,h,uc.newNoDocument(h,ki.min()))}else as(r===1);else{const h=this.Ye(n);if(h!==r){const p=this.Ze(e),i=p?this.Xe(p,e,h):1;if(i!==0){this.je(n);const b=i===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,b)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:l=0}=n;let h,p;try{h=Cg(r).toUint8Array()}catch(i){if(i instanceof S9)return S_("Decoding the base64 bloom filter in existence filter failed ("+i.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw i}try{p=new pP(h,o,l)}catch(i){return S_(i instanceof bv?"BloomFilter error: ":"Applying bloom filter failed: ",i),null}return p.Ie===0?null:p}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let o=0;return r.forEach(l=>{const h=this.Le.tt(),p=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(p)||(this.Ue(n,l,null),o++)}),o}rt(e){const n=new Map;this.Be.forEach((l,h)=>{const p=this.Je(h);if(p){if(l.current&&LI(p.target)){const i=new fi(p.target.path);this.ke.get(i)!==null||this.it(h,i)||this.Ue(h,i,uc.newNoDocument(i,e))}l.be&&(n.set(h,l.ve()),l.Ce())}});let r=mo();this.qe.forEach((l,h)=>{let p=!0;h.forEachWhile(i=>{const b=this.Je(i);return!b||b.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)}),p&&(r=r.add(l))}),this.ke.forEach((l,h)=>h.setReadTime(e));const o=new XE(e,n,this.Qe,this.ke,r);return this.ke=bA(),this.qe=I6(),this.Qe=new oa(Qo),o}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,n)?o.Fe(n,1):o.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new T6,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ul(Qo),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Hr("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new T6),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function I6(){return new oa(fi.comparator)}function P6(){return new oa(fi.comparator)}const l_e={asc:"ASCENDING",desc:"DESCENDING"},c_e={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},u_e={and:"AND",or:"OR"};class h_e{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function RI(t,e){return t.useProto3Json||jE(e)?e:{value:e}}function VC(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function X9(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function d_e(t,e){return VC(t,e.toTimestamp())}function cf(t){return as(!!t),ki.fromTimestamp(function(n){const r=tm(n);return new ol(r.seconds,r.nanos)}(t))}function mP(t,e){return kI(t,e).canonicalString()}function kI(t,e){const n=function(o){return new Gs(["projects",o.projectId,"databases",o.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Z9(t){const e=Gs.fromString(t);return as(nQ(e)),e}function MI(t,e){return mP(t.databaseId,e.path)}function F2(t,e){const n=Z9(e);if(n.get(1)!==t.databaseId.projectId)throw new oi(ur.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new oi(ur.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new fi(J9(n))}function Y9(t,e){return mP(t.databaseId,e)}function f_e(t){const e=Z9(t);return e.length===4?Gs.emptyPath():J9(e)}function OI(t){return new Gs(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function J9(t){return as(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function L6(t,e,n){return{name:MI(t,e),fields:n.value.mapValue.fields}}function A_e(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(b){return b==="NO_CHANGE"?0:b==="ADD"?1:b==="REMOVE"?2:b==="CURRENT"?3:b==="RESET"?4:Si()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(b,E){return b.useProto3Json?(as(E===void 0||typeof E=="string"),zl.fromBase64String(E||"")):(as(E===void 0||E instanceof Buffer||E instanceof Uint8Array),zl.fromUint8Array(E||new Uint8Array))}(t,e.targetChange.resumeToken),h=e.targetChange.cause,p=h&&function(b){const E=b.code===void 0?ur.UNKNOWN:K9(b.code);return new oi(E,b.message||"")}(h);n=new W9(r,o,l,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=F2(t,r.document.name),l=cf(r.document.updateTime),h=r.document.createTime?cf(r.document.createTime):ki.min(),p=new Eh({mapValue:{fields:r.document.fields}}),i=uc.newFoundDocument(o,l,h,p),b=r.targetIds||[],E=r.removedTargetIds||[];n=new Gx(b,E,i.key,i)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=F2(t,r.document),l=r.readTime?cf(r.readTime):ki.min(),h=uc.newNoDocument(o,l),p=r.removedTargetIds||[];n=new Gx([],p,h.key,h)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=F2(t,r.document),l=r.removedTargetIds||[];n=new Gx([],l,o,null)}else{if(!("filter"in e))return Si();{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:l}=r,h=new r_e(o,l),p=r.targetId;n=new q9(p,h)}}return n}function p_e(t,e){let n;if(e instanceof fb)n={update:L6(t,e.key,e.value)};else if(e instanceof fP)n={delete:MI(t,e.key)};else if(e instanceof Mg)n={update:L6(t,e.key,e.data),updateMask:C_e(e.fieldMask)};else{if(!(e instanceof e_e))return Si();n={verify:MI(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(l,h){const p=h.transform;if(p instanceof NC)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof U1)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof N1)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof zC)return{fieldPath:h.field.canonicalString(),increment:p.Pe};throw Si()}(0,r))),e.precondition.isNone||(n.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:d_e(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Si()}(t,e.precondition)),n}function m_e(t,e){return t&&t.length>0?(as(e!==void 0),t.map(n=>function(o,l){let h=o.updateTime?cf(o.updateTime):cf(l);return h.isEqual(ki.min())&&(h=cf(l)),new Zye(h,o.transformResults||[])}(n,e))):[]}function g_e(t,e){return{documents:[Y9(t,e.path)]}}function y_e(t,e){const n={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Y9(t,o);const l=function(b){if(b.length!==0)return tQ(mf.create(b,"and"))}(e.filters);l&&(n.structuredQuery.where=l);const h=function(b){if(b.length!==0)return b.map(E=>function(O){return{field:My(O.field),direction:b_e(O.dir)}}(E))}(e.orderBy);h&&(n.structuredQuery.orderBy=h);const p=RI(t,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=function(b){return{before:b.inclusive,values:b.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(b){return{before:!b.inclusive,values:b.position}}(e.endAt)),{_t:n,parent:o}}function __e(t){let e=f_e(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){as(r===1);const E=n.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];n.where&&(l=function(I){const O=eQ(I);return O instanceof mf&&L9(O)?O.getFilters():[O]}(n.where));let h=[];n.orderBy&&(h=function(I){return I.map(O=>function(G){return new UC(Oy(G.field),function(Z){switch(Z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(G.direction))}(O))}(n.orderBy));let p=null;n.limit&&(p=function(I){let O;return O=typeof I=="object"?I.value:I,jE(O)?null:O}(n.limit));let i=null;n.startAt&&(i=function(I){const O=!!I.before,M=I.values||[];return new DC(M,O)}(n.startAt));let b=null;return n.endAt&&(b=function(I){const O=!I.before,M=I.values||[];return new DC(M,O)}(n.endAt)),Dye(e,o,h,l,p,"F",i,b)}function v_e(t,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Si()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function eQ(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Oy(n.unaryFilter.field);return rl.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Oy(n.unaryFilter.field);return rl.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Oy(n.unaryFilter.field);return rl.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Oy(n.unaryFilter.field);return rl.create(h,"!=",{nullValue:"NULL_VALUE"});default:return Si()}}(t):t.fieldFilter!==void 0?function(n){return rl.create(Oy(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Si()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return mf.create(n.compositeFilter.filters.map(r=>eQ(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Si()}}(n.compositeFilter.op))}(t):Si()}function b_e(t){return l_e[t]}function w_e(t){return c_e[t]}function x_e(t){return u_e[t]}function My(t){return{fieldPath:t.canonicalString()}}function Oy(t){return Ml.fromServerFormat(t.fieldPath)}function tQ(t){return t instanceof rl?function(n){if(n.op==="=="){if(g6(n.value))return{unaryFilter:{field:My(n.field),op:"IS_NAN"}};if(m6(n.value))return{unaryFilter:{field:My(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(g6(n.value))return{unaryFilter:{field:My(n.field),op:"IS_NOT_NAN"}};if(m6(n.value))return{unaryFilter:{field:My(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:My(n.field),op:w_e(n.op),value:n.value}}}(t):t instanceof mf?function(n){const r=n.getFilters().map(o=>tQ(o));return r.length===1?r[0]:{compositeFilter:{op:x_e(n.op),filters:r}}}(t):Si()}function C_e(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function nQ(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e,n,r,o,l=ki.min(),h=ki.min(),p=zl.EMPTY_BYTE_STRING,i=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=p,this.expectedCount=i}withSequenceNumber(e){return new Op(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Op(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Op(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Op(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_e{constructor(e){this.ct=e}}function B_e(t){const e=__e({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?FI(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_e{constructor(){this.un=new T_e}addToCollectionParentIndex(e,n){return this.un.add(n),hr.resolve()}getCollectionParents(e,n){return hr.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return hr.resolve()}deleteFieldIndex(e,n){return hr.resolve()}deleteAllFieldIndexes(e){return hr.resolve()}createTargetIndexes(e,n){return hr.resolve()}getDocumentsMatchingTarget(e,n){return hr.resolve(null)}getIndexType(e,n){return hr.resolve(0)}getFieldIndexes(e,n){return hr.resolve([])}getNextCollectionGroupToUpdate(e){return hr.resolve(null)}getMinOffset(e,n){return hr.resolve(em.min())}getMinOffsetFromCollectionGroup(e,n){return hr.resolve(em.min())}updateCollectionGroup(e,n,r){return hr.resolve()}updateIndexEntries(e,n){return hr.resolve()}}class T_e{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new Ul(Gs.comparator),l=!o.has(r);return this.index[n]=o.add(r),l}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Ul(Gs.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new L_(0)}static kn(){return new L_(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_e{constructor(){this.changes=new X_(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,uc.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?hr.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_e{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_e{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(r!==null&&jv(r.mutation,o,hd.empty(),ol.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,mo()).next(()=>r))}getLocalViewOfDocuments(e,n,r=mo()){const o=rg();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,r).next(l=>{let h=vv();return l.forEach((p,i)=>{h=h.insert(p,i.overlayedDocument)}),h}))}getOverlayedDocuments(e,n){const r=rg();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,mo()))}populateOverlays(e,n,r){const o=[];return r.forEach(l=>{n.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((h,p)=>{n.set(h,p)})})}computeViews(e,n,r,o){let l=bA();const h=Hv(),p=function(){return Hv()}();return n.forEach((i,b)=>{const E=r.get(b.key);o.has(b.key)&&(E===void 0||E.mutation instanceof Mg)?l=l.insert(b.key,b):E!==void 0?(h.set(b.key,E.mutation.getFieldMask()),jv(E.mutation,b,E.mutation.getFieldMask(),ol.now())):h.set(b.key,hd.empty())}),this.recalculateAndSaveOverlays(e,l).next(i=>(i.forEach((b,E)=>h.set(b,E)),n.forEach((b,E)=>{var I;return p.set(b,new P_e(E,(I=h.get(b))!==null&&I!==void 0?I:null))}),p))}recalculateAndSaveOverlays(e,n){const r=Hv();let o=new oa((h,p)=>h-p),l=mo();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(h=>{for(const p of h)p.keys().forEach(i=>{const b=n.get(i);if(b===null)return;let E=r.get(i)||hd.empty();E=p.applyToLocalView(b,E),r.set(i,E);const I=(o.get(p.batchId)||mo()).add(i);o=o.insert(p.batchId,I)})}).next(()=>{const h=[],p=o.getReverseIterator();for(;p.hasNext();){const i=p.getNext(),b=i.key,E=i.value,I=N9();E.forEach(O=>{if(!l.has(O)){const M=$9(n.get(O),r.get(O));M!==null&&I.set(O,M),l=l.add(O)}}),h.push(this.documentOverlayCache.saveOverlays(e,b,I))}return hr.waitFor(h)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,o){return function(h){return fi.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Uye(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next(l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-l.size):hr.resolve(rg());let p=-1,i=l;return h.next(b=>hr.forEach(b,(E,I)=>(p<I.largestBatchId&&(p=I.largestBatchId),l.get(E)?hr.resolve():this.remoteDocumentCache.getEntry(e,E).next(O=>{i=i.insert(E,O)}))).next(()=>this.populateOverlays(e,b,l)).next(()=>this.computeViews(e,i,b,mo())).next(E=>({batchId:p,changes:U9(E)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new fi(n)).next(r=>{let o=vv();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){const l=n.collectionGroup;let h=vv();return this.indexManager.getCollectionParents(e,l).next(p=>hr.forEach(p,i=>{const b=function(I,O){return new $E(O,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)}(n,i.child(l));return this.getDocumentsMatchingCollectionQuery(e,b,r,o).next(E=>{E.forEach((I,O)=>{h=h.insert(I,O)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,n,r,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,l,o))).next(h=>{l.forEach((i,b)=>{const E=b.getKey();h.get(E)===null&&(h=h.insert(E,uc.newInvalidDocument(E)))});let p=vv();return h.forEach((i,b)=>{const E=l.get(i);E!==void 0&&jv(E.mutation,b,hd.empty(),ol.now()),KE(n,b)&&(p=p.insert(i,b))}),p})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_e{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return hr.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:cf(o.createTime)}}(n)),hr.resolve()}getNamedQuery(e,n){return hr.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(o){return{name:o.name,query:B_e(o.bundledQuery),readTime:cf(o.readTime)}}(n)),hr.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_e{constructor(){this.overlays=new oa(fi.comparator),this.Ir=new Map}getOverlay(e,n){return hr.resolve(this.overlays.get(n))}getOverlays(e,n){const r=rg();return hr.forEach(n,o=>this.getOverlay(e,o).next(l=>{l!==null&&r.set(o,l)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((o,l)=>{this.ht(e,n,l)}),hr.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.Ir.get(r);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.Ir.delete(r)),hr.resolve()}getOverlaysForCollection(e,n,r){const o=rg(),l=n.length+1,h=new fi(n.child("")),p=this.overlays.getIteratorFrom(h);for(;p.hasNext();){const i=p.getNext().value,b=i.getKey();if(!n.isPrefixOf(b.path))break;b.path.length===l&&i.largestBatchId>r&&o.set(i.getKey(),i)}return hr.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let l=new oa((b,E)=>b-E);const h=this.overlays.getIterator();for(;h.hasNext();){const b=h.getNext().value;if(b.getKey().getCollectionGroup()===n&&b.largestBatchId>r){let E=l.get(b.largestBatchId);E===null&&(E=rg(),l=l.insert(b.largestBatchId,E)),E.set(b.getKey(),b)}}const p=rg(),i=l.getIterator();for(;i.hasNext()&&(i.getNext().value.forEach((b,E)=>p.set(b,E)),!(p.size()>=o)););return hr.resolve(p)}ht(e,n,r){const o=this.overlays.get(r.key);if(o!==null){const h=this.Ir.get(o.largestBatchId).delete(r.key);this.Ir.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new n_e(n,r));let l=this.Ir.get(n);l===void 0&&(l=mo(),this.Ir.set(n,l)),this.Ir.set(n,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_e{constructor(){this.sessionToken=zl.EMPTY_BYTE_STRING}getSessionToken(e){return hr.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,hr.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(){this.Tr=new Ul(gl.Er),this.dr=new Ul(gl.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new gl(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new gl(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new fi(new Gs([])),r=new gl(n,e),o=new gl(n,e+1),l=[];return this.dr.forEachInRange([r,o],h=>{this.Vr(h),l.push(h.key)}),l}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new fi(new Gs([])),r=new gl(n,e),o=new gl(n,e+1);let l=mo();return this.dr.forEachInRange([r,o],h=>{l=l.add(h.key)}),l}containsKey(e){const n=new gl(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class gl{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return fi.comparator(e.key,n.key)||Qo(e.wr,n.wr)}static Ar(e,n){return Qo(e.wr,n.wr)||fi.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_e{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ul(gl.Er)}checkEmpty(e){return hr.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){const l=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new t_e(l,n,r,o);this.mutationQueue.push(h);for(const p of o)this.br=this.br.add(new gl(p.key,l)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return hr.resolve(h)}lookupMutationBatch(e,n){return hr.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.vr(r),l=o<0?0:o;return hr.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return hr.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return hr.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new gl(n,0),o=new gl(n,Number.POSITIVE_INFINITY),l=[];return this.br.forEachInRange([r,o],h=>{const p=this.Dr(h.wr);l.push(p)}),hr.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ul(Qo);return n.forEach(o=>{const l=new gl(o,0),h=new gl(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([l,h],p=>{r=r.add(p.wr)})}),hr.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let l=r;fi.isDocumentKey(l)||(l=l.child(""));const h=new gl(new fi(l),0);let p=new Ul(Qo);return this.br.forEachWhile(i=>{const b=i.key.path;return!!r.isPrefixOf(b)&&(b.length===o&&(p=p.add(i.wr)),!0)},h),hr.resolve(this.Cr(p))}Cr(e){const n=[];return e.forEach(r=>{const o=this.Dr(r);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){as(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return hr.forEach(n.mutations,o=>{const l=new gl(o.key,n.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new gl(n,0),o=this.br.firstAfterOrEqual(r);return hr.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,hr.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_e{constructor(e){this.Mr=e,this.docs=function(){return new oa(fi.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),l=o?o.size:0,h=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return hr.resolve(r?r.document.mutableCopy():uc.newInvalidDocument(n))}getEntries(e,n){let r=bA();return n.forEach(o=>{const l=this.docs.get(o);r=r.insert(o,l?l.document.mutableCopy():uc.newInvalidDocument(o))}),hr.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let l=bA();const h=n.path,p=new fi(h.child("")),i=this.docs.getIteratorFrom(p);for(;i.hasNext();){const{key:b,value:{document:E}}=i.getNext();if(!h.isPrefixOf(b.path))break;b.path.length>h.length+1||yye(gye(E),r)<=0||(o.has(E.key)||KE(n,E))&&(l=l.insert(E.key,E.mutableCopy()))}return hr.resolve(l)}getAllFromCollectionGroup(e,n,r,o){Si()}Or(e,n){return hr.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new D_e(this)}getSize(e){return hr.resolve(this.size)}}class D_e extends I_e{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?n.push(this.cr.addEntry(e,o)):this.cr.removeEntry(r)}),hr.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_e{constructor(e){this.persistence=e,this.Nr=new X_(n=>cP(n),uP),this.lastRemoteSnapshotVersion=ki.min(),this.highestTargetId=0,this.Lr=0,this.Br=new gP,this.targetCount=0,this.kr=L_.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,o)=>n(o)),hr.resolve()}getLastRemoteSnapshotVersion(e){return hr.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return hr.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),hr.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),hr.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new L_(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,hr.resolve()}updateTargetData(e,n){return this.Kn(n),hr.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,hr.resolve()}removeTargets(e,n,r){let o=0;const l=[];return this.Nr.forEach((h,p)=>{p.sequenceNumber<=n&&r.get(p.targetId)===null&&(this.Nr.delete(h),l.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)}),hr.waitFor(l).next(()=>o)}getTargetCount(e){return hr.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return hr.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),hr.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const o=this.persistence.referenceDelegate,l=[];return o&&n.forEach(h=>{l.push(o.markPotentiallyOrphaned(e,h))}),hr.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),hr.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return hr.resolve(r)}containsKey(e,n){return hr.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_e{constructor(e,n){this.qr={},this.overlays={},this.Qr=new oP(0),this.Kr=!1,this.Kr=!0,this.$r=new k_e,this.referenceDelegate=e(this),this.Ur=new U_e(this),this.indexManager=new S_e,this.remoteDocumentCache=function(o){return new O_e(o)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new E_e(n),this.Gr=new F_e(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new R_e,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new M_e(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Hr("MemoryPersistence","Starting transaction:",e);const o=new z_e(this.Qr.next());return this.referenceDelegate.zr(),r(o).next(l=>this.referenceDelegate.jr(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Hr(e,n){return hr.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class z_e extends vye{constructor(e){super(),this.currentSequenceNumber=e}}class yP{constructor(e){this.persistence=e,this.Jr=new gP,this.Yr=null}static Zr(e){return new yP(e)}get Xr(){if(this.Yr)return this.Yr;throw Si()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),hr.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),hr.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),hr.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(o=>this.Xr.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(l=>this.Xr.add(l.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return hr.forEach(this.Xr,r=>{const o=fi.fromPath(r);return this.ei(e,o).next(l=>{l||n.removeEntry(o,ki.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return hr.or([()=>hr.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=o}static Wi(e,n){let r=mo(),o=mo();for(const l of n.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new _P(e,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_e{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_e{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return kAe()?8:bye(pc())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,o){const l={result:null};return this.Yi(e,n).next(h=>{l.result=h}).next(()=>{if(!l.result)return this.Zi(e,n,o,r).next(h=>{l.result=h})}).next(()=>{if(l.result)return;const h=new V_e;return this.Xi(e,n,h).next(p=>{if(l.result=p,this.zi)return this.es(e,n,h,p.size)})}).next(()=>l.result)}es(e,n,r,o){return r.documentReadCount<this.ji?(nv()<=xo.DEBUG&&Hr("QueryEngine","SDK will not create cache indexes for query:",ky(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),hr.resolve()):(nv()<=xo.DEBUG&&Hr("QueryEngine","Query:",ky(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.Hi*o?(nv()<=xo.DEBUG&&Hr("QueryEngine","The SDK decides to create cache indexes for query:",ky(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,af(n))):hr.resolve())}Yi(e,n){if(b6(n))return hr.resolve(null);let r=af(n);return this.indexManager.getIndexType(e,r).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=FI(n,null,"F"),r=af(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(l=>{const h=mo(...l);return this.Ji.getDocuments(e,h).next(p=>this.indexManager.getMinOffset(e,r).next(i=>{const b=this.ts(n,p);return this.ns(n,b,h,i.readTime)?this.Yi(e,FI(n,null,"F")):this.rs(e,b,n,i)}))})))}Zi(e,n,r,o){return b6(n)||o.isEqual(ki.min())?hr.resolve(null):this.Ji.getDocuments(e,r).next(l=>{const h=this.ts(n,l);return this.ns(n,h,r,o)?hr.resolve(null):(nv()<=xo.DEBUG&&Hr("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ky(n)),this.rs(e,h,n,mye(o,-1)).next(p=>p))})}ts(e,n){let r=new Ul(O9(e));return n.forEach((o,l)=>{KE(e,l)&&(r=r.add(l))}),r}ns(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const l=e.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Xi(e,n,r){return nv()<=xo.DEBUG&&Hr("QueryEngine","Using full collection scan to execute query:",ky(n)),this.Ji.getDocumentsMatchingQuery(e,n,em.min(),r)}rs(e,n,r,o){return this.Ji.getDocumentsMatchingQuery(e,r,o).next(l=>(n.forEach(h=>{l=l.insert(h.key,h)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_e{constructor(e,n,r,o){this.persistence=e,this.ss=n,this.serializer=o,this.os=new oa(Qo),this._s=new X_(l=>cP(l),uP),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new L_e(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function j_e(t,e,n,r){return new H_e(t,e,n,r)}async function rQ(t,e){const n=Mi(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next(l=>(o=l,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(l=>{const h=[],p=[];let i=mo();for(const b of o){h.push(b.batchId);for(const E of b.mutations)i=i.add(E.key)}for(const b of l){p.push(b.batchId);for(const E of b.mutations)i=i.add(E.key)}return n.localDocuments.getDocuments(r,i).next(b=>({hs:b,removedBatchIds:h,addedBatchIds:p}))})})}function $_e(t,e){const n=Mi(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),l=n.cs.newChangeBuffer({trackRemovals:!0});return function(p,i,b,E){const I=b.batch,O=I.keys();let M=hr.resolve();return O.forEach(G=>{M=M.next(()=>E.getEntry(i,G)).next(q=>{const Z=b.docVersions.get(G);as(Z!==null),q.version.compareTo(Z)<0&&(I.applyToRemoteDocument(q,b),q.isValidDocument()&&(q.setReadTime(b.commitVersion),E.addEntry(q)))})}),M.next(()=>p.mutationQueue.removeMutationBatch(i,I))}(n,r,e,l).next(()=>l.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(p){let i=mo();for(let b=0;b<p.mutationResults.length;++b)p.mutationResults[b].transformResults.length>0&&(i=i.add(p.batch.mutations[b].key));return i}(e))).next(()=>n.localDocuments.getDocuments(r,o))})}function iQ(t){const e=Mi(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function G_e(t,e){const n=Mi(t),r=e.snapshotVersion;let o=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=n.cs.newChangeBuffer({trackRemovals:!0});o=n.os;const p=[];e.targetChanges.forEach((E,I)=>{const O=o.get(I);if(!O)return;p.push(n.Ur.removeMatchingKeys(l,E.removedDocuments,I).next(()=>n.Ur.addMatchingKeys(l,E.addedDocuments,I)));let M=O.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(I)!==null?M=M.withResumeToken(zl.EMPTY_BYTE_STRING,ki.min()).withLastLimboFreeSnapshotVersion(ki.min()):E.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(E.resumeToken,r)),o=o.insert(I,M),function(q,Z,Y){return q.resumeToken.approximateByteSize()===0||Z.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=3e8?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0}(O,M,E)&&p.push(n.Ur.updateTargetData(l,M))});let i=bA(),b=mo();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(l,E))}),p.push(K_e(l,h,e.documentUpdates).next(E=>{i=E.Ps,b=E.Is})),!r.isEqual(ki.min())){const E=n.Ur.getLastRemoteSnapshotVersion(l).next(I=>n.Ur.setTargetsMetadata(l,l.currentSequenceNumber,r));p.push(E)}return hr.waitFor(p).next(()=>h.apply(l)).next(()=>n.localDocuments.getLocalViewOfDocuments(l,i,b)).next(()=>i)}).then(l=>(n.os=o,l))}function K_e(t,e,n){let r=mo(),o=mo();return n.forEach(l=>r=r.add(l)),e.getEntries(t,r).next(l=>{let h=bA();return n.forEach((p,i)=>{const b=l.get(p);i.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(p)),i.isNoDocument()&&i.version.isEqual(ki.min())?(e.removeEntry(p,i.readTime),h=h.insert(p,i)):!b.isValidDocument()||i.version.compareTo(b.version)>0||i.version.compareTo(b.version)===0&&b.hasPendingWrites?(e.addEntry(i),h=h.insert(p,i)):Hr("LocalStore","Ignoring outdated watch update for ",p,". Current version:",b.version," Watch version:",i.version)}),{Ps:h,Is:o}})}function q_e(t,e){const n=Mi(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function W_e(t,e){const n=Mi(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return n.Ur.getTargetData(r,e).next(l=>l?(o=l,hr.resolve(o)):n.Ur.allocateTargetId(r).next(h=>(o=new Op(e,h,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=n.os.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function DI(t,e,n){const r=Mi(t),o=r.os.get(e),l=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",l,h=>r.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!db(h))throw h;Hr("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}r.os=r.os.remove(e),r._s.delete(o.target)}function F6(t,e,n){const r=Mi(t);let o=ki.min(),l=mo();return r.persistence.runTransaction("Execute query","readwrite",h=>function(i,b,E){const I=Mi(i),O=I._s.get(E);return O!==void 0?hr.resolve(I.os.get(O)):I.Ur.getTargetData(b,E)}(r,h,af(e)).next(p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(h,p.targetId).next(i=>{l=i})}).next(()=>r.ss.getDocumentsMatchingQuery(h,e,n?o:ki.min(),n?l:mo())).next(p=>(X_e(r,zye(e),p),{documents:p,Ts:l})))}function X_e(t,e,n){let r=t.us.get(e)||ki.min();n.forEach((o,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),t.us.set(e,r)}class R6{constructor(){this.activeTargetIds=Gye()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Z_e{constructor(){this.so=new R6,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new R6,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_e{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Hr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Hr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kw=null;function R2(){return Kw===null?Kw=function(){return 268435456+Math.round(2147483648*Math.random())}():Kw++,"0x"+Kw.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_e={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0e{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nc="WebChannelConnection";class t0e extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${o}/databases/${l}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${l}`}get Fo(){return!1}Mo(n,r,o,l,h){const p=R2(),i=this.xo(n,r.toUriEncodedString());Hr("RestConnection",`Sending RPC '${n}' ${p}:`,i,o);const b={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(b,l,h),this.No(n,i,b,o).then(E=>(Hr("RestConnection",`Received RPC '${n}' ${p}: `,E),E),E=>{throw S_("RestConnection",`RPC '${n}' ${p} failed with error: `,E,"url: ",i,"request:",o),E})}Lo(n,r,o,l,h,p){return this.Mo(n,r,o,l,h)}Oo(n,r,o){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+q_}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((l,h)=>n[h]=l),o&&o.headers.forEach((l,h)=>n[h]=l)}xo(n,r){const o=J_e[n];return`${this.Do}/v1/${r}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,o){const l=R2();return new Promise((h,p)=>{const i=new _9;i.setWithCredentials(!0),i.listenOnce(v9.COMPLETE,()=>{try{switch(i.getLastErrorCode()){case Hx.NO_ERROR:const E=i.getResponseJson();Hr(nc,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(E)),h(E);break;case Hx.TIMEOUT:Hr(nc,`RPC '${e}' ${l} timed out`),p(new oi(ur.DEADLINE_EXCEEDED,"Request time out"));break;case Hx.HTTP_ERROR:const I=i.getStatus();if(Hr(nc,`RPC '${e}' ${l} failed with status:`,I,"response text:",i.getResponseText()),I>0){let O=i.getResponseJson();Array.isArray(O)&&(O=O[0]);const M=O==null?void 0:O.error;if(M&&M.status&&M.message){const G=function(Z){const Y=Z.toLowerCase().replace(/_/g,"-");return Object.values(ur).indexOf(Y)>=0?Y:ur.UNKNOWN}(M.status);p(new oi(G,M.message))}else p(new oi(ur.UNKNOWN,"Server responded with status "+i.getStatus()))}else p(new oi(ur.UNAVAILABLE,"Connection failed."));break;default:Si()}}finally{Hr(nc,`RPC '${e}' ${l} completed.`)}});const b=JSON.stringify(o);Hr(nc,`RPC '${e}' ${l} sending request:`,o),i.send(n,"POST",b,r,15)})}Bo(e,n,r){const o=R2(),l=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=x9(),p=w9(),i={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},b=this.longPollingOptions.timeoutSeconds;b!==void 0&&(i.longPollingTimeout=Math.round(1e3*b)),this.useFetchStreams&&(i.useFetchStreams=!0),this.Oo(i.initMessageHeaders,n,r),i.encodeInitMessageHeaders=!0;const E=l.join("");Hr(nc,`Creating RPC '${e}' stream ${o}: ${E}`,i);const I=h.createWebChannel(E,i);let O=!1,M=!1;const G=new e0e({Io:Z=>{M?Hr(nc,`Not sending because RPC '${e}' stream ${o} is closed:`,Z):(O||(Hr(nc,`Opening RPC '${e}' stream ${o} transport.`),I.open(),O=!0),Hr(nc,`RPC '${e}' stream ${o} sending:`,Z),I.send(Z))},To:()=>I.close()}),q=(Z,Y,te)=>{Z.listen(Y,be=>{try{te(be)}catch(Pe){setTimeout(()=>{throw Pe},0)}})};return q(I,_v.EventType.OPEN,()=>{M||(Hr(nc,`RPC '${e}' stream ${o} transport opened.`),G.yo())}),q(I,_v.EventType.CLOSE,()=>{M||(M=!0,Hr(nc,`RPC '${e}' stream ${o} transport closed`),G.So())}),q(I,_v.EventType.ERROR,Z=>{M||(M=!0,S_(nc,`RPC '${e}' stream ${o} transport errored:`,Z),G.So(new oi(ur.UNAVAILABLE,"The operation could not be completed")))}),q(I,_v.EventType.MESSAGE,Z=>{var Y;if(!M){const te=Z.data[0];as(!!te);const be=te,Pe=be.error||((Y=be[0])===null||Y===void 0?void 0:Y.error);if(Pe){Hr(nc,`RPC '${e}' stream ${o} received error:`,Pe);const Se=Pe.status;let Ie=function(ue){const ye=Va[ue];if(ye!==void 0)return K9(ye)}(Se),Ae=Pe.message;Ie===void 0&&(Ie=ur.INTERNAL,Ae="Unknown error status: "+Se+" with message "+Pe.message),M=!0,G.So(new oi(Ie,Ae)),I.close()}else Hr(nc,`RPC '${e}' stream ${o} received:`,te),G.bo(te)}}),q(p,b9.STAT_EVENT,Z=>{Z.stat===SI.PROXY?Hr(nc,`RPC '${e}' stream ${o} detected buffering proxy`):Z.stat===SI.NOPROXY&&Hr(nc,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{G.wo()},0),G}}function k2(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(t){return new h_e(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oQ{constructor(e,n,r=1e3,o=1.5,l=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=o,this.Qo=l,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),o=Math.max(0,n-r);o>0&&Hr("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sQ{constructor(e,n,r,o,l,h,p,i){this.ui=e,this.Ho=r,this.Jo=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=p,this.listener=i,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new oQ(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===ur.RESOURCE_EXHAUSTED?(vA(n.toString()),vA("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===ur.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Yo===n&&this.P_(r,o)},r=>{e(()=>{const o=new oi(ur.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(o)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(o=>{r(()=>this.I_(o))}),this.stream.onMessage(o=>{r(()=>++this.e_==1?this.E_(o):this.onNext(o))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Hr("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Hr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class n0e extends sQ{constructor(e,n,r,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,h),this.serializer=l}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=A_e(this.serializer,e),r=function(l){if(!("targetChange"in l))return ki.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?ki.min():h.readTime?cf(h.readTime):ki.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=OI(this.serializer),n.addTarget=function(l,h){let p;const i=h.target;if(p=LI(i)?{documents:g_e(l,i)}:{query:y_e(l,i)._t},p.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){p.resumeToken=X9(l,h.resumeToken);const b=RI(l,h.expectedCount);b!==null&&(p.expectedCount=b)}else if(h.snapshotVersion.compareTo(ki.min())>0){p.readTime=VC(l,h.snapshotVersion.toTimestamp());const b=RI(l,h.expectedCount);b!==null&&(p.expectedCount=b)}return p}(this.serializer,e);const r=v_e(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=OI(this.serializer),n.removeTarget=e,this.a_(n)}}class r0e extends sQ{constructor(e,n,r,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,h),this.serializer=l}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return as(!!e.streamToken),this.lastStreamToken=e.streamToken,as(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){as(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=m_e(e.writeResults,e.commitTime),r=cf(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=OI(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>p_e(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0e extends class{}{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new oi(ur.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Mo(e,kI(n,r),o,l,h)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ur.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new oi(ur.UNKNOWN,l.toString())})}Lo(e,n,r,o,l){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,p])=>this.connection.Lo(e,kI(n,r),o,h,p,l)).catch(h=>{throw h.name==="FirebaseError"?(h.code===ur.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new oi(ur.UNKNOWN,h.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class o0e{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(vA(n),this.D_=!1):Hr("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0e{constructor(e,n,r,o,l){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=l,this.k_._o(h=>{r.enqueueAndForget(async()=>{Og(this)&&(Hr("RemoteStore","Restarting streams for network reachability change."),await async function(i){const b=Mi(i);b.L_.add(4),await pb(b),b.q_.set("Unknown"),b.L_.delete(4),await YE(b)}(this))})}),this.q_=new o0e(r,o)}}async function YE(t){if(Og(t))for(const e of t.B_)await e(!0)}async function pb(t){for(const e of t.B_)await e(!1)}function aQ(t,e){const n=Mi(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),xP(n)?wP(n):Z_(n).r_()&&bP(n,e))}function vP(t,e){const n=Mi(t),r=Z_(n);n.N_.delete(e),r.r_()&&lQ(n,e),n.N_.size===0&&(r.r_()?r.o_():Og(n)&&n.q_.set("Unknown"))}function bP(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ki.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Z_(t).A_(e)}function lQ(t,e){t.Q_.xe(e),Z_(t).R_(e)}function wP(t){t.Q_=new a_e({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Z_(t).start(),t.q_.v_()}function xP(t){return Og(t)&&!Z_(t).n_()&&t.N_.size>0}function Og(t){return Mi(t).L_.size===0}function cQ(t){t.Q_=void 0}async function a0e(t){t.q_.set("Online")}async function l0e(t){t.N_.forEach((e,n)=>{bP(t,e)})}async function c0e(t,e){cQ(t),xP(t)?(t.q_.M_(e),wP(t)):t.q_.set("Unknown")}async function u0e(t,e,n){if(t.q_.set("Online"),e instanceof W9&&e.state===2&&e.cause)try{await async function(o,l){const h=l.cause;for(const p of l.targetIds)o.N_.has(p)&&(await o.remoteSyncer.rejectListen(p,h),o.N_.delete(p),o.Q_.removeTarget(p))}(t,e)}catch(r){Hr("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await QC(t,r)}else if(e instanceof Gx?t.Q_.Ke(e):e instanceof q9?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ki.min()))try{const r=await iQ(t.localStore);n.compareTo(r)>=0&&await function(l,h){const p=l.Q_.rt(h);return p.targetChanges.forEach((i,b)=>{if(i.resumeToken.approximateByteSize()>0){const E=l.N_.get(b);E&&l.N_.set(b,E.withResumeToken(i.resumeToken,h))}}),p.targetMismatches.forEach((i,b)=>{const E=l.N_.get(i);if(!E)return;l.N_.set(i,E.withResumeToken(zl.EMPTY_BYTE_STRING,E.snapshotVersion)),lQ(l,i);const I=new Op(E.target,i,b,E.sequenceNumber);bP(l,I)}),l.remoteSyncer.applyRemoteEvent(p)}(t,n)}catch(r){Hr("RemoteStore","Failed to raise snapshot:",r),await QC(t,r)}}async function QC(t,e,n){if(!db(e))throw e;t.L_.add(1),await pb(t),t.q_.set("Offline"),n||(n=()=>iQ(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Hr("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await YE(t)})}function uQ(t,e){return e().catch(n=>QC(t,n,e))}async function JE(t){const e=Mi(t),n=nm(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;h0e(e);)try{const o=await q_e(e.localStore,r);if(o===null){e.O_.length===0&&n.o_();break}r=o.batchId,d0e(e,o)}catch(o){await QC(e,o)}hQ(e)&&dQ(e)}function h0e(t){return Og(t)&&t.O_.length<10}function d0e(t,e){t.O_.push(e);const n=nm(t);n.r_()&&n.V_&&n.m_(e.mutations)}function hQ(t){return Og(t)&&!nm(t).n_()&&t.O_.length>0}function dQ(t){nm(t).start()}async function f0e(t){nm(t).p_()}async function A0e(t){const e=nm(t);for(const n of t.O_)e.m_(n.mutations)}async function p0e(t,e,n){const r=t.O_.shift(),o=AP.from(r,e,n);await uQ(t,()=>t.remoteSyncer.applySuccessfulWrite(o)),await JE(t)}async function m0e(t,e){e&&nm(t).V_&&await async function(r,o){if(function(h){return i_e(h)&&h!==ur.ABORTED}(o.code)){const l=r.O_.shift();nm(r).s_(),await uQ(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,o)),await JE(r)}}(t,e),hQ(t)&&dQ(t)}async function M6(t,e){const n=Mi(t);n.asyncQueue.verifyOperationInProgress(),Hr("RemoteStore","RemoteStore received new credentials");const r=Og(n);n.L_.add(3),await pb(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await YE(n)}async function g0e(t,e){const n=Mi(t);e?(n.L_.delete(2),await YE(n)):e||(n.L_.add(2),await pb(n),n.q_.set("Unknown"))}function Z_(t){return t.K_||(t.K_=function(n,r,o){const l=Mi(n);return l.w_(),new n0e(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(t.datastore,t.asyncQueue,{Eo:a0e.bind(null,t),Ro:l0e.bind(null,t),mo:c0e.bind(null,t),d_:u0e.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),xP(t)?wP(t):t.q_.set("Unknown")):(await t.K_.stop(),cQ(t))})),t.K_}function nm(t){return t.U_||(t.U_=function(n,r,o){const l=Mi(n);return l.w_(),new r0e(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:f0e.bind(null,t),mo:m0e.bind(null,t),f_:A0e.bind(null,t),g_:p0e.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await JE(t)):(await t.U_.stop(),t.O_.length>0&&(Hr("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e,n,r,o,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=l,this.deferred=new AA,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,l){const h=Date.now()+r,p=new CP(e,n,h,o,l);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oi(ur.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function EP(t,e){if(vA("AsyncQueue",`${e}: ${t}`),db(t))return new oi(ur.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(e){this.comparator=e?(n,r)=>e(n,r)||fi.comparator(n.key,r.key):(n,r)=>fi.comparator(n.key,r.key),this.keyedMap=vv(),this.sortedSet=new oa(this.comparator)}static emptySet(e){return new r_(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof r_)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,l=r.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new r_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(){this.W_=new oa(fi.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Si():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class F_{constructor(e,n,r,o,l,h,p,i,b){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=p,this.excludesMetadataChanges=i,this.hasCachedResults=b}static fromInitialDocuments(e,n,r,o,l){const h=[];return n.forEach(p=>{h.push({type:0,doc:p})}),new F_(e,n,r_.emptySet(n),h,r,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&GE(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0e{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class _0e{constructor(){this.queries=D6(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const o=Mi(n),l=o.queries;o.queries=D6(),l.forEach((h,p)=>{for(const i of p.j_)i.onError(r)})})(this,new oi(ur.ABORTED,"Firestore shutting down"))}}function D6(){return new X_(t=>M9(t),GE)}async function fQ(t,e){const n=Mi(t);let r=3;const o=e.query;let l=n.queries.get(o);l?!l.H_()&&e.J_()&&(r=2):(l=new y0e,r=e.J_()?0:1);try{switch(r){case 0:l.z_=await n.onListen(o,!0);break;case 1:l.z_=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const p=EP(h,`Initialization of query '${ky(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,l),l.j_.push(e),e.Z_(n.onlineState),l.z_&&e.X_(l.z_)&&BP(n)}async function AQ(t,e){const n=Mi(t),r=e.query;let o=3;const l=n.queries.get(r);if(l){const h=l.j_.indexOf(e);h>=0&&(l.j_.splice(h,1),l.j_.length===0?o=e.J_()?0:1:!l.H_()&&e.J_()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function v0e(t,e){const n=Mi(t);let r=!1;for(const o of e){const l=o.query,h=n.queries.get(l);if(h){for(const p of h.j_)p.X_(o)&&(r=!0);h.z_=o}}r&&BP(n)}function b0e(t,e,n){const r=Mi(t),o=r.queries.get(e);if(o)for(const l of o.j_)l.onError(n);r.queries.delete(e)}function BP(t){t.Y_.forEach(e=>{e.next()})}var UI,U6;(U6=UI||(UI={})).ea="default",U6.Cache="cache";class pQ{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new F_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=F_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==UI.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mQ{constructor(e){this.key=e}}class gQ{constructor(e){this.key=e}}class w0e{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=mo(),this.mutatedKeys=mo(),this.Aa=O9(e),this.Ra=new r_(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new O6,o=n?n.Ra:this.Ra;let l=n?n.mutatedKeys:this.mutatedKeys,h=o,p=!1;const i=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,b=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,I)=>{const O=o.get(E),M=KE(this.query,I)?I:null,G=!!O&&this.mutatedKeys.has(O.key),q=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let Z=!1;O&&M?O.data.isEqual(M.data)?G!==q&&(r.track({type:3,doc:M}),Z=!0):this.ga(O,M)||(r.track({type:2,doc:M}),Z=!0,(i&&this.Aa(M,i)>0||b&&this.Aa(M,b)<0)&&(p=!0)):!O&&M?(r.track({type:0,doc:M}),Z=!0):O&&!M&&(r.track({type:1,doc:O}),Z=!0,(i||b)&&(p=!0)),Z&&(M?(h=h.add(M),l=q?l.add(E):l.delete(E)):(h=h.delete(E),l=l.delete(E)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),l=l.delete(E.key),r.track({type:1,doc:E})}return{Ra:h,fa:r,ns:p,mutatedKeys:l}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){const l=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const h=e.fa.G_();h.sort((E,I)=>function(M,G){const q=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Si()}};return q(M)-q(G)}(E.type,I.type)||this.Aa(E.doc,I.doc)),this.pa(r),o=o!=null&&o;const p=n&&!o?this.ya():[],i=this.da.size===0&&this.current&&!o?1:0,b=i!==this.Ea;return this.Ea=i,h.length!==0||b?{snapshot:new F_(this.query,e.Ra,l,h,e.mutatedKeys,i===0,b,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:p}:{wa:p}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new O6,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=mo(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new gQ(r))}),this.da.forEach(r=>{e.has(r)||n.push(new mQ(r))}),n}ba(e){this.Ta=e.Ts,this.da=mo();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return F_.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class x0e{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class C0e{constructor(e){this.key=e,this.va=!1}}class E0e{constructor(e,n,r,o,l,h){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Ca={},this.Fa=new X_(p=>M9(p),GE),this.Ma=new Map,this.xa=new Set,this.Oa=new oa(fi.comparator),this.Na=new Map,this.La=new gP,this.Ba={},this.ka=new Map,this.qa=L_.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function B0e(t,e,n=!0){const r=xQ(t);let o;const l=r.Fa.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.Da()):o=await yQ(r,e,n,!0),o}async function S0e(t,e){const n=xQ(t);await yQ(n,e,!0,!1)}async function yQ(t,e,n,r){const o=await W_e(t.localStore,af(e)),l=o.targetId,h=t.sharedClientState.addLocalQueryTarget(l,n);let p;return r&&(p=await T0e(t,e,l,h==="current",o.resumeToken)),t.isPrimaryClient&&n&&aQ(t.remoteStore,o),p}async function T0e(t,e,n,r,o){t.Ka=(I,O,M)=>async function(q,Z,Y,te){let be=Z.view.ma(Y);be.ns&&(be=await F6(q.localStore,Z.query,!1).then(({documents:Ae})=>Z.view.ma(Ae,be)));const Pe=te&&te.targetChanges.get(Z.targetId),Se=te&&te.targetMismatches.get(Z.targetId)!=null,Ie=Z.view.applyChanges(be,q.isPrimaryClient,Pe,Se);return z6(q,Z.targetId,Ie.wa),Ie.snapshot}(t,I,O,M);const l=await F6(t.localStore,e,!0),h=new w0e(e,l.Ts),p=h.ma(l.documents),i=Ab.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",o),b=h.applyChanges(p,t.isPrimaryClient,i);z6(t,n,b.wa);const E=new x0e(e,n,h);return t.Fa.set(e,E),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),b.snapshot}async function I0e(t,e,n){const r=Mi(t),o=r.Fa.get(e),l=r.Ma.get(o.targetId);if(l.length>1)return r.Ma.set(o.targetId,l.filter(h=>!GE(h,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await DI(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),n&&vP(r.remoteStore,o.targetId),NI(r,o.targetId)}).catch(hb)):(NI(r,o.targetId),await DI(r.localStore,o.targetId,!0))}async function P0e(t,e){const n=Mi(t),r=n.Fa.get(e),o=n.Ma.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),vP(n.remoteStore,r.targetId))}async function L0e(t,e,n){const r=U0e(t);try{const o=await function(h,p){const i=Mi(h),b=ol.now(),E=p.reduce((M,G)=>M.add(G.key),mo());let I,O;return i.persistence.runTransaction("Locally write mutations","readwrite",M=>{let G=bA(),q=mo();return i.cs.getEntries(M,E).next(Z=>{G=Z,G.forEach((Y,te)=>{te.isValidDocument()||(q=q.add(Y))})}).next(()=>i.localDocuments.getOverlayedDocuments(M,G)).next(Z=>{I=Z;const Y=[];for(const te of p){const be=Jye(te,I.get(te.key).overlayedDocument);be!=null&&Y.push(new Mg(te.key,be,T9(be.value.mapValue),lf.exists(!0)))}return i.mutationQueue.addMutationBatch(M,b,Y,p)}).next(Z=>{O=Z;const Y=Z.applyToLocalDocumentSet(I,q);return i.documentOverlayCache.saveOverlays(M,Z.batchId,Y)})}).then(()=>({batchId:O.batchId,changes:U9(I)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(h,p,i){let b=h.Ba[h.currentUser.toKey()];b||(b=new oa(Qo)),b=b.insert(p,i),h.Ba[h.currentUser.toKey()]=b}(r,o.batchId,n),await mb(r,o.changes),await JE(r.remoteStore)}catch(o){const l=EP(o,"Failed to persist write");n.reject(l)}}async function _Q(t,e){const n=Mi(t);try{const r=await G_e(n.localStore,e);e.targetChanges.forEach((o,l)=>{const h=n.Na.get(l);h&&(as(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.va=!0:o.modifiedDocuments.size>0?as(h.va):o.removedDocuments.size>0&&(as(h.va),h.va=!1))}),await mb(n,r,e)}catch(r){await hb(r)}}function N6(t,e,n){const r=Mi(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.Fa.forEach((l,h)=>{const p=h.view.Z_(e);p.snapshot&&o.push(p.snapshot)}),function(h,p){const i=Mi(h);i.onlineState=p;let b=!1;i.queries.forEach((E,I)=>{for(const O of I.j_)O.Z_(p)&&(b=!0)}),b&&BP(i)}(r.eventManager,e),o.length&&r.Ca.d_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function F0e(t,e,n){const r=Mi(t);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.Na.get(e),l=o&&o.key;if(l){let h=new oa(fi.comparator);h=h.insert(l,uc.newNoDocument(l,ki.min()));const p=mo().add(l),i=new XE(ki.min(),new Map,new oa(Qo),h,p);await _Q(r,i),r.Oa=r.Oa.remove(l),r.Na.delete(e),SP(r)}else await DI(r.localStore,e,!1).then(()=>NI(r,e,n)).catch(hb)}async function R0e(t,e){const n=Mi(t),r=e.batch.batchId;try{const o=await $_e(n.localStore,e);bQ(n,r,null),vQ(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await mb(n,o)}catch(o){await hb(o)}}async function k0e(t,e,n){const r=Mi(t);try{const o=await function(h,p){const i=Mi(h);return i.persistence.runTransaction("Reject batch","readwrite-primary",b=>{let E;return i.mutationQueue.lookupMutationBatch(b,p).next(I=>(as(I!==null),E=I.keys(),i.mutationQueue.removeMutationBatch(b,I))).next(()=>i.mutationQueue.performConsistencyCheck(b)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(b,E,p)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(b,E)).next(()=>i.localDocuments.getDocuments(b,E))})}(r.localStore,e);bQ(r,e,n),vQ(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await mb(r,o)}catch(o){await hb(o)}}function vQ(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function bQ(t,e,n){const r=Mi(t);let o=r.Ba[r.currentUser.toKey()];if(o){const l=o.get(e);l&&(n?l.reject(n):l.resolve(),o=o.remove(e)),r.Ba[r.currentUser.toKey()]=o}}function NI(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||wQ(t,r)})}function wQ(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(vP(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),SP(t))}function z6(t,e,n){for(const r of n)r instanceof mQ?(t.La.addReference(r.key,e),M0e(t,r)):r instanceof gQ?(Hr("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||wQ(t,r.key)):Si()}function M0e(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Hr("SyncEngine","New document in limbo: "+n),t.xa.add(r),SP(t))}function SP(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new fi(Gs.fromString(e)),r=t.qa.next();t.Na.set(r,new C0e(n)),t.Oa=t.Oa.insert(n,r),aQ(t.remoteStore,new Op(af(hP(n.path)),r,"TargetPurposeLimboResolution",oP.oe))}}async function mb(t,e,n){const r=Mi(t),o=[],l=[],h=[];r.Fa.isEmpty()||(r.Fa.forEach((p,i)=>{h.push(r.Ka(i,e,n).then(b=>{var E;if((b||n)&&r.isPrimaryClient){const I=b?!b.fromCache:(E=n==null?void 0:n.targetChanges.get(i.targetId))===null||E===void 0?void 0:E.current;r.sharedClientState.updateQueryState(i.targetId,I?"current":"not-current")}if(b){o.push(b);const I=_P.Wi(i.targetId,b);l.push(I)}}))}),await Promise.all(h),r.Ca.d_(o),await async function(i,b){const E=Mi(i);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>hr.forEach(b,O=>hr.forEach(O.$i,M=>E.persistence.referenceDelegate.addReference(I,O.targetId,M)).next(()=>hr.forEach(O.Ui,M=>E.persistence.referenceDelegate.removeReference(I,O.targetId,M)))))}catch(I){if(!db(I))throw I;Hr("LocalStore","Failed to update sequence numbers: "+I)}for(const I of b){const O=I.targetId;if(!I.fromCache){const M=E.os.get(O),G=M.snapshotVersion,q=M.withLastLimboFreeSnapshotVersion(G);E.os=E.os.insert(O,q)}}}(r.localStore,l))}async function O0e(t,e){const n=Mi(t);if(!n.currentUser.isEqual(e)){Hr("SyncEngine","User change. New user:",e.toKey());const r=await rQ(n.localStore,e);n.currentUser=e,function(l,h){l.ka.forEach(p=>{p.forEach(i=>{i.reject(new oi(ur.CANCELLED,h))})}),l.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await mb(n,r.hs)}}function D0e(t,e){const n=Mi(t),r=n.Na.get(e);if(r&&r.va)return mo().add(r.key);{let o=mo();const l=n.Ma.get(e);if(!l)return o;for(const h of l){const p=n.Fa.get(h);o=o.unionWith(p.view.Va)}return o}}function xQ(t){const e=Mi(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=_Q.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=D0e.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=F0e.bind(null,e),e.Ca.d_=v0e.bind(null,e.eventManager),e.Ca.$a=b0e.bind(null,e.eventManager),e}function U0e(t){const e=Mi(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=R0e.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=k0e.bind(null,e),e}class HC{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ZE(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return j_e(this.persistence,new Q_e,e.initialUser,this.serializer)}Ga(e){return new N_e(yP.Zr,this.serializer)}Wa(e){return new Z_e}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}HC.provider={build:()=>new HC};class zI{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>N6(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=O0e.bind(null,this.syncEngine),await g0e(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new _0e}()}createDatastore(e){const n=ZE(e.databaseInfo.databaseId),r=function(l){return new t0e(l)}(e.databaseInfo);return function(l,h,p,i){return new i0e(l,h,p,i)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,o,l,h,p){return new s0e(r,o,l,h,p)}(this.localStore,this.datastore,e.asyncQueue,n=>N6(this.syncEngine,n,0),function(){return k6.D()?new k6:new Y_e}())}createSyncEngine(e,n){return function(o,l,h,p,i,b,E){const I=new E0e(o,l,h,p,i,b);return E&&(I.Qa=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const l=Mi(o);Hr("RemoteStore","RemoteStore shutting down."),l.L_.add(5),await pb(l),l.k_.shutdown(),l.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}zI.provider={build:()=>new zI};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CQ{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):vA("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0e{constructor(e,n,r,o,l){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=o,this.user=lc.UNAUTHENTICATED,this.clientId=E9.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,async h=>{Hr("FirestoreClient","Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(r,h=>(Hr("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new AA;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=EP(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function M2(t,e){t.asyncQueue.verifyOperationInProgress(),Hr("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async o=>{r.isEqual(o)||(await rQ(e.localStore,o),r=o)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function V6(t,e){t.asyncQueue.verifyOperationInProgress();const n=await z0e(t);Hr("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>M6(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,o)=>M6(e.remoteStore,o)),t._onlineComponents=e}async function z0e(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Hr("FirestoreClient","Using user provided OfflineComponentProvider");try{await M2(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===ur.FAILED_PRECONDITION||o.code===ur.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;S_("Error using user provided cache. Falling back to memory cache: "+n),await M2(t,new HC)}}else Hr("FirestoreClient","Using default OfflineComponentProvider"),await M2(t,new HC);return t._offlineComponents}async function EQ(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Hr("FirestoreClient","Using user provided OnlineComponentProvider"),await V6(t,t._uninitializedComponentsProvider._online)):(Hr("FirestoreClient","Using default OnlineComponentProvider"),await V6(t,new zI))),t._onlineComponents}function V0e(t){return EQ(t).then(e=>e.syncEngine)}async function BQ(t){const e=await EQ(t),n=e.eventManager;return n.onListen=B0e.bind(null,e.syncEngine),n.onUnlisten=I0e.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=S0e.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=P0e.bind(null,e.syncEngine),n}function Q0e(t,e,n={}){const r=new AA;return t.asyncQueue.enqueueAndForget(async()=>function(l,h,p,i,b){const E=new CQ({next:O=>{E.Za(),h.enqueueAndForget(()=>AQ(l,I));const M=O.docs.has(p);!M&&O.fromCache?b.reject(new oi(ur.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&O.fromCache&&i&&i.source==="server"?b.reject(new oi(ur.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):b.resolve(O)},error:O=>b.reject(O)}),I=new pQ(hP(p.path),E,{includeMetadataChanges:!0,_a:!0});return fQ(l,I)}(await BQ(t),t.asyncQueue,e,n,r)),r.promise}function H0e(t,e,n={}){const r=new AA;return t.asyncQueue.enqueueAndForget(async()=>function(l,h,p,i,b){const E=new CQ({next:O=>{E.Za(),h.enqueueAndForget(()=>AQ(l,I)),O.fromCache&&i.source==="server"?b.reject(new oi(ur.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):b.resolve(O)},error:O=>b.reject(O)}),I=new pQ(p,E,{includeMetadataChanges:!0,_a:!0});return fQ(l,I)}(await BQ(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SQ(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q6=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TQ(t,e,n){if(!n)throw new oi(ur.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function j0e(t,e,n,r){if(e===!0&&r===!0)throw new oi(ur.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function H6(t){if(!fi.isDocumentKey(t))throw new oi(ur.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function j6(t){if(fi.isDocumentKey(t))throw new oi(ur.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function TP(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Si()}function rm(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new oi(ur.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=TP(t);throw new oi(ur.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $6{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new oi(ur.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new oi(ur.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}j0e("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=SQ((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new oi(ur.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new oi(ur.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new oi(ur.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class eB{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $6({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oi(ur.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oi(ur.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $6(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new aye;switch(r.type){case"firstParty":return new hye(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new oi(ur.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Q6.get(n);r&&(Hr("ComponentProvider","Removing Datastore"),Q6.delete(n),r.terminate())}(this),Promise.resolve()}}function $0e(t,e,n,r={}){var o;const l=(t=rm(t,eB))._getSettings(),h=`${e}:${n}`;if(l.host!=="firestore.googleapis.com"&&l.host!==h&&S_("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},l),{host:h,ssl:!1})),r.mockUserToken){let p,i;if(typeof r.mockUserToken=="string")p=r.mockUserToken,i=lc.MOCK_USER;else{p=SAe(r.mockUserToken,(o=t._app)===null||o===void 0?void 0:o.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new oi(ur.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");i=new lc(b)}t._authCredentials=new lye(new C9(p,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tB{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new tB(this.firestore,e,this._query)}}class Qu{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gp(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qu(this.firestore,e,this._key)}}class Gp extends tB{constructor(e,n,r){super(e,n,hP(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qu(this.firestore,null,new fi(e))}withConverter(e){return new Gp(this.firestore,e,this._path)}}function G0e(t,e,...n){if(t=Wu(t),TQ("collection","path",e),t instanceof eB){const r=Gs.fromString(e,...n);return j6(r),new Gp(t,null,r)}{if(!(t instanceof Qu||t instanceof Gp))throw new oi(ur.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Gs.fromString(e,...n));return j6(r),new Gp(t.firestore,null,r)}}function gb(t,e,...n){if(t=Wu(t),arguments.length===1&&(e=E9.newId()),TQ("doc","path",e),t instanceof eB){const r=Gs.fromString(e,...n);return H6(r),new Qu(t,null,new fi(r))}{if(!(t instanceof Qu||t instanceof Gp))throw new oi(ur.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Gs.fromString(e,...n));return H6(r),new Qu(t.firestore,t instanceof Gp?t.converter:null,new fi(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new oQ(this,"async_queue_retry"),this.Vu=()=>{const r=k2();r&&Hr("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=k2();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=k2();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new AA;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!db(e))throw e;Hr("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const o=function(h){let p=h.message||"";return h.stack&&(p=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),p}(r);throw vA("INTERNAL UNHANDLED ERROR: ",o),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const o=CP.createAndSchedule(this,e,n,r,l=>this.yu(l));return this.Tu.push(o),o}fu(){this.Eu&&Si()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class yb extends eB{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new G6,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new G6(e),this._firestoreClient=void 0,await e}}}function Y_(t,e){const n=typeof t=="object"?t:kV(),r=typeof t=="string"?t:"(default)",o=q4(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const l=EAe("firestore");l&&$0e(o,...l)}return o}function IP(t){if(t._terminated)throw new oi(ur.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||K0e(t),t._firestoreClient}function K0e(t){var e,n,r;const o=t._freezeSettings(),l=function(p,i,b,E){return new Cye(p,i,b,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,SQ(E.experimentalLongPollingOptions),E.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,o);t._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),t._firestoreClient=new N0e(t._authCredentials,t._appCheckCredentials,t._queue,l,t._componentsProvider&&function(p){const i=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(i),_online:i}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e){this._byteString=e}static fromBase64String(e){try{return new R_(zl.fromBase64String(e))}catch(n){throw new oi(ur.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new R_(zl.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new oi(ur.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ml(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IQ{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new oi(ur.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new oi(ur.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Qo(this._lat,e._lat)||Qo(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,o){if(r.length!==o.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==o[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0e=/^__.*__$/;class W0e{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Mg(e,this.data,this.fieldMask,n,this.fieldTransforms):new fb(e,this.data,n,this.fieldTransforms)}}function PQ(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Si()}}class RP{constructor(e,n,r,o,l,h){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,l===void 0&&this.vu(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new RP(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Fu({path:r,xu:!1});return o.Ou(e),o}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Fu({path:r,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return jC(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(PQ(this.Cu)&&q0e.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class X0e{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ZE(e)}Qu(e,n,r,o=!1){return new RP({Cu:e,methodName:n,qu:r,path:Ml.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Z0e(t){const e=t._freezeSettings(),n=ZE(t._databaseId);return new X0e(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Y0e(t,e,n,r,o,l={}){const h=t.Qu(l.merge||l.mergeFields?2:0,e,n,o);kQ("Data must be an object, but it was:",h,r);const p=FQ(r,h);let i,b;if(l.merge)i=new hd(h.fieldMask),b=h.fieldTransforms;else if(l.mergeFields){const E=[];for(const I of l.mergeFields){const O=J0e(e,I,n);if(!h.contains(O))throw new oi(ur.INVALID_ARGUMENT,`Field '${O}' is specified in your field mask but missing from your input data.`);tve(E,O)||E.push(O)}i=new hd(E),b=h.fieldTransforms.filter(I=>i.covers(I.field))}else i=null,b=h.fieldTransforms;return new W0e(new Eh(p),i,b)}function LQ(t,e){if(RQ(t=Wu(t)))return kQ("Unsupported field value:",e,t),FQ(t,e);if(t instanceof IQ)return function(r,o){if(!PQ(o.Cu))throw o.Bu(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,o){const l=[];let h=0;for(const p of r){let i=LQ(p,o.Lu(h));i==null&&(i={nullValue:"NULL_VALUE"}),l.push(i),h++}return{arrayValue:{values:l}}}(t,e)}return function(r,o){if((r=Wu(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Kye(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=ol.fromDate(r);return{timestampValue:VC(o.serializer,l)}}if(r instanceof ol){const l=new ol(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:VC(o.serializer,l)}}if(r instanceof LP)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof R_)return{bytesValue:X9(o.serializer,r._byteString)};if(r instanceof Qu){const l=o.databaseId,h=r.firestore._databaseId;if(!h.isEqual(l))throw o.Bu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:mP(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof FP)return function(h,p){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:h.toArray().map(i=>{if(typeof i!="number")throw p.Bu("VectorValues must only contain numeric values.");return dP(p.serializer,i)})}}}}}}(r,o);throw o.Bu(`Unsupported field value: ${TP(r)}`)}(t,e)}function FQ(t,e){const n={};return B9(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):W_(t,(r,o)=>{const l=LQ(o,e.Mu(r));l!=null&&(n[r]=l)}),{mapValue:{fields:n}}}function RQ(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ol||t instanceof LP||t instanceof R_||t instanceof Qu||t instanceof IQ||t instanceof FP)}function kQ(t,e,n){if(!RQ(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const r=TP(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function J0e(t,e,n){if((e=Wu(e))instanceof PP)return e._internalPath;if(typeof e=="string")return MQ(t,e);throw jC("Field path arguments must be of type string or ",t,!1,void 0,n)}const eve=new RegExp("[~\\*/\\[\\]]");function MQ(t,e,n){if(e.search(eve)>=0)throw jC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new PP(...e.split("."))._internalPath}catch{throw jC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function jC(t,e,n,r,o){const l=r&&!r.isEmpty(),h=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let i="";return(l||h)&&(i+=" (found",l&&(i+=` in field ${r}`),h&&(i+=` in document ${o}`),i+=")"),new oi(ur.INVALID_ARGUMENT,p+t+i)}function tve(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OQ{constructor(e,n,r,o,l){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Qu(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new nve(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(DQ("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class nve extends OQ{data(){return super.data()}}function DQ(t,e){return typeof e=="string"?MQ(t,e):e instanceof PP?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rve(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new oi(ur.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ive{convertValue(e,n="none"){switch(Eg(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ba(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Cg(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Si()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return W_(e,(o,l)=>{r[o]=this.convertValue(l,n)}),r}convertVectorValue(e){var n,r,o;const l=(o=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(h=>Ba(h.doubleValue));return new FP(l)}convertGeoPoint(e){return new LP(Ba(e.latitude),Ba(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=aP(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(M1(e));default:return null}}convertTimestamp(e){const n=tm(e);return new ol(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Gs.fromString(e);as(nQ(r));const o=new O1(r.get(1),r.get(3)),l=new fi(r.popFirst(5));return o.isEqual(n)||vA(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ove(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class UQ extends OQ{constructor(e,n,r,o,l,h){super(e,n,r,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Kx(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(DQ("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Kx extends UQ{data(e={}){return super.data(e)}}class sve{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new wv(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Kx(this._firestore,this._userDataWriter,r.key,r,new wv(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new oi(ur.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(p=>{const i=new Kx(o._firestore,o._userDataWriter,p.doc.key,p.doc,new wv(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:i,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(p=>l||p.type!==3).map(p=>{const i=new Kx(o._firestore,o._userDataWriter,p.doc.key,p.doc,new wv(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let b=-1,E=-1;return p.type!==0&&(b=h.indexOf(p.doc.key),h=h.delete(p.doc.key)),p.type!==1&&(h=h.add(p.doc),E=h.indexOf(p.doc.key)),{type:ave(p.type),doc:i,oldIndex:b,newIndex:E}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function ave(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Si()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kP(t){t=rm(t,Qu);const e=rm(t.firestore,yb);return Q0e(IP(e),t._key).then(n=>hve(e,t,n))}class NQ extends ive{constructor(e){super(),this.firestore=e}convertBytes(e){return new R_(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Qu(this.firestore,null,n)}}function lve(t){t=rm(t,tB);const e=rm(t.firestore,yb),n=IP(e),r=new NQ(e);return rve(t._query),H0e(n,t._query).then(o=>new sve(e,r,t,o))}function cve(t,e,n){t=rm(t,Qu);const r=rm(t.firestore,yb),o=ove(t.converter,e);return zQ(r,[Y0e(Z0e(r),"setDoc",t._key,o,t.converter!==null,n).toMutation(t._key,lf.none())])}function uve(t){return zQ(rm(t.firestore,yb),[new fP(t._key,lf.none())])}function zQ(t,e){return function(r,o){const l=new AA;return r.asyncQueue.enqueueAndForget(async()=>L0e(await V0e(r),o,l)),l.promise}(IP(t),e)}function hve(t,e,n){const r=n.docs.get(e._key),o=new NQ(t);return new UQ(t,o,e._key,r,new wv(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(o){q_=o})(G_),B_(new vg("firestore",(r,{instanceIdentifier:o,options:l})=>{const h=r.getProvider("app").getImmediate(),p=new yb(new cye(r.getProvider("auth-internal")),new fye(r.getProvider("app-check-internal")),function(b,E){if(!Object.prototype.hasOwnProperty.apply(b.options,["projectId"]))throw new oi(ur.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new O1(b.options.projectId,E)}(h,o),h);return l=Object.assign({useFetchStreams:n},l),p._setSettings(l),p},"PUBLIC").setMultipleInstances(!0)),$p(h6,"4.7.3",e),$p(h6,"4.7.3","esm2017")})();/*!
  * vue-router v4.4.3
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Dy=typeof document<"u";function dve(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const os=Object.assign;function O2(t,e){const n={};for(const r in e){const o=e[r];n[r]=md(o)?o.map(t):t(o)}return n}const $v=()=>{},md=Array.isArray,VQ=/#/g,fve=/&/g,Ave=/\//g,pve=/=/g,mve=/\?/g,QQ=/\+/g,gve=/%5B/g,yve=/%5D/g,HQ=/%5E/g,_ve=/%60/g,jQ=/%7B/g,vve=/%7C/g,$Q=/%7D/g,bve=/%20/g;function MP(t){return encodeURI(""+t).replace(vve,"|").replace(gve,"[").replace(yve,"]")}function wve(t){return MP(t).replace(jQ,"{").replace($Q,"}").replace(HQ,"^")}function VI(t){return MP(t).replace(QQ,"%2B").replace(bve,"+").replace(VQ,"%23").replace(fve,"%26").replace(_ve,"`").replace(jQ,"{").replace($Q,"}").replace(HQ,"^")}function xve(t){return VI(t).replace(pve,"%3D")}function Cve(t){return MP(t).replace(VQ,"%23").replace(mve,"%3F")}function Eve(t){return t==null?"":Cve(t).replace(Ave,"%2F")}function z1(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const Bve=/\/$/,Sve=t=>t.replace(Bve,"");function D2(t,e,n="/"){let r,o={},l="",h="";const p=e.indexOf("#");let i=e.indexOf("?");return p<i&&p>=0&&(i=-1),i>-1&&(r=e.slice(0,i),l=e.slice(i+1,p>-1?p:e.length),o=t(l)),p>-1&&(r=r||e.slice(0,p),h=e.slice(p,e.length)),r=Lve(r??e,n),{fullPath:r+(l&&"?")+l+h,path:r,query:o,hash:z1(h)}}function Tve(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function K6(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Ive(t,e,n){const r=e.matched.length-1,o=n.matched.length-1;return r>-1&&r===o&&k_(e.matched[r],n.matched[o])&&GQ(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function k_(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function GQ(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!Pve(t[n],e[n]))return!1;return!0}function Pve(t,e){return md(t)?q6(t,e):md(e)?q6(e,t):t===e}function q6(t,e){return md(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function Lve(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),o=r[r.length-1];(o===".."||o===".")&&r.push("");let l=n.length-1,h,p;for(h=0;h<r.length;h++)if(p=r[h],p!==".")if(p==="..")l>1&&l--;else break;return n.slice(0,l).join("/")+"/"+r.slice(h).join("/")}const fp={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var V1;(function(t){t.pop="pop",t.push="push"})(V1||(V1={}));var Gv;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Gv||(Gv={}));function Fve(t){if(!t)if(Dy){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Sve(t)}const Rve=/^[^#]+#/;function kve(t,e){return t.replace(Rve,"#")+e}function Mve(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const nB=()=>({left:window.scrollX,top:window.scrollY});function Ove(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),o=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;e=Mve(o,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function W6(t,e){return(history.state?history.state.position-e:-1)+t}const QI=new Map;function Dve(t,e){QI.set(t,e)}function Uve(t){const e=QI.get(t);return QI.delete(t),e}let Nve=()=>location.protocol+"//"+location.host;function KQ(t,e){const{pathname:n,search:r,hash:o}=e,l=t.indexOf("#");if(l>-1){let p=o.includes(t.slice(l))?t.slice(l).length:1,i=o.slice(p);return i[0]!=="/"&&(i="/"+i),K6(i,"")}return K6(n,t)+r+o}function zve(t,e,n,r){let o=[],l=[],h=null;const p=({state:O})=>{const M=KQ(t,location),G=n.value,q=e.value;let Z=0;if(O){if(n.value=M,e.value=O,h&&h===G){h=null;return}Z=q?O.position-q.position:0}else r(M);o.forEach(Y=>{Y(n.value,G,{delta:Z,type:V1.pop,direction:Z?Z>0?Gv.forward:Gv.back:Gv.unknown})})};function i(){h=n.value}function b(O){o.push(O);const M=()=>{const G=o.indexOf(O);G>-1&&o.splice(G,1)};return l.push(M),M}function E(){const{history:O}=window;O.state&&O.replaceState(os({},O.state,{scroll:nB()}),"")}function I(){for(const O of l)O();l=[],window.removeEventListener("popstate",p),window.removeEventListener("beforeunload",E)}return window.addEventListener("popstate",p),window.addEventListener("beforeunload",E,{passive:!0}),{pauseListeners:i,listen:b,destroy:I}}function X6(t,e,n,r=!1,o=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:o?nB():null}}function Vve(t){const{history:e,location:n}=window,r={value:KQ(t,n)},o={value:e.state};o.value||l(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function l(i,b,E){const I=t.indexOf("#"),O=I>-1?(n.host&&document.querySelector("base")?t:t.slice(I))+i:Nve()+t+i;try{e[E?"replaceState":"pushState"](b,"",O),o.value=b}catch(M){console.error(M),n[E?"replace":"assign"](O)}}function h(i,b){const E=os({},e.state,X6(o.value.back,i,o.value.forward,!0),b,{position:o.value.position});l(i,E,!0),r.value=i}function p(i,b){const E=os({},o.value,e.state,{forward:i,scroll:nB()});l(E.current,E,!0);const I=os({},X6(r.value,i,null),{position:E.position+1},b);l(i,I,!1),r.value=i}return{location:r,state:o,push:p,replace:h}}function Qve(t){t=Fve(t);const e=Vve(t),n=zve(t,e.state,e.location,e.replace);function r(l,h=!0){h||n.pauseListeners(),history.go(l)}const o=os({location:"",base:t,go:r,createHref:kve.bind(null,t)},e,n);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>e.state.value}),o}function Hve(t){return typeof t=="string"||t&&typeof t=="object"}function qQ(t){return typeof t=="string"||typeof t=="symbol"}const WQ=Symbol("");var Z6;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Z6||(Z6={}));function M_(t,e){return os(new Error,{type:t,[WQ]:!0},e)}function Zf(t,e){return t instanceof Error&&WQ in t&&(e==null||!!(t.type&e))}const Y6="[^/]+?",jve={sensitive:!1,strict:!1,start:!0,end:!0},$ve=/[.+*?^${}()[\]/\\]/g;function Gve(t,e){const n=os({},jve,e),r=[];let o=n.start?"^":"";const l=[];for(const b of t){const E=b.length?[]:[90];n.strict&&!b.length&&(o+="/");for(let I=0;I<b.length;I++){const O=b[I];let M=40+(n.sensitive?.25:0);if(O.type===0)I||(o+="/"),o+=O.value.replace($ve,"\\$&"),M+=40;else if(O.type===1){const{value:G,repeatable:q,optional:Z,regexp:Y}=O;l.push({name:G,repeatable:q,optional:Z});const te=Y||Y6;if(te!==Y6){M+=10;try{new RegExp(`(${te})`)}catch(Pe){throw new Error(`Invalid custom RegExp for param "${G}" (${te}): `+Pe.message)}}let be=q?`((?:${te})(?:/(?:${te}))*)`:`(${te})`;I||(be=Z&&b.length<2?`(?:/${be})`:"/"+be),Z&&(be+="?"),o+=be,M+=20,Z&&(M+=-8),q&&(M+=-20),te===".*"&&(M+=-50)}E.push(M)}r.push(E)}if(n.strict&&n.end){const b=r.length-1;r[b][r[b].length-1]+=.7000000000000001}n.strict||(o+="/?"),n.end?o+="$":n.strict&&(o+="(?:/|$)");const h=new RegExp(o,n.sensitive?"":"i");function p(b){const E=b.match(h),I={};if(!E)return null;for(let O=1;O<E.length;O++){const M=E[O]||"",G=l[O-1];I[G.name]=M&&G.repeatable?M.split("/"):M}return I}function i(b){let E="",I=!1;for(const O of t){(!I||!E.endsWith("/"))&&(E+="/"),I=!1;for(const M of O)if(M.type===0)E+=M.value;else if(M.type===1){const{value:G,repeatable:q,optional:Z}=M,Y=G in b?b[G]:"";if(md(Y)&&!q)throw new Error(`Provided param "${G}" is an array but it is not repeatable (* or + modifiers)`);const te=md(Y)?Y.join("/"):Y;if(!te)if(Z)O.length<2&&(E.endsWith("/")?E=E.slice(0,-1):I=!0);else throw new Error(`Missing required param "${G}"`);E+=te}}return E||"/"}return{re:h,score:r,keys:l,parse:p,stringify:i}}function Kve(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function XQ(t,e){let n=0;const r=t.score,o=e.score;for(;n<r.length&&n<o.length;){const l=Kve(r[n],o[n]);if(l)return l;n++}if(Math.abs(o.length-r.length)===1){if(J6(r))return 1;if(J6(o))return-1}return o.length-r.length}function J6(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const qve={type:0,value:""},Wve=/[a-zA-Z0-9_]/;function Xve(t){if(!t)return[[]];if(t==="/")return[[qve]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(M){throw new Error(`ERR (${n})/"${b}": ${M}`)}let n=0,r=n;const o=[];let l;function h(){l&&o.push(l),l=[]}let p=0,i,b="",E="";function I(){b&&(n===0?l.push({type:0,value:b}):n===1||n===2||n===3?(l.length>1&&(i==="*"||i==="+")&&e(`A repeatable param (${b}) must be alone in its segment. eg: '/:ids+.`),l.push({type:1,value:b,regexp:E,repeatable:i==="*"||i==="+",optional:i==="*"||i==="?"})):e("Invalid state to consume buffer"),b="")}function O(){b+=i}for(;p<t.length;){if(i=t[p++],i==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:i==="/"?(b&&I(),h()):i===":"?(I(),n=1):O();break;case 4:O(),n=r;break;case 1:i==="("?n=2:Wve.test(i)?O():(I(),n=0,i!=="*"&&i!=="?"&&i!=="+"&&p--);break;case 2:i===")"?E[E.length-1]=="\\"?E=E.slice(0,-1)+i:n=3:E+=i;break;case 3:I(),n=0,i!=="*"&&i!=="?"&&i!=="+"&&p--,E="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${b}"`),I(),h(),o}function Zve(t,e,n){const r=Gve(Xve(t.path),n),o=os(r,{record:t,parent:e,children:[],alias:[]});return e&&!o.record.aliasOf==!e.record.aliasOf&&e.children.push(o),o}function Yve(t,e){const n=[],r=new Map;e=n3({strict:!1,end:!0,sensitive:!1},e);function o(I){return r.get(I)}function l(I,O,M){const G=!M,q=Jve(I);q.aliasOf=M&&M.record;const Z=n3(e,I),Y=[q];if("alias"in I){const Pe=typeof I.alias=="string"?[I.alias]:I.alias;for(const Se of Pe)Y.push(os({},q,{components:M?M.record.components:q.components,path:Se,aliasOf:M?M.record:q}))}let te,be;for(const Pe of Y){const{path:Se}=Pe;if(O&&Se[0]!=="/"){const Ie=O.record.path,Ae=Ie[Ie.length-1]==="/"?"":"/";Pe.path=O.record.path+(Se&&Ae+Se)}if(te=Zve(Pe,O,Z),M?M.alias.push(te):(be=be||te,be!==te&&be.alias.push(te),G&&I.name&&!t3(te)&&h(I.name)),ZQ(te)&&i(te),q.children){const Ie=q.children;for(let Ae=0;Ae<Ie.length;Ae++)l(Ie[Ae],te,M&&M.children[Ae])}M=M||te}return be?()=>{h(be)}:$v}function h(I){if(qQ(I)){const O=r.get(I);O&&(r.delete(I),n.splice(n.indexOf(O),1),O.children.forEach(h),O.alias.forEach(h))}else{const O=n.indexOf(I);O>-1&&(n.splice(O,1),I.record.name&&r.delete(I.record.name),I.children.forEach(h),I.alias.forEach(h))}}function p(){return n}function i(I){const O=n1e(I,n);n.splice(O,0,I),I.record.name&&!t3(I)&&r.set(I.record.name,I)}function b(I,O){let M,G={},q,Z;if("name"in I&&I.name){if(M=r.get(I.name),!M)throw M_(1,{location:I});Z=M.record.name,G=os(e3(O.params,M.keys.filter(be=>!be.optional).concat(M.parent?M.parent.keys.filter(be=>be.optional):[]).map(be=>be.name)),I.params&&e3(I.params,M.keys.map(be=>be.name))),q=M.stringify(G)}else if(I.path!=null)q=I.path,M=n.find(be=>be.re.test(q)),M&&(G=M.parse(q),Z=M.record.name);else{if(M=O.name?r.get(O.name):n.find(be=>be.re.test(O.path)),!M)throw M_(1,{location:I,currentLocation:O});Z=M.record.name,G=os({},O.params,I.params),q=M.stringify(G)}const Y=[];let te=M;for(;te;)Y.unshift(te.record),te=te.parent;return{name:Z,path:q,params:G,matched:Y,meta:t1e(Y)}}t.forEach(I=>l(I));function E(){n.length=0,r.clear()}return{addRoute:l,resolve:b,removeRoute:h,clearRoutes:E,getRoutes:p,getRecordMatcher:o}}function e3(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function Jve(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:e1e(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function e1e(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function t3(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function t1e(t){return t.reduce((e,n)=>os(e,n.meta),{})}function n3(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function n1e(t,e){let n=0,r=e.length;for(;n!==r;){const l=n+r>>1;XQ(t,e[l])<0?r=l:n=l+1}const o=r1e(t);return o&&(r=e.lastIndexOf(o,r-1)),r}function r1e(t){let e=t;for(;e=e.parent;)if(ZQ(e)&&XQ(t,e)===0)return e}function ZQ({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function i1e(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let o=0;o<r.length;++o){const l=r[o].replace(QQ," "),h=l.indexOf("="),p=z1(h<0?l:l.slice(0,h)),i=h<0?null:z1(l.slice(h+1));if(p in e){let b=e[p];md(b)||(b=e[p]=[b]),b.push(i)}else e[p]=i}return e}function r3(t){let e="";for(let n in t){const r=t[n];if(n=xve(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(md(r)?r.map(l=>l&&VI(l)):[r&&VI(r)]).forEach(l=>{l!==void 0&&(e+=(e.length?"&":"")+n,l!=null&&(e+="="+l))})}return e}function o1e(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=md(r)?r.map(o=>o==null?null:""+o):r==null?r:""+r)}return e}const s1e=Symbol(""),i3=Symbol(""),rB=Symbol(""),YQ=Symbol(""),HI=Symbol("");function rv(){let t=[];function e(r){return t.push(r),()=>{const o=t.indexOf(r);o>-1&&t.splice(o,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Cp(t,e,n,r,o,l=h=>h()){const h=r&&(r.enterCallbacks[o]=r.enterCallbacks[o]||[]);return()=>new Promise((p,i)=>{const b=O=>{O===!1?i(M_(4,{from:n,to:e})):O instanceof Error?i(O):Hve(O)?i(M_(2,{from:e,to:O})):(h&&r.enterCallbacks[o]===h&&typeof O=="function"&&h.push(O),p())},E=l(()=>t.call(r&&r.instances[o],e,n,b));let I=Promise.resolve(E);t.length<3&&(I=I.then(b)),I.catch(O=>i(O))})}function U2(t,e,n,r,o=l=>l()){const l=[];for(const h of t)for(const p in h.components){let i=h.components[p];if(!(e!=="beforeRouteEnter"&&!h.instances[p]))if(a1e(i)){const E=(i.__vccOpts||i)[e];E&&l.push(Cp(E,n,r,h,p,o))}else{let b=i();l.push(()=>b.then(E=>{if(!E)return Promise.reject(new Error(`Couldn't resolve component "${p}" at "${h.path}"`));const I=dve(E)?E.default:E;h.components[p]=I;const M=(I.__vccOpts||I)[e];return M&&Cp(M,n,r,h,p,o)()}))}}return l}function a1e(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function o3(t){const e=il(rB),n=il(YQ),r=ft(()=>{const i=tt(t.to);return e.resolve(i)}),o=ft(()=>{const{matched:i}=r.value,{length:b}=i,E=i[b-1],I=n.matched;if(!E||!I.length)return-1;const O=I.findIndex(k_.bind(null,E));if(O>-1)return O;const M=s3(i[b-2]);return b>1&&s3(E)===M&&I[I.length-1].path!==M?I.findIndex(k_.bind(null,i[b-2])):O}),l=ft(()=>o.value>-1&&h1e(n.params,r.value.params)),h=ft(()=>o.value>-1&&o.value===n.matched.length-1&&GQ(n.params,r.value.params));function p(i={}){return u1e(i)?e[tt(t.replace)?"replace":"push"](tt(t.to)).catch($v):Promise.resolve()}return{route:r,href:ft(()=>r.value.href),isActive:l,isExactActive:h,navigate:p}}const l1e=sr({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:o3,setup(t,{slots:e}){const n=pu(o3(t)),{options:r}=il(rB),o=ft(()=>({[a3(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[a3(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const l=e.default&&e.default(n);return t.custom?l:Ui("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},l)}}}),c1e=l1e;function u1e(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function h1e(t,e){for(const n in e){const r=e[n],o=t[n];if(typeof r=="string"){if(r!==o)return!1}else if(!md(o)||o.length!==r.length||r.some((l,h)=>l!==o[h]))return!1}return!0}function s3(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const a3=(t,e,n)=>t??e??n,d1e=sr({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=il(HI),o=ft(()=>t.route||r.value),l=il(i3,0),h=ft(()=>{let b=tt(l);const{matched:E}=o.value;let I;for(;(I=E[b])&&!I.components;)b++;return b}),p=ft(()=>o.value.matched[h.value]);tf(i3,ft(()=>h.value+1)),tf(s1e,p),tf(HI,o);const i=yr();return Do(()=>[i.value,p.value,t.name],([b,E,I],[O,M,G])=>{E&&(E.instances[I]=b,M&&M!==E&&b&&b===O&&(E.leaveGuards.size||(E.leaveGuards=M.leaveGuards),E.updateGuards.size||(E.updateGuards=M.updateGuards))),b&&E&&(!M||!k_(E,M)||!O)&&(E.enterCallbacks[I]||[]).forEach(q=>q(b))},{flush:"post"}),()=>{const b=o.value,E=t.name,I=p.value,O=I&&I.components[E];if(!O)return l3(n.default,{Component:O,route:b});const M=I.props[E],G=M?M===!0?b.params:typeof M=="function"?M(b):M:null,Z=Ui(O,os({},G,e,{onVnodeUnmounted:Y=>{Y.component.isUnmounted&&(I.instances[E]=null)},ref:i}));return l3(n.default,{Component:Z,route:b})||Z}}});function l3(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const f1e=d1e;function A1e(t){const e=Yve(t.routes,t),n=t.parseQuery||i1e,r=t.stringifyQuery||r3,o=t.history,l=rv(),h=rv(),p=rv(),i=xN(fp);let b=fp;Dy&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const E=O2.bind(null,at=>""+at),I=O2.bind(null,Eve),O=O2.bind(null,z1);function M(at,Ft){let Dt,yn;return qQ(at)?(Dt=e.getRecordMatcher(at),yn=Ft):yn=at,e.addRoute(yn,Dt)}function G(at){const Ft=e.getRecordMatcher(at);Ft&&e.removeRoute(Ft)}function q(){return e.getRoutes().map(at=>at.record)}function Z(at){return!!e.getRecordMatcher(at)}function Y(at,Ft){if(Ft=os({},Ft||i.value),typeof at=="string"){const Je=D2(n,at,Ft.path),Fe=e.resolve({path:Je.path},Ft),Re=o.createHref(Je.fullPath);return os(Je,Fe,{params:O(Fe.params),hash:z1(Je.hash),redirectedFrom:void 0,href:Re})}let Dt;if(at.path!=null)Dt=os({},at,{path:D2(n,at.path,Ft.path).path});else{const Je=os({},at.params);for(const Fe in Je)Je[Fe]==null&&delete Je[Fe];Dt=os({},at,{params:I(Je)}),Ft.params=I(Ft.params)}const yn=e.resolve(Dt,Ft),De=at.hash||"";yn.params=E(O(yn.params));const jn=Tve(r,os({},at,{hash:wve(De),path:yn.path})),Te=o.createHref(jn);return os({fullPath:jn,hash:De,query:r===r3?o1e(at.query):at.query||{}},yn,{redirectedFrom:void 0,href:Te})}function te(at){return typeof at=="string"?D2(n,at,i.value.path):os({},at)}function be(at,Ft){if(b!==at)return M_(8,{from:Ft,to:at})}function Pe(at){return Ae(at)}function Se(at){return Pe(os(te(at),{replace:!0}))}function Ie(at){const Ft=at.matched[at.matched.length-1];if(Ft&&Ft.redirect){const{redirect:Dt}=Ft;let yn=typeof Dt=="function"?Dt(at):Dt;return typeof yn=="string"&&(yn=yn.includes("?")||yn.includes("#")?yn=te(yn):{path:yn},yn.params={}),os({query:at.query,hash:at.hash,params:yn.path!=null?{}:at.params},yn)}}function Ae(at,Ft){const Dt=b=Y(at),yn=i.value,De=at.state,jn=at.force,Te=at.replace===!0,Je=Ie(Dt);if(Je)return Ae(os(te(Je),{state:typeof Je=="object"?os({},De,Je.state):De,force:jn,replace:Te}),Ft||Dt);const Fe=Dt;Fe.redirectedFrom=Ft;let Re;return!jn&&Ive(r,yn,Dt)&&(Re=M_(16,{to:Fe,from:yn}),In(yn,yn,!0,!1)),(Re?Promise.resolve(Re):ye(Fe,yn)).catch(Yt=>Zf(Yt)?Zf(Yt,2)?Yt:Ut(Yt):Mt(Yt,Fe,yn)).then(Yt=>{if(Yt){if(Zf(Yt,2))return Ae(os({replace:Te},te(Yt.to),{state:typeof Yt.to=="object"?os({},De,Yt.to.state):De,force:jn}),Ft||Fe)}else Yt=le(Fe,yn,!0,Te,De);return se(Fe,yn,Yt),Yt})}function ne(at,Ft){const Dt=be(at,Ft);return Dt?Promise.reject(Dt):Promise.resolve()}function ue(at){const Ft=We.values().next().value;return Ft&&typeof Ft.runWithContext=="function"?Ft.runWithContext(at):at()}function ye(at,Ft){let Dt;const[yn,De,jn]=p1e(at,Ft);Dt=U2(yn.reverse(),"beforeRouteLeave",at,Ft);for(const Je of yn)Je.leaveGuards.forEach(Fe=>{Dt.push(Cp(Fe,at,Ft))});const Te=ne.bind(null,at,Ft);return Dt.push(Te),_t(Dt).then(()=>{Dt=[];for(const Je of l.list())Dt.push(Cp(Je,at,Ft));return Dt.push(Te),_t(Dt)}).then(()=>{Dt=U2(De,"beforeRouteUpdate",at,Ft);for(const Je of De)Je.updateGuards.forEach(Fe=>{Dt.push(Cp(Fe,at,Ft))});return Dt.push(Te),_t(Dt)}).then(()=>{Dt=[];for(const Je of jn)if(Je.beforeEnter)if(md(Je.beforeEnter))for(const Fe of Je.beforeEnter)Dt.push(Cp(Fe,at,Ft));else Dt.push(Cp(Je.beforeEnter,at,Ft));return Dt.push(Te),_t(Dt)}).then(()=>(at.matched.forEach(Je=>Je.enterCallbacks={}),Dt=U2(jn,"beforeRouteEnter",at,Ft,ue),Dt.push(Te),_t(Dt))).then(()=>{Dt=[];for(const Je of h.list())Dt.push(Cp(Je,at,Ft));return Dt.push(Te),_t(Dt)}).catch(Je=>Zf(Je,8)?Je:Promise.reject(Je))}function se(at,Ft,Dt){p.list().forEach(yn=>ue(()=>yn(at,Ft,Dt)))}function le(at,Ft,Dt,yn,De){const jn=be(at,Ft);if(jn)return jn;const Te=Ft===fp,Je=Dy?history.state:{};Dt&&(yn||Te?o.replace(at.fullPath,os({scroll:Te&&Je&&Je.scroll},De)):o.push(at.fullPath,De)),i.value=at,In(at,Ft,Dt,Te),Ut()}let ge;function lt(){ge||(ge=o.listen((at,Ft,Dt)=>{if(!vt.listening)return;const yn=Y(at),De=Ie(yn);if(De){Ae(os(De,{replace:!0}),yn).catch($v);return}b=yn;const jn=i.value;Dy&&Dve(W6(jn.fullPath,Dt.delta),nB()),ye(yn,jn).catch(Te=>Zf(Te,12)?Te:Zf(Te,2)?(Ae(Te.to,yn).then(Je=>{Zf(Je,20)&&!Dt.delta&&Dt.type===V1.pop&&o.go(-1,!1)}).catch($v),Promise.reject()):(Dt.delta&&o.go(-Dt.delta,!1),Mt(Te,yn,jn))).then(Te=>{Te=Te||le(yn,jn,!1),Te&&(Dt.delta&&!Zf(Te,8)?o.go(-Dt.delta,!1):Dt.type===V1.pop&&Zf(Te,20)&&o.go(-1,!1)),se(yn,jn,Te)}).catch($v)}))}let Ot=rv(),gt=rv(),Tt;function Mt(at,Ft,Dt){Ut(at);const yn=gt.list();return yn.length?yn.forEach(De=>De(at,Ft,Dt)):console.error(at),Promise.reject(at)}function on(){return Tt&&i.value!==fp?Promise.resolve():new Promise((at,Ft)=>{Ot.add([at,Ft])})}function Ut(at){return Tt||(Tt=!at,lt(),Ot.list().forEach(([Ft,Dt])=>at?Dt(at):Ft()),Ot.reset()),at}function In(at,Ft,Dt,yn){const{scrollBehavior:De}=t;if(!Dy||!De)return Promise.resolve();const jn=!Dt&&Uve(W6(at.fullPath,0))||(yn||!Dt)&&history.state&&history.state.scroll||null;return Lh().then(()=>De(at,Ft,jn)).then(Te=>Te&&Ove(Te)).catch(Te=>Mt(Te,at,Ft))}const Ee=at=>o.go(at);let $e;const We=new Set,vt={currentRoute:i,listening:!0,addRoute:M,removeRoute:G,clearRoutes:e.clearRoutes,hasRoute:Z,getRoutes:q,resolve:Y,options:t,push:Pe,replace:Se,go:Ee,back:()=>Ee(-1),forward:()=>Ee(1),beforeEach:l.add,beforeResolve:h.add,afterEach:p.add,onError:gt.add,isReady:on,install(at){const Ft=this;at.component("RouterLink",c1e),at.component("RouterView",f1e),at.config.globalProperties.$router=Ft,Object.defineProperty(at.config.globalProperties,"$route",{enumerable:!0,get:()=>tt(i)}),Dy&&!$e&&i.value===fp&&($e=!0,Pe(o.location).catch(De=>{}));const Dt={};for(const De in fp)Object.defineProperty(Dt,De,{get:()=>i.value[De],enumerable:!0});at.provide(rB,Ft),at.provide(YQ,_N(Dt)),at.provide(HI,i);const yn=at.unmount;We.add(at),at.unmount=function(){We.delete(at),We.size<1&&(b=fp,ge&&ge(),ge=null,i.value=fp,$e=!1,Tt=!1),yn()}}};function _t(at){return at.reduce((Ft,Dt)=>Ft.then(()=>ue(Dt)),Promise.resolve())}return vt}function p1e(t,e){const n=[],r=[],o=[],l=Math.max(e.matched.length,t.matched.length);for(let h=0;h<l;h++){const p=e.matched[h];p&&(t.matched.find(b=>k_(b,p))?r.push(p):n.push(p));const i=t.matched[h];i&&(e.matched.find(b=>k_(b,i))||o.push(i))}return[n,r,o]}function SA(){return il(rB)}const m1e={class:"container"},g1e={class:"d-flex justify-content-center py-3"},y1e={class:"nav nav-pills"},_1e={class:"nav-item"},v1e={class:"nav-item"},b1e={key:0,class:"nav-item"},w1e={class:"nav-item"},x1e={class:"nav-item"},C1e={class:"nav-item"},E1e={class:"nav-item"},B1e={__name:"BHeader",setup(t){SA();const e=yr(!1),n=yr(!1),r=Y_(),o=async()=>{const h=ub().currentUser;if(h){e.value=!0;const p=await kP(gb(r,"users",h.uid));if(p.exists()){const i=p.data();console.log("User Data:",i),i.isAdmin?(console.log("User is Admin"),n.value=!0):(console.log("User is not Admin"),n.value=!1)}else n.value=!1}else e.value=!1,n.value=!1};return ws(()=>{o()}),(l,h)=>{const p=Nr("router-link");return ve(),et("div",m1e,[mt("header",g1e,[mt("ul",y1e,[mt("li",_1e,[Lr(p,{to:"/",class:"nav-link","active-class":"active","aria-current":"page"},{default:Kn(()=>[jr(" Home ")]),_:1})]),mt("li",v1e,[Lr(p,{to:"/about",class:"nav-link","active-class":"active"},{default:Kn(()=>[jr(" About Us ")]),_:1})]),l.isLoggedIn?Sn("",!0):(ve(),et("li",b1e,[Lr(p,{to:"Firelogin",class:"nav-link","active-class":"active"},{default:Kn(()=>[jr("Firebase Login")]),_:1})])),mt("li",w1e,[Lr(p,{to:"FireRegister",class:"nav-link","active-class":"active"},{default:Kn(()=>[jr("Firebase Register")]),_:1})]),mt("li",x1e,[Lr(p,{to:"/care-tips-and-advice",class:"nav-link","active-class":"active"},{default:Kn(()=>[jr(" Care Tips and Advice ")]),_:1})]),mt("li",C1e,[Lr(p,{to:"SendEmail",class:"nav-link","active-class":"active"},{default:Kn(()=>[jr("Send Email")]),_:1})]),mt("li",E1e,[Lr(p,{to:"Map",class:"nav-link","active-class":"active"},{default:Kn(()=>[jr("Map")]),_:1})])])])])}}},S1e={class:"main-container"},T1e={class:"main-box"},I1e={__name:"App",setup(t){return(e,n)=>{const r=Nr("router-view");return ve(),et("div",S1e,[mt("header",null,[Lr(B1e)]),mt("main",T1e,[Lr(r)])])}}},_f=(t,e)=>{const n=t.__vccOpts||t;for(const[r,o]of e)n[r]=o;return n},P1e=t=>(Sg("data-v-76c72cd2"),t=t(),Tg(),t),L1e={class:"container mt-5"},F1e=P1e(()=>mt("div",{class:"row"},[mt("div",{class:"col-md-8 offset-md-2"},[mt("h1",{class:"text-center"},"Welcome to the Health Charity Platform"),mt("p",{class:"text-center"}," Your one-stop destination for health resources. ")])],-1)),R1e=[F1e],k1e={__name:"Homepage",setup(t){return(e,n)=>(ve(),et("div",L1e,R1e))}},M1e=_f(k1e,[["__scopeId","data-v-76c72cd2"]]),O1e={class:"container mt-5"},D1e={class:"col-md-8 offset-md-2"},U1e=mt("h1",{class:"text-center"},"Login",-1),N1e={class:"form-group"},z1e=mt("label",{for:"username"},"Username:",-1),V1e={class:"form-group mt-3"},Q1e=mt("label",{for:"password"},"Password:",-1),H1e=mt("button",{type:"submit",class:"btn btn-primary mt-3"},"Login",-1),j1e={key:0,class:"text-danger mt-3"},$1e={__name:"Loginpage",setup(t){const e=SA(),n=yr(""),r=yr(""),o=yr(""),l=()=>{const p=(JSON.parse(localStorage.getItem("submittedCards"))||[]).find(i=>i.username===n.value);n.value==="admin"&&r.value==="adminPassword123!"?(localStorage.setItem("isAuthenticated","true"),localStorage.setItem("currentUsername","admin"),e.replace("/admin")):p&&p.password===r.value?(localStorage.setItem("isAuthenticated","true"),localStorage.setItem("currentUsername",p.username),e.replace("/about")):o.value="Invalid credentials"};return(h,p)=>(ve(),et("div",O1e,[mt("div",D1e,[U1e,mt("form",{onSubmit:gf(l,["prevent"])},[mt("div",N1e,[z1e,Fo(mt("input",{type:"text",id:"username","onUpdate:modelValue":p[0]||(p[0]=i=>n.value=i),class:"form-control"},null,512),[[Ol,n.value]])]),mt("div",V1e,[Q1e,Fo(mt("input",{type:"password",id:"password","onUpdate:modelValue":p[1]||(p[1]=i=>r.value=i),class:"form-control"},null,512),[[Ol,r.value]])]),H1e,o.value?(ve(),et("p",j1e,Ar(o.value),1)):Sn("",!0)],32)])]))}},G1e={class:"container mt-5"},K1e={class:"col-md-8 offset-md-2"},q1e=mt("h1",{class:"text-center"},"Admin Page",-1),W1e=mt("p",{class:"text-center"},"This is admin page",-1),X1e={__name:"Adminpage",setup(t){const e=yr([]);ws(()=>{const o=JSON.parse(localStorage.getItem("submittedCards"))||[];e.value=o});const n=SA(),r=()=>{confirm("Are you sure you want to logout?")&&(localStorage.removeItem("isAuthenticated"),alert("Logout successful"),n.push("/"))};return ws(()=>{localStorage.getItem("isAuthenticated")==="true"||n.push("/login")}),(o,l)=>{const h=Nr("Column"),p=Nr("DataTable");return ve(),et("div",G1e,[mt("div",K1e,[q1e,W1e,Lr(p,{value:e.value,class:"p-datatable p-component"},{default:Kn(()=>[Lr(h,{field:"username",header:"Username"}),Lr(h,{field:"password",header:"Password"}),Lr(h,{field:"confirmPassword",header:"Confirm Password"}),Lr(h,{field:"gender",header:"Gender"}),Lr(h,{field:"dob",header:"Date of Birth"})]),_:1},8,["value"])]),mt("div",{class:"text-center mt-4"},[mt("button",{onClick:r,class:"btn btn-primary"},"Logout")])])}}},Z1e={},Y1e=mt("h1",{class:"text-center"},"Access Denied",-1),J1e=mt("p",{class:"text-center"},"You do not have permission to view this page. Please log in.",-1),ebe=mt("p",{class:"text-center"},"Go to Login",-1);function tbe(t,e){const n=Nr("router-link");return ve(),et("div",null,[Y1e,J1e,Lr(n,{to:"/login"},{default:Kn(()=>[ebe]),_:1})])}const nbe=_f(Z1e,[["render",tbe]]);function rbe(t,e){localStorage.setItem(t,JSON.stringify(e))}function ibe(t){const e=localStorage.getItem(t);return e?JSON.parse(e):null}const yd=t=>(Sg("data-v-4e7516c6"),t=t(),Tg(),t),obe={class:"container mt-5"},sbe={class:"row"},abe={class:"col-md-8 offset-md-2"},lbe=yd(()=>mt("h1",{class:"text-center"},"Registration Form",-1)),cbe=yd(()=>mt("p",{class:"text-center"}," Sign up to join us!!! ",-1)),ube={class:"row mb-3"},hbe={class:"col-md-6 col-sm-6"},dbe=yd(()=>mt("label",{for:"username",class:"form-label"},"Username",-1)),fbe={key:0,class:"text-danger"},Abe={class:"col-md-6 col-sm-6"},pbe=yd(()=>mt("label",{for:"gender",class:"form-label"},"Gender",-1)),mbe=yd(()=>mt("option",{value:"male"},"Male",-1)),gbe=yd(()=>mt("option",{value:"female"},"Female",-1)),ybe=yd(()=>mt("option",{value:"other"},"Other",-1)),_be=[mbe,gbe,ybe],vbe={class:"col-md-6 col-sm-6"},bbe=yd(()=>mt("label",{for:"password",class:"form-label"},"Password",-1)),wbe={key:0,class:"text-danger"},xbe={class:"col-md-6 col-sm-6"},Cbe=yd(()=>mt("label",{for:"confirm-password",class:"form-label"},"Confirm password",-1)),Ebe={key:0,class:"text-danger"},Bbe={class:"mb-3"},Sbe=yd(()=>mt("label",{for:"dob",class:"form-label"},"Date of Birth",-1)),Tbe={key:0,class:"text-danger"},Ibe=yd(()=>mt("button",{type:"submit",class:"btn btn-primary me-2"},"Submit",-1)),Pbe={__name:"Registerpage",setup(t){const e=SA(),n=yr({username:"",password:"",confirmPassword:"",gender:"",dob:""}),r=yr([]),o=yr({username:null,password:null,confirmPassword:null,gender:null,dob:null}),l=()=>{p(!0),i(!0),b(),E(),!o.value.username&&!o.value.password&&!o.value.confirmPassword&&!o.value.dob&&(r.value.push({...n.value}),rbe("submittedCards",r.value),h(),e.push("/login"),alert("Registration successful!"))},h=()=>{n.value={username:"",password:"",gender:"",dob:""}},p=I=>{n.value.username.length<3?I&&(o.value.username="Name must be at least 3 characters"):o.value.username=null},i=I=>{const O=n.value.password,M=8,G=/[A-Z]/.test(O),q=/[a-z]/.test(O),Z=/\d/.test(O),Y=/[!@#$%^&*(),.?":{}|<>]/.test(O);O.length<M?I&&(o.value.password=`Password must be at least ${M} characters long.`):G?q?Z?Y?o.value.password=null:I&&(o.value.password="Password must contain at least one special character."):I&&(o.value.password="Password must contain at least one number."):I&&(o.value.password="Password must contain at least one lowercase letter."):I&&(o.value.password="Password must contain at least one uppercase letter.")},b=I=>{n.value.password!==n.value.confirmPassword?o.value.confirmPassword="Passwords do not match.":o.value.confirmPassword=null},E=I=>{new Date(n.value.dob)>new Date?o.value.dob="Date of birth cannot be in the future.":o.value.dob=null};return ws(()=>{const I=ibe("submittedCards");I&&(r.value=I)}),(I,O)=>(ve(),et("div",obe,[mt("div",sbe,[mt("div",abe,[lbe,cbe,mt("form",{onSubmit:gf(l,["prevent"])},[mt("div",ube,[mt("div",hbe,[dbe,Fo(mt("input",{type:"text",class:"form-control",id:"username",onBlur:O[0]||(O[0]=()=>p(!0)),onInput:O[1]||(O[1]=()=>p(!1)),"onUpdate:modelValue":O[2]||(O[2]=M=>n.value.username=M)},null,544),[[Ol,n.value.username]]),o.value.username?(ve(),et("div",fbe,Ar(o.value.username),1)):Sn("",!0)]),mt("div",Abe,[pbe,Fo(mt("select",{class:"form-select",id:"gender","onUpdate:modelValue":O[3]||(O[3]=M=>n.value.gender=M),required:""},_be,512),[[t4,n.value.gender]])]),mt("div",vbe,[bbe,Fo(mt("input",{type:"password",class:"form-control",id:"password",onBlur:O[4]||(O[4]=()=>i(!0)),onInput:O[5]||(O[5]=()=>i(!1)),"onUpdate:modelValue":O[6]||(O[6]=M=>n.value.password=M)},null,544),[[Ol,n.value.password]]),o.value.password?(ve(),et("div",wbe,Ar(o.value.password),1)):Sn("",!0)]),mt("div",xbe,[Cbe,Fo(mt("input",{type:"password",class:"form-control",id:"confirm-password","onUpdate:modelValue":O[7]||(O[7]=M=>n.value.confirmPassword=M),onBlur:O[8]||(O[8]=()=>b())},null,544),[[Ol,n.value.confirmPassword]]),o.value.confirmPassword?(ve(),et("div",Ebe,Ar(o.value.confirmPassword),1)):Sn("",!0)])]),mt("div",Bbe,[Sbe,Fo(mt("input",{type:"date",class:"form-control",id:"dob","onUpdate:modelValue":O[9]||(O[9]=M=>n.value.dob=M),onInput:O[10]||(O[10]=()=>E())},null,544),[[Ol,n.value.dob]]),o.value.dob?(ve(),et("div",Tbe,Ar(o.value.dob),1)):Sn("",!0)]),mt("div",{class:"text-center"},[Ibe,mt("button",{type:"button",class:"btn btn-secondary",onClick:h},"Clear")])],32)])])]))}},Lbe=_f(Pbe,[["__scopeId","data-v-4e7516c6"]]),JQ=t=>(Sg("data-v-c5204cd7"),t=t(),Tg(),t),Fbe={class:"container mt-5"},Rbe={class:"col-md-8 offset-md-2"},kbe=JQ(()=>mt("h1",{class:"text-center"},"About Our Charity",-1)),Mbe=JQ(()=>mt("p",{class:"text-center"},"This is about our charity",-1)),Obe={key:0,class:"text-center"},Dbe={__name:"Aboutpage",setup(t){const e=yr(""),n=yr(!1),r=SA(),o=ub(),l=Y_(),h=async()=>{const i=o.currentUser;if(i){n.value=!0;const b=gb(l,"users",i.uid),E=await kP(b);if(E.exists()){const I=E.data();e.value=I.email||""}else console.log("No such document!")}else console.log("No user is signed in.")},p=async()=>{try{await a9(o),console.log("Logged out successfully"),n.value=!1,r.push("/FireLogin")}catch(i){console.error("Error logging out: ",i)}};return ws(()=>{h()}),(i,b)=>(ve(),et("div",Fbe,[mt("div",Rbe,[kbe,Mbe,e.value?(ve(),et("p",Obe,"Hello, "+Ar(e.value)+"!",1)):Sn("",!0),n.value?(ve(),et("button",{key:1,onClick:p,class:"btn btn-danger"},"Logout")):Sn("",!0)])]))}},Ube=_f(Dbe,[["__scopeId","data-v-c5204cd7"]]),Nbe={class:"container mt-5"},zbe=mt("div",{class:"col-md-8 offset-md-2"},[mt("h1",{class:"text-center"},"Personal Information"),mt("p",{class:"text-center"},"This is about yourself")],-1),Vbe={__name:"PersonalInfo",setup(t){const e=SA(),n=()=>{confirm("Are you sure you want to logout?")&&(localStorage.removeItem("isAuthenticated"),alert("Logout successful"),e.push("/"))};return ws(()=>{localStorage.getItem("isAuthenticated")==="true"||e.push("/login")}),(r,o)=>(ve(),et("div",Nbe,[zbe,mt("div",{class:"text-center mt-4"},[mt("button",{onClick:n,class:"btn btn-primary"},"Logout")])]))}},Qbe="modulepreload",Hbe=function(t){return"/"+t},c3={},jI=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),h=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));o=Promise.all(n.map(p=>{if(p=Hbe(p),p in c3)return;c3[p]=!0;const i=p.endsWith(".css"),b=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${b}`))return;const E=document.createElement("link");if(E.rel=i?"stylesheet":Qbe,i||(E.as="script",E.crossOrigin=""),E.href=p,h&&E.setAttribute("nonce",h),document.head.appendChild(E),i)return new Promise((I,O)=>{E.addEventListener("load",I),E.addEventListener("error",()=>O(new Error(`Unable to preload CSS for ${p}`)))})}))}return o.then(()=>e()).catch(l=>{const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=l,window.dispatchEvent(h),!h.defaultPrevented)throw l})};function ss(t){"@babel/helpers - typeof";return ss=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ss(t)}var dc=Uint8Array,Vu=Uint16Array,OP=Int32Array,iB=new dc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),oB=new dc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),$I=new dc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),eH=function(t,e){for(var n=new Vu(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var o=new OP(n[30]),r=1;r<30;++r)for(var l=n[r];l<n[r+1];++l)o[l]=l-n[r]<<5|r;return{b:n,r:o}},tH=eH(iB,2),nH=tH.b,GI=tH.r;nH[28]=258,GI[258]=28;var rH=eH(oB,0),jbe=rH.b,u3=rH.r,KI=new Vu(32768);for(var Ds=0;Ds<32768;++Ds){var Ap=(Ds&43690)>>1|(Ds&21845)<<1;Ap=(Ap&52428)>>2|(Ap&13107)<<2,Ap=(Ap&61680)>>4|(Ap&3855)<<4,KI[Ds]=((Ap&65280)>>8|(Ap&255)<<8)>>1}var uf=function(t,e,n){for(var r=t.length,o=0,l=new Vu(e);o<r;++o)t[o]&&++l[t[o]-1];var h=new Vu(e);for(o=1;o<e;++o)h[o]=h[o-1]+l[o-1]<<1;var p;if(n){p=new Vu(1<<e);var i=15-e;for(o=0;o<r;++o)if(t[o])for(var b=o<<4|t[o],E=e-t[o],I=h[t[o]-1]++<<E,O=I|(1<<E)-1;I<=O;++I)p[KI[I]>>i]=b}else for(p=new Vu(r),o=0;o<r;++o)t[o]&&(p[o]=KI[h[t[o]-1]++]>>15-t[o]);return p},im=new dc(288);for(var Ds=0;Ds<144;++Ds)im[Ds]=8;for(var Ds=144;Ds<256;++Ds)im[Ds]=9;for(var Ds=256;Ds<280;++Ds)im[Ds]=7;for(var Ds=280;Ds<288;++Ds)im[Ds]=8;var Q1=new dc(32);for(var Ds=0;Ds<32;++Ds)Q1[Ds]=5;var $be=uf(im,9,0),Gbe=uf(im,9,1),Kbe=uf(Q1,5,0),qbe=uf(Q1,5,1),N2=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},od=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},z2=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},DP=function(t){return(t+7)/8|0},iH=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new dc(t.subarray(e,n))},Wbe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ld=function(t,e,n){var r=new Error(e||Wbe[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,ld),!n)throw r;return r},Xbe=function(t,e,n,r){var o=t.length,l=0;if(!o||e.f&&!e.l)return n||new dc(0);var h=!n,p=h||e.i!=2,i=e.i;h&&(n=new dc(o*3));var b=function(De){var jn=n.length;if(De>jn){var Te=new dc(Math.max(jn*2,De));Te.set(n),n=Te}},E=e.f||0,I=e.p||0,O=e.b||0,M=e.l,G=e.d,q=e.m,Z=e.n,Y=o*8;do{if(!M){E=od(t,I,1);var te=od(t,I+1,3);if(I+=3,te)if(te==1)M=Gbe,G=qbe,q=9,Z=5;else if(te==2){var Ie=od(t,I,31)+257,Ae=od(t,I+10,15)+4,ne=Ie+od(t,I+5,31)+1;I+=14;for(var ue=new dc(ne),ye=new dc(19),se=0;se<Ae;++se)ye[$I[se]]=od(t,I+se*3,7);I+=Ae*3;for(var le=N2(ye),ge=(1<<le)-1,lt=uf(ye,le,1),se=0;se<ne;){var Ot=lt[od(t,I,ge)];I+=Ot&15;var be=Ot>>4;if(be<16)ue[se++]=be;else{var gt=0,Tt=0;for(be==16?(Tt=3+od(t,I,3),I+=2,gt=ue[se-1]):be==17?(Tt=3+od(t,I,7),I+=3):be==18&&(Tt=11+od(t,I,127),I+=7);Tt--;)ue[se++]=gt}}var Mt=ue.subarray(0,Ie),on=ue.subarray(Ie);q=N2(Mt),Z=N2(on),M=uf(Mt,q,1),G=uf(on,Z,1)}else ld(1);else{var be=DP(I)+4,Pe=t[be-4]|t[be-3]<<8,Se=be+Pe;if(Se>o){i&&ld(0);break}p&&b(O+Pe),n.set(t.subarray(be,Se),O),e.b=O+=Pe,e.p=I=Se*8,e.f=E;continue}if(I>Y){i&&ld(0);break}}p&&b(O+131072);for(var Ut=(1<<q)-1,In=(1<<Z)-1,Ee=I;;Ee=I){var gt=M[z2(t,I)&Ut],$e=gt>>4;if(I+=gt&15,I>Y){i&&ld(0);break}if(gt||ld(2),$e<256)n[O++]=$e;else if($e==256){Ee=I,M=null;break}else{var We=$e-254;if($e>264){var se=$e-257,vt=iB[se];We=od(t,I,(1<<vt)-1)+nH[se],I+=vt}var _t=G[z2(t,I)&In],at=_t>>4;_t||ld(3),I+=_t&15;var on=jbe[at];if(at>3){var vt=oB[at];on+=z2(t,I)&(1<<vt)-1,I+=vt}if(I>Y){i&&ld(0);break}p&&b(O+131072);var Ft=O+We;if(O<on){var Dt=l-on,yn=Math.min(on,Ft);for(Dt+O<0&&ld(3);O<yn;++O)n[O]=r[Dt+O]}for(;O<Ft;++O)n[O]=n[O-on]}}e.l=M,e.p=Ee,e.b=O,e.f=E,M&&(E=1,e.m=q,e.d=G,e.n=Z)}while(!E);return O!=n.length&&h?iH(n,0,O):n.subarray(0,O)},Yf=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},iv=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},V2=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var o=n.length,l=n.slice();if(!o)return{t:sH,l:0};if(o==1){var h=new dc(n[0].s+1);return h[n[0].s]=1,{t:h,l:1}}n.sort(function(Se,Ie){return Se.f-Ie.f}),n.push({s:-1,f:25001});var p=n[0],i=n[1],b=0,E=1,I=2;for(n[0]={s:-1,f:p.f+i.f,l:p,r:i};E!=o-1;)p=n[n[b].f<n[I].f?b++:I++],i=n[b!=E&&n[b].f<n[I].f?b++:I++],n[E++]={s:-1,f:p.f+i.f,l:p,r:i};for(var O=l[0].s,r=1;r<o;++r)l[r].s>O&&(O=l[r].s);var M=new Vu(O+1),G=qI(n[E-1],M,0);if(G>e){var r=0,q=0,Z=G-e,Y=1<<Z;for(l.sort(function(Ie,Ae){return M[Ae.s]-M[Ie.s]||Ie.f-Ae.f});r<o;++r){var te=l[r].s;if(M[te]>e)q+=Y-(1<<G-M[te]),M[te]=e;else break}for(q>>=Z;q>0;){var be=l[r].s;M[be]<e?q-=1<<e-M[be]++-1:++r}for(;r>=0&&q;--r){var Pe=l[r].s;M[Pe]==e&&(--M[Pe],++q)}G=e}return{t:new dc(M),l:G}},qI=function(t,e,n){return t.s==-1?Math.max(qI(t.l,e,n+1),qI(t.r,e,n+1)):e[t.s]=n},h3=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Vu(++e),r=0,o=t[0],l=1,h=function(i){n[r++]=i},p=1;p<=e;++p)if(t[p]==o&&p!=e)++l;else{if(!o&&l>2){for(;l>138;l-=138)h(32754);l>2&&(h(l>10?l-11<<5|28690:l-3<<5|12305),l=0)}else if(l>3){for(h(o),--l;l>6;l-=6)h(8304);l>2&&(h(l-3<<5|8208),l=0)}for(;l--;)h(o);l=1,o=t[p]}return{c:n.subarray(0,r),n:e}},ov=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},oH=function(t,e,n){var r=n.length,o=DP(e+2);t[o]=r&255,t[o+1]=r>>8,t[o+2]=t[o]^255,t[o+3]=t[o+1]^255;for(var l=0;l<r;++l)t[o+l+4]=n[l];return(o+4+r)*8},d3=function(t,e,n,r,o,l,h,p,i,b,E){Yf(e,E++,n),++o[256];for(var I=V2(o,15),O=I.t,M=I.l,G=V2(l,15),q=G.t,Z=G.l,Y=h3(O),te=Y.c,be=Y.n,Pe=h3(q),Se=Pe.c,Ie=Pe.n,Ae=new Vu(19),ne=0;ne<te.length;++ne)++Ae[te[ne]&31];for(var ne=0;ne<Se.length;++ne)++Ae[Se[ne]&31];for(var ue=V2(Ae,7),ye=ue.t,se=ue.l,le=19;le>4&&!ye[$I[le-1]];--le);var ge=b+5<<3,lt=ov(o,im)+ov(l,Q1)+h,Ot=ov(o,O)+ov(l,q)+h+14+3*le+ov(Ae,ye)+2*Ae[16]+3*Ae[17]+7*Ae[18];if(i>=0&&ge<=lt&&ge<=Ot)return oH(e,E,t.subarray(i,i+b));var gt,Tt,Mt,on;if(Yf(e,E,1+(Ot<lt)),E+=2,Ot<lt){gt=uf(O,M,0),Tt=O,Mt=uf(q,Z,0),on=q;var Ut=uf(ye,se,0);Yf(e,E,be-257),Yf(e,E+5,Ie-1),Yf(e,E+10,le-4),E+=14;for(var ne=0;ne<le;++ne)Yf(e,E+3*ne,ye[$I[ne]]);E+=3*le;for(var In=[te,Se],Ee=0;Ee<2;++Ee)for(var $e=In[Ee],ne=0;ne<$e.length;++ne){var We=$e[ne]&31;Yf(e,E,Ut[We]),E+=ye[We],We>15&&(Yf(e,E,$e[ne]>>5&127),E+=$e[ne]>>12)}}else gt=$be,Tt=im,Mt=Kbe,on=Q1;for(var ne=0;ne<p;++ne){var vt=r[ne];if(vt>255){var We=vt>>18&31;iv(e,E,gt[We+257]),E+=Tt[We+257],We>7&&(Yf(e,E,vt>>23&31),E+=iB[We]);var _t=vt&31;iv(e,E,Mt[_t]),E+=on[_t],_t>3&&(iv(e,E,vt>>5&8191),E+=oB[_t])}else iv(e,E,gt[vt]),E+=Tt[vt]}return iv(e,E,gt[256]),E+Tt[256]},Zbe=new OP([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),sH=new dc(0),Ybe=function(t,e,n,r,o,l){var h=l.z||t.length,p=new dc(r+h+5*(1+Math.ceil(h/7e3))+o),i=p.subarray(r,p.length-o),b=l.l,E=(l.r||0)&7;if(e){E&&(i[0]=l.r>>3);for(var I=Zbe[e-1],O=I>>13,M=I&8191,G=(1<<n)-1,q=l.p||new Vu(32768),Z=l.h||new Vu(G+1),Y=Math.ceil(n/3),te=2*Y,be=function(Je){return(t[Je]^t[Je+1]<<Y^t[Je+2]<<te)&G},Pe=new OP(25e3),Se=new Vu(288),Ie=new Vu(32),Ae=0,ne=0,ue=l.i||0,ye=0,se=l.w||0,le=0;ue+2<h;++ue){var ge=be(ue),lt=ue&32767,Ot=Z[ge];if(q[lt]=Ot,Z[ge]=lt,se<=ue){var gt=h-ue;if((Ae>7e3||ye>24576)&&(gt>423||!b)){E=d3(t,i,0,Pe,Se,Ie,ne,ye,le,ue-le,E),ye=Ae=ne=0,le=ue;for(var Tt=0;Tt<286;++Tt)Se[Tt]=0;for(var Tt=0;Tt<30;++Tt)Ie[Tt]=0}var Mt=2,on=0,Ut=M,In=lt-Ot&32767;if(gt>2&&ge==be(ue-In))for(var Ee=Math.min(O,gt)-1,$e=Math.min(32767,ue),We=Math.min(258,gt);In<=$e&&--Ut&&lt!=Ot;){if(t[ue+Mt]==t[ue+Mt-In]){for(var vt=0;vt<We&&t[ue+vt]==t[ue+vt-In];++vt);if(vt>Mt){if(Mt=vt,on=In,vt>Ee)break;for(var _t=Math.min(In,vt-2),at=0,Tt=0;Tt<_t;++Tt){var Ft=ue-In+Tt&32767,Dt=q[Ft],yn=Ft-Dt&32767;yn>at&&(at=yn,Ot=Ft)}}}lt=Ot,Ot=q[lt],In+=lt-Ot&32767}if(on){Pe[ye++]=268435456|GI[Mt]<<18|u3[on];var De=GI[Mt]&31,jn=u3[on]&31;ne+=iB[De]+oB[jn],++Se[257+De],++Ie[jn],se=ue+Mt,++Ae}else Pe[ye++]=t[ue],++Se[t[ue]]}}for(ue=Math.max(ue,se);ue<h;++ue)Pe[ye++]=t[ue],++Se[t[ue]];E=d3(t,i,b,Pe,Se,Ie,ne,ye,le,ue-le,E),b||(l.r=E&7|i[E/8|0]<<3,E-=7,l.h=Z,l.p=q,l.i=ue,l.w=se)}else{for(var ue=l.w||0;ue<h+b;ue+=65535){var Te=ue+65535;Te>=h&&(i[E/8|0]=b,Te=h),E=oH(i,E+1,t.subarray(ue,Te))}l.i=h}return iH(p,0,r+DP(E)+o)},aH=function(){var t=1,e=0;return{p:function(n){for(var r=t,o=e,l=n.length|0,h=0;h!=l;){for(var p=Math.min(h+2655,l);h<p;++h)o+=r+=n[h];r=(r&65535)+15*(r>>16),o=(o&65535)+15*(o>>16)}t=r,e=o},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},Jbe=function(t,e,n,r,o){if(!o&&(o={l:1},e.dictionary)){var l=e.dictionary.subarray(-32768),h=new dc(l.length+t.length);h.set(l),h.set(t,l.length),t=h,o.w=l.length}return Ybe(t,e.level==null?6:e.level,e.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,o)},lH=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},ewe=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var o=aH();o.p(e.dictionary),lH(t,2,o.d())}},twe=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&ld(6,"invalid zlib data"),(t[1]>>5&1)==+!e&&ld(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function WI(t,e){e||(e={});var n=aH();n.p(t);var r=Jbe(t,e,e.dictionary?6:2,4);return ewe(r,e),lH(r,r.length-4,n.d()),r}function nwe(t,e){return Xbe(t.subarray(twe(t,e),-4),{i:2},e,e)}var rwe=typeof TextDecoder<"u"&&new TextDecoder,iwe=0;try{rwe.decode(sH,{stream:!0}),iwe=1}catch{}var yi=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Q2(){yi.console&&typeof yi.console.log=="function"&&yi.console.log.apply(yi.console,arguments)}var bs={log:Q2,warn:function(t){yi.console&&(typeof yi.console.warn=="function"?yi.console.warn.apply(yi.console,arguments):Q2.call(null,arguments))},error:function(t){yi.console&&(typeof yi.console.error=="function"?yi.console.error.apply(yi.console,arguments):Q2(t))}};function H2(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Gm(r.response,e,n)},r.onerror=function(){bs.error("could not download file")},r.send()}function f3(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function qw(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Kv,XI,Gm=yi.saveAs||((typeof window>"u"?"undefined":ss(window))!=="object"||window!==yi?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=yi.URL||yi.webkitURL,o=document.createElement("a");e=e||t.name||"download",o.download=e,o.rel="noopener",typeof t=="string"?(o.href=t,o.origin!==location.origin?f3(o.href)?H2(t,e,n):qw(o,o.target="_blank"):qw(o)):(o.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(o.href)},4e4),setTimeout(function(){qw(o)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(f3(t))H2(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){qw(r)})}else navigator.msSaveOrOpenBlob(function(o,l){return l===void 0?l={autoBom:!1}:ss(l)!=="object"&&(bs.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return H2(t,e,n);var o=t.type==="application/octet-stream",l=/constructor/i.test(yi.HTMLElement)||yi.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent);if((h||o&&l)&&(typeof FileReader>"u"?"undefined":ss(FileReader))==="object"){var p=new FileReader;p.onloadend=function(){var E=p.result;E=h?E:E.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=E:location=E,r=null},p.readAsDataURL(t)}else{var i=yi.URL||yi.webkitURL,b=i.createObjectURL(t);r?r.location=b:location.href=b,r=null,setTimeout(function(){i.revokeObjectURL(b)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function cH(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(p){return[parseInt(p[1]),parseInt(p[2]),parseInt(p[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(p){return[parseInt(p[1],16),parseInt(p[2],16),parseInt(p[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(p){return[parseInt(p[1]+p[1],16),parseInt(p[2]+p[2],16),parseInt(p[3]+p[3],16)]}}],r=0;r<n.length;r++){var o=n[r].re,l=n[r].process,h=o.exec(t);h&&(e=l(h),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var p=this.r.toString(16),i=this.g.toString(16),b=this.b.toString(16);return p.length==1&&(p="0"+p),i.length==1&&(i="0"+i),b.length==1&&(b="0"+b),"#"+p+i+b}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function j2(t,e){var n=t[0],r=t[1],o=t[2],l=t[3];n=rc(n,r,o,l,e[0],7,-680876936),l=rc(l,n,r,o,e[1],12,-389564586),o=rc(o,l,n,r,e[2],17,606105819),r=rc(r,o,l,n,e[3],22,-1044525330),n=rc(n,r,o,l,e[4],7,-176418897),l=rc(l,n,r,o,e[5],12,1200080426),o=rc(o,l,n,r,e[6],17,-1473231341),r=rc(r,o,l,n,e[7],22,-45705983),n=rc(n,r,o,l,e[8],7,1770035416),l=rc(l,n,r,o,e[9],12,-1958414417),o=rc(o,l,n,r,e[10],17,-42063),r=rc(r,o,l,n,e[11],22,-1990404162),n=rc(n,r,o,l,e[12],7,1804603682),l=rc(l,n,r,o,e[13],12,-40341101),o=rc(o,l,n,r,e[14],17,-1502002290),n=ic(n,r=rc(r,o,l,n,e[15],22,1236535329),o,l,e[1],5,-165796510),l=ic(l,n,r,o,e[6],9,-1069501632),o=ic(o,l,n,r,e[11],14,643717713),r=ic(r,o,l,n,e[0],20,-373897302),n=ic(n,r,o,l,e[5],5,-701558691),l=ic(l,n,r,o,e[10],9,38016083),o=ic(o,l,n,r,e[15],14,-660478335),r=ic(r,o,l,n,e[4],20,-405537848),n=ic(n,r,o,l,e[9],5,568446438),l=ic(l,n,r,o,e[14],9,-1019803690),o=ic(o,l,n,r,e[3],14,-187363961),r=ic(r,o,l,n,e[8],20,1163531501),n=ic(n,r,o,l,e[13],5,-1444681467),l=ic(l,n,r,o,e[2],9,-51403784),o=ic(o,l,n,r,e[7],14,1735328473),n=oc(n,r=ic(r,o,l,n,e[12],20,-1926607734),o,l,e[5],4,-378558),l=oc(l,n,r,o,e[8],11,-2022574463),o=oc(o,l,n,r,e[11],16,1839030562),r=oc(r,o,l,n,e[14],23,-35309556),n=oc(n,r,o,l,e[1],4,-1530992060),l=oc(l,n,r,o,e[4],11,1272893353),o=oc(o,l,n,r,e[7],16,-155497632),r=oc(r,o,l,n,e[10],23,-1094730640),n=oc(n,r,o,l,e[13],4,681279174),l=oc(l,n,r,o,e[0],11,-358537222),o=oc(o,l,n,r,e[3],16,-722521979),r=oc(r,o,l,n,e[6],23,76029189),n=oc(n,r,o,l,e[9],4,-640364487),l=oc(l,n,r,o,e[12],11,-421815835),o=oc(o,l,n,r,e[15],16,530742520),n=sc(n,r=oc(r,o,l,n,e[2],23,-995338651),o,l,e[0],6,-198630844),l=sc(l,n,r,o,e[7],10,1126891415),o=sc(o,l,n,r,e[14],15,-1416354905),r=sc(r,o,l,n,e[5],21,-57434055),n=sc(n,r,o,l,e[12],6,1700485571),l=sc(l,n,r,o,e[3],10,-1894986606),o=sc(o,l,n,r,e[10],15,-1051523),r=sc(r,o,l,n,e[1],21,-2054922799),n=sc(n,r,o,l,e[8],6,1873313359),l=sc(l,n,r,o,e[15],10,-30611744),o=sc(o,l,n,r,e[6],15,-1560198380),r=sc(r,o,l,n,e[13],21,1309151649),n=sc(n,r,o,l,e[4],6,-145523070),l=sc(l,n,r,o,e[11],10,-1120210379),o=sc(o,l,n,r,e[2],15,718787259),r=sc(r,o,l,n,e[9],21,-343485551),t[0]=Dp(n,t[0]),t[1]=Dp(r,t[1]),t[2]=Dp(o,t[2]),t[3]=Dp(l,t[3])}function sB(t,e,n,r,o,l){return e=Dp(Dp(e,t),Dp(r,l)),Dp(e<<o|e>>>32-o,n)}function rc(t,e,n,r,o,l,h){return sB(e&n|~e&r,t,e,o,l,h)}function ic(t,e,n,r,o,l,h){return sB(e&r|n&~r,t,e,o,l,h)}function oc(t,e,n,r,o,l,h){return sB(e^n^r,t,e,o,l,h)}function sc(t,e,n,r,o,l,h){return sB(n^(e|~r),t,e,o,l,h)}function uH(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)j2(r,owe(t.substring(e-64,e)));t=t.substring(e-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)o[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(o[e>>2]|=128<<(e%4<<3),e>55)for(j2(r,o),e=0;e<16;e++)o[e]=0;return o[14]=8*n,j2(r,o),r}function owe(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}Kv=yi.atob.bind(yi),XI=yi.btoa.bind(yi);var A3="0123456789abcdef".split("");function swe(t){for(var e="",n=0;n<4;n++)e+=A3[t>>8*n+4&15]+A3[t>>8*n&15];return e}function awe(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function ZI(t){return uH(t).map(awe).join("")}var lwe=function(t){for(var e=0;e<t.length;e++)t[e]=swe(t[e]);return t.join("")}(uH("hello"))!="5d41402abc4b2a76b9719d911017c592";function Dp(t,e){if(lwe){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function YI(t,e){var n,r,o,l;if(t!==n){for(var h=(o=t,l=1+(256/t.length>>0),new Array(l+1).join(o)),p=[],i=0;i<256;i++)p[i]=i;var b=0;for(i=0;i<256;i++){var E=p[i];b=(b+E+h.charCodeAt(i))%256,p[i]=p[b],p[b]=E}n=t,r=p}else p=r;var I=e.length,O=0,M=0,G="";for(i=0;i<I;i++)M=(M+(E=p[O=(O+1)%256]))%256,p[O]=p[M],p[M]=E,h=p[(p[O]+p[M])%256],G+=String.fromCharCode(e.charCodeAt(i)^h);return G}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var p3={print:4,modify:8,copy:16,"annot-forms":32};function Uy(t,e,n,r){this.v=1,this.r=2;var o=192;t.forEach(function(p){if(p3.perm!==void 0)throw new Error("Invalid permission: "+p);o+=p3[p]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var l=(e+this.padding).substr(0,32),h=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(l,h),this.P=-(1+(255^o)),this.encryptionKey=ZI(l+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=YI(this.encryptionKey,this.padding)}function Ny(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var o=t.charCodeAt(r);o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?e+="#"+("0"+o.toString(16)).slice(-2):e+=t[r]}return e}function m3(t){if(ss(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,o){if(o=o||!1,typeof n!="string"||typeof r!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var l=Math.random().toString(35);return e[n][l]=[r,!!o],l},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),o=[];for(var l in e[n]){var h=e[n][l];try{h[0].apply(t,r)}catch(p){yi.console&&bs.error("jsPDF PubSub Error",p.message,p)}h[1]&&o.push(l)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function $C(t){if(!(this instanceof $C))return new $C(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function hH(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Jm(t,e,n,r,o){if(!(this instanceof Jm))return new Jm(t,e,n,r,o);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,hH.call(this,r,o)}function Gy(t,e,n,r,o){if(!(this instanceof Gy))return new Gy(t,e,n,r,o);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,hH.call(this,r,o)}function gi(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],o=arguments[2],l=arguments[3],h=[],p=1,i=16,b="S",E=null;ss(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,o=t.format||o,l=t.compress||t.compressPdf||l,(E=t.encryption||null)!==null&&(E.userPassword=E.userPassword||"",E.ownerPassword=E.ownerPassword||"",E.userPermissions=E.userPermissions||[]),p=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(i=t.floatPrecision),b=t.defaultPathOperation||"S"),h=t.filters||(l===!0?["FlateEncode"]:h),r=r||"mm",n=(""+(n||"P")).toLowerCase();var I=t.putOnlyUsedFonts||!1,O={},M={internal:{},__private__:{}};M.__private__.PubSub=m3;var G="1.3",q=M.__private__.getPdfVersion=function(){return G};M.__private__.setPdfVersion=function(X){G=X};var Z={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};M.__private__.getPageFormats=function(){return Z};var Y=M.__private__.getPageFormat=function(X){return Z[X]};o=o||"a4";var te={COMPAT:"compat",ADVANCED:"advanced"},be=te.COMPAT;function Pe(){this.saveGraphicsState(),Re(new Ce(pr,0,0,-pr,0,Zs()*pr).toString()+" cm"),this.setFontSize(this.getFontSize()/pr),b="n",be=te.ADVANCED}function Se(){this.restoreGraphicsState(),b="S",be=te.COMPAT}var Ie=M.__private__.combineFontStyleAndFontWeight=function(X,ke){if(X=="bold"&&ke=="normal"||X=="bold"&&ke==400||X=="normal"&&ke=="italic"||X=="bold"&&ke=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ke&&(X=ke==400||ke==="normal"?X==="italic"?"italic":"normal":ke!=700&&ke!=="bold"||X!=="normal"?(ke==700?"bold":ke)+""+X:"bold"),X};M.advancedAPI=function(X){var ke=be===te.COMPAT;return ke&&Pe.call(this),typeof X!="function"||(X(this),ke&&Se.call(this)),this},M.compatAPI=function(X){var ke=be===te.ADVANCED;return ke&&Se.call(this),typeof X!="function"||(X(this),ke&&Pe.call(this)),this},M.isAdvancedAPI=function(){return be===te.ADVANCED};var Ae,ne=function(X){if(be!==te.ADVANCED)throw new Error(X+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},ue=M.roundToPrecision=M.__private__.roundToPrecision=function(X,ke){var Bt=e||ke;if(isNaN(X)||isNaN(Bt))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return X.toFixed(Bt).replace(/0+$/,"")};Ae=M.hpf=M.__private__.hpf=typeof i=="number"?function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.hpf");return ue(X,i)}:i==="smart"?function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.hpf");return ue(X,X>-1&&X<1?16:5)}:function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.hpf");return ue(X,16)};var ye=M.f2=M.__private__.f2=function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.f2");return ue(X,2)},se=M.__private__.f3=function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.f3");return ue(X,3)},le=M.scale=M.__private__.scale=function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.scale");return be===te.COMPAT?X*pr:be===te.ADVANCED?X:void 0},ge=function(X){return be===te.COMPAT?Zs()-X:be===te.ADVANCED?X:void 0},lt=function(X){return le(ge(X))};M.__private__.setPrecision=M.setPrecision=function(X){typeof parseInt(X,10)=="number"&&(e=parseInt(X,10))};var Ot,gt="00000000000000000000000000000000",Tt=M.__private__.getFileId=function(){return gt},Mt=M.__private__.setFileId=function(X){return gt=X!==void 0&&/^[a-fA-F0-9]{32}$/.test(X)?X.toUpperCase():gt.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),E!==null&&(Ko=new Uy(E.userPermissions,E.userPassword,E.ownerPassword,gt)),gt};M.setFileId=function(X){return Mt(X),this},M.getFileId=function(){return Tt()};var on=M.__private__.convertDateToPDFDate=function(X){var ke=X.getTimezoneOffset(),Bt=ke<0?"+":"-",Ht=Math.floor(Math.abs(ke/60)),sn=Math.abs(ke%60),Dn=[Bt,We(Ht),"'",We(sn),"'"].join("");return["D:",X.getFullYear(),We(X.getMonth()+1),We(X.getDate()),We(X.getHours()),We(X.getMinutes()),We(X.getSeconds()),Dn].join("")},Ut=M.__private__.convertPDFDateToDate=function(X){var ke=parseInt(X.substr(2,4),10),Bt=parseInt(X.substr(6,2),10)-1,Ht=parseInt(X.substr(8,2),10),sn=parseInt(X.substr(10,2),10),Dn=parseInt(X.substr(12,2),10),Zn=parseInt(X.substr(14,2),10);return new Date(ke,Bt,Ht,sn,Dn,Zn,0)},In=M.__private__.setCreationDate=function(X){var ke;if(X===void 0&&(X=new Date),X instanceof Date)ke=on(X);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(X))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ke=X}return Ot=ke},Ee=M.__private__.getCreationDate=function(X){var ke=Ot;return X==="jsDate"&&(ke=Ut(Ot)),ke};M.setCreationDate=function(X){return In(X),this},M.getCreationDate=function(X){return Ee(X)};var $e,We=M.__private__.padd2=function(X){return("0"+parseInt(X)).slice(-2)},vt=M.__private__.padd2Hex=function(X){return("00"+(X=X.toString())).substr(X.length)},_t=0,at=[],Ft=[],Dt=0,yn=[],De=[],jn=!1,Te=Ft,Je=function(){_t=0,Dt=0,Ft=[],at=[],yn=[],nn=Vt(),qt=Vt()};M.__private__.setCustomOutputDestination=function(X){jn=!0,Te=X};var Fe=function(X){jn||(Te=X)};M.__private__.resetCustomOutputDestination=function(){jn=!1,Te=Ft};var Re=M.__private__.out=function(X){return X=X.toString(),Dt+=X.length+1,Te.push(X),Te},Yt=M.__private__.write=function(X){return Re(arguments.length===1?X.toString():Array.prototype.join.call(arguments," "))},rn=M.__private__.getArrayBuffer=function(X){for(var ke=X.length,Bt=new ArrayBuffer(ke),Ht=new Uint8Array(Bt);ke--;)Ht[ke]=X.charCodeAt(ke);return Bt},zt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];M.__private__.getStandardFonts=function(){return zt};var Jt=t.fontSize||16;M.__private__.setFontSize=M.setFontSize=function(X){return Jt=be===te.ADVANCED?X/pr:X,this};var gn,fn=M.__private__.getFontSize=M.getFontSize=function(){return be===te.COMPAT?Jt:Jt*pr},Fn=t.R2L||!1;M.__private__.setR2L=M.setR2L=function(X){return Fn=X,this},M.__private__.getR2L=M.getR2L=function(){return Fn};var Wn,_n=M.__private__.setZoomMode=function(X){var ke=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(X))gn=X;else if(isNaN(X)){if(ke.indexOf(X)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+X+'" is not recognized.');gn=X}else gn=parseInt(X,10)};M.__private__.getZoomMode=function(){return gn};var er,ar=M.__private__.setPageMode=function(X){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(X)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+X+'" is not recognized.');Wn=X};M.__private__.getPageMode=function(){return Wn};var Fr=M.__private__.setLayoutMode=function(X){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(X)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+X+'" is not recognized.');er=X};M.__private__.getLayoutMode=function(){return er},M.__private__.setDisplayMode=M.setDisplayMode=function(X,ke,Bt){return _n(X),Fr(ke),ar(Bt),this};var lr={title:"",subject:"",author:"",keywords:"",creator:""};M.__private__.getDocumentProperty=function(X){if(Object.keys(lr).indexOf(X)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return lr[X]},M.__private__.getDocumentProperties=function(){return lr},M.__private__.setDocumentProperties=M.setProperties=M.setDocumentProperties=function(X){for(var ke in lr)lr.hasOwnProperty(ke)&&X[ke]&&(lr[ke]=X[ke]);return this},M.__private__.setDocumentProperty=function(X,ke){if(Object.keys(lr).indexOf(X)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return lr[X]=ke};var Ir,pr,to,xi,No,Fi={},pi={},Wi=[],Ti={},Jr={},Xi={},Ns={},ns=null,lo=0,Gr=[],Ni=new m3(M),Pa=t.hotfixes||[],Zo={},jt={},we=[],Ce=function X(ke,Bt,Ht,sn,Dn,Zn){if(!(this instanceof X))return new X(ke,Bt,Ht,sn,Dn,Zn);isNaN(ke)&&(ke=1),isNaN(Bt)&&(Bt=0),isNaN(Ht)&&(Ht=0),isNaN(sn)&&(sn=1),isNaN(Dn)&&(Dn=0),isNaN(Zn)&&(Zn=0),this._matrix=[ke,Bt,Ht,sn,Dn,Zn]};Object.defineProperty(Ce.prototype,"sx",{get:function(){return this._matrix[0]},set:function(X){this._matrix[0]=X}}),Object.defineProperty(Ce.prototype,"shy",{get:function(){return this._matrix[1]},set:function(X){this._matrix[1]=X}}),Object.defineProperty(Ce.prototype,"shx",{get:function(){return this._matrix[2]},set:function(X){this._matrix[2]=X}}),Object.defineProperty(Ce.prototype,"sy",{get:function(){return this._matrix[3]},set:function(X){this._matrix[3]=X}}),Object.defineProperty(Ce.prototype,"tx",{get:function(){return this._matrix[4]},set:function(X){this._matrix[4]=X}}),Object.defineProperty(Ce.prototype,"ty",{get:function(){return this._matrix[5]},set:function(X){this._matrix[5]=X}}),Object.defineProperty(Ce.prototype,"a",{get:function(){return this._matrix[0]},set:function(X){this._matrix[0]=X}}),Object.defineProperty(Ce.prototype,"b",{get:function(){return this._matrix[1]},set:function(X){this._matrix[1]=X}}),Object.defineProperty(Ce.prototype,"c",{get:function(){return this._matrix[2]},set:function(X){this._matrix[2]=X}}),Object.defineProperty(Ce.prototype,"d",{get:function(){return this._matrix[3]},set:function(X){this._matrix[3]=X}}),Object.defineProperty(Ce.prototype,"e",{get:function(){return this._matrix[4]},set:function(X){this._matrix[4]=X}}),Object.defineProperty(Ce.prototype,"f",{get:function(){return this._matrix[5]},set:function(X){this._matrix[5]=X}}),Object.defineProperty(Ce.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ce.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ce.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ce.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ce.prototype.join=function(X){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Ae).join(X)},Ce.prototype.multiply=function(X){var ke=X.sx*this.sx+X.shy*this.shx,Bt=X.sx*this.shy+X.shy*this.sy,Ht=X.shx*this.sx+X.sy*this.shx,sn=X.shx*this.shy+X.sy*this.sy,Dn=X.tx*this.sx+X.ty*this.shx+this.tx,Zn=X.tx*this.shy+X.ty*this.sy+this.ty;return new Ce(ke,Bt,Ht,sn,Dn,Zn)},Ce.prototype.decompose=function(){var X=this.sx,ke=this.shy,Bt=this.shx,Ht=this.sy,sn=this.tx,Dn=this.ty,Zn=Math.sqrt(X*X+ke*ke),xr=(X/=Zn)*Bt+(ke/=Zn)*Ht;Bt-=X*xr,Ht-=ke*xr;var N=Math.sqrt(Bt*Bt+Ht*Ht);return xr/=N,X*(Ht/=N)<ke*(Bt/=N)&&(X=-X,ke=-ke,xr=-xr,Zn=-Zn),{scale:new Ce(Zn,0,0,N,0,0),translate:new Ce(1,0,0,1,sn,Dn),rotate:new Ce(X,ke,-ke,X,0,0),skew:new Ce(1,0,xr,1,0,0)}},Ce.prototype.toString=function(X){return this.join(" ")},Ce.prototype.inversed=function(){var X=this.sx,ke=this.shy,Bt=this.shx,Ht=this.sy,sn=this.tx,Dn=this.ty,Zn=1/(X*Ht-ke*Bt),xr=Ht*Zn,N=-ke*Zn,ae=-Bt*Zn,fe=X*Zn;return new Ce(xr,N,ae,fe,-xr*sn-ae*Dn,-N*sn-fe*Dn)},Ce.prototype.applyToPoint=function(X){var ke=X.x*this.sx+X.y*this.shx+this.tx,Bt=X.x*this.shy+X.y*this.sy+this.ty;return new Ka(ke,Bt)},Ce.prototype.applyToRectangle=function(X){var ke=this.applyToPoint(X),Bt=this.applyToPoint(new Ka(X.x+X.w,X.y+X.h));return new ll(ke.x,ke.y,Bt.x-ke.x,Bt.y-ke.y)},Ce.prototype.clone=function(){var X=this.sx,ke=this.shy,Bt=this.shx,Ht=this.sy,sn=this.tx,Dn=this.ty;return new Ce(X,ke,Bt,Ht,sn,Dn)},M.Matrix=Ce;var Ye=M.matrixMult=function(X,ke){return ke.multiply(X)},dt=new Ce(1,0,0,1,0,0);M.unitMatrix=M.identityMatrix=dt;var ot=function(X,ke){if(!Jr[X]){var Bt=(ke instanceof Jm?"Sh":"P")+(Object.keys(Ti).length+1).toString(10);ke.id=Bt,Jr[X]=Bt,Ti[Bt]=ke,Ni.publish("addPattern",ke)}};M.ShadingPattern=Jm,M.TilingPattern=Gy,M.addShadingPattern=function(X,ke){return ne("addShadingPattern()"),ot(X,ke),this},M.beginTilingPattern=function(X){ne("beginTilingPattern()"),Ma(X.boundingBox[0],X.boundingBox[1],X.boundingBox[2]-X.boundingBox[0],X.boundingBox[3]-X.boundingBox[1],X.matrix)},M.endTilingPattern=function(X,ke){ne("endTilingPattern()"),ke.stream=De[$e].join(`
`),ot(X,ke),Ni.publish("endTilingPattern",ke),we.pop().restore()};var wt=M.__private__.newObject=function(){var X=Vt();return St(X,!0),X},Vt=M.__private__.newObjectDeferred=function(){return _t++,at[_t]=function(){return Dt},_t},St=function(X,ke){return ke=typeof ke=="boolean"&&ke,at[X]=Dt,ke&&Re(X+" 0 obj"),X},Gt=M.__private__.newAdditionalObject=function(){var X={objId:Vt(),content:""};return yn.push(X),X},nn=Vt(),qt=Vt(),En=M.__private__.decodeColorString=function(X){var ke=X.split(" ");if(ke.length!==2||ke[1]!=="g"&&ke[1]!=="G")ke.length===5&&(ke[4]==="k"||ke[4]==="K")&&(ke=[(1-ke[0])*(1-ke[3]),(1-ke[1])*(1-ke[3]),(1-ke[2])*(1-ke[3]),"r"]);else{var Bt=parseFloat(ke[0]);ke=[Bt,Bt,Bt,"r"]}for(var Ht="#",sn=0;sn<3;sn++)Ht+=("0"+Math.floor(255*parseFloat(ke[sn])).toString(16)).slice(-2);return Ht},zn=M.__private__.encodeColorString=function(X){var ke;typeof X=="string"&&(X={ch1:X});var Bt=X.ch1,Ht=X.ch2,sn=X.ch3,Dn=X.ch4,Zn=X.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Bt=="string"&&Bt.charAt(0)!=="#"){var xr=new cH(Bt);if(xr.ok)Bt=xr.toHex();else if(!/^\d*\.?\d*$/.test(Bt))throw new Error('Invalid color "'+Bt+'" passed to jsPDF.encodeColorString.')}if(typeof Bt=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Bt)&&(Bt="#"+Bt[1]+Bt[1]+Bt[2]+Bt[2]+Bt[3]+Bt[3]),typeof Bt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Bt)){var N=parseInt(Bt.substr(1),16);Bt=N>>16&255,Ht=N>>8&255,sn=255&N}if(Ht===void 0||Dn===void 0&&Bt===Ht&&Ht===sn)if(typeof Bt=="string")ke=Bt+" "+Zn[0];else switch(X.precision){case 2:ke=ye(Bt/255)+" "+Zn[0];break;case 3:default:ke=se(Bt/255)+" "+Zn[0]}else if(Dn===void 0||ss(Dn)==="object"){if(Dn&&!isNaN(Dn.a)&&Dn.a===0)return ke=["1.","1.","1.",Zn[1]].join(" ");if(typeof Bt=="string")ke=[Bt,Ht,sn,Zn[1]].join(" ");else switch(X.precision){case 2:ke=[ye(Bt/255),ye(Ht/255),ye(sn/255),Zn[1]].join(" ");break;default:case 3:ke=[se(Bt/255),se(Ht/255),se(sn/255),Zn[1]].join(" ")}}else if(typeof Bt=="string")ke=[Bt,Ht,sn,Dn,Zn[2]].join(" ");else switch(X.precision){case 2:ke=[ye(Bt),ye(Ht),ye(sn),ye(Dn),Zn[2]].join(" ");break;case 3:default:ke=[se(Bt),se(Ht),se(sn),se(Dn),Zn[2]].join(" ")}return ke},Vn=M.__private__.getFilters=function(){return h},gr=M.__private__.putStream=function(X){var ke=(X=X||{}).data||"",Bt=X.filters||Vn(),Ht=X.alreadyAppliedFilters||[],sn=X.addLength1||!1,Dn=ke.length,Zn=X.objectId,xr=function(di){return di};if(E!==null&&Zn===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");E!==null&&(xr=Ko.encryptor(Zn,0));var N={};Bt===!0&&(Bt=["FlateEncode"]);var ae=X.additionalKeyValues||[],fe=(N=gi.API.processDataByFilters!==void 0?gi.API.processDataByFilters(ke,Bt):{data:ke,reverseChain:[]}).reverseChain+(Array.isArray(Ht)?Ht.join(" "):Ht.toString());if(N.data.length!==0&&(ae.push({key:"Length",value:N.data.length}),sn===!0&&ae.push({key:"Length1",value:Dn})),fe.length!=0)if(fe.split("/").length-1==1)ae.push({key:"Filter",value:fe});else{ae.push({key:"Filter",value:"["+fe+"]"});for(var Le=0;Le<ae.length;Le+=1)if(ae[Le].key==="DecodeParms"){for(var an=[],Qt=0;Qt<N.reverseChain.split("/").length-1;Qt+=1)an.push("null");an.push(ae[Le].value),ae[Le].value="["+an.join(" ")+"]"}}Re("<<");for(var nr=0;nr<ae.length;nr++)Re("/"+ae[nr].key+" "+ae[nr].value);Re(">>"),N.data.length!==0&&(Re("stream"),Re(xr(N.data)),Re("endstream"))},Er=M.__private__.putPage=function(X){var ke=X.number,Bt=X.data,Ht=X.objId,sn=X.contentsObjId;St(Ht,!0),Re("<</Type /Page"),Re("/Parent "+X.rootDictionaryObjId+" 0 R"),Re("/Resources "+X.resourceDictionaryObjId+" 0 R"),Re("/MediaBox ["+parseFloat(Ae(X.mediaBox.bottomLeftX))+" "+parseFloat(Ae(X.mediaBox.bottomLeftY))+" "+Ae(X.mediaBox.topRightX)+" "+Ae(X.mediaBox.topRightY)+"]"),X.cropBox!==null&&Re("/CropBox ["+Ae(X.cropBox.bottomLeftX)+" "+Ae(X.cropBox.bottomLeftY)+" "+Ae(X.cropBox.topRightX)+" "+Ae(X.cropBox.topRightY)+"]"),X.bleedBox!==null&&Re("/BleedBox ["+Ae(X.bleedBox.bottomLeftX)+" "+Ae(X.bleedBox.bottomLeftY)+" "+Ae(X.bleedBox.topRightX)+" "+Ae(X.bleedBox.topRightY)+"]"),X.trimBox!==null&&Re("/TrimBox ["+Ae(X.trimBox.bottomLeftX)+" "+Ae(X.trimBox.bottomLeftY)+" "+Ae(X.trimBox.topRightX)+" "+Ae(X.trimBox.topRightY)+"]"),X.artBox!==null&&Re("/ArtBox ["+Ae(X.artBox.bottomLeftX)+" "+Ae(X.artBox.bottomLeftY)+" "+Ae(X.artBox.topRightX)+" "+Ae(X.artBox.topRightY)+"]"),typeof X.userUnit=="number"&&X.userUnit!==1&&Re("/UserUnit "+X.userUnit),Ni.publish("putPage",{objId:Ht,pageContext:Gr[ke],pageNumber:ke,page:Bt}),Re("/Contents "+sn+" 0 R"),Re(">>"),Re("endobj");var Dn=Bt.join(`
`);return be===te.ADVANCED&&(Dn+=`
Q`),St(sn,!0),gr({data:Dn,filters:Vn(),objectId:sn}),Re("endobj"),Ht},Tr=M.__private__.putPages=function(){var X,ke,Bt=[];for(X=1;X<=lo;X++)Gr[X].objId=Vt(),Gr[X].contentsObjId=Vt();for(X=1;X<=lo;X++)Bt.push(Er({number:X,data:De[X],objId:Gr[X].objId,contentsObjId:Gr[X].contentsObjId,mediaBox:Gr[X].mediaBox,cropBox:Gr[X].cropBox,bleedBox:Gr[X].bleedBox,trimBox:Gr[X].trimBox,artBox:Gr[X].artBox,userUnit:Gr[X].userUnit,rootDictionaryObjId:nn,resourceDictionaryObjId:qt}));St(nn,!0),Re("<</Type /Pages");var Ht="/Kids [";for(ke=0;ke<lo;ke++)Ht+=Bt[ke]+" 0 R ";Re(Ht+"]"),Re("/Count "+lo),Re(">>"),Re("endobj"),Ni.publish("postPutPages")},Br=function(X){Ni.publish("putFont",{font:X,out:Re,newObject:wt,putStream:gr}),X.isAlreadyPutted!==!0&&(X.objectNumber=wt(),Re("<<"),Re("/Type /Font"),Re("/BaseFont /"+Ny(X.postScriptName)),Re("/Subtype /Type1"),typeof X.encoding=="string"&&Re("/Encoding /"+X.encoding),Re("/FirstChar 32"),Re("/LastChar 255"),Re(">>"),Re("endobj"))},hi=function(){for(var X in Fi)Fi.hasOwnProperty(X)&&(I===!1||I===!0&&O.hasOwnProperty(X))&&Br(Fi[X])},mi=function(X){X.objectNumber=wt();var ke=[];ke.push({key:"Type",value:"/XObject"}),ke.push({key:"Subtype",value:"/Form"}),ke.push({key:"BBox",value:"["+[Ae(X.x),Ae(X.y),Ae(X.x+X.width),Ae(X.y+X.height)].join(" ")+"]"}),ke.push({key:"Matrix",value:"["+X.matrix.toString()+"]"});var Bt=X.pages[1].join(`
`);gr({data:Bt,additionalKeyValues:ke,objectId:X.objectNumber}),Re("endobj")},Mr=function(){for(var X in Zo)Zo.hasOwnProperty(X)&&mi(Zo[X])},Ci=function(X,ke){var Bt,Ht=[],sn=1/(ke-1);for(Bt=0;Bt<1;Bt+=sn)Ht.push(Bt);if(Ht.push(1),X[0].offset!=0){var Dn={offset:0,color:X[0].color};X.unshift(Dn)}if(X[X.length-1].offset!=1){var Zn={offset:1,color:X[X.length-1].color};X.push(Zn)}for(var xr="",N=0,ae=0;ae<Ht.length;ae++){for(Bt=Ht[ae];Bt>X[N+1].offset;)N++;var fe=X[N].offset,Le=(Bt-fe)/(X[N+1].offset-fe),an=X[N].color,Qt=X[N+1].color;xr+=vt(Math.round((1-Le)*an[0]+Le*Qt[0]).toString(16))+vt(Math.round((1-Le)*an[1]+Le*Qt[1]).toString(16))+vt(Math.round((1-Le)*an[2]+Le*Qt[2]).toString(16))}return xr.trim()},$i=function(X,ke){ke||(ke=21);var Bt=wt(),Ht=Ci(X.colors,ke),sn=[];sn.push({key:"FunctionType",value:"0"}),sn.push({key:"Domain",value:"[0.0 1.0]"}),sn.push({key:"Size",value:"["+ke+"]"}),sn.push({key:"BitsPerSample",value:"8"}),sn.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),sn.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),gr({data:Ht,additionalKeyValues:sn,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Bt}),Re("endobj"),X.objectNumber=wt(),Re("<< /ShadingType "+X.type),Re("/ColorSpace /DeviceRGB");var Dn="/Coords ["+Ae(parseFloat(X.coords[0]))+" "+Ae(parseFloat(X.coords[1]))+" ";X.type===2?Dn+=Ae(parseFloat(X.coords[2]))+" "+Ae(parseFloat(X.coords[3])):Dn+=Ae(parseFloat(X.coords[2]))+" "+Ae(parseFloat(X.coords[3]))+" "+Ae(parseFloat(X.coords[4]))+" "+Ae(parseFloat(X.coords[5])),Re(Dn+="]"),X.matrix&&Re("/Matrix ["+X.matrix.toString()+"]"),Re("/Function "+Bt+" 0 R"),Re("/Extend [true true]"),Re(">>"),Re("endobj")},jo=function(X,ke){var Bt=Vt(),Ht=wt();ke.push({resourcesOid:Bt,objectOid:Ht}),X.objectNumber=Ht;var sn=[];sn.push({key:"Type",value:"/Pattern"}),sn.push({key:"PatternType",value:"1"}),sn.push({key:"PaintType",value:"1"}),sn.push({key:"TilingType",value:"1"}),sn.push({key:"BBox",value:"["+X.boundingBox.map(Ae).join(" ")+"]"}),sn.push({key:"XStep",value:Ae(X.xStep)}),sn.push({key:"YStep",value:Ae(X.yStep)}),sn.push({key:"Resources",value:Bt+" 0 R"}),X.matrix&&sn.push({key:"Matrix",value:"["+X.matrix.toString()+"]"}),gr({data:X.stream,additionalKeyValues:sn,objectId:X.objectNumber}),Re("endobj")},Co=function(X){var ke;for(ke in Ti)Ti.hasOwnProperty(ke)&&(Ti[ke]instanceof Jm?$i(Ti[ke]):Ti[ke]instanceof Gy&&jo(Ti[ke],X))},$o=function(X){for(var ke in X.objectNumber=wt(),Re("<<"),X)switch(ke){case"opacity":Re("/ca "+ye(X[ke]));break;case"stroke-opacity":Re("/CA "+ye(X[ke]))}Re(">>"),Re("endobj")},Ps=function(){var X;for(X in Xi)Xi.hasOwnProperty(X)&&$o(Xi[X])},ya=function(){for(var X in Re("/XObject <<"),Zo)Zo.hasOwnProperty(X)&&Zo[X].objectNumber>=0&&Re("/"+X+" "+Zo[X].objectNumber+" 0 R");Ni.publish("putXobjectDict"),Re(">>")},Xu=function(){Ko.oid=wt(),Re("<<"),Re("/Filter /Standard"),Re("/V "+Ko.v),Re("/R "+Ko.r),Re("/U <"+Ko.toHexString(Ko.U)+">"),Re("/O <"+Ko.toHexString(Ko.O)+">"),Re("/P "+Ko.P),Re(">>"),Re("endobj")},yc=function(){for(var X in Re("/Font <<"),Fi)Fi.hasOwnProperty(X)&&(I===!1||I===!0&&O.hasOwnProperty(X))&&Re("/"+X+" "+Fi[X].objectNumber+" 0 R");Re(">>")},_c=function(){if(Object.keys(Ti).length>0){for(var X in Re("/Shading <<"),Ti)Ti.hasOwnProperty(X)&&Ti[X]instanceof Jm&&Ti[X].objectNumber>=0&&Re("/"+X+" "+Ti[X].objectNumber+" 0 R");Ni.publish("putShadingPatternDict"),Re(">>")}},Vl=function(X){if(Object.keys(Ti).length>0){for(var ke in Re("/Pattern <<"),Ti)Ti.hasOwnProperty(ke)&&Ti[ke]instanceof M.TilingPattern&&Ti[ke].objectNumber>=0&&Ti[ke].objectNumber<X&&Re("/"+ke+" "+Ti[ke].objectNumber+" 0 R");Ni.publish("putTilingPatternDict"),Re(">>")}},Ql=function(){if(Object.keys(Xi).length>0){var X;for(X in Re("/ExtGState <<"),Xi)Xi.hasOwnProperty(X)&&Xi[X].objectNumber>=0&&Re("/"+X+" "+Xi[X].objectNumber+" 0 R");Ni.publish("putGStateDict"),Re(">>")}},Go=function(X){St(X.resourcesOid,!0),Re("<<"),Re("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),yc(),_c(),Vl(X.objectOid),Ql(),ya(),Re(">>"),Re("endobj")},vu=function(){var X=[];hi(),Ps(),Mr(),Co(X),Ni.publish("putResources"),X.forEach(Go),Go({resourcesOid:qt,objectOid:Number.MAX_SAFE_INTEGER}),Ni.publish("postPutResources")},vc=function(){Ni.publish("putAdditionalObjects");for(var X=0;X<yn.length;X++){var ke=yn[X];St(ke.objId,!0),Re(ke.content),Re("endobj")}Ni.publish("postPutAdditionalObjects")},bc=function(X){pi[X.fontName]=pi[X.fontName]||{},pi[X.fontName][X.fontStyle]=X.id},sa=function(X,ke,Bt,Ht,sn){var Dn={id:"F"+(Object.keys(Fi).length+1).toString(10),postScriptName:X,fontName:ke,fontStyle:Bt,encoding:Ht,isStandardFont:sn||!1,metadata:{}};return Ni.publish("addFont",{font:Dn,instance:this}),Fi[Dn.id]=Dn,bc(Dn),Dn.id},La=function(X){for(var ke=0,Bt=zt.length;ke<Bt;ke++){var Ht=sa.call(this,X[ke][0],X[ke][1],X[ke][2],zt[ke][3],!0);I===!1&&(O[Ht]=!0);var sn=X[ke][0].split("-");bc({id:Ht,fontName:sn[0],fontStyle:sn[1]||""})}Ni.publish("addFonts",{fonts:Fi,dictionary:pi})},ls=function(X){return X.foo=function(){try{return X.apply(this,arguments)}catch(Ht){var ke=Ht.stack||"";~ke.indexOf(" at ")&&(ke=ke.split(" at ")[1]);var Bt="Error in function "+ke.split(`
`)[0].split("<")[0]+": "+Ht.message;if(!yi.console)throw new Error(Bt);yi.console.error(Bt,Ht),yi.alert&&alert(Bt)}},X.foo.bar=X,X.foo},Ls=function(X,ke){var Bt,Ht,sn,Dn,Zn,xr,N,ae,fe;if(sn=(ke=ke||{}).sourceEncoding||"Unicode",Zn=ke.outputEncoding,(ke.autoencode||Zn)&&Fi[Ir].metadata&&Fi[Ir].metadata[sn]&&Fi[Ir].metadata[sn].encoding&&(Dn=Fi[Ir].metadata[sn].encoding,!Zn&&Fi[Ir].encoding&&(Zn=Fi[Ir].encoding),!Zn&&Dn.codePages&&(Zn=Dn.codePages[0]),typeof Zn=="string"&&(Zn=Dn[Zn]),Zn)){for(N=!1,xr=[],Bt=0,Ht=X.length;Bt<Ht;Bt++)(ae=Zn[X.charCodeAt(Bt)])?xr.push(String.fromCharCode(ae)):xr.push(X[Bt]),xr[Bt].charCodeAt(0)>>8&&(N=!0);X=xr.join("")}for(Bt=X.length;N===void 0&&Bt!==0;)X.charCodeAt(Bt-1)>>8&&(N=!0),Bt--;if(!N)return X;for(xr=ke.noBOM?[]:[254,255],Bt=0,Ht=X.length;Bt<Ht;Bt++){if((fe=(ae=X.charCodeAt(Bt))>>8)>>8)throw new Error("Character at position "+Bt+" of string '"+X+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");xr.push(fe),xr.push(ae-(fe<<8))}return String.fromCharCode.apply(void 0,xr)},go=M.__private__.pdfEscape=M.pdfEscape=function(X,ke){return Ls(X,ke).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},qs=M.__private__.beginPage=function(X){De[++lo]=[],Gr[lo]={objId:0,contentsObjId:0,userUnit:Number(p),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(X[0]),topRightY:Number(X[1])}},Fa(lo),Fe(De[$e])},wc=function(X,ke){var Bt,Ht,sn;switch(n=ke||n,typeof X=="string"&&(Bt=Y(X.toLowerCase()),Array.isArray(Bt)&&(Ht=Bt[0],sn=Bt[1])),Array.isArray(X)&&(Ht=X[0]*pr,sn=X[1]*pr),isNaN(Ht)&&(Ht=o[0],sn=o[1]),(Ht>14400||sn>14400)&&(bs.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ht=Math.min(14400,Ht),sn=Math.min(14400,sn)),o=[Ht,sn],n.substr(0,1)){case"l":sn>Ht&&(o=[sn,Ht]);break;case"p":Ht>sn&&(o=[sn,Ht])}qs(o),Zu(Fs),Re(ca),wu!==0&&Re(wu+" J"),ua!==0&&Re(ua+" j"),Ni.publish("addPage",{pageNumber:lo})},Vc=function(X){X>0&&X<=lo&&(De.splice(X,1),Gr.splice(X,1),lo--,$e>lo&&($e=lo),this.setPage($e))},Fa=function(X){X>0&&X<=lo&&($e=X)},co=M.__private__.getNumberOfPages=M.getNumberOfPages=function(){return De.length-1},Qc=function(X,ke,Bt){var Ht,sn=void 0;return Bt=Bt||{},X=X!==void 0?X:Fi[Ir].fontName,ke=ke!==void 0?ke:Fi[Ir].fontStyle,Ht=X.toLowerCase(),pi[Ht]!==void 0&&pi[Ht][ke]!==void 0?sn=pi[Ht][ke]:pi[X]!==void 0&&pi[X][ke]!==void 0?sn=pi[X][ke]:Bt.disableWarning===!1&&bs.warn("Unable to look up font label for font '"+X+"', '"+ke+"'. Refer to getFontList() for available fonts."),sn||Bt.noFallback||(sn=pi.times[ke])==null&&(sn=pi.times.normal),sn},bu=M.__private__.putInfo=function(){var X=wt(),ke=function(Ht){return Ht};for(var Bt in E!==null&&(ke=Ko.encryptor(X,0)),Re("<<"),Re("/Producer ("+go(ke("jsPDF "+gi.version))+")"),lr)lr.hasOwnProperty(Bt)&&lr[Bt]&&Re("/"+Bt.substr(0,1).toUpperCase()+Bt.substr(1)+" ("+go(ke(lr[Bt]))+")");Re("/CreationDate ("+go(ke(Ot))+")"),Re(">>"),Re("endobj")},cs=M.__private__.putCatalog=function(X){var ke=(X=X||{}).rootDictionaryObjId||nn;switch(wt(),Re("<<"),Re("/Type /Catalog"),Re("/Pages "+ke+" 0 R"),gn||(gn="fullwidth"),gn){case"fullwidth":Re("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Re("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Re("/OpenAction [3 0 R /Fit]");break;case"original":Re("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Bt=""+gn;Bt.substr(Bt.length-1)==="%"&&(gn=parseInt(gn)/100),typeof gn=="number"&&Re("/OpenAction [3 0 R /XYZ null null "+ye(gn)+"]")}switch(er||(er="continuous"),er){case"continuous":Re("/PageLayout /OneColumn");break;case"single":Re("/PageLayout /SinglePage");break;case"two":case"twoleft":Re("/PageLayout /TwoColumnLeft");break;case"tworight":Re("/PageLayout /TwoColumnRight")}Wn&&Re("/PageMode /"+Wn),Ni.publish("putCatalog"),Re(">>"),Re("endobj")},Hl=M.__private__.putTrailer=function(){Re("trailer"),Re("<<"),Re("/Size "+(_t+1)),Re("/Root "+_t+" 0 R"),Re("/Info "+(_t-1)+" 0 R"),E!==null&&Re("/Encrypt "+Ko.oid+" 0 R"),Re("/ID [ <"+gt+"> <"+gt+"> ]"),Re(">>")},Hc=M.__private__.putHeader=function(){Re("%PDF-"+G),Re("%ºß¬à")},jc=M.__private__.putXRef=function(){var X="0000000000";Re("xref"),Re("0 "+(_t+1)),Re("0000000000 65535 f ");for(var ke=1;ke<=_t;ke++)typeof at[ke]=="function"?Re((X+at[ke]()).slice(-10)+" 00000 n "):at[ke]!==void 0?Re((X+at[ke]).slice(-10)+" 00000 n "):Re("0000000000 00000 n ")},bl=M.__private__.buildDocument=function(){Je(),Fe(Ft),Ni.publish("buildDocument"),Hc(),Tr(),vc(),vu(),E!==null&&Xu(),bu(),cs();var X=Dt;return jc(),Hl(),Re("startxref"),Re(""+X),Re("%%EOF"),Fe(De[$e]),Ft.join(`
`)},wl=M.__private__.getBlob=function(X){return new Blob([rn(X)],{type:"application/pdf"})},$c=M.output=M.__private__.output=ls(function(X,ke){switch(typeof(ke=ke||{})=="string"?ke={filename:ke}:ke.filename=ke.filename||"generated.pdf",X){case void 0:return bl();case"save":M.save(ke.filename);break;case"arraybuffer":return rn(bl());case"blob":return wl(bl());case"bloburi":case"bloburl":if(yi.URL!==void 0&&typeof yi.URL.createObjectURL=="function")return yi.URL&&yi.URL.createObjectURL(wl(bl()))||void 0;bs.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Bt="",Ht=bl();try{Bt=XI(Ht)}catch{Bt=XI(unescape(encodeURIComponent(Ht)))}return"data:application/pdf;filename="+ke.filename+";base64,"+Bt;case"pdfobjectnewwindow":if(Object.prototype.toString.call(yi)==="[object Window]"){var sn="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Dn=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ke.pdfObjectUrl&&(sn=ke.pdfObjectUrl,Dn="");var Zn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+sn+'"'+Dn+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ke)+");<\/script></body></html>",xr=yi.open();return xr!==null&&xr.document.write(Zn),xr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(yi)==="[object Window]"){var N='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ke.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ke.filename+'" width="500px" height="400px" /></body></html>',ae=yi.open();if(ae!==null){ae.document.write(N);var fe=this;ae.document.documentElement.querySelector("#pdfViewer").onload=function(){ae.document.title=ke.filename,ae.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(fe.output("bloburl"))}}return ae}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(yi)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Le='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ke)+'"></iframe></body></html>',an=yi.open();if(an!==null&&(an.document.write(Le),an.document.title=ke.filename),an||typeof safari>"u")return an;break;case"datauri":case"dataurl":return yi.document.location.href=this.output("datauristring",ke);default:return null}}),ei=function(X){return Array.isArray(Pa)===!0&&Pa.indexOf(X)>-1};switch(r){case"pt":pr=1;break;case"mm":pr=72/25.4;break;case"cm":pr=72/2.54;break;case"in":pr=72;break;case"px":pr=ei("px_scaling")==1?.75:96/72;break;case"pc":case"em":pr=12;break;case"ex":pr=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);pr=r}var Ko=null;In(),Mt();var _i=function(X){return E!==null?Ko.encryptor(X,0):function(ke){return ke}},Dh=M.__private__.getPageInfo=M.getPageInfo=function(X){if(isNaN(X)||X%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Gr[X].objId,pageNumber:X,pageContext:Gr[X]}},$n=M.__private__.getPageInfoByObjId=function(X){if(isNaN(X)||X%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ke in Gr)if(Gr[ke].objId===X)break;return Dh(ke)},sl=M.__private__.getCurrentPageInfo=M.getCurrentPageInfo=function(){return{objId:Gr[$e].objId,pageNumber:$e,pageContext:Gr[$e]}};M.addPage=function(){return wc.apply(this,arguments),this},M.setPage=function(){return Fa.apply(this,arguments),Fe.call(this,De[$e]),this},M.insertPage=function(X){return this.addPage(),this.movePage($e,X),this},M.movePage=function(X,ke){var Bt,Ht;if(X>ke){Bt=De[X],Ht=Gr[X];for(var sn=X;sn>ke;sn--)De[sn]=De[sn-1],Gr[sn]=Gr[sn-1];De[ke]=Bt,Gr[ke]=Ht,this.setPage(ke)}else if(X<ke){Bt=De[X],Ht=Gr[X];for(var Dn=X;Dn<ke;Dn++)De[Dn]=De[Dn+1],Gr[Dn]=Gr[Dn+1];De[ke]=Bt,Gr[ke]=Ht,this.setPage(ke)}return this},M.deletePage=function(){return Vc.apply(this,arguments),this},M.__private__.text=M.text=function(X,ke,Bt,Ht,sn){var Dn,Zn,xr,N,ae,fe,Le,an,Qt,nr=(Ht=Ht||{}).scope||this;if(typeof X=="number"&&typeof ke=="number"&&(typeof Bt=="string"||Array.isArray(Bt))){var di=Bt;Bt=ke,ke=X,X=di}if(arguments[3]instanceof Ce?(ne("The transform parameter of text() with a Matrix value"),Qt=sn):(xr=arguments[4],N=arguments[5],ss(Le=arguments[3])==="object"&&Le!==null||(typeof xr=="string"&&(N=xr,xr=null),typeof Le=="string"&&(N=Le,Le=null),typeof Le=="number"&&(xr=Le,Le=null),Ht={flags:Le,angle:xr,align:N})),isNaN(ke)||isNaN(Bt)||X==null)throw new Error("Invalid arguments passed to jsPDF.text");if(X.length===0)return nr;var ir="",Ai=!1,ro=typeof Ht.lineHeightFactor=="number"?Ht.lineHeightFactor:Gi,ko=nr.internal.scaleFactor;function ha(Mo){return Mo=Mo.split("	").join(Array(Ht.TabLen||9).join(" ")),go(Mo,Le)}function ys(Mo){for(var Eo,Wr=Mo.concat(),ks=[],Zc=Wr.length;Zc--;)typeof(Eo=Wr.shift())=="string"?ks.push(Eo):Array.isArray(Mo)&&(Eo.length===1||Eo[1]===void 0&&Eo[2]===void 0)?ks.push(Eo[0]):ks.push([Eo[0],Eo[1],Eo[2]]);return ks}function Jo(Mo,Eo){var Wr;if(typeof Mo=="string")Wr=Eo(Mo)[0];else if(Array.isArray(Mo)){for(var ks,Zc,Vh=Mo.concat(),Su=[],oh=Vh.length;oh--;)typeof(ks=Vh.shift())=="string"?Su.push(Eo(ks)[0]):Array.isArray(ks)&&typeof ks[0]=="string"&&(Zc=Eo(ks[0],ks[1],ks[2]),Su.push([Zc[0],Zc[1],Zc[2]]));Wr=Su}return Wr}var xl=!1,Gc=!0;if(typeof X=="string")xl=!0;else if(Array.isArray(X)){var Kc=X.concat();Zn=[];for(var Cu,rs=Kc.length;rs--;)(typeof(Cu=Kc.shift())!="string"||Array.isArray(Cu)&&typeof Cu[0]!="string")&&(Gc=!1);xl=Gc}if(xl===!1)throw new Error('Type of text must be string or Array. "'+X+'" is not recognized.');typeof X=="string"&&(X=X.match(/[\r?\n]/)?X.split(/\r\n|\r|\n/g):[X]);var ho=Jt/nr.internal.scaleFactor,Ju=ho*(ro-1);switch(Ht.baseline){case"bottom":Bt-=Ju;break;case"top":Bt+=ho-Ju;break;case"hanging":Bt+=ho-2*Ju;break;case"middle":Bt+=ho/2-Ju}if((fe=Ht.maxWidth||0)>0&&(typeof X=="string"?X=nr.splitTextToSize(X,fe):Object.prototype.toString.call(X)==="[object Array]"&&(X=X.reduce(function(Mo,Eo){return Mo.concat(nr.splitTextToSize(Eo,fe))},[]))),Dn={text:X,x:ke,y:Bt,options:Ht,mutex:{pdfEscape:go,activeFontKey:Ir,fonts:Fi,activeFontSize:Jt}},Ni.publish("preProcessText",Dn),X=Dn.text,xr=(Ht=Dn.options).angle,!(Qt instanceof Ce)&&xr&&typeof xr=="number"){xr*=Math.PI/180,Ht.rotationDirection===0&&(xr=-xr),be===te.ADVANCED&&(xr=-xr);var Nn=Math.cos(xr),Cd=Math.sin(xr);Qt=new Ce(Nn,Cd,-Cd,Nn,0,0)}else xr&&xr instanceof Ce&&(Qt=xr);be!==te.ADVANCED||Qt||(Qt=dt),(ae=Ht.charSpace||Xs)!==void 0&&(ir+=Ae(le(ae))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(an=Ht.horizontalScale)!==void 0&&(ir+=Ae(100*an)+` Tz
`),Ht.lang;var Ys=-1,Ed=Ht.renderingMode!==void 0?Ht.renderingMode:Ht.stroke,eh=nr.internal.getCurrentPageInfo().pageContext;switch(Ed){case 0:case!1:case"fill":Ys=0;break;case 1:case!0:case"stroke":Ys=1;break;case 2:case"fillThenStroke":Ys=2;break;case 3:case"invisible":Ys=3;break;case 4:case"fillAndAddForClipping":Ys=4;break;case 5:case"strokeAndAddPathForClipping":Ys=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ys=6;break;case 7:case"addToPathForClipping":Ys=7}var Uh=eh.usedRenderingMode!==void 0?eh.usedRenderingMode:-1;Ys!==-1?ir+=Ys+` Tr
`:Uh!==-1&&(ir+=`0 Tr
`),Ys!==-1&&(eh.usedRenderingMode=Ys),N=Ht.align||"left";var zs,th=Jt*ro,Oa=nr.internal.pageSize.getWidth(),Nh=Fi[Ir];ae=Ht.charSpace||Xs,fe=Ht.maxWidth||0,Le=Object.assign({autoencode:!0,noBOM:!0},Ht.flags);var Cl=[],nh=function(Mo){return nr.getStringUnitWidth(Mo,{font:Nh,charSpace:ae,fontSize:Jt,doKerning:!1})*Jt/ko};if(Object.prototype.toString.call(X)==="[object Array]"){var qa;Zn=ys(X),N!=="left"&&(zs=Zn.map(nh));var Wo,Eu=0;if(N==="right"){ke-=zs[0],X=[],rs=Zn.length;for(var Cc=0;Cc<rs;Cc++)Cc===0?(Wo=ka(ke),qa=yo(Bt)):(Wo=le(Eu-zs[Cc]),qa=-th),X.push([Zn[Cc],Wo,qa]),Eu=zs[Cc]}else if(N==="center"){ke-=zs[0]/2,X=[],rs=Zn.length;for(var Ec=0;Ec<rs;Ec++)Ec===0?(Wo=ka(ke),qa=yo(Bt)):(Wo=le((Eu-zs[Ec])/2),qa=-th),X.push([Zn[Ec],Wo,qa]),Eu=zs[Ec]}else if(N==="left"){X=[],rs=Zn.length;for(var Bu=0;Bu<rs;Bu++)X.push(Zn[Bu])}else if(N==="justify"&&Nh.encoding==="Identity-H"){X=[],rs=Zn.length,fe=fe!==0?fe:Oa;for(var qc=0,Cs=0;Cs<rs;Cs++)if(qa=Cs===0?yo(Bt):-th,Wo=Cs===0?ka(ke):qc,Cs<rs-1){var Bd=le((fe-zs[Cs])/(Zn[Cs].split(" ").length-1)),Da=Zn[Cs].split(" ");X.push([Da[0]+" ",Wo,qa]),qc=0;for(var cl=1;cl<Da.length;cl++){var zh=(nh(Da[cl-1]+" "+Da[cl])-nh(Da[cl]))*ko+Bd;cl==Da.length-1?X.push([Da[cl],zh,0]):X.push([Da[cl]+" ",zh,0]),qc-=zh}}else X.push([Zn[Cs],Wo,qa]);X.push(["",qc,0])}else{if(N!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(X=[],rs=Zn.length,fe=fe!==0?fe:Oa,Cs=0;Cs<rs;Cs++)qa=Cs===0?yo(Bt):-th,Wo=Cs===0?ka(ke):0,Cs<rs-1?Cl.push(Ae(le((fe-zs[Cs])/(Zn[Cs].split(" ").length-1)))):Cl.push(0),X.push([Zn[Cs],Wo,qa])}}var rh=typeof Ht.R2L=="boolean"?Ht.R2L:Fn;rh===!0&&(X=Jo(X,function(Mo,Eo,Wr){return[Mo.split("").reverse().join(""),Eo,Wr]})),Dn={text:X,x:ke,y:Bt,options:Ht,mutex:{pdfEscape:go,activeFontKey:Ir,fonts:Fi,activeFontSize:Jt}},Ni.publish("postProcessText",Dn),X=Dn.text,Ai=Dn.mutex.isHex||!1;var ih=Fi[Ir].encoding;ih!=="WinAnsiEncoding"&&ih!=="StandardEncoding"||(X=Jo(X,function(Mo,Eo,Wr){return[ha(Mo),Eo,Wr]})),Zn=ys(X),X=[];for(var Bc,Wl,Xl,Wc=0,El=1,ul=Array.isArray(Zn[0])?El:Wc,ri="",Xc=function(Mo,Eo,Wr){var ks="";return Wr instanceof Ce?(Wr=typeof Ht.angle=="number"?Ye(Wr,new Ce(1,0,0,1,Mo,Eo)):Ye(new Ce(1,0,0,1,Mo,Eo),Wr),be===te.ADVANCED&&(Wr=Ye(new Ce(1,0,0,-1,0,0),Wr)),ks=Wr.join(" ")+` Tm
`):ks=Ae(Mo)+" "+Ae(Eo)+` Td
`,ks},Ua=0;Ua<Zn.length;Ua++){switch(ri="",ul){case El:Xl=(Ai?"<":"(")+Zn[Ua][0]+(Ai?">":")"),Bc=parseFloat(Zn[Ua][1]),Wl=parseFloat(Zn[Ua][2]);break;case Wc:Xl=(Ai?"<":"(")+Zn[Ua]+(Ai?">":")"),Bc=ka(ke),Wl=yo(Bt)}Cl!==void 0&&Cl[Ua]!==void 0&&(ri=Cl[Ua]+` Tw
`),Ua===0?X.push(ri+Xc(Bc,Wl,Qt)+Xl):ul===Wc?X.push(ri+Xl):ul===El&&X.push(ri+Xc(Bc,Wl,Qt)+Xl)}X=ul===Wc?X.join(` Tj
T* `):X.join(` Tj
`),X+=` Tj
`;var Wa=`BT
/`;return Wa+=Ir+" "+Jt+` Tf
`,Wa+=Ae(Jt*ro)+` TL
`,Wa+=no+`
`,Wa+=ir,Wa+=X,Re(Wa+="ET"),O[Ir]=!0,nr};var xc=M.__private__.clip=M.clip=function(X){return Re(X==="evenodd"?"W*":"W"),this};M.clipEvenOdd=function(){return xc("evenodd")},M.__private__.discardPath=M.discardPath=function(){return Re("n"),this};var _a=M.__private__.isValidStyle=function(X){var ke=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(X)!==-1&&(ke=!0),ke};M.__private__.setDefaultPathOperation=M.setDefaultPathOperation=function(X){return _a(X)&&(b=X),this};var ja=M.__private__.getStyle=M.getStyle=function(X){var ke=b;switch(X){case"D":case"S":ke="S";break;case"F":ke="f";break;case"FD":case"DF":ke="B";break;case"f":case"f*":case"B":case"B*":ke=X}return ke},Ra=M.close=function(){return Re("h"),this};M.stroke=function(){return Re("S"),this},M.fill=function(X){return aa("f",X),this},M.fillEvenOdd=function(X){return aa("f*",X),this},M.fillStroke=function(X){return aa("B",X),this},M.fillStrokeEvenOdd=function(X){return aa("B*",X),this};var aa=function(X,ke){ss(ke)==="object"?ni(ke,X):Re(X)},tr=function(X){X===null||be===te.ADVANCED&&X===void 0||(X=ja(X),Re(X))};function ti(X,ke,Bt,Ht,sn){var Dn=new Gy(ke||this.boundingBox,Bt||this.xStep,Ht||this.yStep,this.gState,sn||this.matrix);Dn.stream=this.stream;var Zn=X+"$$"+this.cloneIndex+++"$$";return ot(Zn,Dn),Dn}var ni=function(X,ke){var Bt=Jr[X.key],Ht=Ti[Bt];if(Ht instanceof Jm)Re("q"),Re(Ws(ke)),Ht.gState&&M.setGState(Ht.gState),Re(X.matrix.toString()+" cm"),Re("/"+Bt+" sh"),Re("Q");else if(Ht instanceof Gy){var sn=new Ce(1,0,0,-1,0,Zs());X.matrix&&(sn=sn.multiply(X.matrix||dt),Bt=ti.call(Ht,X.key,X.boundingBox,X.xStep,X.yStep,sn).id),Re("q"),Re("/Pattern cs"),Re("/"+Bt+" scn"),Ht.gState&&M.setGState(Ht.gState),Re(ke),Re("Q")}},Ws=function(X){switch(X){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Yo=M.moveTo=function(X,ke){return Re(Ae(le(X))+" "+Ae(lt(ke))+" m"),this},$r=M.lineTo=function(X,ke){return Re(Ae(le(X))+" "+Ae(lt(ke))+" l"),this},al=M.curveTo=function(X,ke,Bt,Ht,sn,Dn){return Re([Ae(le(X)),Ae(lt(ke)),Ae(le(Bt)),Ae(lt(Ht)),Ae(le(sn)),Ae(lt(Dn)),"c"].join(" ")),this};M.__private__.line=M.line=function(X,ke,Bt,Ht,sn){if(isNaN(X)||isNaN(ke)||isNaN(Bt)||isNaN(Ht)||!_a(sn))throw new Error("Invalid arguments passed to jsPDF.line");return be===te.COMPAT?this.lines([[Bt-X,Ht-ke]],X,ke,[1,1],sn||"S"):this.lines([[Bt-X,Ht-ke]],X,ke,[1,1]).stroke()},M.__private__.lines=M.lines=function(X,ke,Bt,Ht,sn,Dn){var Zn,xr,N,ae,fe,Le,an,Qt,nr,di,ir,Ai;if(typeof X=="number"&&(Ai=Bt,Bt=ke,ke=X,X=Ai),Ht=Ht||[1,1],Dn=Dn||!1,isNaN(ke)||isNaN(Bt)||!Array.isArray(X)||!Array.isArray(Ht)||!_a(sn)||typeof Dn!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Yo(ke,Bt),Zn=Ht[0],xr=Ht[1],ae=X.length,di=ke,ir=Bt,N=0;N<ae;N++)(fe=X[N]).length===2?(di=fe[0]*Zn+di,ir=fe[1]*xr+ir,$r(di,ir)):(Le=fe[0]*Zn+di,an=fe[1]*xr+ir,Qt=fe[2]*Zn+di,nr=fe[3]*xr+ir,di=fe[4]*Zn+di,ir=fe[5]*xr+ir,al(Le,an,Qt,nr,di,ir));return Dn&&Ra(),tr(sn),this},M.path=function(X){for(var ke=0;ke<X.length;ke++){var Bt=X[ke],Ht=Bt.c;switch(Bt.op){case"m":Yo(Ht[0],Ht[1]);break;case"l":$r(Ht[0],Ht[1]);break;case"c":al.apply(this,Ht);break;case"h":Ra()}}return this},M.__private__.rect=M.rect=function(X,ke,Bt,Ht,sn){if(isNaN(X)||isNaN(ke)||isNaN(Bt)||isNaN(Ht)||!_a(sn))throw new Error("Invalid arguments passed to jsPDF.rect");return be===te.COMPAT&&(Ht=-Ht),Re([Ae(le(X)),Ae(lt(ke)),Ae(le(Bt)),Ae(le(Ht)),"re"].join(" ")),tr(sn),this},M.__private__.triangle=M.triangle=function(X,ke,Bt,Ht,sn,Dn,Zn){if(isNaN(X)||isNaN(ke)||isNaN(Bt)||isNaN(Ht)||isNaN(sn)||isNaN(Dn)||!_a(Zn))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Bt-X,Ht-ke],[sn-Bt,Dn-Ht],[X-sn,ke-Dn]],X,ke,[1,1],Zn,!0),this},M.__private__.roundedRect=M.roundedRect=function(X,ke,Bt,Ht,sn,Dn,Zn){if(isNaN(X)||isNaN(ke)||isNaN(Bt)||isNaN(Ht)||isNaN(sn)||isNaN(Dn)||!_a(Zn))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var xr=4/3*(Math.SQRT2-1);return sn=Math.min(sn,.5*Bt),Dn=Math.min(Dn,.5*Ht),this.lines([[Bt-2*sn,0],[sn*xr,0,sn,Dn-Dn*xr,sn,Dn],[0,Ht-2*Dn],[0,Dn*xr,-sn*xr,Dn,-sn,Dn],[2*sn-Bt,0],[-sn*xr,0,-sn,-Dn*xr,-sn,-Dn],[0,2*Dn-Ht],[0,-Dn*xr,sn*xr,-Dn,sn,-Dn]],X+sn,ke,[1,1],Zn,!0),this},M.__private__.ellipse=M.ellipse=function(X,ke,Bt,Ht,sn){if(isNaN(X)||isNaN(ke)||isNaN(Bt)||isNaN(Ht)||!_a(sn))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Dn=4/3*(Math.SQRT2-1)*Bt,Zn=4/3*(Math.SQRT2-1)*Ht;return Yo(X+Bt,ke),al(X+Bt,ke-Zn,X+Dn,ke-Ht,X,ke-Ht),al(X-Dn,ke-Ht,X-Bt,ke-Zn,X-Bt,ke),al(X-Bt,ke+Zn,X-Dn,ke+Ht,X,ke+Ht),al(X+Dn,ke+Ht,X+Bt,ke+Zn,X+Bt,ke),tr(sn),this},M.__private__.circle=M.circle=function(X,ke,Bt,Ht){if(isNaN(X)||isNaN(ke)||isNaN(Bt)||!_a(Ht))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(X,ke,Bt,Bt,Ht)},M.setFont=function(X,ke,Bt){return Bt&&(ke=Ie(ke,Bt)),Ir=Qc(X,ke,{disableWarning:!1}),this};var jl=M.__private__.getFont=M.getFont=function(){return Fi[Qc.apply(M,arguments)]};M.__private__.getFontList=M.getFontList=function(){var X,ke,Bt={};for(X in pi)if(pi.hasOwnProperty(X))for(ke in Bt[X]=[],pi[X])pi[X].hasOwnProperty(ke)&&Bt[X].push(ke);return Bt},M.addFont=function(X,ke,Bt,Ht,sn){var Dn=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Dn.indexOf(arguments[3])!==-1?sn=arguments[3]:arguments[3]&&Dn.indexOf(arguments[3])==-1&&(Bt=Ie(Bt,Ht)),sn=sn||"Identity-H",sa.call(this,X,ke,Bt,sn)};var Gi,Fs=t.lineWidth||.200025,uo=M.__private__.getLineWidth=M.getLineWidth=function(){return Fs},Zu=M.__private__.setLineWidth=M.setLineWidth=function(X){return Fs=X,Re(Ae(le(X))+" w"),this};M.__private__.setLineDash=gi.API.setLineDash=gi.API.setLineDashPattern=function(X,ke){if(X=X||[],ke=ke||0,isNaN(ke)||!Array.isArray(X))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return X=X.map(function(Bt){return Ae(le(Bt))}).join(" "),ke=Ae(le(ke)),Re("["+X+"] "+ke+" d"),this};var $l=M.__private__.getLineHeight=M.getLineHeight=function(){return Jt*Gi};M.__private__.getLineHeight=M.getLineHeight=function(){return Jt*Gi};var Gl=M.__private__.setLineHeightFactor=M.setLineHeightFactor=function(X){return typeof(X=X||1.15)=="number"&&(Gi=X),this},la=M.__private__.getLineHeightFactor=M.getLineHeightFactor=function(){return Gi};Gl(t.lineHeight);var ka=M.__private__.getHorizontalCoordinate=function(X){return le(X)},yo=M.__private__.getVerticalCoordinate=function(X){return be===te.ADVANCED?X:Gr[$e].mediaBox.topRightY-Gr[$e].mediaBox.bottomLeftY-le(X)},Rs=M.__private__.getHorizontalCoordinateString=M.getHorizontalCoordinateString=function(X){return Ae(ka(X))},us=M.__private__.getVerticalCoordinateString=M.getVerticalCoordinateString=function(X){return Ae(yo(X))},ca=t.strokeColor||"0 G";M.__private__.getStrokeColor=M.getDrawColor=function(){return En(ca)},M.__private__.setStrokeColor=M.setDrawColor=function(X,ke,Bt,Ht){return ca=zn({ch1:X,ch2:ke,ch3:Bt,ch4:Ht,pdfColorType:"draw",precision:2}),Re(ca),this};var $a=t.fillColor||"0 g";M.__private__.getFillColor=M.getFillColor=function(){return En($a)},M.__private__.setFillColor=M.setFillColor=function(X,ke,Bt,Ht){return $a=zn({ch1:X,ch2:ke,ch3:Bt,ch4:Ht,pdfColorType:"fill",precision:2}),Re($a),this};var no=t.textColor||"0 g",xs=M.__private__.getTextColor=M.getTextColor=function(){return En(no)};M.__private__.setTextColor=M.setTextColor=function(X,ke,Bt,Ht){return no=zn({ch1:X,ch2:ke,ch3:Bt,ch4:Ht,pdfColorType:"text",precision:3}),this};var Xs=t.charSpace,qo=M.__private__.getCharSpace=M.getCharSpace=function(){return parseFloat(Xs||0)};M.__private__.setCharSpace=M.setCharSpace=function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Xs=X,this};var wu=0;M.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},M.__private__.setLineCap=M.setLineCap=function(X){var ke=M.CapJoinStyles[X];if(ke===void 0)throw new Error("Line cap style of '"+X+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return wu=ke,Re(ke+" J"),this};var ua=0;M.__private__.setLineJoin=M.setLineJoin=function(X){var ke=M.CapJoinStyles[X];if(ke===void 0)throw new Error("Line join style of '"+X+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ua=ke,Re(ke+" j"),this},M.__private__.setLineMiterLimit=M.__private__.setMiterLimit=M.setLineMiterLimit=M.setMiterLimit=function(X){if(X=X||0,isNaN(X))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Re(Ae(le(X))+" M"),this},M.GState=$C,M.setGState=function(X){(X=typeof X=="string"?Xi[Ns[X]]:Ga(null,X)).equals(ns)||(Re("/"+X.id+" gs"),ns=X)};var Ga=function(X,ke){if(!X||!Ns[X]){var Bt=!1;for(var Ht in Xi)if(Xi.hasOwnProperty(Ht)&&Xi[Ht].equals(ke)){Bt=!0;break}if(Bt)ke=Xi[Ht];else{var sn="GS"+(Object.keys(Xi).length+1).toString(10);Xi[sn]=ke,ke.id=sn}return X&&(Ns[X]=ke.id),Ni.publish("addGState",ke),ke}};M.addGState=function(X,ke){return Ga(X,ke),this},M.saveGraphicsState=function(){return Re("q"),Wi.push({key:Ir,size:Jt,color:no}),this},M.restoreGraphicsState=function(){Re("Q");var X=Wi.pop();return Ir=X.key,Jt=X.size,no=X.color,ns=null,this},M.setCurrentTransformationMatrix=function(X){return Re(X.toString()+" cm"),this},M.comment=function(X){return Re("#"+X),this};var Ka=function(X,ke){var Bt=X||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Bt},set:function(Dn){isNaN(Dn)||(Bt=parseFloat(Dn))}});var Ht=ke||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ht},set:function(Dn){isNaN(Dn)||(Ht=parseFloat(Dn))}});var sn="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return sn},set:function(Dn){sn=Dn.toString()}}),this},ll=function(X,ke,Bt,Ht){Ka.call(this,X,ke),this.type="rect";var sn=Bt||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return sn},set:function(Zn){isNaN(Zn)||(sn=parseFloat(Zn))}});var Dn=Ht||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Dn},set:function(Zn){isNaN(Zn)||(Dn=parseFloat(Zn))}}),this},Kl=function(){this.page=lo,this.currentPage=$e,this.pages=De.slice(0),this.pagesContext=Gr.slice(0),this.x=to,this.y=xi,this.matrix=No,this.width=gs($e),this.height=Zs($e),this.outputDestination=Te,this.id="",this.objectNumber=-1};Kl.prototype.restore=function(){lo=this.page,$e=this.currentPage,Gr=this.pagesContext,De=this.pages,to=this.x,xi=this.y,No=this.matrix,Yu($e,this.width),xu($e,this.height),Te=this.outputDestination};var Ma=function(X,ke,Bt,Ht,sn){we.push(new Kl),lo=$e=0,De=[],to=X,xi=ke,No=sn,qs([Bt,Ht])},xd=function(X){if(jt[X])we.pop().restore();else{var ke=new Kl,Bt="Xo"+(Object.keys(Zo).length+1).toString(10);ke.id=Bt,jt[X]=Bt,Zo[Bt]=ke,Ni.publish("addFormObject",ke),we.pop().restore()}};for(var ql in M.beginFormObject=function(X,ke,Bt,Ht,sn){return Ma(X,ke,Bt,Ht,sn),this},M.endFormObject=function(X){return xd(X),this},M.doFormObject=function(X,ke){var Bt=Zo[jt[X]];return Re("q"),Re(ke.toString()+" cm"),Re("/"+Bt.id+" Do"),Re("Q"),this},M.getFormObject=function(X){var ke=Zo[jt[X]];return{x:ke.x,y:ke.y,width:ke.width,height:ke.height,matrix:ke.matrix}},M.save=function(X,ke){return X=X||"generated.pdf",(ke=ke||{}).returnPromise=ke.returnPromise||!1,ke.returnPromise===!1?(Gm(wl(bl()),X),typeof Gm.unload=="function"&&yi.setTimeout&&setTimeout(Gm.unload,911),this):new Promise(function(Bt,Ht){try{var sn=Gm(wl(bl()),X);typeof Gm.unload=="function"&&yi.setTimeout&&setTimeout(Gm.unload,911),Bt(sn)}catch(Dn){Ht(Dn.message)}})},gi.API)gi.API.hasOwnProperty(ql)&&(ql==="events"&&gi.API.events.length?function(X,ke){var Bt,Ht,sn;for(sn=ke.length-1;sn!==-1;sn--)Bt=ke[sn][0],Ht=ke[sn][1],X.subscribe.apply(X,[Bt].concat(typeof Ht=="function"?[Ht]:Ht))}(Ni,gi.API.events):M[ql]=gi.API[ql]);var gs=M.getPageWidth=function(X){return(Gr[X=X||$e].mediaBox.topRightX-Gr[X].mediaBox.bottomLeftX)/pr},Yu=M.setPageWidth=function(X,ke){Gr[X].mediaBox.topRightX=ke*pr+Gr[X].mediaBox.bottomLeftX},Zs=M.getPageHeight=function(X){return(Gr[X=X||$e].mediaBox.topRightY-Gr[X].mediaBox.bottomLeftY)/pr},xu=M.setPageHeight=function(X,ke){Gr[X].mediaBox.topRightY=ke*pr+Gr[X].mediaBox.bottomLeftY};return M.internal={pdfEscape:go,getStyle:ja,getFont:jl,getFontSize:fn,getCharSpace:qo,getTextColor:xs,getLineHeight:$l,getLineHeightFactor:la,getLineWidth:uo,write:Yt,getHorizontalCoordinate:ka,getVerticalCoordinate:yo,getCoordinateString:Rs,getVerticalCoordinateString:us,collections:{},newObject:wt,newAdditionalObject:Gt,newObjectDeferred:Vt,newObjectDeferredBegin:St,getFilters:Vn,putStream:gr,events:Ni,scaleFactor:pr,pageSize:{getWidth:function(){return gs($e)},setWidth:function(X){Yu($e,X)},getHeight:function(){return Zs($e)},setHeight:function(X){xu($e,X)}},encryptionOptions:E,encryption:Ko,getEncryptor:_i,output:$c,getNumberOfPages:co,pages:De,out:Re,f2:ye,f3:se,getPageInfo:Dh,getPageInfoByObjId:$n,getCurrentPageInfo:sl,getPDFVersion:q,Point:Ka,Rectangle:ll,Matrix:Ce,hasHotfix:ei},Object.defineProperty(M.internal.pageSize,"width",{get:function(){return gs($e)},set:function(X){Yu($e,X)},enumerable:!0,configurable:!0}),Object.defineProperty(M.internal.pageSize,"height",{get:function(){return Zs($e)},set:function(X){xu($e,X)},enumerable:!0,configurable:!0}),La.call(M,zt),Ir="F1",wc(o,n),Ni.publish("initialized"),M}Uy.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Uy.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Uy.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Uy.prototype.processOwnerPassword=function(t,e){return YI(ZI(e).substr(0,5),t)},Uy.prototype.encryptor=function(t,e){var n=ZI(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return YI(n,r)}},$C.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||ss(t)!==ss(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},gi.API={events:[]},gi.version="2.5.2";var pa=gi.API,UP=1,Dg=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},vy=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ri=function(t){return t.toFixed(2)},pp=function(t){return t.toFixed(5)};pa.__acroform__={};var yu=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},g3=function(t){return t*UP},Xd=function(t){var e=new fH,n=zr.internal.getHeight(t)||0,r=zr.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Ri(r)),Number(Ri(n))],e},cwe=pa.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},uwe=pa.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},hwe=pa.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Sa=pa.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return hwe(t,e-1)},Ta=pa.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return cwe(t,e-1)},Ia=pa.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return uwe(t,e-1)},dwe=pa.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,o=t[0],l=t[1],h=t[2],p=t[3],i={};return i.lowerLeft_X=n(o)||0,i.lowerLeft_Y=r(l+p)||0,i.upperRight_X=n(o+h)||0,i.upperRight_Y=r(l)||0,[Number(Ri(i.lowerLeft_X)),Number(Ri(i.lowerLeft_Y)),Number(Ri(i.upperRight_X)),Number(Ri(i.upperRight_Y))]},fwe=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=JI(t,n),o=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+o+" "+Ri(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var l=Xd(t);return l.scope=t.scope,l.stream=e.join(`
`),l}},JI=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},o=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");o=t.multiline?o.map(function(se){return se.split(`
`)}):o.map(function(se){return[se]});var l=n,h=zr.internal.getHeight(t)||0;h=h<0?-h:h;var p=zr.internal.getWidth(t)||0;p=p<0?-p:p;var i=function(se,le,ge){if(se+1<o.length){var lt=le+" "+o[se+1][0];return Ww(lt,t,ge).width<=p-4}return!1};l++;e:for(;l>0;){e="",l--;var b,E,I=Ww("3",t,l).height,O=t.multiline?h-l:(h-I)/2,M=O+=2,G=0,q=0,Z=0;if(l<=0){e=`(...) Tj
`,e+="% Width of Text: "+Ww(e,t,l=12).width+", FieldWidth:"+p+`
`;break}for(var Y="",te=0,be=0;be<o.length;be++)if(o.hasOwnProperty(be)){var Pe=!1;if(o[be].length!==1&&Z!==o[be].length-1){if((I+2)*(te+2)+2>h)continue e;Y+=o[be][Z],Pe=!0,q=be,be--}else{Y=(Y+=o[be][Z]+" ").substr(Y.length-1)==" "?Y.substr(0,Y.length-1):Y;var Se=parseInt(be),Ie=i(Se,Y,l),Ae=be>=o.length-1;if(Ie&&!Ae){Y+=" ",Z=0;continue}if(Ie||Ae){if(Ae)q=Se;else if(t.multiline&&(I+2)*(te+2)+2>h)continue e}else{if(!t.multiline||(I+2)*(te+2)+2>h)continue e;q=Se}}for(var ne="",ue=G;ue<=q;ue++){var ye=o[ue];if(t.multiline){if(ue===q){ne+=ye[Z]+" ",Z=(Z+1)%ye.length;continue}if(ue===G){ne+=ye[ye.length-1]+" ";continue}}ne+=ye[0]+" "}switch(ne=ne.substr(ne.length-1)==" "?ne.substr(0,ne.length-1):ne,E=Ww(ne,t,l).width,t.textAlign){case"right":b=p-E-2;break;case"center":b=(p-E)/2;break;case"left":default:b=2}e+=Ri(b)+" "+Ri(M)+` Td
`,e+="("+Dg(ne)+`) Tj
`,e+=-Ri(b)+` 0 Td
`,M=-(l+2),E=0,G=Pe?q:q+1,te++,Y=""}break}return r.text=e,r.fontSize=l,r},Ww=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),o=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:o}},Awe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},pwe=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},mwe=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,o=t[n];e.internal.newObjectDeferredBegin(o.objId,!0),ss(o)==="object"&&typeof o.putStream=="function"&&o.putStream(),delete t[r]}},gwe=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(_d.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Awe)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");UP=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new AH,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in r)if(r.hasOwnProperty(o)){var l=r[o];l.objId=void 0,l.hasAnnotation&&pwe(l,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,o){var l=!r;for(var h in r||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(h)){var p=r[h],i=[],b=p.Rect;if(p.Rect&&(p.Rect=dwe(p.Rect,o)),o.internal.newObjectDeferredBegin(p.objId,!0),p.DA=zr.createDefaultAppearanceStream(p),ss(p)==="object"&&typeof p.getKeyValueListForStream=="function"&&(i=p.getKeyValueListForStream()),p.Rect=b,p.hasAppearanceStream&&!p.appearanceStreamContent){var E=fwe(p);i.push({key:"AP",value:"<</N "+E+">>"}),o.internal.acroformPlugin.xForms.push(E)}if(p.appearanceStreamContent){var I="";for(var O in p.appearanceStreamContent)if(p.appearanceStreamContent.hasOwnProperty(O)){var M=p.appearanceStreamContent[O];if(I+="/"+O+" ",I+="<<",Object.keys(M).length>=1||Array.isArray(M)){for(var h in M)if(M.hasOwnProperty(h)){var G=M[h];typeof G=="function"&&(G=G.call(o,p)),I+="/"+h+" "+G+" ",o.internal.acroformPlugin.xForms.indexOf(G)>=0||o.internal.acroformPlugin.xForms.push(G)}}else typeof(G=M)=="function"&&(G=G.call(o,p)),I+="/"+h+" "+G,o.internal.acroformPlugin.xForms.indexOf(G)>=0||o.internal.acroformPlugin.xForms.push(G);I+=">>"}i.push({key:"AP",value:`<<
`+I+">>"})}o.internal.putStream({additionalKeyValues:i,objectId:p.objId}),o.internal.out("endobj")}l&&mwe(o.internal.acroformPlugin.xForms,o)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},dH=pa.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(h){return h};if(Array.isArray(t)){for(var o="[",l=0;l<t.length;l++)switch(l!==0&&(o+=" "),ss(t[l])){case"boolean":case"number":case"object":o+=t[l].toString();break;case"string":t[l].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),o+="("+Dg(r(t[l].toString()))+")"):o+=t[l].toString()}return o+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},$2=function(t,e,n){var r=function(o){return o};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Dg(r(t))+")"},ef=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ef.prototype.toString=function(){return this.objId+" 0 R"},ef.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},ef.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(l){return l!="content"&&l!="appearanceStreamContent"&&l!="scope"&&l!="objId"&&l.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],o=this[r];o&&(Array.isArray(o)?t.push({key:r,value:dH(o,this.objId,this.scope)}):o instanceof ef?(o.scope=this.scope,t.push({key:r,value:o.objId+" 0 R"})):typeof o!="function"&&t.push({key:r,value:o}))}return t};var fH=function(){ef.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};yu(fH,ef);var AH=function(){ef.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Dg(n(t))+")"}},set:function(n){t=n}})};yu(AH,ef);var _d=function t(){ef.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(Y){if(isNaN(Y))throw new Error('Invalid value "'+Y+'" for attribute F supplied.');e=Y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Sa(e,3)},set:function(Y){Y?this.F=Ta(e,3):this.F=Ia(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(Y){if(isNaN(Y))throw new Error('Invalid value "'+Y+'" for attribute Ff supplied.');n=Y}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(Y){r=Y!==void 0?Y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(Y){r[0]=Y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(Y){r[1]=Y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(Y){r[2]=Y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(Y){r[3]=Y}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(Y){switch(Y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=Y;break;default:throw new Error('Invalid value "'+Y+'" for attribute FT supplied.')}}});var l=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!l||l.length<1){if(this instanceof GC)return;l="FieldObject"+t.FieldNum++}var Y=function(te){return te};return this.scope&&(Y=this.scope.internal.getEncryptor(this.objId)),"("+Dg(Y(l))+")"},set:function(Y){l=Y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return l},set:function(Y){l=Y}});var h="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return h},set:function(Y){h=Y}});var p="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return p},set:function(Y){p=Y}});var i=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return i},set:function(Y){i=Y}});var b=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return b===void 0?50/UP:b},set:function(Y){b=Y}});var E="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return E},set:function(Y){E=Y}});var I="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!I||this instanceof GC||this instanceof hg))return $2(I,this.objId,this.scope)},set:function(Y){Y=Y.toString(),I=Y}});var O=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(O)return this instanceof yl?O:$2(O,this.objId,this.scope)},set:function(Y){Y=Y.toString(),O=this instanceof yl?Y:Y.substr(0,1)==="("?vy(Y.substr(1,Y.length-2)):vy(Y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof yl?vy(O.substr(1,O.length-1)):O},set:function(Y){Y=Y.toString(),O=this instanceof yl?"/"+Y:Y}});var M=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(M)return M},set:function(Y){this.V=Y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(M)return this instanceof yl?M:$2(M,this.objId,this.scope)},set:function(Y){Y=Y.toString(),M=this instanceof yl?Y:Y.substr(0,1)==="("?vy(Y.substr(1,Y.length-2)):vy(Y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof yl?vy(M.substr(1,M.length-1)):M},set:function(Y){Y=Y.toString(),M=this instanceof yl?"/"+Y:Y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var G,q=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return q},set:function(Y){Y=!!Y,q=Y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(G)return G},set:function(Y){G=Y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,1)},set:function(Y){Y?this.Ff=Ta(this.Ff,1):this.Ff=Ia(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,2)},set:function(Y){Y?this.Ff=Ta(this.Ff,2):this.Ff=Ia(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,3)},set:function(Y){Y?this.Ff=Ta(this.Ff,3):this.Ff=Ia(this.Ff,3)}});var Z=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(Z!==null)return Z},set:function(Y){if([0,1,2].indexOf(Y)===-1)throw new Error('Invalid value "'+Y+'" for attribute Q supplied.');Z=Y}}),Object.defineProperty(this,"textAlign",{get:function(){var Y;switch(Z){case 0:default:Y="left";break;case 1:Y="center";break;case 2:Y="right"}return Y},configurable:!0,enumerable:!0,set:function(Y){switch(Y){case"right":case 2:Z=2;break;case"center":case 1:Z=1;break;case"left":case 0:default:Z=0}}})};yu(_d,ef);var i_=function(){_d.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return dH(e,this.objId,this.scope)},set:function(n){var r,o;o=[],typeof(r=n)=="string"&&(o=function(l,h,p){p||(p=1);for(var i,b=[];i=h.exec(l);)b.push(i[p]);return b}(r,/\((.*?)\)/g)),e=o}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,18)},set:function(n){n?this.Ff=Ta(this.Ff,18):this.Ff=Ia(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Ta(this.Ff,19):this.Ff=Ia(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,20)},set:function(n){n?(this.Ff=Ta(this.Ff,20),e.sort()):this.Ff=Ia(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,22)},set:function(n){n?this.Ff=Ta(this.Ff,22):this.Ff=Ia(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,23)},set:function(n){n?this.Ff=Ta(this.Ff,23):this.Ff=Ia(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,27)},set:function(n){n?this.Ff=Ta(this.Ff,27):this.Ff=Ia(this.Ff,27)}}),this.hasAppearanceStream=!1};yu(i_,_d);var o_=function(){i_.call(this),this.fontName="helvetica",this.combo=!1};yu(o_,i_);var s_=function(){o_.call(this),this.combo=!0};yu(s_,o_);var qx=function(){s_.call(this),this.edit=!0};yu(qx,s_);var yl=function(){_d.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,15)},set:function(n){n?this.Ff=Ta(this.Ff,15):this.Ff=Ia(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,16)},set:function(n){n?this.Ff=Ta(this.Ff,16):this.Ff=Ia(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,17)},set:function(n){n?this.Ff=Ta(this.Ff,17):this.Ff=Ia(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,26)},set:function(n){n?this.Ff=Ta(this.Ff,26):this.Ff=Ia(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(l){return l};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,o=[];for(r in o.push("<<"),e)o.push("/"+r+" ("+Dg(n(e[r]))+")");return o.push(">>"),o.join(`
`)}},set:function(n){ss(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};yu(yl,_d);var Wx=function(){yl.call(this),this.pushButton=!0};yu(Wx,yl);var a_=function(){yl.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};yu(a_,yl);var GC=function(){var t,e;_d.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(o){t=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(o){e=o}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(p){return p};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var l,h=[];for(l in h.push("<<"),r)h.push("/"+l+" ("+Dg(o(r[l]))+")");return h.push(">>"),h.join(`
`)},set:function(o){ss(o)==="object"&&(r=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(o){typeof o=="string"&&(r.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(o){n=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(o){n="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=zr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};yu(GC,_d),a_.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},a_.prototype.createOption=function(t){var e=new GC;return e.Parent=this,e.optionName=t,this.Kids.push(e),ywe.call(this.scope,e),e};var Xx=function(){yl.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=zr.CheckBox.createAppearanceStream()};yu(Xx,yl);var hg=function(){_d.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,13)},set:function(e){e?this.Ff=Ta(this.Ff,13):this.Ff=Ia(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,21)},set:function(e){e?this.Ff=Ta(this.Ff,21):this.Ff=Ia(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,23)},set:function(e){e?this.Ff=Ta(this.Ff,23):this.Ff=Ia(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,24)},set:function(e){e?this.Ff=Ta(this.Ff,24):this.Ff=Ia(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,25)},set:function(e){e?this.Ff=Ta(this.Ff,25):this.Ff=Ia(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,26)},set:function(e){e?this.Ff=Ta(this.Ff,26):this.Ff=Ia(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};yu(hg,_d);var Zx=function(){hg.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,14)},set:function(t){t?this.Ff=Ta(this.Ff,14):this.Ff=Ia(this.Ff,14)}}),this.password=!0};yu(Zx,hg);var zr={CheckBox:{createAppearanceStream:function(){return{N:{On:zr.CheckBox.YesNormal},D:{On:zr.CheckBox.YesPushDown,Off:zr.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Xd(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,o=t.scope.__private__.encodeColorString(t.color),l=JI(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Ri(zr.internal.getWidth(t))+" "+Ri(zr.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Ri(l.fontSize)+" Tf "+o),n.push("BT"),n.push(l.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=Xd(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),o=[],l=zr.internal.getHeight(t),h=zr.internal.getWidth(t),p=JI(t,t.caption);return o.push("1 g"),o.push("0 0 "+Ri(h)+" "+Ri(l)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+Ri(h-1)+" "+Ri(l-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+n+" "+Ri(p.fontSize)+" Tf "+r),o.push(p.text),o.push("ET"),o.push("Q"),e.stream=o.join(`
`),e},OffPushDown:function(t){var e=Xd(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Ri(zr.internal.getWidth(t))+" "+Ri(zr.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:zr.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=zr.RadioButton.Circle.YesNormal,e.D[t]=zr.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Xd(t);e.scope=t.scope;var n=[],r=zr.internal.getWidth(t)<=zr.internal.getHeight(t)?zr.internal.getWidth(t)/4:zr.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var o=zr.internal.Bezier_C,l=Number((r*o).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+pp(zr.internal.getWidth(t)/2)+" "+pp(zr.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+l+" "+l+" "+r+" 0 "+r+" c"),n.push("-"+l+" "+r+" -"+r+" "+l+" -"+r+" 0 c"),n.push("-"+r+" -"+l+" -"+l+" -"+r+" 0 -"+r+" c"),n.push(l+" -"+r+" "+r+" -"+l+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Xd(t);e.scope=t.scope;var n=[],r=zr.internal.getWidth(t)<=zr.internal.getHeight(t)?zr.internal.getWidth(t)/4:zr.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var o=Number((2*r).toFixed(5)),l=Number((o*zr.internal.Bezier_C).toFixed(5)),h=Number((r*zr.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+pp(zr.internal.getWidth(t)/2)+" "+pp(zr.internal.getHeight(t)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+l+" "+l+" "+o+" 0 "+o+" c"),n.push("-"+l+" "+o+" -"+o+" "+l+" -"+o+" 0 c"),n.push("-"+o+" -"+l+" -"+l+" -"+o+" 0 -"+o+" c"),n.push(l+" -"+o+" "+o+" -"+l+" "+o+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+pp(zr.internal.getWidth(t)/2)+" "+pp(zr.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+h+" "+h+" "+r+" 0 "+r+" c"),n.push("-"+h+" "+r+" -"+r+" "+h+" -"+r+" 0 c"),n.push("-"+r+" -"+h+" -"+h+" -"+r+" 0 -"+r+" c"),n.push(h+" -"+r+" "+r+" -"+h+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Xd(t);e.scope=t.scope;var n=[],r=zr.internal.getWidth(t)<=zr.internal.getHeight(t)?zr.internal.getWidth(t)/4:zr.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var o=Number((2*r).toFixed(5)),l=Number((o*zr.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+pp(zr.internal.getWidth(t)/2)+" "+pp(zr.internal.getHeight(t)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+l+" "+l+" "+o+" 0 "+o+" c"),n.push("-"+l+" "+o+" -"+o+" "+l+" -"+o+" 0 c"),n.push("-"+o+" -"+l+" -"+l+" -"+o+" 0 -"+o+" c"),n.push(l+" -"+o+" "+o+" -"+l+" "+o+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:zr.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=zr.RadioButton.Cross.YesNormal,e.D[t]=zr.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Xd(t);e.scope=t.scope;var n=[],r=zr.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Ri(zr.internal.getWidth(t)-2)+" "+Ri(zr.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Ri(r.x1.x)+" "+Ri(r.x1.y)+" m"),n.push(Ri(r.x2.x)+" "+Ri(r.x2.y)+" l"),n.push(Ri(r.x4.x)+" "+Ri(r.x4.y)+" m"),n.push(Ri(r.x3.x)+" "+Ri(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Xd(t);e.scope=t.scope;var n=zr.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+Ri(zr.internal.getWidth(t))+" "+Ri(zr.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Ri(zr.internal.getWidth(t)-2)+" "+Ri(zr.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Ri(n.x1.x)+" "+Ri(n.x1.y)+" m"),r.push(Ri(n.x2.x)+" "+Ri(n.x2.y)+" l"),r.push(Ri(n.x4.x)+" "+Ri(n.x4.y)+" m"),r.push(Ri(n.x3.x)+" "+Ri(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Xd(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Ri(zr.internal.getWidth(t))+" "+Ri(zr.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};zr.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=zr.internal.getWidth(t),n=zr.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},zr.internal.getWidth=function(t){var e=0;return ss(t)==="object"&&(e=g3(t.Rect[2])),e},zr.internal.getHeight=function(t){var e=0;return ss(t)==="object"&&(e=g3(t.Rect[3])),e};var ywe=pa.addField=function(t){if(gwe(this,t),!(t instanceof _d))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};pa.AcroFormChoiceField=i_,pa.AcroFormListBox=o_,pa.AcroFormComboBox=s_,pa.AcroFormEditBox=qx,pa.AcroFormButton=yl,pa.AcroFormPushButton=Wx,pa.AcroFormRadioButton=a_,pa.AcroFormCheckBox=Xx,pa.AcroFormTextField=hg,pa.AcroFormPasswordField=Zx,pa.AcroFormAppearance=zr,pa.AcroForm={ChoiceField:i_,ListBox:o_,ComboBox:s_,EditBox:qx,Button:yl,PushButton:Wx,RadioButton:a_,CheckBox:Xx,TextField:hg,PasswordField:Zx,Appearance:zr},gi.AcroForm={ChoiceField:i_,ListBox:o_,ComboBox:s_,EditBox:qx,Button:yl,PushButton:Wx,RadioButton:a_,CheckBox:Xx,TextField:hg,PasswordField:Zx,Appearance:zr};function pH(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(se,le){var ge,lt,Ot,gt,Tt,Mt=e;if((le=le||e)==="RGBA"||se.data!==void 0&&se.data instanceof Uint8ClampedArray&&"height"in se&&"width"in se)return"RGBA";if(Ie(se))for(Tt in n)for(Ot=n[Tt],ge=0;ge<Ot.length;ge+=1){for(gt=!0,lt=0;lt<Ot[ge].length;lt+=1)if(Ot[ge][lt]!==void 0&&Ot[ge][lt]!==se[lt]){gt=!1;break}if(gt===!0){Mt=Tt;break}}else for(Tt in n)for(Ot=n[Tt],ge=0;ge<Ot.length;ge+=1){for(gt=!0,lt=0;lt<Ot[ge].length;lt+=1)if(Ot[ge][lt]!==void 0&&Ot[ge][lt]!==se.charCodeAt(lt)){gt=!1;break}if(gt===!0){Mt=Tt;break}}return Mt===e&&le!==e&&(Mt=le),Mt},o=function se(le){for(var ge=this.internal.write,lt=this.internal.putStream,Ot=(0,this.internal.getFilters)();Ot.indexOf("FlateEncode")!==-1;)Ot.splice(Ot.indexOf("FlateEncode"),1);le.objectId=this.internal.newObject();var gt=[];if(gt.push({key:"Type",value:"/XObject"}),gt.push({key:"Subtype",value:"/Image"}),gt.push({key:"Width",value:le.width}),gt.push({key:"Height",value:le.height}),le.colorSpace===Z.INDEXED?gt.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(le.palette.length/3-1)+" "+("sMask"in le&&le.sMask!==void 0?le.objectId+2:le.objectId+1)+" 0 R]"}):(gt.push({key:"ColorSpace",value:"/"+le.colorSpace}),le.colorSpace===Z.DEVICE_CMYK&&gt.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),gt.push({key:"BitsPerComponent",value:le.bitsPerComponent}),"decodeParameters"in le&&le.decodeParameters!==void 0&&gt.push({key:"DecodeParms",value:"<<"+le.decodeParameters+">>"}),"transparency"in le&&Array.isArray(le.transparency)){for(var Tt="",Mt=0,on=le.transparency.length;Mt<on;Mt++)Tt+=le.transparency[Mt]+" "+le.transparency[Mt]+" ";gt.push({key:"Mask",value:"["+Tt+"]"})}le.sMask!==void 0&&gt.push({key:"SMask",value:le.objectId+1+" 0 R"});var Ut=le.filter!==void 0?["/"+le.filter]:void 0;if(lt({data:le.data,additionalKeyValues:gt,alreadyAppliedFilters:Ut,objectId:le.objectId}),ge("endobj"),"sMask"in le&&le.sMask!==void 0){var In="/Predictor "+le.predictor+" /Colors 1 /BitsPerComponent "+le.bitsPerComponent+" /Columns "+le.width,Ee={width:le.width,height:le.height,colorSpace:"DeviceGray",bitsPerComponent:le.bitsPerComponent,decodeParameters:In,data:le.sMask};"filter"in le&&(Ee.filter=le.filter),se.call(this,Ee)}if(le.colorSpace===Z.INDEXED){var $e=this.internal.newObject();lt({data:ne(new Uint8Array(le.palette)),objectId:$e}),ge("endobj")}},l=function(){var se=this.internal.collections.addImage_images;for(var le in se)o.call(this,se[le])},h=function(){var se,le=this.internal.collections.addImage_images,ge=this.internal.write;for(var lt in le)ge("/I"+(se=le[lt]).index,se.objectId,"0","R")},p=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",h))},i=function(){var se=this.internal.collections.addImage_images;return p.call(this),se},b=function(){return Object.keys(this.internal.collections.addImage_images).length},E=function(se){return typeof t["process"+se.toUpperCase()]=="function"},I=function(se){return ss(se)==="object"&&se.nodeType===1},O=function(se,le){if(se.nodeName==="IMG"&&se.hasAttribute("src")){var ge=""+se.getAttribute("src");if(ge.indexOf("data:image/")===0)return Kv(unescape(ge).split("base64,").pop());var lt=t.loadFile(ge,!0);if(lt!==void 0)return lt}if(se.nodeName==="CANVAS"){if(se.width===0||se.height===0)throw new Error("Given canvas must have data. Canvas width: "+se.width+", height: "+se.height);var Ot;switch(le){case"PNG":Ot="image/png";break;case"WEBP":Ot="image/webp";break;case"JPEG":case"JPG":default:Ot="image/jpeg"}return Kv(se.toDataURL(Ot,1).split("base64,").pop())}},M=function(se){var le=this.internal.collections.addImage_images;if(le){for(var ge in le)if(se===le[ge].alias)return le[ge]}},G=function(se,le,ge){return se||le||(se=-96,le=-96),se<0&&(se=-1*ge.width*72/se/this.internal.scaleFactor),le<0&&(le=-1*ge.height*72/le/this.internal.scaleFactor),se===0&&(se=le*ge.width/ge.height),le===0&&(le=se*ge.height/ge.width),[se,le]},q=function(se,le,ge,lt,Ot,gt){var Tt=G.call(this,ge,lt,Ot),Mt=this.internal.getCoordinateString,on=this.internal.getVerticalCoordinateString,Ut=i.call(this);if(ge=Tt[0],lt=Tt[1],Ut[Ot.index]=Ot,gt){gt*=Math.PI/180;var In=Math.cos(gt),Ee=Math.sin(gt),$e=function(vt){return vt.toFixed(4)},We=[$e(In),$e(Ee),$e(-1*Ee),$e(In),0,0,"cm"]}this.internal.write("q"),gt?(this.internal.write([1,"0","0",1,Mt(se),on(le+lt),"cm"].join(" ")),this.internal.write(We.join(" ")),this.internal.write([Mt(ge),"0","0",Mt(lt),"0","0","cm"].join(" "))):this.internal.write([Mt(ge),"0","0",Mt(lt),Mt(se),on(le+lt),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Ot.index+" Do"),this.internal.write("Q")},Z=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var Y=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},te=t.__addimage__.sHashCode=function(se){var le,ge,lt=0;if(typeof se=="string")for(ge=se.length,le=0;le<ge;le++)lt=(lt<<5)-lt+se.charCodeAt(le),lt|=0;else if(Ie(se))for(ge=se.byteLength/2,le=0;le<ge;le++)lt=(lt<<5)-lt+se[le],lt|=0;return lt},be=t.__addimage__.validateStringAsBase64=function(se){(se=se||"").toString().trim();var le=!0;return se.length===0&&(le=!1),se.length%4!=0&&(le=!1),/^[A-Za-z0-9+/]+$/.test(se.substr(0,se.length-2))===!1&&(le=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(se.substr(-2))===!1&&(le=!1),le},Pe=t.__addimage__.extractImageFromDataUrl=function(se){var le=(se=se||"").split("base64,"),ge=null;if(le.length===2){var lt=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(le[0]);Array.isArray(lt)&&(ge={mimeType:lt[1],charset:lt[2],data:le[1]})}return ge},Se=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(se){return Se()&&se instanceof ArrayBuffer};var Ie=t.__addimage__.isArrayBufferView=function(se){return Se()&&typeof Uint32Array<"u"&&(se instanceof Int8Array||se instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&se instanceof Uint8ClampedArray||se instanceof Int16Array||se instanceof Uint16Array||se instanceof Int32Array||se instanceof Uint32Array||se instanceof Float32Array||se instanceof Float64Array)},Ae=t.__addimage__.binaryStringToUint8Array=function(se){for(var le=se.length,ge=new Uint8Array(le),lt=0;lt<le;lt++)ge[lt]=se.charCodeAt(lt);return ge},ne=t.__addimage__.arrayBufferToBinaryString=function(se){for(var le="",ge=Ie(se)?se:new Uint8Array(se),lt=0;lt<ge.length;lt+=8192)le+=String.fromCharCode.apply(null,ge.subarray(lt,lt+8192));return le};t.addImage=function(){var se,le,ge,lt,Ot,gt,Tt,Mt,on;if(typeof arguments[1]=="number"?(le=e,ge=arguments[1],lt=arguments[2],Ot=arguments[3],gt=arguments[4],Tt=arguments[5],Mt=arguments[6],on=arguments[7]):(le=arguments[1],ge=arguments[2],lt=arguments[3],Ot=arguments[4],gt=arguments[5],Tt=arguments[6],Mt=arguments[7],on=arguments[8]),ss(se=arguments[0])==="object"&&!I(se)&&"imageData"in se){var Ut=se;se=Ut.imageData,le=Ut.format||le||e,ge=Ut.x||ge||0,lt=Ut.y||lt||0,Ot=Ut.w||Ut.width||Ot,gt=Ut.h||Ut.height||gt,Tt=Ut.alias||Tt,Mt=Ut.compression||Mt,on=Ut.rotation||Ut.angle||on}var In=this.internal.getFilters();if(Mt===void 0&&In.indexOf("FlateEncode")!==-1&&(Mt="SLOW"),isNaN(ge)||isNaN(lt))throw new Error("Invalid coordinates passed to jsPDF.addImage");p.call(this);var Ee=ue.call(this,se,le,Tt,Mt);return q.call(this,ge,lt,Ot,gt,Ee,on),this};var ue=function(se,le,ge,lt){var Ot,gt,Tt;if(typeof se=="string"&&r(se)===e){se=unescape(se);var Mt=ye(se,!1);(Mt!==""||(Mt=t.loadFile(se,!0))!==void 0)&&(se=Mt)}if(I(se)&&(se=O(se,le)),le=r(se,le),!E(le))throw new Error("addImage does not support files of type '"+le+"', please ensure that a plugin for '"+le+"' support is added.");if(((Tt=ge)==null||Tt.length===0)&&(ge=function(on){return typeof on=="string"||Ie(on)?te(on):Ie(on.data)?te(on.data):null}(se)),(Ot=M.call(this,ge))||(Se()&&(se instanceof Uint8Array||le==="RGBA"||(gt=se,se=Ae(se))),Ot=this["process"+le.toUpperCase()](se,b.call(this),ge,function(on){return on&&typeof on=="string"&&(on=on.toUpperCase()),on in t.image_compression?on:Y.NONE}(lt),gt)),!Ot)throw new Error("An unknown error occurred whilst processing the image.");return Ot},ye=t.__addimage__.convertBase64ToBinaryString=function(se,le){var ge;le=typeof le!="boolean"||le;var lt,Ot="";if(typeof se=="string"){lt=(ge=Pe(se))!==null?ge.data:se;try{Ot=Kv(lt)}catch(gt){if(le)throw be(lt)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+gt.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Ot};t.getImageProperties=function(se){var le,ge,lt="";if(I(se)&&(se=O(se)),typeof se=="string"&&r(se)===e&&((lt=ye(se,!1))===""&&(lt=t.loadFile(se)||""),se=lt),ge=r(se),!E(ge))throw new Error("addImage does not support files of type '"+ge+"', please ensure that a plugin for '"+ge+"' support is added.");if(!Se()||se instanceof Uint8Array||(se=Ae(se)),!(le=this["process"+ge.toUpperCase()](se)))throw new Error("An unknown error occurred whilst processing the image");return le.fileType=ge,le}})(gi.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};gi.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,o,l,h=this.internal.getCoordinateString,p=this.internal.getVerticalCoordinateString,i=this.internal.getPageInfoByObjId(n.objId),b=n.pageContext.annotations,E=!1,I=0;I<b.length&&!E;I++)switch((r=b[I]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(E=!0);break;case"reference":case"text":case"freetext":E=!0}if(E!=0){this.internal.write("/Annots [");for(var O=0;O<b.length;O++){r=b[O];var M=this.internal.pdfEscape,G=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var q=this.internal.newAdditionalObject(),Z=this.internal.newAdditionalObject(),Y=this.internal.getEncryptor(q.objId),te=r.title||"Note";l="<</Type /Annot /Subtype /Text "+(o="/Rect ["+h(r.bounds.x)+" "+p(r.bounds.y+r.bounds.h)+" "+h(r.bounds.x+r.bounds.w)+" "+p(r.bounds.y)+"] ")+"/Contents ("+M(Y(r.contents))+")",l+=" /Popup "+Z.objId+" 0 R",l+=" /P "+i.objId+" 0 R",l+=" /T ("+M(Y(te))+") >>",q.content=l;var be=q.objId+" 0 R";l="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+h(r.bounds.x+30)+" "+p(r.bounds.y+r.bounds.h)+" "+h(r.bounds.x+r.bounds.w+30)+" "+p(r.bounds.y)+"] ")+" /Parent "+be,r.open&&(l+=" /Open true"),l+=" >>",Z.content=l,this.internal.write(q.objId,"0 R",Z.objId,"0 R");break;case"freetext":o="/Rect ["+h(r.bounds.x)+" "+p(r.bounds.y)+" "+h(r.bounds.x+r.bounds.w)+" "+p(r.bounds.y+r.bounds.h)+"] ";var Pe=r.color||"#000000";l="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+M(G(r.contents))+")",l+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+Pe+")",l+=" /Border [0 0 0]",l+=" >>",this.internal.write(l);break;case"link":if(r.options.name){var Se=this.annotations._nameMap[r.options.name];r.options.pageNumber=Se.page,r.options.top=Se.y}else r.options.top||(r.options.top=0);if(o="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",l="",r.options.url)l="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+M(G(r.options.url))+") >>";else if(r.options.pageNumber)switch(l="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":l+=" /Fit]";break;case"FitH":l+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,l+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var Ie=p(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),l+=" /XYZ "+r.options.left+" "+Ie+" "+r.options.zoom+"]"}l!=""&&(l+=" >>",this.internal.write(l))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,o,l,h){var p=this.internal.getCurrentPageInfo(),i=this.internal.getCoordinateString,b=this.internal.getVerticalCoordinateString;p.pageContext.annotations.push({finalBounds:{x:i(n),y:b(r),w:i(n+o),h:b(r+l)},options:h,type:"link"})},t.textWithLink=function(n,r,o,l){var h,p,i=this.getTextWidth(n),b=this.internal.getLineHeight()/this.internal.scaleFactor;if(l.maxWidth!==void 0){p=l.maxWidth;var E=this.splitTextToSize(n,p).length;h=Math.ceil(b*E)}else p=i,h=b;return this.text(n,r,o,l),o+=.2*b,l.align==="center"&&(r-=i/2),l.align==="right"&&(r-=i),this.link(r,o-b,p,h,l),i},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(gi.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];t.__arabicParser__={};var l=t.__arabicParser__.isInArabicSubstitutionA=function(q){return e[q.charCodeAt(0)]!==void 0},h=t.__arabicParser__.isArabicLetter=function(q){return typeof q=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(q)},p=t.__arabicParser__.isArabicEndLetter=function(q){return h(q)&&l(q)&&e[q.charCodeAt(0)].length<=2},i=t.__arabicParser__.isArabicAlfLetter=function(q){return h(q)&&o.indexOf(q.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(q){return h(q)&&l(q)&&e[q.charCodeAt(0)].length>=1};var b=t.__arabicParser__.arabicLetterHasFinalForm=function(q){return h(q)&&l(q)&&e[q.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(q){return h(q)&&l(q)&&e[q.charCodeAt(0)].length>=3};var E=t.__arabicParser__.arabicLetterHasMedialForm=function(q){return h(q)&&l(q)&&e[q.charCodeAt(0)].length==4},I=t.__arabicParser__.resolveLigatures=function(q){var Z=0,Y=n,te="",be=0;for(Z=0;Z<q.length;Z+=1)Y[q.charCodeAt(Z)]!==void 0?(be++,typeof(Y=Y[q.charCodeAt(Z)])=="number"&&(te+=String.fromCharCode(Y),Y=n,be=0),Z===q.length-1&&(Y=n,te+=q.charAt(Z-(be-1)),Z-=be-1,be=0)):(Y=n,te+=q.charAt(Z-be),Z-=be,be=0);return te};t.__arabicParser__.isArabicDiacritic=function(q){return q!==void 0&&r[q.charCodeAt(0)]!==void 0};var O=t.__arabicParser__.getCorrectForm=function(q,Z,Y){return h(q)?l(q)===!1?-1:!b(q)||!h(Z)&&!h(Y)||!h(Y)&&p(Z)||p(q)&&!h(Z)||p(q)&&i(Z)||p(q)&&p(Z)?0:E(q)&&h(Z)&&!p(Z)&&h(Y)&&b(Y)?3:p(q)||!h(Y)?1:2:-1},M=function(q){var Z=0,Y=0,te=0,be="",Pe="",Se="",Ie=(q=q||"").split("\\s+"),Ae=[];for(Z=0;Z<Ie.length;Z+=1){for(Ae.push(""),Y=0;Y<Ie[Z].length;Y+=1)be=Ie[Z][Y],Pe=Ie[Z][Y-1],Se=Ie[Z][Y+1],h(be)?(te=O(be,Pe,Se),Ae[Z]+=te!==-1?String.fromCharCode(e[be.charCodeAt(0)][te]):be):Ae[Z]+=be;Ae[Z]=I(Ae[Z])}return Ae.join(" ")},G=t.__arabicParser__.processArabic=t.processArabic=function(){var q,Z=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,Y=[];if(Array.isArray(Z)){var te=0;for(Y=[],te=0;te<Z.length;te+=1)Array.isArray(Z[te])?Y.push([M(Z[te][0]),Z[te][1],Z[te][2]]):Y.push([M(Z[te])]);q=Y}else q=M(Z);return typeof arguments[0]=="string"?q:(arguments[0].text=q,arguments[0])};t.events.push(["preProcessText",G])}(gi.API),gi.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(p){n=p}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(p){r=isNaN(p)||Number.isInteger(p)===!1||p<0?150:p,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(p){o=isNaN(p)||Number.isInteger(p)===!1||p<0?300:p,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var l=[];Object.defineProperty(this,"childNodes",{get:function(){return l},set:function(p){l=p}});var h={};Object.defineProperty(this,"style",{get:function(){return h},set:function(p){h=p}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var o;if((n=n||"2d")!=="2d")return null;for(o in r)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=r[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(gi.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new l,this.internal.__cell__.pages=1},l=function(){var i=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return i},set:function(q){i=q}});var b=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return b},set:function(q){b=q}});var E=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return E},set:function(q){E=q}});var I=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return I},set:function(q){I=q}});var O=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return O},set:function(q){O=q}});var M=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return M},set:function(q){M=q}});var G=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return G},set:function(q){G=q}}),this};l.prototype.clone=function(){return new l(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},l.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(i){return r.call(this),this.internal.__cell__.headerFunction=typeof i=="function"?i:void 0,this},t.getTextDimensions=function(i,b){r.call(this);var E=(b=b||{}).fontSize||this.getFontSize(),I=b.font||this.getFont(),O=b.scaleFactor||this.internal.scaleFactor,M=0,G=0,q=0,Z=this;if(!Array.isArray(i)&&typeof i!="string"){if(typeof i!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");i=String(i)}var Y=b.maxWidth;Y>0?typeof i=="string"?i=this.splitTextToSize(i,Y):Object.prototype.toString.call(i)==="[object Array]"&&(i=i.reduce(function(be,Pe){return be.concat(Z.splitTextToSize(Pe,Y))},[])):i=Array.isArray(i)?i:[i];for(var te=0;te<i.length;te++)M<(q=this.getStringUnitWidth(i[te],{font:I})*E)&&(M=q);return M!==0&&(G=i.length),{w:M/=O,h:Math.max((G*E*this.getLineHeightFactor()-E*(this.getLineHeightFactor()-1))/O,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var i=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new l(i.left,i.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var h=t.cell=function(){var i;i=arguments[0]instanceof l?arguments[0]:new l(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var b=this.internal.__cell__.lastCell,E=this.internal.__cell__.padding,I=this.internal.__cell__.margins||e,O=this.internal.__cell__.tableHeaderRow,M=this.internal.__cell__.printHeaders;return b.lineNumber!==void 0&&(b.lineNumber===i.lineNumber?(i.x=(b.x||0)+(b.width||0),i.y=b.y||0):b.y+b.height+i.height+I.bottom>this.getPageHeight()?(this.cellAddPage(),i.y=I.top,M&&O&&(this.printHeaderRow(i.lineNumber,!0),i.y+=O[0].height)):i.y=b.y+b.height||i.y),i.text[0]!==void 0&&(this.rect(i.x,i.y,i.width,i.height,n===!0?"FD":void 0),i.align==="right"?this.text(i.text,i.x+i.width-E,i.y+E,{align:"right",baseline:"top"}):i.align==="center"?this.text(i.text,i.x+i.width/2,i.y+E,{align:"center",baseline:"top",maxWidth:i.width-E-E}):this.text(i.text,i.x+E,i.y+E,{align:"left",baseline:"top",maxWidth:i.width-E-E})),this.internal.__cell__.lastCell=i,this};t.table=function(i,b,E,I,O){if(r.call(this),!E)throw new Error("No data for PDF table.");var M,G,q,Z,Y=[],te=[],be=[],Pe={},Se={},Ie=[],Ae=[],ne=(O=O||{}).autoSize||!1,ue=O.printHeaders!==!1,ye=O.css&&O.css["font-size"]!==void 0?16*O.css["font-size"]:O.fontSize||12,se=O.margins||Object.assign({width:this.getPageWidth()},e),le=typeof O.padding=="number"?O.padding:3,ge=O.headerBackgroundColor||"#c8c8c8",lt=O.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=ue,this.internal.__cell__.margins=se,this.internal.__cell__.table_font_size=ye,this.internal.__cell__.padding=le,this.internal.__cell__.headerBackgroundColor=ge,this.internal.__cell__.headerTextColor=lt,this.setFontSize(ye),I==null)te=Y=Object.keys(E[0]),be=Y.map(function(){return"left"});else if(Array.isArray(I)&&ss(I[0])==="object")for(Y=I.map(function(Ut){return Ut.name}),te=I.map(function(Ut){return Ut.prompt||Ut.name||""}),be=I.map(function(Ut){return Ut.align||"left"}),M=0;M<I.length;M+=1)Se[I[M].name]=I[M].width*(19.049976/25.4);else Array.isArray(I)&&typeof I[0]=="string"&&(te=Y=I,be=Y.map(function(){return"left"}));if(ne||Array.isArray(I)&&typeof I[0]=="string")for(M=0;M<Y.length;M+=1){for(Pe[Z=Y[M]]=E.map(function(Ut){return Ut[Z]}),this.setFont(void 0,"bold"),Ie.push(this.getTextDimensions(te[M],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),G=Pe[Z],this.setFont(void 0,"normal"),q=0;q<G.length;q+=1)Ie.push(this.getTextDimensions(G[q],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Se[Z]=Math.max.apply(null,Ie)+le+le,Ie=[]}if(ue){var Ot={};for(M=0;M<Y.length;M+=1)Ot[Y[M]]={},Ot[Y[M]].text=te[M],Ot[Y[M]].align=be[M];var gt=p.call(this,Ot,Se);Ae=Y.map(function(Ut){return new l(i,b,Se[Ut],gt,Ot[Ut].text,void 0,Ot[Ut].align)}),this.setTableHeaderRow(Ae),this.printHeaderRow(1,!1)}var Tt=I.reduce(function(Ut,In){return Ut[In.name]=In.align,Ut},{});for(M=0;M<E.length;M+=1){"rowStart"in O&&O.rowStart instanceof Function&&O.rowStart({row:M,data:E[M]},this);var Mt=p.call(this,E[M],Se);for(q=0;q<Y.length;q+=1){var on=E[M][Y[q]];"cellStart"in O&&O.cellStart instanceof Function&&O.cellStart({row:M,col:q,data:on},this),h.call(this,new l(i,b,Se[Y[q]],Mt,on,M+2,Tt[Y[q]]))}}return this.internal.__cell__.table_x=i,this.internal.__cell__.table_y=b,this};var p=function(i,b){var E=this.internal.__cell__.padding,I=this.internal.__cell__.table_font_size,O=this.internal.scaleFactor;return Object.keys(i).map(function(M){var G=i[M];return this.splitTextToSize(G.hasOwnProperty("text")?G.text:G,b[M]-E-E)},this).map(function(M){return this.getLineHeightFactor()*M.length*I/O+E+E},this).reduce(function(M,G){return Math.max(M,G)},0)};t.setTableHeaderRow=function(i){r.call(this),this.internal.__cell__.tableHeaderRow=i},t.printHeaderRow=function(i,b){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var E;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var I=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new l(I[0],I[1],I[2],I[3],void 0,-1)}this.setFont(void 0,"bold");for(var O=[],M=0;M<this.internal.__cell__.tableHeaderRow.length;M+=1){E=this.internal.__cell__.tableHeaderRow[M].clone(),b&&(E.y=this.internal.__cell__.margins.top||0,O.push(E)),E.lineNumber=i;var G=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),h.call(this,E),this.setTextColor(G)}O.length>0&&this.setTableHeaderRow(O),this.setFont(void 0,"normal"),n=!1}}(gi.API);var mH={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},gH=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],e5=pH(gH),yH=[100,200,300,400,500,600,700,800,900],_we=pH(yH);function t5(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(l){return mH[l=l||"normal"]?l:"normal"}(t.style),r=function(l){if(!l)return 400;if(typeof l=="number")return l>=100&&l<=900&&l%100==0?l:400;if(/^\d00$/.test(l))return parseInt(l);switch(l){case"bold":return 700;case"normal":default:return 400}}(t.weight),o=function(l){return typeof e5[l=l||"normal"]=="number"?l:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:o,src:t.src||[],ref:t.ref||{name:e,style:[o,n,r].join(" ")}}}function y3(t,e,n,r){var o;for(o=n;o>=0&&o<e.length;o+=r)if(t[e[o]])return t[e[o]];for(o=n;o>=0&&o<e.length;o-=r)if(t[e[o]])return t[e[o]]}var vwe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},_3={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function v3(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function bwe(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",o=Object.assign({},vwe,n.genericFontFamilies||{}),l=null,h=null,p=0;p<e.length;++p)if(o[(l=t5(e[p])).family]&&(l.family=o[l.family]),t.hasOwnProperty(l.family)){h=t[l.family];break}if(!(h=h||t[r]))throw new Error("Could not find a font-family for the rule '"+v3(l)+"' and default family '"+r+"'.");if(h=function(i,b){if(b[i])return b[i];var E=e5[i],I=E<=e5.normal?-1:1,O=y3(b,gH,E,I);if(!O)throw new Error("Could not find a matching font-stretch value for "+i);return O}(l.stretch,h),h=function(i,b){if(b[i])return b[i];for(var E=mH[i],I=0;I<E.length;++I)if(b[E[I]])return b[E[I]];throw new Error("Could not find a matching font-style for "+i)}(l.style,h),!(h=function(i,b){if(b[i])return b[i];if(i===400&&b[500])return b[500];if(i===500&&b[400])return b[400];var E=_we[i],I=y3(b,yH,E,i<400?-1:1);if(!I)throw new Error("Could not find a matching font-weight for value "+i);return I}(l.weight,h)))throw new Error("Failed to resolve a font for the rule '"+v3(l)+"'.");return h}function b3(t){return t.trimLeft()}function wwe(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function xwe(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Xw,w3,x3,G2=["times"];(function(t){var e,n,r,o,l,h,p,i,b,E=function(Ee){return Ee=Ee||{},this.isStrokeTransparent=Ee.isStrokeTransparent||!1,this.strokeOpacity=Ee.strokeOpacity||1,this.strokeStyle=Ee.strokeStyle||"#000000",this.fillStyle=Ee.fillStyle||"#000000",this.isFillTransparent=Ee.isFillTransparent||!1,this.fillOpacity=Ee.fillOpacity||1,this.font=Ee.font||"10px sans-serif",this.textBaseline=Ee.textBaseline||"alphabetic",this.textAlign=Ee.textAlign||"left",this.lineWidth=Ee.lineWidth||1,this.lineJoin=Ee.lineJoin||"miter",this.lineCap=Ee.lineCap||"butt",this.path=Ee.path||[],this.transform=Ee.transform!==void 0?Ee.transform.clone():new i,this.globalCompositeOperation=Ee.globalCompositeOperation||"normal",this.globalAlpha=Ee.globalAlpha||1,this.clip_path=Ee.clip_path||[],this.currentPoint=Ee.currentPoint||new h,this.miterLimit=Ee.miterLimit||10,this.lastPoint=Ee.lastPoint||new h,this.lineDashOffset=Ee.lineDashOffset||0,this.lineDash=Ee.lineDash||[],this.margin=Ee.margin||[0,0,0,0],this.prevPageLastElemOffset=Ee.prevPageLastElemOffset||0,this.ignoreClearRect=typeof Ee.ignoreClearRect!="boolean"||Ee.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new I(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,l=this.internal.getVerticalCoordinate,h=this.internal.Point,p=this.internal.Rectangle,i=this.internal.Matrix,b=new E}]);var I=function(Ee){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var $e=Ee;Object.defineProperty(this,"pdf",{get:function(){return $e}});var We=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return We},set:function(Fe){We=!!Fe}});var vt=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return vt},set:function(Fe){vt=!!Fe}});var _t=0;Object.defineProperty(this,"posX",{get:function(){return _t},set:function(Fe){isNaN(Fe)||(_t=Fe)}});var at=0;Object.defineProperty(this,"posY",{get:function(){return at},set:function(Fe){isNaN(Fe)||(at=Fe)}}),Object.defineProperty(this,"margin",{get:function(){return b.margin},set:function(Fe){var Re;typeof Fe=="number"?Re=[Fe,Fe,Fe,Fe]:((Re=new Array(4))[0]=Fe[0],Re[1]=Fe.length>=2?Fe[1]:Re[0],Re[2]=Fe.length>=3?Fe[2]:Re[0],Re[3]=Fe.length>=4?Fe[3]:Re[1]),b.margin=Re}});var Ft=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ft},set:function(Fe){Ft=Fe}});var Dt=0;Object.defineProperty(this,"lastBreak",{get:function(){return Dt},set:function(Fe){Dt=Fe}});var yn=[];Object.defineProperty(this,"pageBreaks",{get:function(){return yn},set:function(Fe){yn=Fe}}),Object.defineProperty(this,"ctx",{get:function(){return b},set:function(Fe){Fe instanceof E&&(b=Fe)}}),Object.defineProperty(this,"path",{get:function(){return b.path},set:function(Fe){b.path=Fe}});var De=[];Object.defineProperty(this,"ctxStack",{get:function(){return De},set:function(Fe){De=Fe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Fe){var Re;Re=O(Fe),this.ctx.fillStyle=Re.style,this.ctx.isFillTransparent=Re.a===0,this.ctx.fillOpacity=Re.a,this.pdf.setFillColor(Re.r,Re.g,Re.b,{a:Re.a}),this.pdf.setTextColor(Re.r,Re.g,Re.b,{a:Re.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Fe){var Re=O(Fe);this.ctx.strokeStyle=Re.style,this.ctx.isStrokeTransparent=Re.a===0,this.ctx.strokeOpacity=Re.a,Re.a===0?this.pdf.setDrawColor(255,255,255):(Re.a,this.pdf.setDrawColor(Re.r,Re.g,Re.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Fe){["butt","round","square"].indexOf(Fe)!==-1&&(this.ctx.lineCap=Fe,this.pdf.setLineCap(Fe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Fe){isNaN(Fe)||(this.ctx.lineWidth=Fe,this.pdf.setLineWidth(Fe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Fe){["bevel","round","miter"].indexOf(Fe)!==-1&&(this.ctx.lineJoin=Fe,this.pdf.setLineJoin(Fe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Fe){isNaN(Fe)||(this.ctx.miterLimit=Fe,this.pdf.setMiterLimit(Fe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Fe){this.ctx.textBaseline=Fe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Fe){["right","end","center","left","start"].indexOf(Fe)!==-1&&(this.ctx.textAlign=Fe)}});var jn=null;function Te(Fe,Re){if(jn===null){var Yt=function(rn){var zt=[];return Object.keys(rn).forEach(function(Jt){rn[Jt].forEach(function(gn){var fn=null;switch(gn){case"bold":fn={family:Jt,weight:"bold"};break;case"italic":fn={family:Jt,style:"italic"};break;case"bolditalic":fn={family:Jt,weight:"bold",style:"italic"};break;case"":case"normal":fn={family:Jt}}fn!==null&&(fn.ref={name:Jt,style:gn},zt.push(fn))})}),zt}(Fe.getFontList());jn=function(rn){for(var zt={},Jt=0;Jt<rn.length;++Jt){var gn=t5(rn[Jt]),fn=gn.family,Fn=gn.stretch,Wn=gn.style,_n=gn.weight;zt[fn]=zt[fn]||{},zt[fn][Fn]=zt[fn][Fn]||{},zt[fn][Fn][Wn]=zt[fn][Fn][Wn]||{},zt[fn][Fn][Wn][_n]=gn}return zt}(Yt.concat(Re))}return jn}var Je=null;Object.defineProperty(this,"fontFaces",{get:function(){return Je},set:function(Fe){jn=null,Je=Fe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Fe){var Re;if(this.ctx.font=Fe,(Re=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Fe))!==null){var Yt=Re[1],rn=(Re[2],Re[3]),zt=Re[4],Jt=(Re[5],Re[6]),gn=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(zt)[2];zt=Math.floor(gn==="px"?parseFloat(zt)*this.pdf.internal.scaleFactor:gn==="em"?parseFloat(zt)*this.pdf.getFontSize():parseFloat(zt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(zt);var fn=function(lr){var Ir,pr,to=[],xi=lr.trim();if(xi==="")return G2;if(xi in _3)return[_3[xi]];for(;xi!=="";){switch(pr=null,Ir=(xi=b3(xi)).charAt(0)){case'"':case"'":pr=wwe(xi.substring(1),Ir);break;default:pr=xwe(xi)}if(pr===null||(to.push(pr[0]),(xi=b3(pr[1]))!==""&&xi.charAt(0)!==","))return G2;xi=xi.replace(/^,/,"")}return to}(Jt);if(this.fontFaces){var Fn=bwe(Te(this.pdf,this.fontFaces),fn.map(function(lr){return{family:lr,stretch:"normal",weight:rn,style:Yt}}));this.pdf.setFont(Fn.ref.name,Fn.ref.style)}else{var Wn="";(rn==="bold"||parseInt(rn,10)>=700||Yt==="bold")&&(Wn="bold"),Yt==="italic"&&(Wn+="italic"),Wn.length===0&&(Wn="normal");for(var _n="",er={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ar=0;ar<fn.length;ar++){if(this.pdf.internal.getFont(fn[ar],Wn,{noFallback:!0,disableWarning:!0})!==void 0){_n=fn[ar];break}if(Wn==="bolditalic"&&this.pdf.internal.getFont(fn[ar],"bold",{noFallback:!0,disableWarning:!0})!==void 0)_n=fn[ar],Wn="bold";else if(this.pdf.internal.getFont(fn[ar],"normal",{noFallback:!0,disableWarning:!0})!==void 0){_n=fn[ar],Wn="normal";break}}if(_n===""){for(var Fr=0;Fr<fn.length;Fr++)if(er[fn[Fr]]){_n=er[fn[Fr]];break}}_n=_n===""?"Times":_n,this.pdf.setFont(_n,Wn)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Fe){this.ctx.globalCompositeOperation=Fe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Fe){this.ctx.globalAlpha=Fe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Fe){this.ctx.lineDashOffset=Fe,In.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Fe){this.ctx.lineDash=Fe,In.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Fe){this.ctx.ignoreClearRect=!!Fe}})};I.prototype.setLineDash=function(Ee){this.lineDash=Ee},I.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},I.prototype.fill=function(){Pe.call(this,"fill",!1)},I.prototype.stroke=function(){Pe.call(this,"stroke",!1)},I.prototype.beginPath=function(){this.path=[{type:"begin"}]},I.prototype.moveTo=function(Ee,$e){if(isNaN(Ee)||isNaN($e))throw bs.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var We=this.ctx.transform.applyToPoint(new h(Ee,$e));this.path.push({type:"mt",x:We.x,y:We.y}),this.ctx.lastPoint=new h(Ee,$e)},I.prototype.closePath=function(){var Ee=new h(0,0),$e=0;for($e=this.path.length-1;$e!==-1;$e--)if(this.path[$e].type==="begin"&&ss(this.path[$e+1])==="object"&&typeof this.path[$e+1].x=="number"){Ee=new h(this.path[$e+1].x,this.path[$e+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new h(Ee.x,Ee.y)},I.prototype.lineTo=function(Ee,$e){if(isNaN(Ee)||isNaN($e))throw bs.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var We=this.ctx.transform.applyToPoint(new h(Ee,$e));this.path.push({type:"lt",x:We.x,y:We.y}),this.ctx.lastPoint=new h(We.x,We.y)},I.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),Pe.call(this,null,!0)},I.prototype.quadraticCurveTo=function(Ee,$e,We,vt){if(isNaN(We)||isNaN(vt)||isNaN(Ee)||isNaN($e))throw bs.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var _t=this.ctx.transform.applyToPoint(new h(We,vt)),at=this.ctx.transform.applyToPoint(new h(Ee,$e));this.path.push({type:"qct",x1:at.x,y1:at.y,x:_t.x,y:_t.y}),this.ctx.lastPoint=new h(_t.x,_t.y)},I.prototype.bezierCurveTo=function(Ee,$e,We,vt,_t,at){if(isNaN(_t)||isNaN(at)||isNaN(Ee)||isNaN($e)||isNaN(We)||isNaN(vt))throw bs.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ft=this.ctx.transform.applyToPoint(new h(_t,at)),Dt=this.ctx.transform.applyToPoint(new h(Ee,$e)),yn=this.ctx.transform.applyToPoint(new h(We,vt));this.path.push({type:"bct",x1:Dt.x,y1:Dt.y,x2:yn.x,y2:yn.y,x:Ft.x,y:Ft.y}),this.ctx.lastPoint=new h(Ft.x,Ft.y)},I.prototype.arc=function(Ee,$e,We,vt,_t,at){if(isNaN(Ee)||isNaN($e)||isNaN(We)||isNaN(vt)||isNaN(_t))throw bs.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(at=!!at,!this.ctx.transform.isIdentity){var Ft=this.ctx.transform.applyToPoint(new h(Ee,$e));Ee=Ft.x,$e=Ft.y;var Dt=this.ctx.transform.applyToPoint(new h(0,We)),yn=this.ctx.transform.applyToPoint(new h(0,0));We=Math.sqrt(Math.pow(Dt.x-yn.x,2)+Math.pow(Dt.y-yn.y,2))}Math.abs(_t-vt)>=2*Math.PI&&(vt=0,_t=2*Math.PI),this.path.push({type:"arc",x:Ee,y:$e,radius:We,startAngle:vt,endAngle:_t,counterclockwise:at})},I.prototype.arcTo=function(Ee,$e,We,vt,_t){throw new Error("arcTo not implemented.")},I.prototype.rect=function(Ee,$e,We,vt){if(isNaN(Ee)||isNaN($e)||isNaN(We)||isNaN(vt))throw bs.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(Ee,$e),this.lineTo(Ee+We,$e),this.lineTo(Ee+We,$e+vt),this.lineTo(Ee,$e+vt),this.lineTo(Ee,$e),this.lineTo(Ee+We,$e),this.lineTo(Ee,$e)},I.prototype.fillRect=function(Ee,$e,We,vt){if(isNaN(Ee)||isNaN($e)||isNaN(We)||isNaN(vt))throw bs.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!M.call(this)){var _t={};this.lineCap!=="butt"&&(_t.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(_t.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(Ee,$e,We,vt),this.fill(),_t.hasOwnProperty("lineCap")&&(this.lineCap=_t.lineCap),_t.hasOwnProperty("lineJoin")&&(this.lineJoin=_t.lineJoin)}},I.prototype.strokeRect=function(Ee,$e,We,vt){if(isNaN(Ee)||isNaN($e)||isNaN(We)||isNaN(vt))throw bs.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");G.call(this)||(this.beginPath(),this.rect(Ee,$e,We,vt),this.stroke())},I.prototype.clearRect=function(Ee,$e,We,vt){if(isNaN(Ee)||isNaN($e)||isNaN(We)||isNaN(vt))throw bs.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(Ee,$e,We,vt))},I.prototype.save=function(Ee){Ee=typeof Ee!="boolean"||Ee;for(var $e=this.pdf.internal.getCurrentPageInfo().pageNumber,We=0;We<this.pdf.internal.getNumberOfPages();We++)this.pdf.setPage(We+1),this.pdf.internal.out("q");if(this.pdf.setPage($e),Ee){this.ctx.fontSize=this.pdf.internal.getFontSize();var vt=new E(this.ctx);this.ctxStack.push(this.ctx),this.ctx=vt}},I.prototype.restore=function(Ee){Ee=typeof Ee!="boolean"||Ee;for(var $e=this.pdf.internal.getCurrentPageInfo().pageNumber,We=0;We<this.pdf.internal.getNumberOfPages();We++)this.pdf.setPage(We+1),this.pdf.internal.out("Q");this.pdf.setPage($e),Ee&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},I.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var O=function(Ee){var $e,We,vt,_t;if(Ee.isCanvasGradient===!0&&(Ee=Ee.getColor()),!Ee)return{r:0,g:0,b:0,a:0,style:Ee};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(Ee))$e=0,We=0,vt=0,_t=0;else{var at=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(Ee);if(at!==null)$e=parseInt(at[1]),We=parseInt(at[2]),vt=parseInt(at[3]),_t=1;else if((at=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(Ee))!==null)$e=parseInt(at[1]),We=parseInt(at[2]),vt=parseInt(at[3]),_t=parseFloat(at[4]);else{if(_t=1,typeof Ee=="string"&&Ee.charAt(0)!=="#"){var Ft=new cH(Ee);Ee=Ft.ok?Ft.toHex():"#000000"}Ee.length===4?($e=Ee.substring(1,2),$e+=$e,We=Ee.substring(2,3),We+=We,vt=Ee.substring(3,4),vt+=vt):($e=Ee.substring(1,3),We=Ee.substring(3,5),vt=Ee.substring(5,7)),$e=parseInt($e,16),We=parseInt(We,16),vt=parseInt(vt,16)}}return{r:$e,g:We,b:vt,a:_t,style:Ee}},M=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},G=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};I.prototype.fillText=function(Ee,$e,We,vt){if(isNaN($e)||isNaN(We)||typeof Ee!="string")throw bs.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(vt=isNaN(vt)?void 0:vt,!M.call(this)){var _t=Mt(this.ctx.transform.rotation),at=this.ctx.transform.scaleX;le.call(this,{text:Ee,x:$e,y:We,scale:at,angle:_t,align:this.textAlign,maxWidth:vt})}},I.prototype.strokeText=function(Ee,$e,We,vt){if(isNaN($e)||isNaN(We)||typeof Ee!="string")throw bs.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!G.call(this)){vt=isNaN(vt)?void 0:vt;var _t=Mt(this.ctx.transform.rotation),at=this.ctx.transform.scaleX;le.call(this,{text:Ee,x:$e,y:We,scale:at,renderingMode:"stroke",angle:_t,align:this.textAlign,maxWidth:vt})}},I.prototype.measureText=function(Ee){if(typeof Ee!="string")throw bs.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var $e=this.pdf,We=this.pdf.internal.scaleFactor,vt=$e.internal.getFontSize(),_t=$e.getStringUnitWidth(Ee)*vt/$e.internal.scaleFactor,at=function(Ft){var Dt=(Ft=Ft||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Dt}}),this};return new at({width:_t*=Math.round(96*We/72*1e4)/1e4})},I.prototype.scale=function(Ee,$e){if(isNaN(Ee)||isNaN($e))throw bs.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var We=new i(Ee,0,0,$e,0,0);this.ctx.transform=this.ctx.transform.multiply(We)},I.prototype.rotate=function(Ee){if(isNaN(Ee))throw bs.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var $e=new i(Math.cos(Ee),Math.sin(Ee),-Math.sin(Ee),Math.cos(Ee),0,0);this.ctx.transform=this.ctx.transform.multiply($e)},I.prototype.translate=function(Ee,$e){if(isNaN(Ee)||isNaN($e))throw bs.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var We=new i(1,0,0,1,Ee,$e);this.ctx.transform=this.ctx.transform.multiply(We)},I.prototype.transform=function(Ee,$e,We,vt,_t,at){if(isNaN(Ee)||isNaN($e)||isNaN(We)||isNaN(vt)||isNaN(_t)||isNaN(at))throw bs.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ft=new i(Ee,$e,We,vt,_t,at);this.ctx.transform=this.ctx.transform.multiply(Ft)},I.prototype.setTransform=function(Ee,$e,We,vt,_t,at){Ee=isNaN(Ee)?1:Ee,$e=isNaN($e)?0:$e,We=isNaN(We)?0:We,vt=isNaN(vt)?1:vt,_t=isNaN(_t)?0:_t,at=isNaN(at)?0:at,this.ctx.transform=new i(Ee,$e,We,vt,_t,at)};var q=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};I.prototype.drawImage=function(Ee,$e,We,vt,_t,at,Ft,Dt,yn){var De=this.pdf.getImageProperties(Ee),jn=1,Te=1,Je=1,Fe=1;vt!==void 0&&Dt!==void 0&&(Je=Dt/vt,Fe=yn/_t,jn=De.width/vt*Dt/vt,Te=De.height/_t*yn/_t),at===void 0&&(at=$e,Ft=We,$e=0,We=0),vt!==void 0&&Dt===void 0&&(Dt=vt,yn=_t),vt===void 0&&Dt===void 0&&(Dt=De.width,yn=De.height);for(var Re,Yt=this.ctx.transform.decompose(),rn=Mt(Yt.rotate.shx),zt=new i,Jt=(zt=(zt=(zt=zt.multiply(Yt.translate)).multiply(Yt.skew)).multiply(Yt.scale)).applyToRectangle(new p(at-$e*Je,Ft-We*Fe,vt*jn,_t*Te)),gn=Z.call(this,Jt),fn=[],Fn=0;Fn<gn.length;Fn+=1)fn.indexOf(gn[Fn])===-1&&fn.push(gn[Fn]);if(be(fn),this.autoPaging)for(var Wn=fn[0],_n=fn[fn.length-1],er=Wn;er<_n+1;er++){this.pdf.setPage(er);var ar=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Fr=er===1?this.posY+this.margin[0]:this.margin[0],lr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ir=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],pr=er===1?0:lr+(er-2)*Ir;if(this.ctx.clip_path.length!==0){var to=this.path;Re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=te(Re,this.posX+this.margin[3],-pr+Fr+this.ctx.prevPageLastElemOffset),Se.call(this,"fill",!0),this.path=to}var xi=JSON.parse(JSON.stringify(Jt));xi=te([xi],this.posX+this.margin[3],-pr+Fr+this.ctx.prevPageLastElemOffset)[0];var No=(er>Wn||er<_n)&&q.call(this);No&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ar,Ir,null).clip().discardPath()),this.pdf.addImage(Ee,"JPEG",xi.x,xi.y,xi.w,xi.h,null,null,rn),No&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(Ee,"JPEG",Jt.x,Jt.y,Jt.w,Jt.h,null,null,rn)};var Z=function(Ee,$e,We){var vt=[];$e=$e||this.pdf.internal.pageSize.width,We=We||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var _t=this.posY+this.ctx.prevPageLastElemOffset;switch(Ee.type){default:case"mt":case"lt":vt.push(Math.floor((Ee.y+_t)/We)+1);break;case"arc":vt.push(Math.floor((Ee.y+_t-Ee.radius)/We)+1),vt.push(Math.floor((Ee.y+_t+Ee.radius)/We)+1);break;case"qct":var at=on(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Ee.x1,Ee.y1,Ee.x,Ee.y);vt.push(Math.floor((at.y+_t)/We)+1),vt.push(Math.floor((at.y+at.h+_t)/We)+1);break;case"bct":var Ft=Ut(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Ee.x1,Ee.y1,Ee.x2,Ee.y2,Ee.x,Ee.y);vt.push(Math.floor((Ft.y+_t)/We)+1),vt.push(Math.floor((Ft.y+Ft.h+_t)/We)+1);break;case"rect":vt.push(Math.floor((Ee.y+_t)/We)+1),vt.push(Math.floor((Ee.y+Ee.h+_t)/We)+1)}for(var Dt=0;Dt<vt.length;Dt+=1)for(;this.pdf.internal.getNumberOfPages()<vt[Dt];)Y.call(this);return vt},Y=function(){var Ee=this.fillStyle,$e=this.strokeStyle,We=this.font,vt=this.lineCap,_t=this.lineWidth,at=this.lineJoin;this.pdf.addPage(),this.fillStyle=Ee,this.strokeStyle=$e,this.font=We,this.lineCap=vt,this.lineWidth=_t,this.lineJoin=at},te=function(Ee,$e,We){for(var vt=0;vt<Ee.length;vt++)switch(Ee[vt].type){case"bct":Ee[vt].x2+=$e,Ee[vt].y2+=We;case"qct":Ee[vt].x1+=$e,Ee[vt].y1+=We;case"mt":case"lt":case"arc":default:Ee[vt].x+=$e,Ee[vt].y+=We}return Ee},be=function(Ee){return Ee.sort(function($e,We){return $e-We})},Pe=function(Ee,$e){for(var We,vt,_t=this.fillStyle,at=this.strokeStyle,Ft=this.lineCap,Dt=this.lineWidth,yn=Math.abs(Dt*this.ctx.transform.scaleX),De=this.lineJoin,jn=JSON.parse(JSON.stringify(this.path)),Te=JSON.parse(JSON.stringify(this.path)),Je=[],Fe=0;Fe<Te.length;Fe++)if(Te[Fe].x!==void 0)for(var Re=Z.call(this,Te[Fe]),Yt=0;Yt<Re.length;Yt+=1)Je.indexOf(Re[Yt])===-1&&Je.push(Re[Yt]);for(var rn=0;rn<Je.length;rn++)for(;this.pdf.internal.getNumberOfPages()<Je[rn];)Y.call(this);if(be(Je),this.autoPaging)for(var zt=Je[0],Jt=Je[Je.length-1],gn=zt;gn<Jt+1;gn++){this.pdf.setPage(gn),this.fillStyle=_t,this.strokeStyle=at,this.lineCap=Ft,this.lineWidth=yn,this.lineJoin=De;var fn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Fn=gn===1?this.posY+this.margin[0]:this.margin[0],Wn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],_n=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],er=gn===1?0:Wn+(gn-2)*_n;if(this.ctx.clip_path.length!==0){var ar=this.path;We=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=te(We,this.posX+this.margin[3],-er+Fn+this.ctx.prevPageLastElemOffset),Se.call(this,Ee,!0),this.path=ar}if(vt=JSON.parse(JSON.stringify(jn)),this.path=te(vt,this.posX+this.margin[3],-er+Fn+this.ctx.prevPageLastElemOffset),$e===!1||gn===0){var Fr=(gn>zt||gn<Jt)&&q.call(this);Fr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],fn,_n,null).clip().discardPath()),Se.call(this,Ee,$e),Fr&&this.pdf.restoreGraphicsState()}this.lineWidth=Dt}else this.lineWidth=yn,Se.call(this,Ee,$e),this.lineWidth=Dt;this.path=jn},Se=function(Ee,$e){if((Ee!=="stroke"||$e||!G.call(this))&&(Ee==="stroke"||$e||!M.call(this))){for(var We,vt,_t=[],at=this.path,Ft=0;Ft<at.length;Ft++){var Dt=at[Ft];switch(Dt.type){case"begin":_t.push({begin:!0});break;case"close":_t.push({close:!0});break;case"mt":_t.push({start:Dt,deltas:[],abs:[]});break;case"lt":var yn=_t.length;if(at[Ft-1]&&!isNaN(at[Ft-1].x)&&(We=[Dt.x-at[Ft-1].x,Dt.y-at[Ft-1].y],yn>0)){for(;yn>=0;yn--)if(_t[yn-1].close!==!0&&_t[yn-1].begin!==!0){_t[yn-1].deltas.push(We),_t[yn-1].abs.push(Dt);break}}break;case"bct":We=[Dt.x1-at[Ft-1].x,Dt.y1-at[Ft-1].y,Dt.x2-at[Ft-1].x,Dt.y2-at[Ft-1].y,Dt.x-at[Ft-1].x,Dt.y-at[Ft-1].y],_t[_t.length-1].deltas.push(We);break;case"qct":var De=at[Ft-1].x+2/3*(Dt.x1-at[Ft-1].x),jn=at[Ft-1].y+2/3*(Dt.y1-at[Ft-1].y),Te=Dt.x+2/3*(Dt.x1-Dt.x),Je=Dt.y+2/3*(Dt.y1-Dt.y),Fe=Dt.x,Re=Dt.y;We=[De-at[Ft-1].x,jn-at[Ft-1].y,Te-at[Ft-1].x,Je-at[Ft-1].y,Fe-at[Ft-1].x,Re-at[Ft-1].y],_t[_t.length-1].deltas.push(We);break;case"arc":_t.push({deltas:[],abs:[],arc:!0}),Array.isArray(_t[_t.length-1].abs)&&_t[_t.length-1].abs.push(Dt)}}vt=$e?null:Ee==="stroke"?"stroke":"fill";for(var Yt=!1,rn=0;rn<_t.length;rn++)if(_t[rn].arc)for(var zt=_t[rn].abs,Jt=0;Jt<zt.length;Jt++){var gn=zt[Jt];gn.type==="arc"?ne.call(this,gn.x,gn.y,gn.radius,gn.startAngle,gn.endAngle,gn.counterclockwise,void 0,$e,!Yt):ge.call(this,gn.x,gn.y),Yt=!0}else if(_t[rn].close===!0)this.pdf.internal.out("h"),Yt=!1;else if(_t[rn].begin!==!0){var fn=_t[rn].start.x,Fn=_t[rn].start.y;lt.call(this,_t[rn].deltas,fn,Fn),Yt=!0}vt&&ue.call(this,vt),$e&&ye.call(this)}},Ie=function(Ee){var $e=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,We=$e*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return Ee-We;case"top":return Ee+$e-We;case"hanging":return Ee+$e-2*We;case"middle":return Ee+$e/2-We;case"ideographic":return Ee;case"alphabetic":default:return Ee}},Ae=function(Ee){return Ee+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};I.prototype.createLinearGradient=function(){var Ee=function(){};return Ee.colorStops=[],Ee.addColorStop=function($e,We){this.colorStops.push([$e,We])},Ee.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},Ee.isCanvasGradient=!0,Ee},I.prototype.createPattern=function(){return this.createLinearGradient()},I.prototype.createRadialGradient=function(){return this.createLinearGradient()};var ne=function(Ee,$e,We,vt,_t,at,Ft,Dt,yn){for(var De=gt.call(this,We,vt,_t,at),jn=0;jn<De.length;jn++){var Te=De[jn];jn===0&&(yn?se.call(this,Te.x1+Ee,Te.y1+$e):ge.call(this,Te.x1+Ee,Te.y1+$e)),Ot.call(this,Ee,$e,Te.x2,Te.y2,Te.x3,Te.y3,Te.x4,Te.y4)}Dt?ye.call(this):ue.call(this,Ft)},ue=function(Ee){switch(Ee){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},ye=function(){this.pdf.clip(),this.pdf.discardPath()},se=function(Ee,$e){this.pdf.internal.out(n(Ee)+" "+r($e)+" m")},le=function(Ee){var $e;switch(Ee.align){case"right":case"end":$e="right";break;case"center":$e="center";break;case"left":case"start":default:$e="left"}var We=this.pdf.getTextDimensions(Ee.text),vt=Ie.call(this,Ee.y),_t=Ae.call(this,vt)-We.h,at=this.ctx.transform.applyToPoint(new h(Ee.x,vt)),Ft=this.ctx.transform.decompose(),Dt=new i;Dt=(Dt=(Dt=Dt.multiply(Ft.translate)).multiply(Ft.skew)).multiply(Ft.scale);for(var yn,De,jn,Te=this.ctx.transform.applyToRectangle(new p(Ee.x,vt,We.w,We.h)),Je=Dt.applyToRectangle(new p(Ee.x,_t,We.w,We.h)),Fe=Z.call(this,Je),Re=[],Yt=0;Yt<Fe.length;Yt+=1)Re.indexOf(Fe[Yt])===-1&&Re.push(Fe[Yt]);if(be(Re),this.autoPaging)for(var rn=Re[0],zt=Re[Re.length-1],Jt=rn;Jt<zt+1;Jt++){this.pdf.setPage(Jt);var gn=Jt===1?this.posY+this.margin[0]:this.margin[0],fn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Fn=this.pdf.internal.pageSize.height-this.margin[2],Wn=Fn-this.margin[0],_n=this.pdf.internal.pageSize.width-this.margin[1],er=_n-this.margin[3],ar=Jt===1?0:fn+(Jt-2)*Wn;if(this.ctx.clip_path.length!==0){var Fr=this.path;yn=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=te(yn,this.posX+this.margin[3],-1*ar+gn),Se.call(this,"fill",!0),this.path=Fr}var lr=te([JSON.parse(JSON.stringify(Je))],this.posX+this.margin[3],-ar+gn+this.ctx.prevPageLastElemOffset)[0];Ee.scale>=.01&&(De=this.pdf.internal.getFontSize(),this.pdf.setFontSize(De*Ee.scale),jn=this.lineWidth,this.lineWidth=jn*Ee.scale);var Ir=this.autoPaging!=="text";if(Ir||lr.y+lr.h<=Fn){if(Ir||lr.y>=gn&&lr.x<=_n){var pr=Ir?Ee.text:this.pdf.splitTextToSize(Ee.text,Ee.maxWidth||_n-lr.x)[0],to=te([JSON.parse(JSON.stringify(Te))],this.posX+this.margin[3],-ar+gn+this.ctx.prevPageLastElemOffset)[0],xi=Ir&&(Jt>rn||Jt<zt)&&q.call(this);xi&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],er,Wn,null).clip().discardPath()),this.pdf.text(pr,to.x,to.y,{angle:Ee.angle,align:$e,renderingMode:Ee.renderingMode}),xi&&this.pdf.restoreGraphicsState()}}else lr.y<Fn&&(this.ctx.prevPageLastElemOffset+=Fn-lr.y);Ee.scale>=.01&&(this.pdf.setFontSize(De),this.lineWidth=jn)}else Ee.scale>=.01&&(De=this.pdf.internal.getFontSize(),this.pdf.setFontSize(De*Ee.scale),jn=this.lineWidth,this.lineWidth=jn*Ee.scale),this.pdf.text(Ee.text,at.x+this.posX,at.y+this.posY,{angle:Ee.angle,align:$e,renderingMode:Ee.renderingMode,maxWidth:Ee.maxWidth}),Ee.scale>=.01&&(this.pdf.setFontSize(De),this.lineWidth=jn)},ge=function(Ee,$e,We,vt){We=We||0,vt=vt||0,this.pdf.internal.out(n(Ee+We)+" "+r($e+vt)+" l")},lt=function(Ee,$e,We){return this.pdf.lines(Ee,$e,We,null,null)},Ot=function(Ee,$e,We,vt,_t,at,Ft,Dt){this.pdf.internal.out([e(o(We+Ee)),e(l(vt+$e)),e(o(_t+Ee)),e(l(at+$e)),e(o(Ft+Ee)),e(l(Dt+$e)),"c"].join(" "))},gt=function(Ee,$e,We,vt){for(var _t=2*Math.PI,at=Math.PI/2;$e>We;)$e-=_t;var Ft=Math.abs(We-$e);Ft<_t&&vt&&(Ft=_t-Ft);for(var Dt=[],yn=vt?-1:1,De=$e;Ft>1e-5;){var jn=De+yn*Math.min(Ft,at);Dt.push(Tt.call(this,Ee,De,jn)),Ft-=Math.abs(jn-De),De=jn}return Dt},Tt=function(Ee,$e,We){var vt=(We-$e)/2,_t=Ee*Math.cos(vt),at=Ee*Math.sin(vt),Ft=_t,Dt=-at,yn=Ft*Ft+Dt*Dt,De=yn+Ft*_t+Dt*at,jn=4/3*(Math.sqrt(2*yn*De)-De)/(Ft*at-Dt*_t),Te=Ft-jn*Dt,Je=Dt+jn*Ft,Fe=Te,Re=-Je,Yt=vt+$e,rn=Math.cos(Yt),zt=Math.sin(Yt);return{x1:Ee*Math.cos($e),y1:Ee*Math.sin($e),x2:Te*rn-Je*zt,y2:Te*zt+Je*rn,x3:Fe*rn-Re*zt,y3:Fe*zt+Re*rn,x4:Ee*Math.cos(We),y4:Ee*Math.sin(We)}},Mt=function(Ee){return 180*Ee/Math.PI},on=function(Ee,$e,We,vt,_t,at){var Ft=Ee+.5*(We-Ee),Dt=$e+.5*(vt-$e),yn=_t+.5*(We-_t),De=at+.5*(vt-at),jn=Math.min(Ee,_t,Ft,yn),Te=Math.max(Ee,_t,Ft,yn),Je=Math.min($e,at,Dt,De),Fe=Math.max($e,at,Dt,De);return new p(jn,Je,Te-jn,Fe-Je)},Ut=function(Ee,$e,We,vt,_t,at,Ft,Dt){var yn,De,jn,Te,Je,Fe,Re,Yt,rn,zt,Jt,gn,fn,Fn,Wn=We-Ee,_n=vt-$e,er=_t-We,ar=at-vt,Fr=Ft-_t,lr=Dt-at;for(De=0;De<41;De++)rn=(Re=(jn=Ee+(yn=De/40)*Wn)+yn*((Je=We+yn*er)-jn))+yn*(Je+yn*(_t+yn*Fr-Je)-Re),zt=(Yt=(Te=$e+yn*_n)+yn*((Fe=vt+yn*ar)-Te))+yn*(Fe+yn*(at+yn*lr-Fe)-Yt),De==0?(Jt=rn,gn=zt,fn=rn,Fn=zt):(Jt=Math.min(Jt,rn),gn=Math.min(gn,zt),fn=Math.max(fn,rn),Fn=Math.max(Fn,zt));return new p(Math.round(Jt),Math.round(gn),Math.round(fn-Jt),Math.round(Fn-gn))},In=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var Ee,$e,We=(Ee=this.ctx.lineDash,$e=this.ctx.lineDashOffset,JSON.stringify({lineDash:Ee,lineDashOffset:$e}));this.prevLineDash!==We&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=We)}}})(gi.API),function(t){var e=function(l){var h,p,i,b,E,I,O,M,G,q;for(p=[],i=0,b=(l+=h="\0\0\0\0".slice(l.length%4||4)).length;b>i;i+=4)(E=(l.charCodeAt(i)<<24)+(l.charCodeAt(i+1)<<16)+(l.charCodeAt(i+2)<<8)+l.charCodeAt(i+3))!==0?(I=(E=((E=((E=((E=(E-(q=E%85))/85)-(G=E%85))/85)-(M=E%85))/85)-(O=E%85))/85)%85,p.push(I+33,O+33,M+33,G+33,q+33)):p.push(122);return function(Z,Y){for(var te=Y;te>0;te--)Z.pop()}(p,h.length),String.fromCharCode.apply(String,p)+"~>"},n=function(l){var h,p,i,b,E,I=String,O="length",M=255,G="charCodeAt",q="slice",Z="replace";for(l[q](-2),l=l[q](0,-2)[Z](/\s/g,"")[Z]("z","!!!!!"),i=[],b=0,E=(l+=h="uuuuu"[q](l[O]%5||5))[O];E>b;b+=5)p=52200625*(l[G](b)-33)+614125*(l[G](b+1)-33)+7225*(l[G](b+2)-33)+85*(l[G](b+3)-33)+(l[G](b+4)-33),i.push(M&p>>24,M&p>>16,M&p>>8,M&p);return function(Y,te){for(var be=te;be>0;be--)Y.pop()}(i,h[O]),I.fromCharCode.apply(I,i)},r=function(l){var h=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),h.test(l)===!1)return"";for(var p="",i=0;i<l.length;i+=2)p+=String.fromCharCode("0x"+(l[i]+l[i+1]));return p},o=function(l){for(var h=new Uint8Array(l.length),p=l.length;p--;)h[p]=l.charCodeAt(p);return l=(h=WI(h)).reduce(function(i,b){return i+String.fromCharCode(b)},"")};t.processDataByFilters=function(l,h){var p=0,i=l||"",b=[];for(typeof(h=h||[])=="string"&&(h=[h]),p=0;p<h.length;p+=1)switch(h[p]){case"ASCII85Decode":case"/ASCII85Decode":i=n(i),b.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":i=e(i),b.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":i=r(i),b.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":i=i.split("").map(function(E){return("0"+E.charCodeAt().toString(16)).slice(-2)}).join("")+">",b.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":i=o(i),b.push("/FlateDecode");break;default:throw new Error('The filter: "'+h[p]+'" is not implemented')}return{data:i,reverseChain:b.reverse().join(" ")}}}(gi.API),function(t){t.loadFile=function(e,n,r){return function(o,l,h){l=l!==!1,h=typeof h=="function"?h:function(){};var p=void 0;try{p=function(i,b,E){var I=new XMLHttpRequest,O=0,M=function(G){var q=G.length,Z=[],Y=String.fromCharCode;for(O=0;O<q;O+=1)Z.push(Y(255&G.charCodeAt(O)));return Z.join("")};if(I.open("GET",i,!b),I.overrideMimeType("text/plain; charset=x-user-defined"),b===!1&&(I.onload=function(){I.status===200?E(M(this.responseText)):E(void 0)}),I.send(null),b&&I.status===200)return M(I.responseText)}(o,l,h)}catch{}return p}(e,n,r)},t.loadImageFile=t.loadFile}(gi.API),function(t){function e(){return(yi.html2canvas?Promise.resolve(yi.html2canvas):jI(()=>Promise.resolve().then(()=>h2e),void 0)).catch(function(h){return Promise.reject(new Error("Could not load html2canvas: "+h))}).then(function(h){return h.default?h.default:h})}function n(){return(yi.DOMPurify?Promise.resolve(yi.DOMPurify):jI(()=>import("./purify.es-a-CayzAK.js"),[])).catch(function(h){return Promise.reject(new Error("Could not load dompurify: "+h))}).then(function(h){return h.default?h.default:h})}var r=function(h){var p=ss(h);return p==="undefined"?"undefined":p==="string"||h instanceof String?"string":p==="number"||h instanceof Number?"number":p==="function"||h instanceof Function?"function":h&&h.constructor===Array?"array":h&&h.nodeType===1?"element":p==="object"?"object":"unknown"},o=function(h,p){var i=document.createElement(h);for(var b in p.className&&(i.className=p.className),p.innerHTML&&p.dompurify&&(i.innerHTML=p.dompurify.sanitize(p.innerHTML)),p.style)i.style[b]=p.style[b];return i},l=function h(p){var i=Object.assign(h.convert(Promise.resolve()),JSON.parse(JSON.stringify(h.template))),b=h.convert(Promise.resolve(),i);return b=(b=b.setProgress(1,h,1,[h])).set(p)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(h,p){return h.__proto__=p||l.prototype,h},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(h,p){return this.then(function(){switch(p=p||function(i){switch(r(i)){case"string":return"string";case"element":return i.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(h)){case"string":return this.then(n).then(function(i){return this.set({src:o("div",{innerHTML:h,dompurify:i})})});case"element":return this.set({src:h});case"canvas":return this.set({canvas:h});case"img":return this.set({img:h});default:return this.error("Unknown source type.")}})},l.prototype.to=function(h){switch(h){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var h={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},p=function i(b,E){for(var I=b.nodeType===3?document.createTextNode(b.nodeValue):b.cloneNode(!1),O=b.firstChild;O;O=O.nextSibling)E!==!0&&O.nodeType===1&&O.nodeName==="SCRIPT"||I.appendChild(i(O,E));return b.nodeType===1&&(b.nodeName==="CANVAS"?(I.width=b.width,I.height=b.height,I.getContext("2d").drawImage(b,0,0)):b.nodeName!=="TEXTAREA"&&b.nodeName!=="SELECT"||(I.value=b.value),I.addEventListener("load",function(){I.scrollTop=b.scrollTop,I.scrollLeft=b.scrollLeft},!0)),I}(this.prop.src,this.opt.html2canvas.javascriptEnabled);p.tagName==="BODY"&&(h.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:h}),this.prop.container.appendChild(p),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var h=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(h).then(e).then(function(p){var i=Object.assign({},this.opt.html2canvas);return delete i.onrendered,p(this.prop.container,i)}).then(function(p){(this.opt.html2canvas.onrendered||function(){})(p),this.prop.canvas=p,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var h=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(h).then(e).then(function(p){var i=this.opt.jsPDF,b=this.opt.fontFaces,E=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,I=Object.assign({async:!0,allowTaint:!0,scale:E,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete I.onrendered,i.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,i.context2d.posX=this.opt.x,i.context2d.posY=this.opt.y,i.context2d.margin=this.opt.margin,i.context2d.fontFaces=b,b)for(var O=0;O<b.length;++O){var M=b[O],G=M.src.find(function(q){return q.format==="truetype"});G&&i.addFont(G.url,M.ref.name,M.ref.style)}return I.windowHeight=I.windowHeight||0,I.windowHeight=I.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):I.windowHeight,i.context2d.save(!0),p(this.prop.container,I)}).then(function(p){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(p),this.prop.canvas=p,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var h=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=h})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(h,p,i){return(i=i||"pdf").toLowerCase()==="img"||i.toLowerCase()==="image"?this.outputImg(h,p):this.outputPdf(h,p)},l.prototype.outputPdf=function(h,p){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(h,p)})},l.prototype.outputImg=function(h){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(h){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+h+'" is not supported.'}})},l.prototype.save=function(h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(h?{filename:h}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(h){if(r(h)!=="object")return this;var p=Object.keys(h||{}).map(function(i){if(i in l.template.prop)return function(){this.prop[i]=h[i]};switch(i){case"margin":return this.setMargin.bind(this,h.margin);case"jsPDF":return function(){return this.opt.jsPDF=h.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,h.pageSize);default:return function(){this.opt[i]=h[i]}}},this);return this.then(function(){return this.thenList(p)})},l.prototype.get=function(h,p){return this.then(function(){var i=h in l.template.prop?this.prop[h]:this.opt[h];return p?p(i):i})},l.prototype.setMargin=function(h){return this.then(function(){switch(r(h)){case"number":h=[h,h,h,h];case"array":if(h.length===2&&(h=[h[0],h[1],h[0],h[1]]),h.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=h}).then(this.setPageSize)},l.prototype.setPageSize=function(h){function p(i,b){return Math.floor(i*b/72*96)}return this.then(function(){(h=h||gi.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(h.inner={width:h.width-this.opt.margin[1]-this.opt.margin[3],height:h.height-this.opt.margin[0]-this.opt.margin[2]},h.inner.px={width:p(h.inner.width,h.k),height:p(h.inner.height,h.k)},h.inner.ratio=h.inner.height/h.inner.width),this.prop.pageSize=h})},l.prototype.setProgress=function(h,p,i,b){return h!=null&&(this.progress.val=h),p!=null&&(this.progress.state=p),i!=null&&(this.progress.n=i),b!=null&&(this.progress.stack=b),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(h,p,i,b){return this.setProgress(h?this.progress.val+h:null,p||null,i?this.progress.n+i:null,b?this.progress.stack.concat(b):null)},l.prototype.then=function(h,p){var i=this;return this.thenCore(h,p,function(b,E){return i.updateProgress(null,null,1,[b]),Promise.prototype.then.call(this,function(I){return i.updateProgress(null,b),I}).then(b,E).then(function(I){return i.updateProgress(1),I})})},l.prototype.thenCore=function(h,p,i){i=i||Promise.prototype.then,h&&(h=h.bind(this)),p&&(p=p.bind(this));var b=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:l.convert(Object.assign({},this),Promise.prototype),E=i.call(b,h,p);return l.convert(E,this.__proto__)},l.prototype.thenExternal=function(h,p){return Promise.prototype.then.call(this,h,p)},l.prototype.thenList=function(h){var p=this;return h.forEach(function(i){p=p.thenCore(i)}),p},l.prototype.catch=function(h){h&&(h=h.bind(this));var p=Promise.prototype.catch.call(this,h);return l.convert(p,this)},l.prototype.catchExternal=function(h){return Promise.prototype.catch.call(this,h)},l.prototype.error=function(h){return this.then(function(){throw new Error(h)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,gi.getPageSize=function(h,p,i){if(ss(h)==="object"){var b=h;h=b.orientation,p=b.unit||p,i=b.format||i}p=p||"mm",i=i||"a4",h=(""+(h||"P")).toLowerCase();var E,I=(""+i).toLowerCase(),O={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(p){case"pt":E=1;break;case"mm":E=72/25.4;break;case"cm":E=72/2.54;break;case"in":E=72;break;case"px":E=.75;break;case"pc":case"em":E=12;break;case"ex":E=6;break;default:throw"Invalid unit: "+p}var M,G=0,q=0;if(O.hasOwnProperty(I))G=O[I][1]/E,q=O[I][0]/E;else try{G=i[1],q=i[0]}catch{throw new Error("Invalid format: "+i)}if(h==="p"||h==="portrait")h="p",q>G&&(M=q,q=G,G=M);else{if(h!=="l"&&h!=="landscape")throw"Invalid orientation: "+h;h="l",G>q&&(M=q,q=G,G=M)}return{width:q,height:G,unit:p,k:E,orientation:h}},t.html=function(h,p){(p=p||{}).callback=p.callback||function(){},p.html2canvas=p.html2canvas||{},p.html2canvas.canvas=p.html2canvas.canvas||this.canvas,p.jsPDF=p.jsPDF||this,p.fontFaces=p.fontFaces?p.fontFaces.map(t5):null;var i=new l(p);return p.worker?i:i.from(h).doCallback()}}(gi.API),gi.API.addJS=function(t){return x3=t,this.internal.events.subscribe("postPutResources",function(){Xw=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Xw+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),w3=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+x3+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Xw!==void 0&&w3!==void 0&&this.internal.out("/Names <</JavaScript "+Xw+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=n.outline.render().split(/\r\n/),l=0;l<o.length;l++){var h=o[l],p=r.exec(h);if(p!=null){var i=p[1];n.internal.newObjectDeferredBegin(i,!1)}n.internal.write(h)}if(this.outline.createNamedDestinations){var b=this.internal.pages.length,E=[];for(l=0;l<b;l++){var I=n.internal.newObject();E.push(I);var O=n.internal.getPageInfo(l+1);n.internal.write("<< /D["+O.objId+" 0 R /XYZ null null null]>> endobj")}var M=n.internal.newObject();for(n.internal.write("<< /Names [ "),l=0;l<E.length;l++)n.internal.write("(page_"+(l+1)+")"+E[l]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+M+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,o,l){var h={title:o,options:l,children:[]};return r==null&&(r=this.root),r.children.push(h),h},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var o=0;o<r.children.length;o++)this.genIds_r(r.children[o])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,l=0;l<r.children.length;l++){var h=r.children[l];this.objStart(h),this.line("/Title "+this.makeString(h.title)),this.line("/Parent "+this.makeRef(r)),l>0&&this.line("/Prev "+this.makeRef(r.children[l-1])),l<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[l+1])),h.children.length>0&&(this.line("/First "+this.makeRef(h.children[0])),this.line("/Last "+this.makeRef(h.children[h.children.length-1])));var p=this.count=this.count_r({count:0},h);if(p>0&&this.line("/Count "+p),h.options&&h.options.pageNumber){var i=n.internal.getPageInfo(h.options.pageNumber);this.line("/Dest ["+i.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var b=0;b<r.children.length;b++)this.renderItems(r.children[b])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,o){for(var l=0;l<o.children.length;l++)r.count++,this.count_r(r,o.children[l]);return r.count}}])}(gi.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,o,l,h,p){var i,b=this.decode.DCT_DECODE,E=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=h||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(i=function(I){for(var O,M=256*I.charCodeAt(4)+I.charCodeAt(5),G=I.length,q={width:0,height:0,numcomponents:1},Z=4;Z<G;Z+=2){if(Z+=M,e.indexOf(I.charCodeAt(Z+1))!==-1){O=256*I.charCodeAt(Z+5)+I.charCodeAt(Z+6),q={width:256*I.charCodeAt(Z+7)+I.charCodeAt(Z+8),height:O,numcomponents:I.charCodeAt(Z+9)};break}M=256*I.charCodeAt(Z+2)+I.charCodeAt(Z+3)}return q}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:p=this.color_spaces.DEVICE_GRAY;break;case 4:p=this.color_spaces.DEVICE_CMYK;break;case 3:p=this.color_spaces.DEVICE_RGB}E={data:n,width:i.width,height:i.height,colorSpace:p,bitsPerComponent:8,filter:b,index:r,alias:o}}return E}}(gi.API);var by,Zw,C3,E3,B3,Cwe=function(){var t,e,n;function r(l){var h,p,i,b,E,I,O,M,G,q,Z,Y,te,be;for(this.data=l,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},I=null;;){switch(h=this.readUInt32(),G=(function(){var Pe,Se;for(Se=[],Pe=0;Pe<4;++Pe)Se.push(String.fromCharCode(this.data[this.pos++]));return Se}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(h);break;case"fcTL":I&&this.animation.frames.push(I),this.pos+=4,I={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},E=this.readUInt16(),b=this.readUInt16()||100,I.delay=1e3*E/b,I.disposeOp=this.data[this.pos++],I.blendOp=this.data[this.pos++],I.data=[];break;case"IDAT":case"fdAT":for(G==="fdAT"&&(this.pos+=4,h-=4),l=(I!=null?I.data:void 0)||this.imgData,Y=0;0<=h?Y<h:Y>h;0<=h?++Y:--Y)l.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(i=this.palette.length/3,this.transparency.indexed=this.read(h),this.transparency.indexed.length>i)throw new Error("More transparent colors than palette size");if((q=i-this.transparency.indexed.length)>0)for(te=0;0<=q?te<q:te>q;0<=q?++te:--te)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(h)[0];break;case 2:this.transparency.rgb=this.read(h)}break;case"tEXt":O=(Z=this.read(h)).indexOf(0),M=String.fromCharCode.apply(String,Z.slice(0,O)),this.text[M]=String.fromCharCode.apply(String,Z.slice(O+1));break;case"IEND":return I&&this.animation.frames.push(I),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(be=this.colorType)===4||be===6,p=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*p,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=h}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(l){var h,p;for(p=[],h=0;0<=l?h<l:h>l;0<=l?++h:--h)p.push(this.data[this.pos++]);return p},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(l){var h=this.pixelBitlength/8,p=new Uint8Array(this.width*this.height*h),i=0,b=this;if(l==null&&(l=this.imgData),l.length===0)return new Uint8Array(0);function E(I,O,M,G){var q,Z,Y,te,be,Pe,Se,Ie,Ae,ne,ue,ye,se,le,ge,lt,Ot,gt,Tt,Mt,on,Ut=Math.ceil((b.width-I)/M),In=Math.ceil((b.height-O)/G),Ee=b.width==Ut&&b.height==In;for(le=h*Ut,ye=Ee?p:new Uint8Array(le*In),Pe=l.length,se=0,Z=0;se<In&&i<Pe;){switch(l[i++]){case 0:for(te=Ot=0;Ot<le;te=Ot+=1)ye[Z++]=l[i++];break;case 1:for(te=gt=0;gt<le;te=gt+=1)q=l[i++],be=te<h?0:ye[Z-h],ye[Z++]=(q+be)%256;break;case 2:for(te=Tt=0;Tt<le;te=Tt+=1)q=l[i++],Y=(te-te%h)/h,ge=se&&ye[(se-1)*le+Y*h+te%h],ye[Z++]=(ge+q)%256;break;case 3:for(te=Mt=0;Mt<le;te=Mt+=1)q=l[i++],Y=(te-te%h)/h,be=te<h?0:ye[Z-h],ge=se&&ye[(se-1)*le+Y*h+te%h],ye[Z++]=(q+Math.floor((be+ge)/2))%256;break;case 4:for(te=on=0;on<le;te=on+=1)q=l[i++],Y=(te-te%h)/h,be=te<h?0:ye[Z-h],se===0?ge=lt=0:(ge=ye[(se-1)*le+Y*h+te%h],lt=Y&&ye[(se-1)*le+(Y-1)*h+te%h]),Se=be+ge-lt,Ie=Math.abs(Se-be),ne=Math.abs(Se-ge),ue=Math.abs(Se-lt),Ae=Ie<=ne&&Ie<=ue?be:ne<=ue?ge:lt,ye[Z++]=(q+Ae)%256;break;default:throw new Error("Invalid filter algorithm: "+l[i-1])}if(!Ee){var $e=((O+se*G)*b.width+I)*h,We=se*le;for(te=0;te<Ut;te+=1){for(var vt=0;vt<h;vt+=1)p[$e++]=ye[We++];$e+=(M-1)*h}}se++}}return l=nwe(l),b.interlaceMethod==1?(E(0,0,8,8),E(4,0,8,8),E(0,4,4,8),E(2,0,4,4),E(0,2,2,4),E(1,0,2,2),E(0,1,1,2)):E(0,0,1,1),p},r.prototype.decodePalette=function(){var l,h,p,i,b,E,I,O,M;for(p=this.palette,E=this.transparency.indexed||[],b=new Uint8Array((E.length||0)+p.length),i=0,l=0,h=I=0,O=p.length;I<O;h=I+=3)b[i++]=p[h],b[i++]=p[h+1],b[i++]=p[h+2],b[i++]=(M=E[l++])!=null?M:255;return b},r.prototype.copyToImageData=function(l,h){var p,i,b,E,I,O,M,G,q,Z,Y;if(i=this.colors,q=null,p=this.hasAlphaChannel,this.palette.length&&(q=(Y=this._decodedPalette)!=null?Y:this._decodedPalette=this.decodePalette(),i=4,p=!0),G=(b=l.data||l).length,I=q||h,E=O=0,i===1)for(;E<G;)M=q?4*h[E/4]:O,Z=I[M++],b[E++]=Z,b[E++]=Z,b[E++]=Z,b[E++]=p?I[M++]:255,O=M;else for(;E<G;)M=q?4*h[E/4]:O,b[E++]=I[M++],b[E++]=I[M++],b[E++]=I[M++],b[E++]=p?I[M++]:255,O=M},r.prototype.decode=function(){var l;return l=new Uint8Array(this.width*this.height*4),this.copyToImageData(l,this.decodePixels()),l};var o=function(){if(Object.prototype.toString.call(yi)==="[object Window]"){try{e=yi.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return o(),t=function(l){var h;if(o()===!0)return n.width=l.width,n.height=l.height,n.clearRect(0,0,l.width,l.height),n.putImageData(l,0,0),(h=new Image).src=e.toDataURL(),h;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(l){var h,p,i,b,E,I,O,M;if(this.animation){for(M=[],p=E=0,I=(O=this.animation.frames).length;E<I;p=++E)h=O[p],i=l.createImageData(h.width,h.height),b=this.decodePixels(new Uint8Array(h.data)),this.copyToImageData(i,b),h.imageData=i,M.push(h.image=t(i));return M}},r.prototype.renderFrame=function(l,h){var p,i,b;return p=(i=this.animation.frames)[h],b=i[h-1],h===0&&l.clearRect(0,0,this.width,this.height),(b!=null?b.disposeOp:void 0)===1?l.clearRect(b.xOffset,b.yOffset,b.width,b.height):(b!=null?b.disposeOp:void 0)===2&&l.putImageData(b.imageData,b.xOffset,b.yOffset),p.blendOp===0&&l.clearRect(p.xOffset,p.yOffset,p.width,p.height),l.drawImage(p.image,p.xOffset,p.yOffset)},r.prototype.animate=function(l){var h,p,i,b,E,I,O=this;return p=0,I=this.animation,b=I.numFrames,i=I.frames,E=I.numPlays,(h=function(){var M,G;if(M=p++%b,G=i[M],O.renderFrame(l,M),b>1&&p/b<E)return O.animation._timeout=setTimeout(h,G.delay)})()},r.prototype.stopAnimation=function(){var l;return clearTimeout((l=this.animation)!=null?l._timeout:void 0)},r.prototype.render=function(l){var h,p;return l._png&&l._png.stopAnimation(),l._png=this,l.width=this.width,l.height=this.height,h=l.getContext("2d"),this.animation?(this.decodeFrames(h),this.animate(h)):(p=h.createImageData(this.width,this.height),this.copyToImageData(p,this.decodePixels()),h.putImageData(p,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Ewe(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,o=t[e++],l=o>>7,h=1<<(7&o)+1;t[e++],t[e++];var p=null,i=null;l&&(p=e,i=h,e+=3*h);var b=!0,E=[],I=0,O=null,M=0,G=null;for(this.width=n,this.height=r;b&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,G=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((se=t[e++])>=0))throw Error("Invalid block size");if(se===0)break;e+=se}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var q=t[e++];I=t[e++]|t[e++]<<8,O=t[e++],!(1&q)&&(O=null),M=q>>2&7,e++;break;case 254:for(;;){if(!((se=t[e++])>=0))throw Error("Invalid block size");if(se===0)break;e+=se}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var Z=t[e++]|t[e++]<<8,Y=t[e++]|t[e++]<<8,te=t[e++]|t[e++]<<8,be=t[e++]|t[e++]<<8,Pe=t[e++],Se=Pe>>6&1,Ie=1<<(7&Pe)+1,Ae=p,ne=i,ue=!1;Pe>>7&&(ue=!0,Ae=e,ne=Ie,e+=3*Ie);var ye=e;for(e++;;){var se;if(!((se=t[e++])>=0))throw Error("Invalid block size");if(se===0)break;e+=se}E.push({x:Z,y:Y,width:te,height:be,has_local_palette:ue,palette_offset:Ae,palette_size:ne,data_offset:ye,data_length:e-ye,transparent_index:O,interlaced:!!Se,delay:I,disposal:M});break;case 59:b=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return E.length},this.loopCount=function(){return G},this.frameInfo=function(le){if(le<0||le>=E.length)throw new Error("Frame index out of range.");return E[le]},this.decodeAndBlitFrameBGRA=function(le,ge){var lt=this.frameInfo(le),Ot=lt.width*lt.height,gt=new Uint8Array(Ot);S3(t,lt.data_offset,gt,Ot);var Tt=lt.palette_offset,Mt=lt.transparent_index;Mt===null&&(Mt=256);var on=lt.width,Ut=n-on,In=on,Ee=4*(lt.y*n+lt.x),$e=4*((lt.y+lt.height)*n+lt.x),We=Ee,vt=4*Ut;lt.interlaced===!0&&(vt+=4*n*7);for(var _t=8,at=0,Ft=gt.length;at<Ft;++at){var Dt=gt[at];if(In===0&&(In=on,(We+=vt)>=$e&&(vt=4*Ut+4*n*(_t-1),We=Ee+(on+Ut)*(_t<<1),_t>>=1)),Dt===Mt)We+=4;else{var yn=t[Tt+3*Dt],De=t[Tt+3*Dt+1],jn=t[Tt+3*Dt+2];ge[We++]=jn,ge[We++]=De,ge[We++]=yn,ge[We++]=255}--In}},this.decodeAndBlitFrameRGBA=function(le,ge){var lt=this.frameInfo(le),Ot=lt.width*lt.height,gt=new Uint8Array(Ot);S3(t,lt.data_offset,gt,Ot);var Tt=lt.palette_offset,Mt=lt.transparent_index;Mt===null&&(Mt=256);var on=lt.width,Ut=n-on,In=on,Ee=4*(lt.y*n+lt.x),$e=4*((lt.y+lt.height)*n+lt.x),We=Ee,vt=4*Ut;lt.interlaced===!0&&(vt+=4*n*7);for(var _t=8,at=0,Ft=gt.length;at<Ft;++at){var Dt=gt[at];if(In===0&&(In=on,(We+=vt)>=$e&&(vt=4*Ut+4*n*(_t-1),We=Ee+(on+Ut)*(_t<<1),_t>>=1)),Dt===Mt)We+=4;else{var yn=t[Tt+3*Dt],De=t[Tt+3*Dt+1],jn=t[Tt+3*Dt+2];ge[We++]=yn,ge[We++]=De,ge[We++]=jn,ge[We++]=255}--In}}}function S3(t,e,n,r){for(var o=t[e++],l=1<<o,h=l+1,p=h+1,i=o+1,b=(1<<i)-1,E=0,I=0,O=0,M=t[e++],G=new Int32Array(4096),q=null;;){for(;E<16&&M!==0;)I|=t[e++]<<E,E+=8,M===1?M=t[e++]:--M;if(E<i)break;var Z=I&b;if(I>>=i,E-=i,Z!==l){if(Z===h)break;for(var Y=Z<p?Z:q,te=0,be=Y;be>l;)be=G[be]>>8,++te;var Pe=be;if(O+te+(Y!==Z?1:0)>r)return void bs.log("Warning, gif stream longer than expected.");n[O++]=Pe;var Se=O+=te;for(Y!==Z&&(n[O++]=Pe),be=Y;te--;)be=G[be],n[--Se]=255&be,be>>=8;q!==null&&p<4096&&(G[p++]=q<<8|Pe,p>=b+1&&i<12&&(++i,b=b<<1|1)),q=Z}else p=h+1,b=(1<<(i=o+1))-1,q=null}return O!==r&&bs.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function K2(t){var e,n,r,o,l,h=Math.floor,p=new Array(64),i=new Array(64),b=new Array(64),E=new Array(64),I=new Array(65535),O=new Array(65535),M=new Array(64),G=new Array(64),q=[],Z=0,Y=7,te=new Array(64),be=new Array(64),Pe=new Array(64),Se=new Array(256),Ie=new Array(2048),Ae=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],ne=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],ue=[0,1,2,3,4,5,6,7,8,9,10,11],ye=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],se=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],le=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ge=[0,1,2,3,4,5,6,7,8,9,10,11],lt=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Ot=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function gt(Ee,$e){for(var We=0,vt=0,_t=new Array,at=1;at<=16;at++){for(var Ft=1;Ft<=Ee[at];Ft++)_t[$e[vt]]=[],_t[$e[vt]][0]=We,_t[$e[vt]][1]=at,vt++,We++;We*=2}return _t}function Tt(Ee){for(var $e=Ee[0],We=Ee[1]-1;We>=0;)$e&1<<We&&(Z|=1<<Y),We--,--Y<0&&(Z==255?(Mt(255),Mt(0)):Mt(Z),Y=7,Z=0)}function Mt(Ee){q.push(Ee)}function on(Ee){Mt(Ee>>8&255),Mt(255&Ee)}function Ut(Ee,$e,We,vt,_t){for(var at,Ft=_t[0],Dt=_t[240],yn=function(zt,Jt){var gn,fn,Fn,Wn,_n,er,ar,Fr,lr,Ir,pr=0;for(lr=0;lr<8;++lr){gn=zt[pr],fn=zt[pr+1],Fn=zt[pr+2],Wn=zt[pr+3],_n=zt[pr+4],er=zt[pr+5],ar=zt[pr+6];var to=gn+(Fr=zt[pr+7]),xi=gn-Fr,No=fn+ar,Fi=fn-ar,pi=Fn+er,Wi=Fn-er,Ti=Wn+_n,Jr=Wn-_n,Xi=to+Ti,Ns=to-Ti,ns=No+pi,lo=No-pi;zt[pr]=Xi+ns,zt[pr+4]=Xi-ns;var Gr=.707106781*(lo+Ns);zt[pr+2]=Ns+Gr,zt[pr+6]=Ns-Gr;var Ni=.382683433*((Xi=Jr+Wi)-(lo=Fi+xi)),Pa=.5411961*Xi+Ni,Zo=1.306562965*lo+Ni,jt=.707106781*(ns=Wi+Fi),we=xi+jt,Ce=xi-jt;zt[pr+5]=Ce+Pa,zt[pr+3]=Ce-Pa,zt[pr+1]=we+Zo,zt[pr+7]=we-Zo,pr+=8}for(pr=0,lr=0;lr<8;++lr){gn=zt[pr],fn=zt[pr+8],Fn=zt[pr+16],Wn=zt[pr+24],_n=zt[pr+32],er=zt[pr+40],ar=zt[pr+48];var Ye=gn+(Fr=zt[pr+56]),dt=gn-Fr,ot=fn+ar,wt=fn-ar,Vt=Fn+er,St=Fn-er,Gt=Wn+_n,nn=Wn-_n,qt=Ye+Gt,En=Ye-Gt,zn=ot+Vt,Vn=ot-Vt;zt[pr]=qt+zn,zt[pr+32]=qt-zn;var gr=.707106781*(Vn+En);zt[pr+16]=En+gr,zt[pr+48]=En-gr;var Er=.382683433*((qt=nn+St)-(Vn=wt+dt)),Tr=.5411961*qt+Er,Br=1.306562965*Vn+Er,hi=.707106781*(zn=St+wt),mi=dt+hi,Mr=dt-hi;zt[pr+40]=Mr+Tr,zt[pr+24]=Mr-Tr,zt[pr+8]=mi+Br,zt[pr+56]=mi-Br,pr++}for(lr=0;lr<64;++lr)Ir=zt[lr]*Jt[lr],M[lr]=Ir>0?Ir+.5|0:Ir-.5|0;return M}(Ee,$e),De=0;De<64;++De)G[Ae[De]]=yn[De];var jn=G[0]-We;We=G[0],jn==0?Tt(vt[0]):(Tt(vt[O[at=32767+jn]]),Tt(I[at]));for(var Te=63;Te>0&&G[Te]==0;)Te--;if(Te==0)return Tt(Ft),We;for(var Je,Fe=1;Fe<=Te;){for(var Re=Fe;G[Fe]==0&&Fe<=Te;)++Fe;var Yt=Fe-Re;if(Yt>=16){Je=Yt>>4;for(var rn=1;rn<=Je;++rn)Tt(Dt);Yt&=15}at=32767+G[Fe],Tt(_t[(Yt<<4)+O[at]]),Tt(I[at]),Fe++}return Te!=63&&Tt(Ft),We}function In(Ee){Ee=Math.min(Math.max(Ee,1),100),l!=Ee&&(function($e){for(var We=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],vt=0;vt<64;vt++){var _t=h((We[vt]*$e+50)/100);_t=Math.min(Math.max(_t,1),255),p[Ae[vt]]=_t}for(var at=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ft=0;Ft<64;Ft++){var Dt=h((at[Ft]*$e+50)/100);Dt=Math.min(Math.max(Dt,1),255),i[Ae[Ft]]=Dt}for(var yn=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],De=0,jn=0;jn<8;jn++)for(var Te=0;Te<8;Te++)b[De]=1/(p[Ae[De]]*yn[jn]*yn[Te]*8),E[De]=1/(i[Ae[De]]*yn[jn]*yn[Te]*8),De++}(Ee<50?Math.floor(5e3/Ee):Math.floor(200-2*Ee)),l=Ee)}this.encode=function(Ee,$e){$e&&In($e),q=new Array,Z=0,Y=7,on(65496),on(65504),on(16),Mt(74),Mt(70),Mt(73),Mt(70),Mt(0),Mt(1),Mt(1),Mt(0),on(1),on(1),Mt(0),Mt(0),function(){on(65499),on(132),Mt(0);for(var fn=0;fn<64;fn++)Mt(p[fn]);Mt(1);for(var Fn=0;Fn<64;Fn++)Mt(i[Fn])}(),function(fn,Fn){on(65472),on(17),Mt(8),on(Fn),on(fn),Mt(3),Mt(1),Mt(17),Mt(0),Mt(2),Mt(17),Mt(1),Mt(3),Mt(17),Mt(1)}(Ee.width,Ee.height),function(){on(65476),on(418),Mt(0);for(var fn=0;fn<16;fn++)Mt(ne[fn+1]);for(var Fn=0;Fn<=11;Fn++)Mt(ue[Fn]);Mt(16);for(var Wn=0;Wn<16;Wn++)Mt(ye[Wn+1]);for(var _n=0;_n<=161;_n++)Mt(se[_n]);Mt(1);for(var er=0;er<16;er++)Mt(le[er+1]);for(var ar=0;ar<=11;ar++)Mt(ge[ar]);Mt(17);for(var Fr=0;Fr<16;Fr++)Mt(lt[Fr+1]);for(var lr=0;lr<=161;lr++)Mt(Ot[lr])}(),on(65498),on(12),Mt(3),Mt(1),Mt(0),Mt(2),Mt(17),Mt(3),Mt(17),Mt(0),Mt(63),Mt(0);var We=0,vt=0,_t=0;Z=0,Y=7,this.encode.displayName="_encode_";for(var at,Ft,Dt,yn,De,jn,Te,Je,Fe,Re=Ee.data,Yt=Ee.width,rn=Ee.height,zt=4*Yt,Jt=0;Jt<rn;){for(at=0;at<zt;){for(De=zt*Jt+at,Te=-1,Je=0,Fe=0;Fe<64;Fe++)jn=De+(Je=Fe>>3)*zt+(Te=4*(7&Fe)),Jt+Je>=rn&&(jn-=zt*(Jt+1+Je-rn)),at+Te>=zt&&(jn-=at+Te-zt+4),Ft=Re[jn++],Dt=Re[jn++],yn=Re[jn++],te[Fe]=(Ie[Ft]+Ie[Dt+256>>0]+Ie[yn+512>>0]>>16)-128,be[Fe]=(Ie[Ft+768>>0]+Ie[Dt+1024>>0]+Ie[yn+1280>>0]>>16)-128,Pe[Fe]=(Ie[Ft+1280>>0]+Ie[Dt+1536>>0]+Ie[yn+1792>>0]>>16)-128;We=Ut(te,b,We,e,r),vt=Ut(be,E,vt,n,o),_t=Ut(Pe,E,_t,n,o),at+=32}Jt+=8}if(Y>=0){var gn=[];gn[1]=Y+1,gn[0]=(1<<Y+1)-1,Tt(gn)}return on(65497),new Uint8Array(q)},t=t||50,function(){for(var Ee=String.fromCharCode,$e=0;$e<256;$e++)Se[$e]=Ee($e)}(),e=gt(ne,ue),n=gt(le,ge),r=gt(ye,se),o=gt(lt,Ot),function(){for(var Ee=1,$e=2,We=1;We<=15;We++){for(var vt=Ee;vt<$e;vt++)O[32767+vt]=We,I[32767+vt]=[],I[32767+vt][1]=We,I[32767+vt][0]=vt;for(var _t=-($e-1);_t<=-Ee;_t++)O[32767+_t]=We,I[32767+_t]=[],I[32767+_t][1]=We,I[32767+_t][0]=$e-1+_t;Ee<<=1,$e<<=1}}(),function(){for(var Ee=0;Ee<256;Ee++)Ie[Ee]=19595*Ee,Ie[Ee+256>>0]=38470*Ee,Ie[Ee+512>>0]=7471*Ee+32768,Ie[Ee+768>>0]=-11059*Ee,Ie[Ee+1024>>0]=-21709*Ee,Ie[Ee+1280>>0]=32768*Ee+8421375,Ie[Ee+1536>>0]=-27439*Ee,Ie[Ee+1792>>0]=-5329*Ee}(),In(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function sd(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function T3(t){function e(ne){if(!ne)throw Error("assert :P")}function n(ne,ue,ye){for(var se=0;4>se;se++)if(ne[ue+se]!=ye.charCodeAt(se))return!0;return!1}function r(ne,ue,ye,se,le){for(var ge=0;ge<le;ge++)ne[ue+ge]=ye[se+ge]}function o(ne,ue,ye,se){for(var le=0;le<se;le++)ne[ue+le]=ye}function l(ne){return new Int32Array(ne)}function h(ne,ue){for(var ye=[],se=0;se<ne;se++)ye.push(new ue);return ye}function p(ne,ue){var ye=[];return function se(le,ge,lt){for(var Ot=lt[ge],gt=0;gt<Ot&&(le.push(lt.length>ge+1?[]:new ue),!(lt.length<ge+1));gt++)se(le[gt],ge+1,lt)}(ye,0,ne),ye}var i=function(){var ne=this;function ue(D,H){for(var oe=1<<H-1>>>0;D&oe;)oe>>>=1;return oe?(D&oe-1)+oe:D}function ye(D,H,oe,pe,Me){e(!(pe%oe));do D[H+(pe-=oe)]=Me;while(0<pe)}function se(D,H,oe,pe,Me){if(e(2328>=Me),512>=Me)var Ge=l(512);else if((Ge=l(Me))==null)return 0;return function(Ke,Ze,nt,He,Kt,vn){var pn,un,Zt=Ze,Pn=1<<nt,Wt=l(16),en=l(16);for(e(Kt!=0),e(He!=null),e(Ke!=null),e(0<nt),un=0;un<Kt;++un){if(15<He[un])return 0;++Wt[He[un]]}if(Wt[0]==Kt)return 0;for(en[1]=0,pn=1;15>pn;++pn){if(Wt[pn]>1<<pn)return 0;en[pn+1]=en[pn]+Wt[pn]}for(un=0;un<Kt;++un)pn=He[un],0<He[un]&&(vn[en[pn]++]=un);if(en[15]==1)return(He=new le).g=0,He.value=vn[0],ye(Ke,Zt,1,Pn,He),Pn;var Gn,Xn=-1,qn=Pn-1,Pr=0,Cr=1,Kr=1,wr=1<<nt;for(un=0,pn=1,Kt=2;pn<=nt;++pn,Kt<<=1){if(Cr+=Kr<<=1,0>(Kr-=Wt[pn]))return 0;for(;0<Wt[pn];--Wt[pn])(He=new le).g=pn,He.value=vn[un++],ye(Ke,Zt+Pr,Kt,wr,He),Pr=ue(Pr,pn)}for(pn=nt+1,Kt=2;15>=pn;++pn,Kt<<=1){if(Cr+=Kr<<=1,0>(Kr-=Wt[pn]))return 0;for(;0<Wt[pn];--Wt[pn]){if(He=new le,(Pr&qn)!=Xn){for(Zt+=wr,Gn=1<<(Xn=pn)-nt;15>Xn&&!(0>=(Gn-=Wt[Xn]));)++Xn,Gn<<=1;Pn+=wr=1<<(Gn=Xn-nt),Ke[Ze+(Xn=Pr&qn)].g=Gn+nt,Ke[Ze+Xn].value=Zt-Ze-Xn}He.g=pn-nt,He.value=vn[un++],ye(Ke,Zt+(Pr>>nt),Kt,wr,He),Pr=ue(Pr,pn)}}return Cr!=2*en[15]-1?0:Pn}(D,H,oe,pe,Me,Ge)}function le(){this.value=this.g=0}function ge(){this.value=this.g=0}function lt(){this.G=h(5,le),this.H=l(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=h(rs,ge)}function Ot(D,H,oe,pe){e(D!=null),e(H!=null),e(2147483648>pe),D.Ca=254,D.I=0,D.b=-8,D.Ka=0,D.oa=H,D.pa=oe,D.Jd=H,D.Yc=oe+pe,D.Zc=4<=pe?oe+pe-4+1:oe,at(D)}function gt(D,H){for(var oe=0;0<H--;)oe|=Dt(D,128)<<H;return oe}function Tt(D,H){var oe=gt(D,H);return Ft(D)?-oe:oe}function Mt(D,H,oe,pe){var Me,Ge=0;for(e(D!=null),e(H!=null),e(4294967288>pe),D.Sb=pe,D.Ra=0,D.u=0,D.h=0,4<pe&&(pe=4),Me=0;Me<pe;++Me)Ge+=H[oe+Me]<<8*Me;D.Ra=Ge,D.bb=pe,D.oa=H,D.pa=oe}function on(D){for(;8<=D.u&&D.bb<D.Sb;)D.Ra>>>=8,D.Ra+=D.oa[D.pa+D.bb]<<Nn-8>>>0,++D.bb,D.u-=8;We(D)&&(D.h=1,D.u=0)}function Ut(D,H){if(e(0<=H),!D.h&&H<=Ju){var oe=$e(D)&ho[H];return D.u+=H,on(D),oe}return D.h=1,D.u=0}function In(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Ee(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function $e(D){return D.Ra>>>(D.u&Nn-1)>>>0}function We(D){return e(D.bb<=D.Sb),D.h||D.bb==D.Sb&&D.u>Nn}function vt(D,H){D.u=H,D.h=We(D)}function _t(D){D.u>=Cd&&(e(D.u>=Cd),on(D))}function at(D){e(D!=null&&D.oa!=null),D.pa<D.Zc?(D.I=(D.oa[D.pa++]|D.I<<8)>>>0,D.b+=8):(e(D!=null&&D.oa!=null),D.pa<D.Yc?(D.b+=8,D.I=D.oa[D.pa++]|D.I<<8):D.Ka?D.b=0:(D.I<<=8,D.b+=8,D.Ka=1))}function Ft(D){return gt(D,1)}function Dt(D,H){var oe=D.Ca;0>D.b&&at(D);var pe=D.b,Me=oe*H>>>8,Ge=(D.I>>>pe>Me)+0;for(Ge?(oe-=Me,D.I-=Me+1<<pe>>>0):oe=Me+1,pe=oe,Me=0;256<=pe;)Me+=8,pe>>=8;return pe=7^Me+Ys[pe],D.b-=pe,D.Ca=(oe<<pe)-1,Ge}function yn(D,H,oe){D[H+0]=oe>>24&255,D[H+1]=oe>>16&255,D[H+2]=oe>>8&255,D[H+3]=oe>>0&255}function De(D,H){return D[H+0]<<0|D[H+1]<<8}function jn(D,H){return De(D,H)|D[H+2]<<16}function Te(D,H){return De(D,H)|De(D,H+2)<<16}function Je(D,H){var oe=1<<H;return e(D!=null),e(0<H),D.X=l(oe),D.X==null?0:(D.Mb=32-H,D.Xa=H,1)}function Fe(D,H){e(D!=null),e(H!=null),e(D.Xa==H.Xa),r(H.X,0,D.X,0,1<<H.Xa)}function Re(){this.X=[],this.Xa=this.Mb=0}function Yt(D,H,oe,pe){e(oe!=null),e(pe!=null);var Me=oe[0],Ge=pe[0];return Me==0&&(Me=(D*Ge+H/2)/H),Ge==0&&(Ge=(H*Me+D/2)/D),0>=Me||0>=Ge?0:(oe[0]=Me,pe[0]=Ge,1)}function rn(D,H){return D+(1<<H)-1>>>H}function zt(D,H){return((4278255360&D)+(4278255360&H)>>>0&4278255360)+((16711935&D)+(16711935&H)>>>0&16711935)>>>0}function Jt(D,H){ne[H]=function(oe,pe,Me,Ge,Ke,Ze,nt){var He;for(He=0;He<Ke;++He){var Kt=ne[D](Ze[nt+He-1],Me,Ge+He);Ze[nt+He]=zt(oe[pe+He],Kt)}}}function gn(){this.ud=this.hd=this.jd=0}function fn(D,H){return((4278124286&(D^H))>>>1)+(D&H)>>>0}function Fn(D){return 0<=D&&256>D?D:0>D?0:255<D?255:void 0}function Wn(D,H){return Fn(D+(D-H+.5>>1))}function _n(D,H,oe){return Math.abs(H-oe)-Math.abs(D-oe)}function er(D,H,oe,pe,Me,Ge,Ke){for(pe=Ge[Ke-1],oe=0;oe<Me;++oe)Ge[Ke+oe]=pe=zt(D[H+oe],pe)}function ar(D,H,oe,pe,Me){var Ge;for(Ge=0;Ge<oe;++Ge){var Ke=D[H+Ge],Ze=Ke>>8&255,nt=16711935&(nt=(nt=16711935&Ke)+((Ze<<16)+Ze));pe[Me+Ge]=(4278255360&Ke)+nt>>>0}}function Fr(D,H){H.jd=D>>0&255,H.hd=D>>8&255,H.ud=D>>16&255}function lr(D,H,oe,pe,Me,Ge){var Ke;for(Ke=0;Ke<pe;++Ke){var Ze=H[oe+Ke],nt=Ze>>>8,He=Ze,Kt=255&(Kt=(Kt=Ze>>>16)+((D.jd<<24>>24)*(nt<<24>>24)>>>5));He=255&(He=(He=He+((D.hd<<24>>24)*(nt<<24>>24)>>>5))+((D.ud<<24>>24)*(Kt<<24>>24)>>>5)),Me[Ge+Ke]=(4278255360&Ze)+(Kt<<16)+He}}function Ir(D,H,oe,pe,Me){ne[H]=function(Ge,Ke,Ze,nt,He,Kt,vn,pn,un){for(nt=vn;nt<pn;++nt)for(vn=0;vn<un;++vn)He[Kt++]=Me(Ze[pe(Ge[Ke++])])},ne[D]=function(Ge,Ke,Ze,nt,He,Kt,vn){var pn=8>>Ge.b,un=Ge.Ea,Zt=Ge.K[0],Pn=Ge.w;if(8>pn)for(Ge=(1<<Ge.b)-1,Pn=(1<<pn)-1;Ke<Ze;++Ke){var Wt,en=0;for(Wt=0;Wt<un;++Wt)Wt&Ge||(en=pe(nt[He++])),Kt[vn++]=Me(Zt[en&Pn]),en>>=pn}else ne["VP8LMapColor"+oe](nt,He,Zt,Pn,Kt,vn,Ke,Ze,un)}}function pr(D,H,oe,pe,Me){for(oe=H+oe;H<oe;){var Ge=D[H++];pe[Me++]=Ge>>16&255,pe[Me++]=Ge>>8&255,pe[Me++]=Ge>>0&255}}function to(D,H,oe,pe,Me){for(oe=H+oe;H<oe;){var Ge=D[H++];pe[Me++]=Ge>>16&255,pe[Me++]=Ge>>8&255,pe[Me++]=Ge>>0&255,pe[Me++]=Ge>>24&255}}function xi(D,H,oe,pe,Me){for(oe=H+oe;H<oe;){var Ge=(Ke=D[H++])>>16&240|Ke>>12&15,Ke=Ke>>0&240|Ke>>28&15;pe[Me++]=Ge,pe[Me++]=Ke}}function No(D,H,oe,pe,Me){for(oe=H+oe;H<oe;){var Ge=(Ke=D[H++])>>16&248|Ke>>13&7,Ke=Ke>>5&224|Ke>>3&31;pe[Me++]=Ge,pe[Me++]=Ke}}function Fi(D,H,oe,pe,Me){for(oe=H+oe;H<oe;){var Ge=D[H++];pe[Me++]=Ge>>0&255,pe[Me++]=Ge>>8&255,pe[Me++]=Ge>>16&255}}function pi(D,H,oe,pe,Me,Ge){if(Ge==0)for(oe=H+oe;H<oe;)yn(pe,((Ge=D[H++])[0]>>24|Ge[1]>>8&65280|Ge[2]<<8&16711680|Ge[3]<<24)>>>0),Me+=32;else r(pe,Me,D,H,oe)}function Wi(D,H){ne[H][0]=ne[D+"0"],ne[H][1]=ne[D+"1"],ne[H][2]=ne[D+"2"],ne[H][3]=ne[D+"3"],ne[H][4]=ne[D+"4"],ne[H][5]=ne[D+"5"],ne[H][6]=ne[D+"6"],ne[H][7]=ne[D+"7"],ne[H][8]=ne[D+"8"],ne[H][9]=ne[D+"9"],ne[H][10]=ne[D+"10"],ne[H][11]=ne[D+"11"],ne[H][12]=ne[D+"12"],ne[H][13]=ne[D+"13"],ne[H][14]=ne[D+"0"],ne[H][15]=ne[D+"0"]}function Ti(D){return D==Bf||D==FA||D==Sf||D==ym}function Jr(){this.eb=[],this.size=this.A=this.fb=0}function Xi(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ns(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Jr,this.f.kb=new Xi,this.sd=null}function ns(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function lo(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Gr(D){return alert("todo:WebPSamplerProcessPlane"),D.T}function Ni(D,H){var oe=D.T,pe=H.ba.f.RGBA,Me=pe.eb,Ge=pe.fb+D.ka*pe.A,Ke=Xa[H.ba.S],Ze=D.y,nt=D.O,He=D.f,Kt=D.N,vn=D.ea,pn=D.W,un=H.cc,Zt=H.dc,Pn=H.Mc,Wt=H.Nc,en=D.ka,Gn=D.ka+D.T,Xn=D.U,qn=Xn+1>>1;for(en==0?Ke(Ze,nt,null,null,He,Kt,vn,pn,He,Kt,vn,pn,Me,Ge,null,null,Xn):(Ke(H.ec,H.fc,Ze,nt,un,Zt,Pn,Wt,He,Kt,vn,pn,Me,Ge-pe.A,Me,Ge,Xn),++oe);en+2<Gn;en+=2)un=He,Zt=Kt,Pn=vn,Wt=pn,Kt+=D.Rc,pn+=D.Rc,Ge+=2*pe.A,Ke(Ze,(nt+=2*D.fa)-D.fa,Ze,nt,un,Zt,Pn,Wt,He,Kt,vn,pn,Me,Ge-pe.A,Me,Ge,Xn);return nt+=D.fa,D.j+Gn<D.o?(r(H.ec,H.fc,Ze,nt,Xn),r(H.cc,H.dc,He,Kt,qn),r(H.Mc,H.Nc,vn,pn,qn),oe--):1&Gn||Ke(Ze,nt,null,null,He,Kt,vn,pn,He,Kt,vn,pn,Me,Ge+pe.A,null,null,Xn),oe}function Pa(D,H,oe){var pe=D.F,Me=[D.J];if(pe!=null){var Ge=D.U,Ke=H.ba.S,Ze=Ke==Sd||Ke==Sf;H=H.ba.f.RGBA;var nt=[0],He=D.ka;nt[0]=D.T,D.Kb&&(He==0?--nt[0]:(--He,Me[0]-=D.width),D.j+D.ka+D.T==D.o&&(nt[0]=D.o-D.j-He));var Kt=H.eb;He=H.fb+He*H.A,D=Eo(pe,Me[0],D.width,Ge,nt,Kt,He+(Ze?0:3),H.A),e(oe==nt),D&&Ti(Ke)&&Wa(Kt,He,Ze,Ge,nt,H.A)}return 0}function Zo(D){var H=D.ma,oe=H.ba.S,pe=11>oe,Me=oe==IA||oe==PA||oe==Sd||oe==Ef||oe==12||Ti(oe);if(H.memory=null,H.Ib=null,H.Jb=null,H.Nd=null,!Gc(H.Oa,D,Me?11:12))return 0;if(Me&&Ti(oe)&&Zn(),D.da)alert("todo:use_scaling");else{if(pe){if(H.Ib=Gr,D.Kb){if(oe=D.U+1>>1,H.memory=l(D.U+2*oe),H.memory==null)return 0;H.ec=H.memory,H.fc=0,H.cc=H.ec,H.dc=H.fc+D.U,H.Mc=H.cc,H.Nc=H.dc+oe,H.Ib=Ni,Zn()}}else alert("todo:EmitYUV");Me&&(H.Jb=Pa,pe&&sn())}if(pe&&!Rf){for(D=0;256>D;++D)$g[D]=89858*(D-128)+Ld>>Sc,s0[D]=-22014*(D-128)+Ld,kf[D]=-45773*(D-128),Gg[D]=113618*(D-128)+Ld>>Sc;for(D=ah;D<Ff;++D)H=76283*(D-16)+Ld>>Sc,Kg[D-ah]=ro(H,255),qg[D-ah]=ro(H+8>>4,15);Rf=1}return 1}function jt(D){var H=D.ma,oe=D.U,pe=D.T;return e(!(1&D.ka)),0>=oe||0>=pe?0:(oe=H.Ib(D,H),H.Jb!=null&&H.Jb(D,H,oe),H.Dc+=oe,1)}function we(D){D.ma.memory=null}function Ce(D,H,oe,pe){return Ut(D,8)!=47?0:(H[0]=Ut(D,14)+1,oe[0]=Ut(D,14)+1,pe[0]=Ut(D,1),Ut(D,3)!=0?0:!D.h)}function Ye(D,H){if(4>D)return D+1;var oe=D-2>>1;return(2+(1&D)<<oe)+Ut(H,oe)+1}function dt(D,H){return 120<H?H-120:1<=(oe=((oe=RA[H-1])>>4)*D+(8-(15&oe)))?oe:1;var oe}function ot(D,H,oe){var pe=$e(oe),Me=D[H+=255&pe].g-8;return 0<Me&&(vt(oe,oe.u+8),pe=$e(oe),H+=D[H].value,H+=pe&(1<<Me)-1),vt(oe,oe.u+D[H].g),D[H].value}function wt(D,H,oe){return oe.g+=D.g,oe.value+=D.value<<H>>>0,e(8>=oe.g),D.g}function Vt(D,H,oe){var pe=D.xc;return e((H=pe==0?0:D.vc[D.md*(oe>>pe)+(H>>pe)])<D.Wb),D.Ya[H]}function St(D,H,oe,pe){var Me=D.ab,Ge=D.c*H,Ke=D.C;H=Ke+H;var Ze=oe,nt=pe;for(pe=D.Ta,oe=D.Ua;0<Me--;){var He=D.gc[Me],Kt=Ke,vn=H,pn=Ze,un=nt,Zt=(nt=pe,Ze=oe,He.Ea);switch(e(Kt<vn),e(vn<=He.nc),He.hc){case 2:Uh(pn,un,(vn-Kt)*Zt,nt,Ze);break;case 0:var Pn=Kt,Wt=vn,en=nt,Gn=Ze,Xn=(wr=He).Ea;Pn==0&&(Ed(pn,un,null,null,1,en,Gn),er(pn,un+1,0,0,Xn-1,en,Gn+1),un+=Xn,Gn+=Xn,++Pn);for(var qn=1<<wr.b,Pr=qn-1,Cr=rn(Xn,wr.b),Kr=wr.K,wr=wr.w+(Pn>>wr.b)*Cr;Pn<Wt;){var Zi=Kr,Yi=wr,si=1;for(eh(pn,un,en,Gn-Xn,1,en,Gn);si<Xn;){var Ei=(si&~Pr)+qn;Ei>Xn&&(Ei=Xn),(0,Cl[Zi[Yi++]>>8&15])(pn,un+ +si,en,Gn+si-Xn,Ei-si,en,Gn+si),si=Ei}un+=Xn,Gn+=Xn,++Pn&Pr||(wr+=Cr)}vn!=He.nc&&r(nt,Ze-Zt,nt,Ze+(vn-Kt-1)*Zt,Zt);break;case 1:for(Zt=pn,Wt=un,Xn=(pn=He.Ea)-(Gn=pn&~(en=(un=1<<He.b)-1)),Pn=rn(pn,He.b),qn=He.K,He=He.w+(Kt>>He.b)*Pn;Kt<vn;){for(Pr=qn,Cr=He,Kr=new gn,wr=Wt+Gn,Zi=Wt+pn;Wt<wr;)Fr(Pr[Cr++],Kr),nh(Kr,Zt,Wt,un,nt,Ze),Wt+=un,Ze+=un;Wt<Zi&&(Fr(Pr[Cr++],Kr),nh(Kr,Zt,Wt,Xn,nt,Ze),Wt+=Xn,Ze+=Xn),++Kt&en||(He+=Pn)}break;case 3:if(pn==nt&&un==Ze&&0<He.b){for(Wt=nt,pn=Zt=Ze+(vn-Kt)*Zt-(Gn=(vn-Kt)*rn(He.Ea,He.b)),un=nt,en=Ze,Pn=[],Gn=(Xn=Gn)-1;0<=Gn;--Gn)Pn[Gn]=un[en+Gn];for(Gn=Xn-1;0<=Gn;--Gn)Wt[pn+Gn]=Pn[Gn];zs(He,Kt,vn,nt,Zt,nt,Ze)}else zs(He,Kt,vn,pn,un,nt,Ze)}Ze=pe,nt=oe}nt!=oe&&r(pe,oe,Ze,nt,Ge)}function Gt(D,H){var oe=D.V,pe=D.Ba+D.c*D.C,Me=H-D.C;if(e(H<=D.l.o),e(16>=Me),0<Me){var Ge=D.l,Ke=D.Ta,Ze=D.Ua,nt=Ge.width;if(St(D,Me,oe,pe),Me=Ze=[Ze],e((oe=D.C)<(pe=H)),e(Ge.v<Ge.va),pe>Ge.o&&(pe=Ge.o),oe<Ge.j){var He=Ge.j-oe;oe=Ge.j,Me[0]+=He*nt}if(oe>=pe?oe=0:(Me[0]+=4*Ge.v,Ge.ka=oe-Ge.j,Ge.U=Ge.va-Ge.v,Ge.T=pe-oe,oe=1),oe){if(Ze=Ze[0],11>(oe=D.ca).S){var Kt=oe.f.RGBA,vn=(pe=oe.S,Me=Ge.U,Ge=Ge.T,He=Kt.eb,Kt.A),pn=Ge;for(Kt=Kt.fb+D.Ma*Kt.A;0<pn--;){var un=Ke,Zt=Ze,Pn=Me,Wt=He,en=Kt;switch(pe){case Cf:qa(un,Zt,Pn,Wt,en);break;case IA:Wo(un,Zt,Pn,Wt,en);break;case Bf:Wo(un,Zt,Pn,Wt,en),Wa(Wt,en,0,Pn,1,0);break;case Ng:Ec(un,Zt,Pn,Wt,en);break;case PA:pi(un,Zt,Pn,Wt,en,1);break;case FA:pi(un,Zt,Pn,Wt,en,1),Wa(Wt,en,0,Pn,1,0);break;case Sd:pi(un,Zt,Pn,Wt,en,0);break;case Sf:pi(un,Zt,Pn,Wt,en,0),Wa(Wt,en,1,Pn,1,0);break;case Ef:Eu(un,Zt,Pn,Wt,en);break;case ym:Eu(un,Zt,Pn,Wt,en),Mo(Wt,en,Pn,1,0);break;case LA:Cc(un,Zt,Pn,Wt,en);break;default:e(0)}Ze+=nt,Kt+=vn}D.Ma+=Ge}else alert("todo:EmitRescaledRowsYUVA");e(D.Ma<=oe.height)}}D.C=H,e(D.C<=D.i)}function nn(D){var H;if(0<D.ua)return 0;for(H=0;H<D.Wb;++H){var oe=D.Ya[H].G,pe=D.Ya[H].H;if(0<oe[1][pe[1]+0].g||0<oe[2][pe[2]+0].g||0<oe[3][pe[3]+0].g)return 0}return 1}function qt(D,H,oe,pe,Me,Ge){if(D.Z!=0){var Ke=D.qd,Ze=D.rd;for(e(Zl[D.Z]!=null);H<oe;++H)Zl[D.Z](Ke,Ze,pe,Me,pe,Me,Ge),Ke=pe,Ze=Me,Me+=Ge;D.qd=Ke,D.rd=Ze}}function En(D,H){var oe=D.l.ma,pe=oe.Z==0||oe.Z==1?D.l.j:D.C;if(pe=D.C<pe?pe:D.C,e(H<=D.l.o),H>pe){var Me=D.l.width,Ge=oe.ca,Ke=oe.tb+Me*pe,Ze=D.V,nt=D.Ba+D.c*pe,He=D.gc;e(D.ab==1),e(He[0].hc==3),Oa(He[0],pe,H,Ze,nt,Ge,Ke),qt(oe,pe,H,Ge,Ke,Me)}D.C=D.Ma=H}function zn(D,H,oe,pe,Me,Ge,Ke){var Ze=D.$/pe,nt=D.$%pe,He=D.m,Kt=D.s,vn=oe+D.$,pn=vn;Me=oe+pe*Me;var un=oe+pe*Ge,Zt=280+Kt.ua,Pn=D.Pb?Ze:16777216,Wt=0<Kt.ua?Kt.Wa:null,en=Kt.wc,Gn=vn<un?Vt(Kt,nt,Ze):null;e(D.C<Ge),e(un<=Me);var Xn=!1;e:for(;;){for(;Xn||vn<un;){var qn=0;if(Ze>=Pn){var Pr=vn-oe;e((Pn=D).Pb),Pn.wd=Pn.m,Pn.xd=Pr,0<Pn.s.ua&&Fe(Pn.s.Wa,Pn.s.vb),Pn=Ze+bm}if(nt&en||(Gn=Vt(Kt,nt,Ze)),e(Gn!=null),Gn.Qb&&(H[vn]=Gn.qb,Xn=!0),!Xn)if(_t(He),Gn.jc){qn=He,Pr=H;var Cr=vn,Kr=Gn.pd[$e(qn)&rs-1];e(Gn.jc),256>Kr.g?(vt(qn,qn.u+Kr.g),Pr[Cr]=Kr.value,qn=0):(vt(qn,qn.u+Kr.g-256),e(256<=Kr.value),qn=Kr.value),qn==0&&(Xn=!0)}else qn=ot(Gn.G[0],Gn.H[0],He);if(He.h)break;if(Xn||256>qn){if(!Xn)if(Gn.nd)H[vn]=(Gn.qb|qn<<8)>>>0;else{if(_t(He),Xn=ot(Gn.G[1],Gn.H[1],He),_t(He),Pr=ot(Gn.G[2],Gn.H[2],He),Cr=ot(Gn.G[3],Gn.H[3],He),He.h)break;H[vn]=(Cr<<24|Xn<<16|qn<<8|Pr)>>>0}if(Xn=!1,++vn,++nt>=pe&&(nt=0,++Ze,Ke!=null&&Ze<=Ge&&!(Ze%16)&&Ke(D,Ze),Wt!=null))for(;pn<vn;)qn=H[pn++],Wt.X[(506832829*qn&4294967295)>>>Wt.Mb]=qn}else if(280>qn){if(qn=Ye(qn-256,He),Pr=ot(Gn.G[4],Gn.H[4],He),_t(He),Pr=dt(pe,Pr=Ye(Pr,He)),He.h)break;if(vn-oe<Pr||Me-vn<qn)break e;for(Cr=0;Cr<qn;++Cr)H[vn+Cr]=H[vn+Cr-Pr];for(vn+=qn,nt+=qn;nt>=pe;)nt-=pe,++Ze,Ke!=null&&Ze<=Ge&&!(Ze%16)&&Ke(D,Ze);if(e(vn<=Me),nt&en&&(Gn=Vt(Kt,nt,Ze)),Wt!=null)for(;pn<vn;)qn=H[pn++],Wt.X[(506832829*qn&4294967295)>>>Wt.Mb]=qn}else{if(!(qn<Zt))break e;for(Xn=qn-280,e(Wt!=null);pn<vn;)qn=H[pn++],Wt.X[(506832829*qn&4294967295)>>>Wt.Mb]=qn;qn=vn,e(!(Xn>>>(Pr=Wt).Xa)),H[qn]=Pr.X[Xn],Xn=!0}Xn||e(He.h==We(He))}if(D.Pb&&He.h&&vn<Me)e(D.m.h),D.a=5,D.m=D.wd,D.$=D.xd,0<D.s.ua&&Fe(D.s.vb,D.s.Wa);else{if(He.h)break e;Ke!=null&&Ke(D,Ze>Ge?Ge:Ze),D.a=0,D.$=vn-oe}return 1}return D.a=3,0}function Vn(D){e(D!=null),D.vc=null,D.yc=null,D.Ya=null;var H=D.Wa;H!=null&&(H.X=null),D.vb=null,e(D!=null)}function gr(){var D=new xd;return D==null?null:(D.a=0,D.xb=DA,Wi("Predictor","VP8LPredictors"),Wi("Predictor","VP8LPredictors_C"),Wi("PredictorAdd","VP8LPredictorsAdd"),Wi("PredictorAdd","VP8LPredictorsAdd_C"),Uh=ar,nh=lr,qa=pr,Wo=to,Eu=xi,Cc=No,Ec=Fi,ne.VP8LMapColor32b=th,ne.VP8LMapColor8b=Nh,D)}function Er(D,H,oe,pe,Me){var Ge=1,Ke=[D],Ze=[H],nt=pe.m,He=pe.s,Kt=null,vn=0;e:for(;;){if(oe)for(;Ge&&Ut(nt,1);){var pn=Ke,un=Ze,Zt=pe,Pn=1,Wt=Zt.m,en=Zt.gc[Zt.ab],Gn=Ut(Wt,2);if(Zt.Oc&1<<Gn)Ge=0;else{switch(Zt.Oc|=1<<Gn,en.hc=Gn,en.Ea=pn[0],en.nc=un[0],en.K=[null],++Zt.ab,e(4>=Zt.ab),Gn){case 0:case 1:en.b=Ut(Wt,3)+2,Pn=Er(rn(en.Ea,en.b),rn(en.nc,en.b),0,Zt,en.K),en.K=en.K[0];break;case 3:var Xn,qn=Ut(Wt,8)+1,Pr=16<qn?0:4<qn?1:2<qn?2:3;if(pn[0]=rn(en.Ea,Pr),en.b=Pr,Xn=Pn=Er(qn,1,0,Zt,en.K)){var Cr,Kr=qn,wr=en,Zi=1<<(8>>wr.b),Yi=l(Zi);if(Yi==null)Xn=0;else{var si=wr.K[0],Ei=wr.w;for(Yi[0]=wr.K[0][0],Cr=1;Cr<1*Kr;++Cr)Yi[Cr]=zt(si[Ei+Cr],Yi[Cr-1]);for(;Cr<4*Zi;++Cr)Yi[Cr]=0;wr.K[0]=null,wr.K[0]=Yi,Xn=1}}Pn=Xn;break;case 2:break;default:e(0)}Ge=Pn}}if(Ke=Ke[0],Ze=Ze[0],Ge&&Ut(nt,1)&&!(Ge=1<=(vn=Ut(nt,4))&&11>=vn)){pe.a=3;break e}var zo;if(zo=Ge)t:{var Bo,vi,Es,za=pe,io=Ke,Oi=Ze,fo=vn,Za=oe,dl=za.m,Js=za.s,da=[null],Ya=1,ba=0,Ja=kA[fo];n:for(;;){if(Za&&Ut(dl,1)){var Tn=Ut(dl,3)+2,dr=rn(io,Tn),wa=rn(Oi,Tn),Ji=dr*wa;if(!Er(dr,wa,0,za,da))break n;for(da=da[0],Js.xc=Tn,Bo=0;Bo<Ji;++Bo){var Nt=da[Bo]>>8&65535;da[Bo]=Nt,Nt>=Ya&&(Ya=Nt+1)}}if(dl.h)break n;for(vi=0;5>vi;++vi){var es=_m[vi];!vi&&0<fo&&(es+=1<<fo),ba<es&&(ba=es)}var Fd=h(Ya*Ja,le),HA=Ya,Yl=h(HA,lt);if(Yl==null)var Rd=null;else e(65536>=HA),Rd=Yl;var Tc=l(ba);if(Rd==null||Tc==null||Fd==null){za.a=1;break n}var Iu=Fd;for(Bo=Es=0;Bo<Ya;++Bo){var Ic=Rd[Bo],kd=Ic.G,jh=Ic.H,Of=0,$h=1,Df=0;for(vi=0;5>vi;++vi){es=_m[vi],kd[vi]=Iu,jh[vi]=Es,!vi&&0<fo&&(es+=1<<fo);i:{var lh,Gh=es,Pu=za,Md=Tc,Pc=Iu,a0=Es,fa=0,ch=Pu.m,Uf=Ut(ch,1);if(o(Md,0,0,Gh),Uf){var _o=Ut(ch,1)+1,Bi=Ut(ch,1),Cm=Ut(ch,Bi==0?1:8);Md[Cm]=1,_o==2&&(Md[Cm=Ut(ch,8)]=1);var Lc=1}else{var Nf=l(19),Lu=Ut(ch,4)+4;if(19<Lu){Pu.a=3;var Kh=0;break i}for(lh=0;lh<Lu;++lh)Nf[vm[lh]]=Ut(ch,3);var zf=void 0,Sl=void 0,Fu=Pu,Ru=Nf,Jc=Gh,Vf=Md,Qf=0,eu=Fu.m,jA=8,ku=h(128,le);r:for(;se(ku,0,7,Ru,19);){if(Ut(eu,1)){var Od=2+2*Ut(eu,3);if((zf=2+Ut(eu,Od))>Jc)break r}else zf=Jc;for(Sl=0;Sl<Jc&&zf--;){_t(eu);var uh=ku[0+(127&$e(eu))];vt(eu,eu.u+uh.g);var Vs=uh.value;if(16>Vs)Vf[Sl++]=Vs,Vs!=0&&(jA=Vs);else{var Dd=Vs==16,ea=Vs-16,Em=If[ea],$A=Ut(eu,Tf[ea])+Em;if(Sl+$A>Jc)break r;for(var Ud=Dd?jA:0;0<$A--;)Vf[Sl++]=Ud}}Qf=1;break r}Qf||(Fu.a=3),Lc=Qf}(Lc=Lc&&!ch.h)&&(fa=se(Pc,a0,8,Md,Gh)),Lc&&fa!=0?Kh=fa:(Pu.a=3,Kh=0)}if(Kh==0)break n;if($h&&Bl[vi]==1&&($h=Iu[Es].g==0),Of+=Iu[Es].g,Es+=Kh,3>=vi){var Tl,Hf=Tc[0];for(Tl=1;Tl<es;++Tl)Tc[Tl]>Hf&&(Hf=Tc[Tl]);Df+=Hf}}if(Ic.nd=$h,Ic.Qb=0,$h&&(Ic.qb=(kd[3][jh[3]+0].value<<24|kd[1][jh[1]+0].value<<16|kd[2][jh[2]+0].value)>>>0,Of==0&&256>kd[0][jh[0]+0].value&&(Ic.Qb=1,Ic.qb+=kd[0][jh[0]+0].value<<8)),Ic.jc=!Ic.Qb&&6>Df,Ic.jc){var hh,Fc=Ic;for(hh=0;hh<rs;++hh){var Jl=hh,ec=Fc.pd[Jl],qh=Fc.G[0][Fc.H[0]+Jl];256<=qh.value?(ec.g=qh.g+256,ec.value=qh.value):(ec.g=0,ec.value=0,Jl>>=wt(qh,8,ec),Jl>>=wt(Fc.G[1][Fc.H[1]+Jl],16,ec),Jl>>=wt(Fc.G[2][Fc.H[2]+Jl],0,ec),wt(Fc.G[3][Fc.H[3]+Jl],24,ec))}}}Js.vc=da,Js.Wb=Ya,Js.Ya=Rd,Js.yc=Fd,zo=1;break t}zo=0}if(!(Ge=zo)){pe.a=3;break e}if(0<vn){if(He.ua=1<<vn,!Je(He.Wa,vn)){pe.a=1,Ge=0;break e}}else He.ua=0;var Nd=pe,jf=Ke,Xg=Ze,zd=Nd.s,Wh=zd.xc;if(Nd.c=jf,Nd.i=Xg,zd.md=rn(jf,Wh),zd.wc=Wh==0?-1:(1<<Wh)-1,oe){pe.xb=Qg;break e}if((Kt=l(Ke*Ze))==null){pe.a=1,Ge=0;break e}Ge=(Ge=zn(pe,Kt,0,Ke,Ze,Ze,null))&&!nt.h;break e}return Ge?(Me!=null?Me[0]=Kt:(e(Kt==null),e(oe)),pe.$=0,oe||Vn(He)):Vn(He),Ge}function Tr(D,H){var oe=D.c*D.i,pe=oe+H+16*H;return e(D.c<=H),D.V=l(pe),D.V==null?(D.Ta=null,D.Ua=0,D.a=1,0):(D.Ta=D.V,D.Ua=D.Ba+oe+H,1)}function Br(D,H){var oe=D.C,pe=H-oe,Me=D.V,Ge=D.Ba+D.c*oe;for(e(H<=D.l.o);0<pe;){var Ke=16<pe?16:pe,Ze=D.l.ma,nt=D.l.width,He=nt*Ke,Kt=Ze.ca,vn=Ze.tb+nt*oe,pn=D.Ta,un=D.Ua;St(D,Ke,Me,Ge),Wr(pn,un,Kt,vn,He),qt(Ze,oe,oe+Ke,Kt,vn,nt),pe-=Ke,Me+=Ke*D.c,oe+=Ke}e(oe==H),D.C=D.Ma=H}function hi(){this.ub=this.yd=this.td=this.Rb=0}function mi(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Mr(){this.Fb=this.Bb=this.Cb=0,this.Zb=l(4),this.Lb=l(4)}function Ci(){this.Yb=function(){var D=[];return function H(oe,pe,Me){for(var Ge=Me[pe],Ke=0;Ke<Ge&&(oe.push(Me.length>pe+1?[]:0),!(Me.length<pe+1));Ke++)H(oe[Ke],pe+1,Me)}(D,0,[3,11]),D}()}function $i(){this.jb=l(3),this.Wc=p([4,8],Ci),this.Xc=p([4,17],Ci)}function jo(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new l(4),this.od=new l(4)}function Co(){this.ld=this.La=this.dd=this.tc=0}function $o(){this.Na=this.la=0}function Ps(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ya(){this.ad=l(384),this.Za=0,this.Ob=l(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Xu(){this.uc=this.M=this.Nb=0,this.wa=Array(new Co),this.Y=0,this.ya=Array(new ya),this.aa=0,this.l=new Vl}function yc(){this.y=l(16),this.f=l(8),this.ea=l(8)}function _c(){this.cb=this.a=0,this.sc="",this.m=new In,this.Od=new hi,this.Kc=new mi,this.ed=new jo,this.Qa=new Mr,this.Ic=this.$c=this.Aa=0,this.D=new Xu,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=h(8,In),this.ia=0,this.pb=h(4,Ps),this.Pa=new $i,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new yc),this.Hd=0,this.rb=Array(new $o),this.sb=0,this.wa=Array(new Co),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ya),this.L=this.aa=0,this.gd=p([4,2],Co),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Vl(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ql(){var D=new _c;return D!=null&&(D.a=0,D.sc="OK",D.cb=0,D.Xb=0,Qh||(Qh=bc)),D}function Go(D,H,oe){return D.a==0&&(D.a=H,D.sc=oe,D.cb=0),0}function vu(D,H,oe){return 3<=oe&&D[H+0]==157&&D[H+1]==1&&D[H+2]==42}function vc(D,H){if(D==null)return 0;if(D.a=0,D.sc="OK",H==null)return Go(D,2,"null VP8Io passed to VP8GetHeaders()");var oe=H.data,pe=H.w,Me=H.ha;if(4>Me)return Go(D,7,"Truncated header.");var Ge=oe[pe+0]|oe[pe+1]<<8|oe[pe+2]<<16,Ke=D.Od;if(Ke.Rb=!(1&Ge),Ke.td=Ge>>1&7,Ke.yd=Ge>>4&1,Ke.ub=Ge>>5,3<Ke.td)return Go(D,3,"Incorrect keyframe parameters.");if(!Ke.yd)return Go(D,4,"Frame not displayable.");pe+=3,Me-=3;var Ze=D.Kc;if(Ke.Rb){if(7>Me)return Go(D,7,"cannot parse picture header");if(!vu(oe,pe,Me))return Go(D,3,"Bad code word");Ze.c=16383&(oe[pe+4]<<8|oe[pe+3]),Ze.Td=oe[pe+4]>>6,Ze.i=16383&(oe[pe+6]<<8|oe[pe+5]),Ze.Ud=oe[pe+6]>>6,pe+=7,Me-=7,D.za=Ze.c+15>>4,D.Ub=Ze.i+15>>4,H.width=Ze.c,H.height=Ze.i,H.Da=0,H.j=0,H.v=0,H.va=H.width,H.o=H.height,H.da=0,H.ib=H.width,H.hb=H.height,H.U=H.width,H.T=H.height,o((Ge=D.Pa).jb,0,255,Ge.jb.length),e((Ge=D.Qa)!=null),Ge.Cb=0,Ge.Bb=0,Ge.Fb=1,o(Ge.Zb,0,0,Ge.Zb.length),o(Ge.Lb,0,0,Ge.Lb)}if(Ke.ub>Me)return Go(D,7,"bad partition length");Ot(Ge=D.m,oe,pe,Ke.ub),pe+=Ke.ub,Me-=Ke.ub,Ke.Rb&&(Ze.Ld=Ft(Ge),Ze.Kd=Ft(Ge)),Ze=D.Qa;var nt,He=D.Pa;if(e(Ge!=null),e(Ze!=null),Ze.Cb=Ft(Ge),Ze.Cb){if(Ze.Bb=Ft(Ge),Ft(Ge)){for(Ze.Fb=Ft(Ge),nt=0;4>nt;++nt)Ze.Zb[nt]=Ft(Ge)?Tt(Ge,7):0;for(nt=0;4>nt;++nt)Ze.Lb[nt]=Ft(Ge)?Tt(Ge,6):0}if(Ze.Bb)for(nt=0;3>nt;++nt)He.jb[nt]=Ft(Ge)?gt(Ge,8):255}else Ze.Bb=0;if(Ge.Ka)return Go(D,3,"cannot parse segment header");if((Ze=D.ed).zd=Ft(Ge),Ze.Tb=gt(Ge,6),Ze.wb=gt(Ge,3),Ze.Pc=Ft(Ge),Ze.Pc&&Ft(Ge)){for(He=0;4>He;++He)Ft(Ge)&&(Ze.vd[He]=Tt(Ge,6));for(He=0;4>He;++He)Ft(Ge)&&(Ze.od[He]=Tt(Ge,6))}if(D.L=Ze.Tb==0?0:Ze.zd?1:2,Ge.Ka)return Go(D,3,"cannot parse filter header");var Kt=Me;if(Me=nt=pe,pe=nt+Kt,Ze=Kt,D.Xb=(1<<gt(D.m,2))-1,Kt<3*(He=D.Xb))oe=7;else{for(nt+=3*He,Ze-=3*He,Kt=0;Kt<He;++Kt){var vn=oe[Me+0]|oe[Me+1]<<8|oe[Me+2]<<16;vn>Ze&&(vn=Ze),Ot(D.Jc[+Kt],oe,nt,vn),nt+=vn,Ze-=vn,Me+=3}Ot(D.Jc[+He],oe,nt,Ze),oe=nt<pe?0:5}if(oe!=0)return Go(D,oe,"cannot parse partitions");for(oe=gt(nt=D.m,7),Me=Ft(nt)?Tt(nt,4):0,pe=Ft(nt)?Tt(nt,4):0,Ze=Ft(nt)?Tt(nt,4):0,He=Ft(nt)?Tt(nt,4):0,nt=Ft(nt)?Tt(nt,4):0,Kt=D.Qa,vn=0;4>vn;++vn){if(Kt.Cb){var pn=Kt.Zb[vn];Kt.Fb||(pn+=oe)}else{if(0<vn){D.pb[vn]=D.pb[0];continue}pn=oe}var un=D.pb[vn];un.Sc[0]=Pf[ro(pn+Me,127)],un.Sc[1]=Td[ro(pn+0,127)],un.Eb[0]=2*Pf[ro(pn+pe,127)],un.Eb[1]=101581*Td[ro(pn+Ze,127)]>>16,8>un.Eb[1]&&(un.Eb[1]=8),un.Qc[0]=Pf[ro(pn+He,117)],un.Qc[1]=Td[ro(pn+nt,127)],un.lc=pn+nt}if(!Ke.Rb)return Go(D,4,"Not a key frame.");for(Ft(Ge),Ke=D.Pa,oe=0;4>oe;++oe){for(Me=0;8>Me;++Me)for(pe=0;3>pe;++pe)for(Ze=0;11>Ze;++Ze)He=Dt(Ge,o0[oe][Me][pe][Ze])?gt(Ge,8):zg[oe][Me][pe][Ze],Ke.Wc[oe][Me].Yb[pe][Ze]=He;for(Me=0;17>Me;++Me)Ke.Xc[oe][Me]=Ke.Wc[oe][Vg[Me]]}return D.kc=Ft(Ge),D.kc&&(D.Bd=gt(Ge,8)),D.cb=1}function bc(D,H,oe,pe,Me,Ge,Ke){var Ze=H[Me].Yb[oe];for(oe=0;16>Me;++Me){if(!Dt(D,Ze[oe+0]))return Me;for(;!Dt(D,Ze[oe+1]);)if(Ze=H[++Me].Yb[0],oe=0,Me==16)return 16;var nt=H[Me+1].Yb;if(Dt(D,Ze[oe+2])){var He=D,Kt=0;if(Dt(He,(pn=Ze)[(vn=oe)+3]))if(Dt(He,pn[vn+6])){for(Ze=0,vn=2*(Kt=Dt(He,pn[vn+8]))+(pn=Dt(He,pn[vn+9+Kt])),Kt=0,pn=Lf[vn];pn[Ze];++Ze)Kt+=Kt+Dt(He,pn[Ze]);Kt+=3+(8<<vn)}else Dt(He,pn[vn+7])?(Kt=7+2*Dt(He,165),Kt+=Dt(He,145)):Kt=5+Dt(He,159);else Kt=Dt(He,pn[vn+4])?3+Dt(He,pn[vn+5]):2;Ze=nt[2]}else Kt=1,Ze=nt[1];nt=Ke+MA[Me],0>(He=D).b&&at(He);var vn,pn=He.b,un=(vn=He.Ca>>1)-(He.I>>pn)>>31;--He.b,He.Ca+=un,He.Ca|=1,He.I-=(vn+1&un)<<pn,Ge[nt]=((Kt^un)-un)*pe[(0<Me)+0]}return 16}function sa(D){var H=D.rb[D.sb-1];H.la=0,H.Na=0,o(D.zc,0,0,D.zc.length),D.ja=0}function La(D,H){if(D==null)return 0;if(H==null)return Go(D,2,"NULL VP8Io parameter in VP8Decode().");if(!D.cb&&!vc(D,H))return 0;if(e(D.cb),H.ac==null||H.ac(H)){H.ob&&(D.L=0);var oe=Hh[D.L];if(D.L==2?(D.yb=0,D.zb=0):(D.yb=H.v-oe>>4,D.zb=H.j-oe>>4,0>D.yb&&(D.yb=0),0>D.zb&&(D.zb=0)),D.Va=H.o+15+oe>>4,D.Hb=H.va+15+oe>>4,D.Hb>D.za&&(D.Hb=D.za),D.Va>D.Ub&&(D.Va=D.Ub),0<D.L){var pe=D.ed;for(oe=0;4>oe;++oe){var Me;if(D.Qa.Cb){var Ge=D.Qa.Lb[oe];D.Qa.Fb||(Ge+=pe.Tb)}else Ge=pe.Tb;for(Me=0;1>=Me;++Me){var Ke=D.gd[oe][Me],Ze=Ge;if(pe.Pc&&(Ze+=pe.vd[0],Me&&(Ze+=pe.od[0])),0<(Ze=0>Ze?0:63<Ze?63:Ze)){var nt=Ze;0<pe.wb&&(nt=4<pe.wb?nt>>2:nt>>1)>9-pe.wb&&(nt=9-pe.wb),1>nt&&(nt=1),Ke.dd=nt,Ke.tc=2*Ze+nt,Ke.ld=40<=Ze?2:15<=Ze?1:0}else Ke.tc=0;Ke.La=Me}}}oe=0}else Go(D,6,"Frame setup failed"),oe=D.a;if(oe=oe==0){if(oe){D.$c=0,0<D.Aa||(D.Ic=Mf);e:{oe=D.Ic,pe=4*(nt=D.za);var He=32*nt,Kt=nt+1,vn=0<D.L?nt*(0<D.Aa?2:1):0,pn=(D.Aa==2?2:1)*nt;if((Ke=pe+832+(Me=3*(16*oe+Hh[D.L])/2*He)+(Ge=D.Fa!=null&&0<D.Fa.length?D.Kc.c*D.Kc.i:0))!=Ke)oe=0;else{if(Ke>D.Vb){if(D.Vb=0,D.Ec=l(Ke),D.Fc=0,D.Ec==null){oe=Go(D,1,"no memory during frame initialization.");break e}D.Vb=Ke}Ke=D.Ec,Ze=D.Fc,D.Ac=Ke,D.Bc=Ze,Ze+=pe,D.Gd=h(He,yc),D.Hd=0,D.rb=h(Kt+1,$o),D.sb=1,D.wa=vn?h(vn,Co):null,D.Y=0,D.D.Nb=0,D.D.wa=D.wa,D.D.Y=D.Y,0<D.Aa&&(D.D.Y+=nt),e(!0),D.oc=Ke,D.pc=Ze,Ze+=832,D.ya=h(pn,ya),D.aa=0,D.D.ya=D.ya,D.D.aa=D.aa,D.Aa==2&&(D.D.aa+=nt),D.R=16*nt,D.B=8*nt,nt=(He=Hh[D.L])*D.R,He=He/2*D.B,D.sa=Ke,D.ta=Ze+nt,D.qa=D.sa,D.ra=D.ta+16*oe*D.R+He,D.Ha=D.qa,D.Ia=D.ra+8*oe*D.B+He,D.$c=0,Ze+=Me,D.mb=Ge?Ke:null,D.nb=Ge?Ze:null,e(Ze+Ge<=D.Fc+D.Vb),sa(D),o(D.Ac,D.Bc,0,pe),oe=1}}if(oe){if(H.ka=0,H.y=D.sa,H.O=D.ta,H.f=D.qa,H.N=D.ra,H.ea=D.Ha,H.Vd=D.Ia,H.fa=D.R,H.Rc=D.B,H.F=null,H.J=0,!oh){for(oe=-255;255>=oe;++oe)ks[255+oe]=0>oe?-oe:oe;for(oe=-1020;1020>=oe;++oe)Zc[1020+oe]=-128>oe?-128:127<oe?127:oe;for(oe=-112;112>=oe;++oe)Vh[112+oe]=-16>oe?-16:15<oe?15:oe;for(oe=-255;510>=oe;++oe)Su[255+oe]=0>oe?0:255<oe?255:oe;oh=1}Bu=bu,qc=Vc,Bd=Fa,Da=co,cl=Qc,Cs=wc,zh=$a,rh=no,ih=qo,Bc=wu,Wl=xs,Xl=Xs,Wc=ua,El=Ga,ul=la,ri=ka,Xc=yo,Ua=Rs,Na[0]=_a,Na[1]=Hl,Na[2]=sl,Na[3]=xc,Na[4]=ja,Na[5]=aa,Na[6]=Ra,Na[7]=tr,Na[8]=ni,Na[9]=ti,Tu[0]=ei,Tu[1]=jc,Tu[2]=bl,Tu[3]=wl,Tu[4]=Ko,Tu[5]=_i,Tu[6]=Dh,Yc[0]=al,Yc[1]=Hc,Yc[2]=Ws,Yc[3]=Yo,Yc[4]=Gi,Yc[5]=jl,Yc[6]=Fs,oe=1}else oe=0}oe&&(oe=function(un,Zt){for(un.M=0;un.M<un.Va;++un.M){var Pn,Wt=un.Jc[un.M&un.Xb],en=un.m,Gn=un;for(Pn=0;Pn<Gn.za;++Pn){var Xn=en,qn=Gn,Pr=qn.Ac,Cr=qn.Bc+4*Pn,Kr=qn.zc,wr=qn.ya[qn.aa+Pn];if(qn.Qa.Bb?wr.$b=Dt(Xn,qn.Pa.jb[0])?2+Dt(Xn,qn.Pa.jb[2]):Dt(Xn,qn.Pa.jb[1]):wr.$b=0,qn.kc&&(wr.Ad=Dt(Xn,qn.Bd)),wr.Za=!Dt(Xn,145)+0,wr.Za){var Zi=wr.Ob,Yi=0;for(qn=0;4>qn;++qn){var si,Ei=Kr[0+qn];for(si=0;4>si;++si){Ei=Id[Pr[Cr+si]][Ei];for(var zo=OA[Dt(Xn,Ei[0])];0<zo;)zo=OA[2*zo+Dt(Xn,Ei[zo])];Ei=-zo,Pr[Cr+si]=Ei}r(Zi,Yi,Pr,Cr,4),Yi+=4,Kr[0+qn]=Ei}}else Ei=Dt(Xn,156)?Dt(Xn,128)?1:3:Dt(Xn,163)?2:0,wr.Ob[0]=Ei,o(Pr,Cr,Ei,4),o(Kr,0,Ei,4);wr.Dd=Dt(Xn,142)?Dt(Xn,114)?Dt(Xn,183)?1:3:2:0}if(Gn.m.Ka)return Go(un,7,"Premature end-of-partition0 encountered.");for(;un.ja<un.za;++un.ja){if(Gn=Wt,Xn=(en=un).rb[en.sb-1],Pr=en.rb[en.sb+en.ja],Pn=en.ya[en.aa+en.ja],Cr=en.kc?Pn.Ad:0)Xn.la=Pr.la=0,Pn.Za||(Xn.Na=Pr.Na=0),Pn.Hc=0,Pn.Gc=0,Pn.ia=0;else{var Bo,vi;if(Xn=Pr,Pr=Gn,Cr=en.Pa.Xc,Kr=en.ya[en.aa+en.ja],wr=en.pb[Kr.$b],qn=Kr.ad,Zi=0,Yi=en.rb[en.sb-1],Ei=si=0,o(qn,Zi,0,384),Kr.Za)var Es=0,za=Cr[3];else{zo=l(16);var io=Xn.Na+Yi.Na;if(io=Qh(Pr,Cr[1],io,wr.Eb,0,zo,0),Xn.Na=Yi.Na=(0<io)+0,1<io)Bu(zo,0,qn,Zi);else{var Oi=zo[0]+3>>3;for(zo=0;256>zo;zo+=16)qn[Zi+zo]=Oi}Es=1,za=Cr[0]}var fo=15&Xn.la,Za=15&Yi.la;for(zo=0;4>zo;++zo){var dl=1&Za;for(Oi=vi=0;4>Oi;++Oi)fo=fo>>1|(dl=(io=Qh(Pr,za,io=dl+(1&fo),wr.Sc,Es,qn,Zi))>Es)<<7,vi=vi<<2|(3<io?3:1<io?2:qn[Zi+0]!=0),Zi+=16;fo>>=4,Za=Za>>1|dl<<7,si=(si<<8|vi)>>>0}for(za=fo,Es=Za>>4,Bo=0;4>Bo;Bo+=2){for(vi=0,fo=Xn.la>>4+Bo,Za=Yi.la>>4+Bo,zo=0;2>zo;++zo){for(dl=1&Za,Oi=0;2>Oi;++Oi)io=dl+(1&fo),fo=fo>>1|(dl=0<(io=Qh(Pr,Cr[2],io,wr.Qc,0,qn,Zi)))<<3,vi=vi<<2|(3<io?3:1<io?2:qn[Zi+0]!=0),Zi+=16;fo>>=2,Za=Za>>1|dl<<5}Ei|=vi<<4*Bo,za|=fo<<4<<Bo,Es|=(240&Za)<<Bo}Xn.la=za,Yi.la=Es,Kr.Hc=si,Kr.Gc=Ei,Kr.ia=43690&Ei?0:wr.ia,Cr=!(si|Ei)}if(0<en.L&&(en.wa[en.Y+en.ja]=en.gd[Pn.$b][Pn.Za],en.wa[en.Y+en.ja].La|=!Cr),Gn.Ka)return Go(un,7,"Premature end-of-file encountered.")}if(sa(un),en=Zt,Gn=1,Pn=(Wt=un).D,Xn=0<Wt.L&&Wt.M>=Wt.zb&&Wt.M<=Wt.Va,Wt.Aa==0)e:{if(Pn.M=Wt.M,Pn.uc=Xn,Jo(Wt,Pn),Gn=1,Pn=(vi=Wt.D).Nb,Xn=(Ei=Hh[Wt.L])*Wt.R,Pr=Ei/2*Wt.B,zo=16*Pn*Wt.R,Oi=8*Pn*Wt.B,Cr=Wt.sa,Kr=Wt.ta-Xn+zo,wr=Wt.qa,qn=Wt.ra-Pr+Oi,Zi=Wt.Ha,Yi=Wt.Ia-Pr+Oi,Za=(fo=vi.M)==0,si=fo>=Wt.Va-1,Wt.Aa==2&&Jo(Wt,vi),vi.uc)for(dl=(io=Wt).D.M,e(io.D.uc),vi=io.yb;vi<io.Hb;++vi){Es=vi,za=dl;var Js=(da=(es=io).D).Nb;Bo=es.R;var da=da.wa[da.Y+Es],Ya=es.sa,ba=es.ta+16*Js*Bo+16*Es,Ja=da.dd,Tn=da.tc;if(Tn!=0)if(e(3<=Tn),es.L==1)0<Es&&ri(Ya,ba,Bo,Tn+4),da.La&&Ua(Ya,ba,Bo,Tn),0<za&&ul(Ya,ba,Bo,Tn+4),da.La&&Xc(Ya,ba,Bo,Tn);else{var dr=es.B,wa=es.qa,Ji=es.ra+8*Js*dr+8*Es,Nt=es.Ha,es=es.Ia+8*Js*dr+8*Es;Js=da.ld,0<Es&&(rh(Ya,ba,Bo,Tn+4,Ja,Js),Bc(wa,Ji,Nt,es,dr,Tn+4,Ja,Js)),da.La&&(Xl(Ya,ba,Bo,Tn,Ja,Js),El(wa,Ji,Nt,es,dr,Tn,Ja,Js)),0<za&&(zh(Ya,ba,Bo,Tn+4,Ja,Js),ih(wa,Ji,Nt,es,dr,Tn+4,Ja,Js)),da.La&&(Wl(Ya,ba,Bo,Tn,Ja,Js),Wc(wa,Ji,Nt,es,dr,Tn,Ja,Js))}}if(Wt.ia&&alert("todo:DitherRow"),en.put!=null){if(vi=16*fo,fo=16*(fo+1),Za?(en.y=Wt.sa,en.O=Wt.ta+zo,en.f=Wt.qa,en.N=Wt.ra+Oi,en.ea=Wt.Ha,en.W=Wt.Ia+Oi):(vi-=Ei,en.y=Cr,en.O=Kr,en.f=wr,en.N=qn,en.ea=Zi,en.W=Yi),si||(fo-=Ei),fo>en.o&&(fo=en.o),en.F=null,en.J=null,Wt.Fa!=null&&0<Wt.Fa.length&&vi<fo&&(en.J=xu(Wt,en,vi,fo-vi),en.F=Wt.mb,en.F==null&&en.F.length==0)){Gn=Go(Wt,3,"Could not decode alpha data.");break e}vi<en.j&&(Ei=en.j-vi,vi=en.j,e(!(1&Ei)),en.O+=Wt.R*Ei,en.N+=Wt.B*(Ei>>1),en.W+=Wt.B*(Ei>>1),en.F!=null&&(en.J+=en.width*Ei)),vi<fo&&(en.O+=en.v,en.N+=en.v>>1,en.W+=en.v>>1,en.F!=null&&(en.J+=en.v),en.ka=vi-en.j,en.U=en.va-en.v,en.T=fo-vi,Gn=en.put(en))}Pn+1!=Wt.Ic||si||(r(Wt.sa,Wt.ta-Xn,Cr,Kr+16*Wt.R,Xn),r(Wt.qa,Wt.ra-Pr,wr,qn+8*Wt.B,Pr),r(Wt.Ha,Wt.Ia-Pr,Zi,Yi+8*Wt.B,Pr))}if(!Gn)return Go(un,6,"Output aborted.")}return 1}(D,H)),H.bc!=null&&H.bc(H),oe&=1}return oe?(D.cb=0,oe):0}function ls(D,H,oe,pe,Me){Me=D[H+oe+32*pe]+(Me>>3),D[H+oe+32*pe]=-256&Me?0>Me?0:255:Me}function Ls(D,H,oe,pe,Me,Ge){ls(D,H,0,oe,pe+Me),ls(D,H,1,oe,pe+Ge),ls(D,H,2,oe,pe-Ge),ls(D,H,3,oe,pe-Me)}function go(D){return(20091*D>>16)+D}function qs(D,H,oe,pe){var Me,Ge=0,Ke=l(16);for(Me=0;4>Me;++Me){var Ze=D[H+0]+D[H+8],nt=D[H+0]-D[H+8],He=(35468*D[H+4]>>16)-go(D[H+12]),Kt=go(D[H+4])+(35468*D[H+12]>>16);Ke[Ge+0]=Ze+Kt,Ke[Ge+1]=nt+He,Ke[Ge+2]=nt-He,Ke[Ge+3]=Ze-Kt,Ge+=4,H++}for(Me=Ge=0;4>Me;++Me)Ze=(D=Ke[Ge+0]+4)+Ke[Ge+8],nt=D-Ke[Ge+8],He=(35468*Ke[Ge+4]>>16)-go(Ke[Ge+12]),ls(oe,pe,0,0,Ze+(Kt=go(Ke[Ge+4])+(35468*Ke[Ge+12]>>16))),ls(oe,pe,1,0,nt+He),ls(oe,pe,2,0,nt-He),ls(oe,pe,3,0,Ze-Kt),Ge++,pe+=32}function wc(D,H,oe,pe){var Me=D[H+0]+4,Ge=35468*D[H+4]>>16,Ke=go(D[H+4]),Ze=35468*D[H+1]>>16;Ls(oe,pe,0,Me+Ke,D=go(D[H+1]),Ze),Ls(oe,pe,1,Me+Ge,D,Ze),Ls(oe,pe,2,Me-Ge,D,Ze),Ls(oe,pe,3,Me-Ke,D,Ze)}function Vc(D,H,oe,pe,Me){qs(D,H,oe,pe),Me&&qs(D,H+16,oe,pe+4)}function Fa(D,H,oe,pe){qc(D,H+0,oe,pe,1),qc(D,H+32,oe,pe+128,1)}function co(D,H,oe,pe){var Me;for(D=D[H+0]+4,Me=0;4>Me;++Me)for(H=0;4>H;++H)ls(oe,pe,H,Me,D)}function Qc(D,H,oe,pe){D[H+0]&&Da(D,H+0,oe,pe),D[H+16]&&Da(D,H+16,oe,pe+4),D[H+32]&&Da(D,H+32,oe,pe+128),D[H+48]&&Da(D,H+48,oe,pe+128+4)}function bu(D,H,oe,pe){var Me,Ge=l(16);for(Me=0;4>Me;++Me){var Ke=D[H+0+Me]+D[H+12+Me],Ze=D[H+4+Me]+D[H+8+Me],nt=D[H+4+Me]-D[H+8+Me],He=D[H+0+Me]-D[H+12+Me];Ge[0+Me]=Ke+Ze,Ge[8+Me]=Ke-Ze,Ge[4+Me]=He+nt,Ge[12+Me]=He-nt}for(Me=0;4>Me;++Me)Ke=(D=Ge[0+4*Me]+3)+Ge[3+4*Me],Ze=Ge[1+4*Me]+Ge[2+4*Me],nt=Ge[1+4*Me]-Ge[2+4*Me],He=D-Ge[3+4*Me],oe[pe+0]=Ke+Ze>>3,oe[pe+16]=He+nt>>3,oe[pe+32]=Ke-Ze>>3,oe[pe+48]=He-nt>>3,pe+=64}function cs(D,H,oe){var pe,Me=H-32,Ge=hl,Ke=255-D[Me-1];for(pe=0;pe<oe;++pe){var Ze,nt=Ge,He=Ke+D[H-1];for(Ze=0;Ze<oe;++Ze)D[H+Ze]=nt[He+D[Me+Ze]];H+=32}}function Hl(D,H){cs(D,H,4)}function Hc(D,H){cs(D,H,8)}function jc(D,H){cs(D,H,16)}function bl(D,H){var oe;for(oe=0;16>oe;++oe)r(D,H+32*oe,D,H-32,16)}function wl(D,H){var oe;for(oe=16;0<oe;--oe)o(D,H,D[H-1],16),H+=32}function $c(D,H,oe){var pe;for(pe=0;16>pe;++pe)o(H,oe+32*pe,D,16)}function ei(D,H){var oe,pe=16;for(oe=0;16>oe;++oe)pe+=D[H-1+32*oe]+D[H+oe-32];$c(pe>>5,D,H)}function Ko(D,H){var oe,pe=8;for(oe=0;16>oe;++oe)pe+=D[H-1+32*oe];$c(pe>>4,D,H)}function _i(D,H){var oe,pe=8;for(oe=0;16>oe;++oe)pe+=D[H+oe-32];$c(pe>>4,D,H)}function Dh(D,H){$c(128,D,H)}function $n(D,H,oe){return D+2*H+oe+2>>2}function sl(D,H){var oe,pe=H-32;for(pe=new Uint8Array([$n(D[pe-1],D[pe+0],D[pe+1]),$n(D[pe+0],D[pe+1],D[pe+2]),$n(D[pe+1],D[pe+2],D[pe+3]),$n(D[pe+2],D[pe+3],D[pe+4])]),oe=0;4>oe;++oe)r(D,H+32*oe,pe,0,pe.length)}function xc(D,H){var oe=D[H-1],pe=D[H-1+32],Me=D[H-1+64],Ge=D[H-1+96];yn(D,H+0,16843009*$n(D[H-1-32],oe,pe)),yn(D,H+32,16843009*$n(oe,pe,Me)),yn(D,H+64,16843009*$n(pe,Me,Ge)),yn(D,H+96,16843009*$n(Me,Ge,Ge))}function _a(D,H){var oe,pe=4;for(oe=0;4>oe;++oe)pe+=D[H+oe-32]+D[H-1+32*oe];for(pe>>=3,oe=0;4>oe;++oe)o(D,H+32*oe,pe,4)}function ja(D,H){var oe=D[H-1+0],pe=D[H-1+32],Me=D[H-1+64],Ge=D[H-1-32],Ke=D[H+0-32],Ze=D[H+1-32],nt=D[H+2-32],He=D[H+3-32];D[H+0+96]=$n(pe,Me,D[H-1+96]),D[H+1+96]=D[H+0+64]=$n(oe,pe,Me),D[H+2+96]=D[H+1+64]=D[H+0+32]=$n(Ge,oe,pe),D[H+3+96]=D[H+2+64]=D[H+1+32]=D[H+0+0]=$n(Ke,Ge,oe),D[H+3+64]=D[H+2+32]=D[H+1+0]=$n(Ze,Ke,Ge),D[H+3+32]=D[H+2+0]=$n(nt,Ze,Ke),D[H+3+0]=$n(He,nt,Ze)}function Ra(D,H){var oe=D[H+1-32],pe=D[H+2-32],Me=D[H+3-32],Ge=D[H+4-32],Ke=D[H+5-32],Ze=D[H+6-32],nt=D[H+7-32];D[H+0+0]=$n(D[H+0-32],oe,pe),D[H+1+0]=D[H+0+32]=$n(oe,pe,Me),D[H+2+0]=D[H+1+32]=D[H+0+64]=$n(pe,Me,Ge),D[H+3+0]=D[H+2+32]=D[H+1+64]=D[H+0+96]=$n(Me,Ge,Ke),D[H+3+32]=D[H+2+64]=D[H+1+96]=$n(Ge,Ke,Ze),D[H+3+64]=D[H+2+96]=$n(Ke,Ze,nt),D[H+3+96]=$n(Ze,nt,nt)}function aa(D,H){var oe=D[H-1+0],pe=D[H-1+32],Me=D[H-1+64],Ge=D[H-1-32],Ke=D[H+0-32],Ze=D[H+1-32],nt=D[H+2-32],He=D[H+3-32];D[H+0+0]=D[H+1+64]=Ge+Ke+1>>1,D[H+1+0]=D[H+2+64]=Ke+Ze+1>>1,D[H+2+0]=D[H+3+64]=Ze+nt+1>>1,D[H+3+0]=nt+He+1>>1,D[H+0+96]=$n(Me,pe,oe),D[H+0+64]=$n(pe,oe,Ge),D[H+0+32]=D[H+1+96]=$n(oe,Ge,Ke),D[H+1+32]=D[H+2+96]=$n(Ge,Ke,Ze),D[H+2+32]=D[H+3+96]=$n(Ke,Ze,nt),D[H+3+32]=$n(Ze,nt,He)}function tr(D,H){var oe=D[H+0-32],pe=D[H+1-32],Me=D[H+2-32],Ge=D[H+3-32],Ke=D[H+4-32],Ze=D[H+5-32],nt=D[H+6-32],He=D[H+7-32];D[H+0+0]=oe+pe+1>>1,D[H+1+0]=D[H+0+64]=pe+Me+1>>1,D[H+2+0]=D[H+1+64]=Me+Ge+1>>1,D[H+3+0]=D[H+2+64]=Ge+Ke+1>>1,D[H+0+32]=$n(oe,pe,Me),D[H+1+32]=D[H+0+96]=$n(pe,Me,Ge),D[H+2+32]=D[H+1+96]=$n(Me,Ge,Ke),D[H+3+32]=D[H+2+96]=$n(Ge,Ke,Ze),D[H+3+64]=$n(Ke,Ze,nt),D[H+3+96]=$n(Ze,nt,He)}function ti(D,H){var oe=D[H-1+0],pe=D[H-1+32],Me=D[H-1+64],Ge=D[H-1+96];D[H+0+0]=oe+pe+1>>1,D[H+2+0]=D[H+0+32]=pe+Me+1>>1,D[H+2+32]=D[H+0+64]=Me+Ge+1>>1,D[H+1+0]=$n(oe,pe,Me),D[H+3+0]=D[H+1+32]=$n(pe,Me,Ge),D[H+3+32]=D[H+1+64]=$n(Me,Ge,Ge),D[H+3+64]=D[H+2+64]=D[H+0+96]=D[H+1+96]=D[H+2+96]=D[H+3+96]=Ge}function ni(D,H){var oe=D[H-1+0],pe=D[H-1+32],Me=D[H-1+64],Ge=D[H-1+96],Ke=D[H-1-32],Ze=D[H+0-32],nt=D[H+1-32],He=D[H+2-32];D[H+0+0]=D[H+2+32]=oe+Ke+1>>1,D[H+0+32]=D[H+2+64]=pe+oe+1>>1,D[H+0+64]=D[H+2+96]=Me+pe+1>>1,D[H+0+96]=Ge+Me+1>>1,D[H+3+0]=$n(Ze,nt,He),D[H+2+0]=$n(Ke,Ze,nt),D[H+1+0]=D[H+3+32]=$n(oe,Ke,Ze),D[H+1+32]=D[H+3+64]=$n(pe,oe,Ke),D[H+1+64]=D[H+3+96]=$n(Me,pe,oe),D[H+1+96]=$n(Ge,Me,pe)}function Ws(D,H){var oe;for(oe=0;8>oe;++oe)r(D,H+32*oe,D,H-32,8)}function Yo(D,H){var oe;for(oe=0;8>oe;++oe)o(D,H,D[H-1],8),H+=32}function $r(D,H,oe){var pe;for(pe=0;8>pe;++pe)o(H,oe+32*pe,D,8)}function al(D,H){var oe,pe=8;for(oe=0;8>oe;++oe)pe+=D[H+oe-32]+D[H-1+32*oe];$r(pe>>4,D,H)}function jl(D,H){var oe,pe=4;for(oe=0;8>oe;++oe)pe+=D[H+oe-32];$r(pe>>3,D,H)}function Gi(D,H){var oe,pe=4;for(oe=0;8>oe;++oe)pe+=D[H-1+32*oe];$r(pe>>3,D,H)}function Fs(D,H){$r(128,D,H)}function uo(D,H,oe){var pe=D[H-oe],Me=D[H+0],Ge=3*(Me-pe)+TA[1020+D[H-2*oe]-D[H+oe]],Ke=xf[112+(Ge+4>>3)];D[H-oe]=hl[255+pe+xf[112+(Ge+3>>3)]],D[H+0]=hl[255+Me-Ke]}function Zu(D,H,oe,pe){var Me=D[H+0],Ge=D[H+oe];return va[255+D[H-2*oe]-D[H-oe]]>pe||va[255+Ge-Me]>pe}function $l(D,H,oe,pe){return 4*va[255+D[H-oe]-D[H+0]]+va[255+D[H-2*oe]-D[H+oe]]<=pe}function Gl(D,H,oe,pe,Me){var Ge=D[H-3*oe],Ke=D[H-2*oe],Ze=D[H-oe],nt=D[H+0],He=D[H+oe],Kt=D[H+2*oe],vn=D[H+3*oe];return 4*va[255+Ze-nt]+va[255+Ke-He]>pe?0:va[255+D[H-4*oe]-Ge]<=Me&&va[255+Ge-Ke]<=Me&&va[255+Ke-Ze]<=Me&&va[255+vn-Kt]<=Me&&va[255+Kt-He]<=Me&&va[255+He-nt]<=Me}function la(D,H,oe,pe){var Me=2*pe+1;for(pe=0;16>pe;++pe)$l(D,H+pe,oe,Me)&&uo(D,H+pe,oe)}function ka(D,H,oe,pe){var Me=2*pe+1;for(pe=0;16>pe;++pe)$l(D,H+pe*oe,1,Me)&&uo(D,H+pe*oe,1)}function yo(D,H,oe,pe){var Me;for(Me=3;0<Me;--Me)la(D,H+=4*oe,oe,pe)}function Rs(D,H,oe,pe){var Me;for(Me=3;0<Me;--Me)ka(D,H+=4,oe,pe)}function us(D,H,oe,pe,Me,Ge,Ke,Ze){for(Ge=2*Ge+1;0<Me--;){if(Gl(D,H,oe,Ge,Ke))if(Zu(D,H,oe,Ze))uo(D,H,oe);else{var nt=D,He=H,Kt=oe,vn=nt[He-2*Kt],pn=nt[He-Kt],un=nt[He+0],Zt=nt[He+Kt],Pn=nt[He+2*Kt],Wt=27*(Gn=TA[1020+3*(un-pn)+TA[1020+vn-Zt]])+63>>7,en=18*Gn+63>>7,Gn=9*Gn+63>>7;nt[He-3*Kt]=hl[255+nt[He-3*Kt]+Gn],nt[He-2*Kt]=hl[255+vn+en],nt[He-Kt]=hl[255+pn+Wt],nt[He+0]=hl[255+un-Wt],nt[He+Kt]=hl[255+Zt-en],nt[He+2*Kt]=hl[255+Pn-Gn]}H+=pe}}function ca(D,H,oe,pe,Me,Ge,Ke,Ze){for(Ge=2*Ge+1;0<Me--;){if(Gl(D,H,oe,Ge,Ke))if(Zu(D,H,oe,Ze))uo(D,H,oe);else{var nt=D,He=H,Kt=oe,vn=nt[He-Kt],pn=nt[He+0],un=nt[He+Kt],Zt=xf[112+((Pn=3*(pn-vn))+4>>3)],Pn=xf[112+(Pn+3>>3)],Wt=Zt+1>>1;nt[He-2*Kt]=hl[255+nt[He-2*Kt]+Wt],nt[He-Kt]=hl[255+vn+Pn],nt[He+0]=hl[255+pn-Zt],nt[He+Kt]=hl[255+un-Wt]}H+=pe}}function $a(D,H,oe,pe,Me,Ge){us(D,H,oe,1,16,pe,Me,Ge)}function no(D,H,oe,pe,Me,Ge){us(D,H,1,oe,16,pe,Me,Ge)}function xs(D,H,oe,pe,Me,Ge){var Ke;for(Ke=3;0<Ke;--Ke)ca(D,H+=4*oe,oe,1,16,pe,Me,Ge)}function Xs(D,H,oe,pe,Me,Ge){var Ke;for(Ke=3;0<Ke;--Ke)ca(D,H+=4,1,oe,16,pe,Me,Ge)}function qo(D,H,oe,pe,Me,Ge,Ke,Ze){us(D,H,Me,1,8,Ge,Ke,Ze),us(oe,pe,Me,1,8,Ge,Ke,Ze)}function wu(D,H,oe,pe,Me,Ge,Ke,Ze){us(D,H,1,Me,8,Ge,Ke,Ze),us(oe,pe,1,Me,8,Ge,Ke,Ze)}function ua(D,H,oe,pe,Me,Ge,Ke,Ze){ca(D,H+4*Me,Me,1,8,Ge,Ke,Ze),ca(oe,pe+4*Me,Me,1,8,Ge,Ke,Ze)}function Ga(D,H,oe,pe,Me,Ge,Ke,Ze){ca(D,H+4,1,Me,8,Ge,Ke,Ze),ca(oe,pe+4,1,Me,8,Ge,Ke,Ze)}function Ka(){this.ba=new Ns,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new lo,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ll(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Kl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ma(){this.ua=0,this.Wa=new Re,this.vb=new Re,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new lt,this.yc=new le}function xd(){this.xb=this.a=0,this.l=new Vl,this.ca=new Ns,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Ee,this.Pb=0,this.wd=new Ee,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ma,this.ab=0,this.gc=h(4,Kl),this.Oc=0}function ql(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Vl,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function gs(D,H,oe,pe,Me,Ge,Ke){for(D=D==null?0:D[H+0],H=0;H<Ke;++H)Me[Ge+H]=D+oe[pe+H]&255,D=Me[Ge+H]}function Yu(D,H,oe,pe,Me,Ge,Ke){var Ze;if(D==null)gs(null,null,oe,pe,Me,Ge,Ke);else for(Ze=0;Ze<Ke;++Ze)Me[Ge+Ze]=D[H+Ze]+oe[pe+Ze]&255}function Zs(D,H,oe,pe,Me,Ge,Ke){if(D==null)gs(null,null,oe,pe,Me,Ge,Ke);else{var Ze,nt=D[H+0],He=nt,Kt=nt;for(Ze=0;Ze<Ke;++Ze)He=Kt+(nt=D[H+Ze])-He,Kt=oe[pe+Ze]+(-256&He?0>He?0:255:He)&255,He=nt,Me[Ge+Ze]=Kt}}function xu(D,H,oe,pe){var Me=H.width,Ge=H.o;if(e(D!=null&&H!=null),0>oe||0>=pe||oe+pe>Ge)return null;if(!D.Cc){if(D.ga==null){var Ke;if(D.ga=new ql,(Ke=D.ga==null)||(Ke=H.width*H.o,e(D.Gb.length==0),D.Gb=l(Ke),D.Uc=0,D.Gb==null?Ke=0:(D.mb=D.Gb,D.nb=D.Uc,D.rc=null,Ke=1),Ke=!Ke),!Ke){Ke=D.ga;var Ze=D.Fa,nt=D.P,He=D.qc,Kt=D.mb,vn=D.nb,pn=nt+1,un=He-1,Zt=Ke.l;if(e(Ze!=null&&Kt!=null&&H!=null),Zl[0]=null,Zl[1]=gs,Zl[2]=Yu,Zl[3]=Zs,Ke.ca=Kt,Ke.tb=vn,Ke.c=H.width,Ke.i=H.height,e(0<Ke.c&&0<Ke.i),1>=He)H=0;else if(Ke.$a=Ze[nt+0]>>0&3,Ke.Z=Ze[nt+0]>>2&3,Ke.Lc=Ze[nt+0]>>4&3,nt=Ze[nt+0]>>6&3,0>Ke.$a||1<Ke.$a||4<=Ke.Z||1<Ke.Lc||nt)H=0;else if(Zt.put=jt,Zt.ac=Zo,Zt.bc=we,Zt.ma=Ke,Zt.width=H.width,Zt.height=H.height,Zt.Da=H.Da,Zt.v=H.v,Zt.va=H.va,Zt.j=H.j,Zt.o=H.o,Ke.$a)e:{e(Ke.$a==1),H=gr();t:for(;;){if(H==null){H=0;break e}if(e(Ke!=null),Ke.mc=H,H.c=Ke.c,H.i=Ke.i,H.l=Ke.l,H.l.ma=Ke,H.l.width=Ke.c,H.l.height=Ke.i,H.a=0,Mt(H.m,Ze,pn,un),!Er(Ke.c,Ke.i,1,H,null)||(H.ab==1&&H.gc[0].hc==3&&nn(H.s)?(Ke.ic=1,Ze=H.c*H.i,H.Ta=null,H.Ua=0,H.V=l(Ze),H.Ba=0,H.V==null?(H.a=1,H=0):H=1):(Ke.ic=0,H=Tr(H,Ke.c)),!H))break t;H=1;break e}Ke.mc=null,H=0}else H=un>=Ke.c*Ke.i;Ke=!H}if(Ke)return null;D.ga.Lc!=1?D.Ga=0:pe=Ge-oe}e(D.ga!=null),e(oe+pe<=Ge);e:{if(H=(Ze=D.ga).c,Ge=Ze.l.o,Ze.$a==0){if(pn=D.rc,un=D.Vc,Zt=D.Fa,nt=D.P+1+oe*H,He=D.mb,Kt=D.nb+oe*H,e(nt<=D.P+D.qc),Ze.Z!=0)for(e(Zl[Ze.Z]!=null),Ke=0;Ke<pe;++Ke)Zl[Ze.Z](pn,un,Zt,nt,He,Kt,H),pn=He,un=Kt,Kt+=H,nt+=H;else for(Ke=0;Ke<pe;++Ke)r(He,Kt,Zt,nt,H),pn=He,un=Kt,Kt+=H,nt+=H;D.rc=pn,D.Vc=un}else{if(e(Ze.mc!=null),H=oe+pe,e((Ke=Ze.mc)!=null),e(H<=Ke.i),Ke.C>=H)H=1;else if(Ze.ic||sn(),Ze.ic){Ze=Ke.V,pn=Ke.Ba,un=Ke.c;var Pn=Ke.i,Wt=(Zt=1,nt=Ke.$/un,He=Ke.$%un,Kt=Ke.m,vn=Ke.s,Ke.$),en=un*Pn,Gn=un*H,Xn=vn.wc,qn=Wt<Gn?Vt(vn,He,nt):null;e(Wt<=en),e(H<=Pn),e(nn(vn));t:for(;;){for(;!Kt.h&&Wt<Gn;){if(He&Xn||(qn=Vt(vn,He,nt)),e(qn!=null),_t(Kt),256>(Pn=ot(qn.G[0],qn.H[0],Kt)))Ze[pn+Wt]=Pn,++Wt,++He>=un&&(He=0,++nt<=H&&!(nt%16)&&En(Ke,nt));else{if(!(280>Pn)){Zt=0;break t}Pn=Ye(Pn-256,Kt);var Pr,Cr=ot(qn.G[4],qn.H[4],Kt);if(_t(Kt),!(Wt>=(Cr=dt(un,Cr=Ye(Cr,Kt)))&&en-Wt>=Pn)){Zt=0;break t}for(Pr=0;Pr<Pn;++Pr)Ze[pn+Wt+Pr]=Ze[pn+Wt+Pr-Cr];for(Wt+=Pn,He+=Pn;He>=un;)He-=un,++nt<=H&&!(nt%16)&&En(Ke,nt);Wt<Gn&&He&Xn&&(qn=Vt(vn,He,nt))}e(Kt.h==We(Kt))}En(Ke,nt>H?H:nt);break t}!Zt||Kt.h&&Wt<en?(Zt=0,Ke.a=Kt.h?5:3):Ke.$=Wt,H=Zt}else H=zn(Ke,Ke.V,Ke.Ba,Ke.c,Ke.i,H,Br);if(!H){pe=0;break e}}oe+pe>=Ge&&(D.Cc=1),pe=1}if(!pe)return null;if(D.Cc&&((pe=D.ga)!=null&&(pe.mc=null),D.ga=null,0<D.Ga))return alert("todo:WebPDequantizeLevels"),null}return D.nb+oe*Me}function X(D,H,oe,pe,Me,Ge){for(;0<Me--;){var Ke,Ze=D,nt=H+(oe?1:0),He=D,Kt=H+(oe?0:3);for(Ke=0;Ke<pe;++Ke){var vn=He[Kt+4*Ke];vn!=255&&(vn*=32897,Ze[nt+4*Ke+0]=Ze[nt+4*Ke+0]*vn>>23,Ze[nt+4*Ke+1]=Ze[nt+4*Ke+1]*vn>>23,Ze[nt+4*Ke+2]=Ze[nt+4*Ke+2]*vn>>23)}H+=Ge}}function ke(D,H,oe,pe,Me){for(;0<pe--;){var Ge;for(Ge=0;Ge<oe;++Ge){var Ke=D[H+2*Ge+0],Ze=15&(He=D[H+2*Ge+1]),nt=4369*Ze,He=(240&He|He>>4)*nt>>16;D[H+2*Ge+0]=(240&Ke|Ke>>4)*nt>>16&240|(15&Ke|Ke<<4)*nt>>16>>4&15,D[H+2*Ge+1]=240&He|Ze}H+=Me}}function Bt(D,H,oe,pe,Me,Ge,Ke,Ze){var nt,He,Kt=255;for(He=0;He<Me;++He){for(nt=0;nt<pe;++nt){var vn=D[H+nt];Ge[Ke+4*nt]=vn,Kt&=vn}H+=oe,Ke+=Ze}return Kt!=255}function Ht(D,H,oe,pe,Me){var Ge;for(Ge=0;Ge<Me;++Ge)oe[pe+Ge]=D[H+Ge]>>8}function sn(){Wa=X,Mo=ke,Eo=Bt,Wr=Ht}function Dn(D,H,oe){ne[D]=function(pe,Me,Ge,Ke,Ze,nt,He,Kt,vn,pn,un,Zt,Pn,Wt,en,Gn,Xn){var qn,Pr=Xn-1>>1,Cr=Ze[nt+0]|He[Kt+0]<<16,Kr=vn[pn+0]|un[Zt+0]<<16;e(pe!=null);var wr=3*Cr+Kr+131074>>2;for(H(pe[Me+0],255&wr,wr>>16,Pn,Wt),Ge!=null&&(wr=3*Kr+Cr+131074>>2,H(Ge[Ke+0],255&wr,wr>>16,en,Gn)),qn=1;qn<=Pr;++qn){var Zi=Ze[nt+qn]|He[Kt+qn]<<16,Yi=vn[pn+qn]|un[Zt+qn]<<16,si=Cr+Zi+Kr+Yi+524296,Ei=si+2*(Zi+Kr)>>3;wr=Ei+Cr>>1,Cr=(si=si+2*(Cr+Yi)>>3)+Zi>>1,H(pe[Me+2*qn-1],255&wr,wr>>16,Pn,Wt+(2*qn-1)*oe),H(pe[Me+2*qn-0],255&Cr,Cr>>16,Pn,Wt+(2*qn-0)*oe),Ge!=null&&(wr=si+Kr>>1,Cr=Ei+Yi>>1,H(Ge[Ke+2*qn-1],255&wr,wr>>16,en,Gn+(2*qn-1)*oe),H(Ge[Ke+2*qn+0],255&Cr,Cr>>16,en,Gn+(2*qn+0)*oe)),Cr=Zi,Kr=Yi}1&Xn||(wr=3*Cr+Kr+131074>>2,H(pe[Me+Xn-1],255&wr,wr>>16,Pn,Wt+(Xn-1)*oe),Ge!=null&&(wr=3*Kr+Cr+131074>>2,H(Ge[Ke+Xn-1],255&wr,wr>>16,en,Gn+(Xn-1)*oe)))}}function Zn(){Xa[Cf]=Pd,Xa[IA]=UA,Xa[Ng]=Hg,Xa[PA]=NA,Xa[Sd]=zA,Xa[Ef]=sh,Xa[LA]=jg,Xa[Bf]=UA,Xa[FA]=NA,Xa[Sf]=zA,Xa[ym]=sh}function xr(D){return D&~xm?0>D?0:255:D>>wm}function N(D,H){return xr((19077*D>>8)+(26149*H>>8)-14234)}function ae(D,H,oe){return xr((19077*D>>8)-(6419*H>>8)-(13320*oe>>8)+8708)}function fe(D,H){return xr((19077*D>>8)+(33050*H>>8)-17685)}function Le(D,H,oe,pe,Me){pe[Me+0]=N(D,oe),pe[Me+1]=ae(D,H,oe),pe[Me+2]=fe(D,H)}function an(D,H,oe,pe,Me){pe[Me+0]=fe(D,H),pe[Me+1]=ae(D,H,oe),pe[Me+2]=N(D,oe)}function Qt(D,H,oe,pe,Me){var Ge=ae(D,H,oe);H=Ge<<3&224|fe(D,H)>>3,pe[Me+0]=248&N(D,oe)|Ge>>5,pe[Me+1]=H}function nr(D,H,oe,pe,Me){var Ge=240&fe(D,H)|15;pe[Me+0]=240&N(D,oe)|ae(D,H,oe)>>4,pe[Me+1]=Ge}function di(D,H,oe,pe,Me){pe[Me+0]=255,Le(D,H,oe,pe,Me+1)}function ir(D,H,oe,pe,Me){an(D,H,oe,pe,Me),pe[Me+3]=255}function Ai(D,H,oe,pe,Me){Le(D,H,oe,pe,Me),pe[Me+3]=255}function ro(D,H){return 0>D?0:D>H?H:D}function ko(D,H,oe){ne[D]=function(pe,Me,Ge,Ke,Ze,nt,He,Kt,vn){for(var pn=Kt+(-2&vn)*oe;Kt!=pn;)H(pe[Me+0],Ge[Ke+0],Ze[nt+0],He,Kt),H(pe[Me+1],Ge[Ke+0],Ze[nt+0],He,Kt+oe),Me+=2,++Ke,++nt,Kt+=2*oe;1&vn&&H(pe[Me+0],Ge[Ke+0],Ze[nt+0],He,Kt)}}function ha(D,H,oe){return oe==0?D==0?H==0?6:5:H==0?4:0:oe}function ys(D,H,oe,pe,Me){switch(D>>>30){case 3:qc(H,oe,pe,Me,0);break;case 2:Cs(H,oe,pe,Me);break;case 1:Da(H,oe,pe,Me)}}function Jo(D,H){var oe,pe,Me=H.M,Ge=H.Nb,Ke=D.oc,Ze=D.pc+40,nt=D.oc,He=D.pc+584,Kt=D.oc,vn=D.pc+600;for(oe=0;16>oe;++oe)Ke[Ze+32*oe-1]=129;for(oe=0;8>oe;++oe)nt[He+32*oe-1]=129,Kt[vn+32*oe-1]=129;for(0<Me?Ke[Ze-1-32]=nt[He-1-32]=Kt[vn-1-32]=129:(o(Ke,Ze-32-1,127,21),o(nt,He-32-1,127,9),o(Kt,vn-32-1,127,9)),pe=0;pe<D.za;++pe){var pn=H.ya[H.aa+pe];if(0<pe){for(oe=-1;16>oe;++oe)r(Ke,Ze+32*oe-4,Ke,Ze+32*oe+12,4);for(oe=-1;8>oe;++oe)r(nt,He+32*oe-4,nt,He+32*oe+4,4),r(Kt,vn+32*oe-4,Kt,vn+32*oe+4,4)}var un=D.Gd,Zt=D.Hd+pe,Pn=pn.ad,Wt=pn.Hc;if(0<Me&&(r(Ke,Ze-32,un[Zt].y,0,16),r(nt,He-32,un[Zt].f,0,8),r(Kt,vn-32,un[Zt].ea,0,8)),pn.Za){var en=Ke,Gn=Ze-32+16;for(0<Me&&(pe>=D.za-1?o(en,Gn,un[Zt].y[15],4):r(en,Gn,un[Zt+1].y,0,4)),oe=0;4>oe;oe++)en[Gn+128+oe]=en[Gn+256+oe]=en[Gn+384+oe]=en[Gn+0+oe];for(oe=0;16>oe;++oe,Wt<<=2)en=Ke,Gn=Ze+Wg[oe],Na[pn.Ob[oe]](en,Gn),ys(Wt,Pn,16*+oe,en,Gn)}else if(en=ha(pe,Me,pn.Ob[0]),Tu[en](Ke,Ze),Wt!=0)for(oe=0;16>oe;++oe,Wt<<=2)ys(Wt,Pn,16*+oe,Ke,Ze+Wg[oe]);for(oe=pn.Gc,en=ha(pe,Me,pn.Dd),Yc[en](nt,He),Yc[en](Kt,vn),Wt=Pn,en=nt,Gn=He,255&(pn=oe>>0)&&(170&pn?Bd(Wt,256,en,Gn):cl(Wt,256,en,Gn)),pn=Kt,Wt=vn,255&(oe>>=8)&&(170&oe?Bd(Pn,320,pn,Wt):cl(Pn,320,pn,Wt)),Me<D.Ub-1&&(r(un[Zt].y,0,Ke,Ze+480,16),r(un[Zt].f,0,nt,He+224,8),r(un[Zt].ea,0,Kt,vn+224,8)),oe=8*Ge*D.B,un=D.sa,Zt=D.ta+16*pe+16*Ge*D.R,Pn=D.qa,pn=D.ra+8*pe+oe,Wt=D.Ha,en=D.Ia+8*pe+oe,oe=0;16>oe;++oe)r(un,Zt+oe*D.R,Ke,Ze+32*oe,16);for(oe=0;8>oe;++oe)r(Pn,pn+oe*D.B,nt,He+32*oe,8),r(Wt,en+oe*D.B,Kt,vn+32*oe,8)}}function xl(D,H,oe,pe,Me,Ge,Ke,Ze,nt){var He=[0],Kt=[0],vn=0,pn=nt!=null?nt.kd:0,un=nt??new ll;if(D==null||12>oe)return 7;un.data=D,un.w=H,un.ha=oe,H=[H],oe=[oe],un.gb=[un.gb];e:{var Zt=H,Pn=oe,Wt=un.gb;if(e(D!=null),e(Pn!=null),e(Wt!=null),Wt[0]=0,12<=Pn[0]&&!n(D,Zt[0],"RIFF")){if(n(D,Zt[0]+8,"WEBP")){Wt=3;break e}var en=Te(D,Zt[0]+4);if(12>en||4294967286<en){Wt=3;break e}if(pn&&en>Pn[0]-8){Wt=7;break e}Wt[0]=en,Zt[0]+=12,Pn[0]-=12}Wt=0}if(Wt!=0)return Wt;for(en=0<un.gb[0],oe=oe[0];;){e:{var Gn=D;Pn=H,Wt=oe;var Xn=He,qn=Kt,Pr=Zt=[0];if((wr=vn=[vn])[0]=0,8>Wt[0])Wt=7;else{if(!n(Gn,Pn[0],"VP8X")){if(Te(Gn,Pn[0]+4)!=10){Wt=3;break e}if(18>Wt[0]){Wt=7;break e}var Cr=Te(Gn,Pn[0]+8),Kr=1+jn(Gn,Pn[0]+12);if(2147483648<=Kr*(Gn=1+jn(Gn,Pn[0]+15))){Wt=3;break e}Pr!=null&&(Pr[0]=Cr),Xn!=null&&(Xn[0]=Kr),qn!=null&&(qn[0]=Gn),Pn[0]+=18,Wt[0]-=18,wr[0]=1}Wt=0}}if(vn=vn[0],Zt=Zt[0],Wt!=0)return Wt;if(Pn=!!(2&Zt),!en&&vn)return 3;if(Ge!=null&&(Ge[0]=!!(16&Zt)),Ke!=null&&(Ke[0]=Pn),Ze!=null&&(Ze[0]=0),Ke=He[0],Zt=Kt[0],vn&&Pn&&nt==null){Wt=0;break}if(4>oe){Wt=7;break}if(en&&vn||!en&&!vn&&!n(D,H[0],"ALPH")){oe=[oe],un.na=[un.na],un.P=[un.P],un.Sa=[un.Sa];e:{Cr=D,Wt=H,en=oe;var wr=un.gb;Xn=un.na,qn=un.P,Pr=un.Sa,Kr=22,e(Cr!=null),e(en!=null),Gn=Wt[0];var Zi=en[0];for(e(Xn!=null),e(Pr!=null),Xn[0]=null,qn[0]=null,Pr[0]=0;;){if(Wt[0]=Gn,en[0]=Zi,8>Zi){Wt=7;break e}var Yi=Te(Cr,Gn+4);if(4294967286<Yi){Wt=3;break e}var si=8+Yi+1&-2;if(Kr+=si,0<wr&&Kr>wr){Wt=3;break e}if(!n(Cr,Gn,"VP8 ")||!n(Cr,Gn,"VP8L")){Wt=0;break e}if(Zi[0]<si){Wt=7;break e}n(Cr,Gn,"ALPH")||(Xn[0]=Cr,qn[0]=Gn+8,Pr[0]=Yi),Gn+=si,Zi-=si}}if(oe=oe[0],un.na=un.na[0],un.P=un.P[0],un.Sa=un.Sa[0],Wt!=0)break}oe=[oe],un.Ja=[un.Ja],un.xa=[un.xa];e:if(wr=D,Wt=H,en=oe,Xn=un.gb[0],qn=un.Ja,Pr=un.xa,Cr=Wt[0],Gn=!n(wr,Cr,"VP8 "),Kr=!n(wr,Cr,"VP8L"),e(wr!=null),e(en!=null),e(qn!=null),e(Pr!=null),8>en[0])Wt=7;else{if(Gn||Kr){if(wr=Te(wr,Cr+4),12<=Xn&&wr>Xn-12){Wt=3;break e}if(pn&&wr>en[0]-8){Wt=7;break e}qn[0]=wr,Wt[0]+=8,en[0]-=8,Pr[0]=Kr}else Pr[0]=5<=en[0]&&wr[Cr+0]==47&&!(wr[Cr+4]>>5),qn[0]=en[0];Wt=0}if(oe=oe[0],un.Ja=un.Ja[0],un.xa=un.xa[0],H=H[0],Wt!=0)break;if(4294967286<un.Ja)return 3;if(Ze==null||Pn||(Ze[0]=un.xa?2:1),Ke=[Ke],Zt=[Zt],un.xa){if(5>oe){Wt=7;break}Ze=Ke,pn=Zt,Pn=Ge,D==null||5>oe?D=0:5<=oe&&D[H+0]==47&&!(D[H+4]>>5)?(en=[0],wr=[0],Xn=[0],Mt(qn=new Ee,D,H,oe),Ce(qn,en,wr,Xn)?(Ze!=null&&(Ze[0]=en[0]),pn!=null&&(pn[0]=wr[0]),Pn!=null&&(Pn[0]=Xn[0]),D=1):D=0):D=0}else{if(10>oe){Wt=7;break}Ze=Zt,D==null||10>oe||!vu(D,H+3,oe-3)?D=0:(pn=D[H+0]|D[H+1]<<8|D[H+2]<<16,Pn=16383&(D[H+7]<<8|D[H+6]),D=16383&(D[H+9]<<8|D[H+8]),1&pn||3<(pn>>1&7)||!(pn>>4&1)||pn>>5>=un.Ja||!Pn||!D?D=0:(Ke&&(Ke[0]=Pn),Ze&&(Ze[0]=D),D=1))}if(!D||(Ke=Ke[0],Zt=Zt[0],vn&&(He[0]!=Ke||Kt[0]!=Zt)))return 3;nt!=null&&(nt[0]=un,nt.offset=H-nt.w,e(4294967286>H-nt.w),e(nt.offset==nt.ha-oe));break}return Wt==0||Wt==7&&vn&&nt==null?(Ge!=null&&(Ge[0]|=un.na!=null&&0<un.na.length),pe!=null&&(pe[0]=Ke),Me!=null&&(Me[0]=Zt),0):Wt}function Gc(D,H,oe){var pe=H.width,Me=H.height,Ge=0,Ke=0,Ze=pe,nt=Me;if(H.Da=D!=null&&0<D.Da,H.Da&&(Ze=D.cd,nt=D.bd,Ge=D.v,Ke=D.j,11>oe||(Ge&=-2,Ke&=-2),0>Ge||0>Ke||0>=Ze||0>=nt||Ge+Ze>pe||Ke+nt>Me))return 0;if(H.v=Ge,H.j=Ke,H.va=Ge+Ze,H.o=Ke+nt,H.U=Ze,H.T=nt,H.da=D!=null&&0<D.da,H.da){if(!Yt(Ze,nt,oe=[D.ib],Ge=[D.hb]))return 0;H.ib=oe[0],H.hb=Ge[0]}return H.ob=D!=null&&D.ob,H.Kb=D==null||!D.Sd,H.da&&(H.ob=H.ib<3*pe/4&&H.hb<3*Me/4,H.Kb=0),1}function Kc(D){if(D==null)return 2;if(11>D.S){var H=D.f.RGBA;H.fb+=(D.height-1)*H.A,H.A=-H.A}else H=D.f.kb,D=D.height,H.O+=(D-1)*H.fa,H.fa=-H.fa,H.N+=(D-1>>1)*H.Ab,H.Ab=-H.Ab,H.W+=(D-1>>1)*H.Db,H.Db=-H.Db,H.F!=null&&(H.J+=(D-1)*H.lb,H.lb=-H.lb);return 0}function Cu(D,H,oe,pe){if(pe==null||0>=D||0>=H)return 2;if(oe!=null){if(oe.Da){var Me=oe.cd,Ge=oe.bd,Ke=-2&oe.v,Ze=-2&oe.j;if(0>Ke||0>Ze||0>=Me||0>=Ge||Ke+Me>D||Ze+Ge>H)return 2;D=Me,H=Ge}if(oe.da){if(!Yt(D,H,Me=[oe.ib],Ge=[oe.hb]))return 2;D=Me[0],H=Ge[0]}}pe.width=D,pe.height=H;e:{var nt=pe.width,He=pe.height;if(D=pe.S,0>=nt||0>=He||!(D>=Cf&&13>D))D=2;else{if(0>=pe.Rd&&pe.sd==null){Ke=Ge=Me=H=0;var Kt=(Ze=nt*QA[D])*He;if(11>D||(Ge=(He+1)/2*(H=(nt+1)/2),D==12&&(Ke=(Me=nt)*He)),(He=l(Kt+2*Ge+Ke))==null){D=1;break e}pe.sd=He,11>D?((nt=pe.f.RGBA).eb=He,nt.fb=0,nt.A=Ze,nt.size=Kt):((nt=pe.f.kb).y=He,nt.O=0,nt.fa=Ze,nt.Fd=Kt,nt.f=He,nt.N=0+Kt,nt.Ab=H,nt.Cd=Ge,nt.ea=He,nt.W=0+Kt+Ge,nt.Db=H,nt.Ed=Ge,D==12&&(nt.F=He,nt.J=0+Kt+2*Ge),nt.Tc=Ke,nt.lb=Me)}if(H=1,Me=pe.S,Ge=pe.width,Ke=pe.height,Me>=Cf&&13>Me)if(11>Me)D=pe.f.RGBA,H&=(Ze=Math.abs(D.A))*(Ke-1)+Ge<=D.size,H&=Ze>=Ge*QA[Me],H&=D.eb!=null;else{D=pe.f.kb,Ze=(Ge+1)/2,Kt=(Ke+1)/2,nt=Math.abs(D.fa),He=Math.abs(D.Ab);var vn=Math.abs(D.Db),pn=Math.abs(D.lb),un=pn*(Ke-1)+Ge;H&=nt*(Ke-1)+Ge<=D.Fd,H&=He*(Kt-1)+Ze<=D.Cd,H=(H&=vn*(Kt-1)+Ze<=D.Ed)&nt>=Ge&He>=Ze&vn>=Ze,H&=D.y!=null,H&=D.f!=null,H&=D.ea!=null,Me==12&&(H&=pn>=Ge,H&=un<=D.Tc,H&=D.F!=null)}else H=0;D=H?0:2}}return D!=0||oe!=null&&oe.fd&&(D=Kc(pe)),D}var rs=64,ho=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ju=24,Nn=32,Cd=8,Ys=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Jt("Predictor0","PredictorAdd0"),ne.Predictor0=function(){return 4278190080},ne.Predictor1=function(D){return D},ne.Predictor2=function(D,H,oe){return H[oe+0]},ne.Predictor3=function(D,H,oe){return H[oe+1]},ne.Predictor4=function(D,H,oe){return H[oe-1]},ne.Predictor5=function(D,H,oe){return fn(fn(D,H[oe+1]),H[oe+0])},ne.Predictor6=function(D,H,oe){return fn(D,H[oe-1])},ne.Predictor7=function(D,H,oe){return fn(D,H[oe+0])},ne.Predictor8=function(D,H,oe){return fn(H[oe-1],H[oe+0])},ne.Predictor9=function(D,H,oe){return fn(H[oe+0],H[oe+1])},ne.Predictor10=function(D,H,oe){return fn(fn(D,H[oe-1]),fn(H[oe+0],H[oe+1]))},ne.Predictor11=function(D,H,oe){var pe=H[oe+0];return 0>=_n(pe>>24&255,D>>24&255,(H=H[oe-1])>>24&255)+_n(pe>>16&255,D>>16&255,H>>16&255)+_n(pe>>8&255,D>>8&255,H>>8&255)+_n(255&pe,255&D,255&H)?pe:D},ne.Predictor12=function(D,H,oe){var pe=H[oe+0];return(Fn((D>>24&255)+(pe>>24&255)-((H=H[oe-1])>>24&255))<<24|Fn((D>>16&255)+(pe>>16&255)-(H>>16&255))<<16|Fn((D>>8&255)+(pe>>8&255)-(H>>8&255))<<8|Fn((255&D)+(255&pe)-(255&H)))>>>0},ne.Predictor13=function(D,H,oe){var pe=H[oe-1];return(Wn((D=fn(D,H[oe+0]))>>24&255,pe>>24&255)<<24|Wn(D>>16&255,pe>>16&255)<<16|Wn(D>>8&255,pe>>8&255)<<8|Wn(D>>0&255,pe>>0&255))>>>0};var Ed=ne.PredictorAdd0;ne.PredictorAdd1=er,Jt("Predictor2","PredictorAdd2"),Jt("Predictor3","PredictorAdd3"),Jt("Predictor4","PredictorAdd4"),Jt("Predictor5","PredictorAdd5"),Jt("Predictor6","PredictorAdd6"),Jt("Predictor7","PredictorAdd7"),Jt("Predictor8","PredictorAdd8"),Jt("Predictor9","PredictorAdd9"),Jt("Predictor10","PredictorAdd10"),Jt("Predictor11","PredictorAdd11"),Jt("Predictor12","PredictorAdd12"),Jt("Predictor13","PredictorAdd13");var eh=ne.PredictorAdd2;Ir("ColorIndexInverseTransform","MapARGB","32b",function(D){return D>>8&255},function(D){return D}),Ir("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(D){return D},function(D){return D>>8&255});var Uh,zs=ne.ColorIndexInverseTransform,th=ne.MapARGB,Oa=ne.VP8LColorIndexInverseTransformAlpha,Nh=ne.MapAlpha,Cl=ne.VP8LPredictorsAdd=[];Cl.length=16,(ne.VP8LPredictors=[]).length=16,(ne.VP8LPredictorsAdd_C=[]).length=16,(ne.VP8LPredictors_C=[]).length=16;var nh,qa,Wo,Eu,Cc,Ec,Bu,qc,Cs,Bd,Da,cl,zh,rh,ih,Bc,Wl,Xl,Wc,El,ul,ri,Xc,Ua,Wa,Mo,Eo,Wr,ks=l(511),Zc=l(2041),Vh=l(225),Su=l(767),oh=0,TA=Zc,xf=Vh,hl=Su,va=ks,Cf=0,IA=1,Ng=2,PA=3,Sd=4,Ef=5,LA=6,Bf=7,FA=8,Sf=9,ym=10,Tf=[2,3,7],If=[3,3,11],_m=[280,256,256,256,40],Bl=[0,1,1,1,0],vm=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],RA=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],kA=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],bm=8,Pf=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Td=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Qh=null,Lf=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],MA=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],OA=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],zg=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Id=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],o0=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Vg=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Tu=[],Na=[],Yc=[],Qg=1,DA=2,Zl=[],Xa=[];Dn("UpsampleRgbLinePair",Le,3),Dn("UpsampleBgrLinePair",an,3),Dn("UpsampleRgbaLinePair",Ai,4),Dn("UpsampleBgraLinePair",ir,4),Dn("UpsampleArgbLinePair",di,4),Dn("UpsampleRgba4444LinePair",nr,2),Dn("UpsampleRgb565LinePair",Qt,2);var Pd=ne.UpsampleRgbLinePair,Hg=ne.UpsampleBgrLinePair,UA=ne.UpsampleRgbaLinePair,NA=ne.UpsampleBgraLinePair,zA=ne.UpsampleArgbLinePair,sh=ne.UpsampleRgba4444LinePair,jg=ne.UpsampleRgb565LinePair,Sc=16,Ld=1<<Sc-1,ah=-227,Ff=482,wm=6,xm=(256<<wm)-1,Rf=0,$g=l(256),Gg=l(256),kf=l(256),s0=l(256),Kg=l(Ff-ah),qg=l(Ff-ah);ko("YuvToRgbRow",Le,3),ko("YuvToBgrRow",an,3),ko("YuvToRgbaRow",Ai,4),ko("YuvToBgraRow",ir,4),ko("YuvToArgbRow",di,4),ko("YuvToRgba4444Row",nr,2),ko("YuvToRgb565Row",Qt,2);var Wg=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Hh=[0,2,8],VA=[8,7,6,4,4,2,2,2,1,1,1,1],Mf=1;this.WebPDecodeRGBA=function(D,H,oe,pe,Me){var Ge=IA,Ke=new Ka,Ze=new Ns;Ke.ba=Ze,Ze.S=Ge,Ze.width=[Ze.width],Ze.height=[Ze.height];var nt=Ze.width,He=Ze.height,Kt=new ns;if(Kt==null||D==null)var vn=2;else e(Kt!=null),vn=xl(D,H,oe,Kt.width,Kt.height,Kt.Pd,Kt.Qd,Kt.format,null);if(vn!=0?nt=0:(nt!=null&&(nt[0]=Kt.width[0]),He!=null&&(He[0]=Kt.height[0]),nt=1),nt){Ze.width=Ze.width[0],Ze.height=Ze.height[0],pe!=null&&(pe[0]=Ze.width),Me!=null&&(Me[0]=Ze.height);e:{if(pe=new Vl,(Me=new ll).data=D,Me.w=H,Me.ha=oe,Me.kd=1,H=[0],e(Me!=null),((D=xl(Me.data,Me.w,Me.ha,null,null,null,H,null,Me))==0||D==7)&&H[0]&&(D=4),(H=D)==0){if(e(Ke!=null),pe.data=Me.data,pe.w=Me.w+Me.offset,pe.ha=Me.ha-Me.offset,pe.put=jt,pe.ac=Zo,pe.bc=we,pe.ma=Ke,Me.xa){if((D=gr())==null){Ke=1;break e}if(function(pn,un){var Zt=[0],Pn=[0],Wt=[0];t:for(;;){if(pn==null)return 0;if(un==null)return pn.a=2,0;if(pn.l=un,pn.a=0,Mt(pn.m,un.data,un.w,un.ha),!Ce(pn.m,Zt,Pn,Wt)){pn.a=3;break t}if(pn.xb=DA,un.width=Zt[0],un.height=Pn[0],!Er(Zt[0],Pn[0],1,pn,null))break t;return 1}return e(pn.a!=0),0}(D,pe)){if(pe=(H=Cu(pe.width,pe.height,Ke.Oa,Ke.ba))==0){t:{pe=D;n:for(;;){if(pe==null){pe=0;break t}if(e(pe.s.yc!=null),e(pe.s.Ya!=null),e(0<pe.s.Wb),e((oe=pe.l)!=null),e((Me=oe.ma)!=null),pe.xb!=0){if(pe.ca=Me.ba,pe.tb=Me.tb,e(pe.ca!=null),!Gc(Me.Oa,oe,PA)){pe.a=2;break n}if(!Tr(pe,oe.width)||oe.da)break n;if((oe.da||Ti(pe.ca.S))&&sn(),11>pe.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),pe.ca.f.kb.F!=null&&sn()),pe.Pb&&0<pe.s.ua&&pe.s.vb.X==null&&!Je(pe.s.vb,pe.s.Wa.Xa)){pe.a=1;break n}pe.xb=0}if(!zn(pe,pe.V,pe.Ba,pe.c,pe.i,oe.o,Gt))break n;Me.Dc=pe.Ma,pe=1;break t}e(pe.a!=0),pe=0}pe=!pe}pe&&(H=D.a)}else H=D.a}else{if((D=new Ql)==null){Ke=1;break e}if(D.Fa=Me.na,D.P=Me.P,D.qc=Me.Sa,vc(D,pe)){if((H=Cu(pe.width,pe.height,Ke.Oa,Ke.ba))==0){if(D.Aa=0,oe=Ke.Oa,e((Me=D)!=null),oe!=null){if(0<(nt=0>(nt=oe.Md)?0:100<nt?255:255*nt/100)){for(He=Kt=0;4>He;++He)12>(vn=Me.pb[He]).lc&&(vn.ia=nt*VA[0>vn.lc?0:vn.lc]>>3),Kt|=vn.ia;Kt&&(alert("todo:VP8InitRandom"),Me.ia=1)}Me.Ga=oe.Id,100<Me.Ga?Me.Ga=100:0>Me.Ga&&(Me.Ga=0)}La(D,pe)||(H=D.a)}}else H=D.a}H==0&&Ke.Oa!=null&&Ke.Oa.fd&&(H=Kc(Ke.ba))}Ke=H}Ge=Ke!=0?null:11>Ge?Ze.f.RGBA.eb:Ze.f.kb.y}else Ge=null;return Ge};var QA=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function b(ne,ue){for(var ye="",se=0;se<4;se++)ye+=String.fromCharCode(ne[ue++]);return ye}function E(ne,ue){return(ne[ue+0]<<0|ne[ue+1]<<8|ne[ue+2]<<16)>>>0}function I(ne,ue){return(ne[ue+0]<<0|ne[ue+1]<<8|ne[ue+2]<<16|ne[ue+3]<<24)>>>0}new i;var O=[0],M=[0],G=[],q=new i,Z=t,Y=function(ne,ue){var ye={},se=0,le=!1,ge=0,lt=0;if(ye.frames=[],!function($e,We,vt,_t){for(var at=0;at<_t;at++)if($e[We+at]!=vt.charCodeAt(at))return!0;return!1}(ne,ue,"RIFF",4)){var Ot,gt;for(I(ne,ue+=4),ue+=8;ue<ne.length;){var Tt=b(ne,ue),Mt=I(ne,ue+=4);ue+=4;var on=Mt+(1&Mt);switch(Tt){case"VP8 ":case"VP8L":ye.frames[se]===void 0&&(ye.frames[se]={}),(Ee=ye.frames[se]).src_off=le?lt:ue-8,Ee.src_size=ge+Mt+8,se++,le&&(le=!1,ge=0,lt=0);break;case"VP8X":(Ee=ye.header={}).feature_flags=ne[ue];var Ut=ue+4;Ee.canvas_width=1+E(ne,Ut),Ut+=3,Ee.canvas_height=1+E(ne,Ut),Ut+=3;break;case"ALPH":le=!0,ge=on+8,lt=ue-8;break;case"ANIM":(Ee=ye.header).bgcolor=I(ne,ue),Ut=ue+4,Ee.loop_count=(Ot=ne)[(gt=Ut)+0]<<0|Ot[gt+1]<<8,Ut+=2;break;case"ANMF":var In,Ee;(Ee=ye.frames[se]={}).offset_x=2*E(ne,ue),ue+=3,Ee.offset_y=2*E(ne,ue),ue+=3,Ee.width=1+E(ne,ue),ue+=3,Ee.height=1+E(ne,ue),ue+=3,Ee.duration=E(ne,ue),ue+=3,In=ne[ue++],Ee.dispose=1&In,Ee.blend=In>>1&1}Tt!="ANMF"&&(ue+=on)}return ye}}(Z,0);Y.response=Z,Y.rgbaoutput=!0,Y.dataurl=!1;var te=Y.header?Y.header:null,be=Y.frames?Y.frames:null;if(te){te.loop_counter=te.loop_count,O=[te.canvas_height],M=[te.canvas_width];for(var Pe=0;Pe<be.length&&be[Pe].blend!=0;Pe++);}var Se=be[0],Ie=q.WebPDecodeRGBA(Z,Se.src_off,Se.src_size,M,O);Se.rgba=Ie,Se.imgwidth=M[0],Se.imgheight=O[0];for(var Ae=0;Ae<M[0]*O[0]*4;Ae++)G[Ae]=Ie[Ae];return this.width=M,this.height=O,this.data=G,this}(function(t){var e=function(){return typeof WI=="function"},n=function(O,M,G,q){var Z=4,Y=h;switch(q){case t.image_compression.FAST:Z=1,Y=l;break;case t.image_compression.MEDIUM:Z=6,Y=p;break;case t.image_compression.SLOW:Z=9,Y=i}O=r(O,M,G,Y);var te=WI(O,{level:Z});return t.__addimage__.arrayBufferToBinaryString(te)},r=function(O,M,G,q){for(var Z,Y,te,be=O.length/M,Pe=new Uint8Array(O.length+be),Se=E(),Ie=0;Ie<be;Ie+=1){if(te=Ie*M,Z=O.subarray(te,te+M),q)Pe.set(q(Z,G,Y),te+Ie);else{for(var Ae,ne=Se.length,ue=[];Ae<ne;Ae+=1)ue[Ae]=Se[Ae](Z,G,Y);var ye=I(ue.concat());Pe.set(ue[ye],te+Ie)}Y=Z}return Pe},o=function(O){var M=Array.apply([],O);return M.unshift(0),M},l=function(O,M){var G,q=[],Z=O.length;q[0]=1;for(var Y=0;Y<Z;Y+=1)G=O[Y-M]||0,q[Y+1]=O[Y]-G+256&255;return q},h=function(O,M,G){var q,Z=[],Y=O.length;Z[0]=2;for(var te=0;te<Y;te+=1)q=G&&G[te]||0,Z[te+1]=O[te]-q+256&255;return Z},p=function(O,M,G){var q,Z,Y=[],te=O.length;Y[0]=3;for(var be=0;be<te;be+=1)q=O[be-M]||0,Z=G&&G[be]||0,Y[be+1]=O[be]+256-(q+Z>>>1)&255;return Y},i=function(O,M,G){var q,Z,Y,te,be=[],Pe=O.length;be[0]=4;for(var Se=0;Se<Pe;Se+=1)q=O[Se-M]||0,Z=G&&G[Se]||0,Y=G&&G[Se-M]||0,te=b(q,Z,Y),be[Se+1]=O[Se]-te+256&255;return be},b=function(O,M,G){if(O===M&&M===G)return O;var q=Math.abs(M-G),Z=Math.abs(O-G),Y=Math.abs(O+M-G-G);return q<=Z&&q<=Y?O:Z<=Y?M:G},E=function(){return[o,l,h,p,i]},I=function(O){var M=O.map(function(G){return G.reduce(function(q,Z){return q+Math.abs(Z)},0)});return M.indexOf(Math.min.apply(null,M))};t.processPNG=function(O,M,G,q){var Z,Y,te,be,Pe,Se,Ie,Ae,ne,ue,ye,se,le,ge,lt,Ot=this.decode.FLATE_DECODE,gt="";if(this.__addimage__.isArrayBuffer(O)&&(O=new Uint8Array(O)),this.__addimage__.isArrayBufferView(O)){if(O=(te=new Cwe(O)).imgData,Y=te.bits,Z=te.colorSpace,Pe=te.colors,[4,6].indexOf(te.colorType)!==-1){if(te.bits===8){ne=(Ae=te.pixelBitlength==32?new Uint32Array(te.decodePixels().buffer):te.pixelBitlength==16?new Uint16Array(te.decodePixels().buffer):new Uint8Array(te.decodePixels().buffer)).length,ye=new Uint8Array(ne*te.colors),ue=new Uint8Array(ne);var Tt,Mt=te.pixelBitlength-te.bits;for(ge=0,lt=0;ge<ne;ge++){for(le=Ae[ge],Tt=0;Tt<Mt;)ye[lt++]=le>>>Tt&255,Tt+=te.bits;ue[ge]=le>>>Tt&255}}if(te.bits===16){ne=(Ae=new Uint32Array(te.decodePixels().buffer)).length,ye=new Uint8Array(ne*(32/te.pixelBitlength)*te.colors),ue=new Uint8Array(ne*(32/te.pixelBitlength)),se=te.colors>1,ge=0,lt=0;for(var on=0;ge<ne;)le=Ae[ge++],ye[lt++]=le>>>0&255,se&&(ye[lt++]=le>>>16&255,le=Ae[ge++],ye[lt++]=le>>>0&255),ue[on++]=le>>>16&255;Y=8}q!==t.image_compression.NONE&&e()?(O=n(ye,te.width*te.colors,te.colors,q),Ie=n(ue,te.width,1,q)):(O=ye,Ie=ue,Ot=void 0)}if(te.colorType===3&&(Z=this.color_spaces.INDEXED,Se=te.palette,te.transparency.indexed)){var Ut=te.transparency.indexed,In=0;for(ge=0,ne=Ut.length;ge<ne;++ge)In+=Ut[ge];if((In/=255)===ne-1&&Ut.indexOf(0)!==-1)be=[Ut.indexOf(0)];else if(In!==ne){for(Ae=te.decodePixels(),ue=new Uint8Array(Ae.length),ge=0,ne=Ae.length;ge<ne;ge++)ue[ge]=Ut[Ae[ge]];Ie=n(ue,te.width,1)}}var Ee=function($e){var We;switch($e){case t.image_compression.FAST:We=11;break;case t.image_compression.MEDIUM:We=13;break;case t.image_compression.SLOW:We=14;break;default:We=12}return We}(q);return Ot===this.decode.FLATE_DECODE&&(gt="/Predictor "+Ee+" "),gt+="/Colors "+Pe+" /BitsPerComponent "+Y+" /Columns "+te.width,(this.__addimage__.isArrayBuffer(O)||this.__addimage__.isArrayBufferView(O))&&(O=this.__addimage__.arrayBufferToBinaryString(O)),(Ie&&this.__addimage__.isArrayBuffer(Ie)||this.__addimage__.isArrayBufferView(Ie))&&(Ie=this.__addimage__.arrayBufferToBinaryString(Ie)),{alias:G,data:O,index:M,filter:Ot,decodeParameters:gt,transparency:be,palette:Se,sMask:Ie,predictor:Ee,width:te.width,height:te.height,bitsPerComponent:Y,colorSpace:Z}}}})(gi.API),function(t){t.processGIF89A=function(e,n,r,o){var l=new Ewe(e),h=l.width,p=l.height,i=[];l.decodeAndBlitFrameRGBA(0,i);var b={data:i,width:h,height:p},E=new K2(100).encode(b,100);return t.processJPEG.call(this,E,n,r,o)},t.processGIF87A=t.processGIF89A}(gi.API),sd.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:o,green:r,blue:n,quad:l}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},sd.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){bs.log("bit decode error:"+n)}},sd.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,o=0;o<e;o++)for(var l=this.datav.getUint8(this.pos++,!0),h=r*this.width*4+8*o*4,p=0;p<8&&8*o+p<this.width;p++){var i=this.palette[l>>7-p&1];this.data[h+4*p]=i.blue,this.data[h+4*p+1]=i.green,this.data[h+4*p+2]=i.red,this.data[h+4*p+3]=255}n!==0&&(this.pos+=4-n)}},sd.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,o=0;o<t;o++){var l=this.datav.getUint8(this.pos++,!0),h=r*this.width*4+2*o*4,p=l>>4,i=15&l,b=this.palette[p];if(this.data[h]=b.blue,this.data[h+1]=b.green,this.data[h+2]=b.red,this.data[h+3]=255,2*o+1>=this.width)break;b=this.palette[i],this.data[h+4]=b.blue,this.data[h+4+1]=b.green,this.data[h+4+2]=b.red,this.data[h+4+3]=255}e!==0&&(this.pos+=4-e)}},sd.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var o=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+4*r;if(o<this.palette.length){var h=this.palette[o];this.data[l]=h.red,this.data[l+1]=h.green,this.data[l+2]=h.blue,this.data[l+3]=255}else this.data[l]=255,this.data[l+1]=255,this.data[l+2]=255,this.data[l+3]=255}t!==0&&(this.pos+=4-t)}},sd.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var h=(l&e)/e*255|0,p=(l>>5&e)/e*255|0,i=(l>>10&e)/e*255|0,b=l>>15?255:0,E=r*this.width*4+4*o;this.data[E]=i,this.data[E+1]=p,this.data[E+2]=h,this.data[E+3]=b}this.pos+=t}},sd.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var o=this.bottom_up?r:this.height-1-r,l=0;l<this.width;l++){var h=this.datav.getUint16(this.pos,!0);this.pos+=2;var p=(h&e)/e*255|0,i=(h>>5&n)/n*255|0,b=(h>>11)/e*255|0,E=o*this.width*4+4*l;this.data[E]=b,this.data[E+1]=i,this.data[E+2]=p,this.data[E+3]=255}this.pos+=t}},sd.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),h=e*this.width*4+4*n;this.data[h]=l,this.data[h+1]=o,this.data[h+2]=r,this.data[h+3]=255}this.pos+=this.width%4}},sd.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),h=this.datav.getUint8(this.pos++,!0),p=e*this.width*4+4*n;this.data[p]=l,this.data[p+1]=o,this.data[p+2]=r,this.data[p+3]=h}},sd.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,o){var l=new sd(e,!1),h=l.width,p=l.height,i={data:l.getData(),width:h,height:p},b=new K2(100).encode(i,100);return t.processJPEG.call(this,b,n,r,o)}}(gi.API),T3.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,o){var l=new T3(e),h=l.width,p=l.height,i={data:l.getData(),width:h,height:p},b=new K2(100).encode(i,100);return t.processJPEG.call(this,b,n,r,o)}}(gi.API),gi.API.processRGBA=function(t,e,n){for(var r=t.data,o=r.length,l=new Uint8Array(o/4*3),h=new Uint8Array(o/4),p=0,i=0,b=0;b<o;b+=4){var E=r[b],I=r[b+1],O=r[b+2],M=r[b+3];l[p++]=E,l[p++]=I,l[p++]=O,h[i++]=M}var G=this.__addimage__.arrayBufferToBinaryString(l);return{alpha:this.__addimage__.arrayBufferToBinaryString(h),data:G,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},gi.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},by=gi.API,Zw=by.getCharWidthsArray=function(t,e){var n,r,o=(e=e||{}).font||this.internal.getFont(),l=e.fontSize||this.internal.getFontSize(),h=e.charSpace||this.internal.getCharSpace(),p=e.widths?e.widths:o.metadata.Unicode.widths,i=p.fof?p.fof:1,b=e.kerning?e.kerning:o.metadata.Unicode.kerning,E=b.fof?b.fof:1,I=e.doKerning!==!1,O=0,M=t.length,G=0,q=p[0]||i,Z=[];for(n=0;n<M;n++)r=t.charCodeAt(n),typeof o.metadata.widthOfString=="function"?Z.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(r))+h*(1e3/l)||0)/1e3):(O=I&&ss(b[r])==="object"&&!isNaN(parseInt(b[r][G],10))?b[r][G]/E:0,Z.push((p[r]||q)/i+O)),G=r;return Z},C3=by.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),o=e.charSpace||this.internal.getCharSpace();return by.processArabic&&(t=by.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,o)/n:Zw.apply(this,arguments).reduce(function(l,h){return l+h},0)},E3=function(t,e,n,r){for(var o=[],l=0,h=t.length,p=0;l!==h&&p+e[l]<n;)p+=e[l],l++;o.push(t.slice(0,l));var i=l;for(p=0;l!==h;)p+e[l]>r&&(o.push(t.slice(i,l)),p=0,i=l),p+=e[l],l++;return i!==l&&o.push(t.slice(i,l)),o},B3=function(t,e,n){n||(n={});var r,o,l,h,p,i,b,E=[],I=[E],O=n.textIndent||0,M=0,G=0,q=t.split(" "),Z=Zw.apply(this,[" ",n])[0];if(i=n.lineIndent===-1?q[0].length+2:n.lineIndent||0){var Y=Array(i).join(" "),te=[];q.map(function(Pe){(Pe=Pe.split(/\s*\n/)).length>1?te=te.concat(Pe.map(function(Se,Ie){return(Ie&&Se.length?`
`:"")+Se})):te.push(Pe[0])}),q=te,i=C3.apply(this,[Y,n])}for(l=0,h=q.length;l<h;l++){var be=0;if(r=q[l],i&&r[0]==`
`&&(r=r.substr(1),be=1),O+M+(G=(o=Zw.apply(this,[r,n])).reduce(function(Pe,Se){return Pe+Se},0))>e||be){if(G>e){for(p=E3.apply(this,[r,o,e-(O+M),e]),E.push(p.shift()),E=[p.pop()];p.length;)I.push([p.shift()]);G=o.slice(r.length-(E[0]?E[0].length:0)).reduce(function(Pe,Se){return Pe+Se},0)}else E=[r];I.push(E),O=G+i,M=Z}else E.push(r),O+=M+G,M=Z}return b=i?function(Pe,Se){return(Se?Y:"")+Pe.join(" ")}:function(Pe){return Pe.join(" ")},I.map(b)},by.splitTextToSize=function(t,e,n){var r,o=(n=n||{}).fontSize||this.internal.getFontSize(),l=(function(E){if(E.widths&&E.kerning)return{widths:E.widths,kerning:E.kerning};var I=this.internal.getFont(E.fontName,E.fontStyle);return I.metadata.Unicode?{widths:I.metadata.Unicode.widths||{0:1},kerning:I.metadata.Unicode.kerning||{}}:{font:I.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var h=1*this.internal.scaleFactor*e/o;l.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/o:0,l.lineIndent=n.lineIndent;var p,i,b=[];for(p=0,i=r.length;p<i;p++)b=b.concat(B3.apply(this,[r[p],h,l]));return b},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},o=0;o<e.length;o++)n[e[o]]="0123456789abcdef"[o],r["0123456789abcdef"[o]]=e[o];var l=function(I){return"0x"+parseInt(I,10).toString(16)},h=t.__fontmetrics__.compress=function(I){var O,M,G,q,Z=["{"];for(var Y in I){if(O=I[Y],isNaN(parseInt(Y,10))?M="'"+Y+"'":(Y=parseInt(Y,10),M=(M=l(Y).slice(2)).slice(0,-1)+r[M.slice(-1)]),typeof O=="number")O<0?(G=l(O).slice(3),q="-"):(G=l(O).slice(2),q=""),G=q+G.slice(0,-1)+r[G.slice(-1)];else{if(ss(O)!=="object")throw new Error("Don't know what to do with value type "+ss(O)+".");G=h(O)}Z.push(M+G)}return Z.push("}"),Z.join("")},p=t.__fontmetrics__.uncompress=function(I){if(typeof I!="string")throw new Error("Invalid argument passed to uncompress.");for(var O,M,G,q,Z={},Y=1,te=Z,be=[],Pe="",Se="",Ie=I.length-1,Ae=1;Ae<Ie;Ae+=1)(q=I[Ae])=="'"?O?(G=O.join(""),O=void 0):O=[]:O?O.push(q):q=="{"?(be.push([te,G]),te={},G=void 0):q=="}"?((M=be.pop())[0][M[1]]=te,G=void 0,te=M[0]):q=="-"?Y=-1:G===void 0?n.hasOwnProperty(q)?(Pe+=n[q],G=parseInt(Pe,16)*Y,Y=1,Pe=""):Pe+=q:n.hasOwnProperty(q)?(Se+=n[q],te[G]=parseInt(Se,16)*Y,Y=1,G=void 0,Se=""):Se+=q;return Z},i={codePages:["WinAnsiEncoding"],WinAnsiEncoding:p("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},b={Unicode:{Courier:i,"Courier-Bold":i,"Courier-BoldOblique":i,"Courier-Oblique":i,Helvetica:i,"Helvetica-Bold":i,"Helvetica-BoldOblique":i,"Helvetica-Oblique":i,"Times-Roman":i,"Times-Bold":i,"Times-BoldItalic":i,"Times-Italic":i}},E={Unicode:{"Courier-Oblique":p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":p("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":p("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":p("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:p("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:p("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":p("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:p("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":p("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":p("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":p("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(I){var O=I.font,M=E.Unicode[O.postScriptName];M&&(O.metadata.Unicode={},O.metadata.Unicode.widths=M.widths,O.metadata.Unicode.kerning=M.kerning);var G=b.Unicode[O.postScriptName];G&&(O.metadata.Unicode.encoding=G,O.encoding=G.codePages[0])}])}(gi.API),function(t){var e=function(n){for(var r=n.length,o=new Uint8Array(r),l=0;l<r;l++)o[l]=n.charCodeAt(l);return o};t.API.events.push(["addFont",function(n){var r=void 0,o=n.font,l=n.instance;if(!o.isStandardFont){if(l===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(r=l.existsFileInVFS(o.postScriptName)===!1?l.loadFile(o.postScriptName):l.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(h,p){p=/^\x00\x01\x00\x00/.test(p)?e(p):e(Kv(p)),h.metadata=t.API.TTFFont.open(p),h.metadata.Unicode=h.metadata.Unicode||{encoding:{},kerning:{},widths:[]},h.metadata.glyIdsUsed=[0]})(o,r)}}])}(gi),function(t){function e(){return(yi.canvg?Promise.resolve(yi.canvg):jI(()=>import("./index.es-CNivZnQV.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}gi.API.addSvgAsImage=function(n,r,o,l,h,p,i,b){if(isNaN(r)||isNaN(o))throw bs.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(l)||isNaN(h))throw bs.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var E=document.createElement("canvas");E.width=l,E.height=h;var I=E.getContext("2d");I.fillStyle="#fff",I.fillRect(0,0,E.width,E.height);var O={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},M=this;return e().then(function(G){return G.fromString(I,n,O)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(G){return G.render(O)}).then(function(){M.addImage(E.toDataURL("image/jpeg",1),r,o,l,h,i,b)})}}(),gi.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var o=0;o<this.internal.pages[r].length;o++)this.internal.pages[r][o]=this.internal.pages[r][o].replace(e,n);return this},gi.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,o,l,h={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},p=Object.keys(h),i=[],b=0,E=0,I=0;function O(G,q){var Z,Y=!1;for(Z=0;Z<G.length;Z+=1)G[Z]===q&&(Y=!0);return Y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(h)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var M=p.length;for(I=0;I<M;I+=1)n[p[I]].value=n[p[I]].defaultValue,n[p[I]].explicitSet=!1}if(ss(t)==="object"){for(o in t)if(l=t[o],O(p,o)&&l!==void 0){if(n[o].type==="boolean"&&typeof l=="boolean")n[o].value=l;else if(n[o].type==="name"&&O(n[o].valueSet,l))n[o].value=l;else if(n[o].type==="integer"&&Number.isInteger(l))n[o].value=l;else if(n[o].type==="array"){for(b=0;b<l.length;b+=1)if(r=!0,l[b].length===1&&typeof l[b][0]=="number")i.push(String(l[b]-1));else if(l[b].length>1){for(E=0;E<l[b].length;E+=1)typeof l[b][E]!="number"&&(r=!1);r===!0&&i.push([l[b][0]-1,l[b][1]-1].join(" "))}n[o].value="["+i.join(" ")+"]"}else n[o].value=n[o].defaultValue;n[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var G,q=[];for(G in n)n[G].explicitSet===!0&&(n[G].type==="name"?q.push("/"+G+" /"+n[G].value):q.push("/"+G+" "+n[G].value));q.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+q.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),l=unescape(encodeURIComponent(r)),h=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),p=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),i=unescape(encodeURIComponent("</x:xmpmeta>")),b=l.length+h.length+p.length+o.length+i.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+b+" >>"),this.internal.write("stream"),this.internal.write(o+l+h+p+i),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(gi.API),function(t){var e=t.API,n=e.pdfEscape16=function(l,h){for(var p,i=h.metadata.Unicode.widths,b=["","0","00","000","0000"],E=[""],I=0,O=l.length;I<O;++I){if(p=h.metadata.characterToGlyph(l.charCodeAt(I)),h.metadata.glyIdsUsed.push(p),h.metadata.toUnicode[p]=l.charCodeAt(I),i.indexOf(p)==-1&&(i.push(p),i.push([parseInt(h.metadata.widthOfGlyph(p),10)])),p=="0")return E.join("");p=p.toString(16),E.push(b[4-p.length],p)}return E.join("")},r=function(l){var h,p,i,b,E,I,O;for(E=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,i=[],I=0,O=(p=Object.keys(l).sort(function(M,G){return M-G})).length;I<O;I++)h=p[I],i.length>=100&&(E+=`
`+i.length+` beginbfchar
`+i.join(`
`)+`
endbfchar`,i=[]),l[h]!==void 0&&l[h]!==null&&typeof l[h].toString=="function"&&(b=("0000"+l[h].toString(16)).slice(-4),h=("0000"+(+h).toString(16)).slice(-4),i.push("<"+h+"><"+b+">"));return i.length&&(E+=`
`+i.length+` beginbfchar
`+i.join(`
`)+`
endbfchar
`),E+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(l){(function(h){var p=h.font,i=h.out,b=h.newObject,E=h.putStream;if(p.metadata instanceof t.API.TTFFont&&p.encoding==="Identity-H"){for(var I=p.metadata.Unicode.widths,O=p.metadata.subset.encode(p.metadata.glyIdsUsed,1),M="",G=0;G<O.length;G++)M+=String.fromCharCode(O[G]);var q=b();E({data:M,addLength1:!0,objectId:q}),i("endobj");var Z=b();E({data:r(p.metadata.toUnicode),addLength1:!0,objectId:Z}),i("endobj");var Y=b();i("<<"),i("/Type /FontDescriptor"),i("/FontName /"+Ny(p.fontName)),i("/FontFile2 "+q+" 0 R"),i("/FontBBox "+t.API.PDFObject.convert(p.metadata.bbox)),i("/Flags "+p.metadata.flags),i("/StemV "+p.metadata.stemV),i("/ItalicAngle "+p.metadata.italicAngle),i("/Ascent "+p.metadata.ascender),i("/Descent "+p.metadata.decender),i("/CapHeight "+p.metadata.capHeight),i(">>"),i("endobj");var te=b();i("<<"),i("/Type /Font"),i("/BaseFont /"+Ny(p.fontName)),i("/FontDescriptor "+Y+" 0 R"),i("/W "+t.API.PDFObject.convert(I)),i("/CIDToGIDMap /Identity"),i("/DW 1000"),i("/Subtype /CIDFontType2"),i("/CIDSystemInfo"),i("<<"),i("/Supplement 0"),i("/Registry (Adobe)"),i("/Ordering ("+p.encoding+")"),i(">>"),i(">>"),i("endobj"),p.objectNumber=b(),i("<<"),i("/Type /Font"),i("/Subtype /Type0"),i("/ToUnicode "+Z+" 0 R"),i("/BaseFont /"+Ny(p.fontName)),i("/Encoding /"+p.encoding),i("/DescendantFonts ["+te+" 0 R]"),i(">>"),i("endobj"),p.isAlreadyPutted=!0}})(l)}]),e.events.push(["putFont",function(l){(function(h){var p=h.font,i=h.out,b=h.newObject,E=h.putStream;if(p.metadata instanceof t.API.TTFFont&&p.encoding==="WinAnsiEncoding"){for(var I=p.metadata.rawData,O="",M=0;M<I.length;M++)O+=String.fromCharCode(I[M]);var G=b();E({data:O,addLength1:!0,objectId:G}),i("endobj");var q=b();E({data:r(p.metadata.toUnicode),addLength1:!0,objectId:q}),i("endobj");var Z=b();i("<<"),i("/Descent "+p.metadata.decender),i("/CapHeight "+p.metadata.capHeight),i("/StemV "+p.metadata.stemV),i("/Type /FontDescriptor"),i("/FontFile2 "+G+" 0 R"),i("/Flags 96"),i("/FontBBox "+t.API.PDFObject.convert(p.metadata.bbox)),i("/FontName /"+Ny(p.fontName)),i("/ItalicAngle "+p.metadata.italicAngle),i("/Ascent "+p.metadata.ascender),i(">>"),i("endobj"),p.objectNumber=b();for(var Y=0;Y<p.metadata.hmtx.widths.length;Y++)p.metadata.hmtx.widths[Y]=parseInt(p.metadata.hmtx.widths[Y]*(1e3/p.metadata.head.unitsPerEm));i("<</Subtype/TrueType/Type/Font/ToUnicode "+q+" 0 R/BaseFont/"+Ny(p.fontName)+"/FontDescriptor "+Z+" 0 R/Encoding/"+p.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(p.metadata.hmtx.widths)+">>"),i("endobj"),p.isAlreadyPutted=!0}})(l)}]);var o=function(l){var h,p=l.text||"",i=l.x,b=l.y,E=l.options||{},I=l.mutex||{},O=I.pdfEscape,M=I.activeFontKey,G=I.fonts,q=M,Z="",Y=0,te="",be=G[q].encoding;if(G[q].encoding!=="Identity-H")return{text:p,x:i,y:b,options:E,mutex:I};for(te=p,q=M,Array.isArray(p)&&(te=p[0]),Y=0;Y<te.length;Y+=1)G[q].metadata.hasOwnProperty("cmap")&&(h=G[q].metadata.cmap.unicode.codeMap[te[Y].charCodeAt(0)]),h||te[Y].charCodeAt(0)<256&&G[q].metadata.hasOwnProperty("Unicode")?Z+=te[Y]:Z+="";var Pe="";return parseInt(q.slice(1))<14||be==="WinAnsiEncoding"?Pe=O(Z,q).split("").map(function(Se){return Se.charCodeAt(0).toString(16)}).join(""):be==="Identity-H"&&(Pe=n(Z,G[q])),I.isHex=!0,{text:Pe,x:i,y:b,options:E,mutex:I}};e.events.push(["postProcessText",function(l){var h=l.text||"",p=[],i={text:h,x:l.x,y:l.y,options:l.options,mutex:l.mutex};if(Array.isArray(h)){var b=0;for(b=0;b<h.length;b+=1)Array.isArray(h[b])&&h[b].length===3?p.push([o(Object.assign({},i,{text:h[b][0]})).text,h[b][1],h[b][2]]):p.push(o(Object.assign({},i,{text:h[b]})).text);l.text=p}else l.text=o(Object.assign({},i,{text:h})).text}])}(gi),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(gi.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var o,l,h,p,i,b,E,I=e,O=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],M=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],G={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},q={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},Z=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],Y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),te=!1,be=0;this.__bidiEngine__={};var Pe=function(se){var le=se.charCodeAt(),ge=le>>8,lt=q[ge];return lt!==void 0?I[256*lt+(255&le)]:ge===252||ge===253?"AL":Y.test(ge)?"L":ge===8?"R":"N"},Se=function(se){for(var le,ge=0;ge<se.length;ge++){if((le=Pe(se.charAt(ge)))==="L")return!1;if(le==="R")return!0}return!1},Ie=function(se,le,ge,lt){var Ot,gt,Tt,Mt,on=le[lt];switch(on){case"L":case"R":te=!1;break;case"N":case"AN":break;case"EN":te&&(on="AN");break;case"AL":te=!0,on="R";break;case"WS":on="N";break;case"CS":lt<1||lt+1>=le.length||(Ot=ge[lt-1])!=="EN"&&Ot!=="AN"||(gt=le[lt+1])!=="EN"&&gt!=="AN"?on="N":te&&(gt="AN"),on=gt===Ot?gt:"N";break;case"ES":on=(Ot=lt>0?ge[lt-1]:"B")==="EN"&&lt+1<le.length&&le[lt+1]==="EN"?"EN":"N";break;case"ET":if(lt>0&&ge[lt-1]==="EN"){on="EN";break}if(te){on="N";break}for(Tt=lt+1,Mt=le.length;Tt<Mt&&le[Tt]==="ET";)Tt++;on=Tt<Mt&&le[Tt]==="EN"?"EN":"N";break;case"NSM":if(h&&!p){for(Mt=le.length,Tt=lt+1;Tt<Mt&&le[Tt]==="NSM";)Tt++;if(Tt<Mt){var Ut=se[lt],In=Ut>=1425&&Ut<=2303||Ut===64286;if(Ot=le[Tt],In&&(Ot==="R"||Ot==="AL")){on="R";break}}}on=lt<1||(Ot=le[lt-1])==="B"?"N":ge[lt-1];break;case"B":te=!1,o=!0,on=be;break;case"S":l=!0,on="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":te=!1;break;case"BN":on="N"}return on},Ae=function(se,le,ge){var lt=se.split("");return ge&&ne(lt,ge,{hiLevel:be}),lt.reverse(),le&&le.reverse(),lt.join("")},ne=function(se,le,ge){var lt,Ot,gt,Tt,Mt,on=-1,Ut=se.length,In=0,Ee=[],$e=be?M:O,We=[];for(te=!1,o=!1,l=!1,Ot=0;Ot<Ut;Ot++)We[Ot]=Pe(se[Ot]);for(gt=0;gt<Ut;gt++){if(Mt=In,Ee[gt]=Ie(se,We,Ee,gt),lt=240&(In=$e[Mt][G[Ee[gt]]]),In&=15,le[gt]=Tt=$e[In][5],lt>0)if(lt===16){for(Ot=on;Ot<gt;Ot++)le[Ot]=1;on=-1}else on=-1;if($e[In][6])on===-1&&(on=gt);else if(on>-1){for(Ot=on;Ot<gt;Ot++)le[Ot]=Tt;on=-1}We[gt]==="B"&&(le[gt]=0),ge.hiLevel|=Tt}l&&function(vt,_t,at){for(var Ft=0;Ft<at;Ft++)if(vt[Ft]==="S"){_t[Ft]=be;for(var Dt=Ft-1;Dt>=0&&vt[Dt]==="WS";Dt--)_t[Dt]=be}}(We,le,Ut)},ue=function(se,le,ge,lt,Ot){if(!(Ot.hiLevel<se)){if(se===1&&be===1&&!o)return le.reverse(),void(ge&&ge.reverse());for(var gt,Tt,Mt,on,Ut=le.length,In=0;In<Ut;){if(lt[In]>=se){for(Mt=In+1;Mt<Ut&&lt[Mt]>=se;)Mt++;for(on=In,Tt=Mt-1;on<Tt;on++,Tt--)gt=le[on],le[on]=le[Tt],le[Tt]=gt,ge&&(gt=ge[on],ge[on]=ge[Tt],ge[Tt]=gt);In=Mt}In++}}},ye=function(se,le,ge){var lt=se.split(""),Ot={hiLevel:be};return ge||(ge=[]),ne(lt,ge,Ot),function(gt,Tt,Mt){if(Mt.hiLevel!==0&&E)for(var on,Ut=0;Ut<gt.length;Ut++)Tt[Ut]===1&&(on=Z.indexOf(gt[Ut]))>=0&&(gt[Ut]=Z[on+1])}(lt,ge,Ot),ue(2,lt,le,ge,Ot),ue(1,lt,le,ge,Ot),lt.join("")};return this.__bidiEngine__.doBidiReorder=function(se,le,ge){if(function(Ot,gt){if(gt)for(var Tt=0;Tt<Ot.length;Tt++)gt[Tt]=Tt;p===void 0&&(p=Se(Ot)),b===void 0&&(b=Se(Ot))}(se,le),h||!i||b)if(h&&i&&p^b)be=p?1:0,se=Ae(se,le,ge);else if(!h&&i&&b)be=p?1:0,se=ye(se,le,ge),se=Ae(se,le);else if(!h||p||i||b){if(h&&!i&&p^b)se=Ae(se,le),p?(be=0,se=ye(se,le,ge)):(be=1,se=ye(se,le,ge),se=Ae(se,le));else if(h&&p&&!i&&b)be=1,se=ye(se,le,ge),se=Ae(se,le);else if(!h&&!i&&p^b){var lt=E;p?(be=1,se=ye(se,le,ge),be=0,E=!1,se=ye(se,le,ge),E=lt):(be=0,se=ye(se,le,ge),se=Ae(se,le),be=1,E=!1,se=ye(se,le,ge),E=lt,se=Ae(se,le))}}else be=0,se=ye(se,le,ge);else be=p?1:0,se=ye(se,le,ge);return se},this.__bidiEngine__.setOptions=function(se){se&&(h=se.isInputVisual,i=se.isOutputVisual,p=se.isInputRtl,b=se.isOutputRtl,E=se.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var o=r.text,l=(r.x,r.y,r.options||{}),h=(r.mutex,l.lang,[]);if(l.isInputVisual=typeof l.isInputVisual!="boolean"||l.isInputVisual,n.setOptions(l),Object.prototype.toString.call(o)==="[object Array]"){var p=0;for(h=[],p=0;p<o.length;p+=1)Object.prototype.toString.call(o[p])==="[object Array]"?h.push([n.doBidiReorder(o[p][0]),o[p][1],o[p][2]]):h.push([n.doBidiReorder(o[p])]);r.text=h}else r.text=n.doBidiReorder(o);n.setOptions({isInputVisual:!0})}])}(gi),gi.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new om(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new zwe(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new Bwe(this.contents),this.head=new Twe(this),this.name=new Rwe(this),this.cmap=new _H(this),this.toUnicode={},this.hhea=new Iwe(this),this.maxp=new kwe(this),this.hmtx=new Mwe(this),this.post=new Lwe(this),this.os2=new Pwe(this),this.loca=new Nwe(this),this.glyf=new Owe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,o,l;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var h,p,i,b;for(b=[],h=0,p=(i=this.bbox).length;h<p;h++)e=i[h],b.push(Math.round(e*this.scaleFactor));return b}).call(this),this.stemV=0,this.post.exists?(r=255&(o=this.post.italic_angle),32768&(n=o>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(l=this.familyClass)===1||l===2||l===3||l===4||l===5||l===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var o,l,h,p;for(h=0,l=0,p=(e=""+e).length;0<=p?l<p:l>p;l=0<=p?++l:--l)o=e.charCodeAt(l),h+=this.widthOfGlyph(this.characterToGlyph(o))+r*(1e3/n)||0;return h*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var vd,om=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,o;for(o=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)o.push(this.writeByte(e.charCodeAt(n)));return o},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,o,l,h,p,i;return e=this.readByte(),n=this.readByte(),r=this.readByte(),o=this.readByte(),l=this.readByte(),h=this.readByte(),p=this.readByte(),i=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^o)+16777216*(255^l)+65536*(255^h)+256*(255^p)+(255^i)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*o+16777216*l+65536*h+256*p+i},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,o,l;for(l=[],r=0,o=e.length;r<o;r++)n=e[r],l.push(this.writeByte(n));return l},t}(),Bwe=function(){var t;function e(n){var r,o,l;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},o=0,l=this.tableCount;0<=l?o<l:o>l;o=0<=l?++o:--o)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,o,l,h,p,i,b,E,I,O,M,G,q;for(q in M=Object.keys(n).length,i=Math.log(2),I=16*Math.floor(Math.log(M)/i),h=Math.floor(I/i),E=16*M-I,(o=new om).writeInt(this.scalarType),o.writeShort(M),o.writeShort(I),o.writeShort(h),o.writeShort(E),l=16*M,b=o.pos+l,p=null,G=[],n)for(O=n[q],o.writeString(q),o.writeInt(t(O)),o.writeInt(b),o.writeInt(O.length),G=G.concat(O),q==="head"&&(p=b),b+=O.length;b%4;)G.push(0),b++;return o.write(G),r=2981146554-t(o.data),o.pos=p+8,o.writeUInt32(r),o.data},t=function(n){var r,o,l,h;for(n=vH.call(n);n.length%4;)n.push(0);for(l=new om(n),o=0,r=0,h=n.length;r<h;r=r+=4)o+=l.readUInt32();return 4294967295&o},e}(),Swe={}.hasOwnProperty,vf=function(t,e){for(var n in e)Swe.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};vd=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var Twe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vf(e,vd),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new om).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),I3=function(){function t(e,n){var r,o,l,h,p,i,b,E,I,O,M,G,q,Z,Y,te,be;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),I=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(i=0;i<256;++i)this.codeMap[i]=e.readByte();break;case 4:for(M=e.readUInt16(),O=M/2,e.pos+=6,l=function(){var Pe,Se;for(Se=[],i=Pe=0;0<=O?Pe<O:Pe>O;i=0<=O?++Pe:--Pe)Se.push(e.readUInt16());return Se}(),e.pos+=2,q=function(){var Pe,Se;for(Se=[],i=Pe=0;0<=O?Pe<O:Pe>O;i=0<=O?++Pe:--Pe)Se.push(e.readUInt16());return Se}(),b=function(){var Pe,Se;for(Se=[],i=Pe=0;0<=O?Pe<O:Pe>O;i=0<=O?++Pe:--Pe)Se.push(e.readUInt16());return Se}(),E=function(){var Pe,Se;for(Se=[],i=Pe=0;0<=O?Pe<O:Pe>O;i=0<=O?++Pe:--Pe)Se.push(e.readUInt16());return Se}(),o=(this.length-e.pos+this.offset)/2,p=function(){var Pe,Se;for(Se=[],i=Pe=0;0<=o?Pe<o:Pe>o;i=0<=o?++Pe:--Pe)Se.push(e.readUInt16());return Se}(),i=Y=0,be=l.length;Y<be;i=++Y)for(Z=l[i],r=te=G=q[i];G<=Z?te<=Z:te>=Z;r=G<=Z?++te:--te)E[i]===0?h=r+b[i]:(h=p[E[i]/2+(r-G)-(O-i)]||0)!==0&&(h+=b[i]),this.codeMap[r]=65535&h}e.pos=I}return t.encode=function(e,n){var r,o,l,h,p,i,b,E,I,O,M,G,q,Z,Y,te,be,Pe,Se,Ie,Ae,ne,ue,ye,se,le,ge,lt,Ot,gt,Tt,Mt,on,Ut,In,Ee,$e,We,vt,_t,at,Ft,Dt,yn,De,jn;switch(lt=new om,h=Object.keys(e).sort(function(Te,Je){return Te-Je}),n){case"macroman":for(q=0,Z=function(){var Te=[];for(G=0;G<256;++G)Te.push(0);return Te}(),te={0:0},l={},Ot=0,on=h.length;Ot<on;Ot++)te[Dt=e[o=h[Ot]]]==null&&(te[Dt]=++q),l[o]={old:e[o],new:te[e[o]]},Z[o]=te[e[o]];return lt.writeUInt16(1),lt.writeUInt16(0),lt.writeUInt32(12),lt.writeUInt16(0),lt.writeUInt16(262),lt.writeUInt16(0),lt.write(Z),{charMap:l,subtable:lt.data,maxGlyphID:q+1};case"unicode":for(le=[],I=[],be=0,te={},r={},Y=b=null,gt=0,Ut=h.length;gt<Ut;gt++)te[Se=e[o=h[gt]]]==null&&(te[Se]=++be),r[o]={old:Se,new:te[Se]},p=te[Se]-o,Y!=null&&p===b||(Y&&I.push(Y),le.push(o),b=p),Y=o;for(Y&&I.push(Y),I.push(65535),le.push(65535),ye=2*(ue=le.length),ne=2*Math.pow(Math.log(ue)/Math.LN2,2),O=Math.log(ne/2)/Math.LN2,Ae=2*ue-ne,i=[],Ie=[],M=[],G=Tt=0,In=le.length;Tt<In;G=++Tt){if(se=le[G],E=I[G],se===65535){i.push(0),Ie.push(0);break}if(se-(ge=r[se].new)>=32768)for(i.push(0),Ie.push(2*(M.length+ue-G)),o=Mt=se;se<=E?Mt<=E:Mt>=E;o=se<=E?++Mt:--Mt)M.push(r[o].new);else i.push(ge-se),Ie.push(0)}for(lt.writeUInt16(3),lt.writeUInt16(1),lt.writeUInt32(12),lt.writeUInt16(4),lt.writeUInt16(16+8*ue+2*M.length),lt.writeUInt16(0),lt.writeUInt16(ye),lt.writeUInt16(ne),lt.writeUInt16(O),lt.writeUInt16(Ae),at=0,Ee=I.length;at<Ee;at++)o=I[at],lt.writeUInt16(o);for(lt.writeUInt16(0),Ft=0,$e=le.length;Ft<$e;Ft++)o=le[Ft],lt.writeUInt16(o);for(yn=0,We=i.length;yn<We;yn++)p=i[yn],lt.writeUInt16(p);for(De=0,vt=Ie.length;De<vt;De++)Pe=Ie[De],lt.writeUInt16(Pe);for(jn=0,_t=M.length;jn<_t;jn++)q=M[jn],lt.writeUInt16(q);return{charMap:r,subtable:lt.data,maxGlyphID:be+1}}},t}(),_H=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vf(e,vd),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,o,l;for(n.pos=this.offset,this.version=n.readUInt16(),l=n.readUInt16(),this.tables=[],this.unicode=null,o=0;0<=l?o<l:o>l;o=0<=l?++o:--o)r=new I3(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var o,l;return r==null&&(r="macroman"),o=I3.encode(n,r),(l=new om).writeUInt16(0),l.writeUInt16(1),o.table=l.data.concat(o.subtable),o},e}(),Iwe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vf(e,vd),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),Pwe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vf(e,vd),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,o;for(o=[],r=0;r<10;++r)o.push(n.readByte());return o}(),this.charRange=function(){var r,o;for(o=[],r=0;r<4;++r)o.push(n.readInt());return o}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,o;for(o=[],r=0;r<2;r=++r)o.push(n.readInt());return o}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),Lwe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vf(e,vd),e.prototype.tag="post",e.prototype.parse=function(n){var r,o,l;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var h;for(o=n.readUInt16(),this.glyphNameIndex=[],h=0;0<=o?h<o:h>o;h=0<=o?++h:--h)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],l=[];n.pos<this.offset+this.length;)r=n.readByte(),l.push(this.names.push(n.readString(r)));return l;case 151552:return o=n.readUInt16(),this.offsets=n.read(o);case 196608:break;case 262144:return this.map=(function(){var p,i,b;for(b=[],h=p=0,i=this.file.maxp.numGlyphs;0<=i?p<i:p>i;h=0<=i?++p:--p)b.push(n.readUInt32());return b}).call(this)}},e}(),Fwe=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Rwe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vf(e,vd),e.prototype.tag="name",e.prototype.parse=function(n){var r,o,l,h,p,i,b,E,I,O,M;for(n.pos=this.offset,n.readShort(),r=n.readShort(),i=n.readShort(),o=[],h=0;0<=r?h<r:h>r;h=0<=r?++h:--h)o.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+i+n.readShort()});for(b={},h=I=0,O=o.length;I<O;h=++I)l=o[h],n.pos=l.offset,E=n.readString(l.length),p=new Fwe(E,l),b[M=l.nameID]==null&&(b[M]=[]),b[l.nameID].push(p);this.strings=b,this.copyright=b[0],this.fontFamily=b[1],this.fontSubfamily=b[2],this.uniqueSubfamily=b[3],this.fontName=b[4],this.version=b[5];try{this.postscriptName=b[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=b[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=b[7],this.manufacturer=b[8],this.designer=b[9],this.description=b[10],this.vendorUrl=b[11],this.designerUrl=b[12],this.license=b[13],this.licenseUrl=b[14],this.preferredFamily=b[15],this.preferredSubfamily=b[17],this.compatibleFull=b[18],this.sampleText=b[19]},e}(),kwe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vf(e,vd),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),Mwe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vf(e,vd),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,o,l,h,p,i,b;for(n.pos=this.offset,this.metrics=[],r=0,i=this.file.hhea.numberOfMetrics;0<=i?r<i:r>i;r=0<=i?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(l=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var E,I;for(I=[],r=E=0;0<=l?E<l:E>l;r=0<=l?++E:--E)I.push(n.readInt16());return I}(),this.widths=(function(){var E,I,O,M;for(M=[],E=0,I=(O=this.metrics).length;E<I;E++)h=O[E],M.push(h.advance);return M}).call(this),o=this.widths[this.widths.length-1],b=[],r=p=0;0<=l?p<l:p>l;r=0<=l?++p:--p)b.push(this.widths.push(o));return b},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),vH=[].slice,Owe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vf(e,vd),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,o,l,h,p,i,b,E,I,O;return n in this.cache?this.cache[n]:(h=this.file.loca,r=this.file.contents,o=h.indexOf(n),(l=h.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+o,p=(i=new om(r.read(l))).readShort(),E=i.readShort(),O=i.readShort(),b=i.readShort(),I=i.readShort(),this.cache[n]=p===-1?new Uwe(i,E,O,b,I):new Dwe(i,p,E,O,b,I),this.cache[n]))},e.prototype.encode=function(n,r,o){var l,h,p,i,b;for(p=[],h=[],i=0,b=r.length;i<b;i++)l=n[r[i]],h.push(p.length),l&&(p=p.concat(l.encode(o)));return h.push(p.length),{table:p,offsets:h}},e}(),Dwe=function(){function t(e,n,r,o,l,h){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=o,this.xMax=l,this.yMax=h,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),Uwe=function(){function t(e,n,r,o,l){var h,p;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=o,this.yMax=l,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],h=this.raw;p=h.readShort(),this.glyphOffsets.push(h.pos),this.glyphIDs.push(h.readUInt16()),32&p;)h.pos+=1&p?4:2,128&p?h.pos+=8:64&p?h.pos+=4:8&p&&(h.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new om(vH.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),Nwe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vf(e,vd),e.prototype.tag="loca",e.prototype.parse=function(n){var r,o;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var l,h;for(h=[],o=0,l=this.length;o<l;o+=2)h.push(2*n.readUInt16());return h}).call(this):(function(){var l,h;for(h=[],o=0,l=this.length;o<l;o+=4)h.push(n.readUInt32());return h}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var o=new Uint32Array(this.offsets.length),l=0,h=0,p=0;p<o.length;++p)if(o[p]=l,h<r.length&&r[h]==p){++h,o[p]=l;var i=this.offsets[p],b=this.offsets[p+1]-i;b>0&&(l+=b)}for(var E=new Array(4*o.length),I=0;I<o.length;++I)E[4*I+3]=255&o[I],E[4*I+2]=(65280&o[I])>>8,E[4*I+1]=(16711680&o[I])>>16,E[4*I]=(4278190080&o[I])>>24;return E},e}(),zwe=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,o,l;for(n in o=this.font.cmap.tables[0].codeMap,e={},l=this.subset)r=l[n],e[n]=o[r];return e},t.prototype.glyphsFor=function(e){var n,r,o,l,h,p,i;for(o={},h=0,p=e.length;h<p;h++)o[l=e[h]]=this.font.glyf.glyphFor(l);for(l in n=[],o)(r=o[l])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(l in i=this.glyphsFor(n))r=i[l],o[l]=r;return o},t.prototype.encode=function(e,n){var r,o,l,h,p,i,b,E,I,O,M,G,q,Z,Y;for(o in r=_H.encode(this.generateCmap(),"unicode"),h=this.glyphsFor(e),M={0:0},Y=r.charMap)M[(i=Y[o]).old]=i.new;for(G in O=r.maxGlyphID,h)G in M||(M[G]=O++);return E=function(te){var be,Pe;for(be in Pe={},te)Pe[te[be]]=be;return Pe}(M),I=Object.keys(E).sort(function(te,be){return te-be}),q=function(){var te,be,Pe;for(Pe=[],te=0,be=I.length;te<be;te++)p=I[te],Pe.push(E[p]);return Pe}(),l=this.font.glyf.encode(h,q,M),b=this.font.loca.encode(l.offsets,q),Z={cmap:this.font.cmap.raw(),glyf:l.table,loca:b,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(Z["OS/2"]=this.font.os2.raw()),this.font.directory.encode(Z)},t}();gi.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,o,l,h;if(Array.isArray(n))return"["+function(){var p,i,b;for(b=[],p=0,i=n.length;p<i;p++)r=n[p],b.push(e.convert(r));return b}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(o in l=["<<"],n)h=n[o],l.push("/"+o+" "+e.convert(h));return l.push(">>"),l.join(`
`)}return""+n},e}();/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var n5=function(t,e){return n5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},n5(t,e)};function bd(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n5(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var r5=function(){return r5=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},r5.apply(this,arguments)};function Dc(t,e,n,r){function o(l){return l instanceof n?l:new n(function(h){h(l)})}return new(n||(n=Promise))(function(l,h){function p(E){try{b(r.next(E))}catch(I){h(I)}}function i(E){try{b(r.throw(E))}catch(I){h(I)}}function b(E){E.done?l(E.value):o(E.value).then(p,i)}b((r=r.apply(t,[])).next())})}function ac(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,o,l,h;return h={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(b){return function(E){return i([b,E])}}function i(b){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,o&&(l=b[0]&2?o.return:b[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,b[1])).done)return l;switch(o=0,l&&(b=[b[0]&2,l.value]),b[0]){case 0:case 1:l=b;break;case 4:return n.label++,{value:b[1],done:!1};case 5:n.label++,o=b[1],b=[0];continue;case 7:b=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(b[0]===6||b[0]===2)){n=0;continue}if(b[0]===3&&(!l||b[1]>l[0]&&b[1]<l[3])){n.label=b[1];break}if(b[0]===6&&n.label<l[1]){n.label=l[1],l=b;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(b);break}l[2]&&n.ops.pop(),n.trys.pop();continue}b=e.call(t,n)}catch(E){b=[6,E],o=0}finally{r=l=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}}function Yw(t,e,n){if(arguments.length===2)for(var r=0,o=e.length,l;r<o;r++)(l||!(r in e))&&(l||(l=Array.prototype.slice.call(e,0,r)),l[r]=e[r]);return t.concat(l||e)}var wA=function(){function t(e,n,r,o){this.left=e,this.top=n,this.width=r,this.height=o}return t.prototype.add=function(e,n,r,o){return new t(this.left+e,this.top+n,this.width+r,this.height+o)},t.fromClientRect=function(e,n){return new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height)},t.fromDOMRectList=function(e,n){var r=Array.from(n).find(function(o){return o.width!==0});return r?new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),aB=function(t,e){return wA.fromClientRect(t,e.getBoundingClientRect())},Vwe=function(t){var e=t.body,n=t.documentElement;if(!e||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,n.scrollWidth),Math.max(e.offsetWidth,n.offsetWidth),Math.max(e.clientWidth,n.clientWidth)),o=Math.max(Math.max(e.scrollHeight,n.scrollHeight),Math.max(e.offsetHeight,n.offsetHeight),Math.max(e.clientHeight,n.clientHeight));return new wA(0,0,r,o)},lB=function(t){for(var e=[],n=0,r=t.length;n<r;){var o=t.charCodeAt(n++);if(o>=55296&&o<=56319&&n<r){var l=t.charCodeAt(n++);(l&64512)===56320?e.push(((o&1023)<<10)+(l&1023)+65536):(e.push(o),n--)}else e.push(o)}return e},Ea=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],o=-1,l="";++o<n;){var h=t[o];h<=65535?r.push(h):(h-=65536,r.push((h>>10)+55296,h%1024+56320)),(o+1===n||r.length>16384)&&(l+=String.fromCharCode.apply(String,r),r.length=0)}return l},P3="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Qwe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Jw=0;Jw<P3.length;Jw++)Qwe[P3.charCodeAt(Jw)]=Jw;var L3="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xv=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ex=0;ex<L3.length;ex++)xv[L3.charCodeAt(ex)]=ex;var Hwe=function(t){var e=t.length*.75,n=t.length,r,o=0,l,h,p,i;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var b=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),E=Array.isArray(b)?b:new Uint8Array(b);for(r=0;r<n;r+=4)l=xv[t.charCodeAt(r)],h=xv[t.charCodeAt(r+1)],p=xv[t.charCodeAt(r+2)],i=xv[t.charCodeAt(r+3)],E[o++]=l<<2|h>>4,E[o++]=(h&15)<<4|p>>2,E[o++]=(p&3)<<6|i&63;return b},jwe=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},$we=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},dg=5,NP=11,q2=2,Gwe=NP-dg,bH=65536>>dg,Kwe=1<<dg,W2=Kwe-1,qwe=1024>>dg,Wwe=bH+qwe,Xwe=Wwe,Zwe=32,Ywe=Xwe+Zwe,Jwe=65536>>NP,exe=1<<Gwe,txe=exe-1,F3=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},nxe=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},rxe=function(t,e){var n=Hwe(t),r=Array.isArray(n)?$we(n):new Uint32Array(n),o=Array.isArray(n)?jwe(n):new Uint16Array(n),l=24,h=F3(o,l/2,r[4]/2),p=r[5]===2?F3(o,(l+r[4])/2):nxe(r,Math.ceil((l+r[4])/4));return new ixe(r[0],r[1],r[2],r[3],h,p)},ixe=function(){function t(e,n,r,o,l,h){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=o,this.index=l,this.data=h}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>dg],n=(n<<q2)+(e&W2),this.data[n];if(e<=65535)return n=this.index[bH+(e-55296>>dg)],n=(n<<q2)+(e&W2),this.data[n];if(e<this.highStart)return n=Ywe-Jwe+(e>>NP),n=this.index[n],n+=e>>dg&txe,n=this.index[n],n=(n<<q2)+(e&W2),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),R3="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",oxe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var tx=0;tx<R3.length;tx++)oxe[R3.charCodeAt(tx)]=tx;var sxe="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",k3=50,axe=1,wH=2,xH=3,lxe=4,cxe=5,M3=7,CH=8,O3=9,Up=10,i5=11,D3=12,o5=13,uxe=14,Cv=15,s5=16,nx=17,sv=18,hxe=19,U3=20,a5=21,av=22,X2=23,wy=24,Uu=25,Ev=26,Bv=27,xy=28,dxe=29,eg=30,fxe=31,rx=32,ix=33,l5=34,c5=35,u5=36,H1=37,h5=38,Yx=39,Jx=40,Z2=41,EH=42,Axe=43,pxe=[9001,65288],BH="!",Ao="×",ox="÷",d5=rxe(sxe),Jf=[eg,u5],f5=[axe,wH,xH,cxe],SH=[Up,CH],N3=[Bv,Ev],mxe=f5.concat(SH),z3=[h5,Yx,Jx,l5,c5],gxe=[Cv,o5],yxe=function(t,e){e===void 0&&(e="strict");var n=[],r=[],o=[];return t.forEach(function(l,h){var p=d5.get(l);if(p>k3?(o.push(!0),p-=k3):o.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(l)!==-1)return r.push(h),n.push(s5);if(p===lxe||p===i5){if(h===0)return r.push(h),n.push(eg);var i=n[h-1];return mxe.indexOf(i)===-1?(r.push(r[h-1]),n.push(i)):(r.push(h),n.push(eg))}if(r.push(h),p===fxe)return n.push(e==="strict"?a5:H1);if(p===EH||p===dxe)return n.push(eg);if(p===Axe)return l>=131072&&l<=196605||l>=196608&&l<=262141?n.push(H1):n.push(eg);n.push(p)}),[r,n,o]},Y2=function(t,e,n,r){var o=r[n];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var l=n;l<=r.length;){l++;var h=r[l];if(h===e)return!0;if(h!==Up)break}if(o===Up)for(var l=n;l>0;){l--;var p=r[l];if(Array.isArray(t)?t.indexOf(p)!==-1:t===p)for(var i=n;i<=r.length;){i++;var h=r[i];if(h===e)return!0;if(h!==Up)break}if(p!==Up)break}return!1},V3=function(t,e){for(var n=t;n>=0;){var r=e[n];if(r===Up)n--;else return r}return 0},_xe=function(t,e,n,r,o){if(n[r]===0)return Ao;var l=r-1;if(Array.isArray(o)&&o[l]===!0)return Ao;var h=l-1,p=l+1,i=e[l],b=h>=0?e[h]:0,E=e[p];if(i===wH&&E===xH)return Ao;if(f5.indexOf(i)!==-1)return BH;if(f5.indexOf(E)!==-1||SH.indexOf(E)!==-1)return Ao;if(V3(l,e)===CH)return ox;if(d5.get(t[l])===i5||(i===rx||i===ix)&&d5.get(t[p])===i5||i===M3||E===M3||i===O3||[Up,o5,Cv].indexOf(i)===-1&&E===O3||[nx,sv,hxe,wy,xy].indexOf(E)!==-1||V3(l,e)===av||Y2(X2,av,l,e)||Y2([nx,sv],a5,l,e)||Y2(D3,D3,l,e))return Ao;if(i===Up)return ox;if(i===X2||E===X2)return Ao;if(E===s5||i===s5)return ox;if([o5,Cv,a5].indexOf(E)!==-1||i===uxe||b===u5&&gxe.indexOf(i)!==-1||i===xy&&E===u5||E===U3||Jf.indexOf(E)!==-1&&i===Uu||Jf.indexOf(i)!==-1&&E===Uu||i===Bv&&[H1,rx,ix].indexOf(E)!==-1||[H1,rx,ix].indexOf(i)!==-1&&E===Ev||Jf.indexOf(i)!==-1&&N3.indexOf(E)!==-1||N3.indexOf(i)!==-1&&Jf.indexOf(E)!==-1||[Bv,Ev].indexOf(i)!==-1&&(E===Uu||[av,Cv].indexOf(E)!==-1&&e[p+1]===Uu)||[av,Cv].indexOf(i)!==-1&&E===Uu||i===Uu&&[Uu,xy,wy].indexOf(E)!==-1)return Ao;if([Uu,xy,wy,nx,sv].indexOf(E)!==-1)for(var I=l;I>=0;){var O=e[I];if(O===Uu)return Ao;if([xy,wy].indexOf(O)!==-1)I--;else break}if([Bv,Ev].indexOf(E)!==-1)for(var I=[nx,sv].indexOf(i)!==-1?h:l;I>=0;){var O=e[I];if(O===Uu)return Ao;if([xy,wy].indexOf(O)!==-1)I--;else break}if(h5===i&&[h5,Yx,l5,c5].indexOf(E)!==-1||[Yx,l5].indexOf(i)!==-1&&[Yx,Jx].indexOf(E)!==-1||[Jx,c5].indexOf(i)!==-1&&E===Jx||z3.indexOf(i)!==-1&&[U3,Ev].indexOf(E)!==-1||z3.indexOf(E)!==-1&&i===Bv||Jf.indexOf(i)!==-1&&Jf.indexOf(E)!==-1||i===wy&&Jf.indexOf(E)!==-1||Jf.concat(Uu).indexOf(i)!==-1&&E===av&&pxe.indexOf(t[p])===-1||Jf.concat(Uu).indexOf(E)!==-1&&i===sv)return Ao;if(i===Z2&&E===Z2){for(var M=n[l],G=1;M>0&&(M--,e[M]===Z2);)G++;if(G%2!==0)return Ao}return i===rx&&E===ix?Ao:ox},vxe=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var n=yxe(t,e.lineBreak),r=n[0],o=n[1],l=n[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(o=o.map(function(p){return[Uu,eg,EH].indexOf(p)!==-1?H1:p}));var h=e.wordBreak==="keep-all"?l.map(function(p,i){return p&&t[i]>=19968&&t[i]<=40959}):void 0;return[r,o,h]},bxe=function(){function t(e,n,r,o){this.codePoints=e,this.required=n===BH,this.start=r,this.end=o}return t.prototype.slice=function(){return Ea.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),wxe=function(t,e){var n=lB(t),r=vxe(n,e),o=r[0],l=r[1],h=r[2],p=n.length,i=0,b=0;return{next:function(){if(b>=p)return{done:!0,value:null};for(var E=Ao;b<p&&(E=_xe(n,l,o,++b,h))===Ao;);if(E!==Ao||b===p){var I=new bxe(n,E,i,b);return i=b,{value:I,done:!1}}return{done:!0,value:null}}}},xxe=1,Cxe=2,_b=4,Q3=8,KC=10,H3=47,qv=92,Exe=9,Bxe=32,sx=34,lv=61,Sxe=35,Txe=36,Ixe=37,ax=39,lx=40,cv=41,Pxe=95,lu=45,Lxe=33,Fxe=60,Rxe=62,kxe=64,Mxe=91,Oxe=93,Dxe=61,Uxe=123,cx=63,Nxe=125,j3=124,zxe=126,Vxe=128,$3=65533,J2=42,ig=43,Qxe=44,Hxe=58,jxe=59,j1=46,$xe=0,Gxe=8,Kxe=11,qxe=14,Wxe=31,Xxe=127,Wd=-1,TH=48,IH=97,PH=101,Zxe=102,Yxe=117,Jxe=122,LH=65,FH=69,RH=70,eCe=85,tCe=90,cc=function(t){return t>=TH&&t<=57},nCe=function(t){return t>=55296&&t<=57343},Cy=function(t){return cc(t)||t>=LH&&t<=RH||t>=IH&&t<=Zxe},rCe=function(t){return t>=IH&&t<=Jxe},iCe=function(t){return t>=LH&&t<=tCe},oCe=function(t){return rCe(t)||iCe(t)},sCe=function(t){return t>=Vxe},ux=function(t){return t===KC||t===Exe||t===Bxe},qC=function(t){return oCe(t)||sCe(t)||t===Pxe},G3=function(t){return qC(t)||cc(t)||t===lu},aCe=function(t){return t>=$xe&&t<=Gxe||t===Kxe||t>=qxe&&t<=Wxe||t===Xxe},Ep=function(t,e){return t!==qv?!1:e!==KC},hx=function(t,e,n){return t===lu?qC(e)||Ep(e,n):qC(t)?!0:!!(t===qv&&Ep(t,e))},eT=function(t,e,n){return t===ig||t===lu?cc(e)?!0:e===j1&&cc(n):cc(t===j1?e:t)},lCe=function(t){var e=0,n=1;(t[e]===ig||t[e]===lu)&&(t[e]===lu&&(n=-1),e++);for(var r=[];cc(t[e]);)r.push(t[e++]);var o=r.length?parseInt(Ea.apply(void 0,r),10):0;t[e]===j1&&e++;for(var l=[];cc(t[e]);)l.push(t[e++]);var h=l.length,p=h?parseInt(Ea.apply(void 0,l),10):0;(t[e]===FH||t[e]===PH)&&e++;var i=1;(t[e]===ig||t[e]===lu)&&(t[e]===lu&&(i=-1),e++);for(var b=[];cc(t[e]);)b.push(t[e++]);var E=b.length?parseInt(Ea.apply(void 0,b),10):0;return n*(o+p*Math.pow(10,-h))*Math.pow(10,i*E)},cCe={type:2},uCe={type:3},hCe={type:4},dCe={type:13},fCe={type:8},ACe={type:21},pCe={type:9},mCe={type:10},gCe={type:11},yCe={type:12},_Ce={type:14},dx={type:23},vCe={type:1},bCe={type:25},wCe={type:24},xCe={type:26},CCe={type:27},ECe={type:28},BCe={type:29},SCe={type:31},A5={type:32},kH=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(lB(e))},t.prototype.read=function(){for(var e=[],n=this.consumeToken();n!==A5;)e.push(n),n=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case sx:return this.consumeStringToken(sx);case Sxe:var n=this.peekCodePoint(0),r=this.peekCodePoint(1),o=this.peekCodePoint(2);if(G3(n)||Ep(r,o)){var l=hx(n,r,o)?Cxe:xxe,h=this.consumeName();return{type:5,value:h,flags:l}}break;case Txe:if(this.peekCodePoint(0)===lv)return this.consumeCodePoint(),dCe;break;case ax:return this.consumeStringToken(ax);case lx:return cCe;case cv:return uCe;case J2:if(this.peekCodePoint(0)===lv)return this.consumeCodePoint(),_Ce;break;case ig:if(eT(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Qxe:return hCe;case lu:var p=e,i=this.peekCodePoint(0),b=this.peekCodePoint(1);if(eT(p,i,b))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(hx(p,i,b))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(i===lu&&b===Rxe)return this.consumeCodePoint(),this.consumeCodePoint(),wCe;break;case j1:if(eT(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case H3:if(this.peekCodePoint(0)===J2)for(this.consumeCodePoint();;){var E=this.consumeCodePoint();if(E===J2&&(E=this.consumeCodePoint(),E===H3))return this.consumeToken();if(E===Wd)return this.consumeToken()}break;case Hxe:return xCe;case jxe:return CCe;case Fxe:if(this.peekCodePoint(0)===Lxe&&this.peekCodePoint(1)===lu&&this.peekCodePoint(2)===lu)return this.consumeCodePoint(),this.consumeCodePoint(),bCe;break;case kxe:var I=this.peekCodePoint(0),O=this.peekCodePoint(1),M=this.peekCodePoint(2);if(hx(I,O,M)){var h=this.consumeName();return{type:7,value:h}}break;case Mxe:return ECe;case qv:if(Ep(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case Oxe:return BCe;case Dxe:if(this.peekCodePoint(0)===lv)return this.consumeCodePoint(),fCe;break;case Uxe:return gCe;case Nxe:return yCe;case Yxe:case eCe:var G=this.peekCodePoint(0),q=this.peekCodePoint(1);return G===ig&&(Cy(q)||q===cx)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case j3:if(this.peekCodePoint(0)===lv)return this.consumeCodePoint(),pCe;if(this.peekCodePoint(0)===j3)return this.consumeCodePoint(),ACe;break;case zxe:if(this.peekCodePoint(0)===lv)return this.consumeCodePoint(),mCe;break;case Wd:return A5}return ux(e)?(this.consumeWhiteSpace(),SCe):cc(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):qC(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Ea(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],n=this.consumeCodePoint();Cy(n)&&e.length<6;)e.push(n),n=this.consumeCodePoint();for(var r=!1;n===cx&&e.length<6;)e.push(n),n=this.consumeCodePoint(),r=!0;if(r){var o=parseInt(Ea.apply(void 0,e.map(function(i){return i===cx?TH:i})),16),l=parseInt(Ea.apply(void 0,e.map(function(i){return i===cx?RH:i})),16);return{type:30,start:o,end:l}}var h=parseInt(Ea.apply(void 0,e),16);if(this.peekCodePoint(0)===lu&&Cy(this.peekCodePoint(1))){this.consumeCodePoint(),n=this.consumeCodePoint();for(var p=[];Cy(n)&&p.length<6;)p.push(n),n=this.consumeCodePoint();var l=parseInt(Ea.apply(void 0,p),16);return{type:30,start:h,end:l}}else return{type:30,start:h,end:h}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===lx?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===lx?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Wd)return{type:22,value:""};var n=this.peekCodePoint(0);if(n===ax||n===sx){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Wd||this.peekCodePoint(0)===cv)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),dx)}for(;;){var o=this.consumeCodePoint();if(o===Wd||o===cv)return{type:22,value:Ea.apply(void 0,e)};if(ux(o))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Wd||this.peekCodePoint(0)===cv?(this.consumeCodePoint(),{type:22,value:Ea.apply(void 0,e)}):(this.consumeBadUrlRemnants(),dx);if(o===sx||o===ax||o===lx||aCe(o))return this.consumeBadUrlRemnants(),dx;if(o===qv)if(Ep(o,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),dx;else e.push(o)}},t.prototype.consumeWhiteSpace=function(){for(;ux(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===cv||e===Wd)return;Ep(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var n=5e4,r="";e>0;){var o=Math.min(n,e);r+=Ea.apply(void 0,this._value.splice(0,o)),e-=o}return this._value.shift(),r},t.prototype.consumeStringToken=function(e){var n="",r=0;do{var o=this._value[r];if(o===Wd||o===void 0||o===e)return n+=this.consumeStringSlice(r),{type:0,value:n};if(o===KC)return this._value.splice(0,r),vCe;if(o===qv){var l=this._value[r+1];l!==Wd&&l!==void 0&&(l===KC?(n+=this.consumeStringSlice(r),r=-1,this._value.shift()):Ep(o,l)&&(n+=this.consumeStringSlice(r),n+=Ea(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},t.prototype.consumeNumber=function(){var e=[],n=_b,r=this.peekCodePoint(0);for((r===ig||r===lu)&&e.push(this.consumeCodePoint());cc(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var o=this.peekCodePoint(1);if(r===j1&&cc(o))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=Q3;cc(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),o=this.peekCodePoint(1);var l=this.peekCodePoint(2);if((r===FH||r===PH)&&((o===ig||o===lu)&&cc(l)||cc(o)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=Q3;cc(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[lCe(e),n]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),n=e[0],r=e[1],o=this.peekCodePoint(0),l=this.peekCodePoint(1),h=this.peekCodePoint(2);if(hx(o,l,h)){var p=this.consumeName();return{type:15,number:n,flags:r,unit:p}}return o===Ixe?(this.consumeCodePoint(),{type:16,number:n,flags:r}):{type:17,number:n,flags:r}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Cy(e)){for(var n=Ea(e);Cy(this.peekCodePoint(0))&&n.length<6;)n+=Ea(this.consumeCodePoint());ux(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(n,16);return r===0||nCe(r)||r>1114111?$3:r}return e===Wd?$3:e},t.prototype.consumeName=function(){for(var e="";;){var n=this.consumeCodePoint();if(G3(n))e+=Ea(n);else if(Ep(n,this.peekCodePoint(0)))e+=Ea(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(n),e}},t}(),MH=function(){function t(e){this._tokens=e}return t.create=function(e){var n=new kH;return n.write(e),new t(n.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var n=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return n;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var n=this.consumeComponentValue();if(n.type===32)return e;e.push(n),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var n={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||ICe(r,e))return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue()),r=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var n={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?A5:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),vb=function(t){return t.type===15},J_=function(t){return t.type===17},As=function(t){return t.type===20},TCe=function(t){return t.type===0},p5=function(t,e){return As(t)&&t.value===e},OH=function(t){return t.type!==31},O_=function(t){return t.type!==31&&t.type!==4},bf=function(t){var e=[],n=[];return t.forEach(function(r){if(r.type===4){if(n.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(n),n=[];return}r.type!==31&&n.push(r)}),n.length&&e.push(n),e},ICe=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},sm=function(t){return t.type===17||t.type===15},Qa=function(t){return t.type===16||sm(t)},DH=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},Dl={type:17,number:0,flags:_b},zP={type:16,number:50,flags:_b},Np={type:16,number:100,flags:_b},Sv=function(t,e,n){var r=t[0],o=t[1];return[Ts(r,e),Ts(typeof o<"u"?o:r,n)]},Ts=function(t,e){if(t.type===16)return t.number/100*e;if(vb(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},UH="deg",NH="grad",zH="rad",VH="turn",cB={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case UH:return Math.PI*e.number/180;case NH:return Math.PI/200*e.number;case zH:return e.number;case VH:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},QH=function(t){return t.type===15&&(t.unit===UH||t.unit===NH||t.unit===zH||t.unit===VH)},HH=function(t){var e=t.filter(As).map(function(n){return n.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Dl,Dl];case"to top":case"bottom":return Th(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Dl,Np];case"to right":case"left":return Th(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Np,Np];case"to bottom":case"top":return Th(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Np,Dl];case"to left":case"right":return Th(270)}return 0},Th=function(t){return Math.PI*t/180},Kp={name:"color",parse:function(t,e){if(e.type===18){var n=PCe[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return n(t,e.values)}if(e.type===5){if(e.value.length===3){var r=e.value.substring(0,1),o=e.value.substring(1,2),l=e.value.substring(2,3);return zp(parseInt(r+r,16),parseInt(o+o,16),parseInt(l+l,16),1)}if(e.value.length===4){var r=e.value.substring(0,1),o=e.value.substring(1,2),l=e.value.substring(2,3),h=e.value.substring(3,4);return zp(parseInt(r+r,16),parseInt(o+o,16),parseInt(l+l,16),parseInt(h+h,16)/255)}if(e.value.length===6){var r=e.value.substring(0,2),o=e.value.substring(2,4),l=e.value.substring(4,6);return zp(parseInt(r,16),parseInt(o,16),parseInt(l,16),1)}if(e.value.length===8){var r=e.value.substring(0,2),o=e.value.substring(2,4),l=e.value.substring(4,6),h=e.value.substring(6,8);return zp(parseInt(r,16),parseInt(o,16),parseInt(l,16),parseInt(h,16)/255)}}if(e.type===20){var p=pA[e.value.toUpperCase()];if(typeof p<"u")return p}return pA.TRANSPARENT}},qp=function(t){return(255&t)===0},Al=function(t){var e=255&t,n=255&t>>8,r=255&t>>16,o=255&t>>24;return e<255?"rgba("+o+","+r+","+n+","+e/255+")":"rgb("+o+","+r+","+n+")"},zp=function(t,e,n,r){return(t<<24|e<<16|n<<8|Math.round(r*255)<<0)>>>0},K3=function(t,e){if(t.type===17)return t.number;if(t.type===16){var n=e===3?1:255;return e===3?t.number/100*n:Math.round(t.number/100*n)}return 0},q3=function(t,e){var n=e.filter(O_);if(n.length===3){var r=n.map(K3),o=r[0],l=r[1],h=r[2];return zp(o,l,h,1)}if(n.length===4){var p=n.map(K3),o=p[0],l=p[1],h=p[2],i=p[3];return zp(o,l,h,i)}return 0};function tT(t,e,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(e-t)*n*6+t:n<1/2?e:n<2/3?(e-t)*6*(2/3-n)+t:t}var W3=function(t,e){var n=e.filter(O_),r=n[0],o=n[1],l=n[2],h=n[3],p=(r.type===17?Th(r.number):cB.parse(t,r))/(Math.PI*2),i=Qa(o)?o.number/100:0,b=Qa(l)?l.number/100:0,E=typeof h<"u"&&Qa(h)?Ts(h,1):1;if(i===0)return zp(b*255,b*255,b*255,1);var I=b<=.5?b*(i+1):b+i-b*i,O=b*2-I,M=tT(O,I,p+1/3),G=tT(O,I,p),q=tT(O,I,p-1/3);return zp(M*255,G*255,q*255,E)},PCe={hsl:W3,hsla:W3,rgb:q3,rgba:q3},Wv=function(t,e){return Kp.parse(t,MH.create(e).parseComponentValue())},pA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},LCe={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(As(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},FCe={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},uB=function(t,e){var n=Kp.parse(t,e[0]),r=e[1];return r&&Qa(r)?{color:n,stop:r}:{color:n,stop:null}},X3=function(t,e){var n=t[0],r=t[t.length-1];n.stop===null&&(n.stop=Dl),r.stop===null&&(r.stop=Np);for(var o=[],l=0,h=0;h<t.length;h++){var p=t[h].stop;if(p!==null){var i=Ts(p,e);i>l?o.push(i):o.push(l),l=i}else o.push(null)}for(var b=null,h=0;h<o.length;h++){var E=o[h];if(E===null)b===null&&(b=h);else if(b!==null){for(var I=h-b,O=o[b-1],M=(E-O)/(I+1),G=1;G<=I;G++)o[b+G-1]=M*G;b=null}}return t.map(function(q,Z){var Y=q.color;return{color:Y,stop:Math.max(Math.min(1,o[Z]/e),0)}})},RCe=function(t,e,n){var r=e/2,o=n/2,l=Ts(t[0],e)-r,h=o-Ts(t[1],n);return(Math.atan2(h,l)+Math.PI*2)%(Math.PI*2)},kCe=function(t,e,n){var r=typeof t=="number"?t:RCe(t,e,n),o=Math.abs(e*Math.sin(r))+Math.abs(n*Math.cos(r)),l=e/2,h=n/2,p=o/2,i=Math.sin(r-Math.PI/2)*p,b=Math.cos(r-Math.PI/2)*p;return[o,l-b,l+b,h-i,h+i]},ad=function(t,e){return Math.sqrt(t*t+e*e)},Z3=function(t,e,n,r,o){var l=[[0,0],[0,e],[t,0],[t,e]];return l.reduce(function(h,p){var i=p[0],b=p[1],E=ad(n-i,r-b);return(o?E<h.optimumDistance:E>h.optimumDistance)?{optimumCorner:p,optimumDistance:E}:h},{optimumDistance:o?1/0:-1/0,optimumCorner:null}).optimumCorner},MCe=function(t,e,n,r,o){var l=0,h=0;switch(t.size){case 0:t.shape===0?l=h=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-o)):t.shape===1&&(l=Math.min(Math.abs(e),Math.abs(e-r)),h=Math.min(Math.abs(n),Math.abs(n-o)));break;case 2:if(t.shape===0)l=h=Math.min(ad(e,n),ad(e,n-o),ad(e-r,n),ad(e-r,n-o));else if(t.shape===1){var p=Math.min(Math.abs(n),Math.abs(n-o))/Math.min(Math.abs(e),Math.abs(e-r)),i=Z3(r,o,e,n,!0),b=i[0],E=i[1];l=ad(b-e,(E-n)/p),h=p*l}break;case 1:t.shape===0?l=h=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-o)):t.shape===1&&(l=Math.max(Math.abs(e),Math.abs(e-r)),h=Math.max(Math.abs(n),Math.abs(n-o)));break;case 3:if(t.shape===0)l=h=Math.max(ad(e,n),ad(e,n-o),ad(e-r,n),ad(e-r,n-o));else if(t.shape===1){var p=Math.max(Math.abs(n),Math.abs(n-o))/Math.max(Math.abs(e),Math.abs(e-r)),I=Z3(r,o,e,n,!1),b=I[0],E=I[1];l=ad(b-e,(E-n)/p),h=p*l}break}return Array.isArray(t.size)&&(l=Ts(t.size[0],r),h=t.size.length===2?Ts(t.size[1],o):l),[l,h]},OCe=function(t,e){var n=Th(180),r=[];return bf(e).forEach(function(o,l){if(l===0){var h=o[0];if(h.type===20&&h.value==="to"){n=HH(o);return}else if(QH(h)){n=cB.parse(t,h);return}}var p=uB(t,o);r.push(p)}),{angle:n,stops:r,type:1}},fx=function(t,e){var n=Th(180),r=[];return bf(e).forEach(function(o,l){if(l===0){var h=o[0];if(h.type===20&&["top","left","right","bottom"].indexOf(h.value)!==-1){n=HH(o);return}else if(QH(h)){n=(cB.parse(t,h)+Th(270))%Th(360);return}}var p=uB(t,o);r.push(p)}),{angle:n,stops:r,type:1}},DCe=function(t,e){var n=Th(180),r=[],o=1,l=0,h=3,p=[];return bf(e).forEach(function(i,b){var E=i[0];if(b===0){if(As(E)&&E.value==="linear"){o=1;return}else if(As(E)&&E.value==="radial"){o=2;return}}if(E.type===18){if(E.name==="from"){var I=Kp.parse(t,E.values[0]);r.push({stop:Dl,color:I})}else if(E.name==="to"){var I=Kp.parse(t,E.values[0]);r.push({stop:Np,color:I})}else if(E.name==="color-stop"){var O=E.values.filter(O_);if(O.length===2){var I=Kp.parse(t,O[1]),M=O[0];J_(M)&&r.push({stop:{type:16,number:M.number*100,flags:M.flags},color:I})}}}}),o===1?{angle:(n+Th(180))%Th(360),stops:r,type:o}:{size:h,shape:l,stops:r,position:p,type:o}},jH="closest-side",$H="farthest-side",GH="closest-corner",KH="farthest-corner",qH="circle",WH="ellipse",XH="cover",ZH="contain",UCe=function(t,e){var n=0,r=3,o=[],l=[];return bf(e).forEach(function(h,p){var i=!0;if(p===0){var b=!1;i=h.reduce(function(I,O){if(b)if(As(O))switch(O.value){case"center":return l.push(zP),I;case"top":case"left":return l.push(Dl),I;case"right":case"bottom":return l.push(Np),I}else(Qa(O)||sm(O))&&l.push(O);else if(As(O))switch(O.value){case qH:return n=0,!1;case WH:return n=1,!1;case"at":return b=!0,!1;case jH:return r=0,!1;case XH:case $H:return r=1,!1;case ZH:case GH:return r=2,!1;case KH:return r=3,!1}else if(sm(O)||Qa(O))return Array.isArray(r)||(r=[]),r.push(O),!1;return I},i)}if(i){var E=uB(t,h);o.push(E)}}),{size:r,shape:n,stops:o,position:l,type:2}},Ax=function(t,e){var n=0,r=3,o=[],l=[];return bf(e).forEach(function(h,p){var i=!0;if(p===0?i=h.reduce(function(E,I){if(As(I))switch(I.value){case"center":return l.push(zP),!1;case"top":case"left":return l.push(Dl),!1;case"right":case"bottom":return l.push(Np),!1}else if(Qa(I)||sm(I))return l.push(I),!1;return E},i):p===1&&(i=h.reduce(function(E,I){if(As(I))switch(I.value){case qH:return n=0,!1;case WH:return n=1,!1;case ZH:case jH:return r=0,!1;case $H:return r=1,!1;case GH:return r=2,!1;case XH:case KH:return r=3,!1}else if(sm(I)||Qa(I))return Array.isArray(r)||(r=[]),r.push(I),!1;return E},i)),i){var b=uB(t,h);o.push(b)}}),{size:r,shape:n,stops:o,position:l,type:2}},NCe=function(t){return t.type===1},zCe=function(t){return t.type===2},VP={name:"image",parse:function(t,e){if(e.type===22){var n={url:e.value,type:0};return t.cache.addImage(e.value),n}if(e.type===18){var r=YH[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function VCe(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!YH[t.name])}var YH={"linear-gradient":OCe,"-moz-linear-gradient":fx,"-ms-linear-gradient":fx,"-o-linear-gradient":fx,"-webkit-linear-gradient":fx,"radial-gradient":UCe,"-moz-radial-gradient":Ax,"-ms-radial-gradient":Ax,"-o-radial-gradient":Ax,"-webkit-radial-gradient":Ax,"-webkit-gradient":DCe},QCe={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e.filter(function(r){return O_(r)&&VCe(r)}).map(function(r){return VP.parse(t,r)})}},HCe={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(As(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},jCe={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return bf(e).map(function(n){return n.filter(Qa)}).map(DH)}},$Ce={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return bf(e).map(function(n){return n.filter(As).map(function(r){return r.value}).join(" ")}).map(GCe)}},GCe=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},l_;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(l_||(l_={}));var KCe={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return bf(e).map(function(n){return n.filter(qCe)})}},qCe=function(t){return As(t)||Qa(t)},hB=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},WCe=hB("top"),XCe=hB("right"),ZCe=hB("bottom"),YCe=hB("left"),dB=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,n){return DH(n.filter(Qa))}}},JCe=dB("top-left"),eEe=dB("top-right"),tEe=dB("bottom-right"),nEe=dB("bottom-left"),fB=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,n){switch(n){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},rEe=fB("top"),iEe=fB("right"),oEe=fB("bottom"),sEe=fB("left"),AB=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,n){return vb(n)?n.number:0}}},aEe=AB("top"),lEe=AB("right"),cEe=AB("bottom"),uEe=AB("left"),hEe={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},dEe={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},fEe={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(As).reduce(function(n,r){return n|AEe(r.value)},0)}},AEe=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},pEe={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},mEe={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},WC;(function(t){t.NORMAL="normal",t.STRICT="strict"})(WC||(WC={}));var gEe={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return WC.STRICT;case"normal":default:return WC.NORMAL}}},yEe={name:"line-height",initialValue:"normal",prefix:!1,type:4},Y3=function(t,e){return As(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:Qa(t)?Ts(t,e):e},_Ee={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:VP.parse(t,e)}},vEe={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},m5={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},pB=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},bEe=pB("top"),wEe=pB("right"),xEe=pB("bottom"),CEe=pB("left"),EEe={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(As).map(function(n){switch(n.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},BEe={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},mB=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},SEe=mB("top"),TEe=mB("right"),IEe=mB("bottom"),PEe=mB("left"),LEe={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},FEe={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},REe={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&p5(e[0],"none")?[]:bf(e).map(function(n){for(var r={color:pA.TRANSPARENT,offsetX:Dl,offsetY:Dl,blur:Dl},o=0,l=0;l<n.length;l++){var h=n[l];sm(h)?(o===0?r.offsetX=h:o===1?r.offsetY=h:r.blur=h,o++):r.color=Kp.parse(t,h)}return r})}},kEe={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},MEe={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var n=UEe[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return n(e.values)}return null}},OEe=function(t){var e=t.filter(function(n){return n.type===17}).map(function(n){return n.number});return e.length===6?e:null},DEe=function(t){var e=t.filter(function(i){return i.type===17}).map(function(i){return i.number}),n=e[0],r=e[1];e[2],e[3];var o=e[4],l=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var h=e[12],p=e[13];return e[14],e[15],e.length===16?[n,r,o,l,h,p]:null},UEe={matrix:OEe,matrix3d:DEe},J3={type:16,number:50,flags:_b},NEe=[J3,J3],zEe={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var n=e.filter(Qa);return n.length!==2?NEe:[n[0],n[1]]}},VEe={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Xv;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(Xv||(Xv={}));var QEe={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return Xv.BREAK_ALL;case"keep-all":return Xv.KEEP_ALL;case"normal":default:return Xv.NORMAL}}},HEe={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(J_(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},JH={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},jEe={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return J_(e)?e.number:1}},$Ee={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},GEe={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(As).map(function(n){switch(n.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(n){return n!==0})}},KEe={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var n=[],r=[];return e.forEach(function(o){switch(o.type){case 20:case 0:n.push(o.value);break;case 17:n.push(o.number.toString());break;case 4:r.push(n.join(" ")),n.length=0;break}}),n.length&&r.push(n.join(" ")),r.map(function(o){return o.indexOf(" ")===-1?o:"'"+o+"'"})}},qEe={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},WEe={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(J_(e))return e.number;if(As(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},XEe={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(As).map(function(n){return n.value})}},ZEe={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},nl=function(t,e){return(t&e)!==0},YEe={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e}},JEe={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;for(var r=[],o=e.filter(OH),l=0;l<o.length;l++){var h=o[l],p=o[l+1];if(h.type===20){var i=p&&J_(p)?p.number:1;r.push({counter:h.value,increment:i})}}return r}},eBe={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var n=[],r=e.filter(OH),o=0;o<r.length;o++){var l=r[o],h=r[o+1];if(As(l)&&l.value!=="none"){var p=h&&J_(h)?h.number:0;n.push({counter:l.value,reset:p})}}return n}},tBe={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(vb).map(function(n){return JH.parse(t,n)})}},nBe={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;var r=[],o=e.filter(TCe);if(o.length%2!==0)return null;for(var l=0;l<o.length;l+=2){var h=o[l].value,p=o[l+1].value;r.push({open:h,close:p})}return r}},eU=function(t,e,n){if(!t)return"";var r=t[Math.min(e,t.length-1)];return r?n?r.open:r.close:""},rBe={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&p5(e[0],"none")?[]:bf(e).map(function(n){for(var r={color:255,offsetX:Dl,offsetY:Dl,blur:Dl,spread:Dl,inset:!1},o=0,l=0;l<n.length;l++){var h=n[l];p5(h,"inset")?r.inset=!0:sm(h)?(o===0?r.offsetX=h:o===1?r.offsetY=h:o===2?r.blur=h:r.spread=h,o++):r.color=Kp.parse(t,h)}return r})}},iBe={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var n=[0,1,2],r=[];return e.filter(As).forEach(function(o){switch(o.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),n.forEach(function(o){r.indexOf(o)===-1&&r.push(o)}),r}},oBe={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},sBe={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return vb(e)?e.number:0}},aBe=function(){function t(e,n){var r,o;this.animationDuration=Dr(e,tBe,n.animationDuration),this.backgroundClip=Dr(e,LCe,n.backgroundClip),this.backgroundColor=Dr(e,FCe,n.backgroundColor),this.backgroundImage=Dr(e,QCe,n.backgroundImage),this.backgroundOrigin=Dr(e,HCe,n.backgroundOrigin),this.backgroundPosition=Dr(e,jCe,n.backgroundPosition),this.backgroundRepeat=Dr(e,$Ce,n.backgroundRepeat),this.backgroundSize=Dr(e,KCe,n.backgroundSize),this.borderTopColor=Dr(e,WCe,n.borderTopColor),this.borderRightColor=Dr(e,XCe,n.borderRightColor),this.borderBottomColor=Dr(e,ZCe,n.borderBottomColor),this.borderLeftColor=Dr(e,YCe,n.borderLeftColor),this.borderTopLeftRadius=Dr(e,JCe,n.borderTopLeftRadius),this.borderTopRightRadius=Dr(e,eEe,n.borderTopRightRadius),this.borderBottomRightRadius=Dr(e,tEe,n.borderBottomRightRadius),this.borderBottomLeftRadius=Dr(e,nEe,n.borderBottomLeftRadius),this.borderTopStyle=Dr(e,rEe,n.borderTopStyle),this.borderRightStyle=Dr(e,iEe,n.borderRightStyle),this.borderBottomStyle=Dr(e,oEe,n.borderBottomStyle),this.borderLeftStyle=Dr(e,sEe,n.borderLeftStyle),this.borderTopWidth=Dr(e,aEe,n.borderTopWidth),this.borderRightWidth=Dr(e,lEe,n.borderRightWidth),this.borderBottomWidth=Dr(e,cEe,n.borderBottomWidth),this.borderLeftWidth=Dr(e,uEe,n.borderLeftWidth),this.boxShadow=Dr(e,rBe,n.boxShadow),this.color=Dr(e,hEe,n.color),this.direction=Dr(e,dEe,n.direction),this.display=Dr(e,fEe,n.display),this.float=Dr(e,pEe,n.cssFloat),this.fontFamily=Dr(e,KEe,n.fontFamily),this.fontSize=Dr(e,qEe,n.fontSize),this.fontStyle=Dr(e,ZEe,n.fontStyle),this.fontVariant=Dr(e,XEe,n.fontVariant),this.fontWeight=Dr(e,WEe,n.fontWeight),this.letterSpacing=Dr(e,mEe,n.letterSpacing),this.lineBreak=Dr(e,gEe,n.lineBreak),this.lineHeight=Dr(e,yEe,n.lineHeight),this.listStyleImage=Dr(e,_Ee,n.listStyleImage),this.listStylePosition=Dr(e,vEe,n.listStylePosition),this.listStyleType=Dr(e,m5,n.listStyleType),this.marginTop=Dr(e,bEe,n.marginTop),this.marginRight=Dr(e,wEe,n.marginRight),this.marginBottom=Dr(e,xEe,n.marginBottom),this.marginLeft=Dr(e,CEe,n.marginLeft),this.opacity=Dr(e,jEe,n.opacity);var l=Dr(e,EEe,n.overflow);this.overflowX=l[0],this.overflowY=l[l.length>1?1:0],this.overflowWrap=Dr(e,BEe,n.overflowWrap),this.paddingTop=Dr(e,SEe,n.paddingTop),this.paddingRight=Dr(e,TEe,n.paddingRight),this.paddingBottom=Dr(e,IEe,n.paddingBottom),this.paddingLeft=Dr(e,PEe,n.paddingLeft),this.paintOrder=Dr(e,iBe,n.paintOrder),this.position=Dr(e,FEe,n.position),this.textAlign=Dr(e,LEe,n.textAlign),this.textDecorationColor=Dr(e,$Ee,(r=n.textDecorationColor)!==null&&r!==void 0?r:n.color),this.textDecorationLine=Dr(e,GEe,(o=n.textDecorationLine)!==null&&o!==void 0?o:n.textDecoration),this.textShadow=Dr(e,REe,n.textShadow),this.textTransform=Dr(e,kEe,n.textTransform),this.transform=Dr(e,MEe,n.transform),this.transformOrigin=Dr(e,zEe,n.transformOrigin),this.visibility=Dr(e,VEe,n.visibility),this.webkitTextStrokeColor=Dr(e,oBe,n.webkitTextStrokeColor),this.webkitTextStrokeWidth=Dr(e,sBe,n.webkitTextStrokeWidth),this.wordBreak=Dr(e,QEe,n.wordBreak),this.zIndex=Dr(e,HEe,n.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return qp(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return nl(this.display,4)||nl(this.display,33554432)||nl(this.display,268435456)||nl(this.display,536870912)||nl(this.display,67108864)||nl(this.display,134217728)},t}(),lBe=function(){function t(e,n){this.content=Dr(e,YEe,n.content),this.quotes=Dr(e,nBe,n.quotes)}return t}(),tU=function(){function t(e,n){this.counterIncrement=Dr(e,JEe,n.counterIncrement),this.counterReset=Dr(e,eBe,n.counterReset)}return t}(),Dr=function(t,e,n){var r=new kH,o=n!==null&&typeof n<"u"?n.toString():e.initialValue;r.write(o);var l=new MH(r.read());switch(e.type){case 2:var h=l.parseComponentValue();return e.parse(t,As(h)?h.value:e.initialValue);case 0:return e.parse(t,l.parseComponentValue());case 1:return e.parse(t,l.parseComponentValues());case 4:return l.parseComponentValue();case 3:switch(e.format){case"angle":return cB.parse(t,l.parseComponentValue());case"color":return Kp.parse(t,l.parseComponentValue());case"image":return VP.parse(t,l.parseComponentValue());case"length":var p=l.parseComponentValue();return sm(p)?p:Dl;case"length-percentage":var i=l.parseComponentValue();return Qa(i)?i:Dl;case"time":return JH.parse(t,l.parseComponentValue())}break}},cBe="data-html2canvas-debug",uBe=function(t){var e=t.getAttribute(cBe);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},g5=function(t,e){var n=uBe(t);return n===1||e===n},wf=function(){function t(e,n){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,g5(n,3))debugger;this.styles=new aBe(e,window.getComputedStyle(n,null)),v5(n)&&(this.styles.animationDuration.some(function(r){return r>0})&&(n.style.animationDuration="0s"),this.styles.transform!==null&&(n.style.transform="none")),this.bounds=aB(this.context,n),g5(n,4)&&(this.flags|=16)}return t}(),hBe="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",nU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Tv=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var px=0;px<nU.length;px++)Tv[nU.charCodeAt(px)]=px;var dBe=function(t){var e=t.length*.75,n=t.length,r,o=0,l,h,p,i;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var b=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),E=Array.isArray(b)?b:new Uint8Array(b);for(r=0;r<n;r+=4)l=Tv[t.charCodeAt(r)],h=Tv[t.charCodeAt(r+1)],p=Tv[t.charCodeAt(r+2)],i=Tv[t.charCodeAt(r+3)],E[o++]=l<<2|h>>4,E[o++]=(h&15)<<4|p>>2,E[o++]=(p&3)<<6|i&63;return b},fBe=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},ABe=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},fg=5,QP=11,nT=2,pBe=QP-fg,ej=65536>>fg,mBe=1<<fg,rT=mBe-1,gBe=1024>>fg,yBe=ej+gBe,_Be=yBe,vBe=32,bBe=_Be+vBe,wBe=65536>>QP,xBe=1<<pBe,CBe=xBe-1,rU=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},EBe=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},BBe=function(t,e){var n=dBe(t),r=Array.isArray(n)?ABe(n):new Uint32Array(n),o=Array.isArray(n)?fBe(n):new Uint16Array(n),l=24,h=rU(o,l/2,r[4]/2),p=r[5]===2?rU(o,(l+r[4])/2):EBe(r,Math.ceil((l+r[4])/4));return new SBe(r[0],r[1],r[2],r[3],h,p)},SBe=function(){function t(e,n,r,o,l,h){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=o,this.index=l,this.data=h}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>fg],n=(n<<nT)+(e&rT),this.data[n];if(e<=65535)return n=this.index[ej+(e-55296>>fg)],n=(n<<nT)+(e&rT),this.data[n];if(e<this.highStart)return n=bBe-wBe+(e>>QP),n=this.index[n],n+=e>>fg&CBe,n=this.index[n],n=(n<<nT)+(e&rT),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),iU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",TBe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var mx=0;mx<iU.length;mx++)TBe[iU.charCodeAt(mx)]=mx;var IBe=1,iT=2,oT=3,oU=4,sU=5,PBe=7,aU=8,sT=9,aT=10,lU=11,cU=12,uU=13,hU=14,lT=15,LBe=function(t){for(var e=[],n=0,r=t.length;n<r;){var o=t.charCodeAt(n++);if(o>=55296&&o<=56319&&n<r){var l=t.charCodeAt(n++);(l&64512)===56320?e.push(((o&1023)<<10)+(l&1023)+65536):(e.push(o),n--)}else e.push(o)}return e},FBe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],o=-1,l="";++o<n;){var h=t[o];h<=65535?r.push(h):(h-=65536,r.push((h>>10)+55296,h%1024+56320)),(o+1===n||r.length>16384)&&(l+=String.fromCharCode.apply(String,r),r.length=0)}return l},RBe=BBe(hBe),bh="×",cT="÷",kBe=function(t){return RBe.get(t)},MBe=function(t,e,n){var r=n-2,o=e[r],l=e[n-1],h=e[n];if(l===iT&&h===oT)return bh;if(l===iT||l===oT||l===oU||h===iT||h===oT||h===oU)return cT;if(l===aU&&[aU,sT,lU,cU].indexOf(h)!==-1||(l===lU||l===sT)&&(h===sT||h===aT)||(l===cU||l===aT)&&h===aT||h===uU||h===sU||h===PBe||l===IBe)return bh;if(l===uU&&h===hU){for(;o===sU;)o=e[--r];if(o===hU)return bh}if(l===lT&&h===lT){for(var p=0;o===lT;)p++,o=e[--r];if(p%2===0)return bh}return cT},OBe=function(t){var e=LBe(t),n=e.length,r=0,o=0,l=e.map(kBe);return{next:function(){if(r>=n)return{done:!0,value:null};for(var h=bh;r<n&&(h=MBe(e,l,++r))===bh;);if(h!==bh||r===n){var p=FBe.apply(null,e.slice(o,r));return o=r,{value:p,done:!1}}return{done:!0,value:null}}}},DBe=function(t){for(var e=OBe(t),n=[],r;!(r=e.next()).done;)r.value&&n.push(r.value.slice());return n},UBe=function(t){var e=123;if(t.createRange){var n=t.createRange();if(n.getBoundingClientRect){var r=t.createElement("boundtest");r.style.height=e+"px",r.style.display="block",t.body.appendChild(r),n.selectNode(r);var o=n.getBoundingClientRect(),l=Math.round(o.height);if(t.body.removeChild(r),l===e)return!0}}return!1},NBe=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var n=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,o=lB(r.data).map(function(i){return Ea(i)}),l=0,h={},p=o.every(function(i,b){n.setStart(r,l),n.setEnd(r,l+i.length);var E=n.getBoundingClientRect();l+=i.length;var I=E.x>h.x||E.y>h.y;return h=E,b===0?!0:I});return t.body.removeChild(e),p},zBe=function(){return typeof new Image().crossOrigin<"u"},VBe=function(){return typeof new XMLHttpRequest().responseType=="string"},QBe=function(t){var e=new Image,n=t.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),n.toDataURL()}catch{return!1}return!0},dU=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},HBe=function(t){var e=t.createElement("canvas"),n=100;e.width=n,e.height=n;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var o=new Image,l=e.toDataURL();o.src=l;var h=y5(n,n,0,0,o);return r.fillStyle="red",r.fillRect(0,0,n,n),fU(h).then(function(p){r.drawImage(p,0,0);var i=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var b=t.createElement("div");return b.style.backgroundImage="url("+l+")",b.style.height=n+"px",dU(i)?fU(y5(n,n,0,0,b)):Promise.reject(!1)}).then(function(p){return r.drawImage(p,0,0),dU(r.getImageData(0,0,n,n).data)}).catch(function(){return!1})},y5=function(t,e,n,r,o){var l="http://www.w3.org/2000/svg",h=document.createElementNS(l,"svg"),p=document.createElementNS(l,"foreignObject");return h.setAttributeNS(null,"width",t.toString()),h.setAttributeNS(null,"height",e.toString()),p.setAttributeNS(null,"width","100%"),p.setAttributeNS(null,"height","100%"),p.setAttributeNS(null,"x",n.toString()),p.setAttributeNS(null,"y",r.toString()),p.setAttributeNS(null,"externalResourcesRequired","true"),h.appendChild(p),p.appendChild(o),h},fU=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},Fl={get SUPPORT_RANGE_BOUNDS(){var t=UBe(document);return Object.defineProperty(Fl,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=Fl.SUPPORT_RANGE_BOUNDS&&NBe(document);return Object.defineProperty(Fl,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=QBe(document);return Object.defineProperty(Fl,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?HBe(document):Promise.resolve(!1);return Object.defineProperty(Fl,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=zBe();return Object.defineProperty(Fl,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=VBe();return Object.defineProperty(Fl,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Fl,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Fl,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Zv=function(){function t(e,n){this.text=e,this.bounds=n}return t}(),jBe=function(t,e,n,r){var o=KBe(e,n),l=[],h=0;return o.forEach(function(p){if(n.textDecorationLine.length||p.trim().length>0)if(Fl.SUPPORT_RANGE_BOUNDS){var i=AU(r,h,p.length).getClientRects();if(i.length>1){var b=HP(p),E=0;b.forEach(function(O){l.push(new Zv(O,wA.fromDOMRectList(t,AU(r,E+h,O.length).getClientRects()))),E+=O.length})}else l.push(new Zv(p,wA.fromDOMRectList(t,i)))}else{var I=r.splitText(p.length);l.push(new Zv(p,$Be(t,r))),r=I}else Fl.SUPPORT_RANGE_BOUNDS||(r=r.splitText(p.length));h+=p.length}),l},$Be=function(t,e){var n=e.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var o=e.parentNode;if(o){o.replaceChild(r,e);var l=aB(t,r);return r.firstChild&&o.replaceChild(r.firstChild,r),l}}return wA.EMPTY},AU=function(t,e,n){var r=t.ownerDocument;if(!r)throw new Error("Node has no owner document");var o=r.createRange();return o.setStart(t,e),o.setEnd(t,e+n),o},HP=function(t){if(Fl.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(n){return n.segment})}return DBe(t)},GBe=function(t,e){if(Fl.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(t)).map(function(r){return r.segment})}return WBe(t,e)},KBe=function(t,e){return e.letterSpacing!==0?HP(t):GBe(t,e)},qBe=[32,160,4961,65792,65793,4153,4241],WBe=function(t,e){for(var n=wxe(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],o,l=function(){if(o.value){var h=o.value.slice(),p=lB(h),i="";p.forEach(function(b){qBe.indexOf(b)===-1?i+=Ea(b):(i.length&&r.push(i),r.push(Ea(b)),i="")}),i.length&&r.push(i)}};!(o=n.next()).done;)l();return r},XBe=function(){function t(e,n,r){this.text=ZBe(n.data,r.textTransform),this.textBounds=jBe(e,this.text,r,n)}return t}(),ZBe=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(YBe,JBe);case 2:return t.toUpperCase();default:return t}},YBe=/(^|\s|:|-|\(|\))([a-z])/g,JBe=function(t,e,n){return t.length>0?e+n.toUpperCase():t},tj=function(t){bd(e,t);function e(n,r){var o=t.call(this,n,r)||this;return o.src=r.currentSrc||r.src,o.intrinsicWidth=r.naturalWidth,o.intrinsicHeight=r.naturalHeight,o.context.cache.addImage(o.src),o}return e}(wf),nj=function(t){bd(e,t);function e(n,r){var o=t.call(this,n,r)||this;return o.canvas=r,o.intrinsicWidth=r.width,o.intrinsicHeight=r.height,o}return e}(wf),rj=function(t){bd(e,t);function e(n,r){var o=t.call(this,n,r)||this,l=new XMLSerializer,h=aB(n,r);return r.setAttribute("width",h.width+"px"),r.setAttribute("height",h.height+"px"),o.svg="data:image/svg+xml,"+encodeURIComponent(l.serializeToString(r)),o.intrinsicWidth=r.width.baseVal.value,o.intrinsicHeight=r.height.baseVal.value,o.context.cache.addImage(o.svg),o}return e}(wf),ij=function(t){bd(e,t);function e(n,r){var o=t.call(this,n,r)||this;return o.value=r.value,o}return e}(wf),_5=function(t){bd(e,t);function e(n,r){var o=t.call(this,n,r)||this;return o.start=r.start,o.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,o}return e}(wf),eSe=[{type:15,flags:0,unit:"px",number:3}],tSe=[{type:16,flags:0,number:50}],nSe=function(t){return t.width>t.height?new wA(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new wA(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},rSe=function(t){var e=t.type===iSe?new Array(t.value.length+1).join("•"):t.value;return e.length===0?t.placeholder||"":e},XC="checkbox",ZC="radio",iSe="password",pU=707406591,jP=function(t){bd(e,t);function e(n,r){var o=t.call(this,n,r)||this;switch(o.type=r.type.toLowerCase(),o.checked=r.checked,o.value=rSe(r),(o.type===XC||o.type===ZC)&&(o.styles.backgroundColor=3739148031,o.styles.borderTopColor=o.styles.borderRightColor=o.styles.borderBottomColor=o.styles.borderLeftColor=2779096575,o.styles.borderTopWidth=o.styles.borderRightWidth=o.styles.borderBottomWidth=o.styles.borderLeftWidth=1,o.styles.borderTopStyle=o.styles.borderRightStyle=o.styles.borderBottomStyle=o.styles.borderLeftStyle=1,o.styles.backgroundClip=[0],o.styles.backgroundOrigin=[0],o.bounds=nSe(o.bounds)),o.type){case XC:o.styles.borderTopRightRadius=o.styles.borderTopLeftRadius=o.styles.borderBottomRightRadius=o.styles.borderBottomLeftRadius=eSe;break;case ZC:o.styles.borderTopRightRadius=o.styles.borderTopLeftRadius=o.styles.borderBottomRightRadius=o.styles.borderBottomLeftRadius=tSe;break}return o}return e}(wf),oj=function(t){bd(e,t);function e(n,r){var o=t.call(this,n,r)||this,l=r.options[r.selectedIndex||0];return o.value=l&&l.text||"",o}return e}(wf),sj=function(t){bd(e,t);function e(n,r){var o=t.call(this,n,r)||this;return o.value=r.value,o}return e}(wf),aj=function(t){bd(e,t);function e(n,r){var o=t.call(this,n,r)||this;o.src=r.src,o.width=parseInt(r.width,10)||0,o.height=parseInt(r.height,10)||0,o.backgroundColor=o.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){o.tree=cj(n,r.contentWindow.document.documentElement);var l=r.contentWindow.document.documentElement?Wv(n,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):pA.TRANSPARENT,h=r.contentWindow.document.body?Wv(n,getComputedStyle(r.contentWindow.document.body).backgroundColor):pA.TRANSPARENT;o.backgroundColor=qp(l)?qp(h)?o.styles.backgroundColor:h:l}}catch{}return o}return e}(wf),oSe=["OL","UL","MENU"],eC=function(t,e,n,r){for(var o=e.firstChild,l=void 0;o;o=l)if(l=o.nextSibling,uj(o)&&o.data.trim().length>0)n.textNodes.push(new XBe(t,o,n.styles));else if(Ky(o))if(Aj(o)&&o.assignedNodes)o.assignedNodes().forEach(function(p){return eC(t,p,n,r)});else{var h=lj(t,o);h.styles.isVisible()&&(sSe(o,h,r)?h.flags|=4:aSe(h.styles)&&(h.flags|=2),oSe.indexOf(o.tagName)!==-1&&(h.flags|=8),n.elements.push(h),o.slot,o.shadowRoot?eC(t,o.shadowRoot,h,r):!YC(o)&&!hj(o)&&!JC(o)&&eC(t,o,h,r))}},lj=function(t,e){return b5(e)?new tj(t,e):dj(e)?new nj(t,e):hj(e)?new rj(t,e):lSe(e)?new ij(t,e):cSe(e)?new _5(t,e):uSe(e)?new jP(t,e):JC(e)?new oj(t,e):YC(e)?new sj(t,e):fj(e)?new aj(t,e):new wf(t,e)},cj=function(t,e){var n=lj(t,e);return n.flags|=4,eC(t,e,n,n),n},sSe=function(t,e,n){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||$P(t)&&n.styles.isTransparent()},aSe=function(t){return t.isPositioned()||t.isFloating()},uj=function(t){return t.nodeType===Node.TEXT_NODE},Ky=function(t){return t.nodeType===Node.ELEMENT_NODE},v5=function(t){return Ky(t)&&typeof t.style<"u"&&!tC(t)},tC=function(t){return typeof t.className=="object"},lSe=function(t){return t.tagName==="LI"},cSe=function(t){return t.tagName==="OL"},uSe=function(t){return t.tagName==="INPUT"},hSe=function(t){return t.tagName==="HTML"},hj=function(t){return t.tagName==="svg"},$P=function(t){return t.tagName==="BODY"},dj=function(t){return t.tagName==="CANVAS"},mU=function(t){return t.tagName==="VIDEO"},b5=function(t){return t.tagName==="IMG"},fj=function(t){return t.tagName==="IFRAME"},gU=function(t){return t.tagName==="STYLE"},dSe=function(t){return t.tagName==="SCRIPT"},YC=function(t){return t.tagName==="TEXTAREA"},JC=function(t){return t.tagName==="SELECT"},Aj=function(t){return t.tagName==="SLOT"},yU=function(t){return t.tagName.indexOf("-")>0},fSe=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var n=this.counters[e];return n&&n.length?n[n.length-1]:1},t.prototype.getCounterValues=function(e){var n=this.counters[e];return n||[]},t.prototype.pop=function(e){var n=this;e.forEach(function(r){return n.counters[r].pop()})},t.prototype.parse=function(e){var n=this,r=e.counterIncrement,o=e.counterReset,l=!0;r!==null&&r.forEach(function(p){var i=n.counters[p.counter];i&&p.increment!==0&&(l=!1,i.length||i.push(1),i[Math.max(0,i.length-1)]+=p.increment)});var h=[];return l&&o.forEach(function(p){var i=n.counters[p.counter];h.push(p.counter),i||(i=n.counters[p.counter]=[]),i.push(p.reset)}),h},t}(),_U={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},vU={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},ASe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},pSe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},Ey=function(t,e,n,r,o,l){return t<e||t>n?$1(t,o,l.length>0):r.integers.reduce(function(h,p,i){for(;t>=p;)t-=p,h+=r.values[i];return h},"")+l},pj=function(t,e,n,r){var o="";do n||t--,o=r(t)+o,t/=e;while(t*e>=e);return o},Ca=function(t,e,n,r,o){var l=n-e+1;return(t<0?"-":"")+(pj(Math.abs(t),l,r,function(h){return Ea(Math.floor(h%l)+e)})+o)},Hm=function(t,e,n){n===void 0&&(n=". ");var r=e.length;return pj(Math.abs(t),r,!1,function(o){return e[Math.floor(o%r)]})+n},zy=1,yp=2,_p=4,Iv=8,eA=function(t,e,n,r,o,l){if(t<-9999||t>9999)return $1(t,4,o.length>0);var h=Math.abs(t),p=o;if(h===0)return e[0]+p;for(var i=0;h>0&&i<=4;i++){var b=h%10;b===0&&nl(l,zy)&&p!==""?p=e[b]+p:b>1||b===1&&i===0||b===1&&i===1&&nl(l,yp)||b===1&&i===1&&nl(l,_p)&&t>100||b===1&&i>1&&nl(l,Iv)?p=e[b]+(i>0?n[i-1]:"")+p:b===1&&i>0&&(p=n[i-1]+p),h=Math.floor(h/10)}return(t<0?r:"")+p},bU="十百千萬",wU="拾佰仟萬",xU="マイナス",uT="마이너스",$1=function(t,e,n){var r=n?". ":"",o=n?"、":"",l=n?", ":"",h=n?" ":"";switch(e){case 0:return"•"+h;case 1:return"◦"+h;case 2:return"◾"+h;case 5:var p=Ca(t,48,57,!0,r);return p.length<4?"0"+p:p;case 4:return Hm(t,"〇一二三四五六七八九",o);case 6:return Ey(t,1,3999,_U,3,r).toLowerCase();case 7:return Ey(t,1,3999,_U,3,r);case 8:return Ca(t,945,969,!1,r);case 9:return Ca(t,97,122,!1,r);case 10:return Ca(t,65,90,!1,r);case 11:return Ca(t,1632,1641,!0,r);case 12:case 49:return Ey(t,1,9999,vU,3,r);case 35:return Ey(t,1,9999,vU,3,r).toLowerCase();case 13:return Ca(t,2534,2543,!0,r);case 14:case 30:return Ca(t,6112,6121,!0,r);case 15:return Hm(t,"子丑寅卯辰巳午未申酉戌亥",o);case 16:return Hm(t,"甲乙丙丁戊己庚辛壬癸",o);case 17:case 48:return eA(t,"零一二三四五六七八九",bU,"負",o,yp|_p|Iv);case 47:return eA(t,"零壹貳參肆伍陸柒捌玖",wU,"負",o,zy|yp|_p|Iv);case 42:return eA(t,"零一二三四五六七八九",bU,"负",o,yp|_p|Iv);case 41:return eA(t,"零壹贰叁肆伍陆柒捌玖",wU,"负",o,zy|yp|_p|Iv);case 26:return eA(t,"〇一二三四五六七八九","十百千万",xU,o,0);case 25:return eA(t,"零壱弐参四伍六七八九","拾百千万",xU,o,zy|yp|_p);case 31:return eA(t,"영일이삼사오육칠팔구","십백천만",uT,l,zy|yp|_p);case 33:return eA(t,"零一二三四五六七八九","十百千萬",uT,l,0);case 32:return eA(t,"零壹貳參四五六七八九","拾百千",uT,l,zy|yp|_p);case 18:return Ca(t,2406,2415,!0,r);case 20:return Ey(t,1,19999,pSe,3,r);case 21:return Ca(t,2790,2799,!0,r);case 22:return Ca(t,2662,2671,!0,r);case 22:return Ey(t,1,10999,ASe,3,r);case 23:return Hm(t,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return Hm(t,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return Ca(t,3302,3311,!0,r);case 28:return Hm(t,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",o);case 29:return Hm(t,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",o);case 34:return Ca(t,3792,3801,!0,r);case 37:return Ca(t,6160,6169,!0,r);case 38:return Ca(t,4160,4169,!0,r);case 39:return Ca(t,2918,2927,!0,r);case 40:return Ca(t,1776,1785,!0,r);case 43:return Ca(t,3046,3055,!0,r);case 44:return Ca(t,3174,3183,!0,r);case 45:return Ca(t,3664,3673,!0,r);case 46:return Ca(t,3872,3881,!0,r);case 3:default:return Ca(t,48,57,!0,r)}},mj="data-html2canvas-ignore",CU=function(){function t(e,n,r){if(this.context=e,this.options=r,this.scrolledElements=[],this.referenceElement=n,this.counters=new fSe,this.quoteDepth=0,!n.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(n.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,n){var r=this,o=mSe(e,n);if(!o.contentWindow)return Promise.reject("Unable to find iframe window");var l=e.defaultView.pageXOffset,h=e.defaultView.pageYOffset,p=o.contentWindow,i=p.document,b=_Se(o).then(function(){return Dc(r,void 0,void 0,function(){var E,I;return ac(this,function(O){switch(O.label){case 0:return this.scrolledElements.forEach(xSe),p&&(p.scrollTo(n.left,n.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(p.scrollY!==n.top||p.scrollX!==n.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(p.scrollX-n.left,p.scrollY-n.top,0,0))),E=this.options.onclone,I=this.clonedReferenceElement,typeof I>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:i.fonts&&i.fonts.ready?[4,i.fonts.ready]:[3,2];case 1:O.sent(),O.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,ySe(i)]:[3,4];case 3:O.sent(),O.label=4;case 4:return typeof E=="function"?[2,Promise.resolve().then(function(){return E(i,I)}).then(function(){return o})]:[2,o]}})})});return i.open(),i.write(bSe(document.doctype)+"<html></html>"),wSe(this.referenceElement.ownerDocument,l,h),i.replaceChild(i.adoptNode(this.documentElement),i.documentElement),i.close(),b},t.prototype.createElementClone=function(e){if(g5(e,2))debugger;if(dj(e))return this.createCanvasClone(e);if(mU(e))return this.createVideoClone(e);if(gU(e))return this.createStyleClone(e);var n=e.cloneNode(!1);return b5(n)&&(b5(e)&&e.currentSrc&&e.currentSrc!==e.src&&(n.src=e.currentSrc,n.srcset=""),n.loading==="lazy"&&(n.loading="eager")),yU(n)?this.createCustomElementClone(n):n},t.prototype.createCustomElementClone=function(e){var n=document.createElement("html2canvascustomelement");return hT(e.style,n),n},t.prototype.createStyleClone=function(e){try{var n=e.sheet;if(n&&n.cssRules){var r=[].slice.call(n.cssRules,0).reduce(function(l,h){return h&&typeof h.cssText=="string"?l+h.cssText:l},""),o=e.cloneNode(!1);return o.textContent=r,o}}catch(l){if(this.context.logger.error("Unable to access cssRules property",l),l.name!=="SecurityError")throw l}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var n;if(this.options.inlineImages&&e.ownerDocument){var r=e.ownerDocument.createElement("img");try{return r.src=e.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var o=e.cloneNode(!1);try{o.width=e.width,o.height=e.height;var l=e.getContext("2d"),h=o.getContext("2d");if(h)if(!this.options.allowTaint&&l)h.putImageData(l.getImageData(0,0,e.width,e.height),0,0);else{var p=(n=e.getContext("webgl2"))!==null&&n!==void 0?n:e.getContext("webgl");if(p){var i=p.getContextAttributes();(i==null?void 0:i.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}h.drawImage(e,0,0)}return o}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return o},t.prototype.createVideoClone=function(e){var n=e.ownerDocument.createElement("canvas");n.width=e.offsetWidth,n.height=e.offsetHeight;var r=n.getContext("2d");try{return r&&(r.drawImage(e,0,0,n.width,n.height),this.options.allowTaint||r.getImageData(0,0,n.width,n.height)),n}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var o=e.ownerDocument.createElement("canvas");return o.width=e.offsetWidth,o.height=e.offsetHeight,o},t.prototype.appendChildNode=function(e,n,r){(!Ky(n)||!dSe(n)&&!n.hasAttribute(mj)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(n)))&&(!this.options.copyStyles||!Ky(n)||!gU(n))&&e.appendChild(this.cloneNode(n,r))},t.prototype.cloneChildNodes=function(e,n,r){for(var o=this,l=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;l;l=l.nextSibling)if(Ky(l)&&Aj(l)&&typeof l.assignedNodes=="function"){var h=l.assignedNodes();h.length&&h.forEach(function(p){return o.appendChildNode(n,p,r)})}else this.appendChildNode(n,l,r)},t.prototype.cloneNode=function(e,n){if(uj(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var r=e.ownerDocument.defaultView;if(r&&Ky(e)&&(v5(e)||tC(e))){var o=this.createElementClone(e);o.style.transitionProperty="none";var l=r.getComputedStyle(e),h=r.getComputedStyle(e,":before"),p=r.getComputedStyle(e,":after");this.referenceElement===e&&v5(o)&&(this.clonedReferenceElement=o),$P(o)&&BSe(o);var i=this.counters.parse(new tU(this.context,l)),b=this.resolvePseudoContent(e,o,h,Yv.BEFORE);yU(e)&&(n=!0),mU(e)||this.cloneChildNodes(e,o,n),b&&o.insertBefore(b,o.firstChild);var E=this.resolvePseudoContent(e,o,p,Yv.AFTER);return E&&o.appendChild(E),this.counters.pop(i),(l&&(this.options.copyStyles||tC(e))&&!fj(e)||n)&&hT(l,o),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([o,e.scrollLeft,e.scrollTop]),(YC(e)||JC(e))&&(YC(o)||JC(o))&&(o.value=e.value),o}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,n,r,o){var l=this;if(r){var h=r.content,p=n.ownerDocument;if(!(!p||!h||h==="none"||h==="-moz-alt-content"||r.display==="none")){this.counters.parse(new tU(this.context,r));var i=new lBe(this.context,r),b=p.createElement("html2canvaspseudoelement");hT(r,b),i.content.forEach(function(I){if(I.type===0)b.appendChild(p.createTextNode(I.value));else if(I.type===22){var O=p.createElement("img");O.src=I.value,O.style.opacity="1",b.appendChild(O)}else if(I.type===18){if(I.name==="attr"){var M=I.values.filter(As);M.length&&b.appendChild(p.createTextNode(e.getAttribute(M[0].value)||""))}else if(I.name==="counter"){var G=I.values.filter(O_),q=G[0],Z=G[1];if(q&&As(q)){var Y=l.counters.getCounterValue(q.value),te=Z&&As(Z)?m5.parse(l.context,Z.value):3;b.appendChild(p.createTextNode($1(Y,te,!1)))}}else if(I.name==="counters"){var be=I.values.filter(O_),q=be[0],Pe=be[1],Z=be[2];if(q&&As(q)){var Se=l.counters.getCounterValues(q.value),Ie=Z&&As(Z)?m5.parse(l.context,Z.value):3,Ae=Pe&&Pe.type===0?Pe.value:"",ne=Se.map(function(se){return $1(se,Ie,!1)}).join(Ae);b.appendChild(p.createTextNode(ne))}}}else if(I.type===20)switch(I.value){case"open-quote":b.appendChild(p.createTextNode(eU(i.quotes,l.quoteDepth++,!0)));break;case"close-quote":b.appendChild(p.createTextNode(eU(i.quotes,--l.quoteDepth,!1)));break;default:b.appendChild(p.createTextNode(I.value))}}),b.className=w5+" "+x5;var E=o===Yv.BEFORE?" "+w5:" "+x5;return tC(n)?n.className.baseValue+=E:n.className+=E,b}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),Yv;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Yv||(Yv={}));var mSe=function(t,e){var n=t.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=e.width.toString(),n.height=e.height.toString(),n.scrolling="no",n.setAttribute(mj,"true"),t.body.appendChild(n),n},gSe=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},ySe=function(t){return Promise.all([].slice.call(t.images,0).map(gSe))},_Se=function(t){return new Promise(function(e,n){var r=t.contentWindow;if(!r)return n("No window assigned for iframe");var o=r.document;r.onload=t.onload=function(){r.onload=t.onload=null;var l=setInterval(function(){o.body.childNodes.length>0&&o.readyState==="complete"&&(clearInterval(l),e(t))},50)}})},vSe=["all","d","content"],hT=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t.item(n);vSe.indexOf(r)===-1&&e.style.setProperty(r,t.getPropertyValue(r))}return e},bSe=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},wSe=function(t,e,n){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||n!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,n)},xSe=function(t){var e=t[0],n=t[1],r=t[2];e.scrollLeft=n,e.scrollTop=r},CSe=":before",ESe=":after",w5="___html2canvas___pseudoelement_before",x5="___html2canvas___pseudoelement_after",EU=`{
    content: "" !important;
    display: none !important;
}`,BSe=function(t){SSe(t,"."+w5+CSe+EU+`
         .`+x5+ESe+EU)},SSe=function(t,e){var n=t.ownerDocument;if(n){var r=n.createElement("style");r.textContent=e,t.appendChild(r)}},gj=function(){function t(){}return t.getOrigin=function(e){var n=t._link;return n?(n.href=e,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),TSe=function(){function t(e,n){this.context=e,this._options=n,this._cache={}}return t.prototype.addImage=function(e){var n=Promise.resolve();return this.has(e)||(fT(e)||FSe(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),n},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Dc(this,void 0,void 0,function(){var n,r,o,l,h=this;return ac(this,function(p){switch(p.label){case 0:return n=gj.isSameOrigin(e),r=!dT(e)&&this._options.useCORS===!0&&Fl.SUPPORT_CORS_IMAGES&&!n,o=!dT(e)&&!n&&!fT(e)&&typeof this._options.proxy=="string"&&Fl.SUPPORT_CORS_XHR&&!r,!n&&this._options.allowTaint===!1&&!dT(e)&&!fT(e)&&!o&&!r?[2]:(l=e,o?[4,this.proxy(l)]:[3,2]);case 1:l=p.sent(),p.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(i,b){var E=new Image;E.onload=function(){return i(E)},E.onerror=b,(RSe(l)||r)&&(E.crossOrigin="anonymous"),E.src=l,E.complete===!0&&setTimeout(function(){return i(E)},500),h._options.imageTimeout>0&&setTimeout(function(){return b("Timed out ("+h._options.imageTimeout+"ms) loading image")},h._options.imageTimeout)})];case 3:return[2,p.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var n=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var o=e.substring(0,256);return new Promise(function(l,h){var p=Fl.SUPPORT_RESPONSE_TYPE?"blob":"text",i=new XMLHttpRequest;i.onload=function(){if(i.status===200)if(p==="text")l(i.response);else{var I=new FileReader;I.addEventListener("load",function(){return l(I.result)},!1),I.addEventListener("error",function(O){return h(O)},!1),I.readAsDataURL(i.response)}else h("Failed to proxy resource "+o+" with status code "+i.status)},i.onerror=h;var b=r.indexOf("?")>-1?"&":"?";if(i.open("GET",""+r+b+"url="+encodeURIComponent(e)+"&responseType="+p),p!=="text"&&i instanceof XMLHttpRequest&&(i.responseType=p),n._options.imageTimeout){var E=n._options.imageTimeout;i.timeout=E,i.ontimeout=function(){return h("Timed out ("+E+"ms) proxying "+o)}}i.send()})},t}(),ISe=/^data:image\/svg\+xml/i,PSe=/^data:image\/.*;base64,/i,LSe=/^data:image\/.*/i,FSe=function(t){return Fl.SUPPORT_SVG_DRAWING||!kSe(t)},dT=function(t){return LSe.test(t)},RSe=function(t){return PSe.test(t)},fT=function(t){return t.substr(0,4)==="blob"},kSe=function(t){return t.substr(-3).toLowerCase()==="svg"||ISe.test(t)},kr=function(){function t(e,n){this.type=0,this.x=e,this.y=n}return t.prototype.add=function(e,n){return new t(this.x+e,this.y+n)},t}(),By=function(t,e,n){return new kr(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)},gx=function(){function t(e,n,r,o){this.type=1,this.start=e,this.startControl=n,this.endControl=r,this.end=o}return t.prototype.subdivide=function(e,n){var r=By(this.start,this.startControl,e),o=By(this.startControl,this.endControl,e),l=By(this.endControl,this.end,e),h=By(r,o,e),p=By(o,l,e),i=By(h,p,e);return n?new t(this.start,r,h,i):new t(i,p,l,this.end)},t.prototype.add=function(e,n){return new t(this.start.add(e,n),this.startControl.add(e,n),this.endControl.add(e,n),this.end.add(e,n))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),xh=function(t){return t.type===1},MSe=function(){function t(e){var n=e.styles,r=e.bounds,o=Sv(n.borderTopLeftRadius,r.width,r.height),l=o[0],h=o[1],p=Sv(n.borderTopRightRadius,r.width,r.height),i=p[0],b=p[1],E=Sv(n.borderBottomRightRadius,r.width,r.height),I=E[0],O=E[1],M=Sv(n.borderBottomLeftRadius,r.width,r.height),G=M[0],q=M[1],Z=[];Z.push((l+i)/r.width),Z.push((G+I)/r.width),Z.push((h+q)/r.height),Z.push((b+O)/r.height);var Y=Math.max.apply(Math,Z);Y>1&&(l/=Y,h/=Y,i/=Y,b/=Y,I/=Y,O/=Y,G/=Y,q/=Y);var te=r.width-i,be=r.height-O,Pe=r.width-I,Se=r.height-q,Ie=n.borderTopWidth,Ae=n.borderRightWidth,ne=n.borderBottomWidth,ue=n.borderLeftWidth,ye=Ts(n.paddingTop,e.bounds.width),se=Ts(n.paddingRight,e.bounds.width),le=Ts(n.paddingBottom,e.bounds.width),ge=Ts(n.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=l>0||h>0?js(r.left+ue/3,r.top+Ie/3,l-ue/3,h-Ie/3,ts.TOP_LEFT):new kr(r.left+ue/3,r.top+Ie/3),this.topRightBorderDoubleOuterBox=l>0||h>0?js(r.left+te,r.top+Ie/3,i-Ae/3,b-Ie/3,ts.TOP_RIGHT):new kr(r.left+r.width-Ae/3,r.top+Ie/3),this.bottomRightBorderDoubleOuterBox=I>0||O>0?js(r.left+Pe,r.top+be,I-Ae/3,O-ne/3,ts.BOTTOM_RIGHT):new kr(r.left+r.width-Ae/3,r.top+r.height-ne/3),this.bottomLeftBorderDoubleOuterBox=G>0||q>0?js(r.left+ue/3,r.top+Se,G-ue/3,q-ne/3,ts.BOTTOM_LEFT):new kr(r.left+ue/3,r.top+r.height-ne/3),this.topLeftBorderDoubleInnerBox=l>0||h>0?js(r.left+ue*2/3,r.top+Ie*2/3,l-ue*2/3,h-Ie*2/3,ts.TOP_LEFT):new kr(r.left+ue*2/3,r.top+Ie*2/3),this.topRightBorderDoubleInnerBox=l>0||h>0?js(r.left+te,r.top+Ie*2/3,i-Ae*2/3,b-Ie*2/3,ts.TOP_RIGHT):new kr(r.left+r.width-Ae*2/3,r.top+Ie*2/3),this.bottomRightBorderDoubleInnerBox=I>0||O>0?js(r.left+Pe,r.top+be,I-Ae*2/3,O-ne*2/3,ts.BOTTOM_RIGHT):new kr(r.left+r.width-Ae*2/3,r.top+r.height-ne*2/3),this.bottomLeftBorderDoubleInnerBox=G>0||q>0?js(r.left+ue*2/3,r.top+Se,G-ue*2/3,q-ne*2/3,ts.BOTTOM_LEFT):new kr(r.left+ue*2/3,r.top+r.height-ne*2/3),this.topLeftBorderStroke=l>0||h>0?js(r.left+ue/2,r.top+Ie/2,l-ue/2,h-Ie/2,ts.TOP_LEFT):new kr(r.left+ue/2,r.top+Ie/2),this.topRightBorderStroke=l>0||h>0?js(r.left+te,r.top+Ie/2,i-Ae/2,b-Ie/2,ts.TOP_RIGHT):new kr(r.left+r.width-Ae/2,r.top+Ie/2),this.bottomRightBorderStroke=I>0||O>0?js(r.left+Pe,r.top+be,I-Ae/2,O-ne/2,ts.BOTTOM_RIGHT):new kr(r.left+r.width-Ae/2,r.top+r.height-ne/2),this.bottomLeftBorderStroke=G>0||q>0?js(r.left+ue/2,r.top+Se,G-ue/2,q-ne/2,ts.BOTTOM_LEFT):new kr(r.left+ue/2,r.top+r.height-ne/2),this.topLeftBorderBox=l>0||h>0?js(r.left,r.top,l,h,ts.TOP_LEFT):new kr(r.left,r.top),this.topRightBorderBox=i>0||b>0?js(r.left+te,r.top,i,b,ts.TOP_RIGHT):new kr(r.left+r.width,r.top),this.bottomRightBorderBox=I>0||O>0?js(r.left+Pe,r.top+be,I,O,ts.BOTTOM_RIGHT):new kr(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=G>0||q>0?js(r.left,r.top+Se,G,q,ts.BOTTOM_LEFT):new kr(r.left,r.top+r.height),this.topLeftPaddingBox=l>0||h>0?js(r.left+ue,r.top+Ie,Math.max(0,l-ue),Math.max(0,h-Ie),ts.TOP_LEFT):new kr(r.left+ue,r.top+Ie),this.topRightPaddingBox=i>0||b>0?js(r.left+Math.min(te,r.width-Ae),r.top+Ie,te>r.width+Ae?0:Math.max(0,i-Ae),Math.max(0,b-Ie),ts.TOP_RIGHT):new kr(r.left+r.width-Ae,r.top+Ie),this.bottomRightPaddingBox=I>0||O>0?js(r.left+Math.min(Pe,r.width-ue),r.top+Math.min(be,r.height-ne),Math.max(0,I-Ae),Math.max(0,O-ne),ts.BOTTOM_RIGHT):new kr(r.left+r.width-Ae,r.top+r.height-ne),this.bottomLeftPaddingBox=G>0||q>0?js(r.left+ue,r.top+Math.min(Se,r.height-ne),Math.max(0,G-ue),Math.max(0,q-ne),ts.BOTTOM_LEFT):new kr(r.left+ue,r.top+r.height-ne),this.topLeftContentBox=l>0||h>0?js(r.left+ue+ge,r.top+Ie+ye,Math.max(0,l-(ue+ge)),Math.max(0,h-(Ie+ye)),ts.TOP_LEFT):new kr(r.left+ue+ge,r.top+Ie+ye),this.topRightContentBox=i>0||b>0?js(r.left+Math.min(te,r.width+ue+ge),r.top+Ie+ye,te>r.width+ue+ge?0:i-ue+ge,b-(Ie+ye),ts.TOP_RIGHT):new kr(r.left+r.width-(Ae+se),r.top+Ie+ye),this.bottomRightContentBox=I>0||O>0?js(r.left+Math.min(Pe,r.width-(ue+ge)),r.top+Math.min(be,r.height+Ie+ye),Math.max(0,I-(Ae+se)),O-(ne+le),ts.BOTTOM_RIGHT):new kr(r.left+r.width-(Ae+se),r.top+r.height-(ne+le)),this.bottomLeftContentBox=G>0||q>0?js(r.left+ue+ge,r.top+Se,Math.max(0,G-(ue+ge)),q-(ne+le),ts.BOTTOM_LEFT):new kr(r.left+ue+ge,r.top+r.height-(ne+le))}return t}(),ts;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(ts||(ts={}));var js=function(t,e,n,r,o){var l=4*((Math.sqrt(2)-1)/3),h=n*l,p=r*l,i=t+n,b=e+r;switch(o){case ts.TOP_LEFT:return new gx(new kr(t,b),new kr(t,b-p),new kr(i-h,e),new kr(i,e));case ts.TOP_RIGHT:return new gx(new kr(t,e),new kr(t+h,e),new kr(i,b-p),new kr(i,b));case ts.BOTTOM_RIGHT:return new gx(new kr(i,e),new kr(i,e+p),new kr(t+h,b),new kr(t,b));case ts.BOTTOM_LEFT:default:return new gx(new kr(i,b),new kr(i-h,b),new kr(t,e+p),new kr(t,e))}},eE=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},OSe=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},tE=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},DSe=function(){function t(e,n,r){this.offsetX=e,this.offsetY=n,this.matrix=r,this.type=0,this.target=6}return t}(),yx=function(){function t(e,n){this.path=e,this.target=n,this.type=1}return t}(),USe=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),NSe=function(t){return t.type===0},yj=function(t){return t.type===1},zSe=function(t){return t.type===2},BU=function(t,e){return t.length===e.length?t.some(function(n,r){return n===e[r]}):!1},VSe=function(t,e,n,r,o){return t.map(function(l,h){switch(h){case 0:return l.add(e,n);case 1:return l.add(e+r,n);case 2:return l.add(e+r,n+o);case 3:return l.add(e,n+o)}return l})},_j=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),vj=function(){function t(e,n){if(this.container=e,this.parent=n,this.effects=[],this.curves=new MSe(this.container),this.container.styles.opacity<1&&this.effects.push(new USe(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,o=this.container.bounds.top+this.container.styles.transformOrigin[1].number,l=this.container.styles.transform;this.effects.push(new DSe(r,o,l))}if(this.container.styles.overflowX!==0){var h=eE(this.curves),p=tE(this.curves);BU(h,p)?this.effects.push(new yx(h,6)):(this.effects.push(new yx(h,2)),this.effects.push(new yx(p,4)))}}return t.prototype.getEffects=function(e){for(var n=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,o=this.effects.slice(0);r;){var l=r.effects.filter(function(i){return!yj(i)});if(n||r.container.styles.position!==0||!r.parent){if(o.unshift.apply(o,l),n=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var h=eE(r.curves),p=tE(r.curves);BU(h,p)||o.unshift(new yx(p,6))}}else o.unshift.apply(o,l);r=r.parent}return o.filter(function(i){return nl(i.target,e)})},t}(),C5=function(t,e,n,r){t.container.elements.forEach(function(o){var l=nl(o.flags,4),h=nl(o.flags,2),p=new vj(o,t);nl(o.styles.display,2048)&&r.push(p);var i=nl(o.flags,8)?[]:r;if(l||h){var b=l||o.styles.isPositioned()?n:e,E=new _j(p);if(o.styles.isPositioned()||o.styles.opacity<1||o.styles.isTransformed()){var I=o.styles.zIndex.order;if(I<0){var O=0;b.negativeZIndex.some(function(G,q){return I>G.element.container.styles.zIndex.order?(O=q,!1):O>0}),b.negativeZIndex.splice(O,0,E)}else if(I>0){var M=0;b.positiveZIndex.some(function(G,q){return I>=G.element.container.styles.zIndex.order?(M=q+1,!1):M>0}),b.positiveZIndex.splice(M,0,E)}else b.zeroOrAutoZIndexOrTransformedOrOpacity.push(E)}else o.styles.isFloating()?b.nonPositionedFloats.push(E):b.nonPositionedInlineLevel.push(E);C5(p,E,l?E:n,i)}else o.styles.isInlineLevel()?e.inlineLevel.push(p):e.nonInlineLevel.push(p),C5(p,e,n,i);nl(o.flags,8)&&bj(o,i)})},bj=function(t,e){for(var n=t instanceof _5?t.start:1,r=t instanceof _5?t.reversed:!1,o=0;o<e.length;o++){var l=e[o];l.container instanceof ij&&typeof l.container.value=="number"&&l.container.value!==0&&(n=l.container.value),l.listValue=$1(n,l.container.styles.listStyleType,!0),n+=r?-1:1}},QSe=function(t){var e=new vj(t,null),n=new _j(e),r=[];return C5(e,n,n,r),bj(e.container,r),n},SU=function(t,e){switch(e){case 0:return Ih(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Ih(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Ih(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Ih(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},HSe=function(t,e){switch(e){case 0:return Ih(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Ih(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Ih(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Ih(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},jSe=function(t,e){switch(e){case 0:return Ih(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Ih(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Ih(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Ih(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},$Se=function(t,e){switch(e){case 0:return _x(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return _x(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return _x(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return _x(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},_x=function(t,e){var n=[];return xh(t)?n.push(t.subdivide(.5,!1)):n.push(t),xh(e)?n.push(e.subdivide(.5,!0)):n.push(e),n},Ih=function(t,e,n,r){var o=[];return xh(t)?o.push(t.subdivide(.5,!1)):o.push(t),xh(n)?o.push(n.subdivide(.5,!0)):o.push(n),xh(r)?o.push(r.subdivide(.5,!0).reverse()):o.push(r),xh(e)?o.push(e.subdivide(.5,!1).reverse()):o.push(e),o},wj=function(t){var e=t.bounds,n=t.styles;return e.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},nE=function(t){var e=t.styles,n=t.bounds,r=Ts(e.paddingLeft,n.width),o=Ts(e.paddingRight,n.width),l=Ts(e.paddingTop,n.width),h=Ts(e.paddingBottom,n.width);return n.add(r+e.borderLeftWidth,l+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+o),-(e.borderTopWidth+e.borderBottomWidth+l+h))},GSe=function(t,e){return t===0?e.bounds:t===2?nE(e):wj(e)},KSe=function(t,e){return t===0?e.bounds:t===2?nE(e):wj(e)},AT=function(t,e,n){var r=GSe(Vy(t.styles.backgroundOrigin,e),t),o=KSe(Vy(t.styles.backgroundClip,e),t),l=qSe(Vy(t.styles.backgroundSize,e),n,r),h=l[0],p=l[1],i=Sv(Vy(t.styles.backgroundPosition,e),r.width-h,r.height-p),b=WSe(Vy(t.styles.backgroundRepeat,e),i,l,r,o),E=Math.round(r.left+i[0]),I=Math.round(r.top+i[1]);return[b,E,I,h,p]},Sy=function(t){return As(t)&&t.value===l_.AUTO},vx=function(t){return typeof t=="number"},qSe=function(t,e,n){var r=e[0],o=e[1],l=e[2],h=t[0],p=t[1];if(!h)return[0,0];if(Qa(h)&&p&&Qa(p))return[Ts(h,n.width),Ts(p,n.height)];var i=vx(l);if(As(h)&&(h.value===l_.CONTAIN||h.value===l_.COVER)){if(vx(l)){var b=n.width/n.height;return b<l!=(h.value===l_.COVER)?[n.width,n.width/l]:[n.height*l,n.height]}return[n.width,n.height]}var E=vx(r),I=vx(o),O=E||I;if(Sy(h)&&(!p||Sy(p))){if(E&&I)return[r,o];if(!i&&!O)return[n.width,n.height];if(O&&i){var M=E?r:o*l,G=I?o:r/l;return[M,G]}var q=E?r:n.width,Z=I?o:n.height;return[q,Z]}if(i){var Y=0,te=0;return Qa(h)?Y=Ts(h,n.width):Qa(p)&&(te=Ts(p,n.height)),Sy(h)?Y=te*l:(!p||Sy(p))&&(te=Y/l),[Y,te]}var be=null,Pe=null;if(Qa(h)?be=Ts(h,n.width):p&&Qa(p)&&(Pe=Ts(p,n.height)),be!==null&&(!p||Sy(p))&&(Pe=E&&I?be/r*o:n.height),Pe!==null&&Sy(h)&&(be=E&&I?Pe/o*r:n.width),be!==null&&Pe!==null)return[be,Pe];throw new Error("Unable to calculate background-size for element")},Vy=function(t,e){var n=t[e];return typeof n>"u"?t[0]:n},WSe=function(t,e,n,r,o){var l=e[0],h=e[1],p=n[0],i=n[1];switch(t){case 2:return[new kr(Math.round(r.left),Math.round(r.top+h)),new kr(Math.round(r.left+r.width),Math.round(r.top+h)),new kr(Math.round(r.left+r.width),Math.round(i+r.top+h)),new kr(Math.round(r.left),Math.round(i+r.top+h))];case 3:return[new kr(Math.round(r.left+l),Math.round(r.top)),new kr(Math.round(r.left+l+p),Math.round(r.top)),new kr(Math.round(r.left+l+p),Math.round(r.height+r.top)),new kr(Math.round(r.left+l),Math.round(r.height+r.top))];case 1:return[new kr(Math.round(r.left+l),Math.round(r.top+h)),new kr(Math.round(r.left+l+p),Math.round(r.top+h)),new kr(Math.round(r.left+l+p),Math.round(r.top+h+i)),new kr(Math.round(r.left+l),Math.round(r.top+h+i))];default:return[new kr(Math.round(o.left),Math.round(o.top)),new kr(Math.round(o.left+o.width),Math.round(o.top)),new kr(Math.round(o.left+o.width),Math.round(o.height+o.top)),new kr(Math.round(o.left),Math.round(o.height+o.top))]}},XSe="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",TU="Hidden Text",ZSe=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,n){var r=this._document.createElement("div"),o=this._document.createElement("img"),l=this._document.createElement("span"),h=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=n,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",h.appendChild(r),o.src=XSe,o.width=1,o.height=1,o.style.margin="0",o.style.padding="0",o.style.verticalAlign="baseline",l.style.fontFamily=e,l.style.fontSize=n,l.style.margin="0",l.style.padding="0",l.appendChild(this._document.createTextNode(TU)),r.appendChild(l),r.appendChild(o);var p=o.offsetTop-l.offsetTop+2;r.removeChild(l),r.appendChild(this._document.createTextNode(TU)),r.style.lineHeight="normal",o.style.verticalAlign="super";var i=o.offsetTop-r.offsetTop+2;return h.removeChild(r),{baseline:p,middle:i}},t.prototype.getMetrics=function(e,n){var r=e+" "+n;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,n)),this._data[r]},t}(),xj=function(){function t(e,n){this.context=e,this.options=n}return t}(),YSe=1e4,JSe=function(t){bd(e,t);function e(n,r){var o=t.call(this,n,r)||this;return o._activeEffects=[],o.canvas=r.canvas?r.canvas:document.createElement("canvas"),o.ctx=o.canvas.getContext("2d"),r.canvas||(o.canvas.width=Math.floor(r.width*r.scale),o.canvas.height=Math.floor(r.height*r.scale),o.canvas.style.width=r.width+"px",o.canvas.style.height=r.height+"px"),o.fontMetrics=new ZSe(document),o.ctx.scale(o.options.scale,o.options.scale),o.ctx.translate(-r.x,-r.y),o.ctx.textBaseline="bottom",o._activeEffects=[],o.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),o}return e.prototype.applyEffects=function(n){for(var r=this;this._activeEffects.length;)this.popEffect();n.forEach(function(o){return r.applyEffect(o)})},e.prototype.applyEffect=function(n){this.ctx.save(),zSe(n)&&(this.ctx.globalAlpha=n.opacity),NSe(n)&&(this.ctx.translate(n.offsetX,n.offsetY),this.ctx.transform(n.matrix[0],n.matrix[1],n.matrix[2],n.matrix[3],n.matrix[4],n.matrix[5]),this.ctx.translate(-n.offsetX,-n.offsetY)),yj(n)&&(this.path(n.path),this.ctx.clip()),this._activeEffects.push(n)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(n){return Dc(this,void 0,void 0,function(){var r;return ac(this,function(o){switch(o.label){case 0:return r=n.element.container.styles,r.isVisible()?[4,this.renderStackContent(n)]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(n){return Dc(this,void 0,void 0,function(){return ac(this,function(r){switch(r.label){case 0:if(nl(n.container.flags,16))debugger;return n.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(n)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(n)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(n,r,o){var l=this;if(r===0)this.ctx.fillText(n.text,n.bounds.left,n.bounds.top+o);else{var h=HP(n.text);h.reduce(function(p,i){return l.ctx.fillText(i,p,n.bounds.top+o),p+l.ctx.measureText(i).width},n.bounds.left)}},e.prototype.createFontStyle=function(n){var r=n.fontVariant.filter(function(h){return h==="normal"||h==="small-caps"}).join(""),o=i2e(n.fontFamily).join(", "),l=vb(n.fontSize)?""+n.fontSize.number+n.fontSize.unit:n.fontSize.number+"px";return[[n.fontStyle,r,n.fontWeight,l,o].join(" "),o,l]},e.prototype.renderTextNode=function(n,r){return Dc(this,void 0,void 0,function(){var o,l,h,p,i,b,E,I,O=this;return ac(this,function(M){return o=this.createFontStyle(r),l=o[0],h=o[1],p=o[2],this.ctx.font=l,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",i=this.fontMetrics.getMetrics(h,p),b=i.baseline,E=i.middle,I=r.paintOrder,n.textBounds.forEach(function(G){I.forEach(function(q){switch(q){case 0:O.ctx.fillStyle=Al(r.color),O.renderTextWithLetterSpacing(G,r.letterSpacing,b);var Z=r.textShadow;Z.length&&G.text.trim().length&&(Z.slice(0).reverse().forEach(function(Y){O.ctx.shadowColor=Al(Y.color),O.ctx.shadowOffsetX=Y.offsetX.number*O.options.scale,O.ctx.shadowOffsetY=Y.offsetY.number*O.options.scale,O.ctx.shadowBlur=Y.blur.number,O.renderTextWithLetterSpacing(G,r.letterSpacing,b)}),O.ctx.shadowColor="",O.ctx.shadowOffsetX=0,O.ctx.shadowOffsetY=0,O.ctx.shadowBlur=0),r.textDecorationLine.length&&(O.ctx.fillStyle=Al(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(Y){switch(Y){case 1:O.ctx.fillRect(G.bounds.left,Math.round(G.bounds.top+b),G.bounds.width,1);break;case 2:O.ctx.fillRect(G.bounds.left,Math.round(G.bounds.top),G.bounds.width,1);break;case 3:O.ctx.fillRect(G.bounds.left,Math.ceil(G.bounds.top+E),G.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&G.text.trim().length&&(O.ctx.strokeStyle=Al(r.webkitTextStrokeColor),O.ctx.lineWidth=r.webkitTextStrokeWidth,O.ctx.lineJoin=window.chrome?"miter":"round",O.ctx.strokeText(G.text,G.bounds.left,G.bounds.top+b)),O.ctx.strokeStyle="",O.ctx.lineWidth=0,O.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(n,r,o){if(o&&n.intrinsicWidth>0&&n.intrinsicHeight>0){var l=nE(n),h=tE(r);this.path(h),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(o,0,0,n.intrinsicWidth,n.intrinsicHeight,l.left,l.top,l.width,l.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(n){return Dc(this,void 0,void 0,function(){var r,o,l,h,p,i,te,te,b,E,I,O,Pe,M,G,Se,q,Z,Y,te,be,Pe,Se;return ac(this,function(Ie){switch(Ie.label){case 0:this.applyEffects(n.getEffects(4)),r=n.container,o=n.curves,l=r.styles,h=0,p=r.textNodes,Ie.label=1;case 1:return h<p.length?(i=p[h],[4,this.renderTextNode(i,l)]):[3,4];case 2:Ie.sent(),Ie.label=3;case 3:return h++,[3,1];case 4:if(!(r instanceof tj))return[3,8];Ie.label=5;case 5:return Ie.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return te=Ie.sent(),this.renderReplacedElement(r,o,te),[3,8];case 7:return Ie.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof nj&&this.renderReplacedElement(r,o,r.canvas),!(r instanceof rj))return[3,12];Ie.label=9;case 9:return Ie.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return te=Ie.sent(),this.renderReplacedElement(r,o,te),[3,12];case 11:return Ie.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof aj&&r.tree?(b=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,b.render(r.tree)]):[3,14];case 13:E=Ie.sent(),r.width&&r.height&&this.ctx.drawImage(E,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),Ie.label=14;case 14:if(r instanceof jP&&(I=Math.min(r.bounds.width,r.bounds.height),r.type===XC?r.checked&&(this.ctx.save(),this.path([new kr(r.bounds.left+I*.39363,r.bounds.top+I*.79),new kr(r.bounds.left+I*.16,r.bounds.top+I*.5549),new kr(r.bounds.left+I*.27347,r.bounds.top+I*.44071),new kr(r.bounds.left+I*.39694,r.bounds.top+I*.5649),new kr(r.bounds.left+I*.72983,r.bounds.top+I*.23),new kr(r.bounds.left+I*.84,r.bounds.top+I*.34085),new kr(r.bounds.left+I*.39363,r.bounds.top+I*.79)]),this.ctx.fillStyle=Al(pU),this.ctx.fill(),this.ctx.restore()):r.type===ZC&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+I/2,r.bounds.top+I/2,I/4,0,Math.PI*2,!0),this.ctx.fillStyle=Al(pU),this.ctx.fill(),this.ctx.restore())),e2e(r)&&r.value.length){switch(O=this.createFontStyle(l),Pe=O[0],M=O[1],G=this.fontMetrics.getMetrics(Pe,M).baseline,this.ctx.font=Pe,this.ctx.fillStyle=Al(l.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=n2e(r.styles.textAlign),Se=nE(r),q=0,r.styles.textAlign){case 1:q+=Se.width/2;break;case 2:q+=Se.width;break}Z=Se.add(q,0,0,-Se.height/2+1),this.ctx.save(),this.path([new kr(Se.left,Se.top),new kr(Se.left+Se.width,Se.top),new kr(Se.left+Se.width,Se.top+Se.height),new kr(Se.left,Se.top+Se.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Zv(r.value,Z),l.letterSpacing,G),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!nl(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(Y=r.styles.listStyleImage,Y.type!==0)return[3,18];te=void 0,be=Y.url,Ie.label=15;case 15:return Ie.trys.push([15,17,,18]),[4,this.context.cache.match(be)];case 16:return te=Ie.sent(),this.ctx.drawImage(te,r.bounds.left-(te.width+10),r.bounds.top),[3,18];case 17:return Ie.sent(),this.context.logger.error("Error loading list-style-image "+be),[3,18];case 18:return[3,20];case 19:n.listValue&&r.styles.listStyleType!==-1&&(Pe=this.createFontStyle(l)[0],this.ctx.font=Pe,this.ctx.fillStyle=Al(l.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",Se=new wA(r.bounds.left,r.bounds.top+Ts(r.styles.paddingTop,r.bounds.width),r.bounds.width,Y3(l.lineHeight,l.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Zv(n.listValue,Se),l.letterSpacing,Y3(l.lineHeight,l.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),Ie.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(n){return Dc(this,void 0,void 0,function(){var r,o,Y,l,h,Y,p,i,Y,b,E,Y,I,O,Y,M,G,Y,q,Z,Y;return ac(this,function(te){switch(te.label){case 0:if(nl(n.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(n.element)];case 1:te.sent(),r=0,o=n.negativeZIndex,te.label=2;case 2:return r<o.length?(Y=o[r],[4,this.renderStack(Y)]):[3,5];case 3:te.sent(),te.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(n.element)];case 6:te.sent(),l=0,h=n.nonInlineLevel,te.label=7;case 7:return l<h.length?(Y=h[l],[4,this.renderNode(Y)]):[3,10];case 8:te.sent(),te.label=9;case 9:return l++,[3,7];case 10:p=0,i=n.nonPositionedFloats,te.label=11;case 11:return p<i.length?(Y=i[p],[4,this.renderStack(Y)]):[3,14];case 12:te.sent(),te.label=13;case 13:return p++,[3,11];case 14:b=0,E=n.nonPositionedInlineLevel,te.label=15;case 15:return b<E.length?(Y=E[b],[4,this.renderStack(Y)]):[3,18];case 16:te.sent(),te.label=17;case 17:return b++,[3,15];case 18:I=0,O=n.inlineLevel,te.label=19;case 19:return I<O.length?(Y=O[I],[4,this.renderNode(Y)]):[3,22];case 20:te.sent(),te.label=21;case 21:return I++,[3,19];case 22:M=0,G=n.zeroOrAutoZIndexOrTransformedOrOpacity,te.label=23;case 23:return M<G.length?(Y=G[M],[4,this.renderStack(Y)]):[3,26];case 24:te.sent(),te.label=25;case 25:return M++,[3,23];case 26:q=0,Z=n.positiveZIndex,te.label=27;case 27:return q<Z.length?(Y=Z[q],[4,this.renderStack(Y)]):[3,30];case 28:te.sent(),te.label=29;case 29:return q++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(n){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(n.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(n){this.ctx.beginPath(),this.formatPath(n),this.ctx.closePath()},e.prototype.formatPath=function(n){var r=this;n.forEach(function(o,l){var h=xh(o)?o.start:o;l===0?r.ctx.moveTo(h.x,h.y):r.ctx.lineTo(h.x,h.y),xh(o)&&r.ctx.bezierCurveTo(o.startControl.x,o.startControl.y,o.endControl.x,o.endControl.y,o.end.x,o.end.y)})},e.prototype.renderRepeat=function(n,r,o,l){this.path(n),this.ctx.fillStyle=r,this.ctx.translate(o,l),this.ctx.fill(),this.ctx.translate(-o,-l)},e.prototype.resizeImage=function(n,r,o){var l;if(n.width===r&&n.height===o)return n;var h=(l=this.canvas.ownerDocument)!==null&&l!==void 0?l:document,p=h.createElement("canvas");p.width=Math.max(1,r),p.height=Math.max(1,o);var i=p.getContext("2d");return i.drawImage(n,0,0,n.width,n.height,0,0,r,o),p},e.prototype.renderBackgroundImage=function(n){return Dc(this,void 0,void 0,function(){var r,o,l,h,p,i;return ac(this,function(b){switch(b.label){case 0:r=n.styles.backgroundImage.length-1,o=function(E){var I,O,M,ye,gt,Tt,ge,lt,ne,G,ye,gt,Tt,ge,lt,q,Z,Y,te,be,Pe,Se,Ie,Ae,ne,ue,ye,se,le,ge,lt,Ot,gt,Tt,Mt,on,Ut,In,Ee,$e,We,vt;return ac(this,function(_t){switch(_t.label){case 0:if(E.type!==0)return[3,5];I=void 0,O=E.url,_t.label=1;case 1:return _t.trys.push([1,3,,4]),[4,l.context.cache.match(O)];case 2:return I=_t.sent(),[3,4];case 3:return _t.sent(),l.context.logger.error("Error loading background-image "+O),[3,4];case 4:return I&&(M=AT(n,r,[I.width,I.height,I.width/I.height]),ye=M[0],gt=M[1],Tt=M[2],ge=M[3],lt=M[4],ne=l.ctx.createPattern(l.resizeImage(I,ge,lt),"repeat"),l.renderRepeat(ye,ne,gt,Tt)),[3,6];case 5:NCe(E)?(G=AT(n,r,[null,null,null]),ye=G[0],gt=G[1],Tt=G[2],ge=G[3],lt=G[4],q=kCe(E.angle,ge,lt),Z=q[0],Y=q[1],te=q[2],be=q[3],Pe=q[4],Se=document.createElement("canvas"),Se.width=ge,Se.height=lt,Ie=Se.getContext("2d"),Ae=Ie.createLinearGradient(Y,be,te,Pe),X3(E.stops,Z).forEach(function(at){return Ae.addColorStop(at.stop,Al(at.color))}),Ie.fillStyle=Ae,Ie.fillRect(0,0,ge,lt),ge>0&&lt>0&&(ne=l.ctx.createPattern(Se,"repeat"),l.renderRepeat(ye,ne,gt,Tt))):zCe(E)&&(ue=AT(n,r,[null,null,null]),ye=ue[0],se=ue[1],le=ue[2],ge=ue[3],lt=ue[4],Ot=E.position.length===0?[zP]:E.position,gt=Ts(Ot[0],ge),Tt=Ts(Ot[Ot.length-1],lt),Mt=MCe(E,gt,Tt,ge,lt),on=Mt[0],Ut=Mt[1],on>0&&Ut>0&&(In=l.ctx.createRadialGradient(se+gt,le+Tt,0,se+gt,le+Tt,on),X3(E.stops,on*2).forEach(function(at){return In.addColorStop(at.stop,Al(at.color))}),l.path(ye),l.ctx.fillStyle=In,on!==Ut?(Ee=n.bounds.left+.5*n.bounds.width,$e=n.bounds.top+.5*n.bounds.height,We=Ut/on,vt=1/We,l.ctx.save(),l.ctx.translate(Ee,$e),l.ctx.transform(1,0,0,We,0,0),l.ctx.translate(-Ee,-$e),l.ctx.fillRect(se,vt*(le-$e)+$e,ge,lt*vt),l.ctx.restore()):l.ctx.fill())),_t.label=6;case 6:return r--,[2]}})},l=this,h=0,p=n.styles.backgroundImage.slice(0).reverse(),b.label=1;case 1:return h<p.length?(i=p[h],[5,o(i)]):[3,4];case 2:b.sent(),b.label=3;case 3:return h++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(n,r,o){return Dc(this,void 0,void 0,function(){return ac(this,function(l){return this.path(SU(o,r)),this.ctx.fillStyle=Al(n),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(n,r,o,l){return Dc(this,void 0,void 0,function(){var h,p;return ac(this,function(i){switch(i.label){case 0:return r<3?[4,this.renderSolidBorder(n,o,l)]:[3,2];case 1:return i.sent(),[2];case 2:return h=HSe(l,o),this.path(h),this.ctx.fillStyle=Al(n),this.ctx.fill(),p=jSe(l,o),this.path(p),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(n){return Dc(this,void 0,void 0,function(){var r,o,l,h,p,i,b,E,I=this;return ac(this,function(O){switch(O.label){case 0:return this.applyEffects(n.getEffects(2)),r=n.container.styles,o=!qp(r.backgroundColor)||r.backgroundImage.length,l=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],h=t2e(Vy(r.backgroundClip,0),n.curves),o||r.boxShadow.length?(this.ctx.save(),this.path(h),this.ctx.clip(),qp(r.backgroundColor)||(this.ctx.fillStyle=Al(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(n.container)]):[3,2];case 1:O.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(M){I.ctx.save();var G=eE(n.curves),q=M.inset?0:YSe,Z=VSe(G,-q+(M.inset?1:-1)*M.spread.number,(M.inset?1:-1)*M.spread.number,M.spread.number*(M.inset?-2:2),M.spread.number*(M.inset?-2:2));M.inset?(I.path(G),I.ctx.clip(),I.mask(Z)):(I.mask(G),I.ctx.clip(),I.path(Z)),I.ctx.shadowOffsetX=M.offsetX.number+q,I.ctx.shadowOffsetY=M.offsetY.number,I.ctx.shadowColor=Al(M.color),I.ctx.shadowBlur=M.blur.number,I.ctx.fillStyle=M.inset?Al(M.color):"rgba(0,0,0,1)",I.ctx.fill(),I.ctx.restore()}),O.label=2;case 2:p=0,i=0,b=l,O.label=3;case 3:return i<b.length?(E=b[i],E.style!==0&&!qp(E.color)&&E.width>0?E.style!==2?[3,5]:[4,this.renderDashedDottedBorder(E.color,E.width,p,n.curves,2)]:[3,11]):[3,13];case 4:return O.sent(),[3,11];case 5:return E.style!==3?[3,7]:[4,this.renderDashedDottedBorder(E.color,E.width,p,n.curves,3)];case 6:return O.sent(),[3,11];case 7:return E.style!==4?[3,9]:[4,this.renderDoubleBorder(E.color,E.width,p,n.curves)];case 8:return O.sent(),[3,11];case 9:return[4,this.renderSolidBorder(E.color,p,n.curves)];case 10:O.sent(),O.label=11;case 11:p++,O.label=12;case 12:return i++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(n,r,o,l,h){return Dc(this,void 0,void 0,function(){var p,i,b,E,I,O,M,G,q,Z,Y,te,be,Pe,Se,Ie,Se,Ie;return ac(this,function(Ae){return this.ctx.save(),p=$Se(l,o),i=SU(l,o),h===2&&(this.path(i),this.ctx.clip()),xh(i[0])?(b=i[0].start.x,E=i[0].start.y):(b=i[0].x,E=i[0].y),xh(i[1])?(I=i[1].end.x,O=i[1].end.y):(I=i[1].x,O=i[1].y),o===0||o===2?M=Math.abs(b-I):M=Math.abs(E-O),this.ctx.beginPath(),h===3?this.formatPath(p):this.formatPath(i.slice(0,2)),G=r<3?r*3:r*2,q=r<3?r*2:r,h===3&&(G=r,q=r),Z=!0,M<=G*2?Z=!1:M<=G*2+q?(Y=M/(2*G+q),G*=Y,q*=Y):(te=Math.floor((M+q)/(G+q)),be=(M-te*G)/(te-1),Pe=(M-(te+1)*G)/te,q=Pe<=0||Math.abs(q-be)<Math.abs(q-Pe)?be:Pe),Z&&(h===3?this.ctx.setLineDash([0,G+q]):this.ctx.setLineDash([G,q])),h===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=Al(n),this.ctx.stroke(),this.ctx.setLineDash([]),h===2&&(xh(i[0])&&(Se=i[3],Ie=i[0],this.ctx.beginPath(),this.formatPath([new kr(Se.end.x,Se.end.y),new kr(Ie.start.x,Ie.start.y)]),this.ctx.stroke()),xh(i[1])&&(Se=i[1],Ie=i[2],this.ctx.beginPath(),this.formatPath([new kr(Se.end.x,Se.end.y),new kr(Ie.start.x,Ie.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(n){return Dc(this,void 0,void 0,function(){var r;return ac(this,function(o){switch(o.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Al(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=QSe(n),[4,this.renderStack(r)];case 1:return o.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(xj),e2e=function(t){return t instanceof sj||t instanceof oj?!0:t instanceof jP&&t.type!==ZC&&t.type!==XC},t2e=function(t,e){switch(t){case 0:return eE(e);case 2:return OSe(e);case 1:default:return tE(e)}},n2e=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},r2e=["-apple-system","system-ui"],i2e=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return r2e.indexOf(e)===-1}):t},o2e=function(t){bd(e,t);function e(n,r){var o=t.call(this,n,r)||this;return o.canvas=r.canvas?r.canvas:document.createElement("canvas"),o.ctx=o.canvas.getContext("2d"),o.options=r,o.canvas.width=Math.floor(r.width*r.scale),o.canvas.height=Math.floor(r.height*r.scale),o.canvas.style.width=r.width+"px",o.canvas.style.height=r.height+"px",o.ctx.scale(o.options.scale,o.options.scale),o.ctx.translate(-r.x,-r.y),o.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),o}return e.prototype.render=function(n){return Dc(this,void 0,void 0,function(){var r,o;return ac(this,function(l){switch(l.label){case 0:return r=y5(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,n),[4,s2e(r)];case 1:return o=l.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Al(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(o,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(xj),s2e=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},a2e=function(){function t(e){var n=e.id,r=e.enabled;this.id=n,this.enabled=r,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Yw([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Yw([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Yw([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Yw([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),l2e=function(){function t(e,n){var r;this.windowBounds=n,this.instanceName="#"+t.instanceCount++,this.logger=new a2e({id:this.instanceName,enabled:e.logging}),this.cache=(r=e.cache)!==null&&r!==void 0?r:new TSe(this,e)}return t.instanceCount=1,t}(),Cj=function(t,e){return e===void 0&&(e={}),c2e(t,e)};typeof window<"u"&&gj.setContext(window);var c2e=function(t,e){return Dc(void 0,void 0,void 0,function(){var n,r,o,l,h,p,i,b,E,I,O,M,G,q,Z,Y,te,be,Pe,Se,Ae,Ie,Ae,ne,ue,ye,se,le,ge,lt,Ot,gt,Tt,Mt,on,Ut,In,Ee,$e,We;return ac(this,function(vt){switch(vt.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(n=t.ownerDocument,!n)throw new Error("Element is not attached to a Document");if(r=n.defaultView,!r)throw new Error("Document is not attached to a Window");return o={allowTaint:(ne=e.allowTaint)!==null&&ne!==void 0?ne:!1,imageTimeout:(ue=e.imageTimeout)!==null&&ue!==void 0?ue:15e3,proxy:e.proxy,useCORS:(ye=e.useCORS)!==null&&ye!==void 0?ye:!1},l=r5({logging:(se=e.logging)!==null&&se!==void 0?se:!0,cache:e.cache},o),h={windowWidth:(le=e.windowWidth)!==null&&le!==void 0?le:r.innerWidth,windowHeight:(ge=e.windowHeight)!==null&&ge!==void 0?ge:r.innerHeight,scrollX:(lt=e.scrollX)!==null&&lt!==void 0?lt:r.pageXOffset,scrollY:(Ot=e.scrollY)!==null&&Ot!==void 0?Ot:r.pageYOffset},p=new wA(h.scrollX,h.scrollY,h.windowWidth,h.windowHeight),i=new l2e(l,p),b=(gt=e.foreignObjectRendering)!==null&&gt!==void 0?gt:!1,E={allowTaint:(Tt=e.allowTaint)!==null&&Tt!==void 0?Tt:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:b,copyStyles:b},i.logger.debug("Starting document clone with size "+p.width+"x"+p.height+" scrolled to "+-p.left+","+-p.top),I=new CU(i,t,E),O=I.clonedReferenceElement,O?[4,I.toIFrame(n,p)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return M=vt.sent(),G=$P(O)||hSe(O)?Vwe(O.ownerDocument):aB(i,O),q=G.width,Z=G.height,Y=G.left,te=G.top,be=u2e(i,O,e.backgroundColor),Pe={canvas:e.canvas,backgroundColor:be,scale:(on=(Mt=e.scale)!==null&&Mt!==void 0?Mt:r.devicePixelRatio)!==null&&on!==void 0?on:1,x:((Ut=e.x)!==null&&Ut!==void 0?Ut:0)+Y,y:((In=e.y)!==null&&In!==void 0?In:0)+te,width:(Ee=e.width)!==null&&Ee!==void 0?Ee:Math.ceil(q),height:($e=e.height)!==null&&$e!==void 0?$e:Math.ceil(Z)},b?(i.logger.debug("Document cloned, using foreign object rendering"),Ae=new o2e(i,Pe),[4,Ae.render(O)]):[3,3];case 2:return Se=vt.sent(),[3,5];case 3:return i.logger.debug("Document cloned, element located at "+Y+","+te+" with size "+q+"x"+Z+" using computed rendering"),i.logger.debug("Starting DOM parsing"),Ie=cj(i,O),be===Ie.styles.backgroundColor&&(Ie.styles.backgroundColor=pA.TRANSPARENT),i.logger.debug("Starting renderer for element at "+Pe.x+","+Pe.y+" with size "+Pe.width+"x"+Pe.height),Ae=new JSe(i,Pe),[4,Ae.render(Ie)];case 4:Se=vt.sent(),vt.label=5;case 5:return(!((We=e.removeContainer)!==null&&We!==void 0)||We)&&(CU.destroy(M)||i.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),i.logger.debug("Finished rendering"),[2,Se]}})})},u2e=function(t,e,n){var r=e.ownerDocument,o=r.documentElement?Wv(t,getComputedStyle(r.documentElement).backgroundColor):pA.TRANSPARENT,l=r.body?Wv(t,getComputedStyle(r.body).backgroundColor):pA.TRANSPARENT,h=typeof n=="string"?Wv(t,n):n===null?pA.TRANSPARENT:4294967295;return e===r.documentElement?qp(o)?qp(l)?h:l:o:h};const h2e=Object.freeze(Object.defineProperty({__proto__:null,default:Cj},Symbol.toStringTag,{value:"Module"})),d2e={methods:{async exportToPDF(){const t=document.getElementById("content-to-export");if(!t){console.error("Element not found!");return}const e=await Cj(t),n=e.toDataURL("image/png"),r=new gi,o=r.internal.pageSize.getWidth(),l=e.height*o/e.width;r.addImage(n,"PNG",0,0,o,l),r.save("care-tips-and-advice.pdf")}}},f2e={class:"container mt-5"},A2e=eX('<div class="col-md-8 offset-md-2" id="content-to-export"><h1 class="text-center mb-4">Health Care Tips and Advice</h1><p class="health-tips"> It&#39;s important to maintain a healthy lifestyle, especially as we age. Here are some tips: </p><ul class="list-unstyled"><li><strong>1. Balanced Diet:</strong> Older adults should focus on a diverse diet that includes fresh fruits, vegetables, whole grains, lean proteins, and low-fat dairy. It&#39;s important to reduce the intake of processed foods and those high in sugar and salt.</li><li><strong>2. Regular Exercise:</strong> Aim for at least 150 minutes of moderate-intensity exercise per week, such as walking, swimming, or yoga. Strength training and flexibility exercises also help improve stability and mobility.</li><li><strong>3. Stay Hydrated:</strong> Older adults are at a higher risk of dehydration, so it&#39;s essential to drink enough water daily, especially in hot weather or after exercise.</li><li><strong>4. Regular Check-ups:</strong> Schedule regular health check-ups and screenings to catch potential health issues early.</li><li><strong>5. Mental Health:</strong> Engage in social activities and maintain a positive social circle to support mental well-being. Activities like reading, writing, or learning new skills can help keep the brain active.</li><li><strong>6. Adequate Sleep:</strong> Ensure you get enough sleep each night, typically recommended to be 7 to 9 hours. Good sleep aids in recovery and helps maintain mental alertness.</li><li><strong>7. Avoid Smoking and Limit Alcohol:</strong> If you smoke, quitting is advisable. Alcohol consumption should be moderate, as excessive drinking can negatively affect health.</li><li><strong>8. Manage Chronic Conditions:</strong> If you have chronic conditions (such as high blood pressure or diabetes), follow your doctor&#39;s advice regarding medication and monitoring your health.</li><li><strong>9. Good Posture:</strong> Pay attention to posture during daily activities. Avoid staying in one position for too long, and take breaks to stretch.</li><li><strong>10. Nutritional Supplements:</strong> Consider taking vitamins and minerals as recommended by your doctor, such as calcium and vitamin D, to maintain bone health.</li></ul></div>',1),p2e={class:"col-md-8 offset-md-2 d-flex justify-content-center mt-3"},m2e=mt("div",{class:"col-md-8 offset-md-2"},[mt("p",{class:"text-success text-center mt-3"},"If you think these tips are helpful, feel free to export them to your local machine.")],-1);function g2e(t,e,n,r,o,l){return ve(),et("div",f2e,[A2e,mt("div",p2e,[mt("button",{onClick:e[0]||(e[0]=(...h)=>l.exportToPDF&&l.exportToPDF(...h)),class:"btn btn-primary btn-lg"},"Export to PDF")]),m2e])}const y2e=_f(d2e,[["render",g2e]]),gB=t=>(Sg("data-v-07c8bded"),t=t(),Tg(),t),_2e=gB(()=>mt("div",{class:"container mt-5"},[mt("div",{class:"row"},[mt("div",{class:"col-md-8 offset-md-2"},[mt("h1",{class:"text-center"},"Welcome to the Health Charity Platform")])])],-1)),v2e={class:"signin-container"},b2e=gB(()=>mt("h1",null,"Sign In",-1)),w2e={class:"input-group"},x2e={class:"input-group"},C2e=gB(()=>mt("div",{class:"button-group"},[mt("button",{type:"submit"},"Sign In")],-1)),E2e={key:0,class:"popup-message"},B2e=gB(()=>mt("p",null,"Login successful!",-1)),S2e={__name:"FirebaseSignInView",setup(t){const e=yr(""),n=yr(""),r=SA(),o=ub(),l=Y_(),h=yr(!1),p=()=>{Kme(o,e.value,n.value).then(async b=>{console.log("Login successful"),h.value=!0;const E=o.currentUser.uid,I=await kP(gb(l,"users",E));I.exists()?I.data().isAdmin?r.push("/adminpage"):r.push("/about"):console.log("No such user document!")}).catch(b=>{console.log(b.code)})},i=()=>{h.value=!1};return(b,E)=>(ve(),et(_r,null,[_2e,mt("div",v2e,[b2e,mt("form",{onSubmit:gf(p,["prevent"])},[mt("div",w2e,[Fo(mt("input",{type:"text",placeholder:"Email","onUpdate:modelValue":E[0]||(E[0]=I=>e.value=I),required:""},null,512),[[Ol,e.value]])]),mt("div",x2e,[Fo(mt("input",{type:"password",placeholder:"Password","onUpdate:modelValue":E[1]||(E[1]=I=>n.value=I),required:""},null,512),[[Ol,n.value]])]),C2e],32)]),h.value?(ve(),et("div",E2e,[B2e,mt("button",{onClick:i},"Close")])):Sn("",!0)],64))}},T2e=_f(S2e,[["__scopeId","data-v-07c8bded"]]),Ug=t=>(Sg("data-v-2f3098f6"),t=t(),Tg(),t),I2e=Ug(()=>mt("div",{class:"container mt-5"},[mt("div",{class:"row"},[mt("div",{class:"col-md-8 offset-md-2"},[mt("h1",{class:"text-center"},"We are so excited to see you can join us!")])])],-1)),P2e={class:"register-container"},L2e=Ug(()=>mt("h1",null,"Create an Account",-1)),F2e={class:"input-group"},R2e={class:"input-group"},k2e={class:"input-group"},M2e={class:"input-group"},O2e=Ug(()=>mt("option",{value:"",disabled:""},"Select Gender",-1)),D2e=Ug(()=>mt("option",{value:"male"},"Male",-1)),U2e=Ug(()=>mt("option",{value:"female"},"Female",-1)),N2e=Ug(()=>mt("option",{value:"other"},"Other",-1)),z2e=[O2e,D2e,U2e,N2e],V2e={class:"input-group"},Q2e=Ug(()=>mt("div",{class:"button-group"},[mt("button",{type:"submit"},"Go Register")],-1)),H2e={key:0,class:"error-message"},j2e={__name:"FirebaseRegisterView",setup(t){const e=yr(""),n=yr(""),r=yr(""),o=yr(""),l=yr(""),h=yr(""),p=SA(),i=ub(),b=Y_(),E=()=>{if(h.value="",n.value.length<8){h.value="Password must be at least 8 characters long.";return}if(n.value!==r.value){h.value="Passwords do not match.";return}if(new Date(l.value)>new Date){h.value="Date of Birth cannot be in the future.";return}Gme(i,e.value,n.value).then(async M=>{console.log("Your registration has been successfully created");const G=M.user.uid;try{await cve(gb(b,"users",G),{email:e.value,gender:o.value,dateOfBirth:l.value,isAdmin:!1}),console.log("User data saved to Firestore"),window.confirm("Registration successful! Do you want to go to the login page?")&&p.push("/FireLogin")}catch(q){console.error("Error writing document: ",q)}}).catch(M=>{console.log(M.code)})};return(I,O)=>(ve(),et(_r,null,[I2e,mt("div",P2e,[L2e,mt("form",{onSubmit:gf(E,["prevent"])},[mt("div",F2e,[Fo(mt("input",{type:"text",placeholder:"Email","onUpdate:modelValue":O[0]||(O[0]=M=>e.value=M),required:""},null,512),[[Ol,e.value]])]),mt("div",R2e,[Fo(mt("input",{type:"password",placeholder:"Password","onUpdate:modelValue":O[1]||(O[1]=M=>n.value=M),required:""},null,512),[[Ol,n.value]])]),mt("div",k2e,[Fo(mt("input",{type:"password",placeholder:"Retype Password","onUpdate:modelValue":O[2]||(O[2]=M=>r.value=M),required:""},null,512),[[Ol,r.value]])]),mt("div",M2e,[Fo(mt("select",{"onUpdate:modelValue":O[3]||(O[3]=M=>o.value=M),required:""},z2e,512),[[t4,o.value]])]),mt("div",V2e,[Fo(mt("input",{type:"date","onUpdate:modelValue":O[4]||(O[4]=M=>l.value=M),required:""},null,512),[[Ol,l.value]])]),Q2e],32),h.value?(ve(),et("div",H2e,Ar(h.value),1)):Sn("",!0)])],64))}},$2e=_f(j2e,[["__scopeId","data-v-2f3098f6"]]);function Ej(t,e){return function(){return t.apply(e,arguments)}}const{toString:G2e}=Object.prototype,{getPrototypeOf:GP}=Object,yB=(t=>e=>{const n=G2e.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),wd=t=>(t=t.toLowerCase(),e=>yB(e)===t),_B=t=>e=>typeof e===t,{isArray:e0}=Array,G1=_B("undefined");function K2e(t){return t!==null&&!G1(t)&&t.constructor!==null&&!G1(t.constructor)&&Hu(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Bj=wd("ArrayBuffer");function q2e(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Bj(t.buffer),e}const W2e=_B("string"),Hu=_B("function"),Sj=_B("number"),vB=t=>t!==null&&typeof t=="object",X2e=t=>t===!0||t===!1,nC=t=>{if(yB(t)!=="object")return!1;const e=GP(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Z2e=wd("Date"),Y2e=wd("File"),J2e=wd("Blob"),eTe=wd("FileList"),tTe=t=>vB(t)&&Hu(t.pipe),nTe=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Hu(t.append)&&((e=yB(t))==="formdata"||e==="object"&&Hu(t.toString)&&t.toString()==="[object FormData]"))},rTe=wd("URLSearchParams"),[iTe,oTe,sTe,aTe]=["ReadableStream","Request","Response","Headers"].map(wd),lTe=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function bb(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,o;if(typeof t!="object"&&(t=[t]),e0(t))for(r=0,o=t.length;r<o;r++)e.call(null,t[r],r,t);else{const l=n?Object.getOwnPropertyNames(t):Object.keys(t),h=l.length;let p;for(r=0;r<h;r++)p=l[r],e.call(null,t[p],p,t)}}function Tj(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,o;for(;r-- >0;)if(o=n[r],e===o.toLowerCase())return o;return null}const og=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Ij=t=>!G1(t)&&t!==og;function E5(){const{caseless:t}=Ij(this)&&this||{},e={},n=(r,o)=>{const l=t&&Tj(e,o)||o;nC(e[l])&&nC(r)?e[l]=E5(e[l],r):nC(r)?e[l]=E5({},r):e0(r)?e[l]=r.slice():e[l]=r};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&bb(arguments[r],n);return e}const cTe=(t,e,n,{allOwnKeys:r}={})=>(bb(e,(o,l)=>{n&&Hu(o)?t[l]=Ej(o,n):t[l]=o},{allOwnKeys:r}),t),uTe=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),hTe=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},dTe=(t,e,n,r)=>{let o,l,h;const p={};if(e=e||{},t==null)return e;do{for(o=Object.getOwnPropertyNames(t),l=o.length;l-- >0;)h=o[l],(!r||r(h,t,e))&&!p[h]&&(e[h]=t[h],p[h]=!0);t=n!==!1&&GP(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},fTe=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},ATe=t=>{if(!t)return null;if(e0(t))return t;let e=t.length;if(!Sj(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},pTe=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&GP(Uint8Array)),mTe=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let o;for(;(o=r.next())&&!o.done;){const l=o.value;e.call(t,l[0],l[1])}},gTe=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},yTe=wd("HTMLFormElement"),_Te=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,o){return r.toUpperCase()+o}),IU=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),vTe=wd("RegExp"),Pj=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};bb(n,(o,l)=>{let h;(h=e(o,l,t))!==!1&&(r[l]=h||o)}),Object.defineProperties(t,r)},bTe=t=>{Pj(t,(e,n)=>{if(Hu(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Hu(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},wTe=(t,e)=>{const n={},r=o=>{o.forEach(l=>{n[l]=!0})};return e0(t)?r(t):r(String(t).split(e)),n},xTe=()=>{},CTe=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,pT="abcdefghijklmnopqrstuvwxyz",PU="0123456789",Lj={DIGIT:PU,ALPHA:pT,ALPHA_DIGIT:pT+pT.toUpperCase()+PU},ETe=(t=16,e=Lj.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function BTe(t){return!!(t&&Hu(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const STe=t=>{const e=new Array(10),n=(r,o)=>{if(vB(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[o]=r;const l=e0(r)?[]:{};return bb(r,(h,p)=>{const i=n(h,o+1);!G1(i)&&(l[p]=i)}),e[o]=void 0,l}}return r};return n(t,0)},TTe=wd("AsyncFunction"),ITe=t=>t&&(vB(t)||Hu(t))&&Hu(t.then)&&Hu(t.catch),Fj=((t,e)=>t?setImmediate:e?((n,r)=>(og.addEventListener("message",({source:o,data:l})=>{o===og&&l===n&&r.length&&r.shift()()},!1),o=>{r.push(o),og.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Hu(og.postMessage)),PTe=typeof queueMicrotask<"u"?queueMicrotask.bind(og):typeof process<"u"&&process.nextTick||Fj,Un={isArray:e0,isArrayBuffer:Bj,isBuffer:K2e,isFormData:nTe,isArrayBufferView:q2e,isString:W2e,isNumber:Sj,isBoolean:X2e,isObject:vB,isPlainObject:nC,isReadableStream:iTe,isRequest:oTe,isResponse:sTe,isHeaders:aTe,isUndefined:G1,isDate:Z2e,isFile:Y2e,isBlob:J2e,isRegExp:vTe,isFunction:Hu,isStream:tTe,isURLSearchParams:rTe,isTypedArray:pTe,isFileList:eTe,forEach:bb,merge:E5,extend:cTe,trim:lTe,stripBOM:uTe,inherits:hTe,toFlatObject:dTe,kindOf:yB,kindOfTest:wd,endsWith:fTe,toArray:ATe,forEachEntry:mTe,matchAll:gTe,isHTMLForm:yTe,hasOwnProperty:IU,hasOwnProp:IU,reduceDescriptors:Pj,freezeMethods:bTe,toObjectSet:wTe,toCamelCase:_Te,noop:xTe,toFiniteNumber:CTe,findKey:Tj,global:og,isContextDefined:Ij,ALPHABET:Lj,generateString:ETe,isSpecCompliantForm:BTe,toJSONObject:STe,isAsyncFn:TTe,isThenable:ITe,setImmediate:Fj,asap:PTe};function Vi(t,e,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}Un.inherits(Vi,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Un.toJSONObject(this.config),code:this.code,status:this.status}}});const Rj=Vi.prototype,kj={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{kj[t]={value:t}});Object.defineProperties(Vi,kj);Object.defineProperty(Rj,"isAxiosError",{value:!0});Vi.from=(t,e,n,r,o,l)=>{const h=Object.create(Rj);return Un.toFlatObject(t,h,function(i){return i!==Error.prototype},p=>p!=="isAxiosError"),Vi.call(h,t.message,e,n,r,o),h.cause=t,h.name=t.name,l&&Object.assign(h,l),h};const LTe=null;function B5(t){return Un.isPlainObject(t)||Un.isArray(t)}function Mj(t){return Un.endsWith(t,"[]")?t.slice(0,-2):t}function LU(t,e,n){return t?t.concat(e).map(function(o,l){return o=Mj(o),!n&&l?"["+o+"]":o}).join(n?".":""):e}function FTe(t){return Un.isArray(t)&&!t.some(B5)}const RTe=Un.toFlatObject(Un,{},null,function(e){return/^is[A-Z]/.test(e)});function bB(t,e,n){if(!Un.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Un.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(q,Z){return!Un.isUndefined(Z[q])});const r=n.metaTokens,o=n.visitor||E,l=n.dots,h=n.indexes,i=(n.Blob||typeof Blob<"u"&&Blob)&&Un.isSpecCompliantForm(e);if(!Un.isFunction(o))throw new TypeError("visitor must be a function");function b(G){if(G===null)return"";if(Un.isDate(G))return G.toISOString();if(!i&&Un.isBlob(G))throw new Vi("Blob is not supported. Use a Buffer instead.");return Un.isArrayBuffer(G)||Un.isTypedArray(G)?i&&typeof Blob=="function"?new Blob([G]):Buffer.from(G):G}function E(G,q,Z){let Y=G;if(G&&!Z&&typeof G=="object"){if(Un.endsWith(q,"{}"))q=r?q:q.slice(0,-2),G=JSON.stringify(G);else if(Un.isArray(G)&&FTe(G)||(Un.isFileList(G)||Un.endsWith(q,"[]"))&&(Y=Un.toArray(G)))return q=Mj(q),Y.forEach(function(be,Pe){!(Un.isUndefined(be)||be===null)&&e.append(h===!0?LU([q],Pe,l):h===null?q:q+"[]",b(be))}),!1}return B5(G)?!0:(e.append(LU(Z,q,l),b(G)),!1)}const I=[],O=Object.assign(RTe,{defaultVisitor:E,convertValue:b,isVisitable:B5});function M(G,q){if(!Un.isUndefined(G)){if(I.indexOf(G)!==-1)throw Error("Circular reference detected in "+q.join("."));I.push(G),Un.forEach(G,function(Y,te){(!(Un.isUndefined(Y)||Y===null)&&o.call(e,Y,Un.isString(te)?te.trim():te,q,O))===!0&&M(Y,q?q.concat(te):[te])}),I.pop()}}if(!Un.isObject(t))throw new TypeError("data must be an object");return M(t),e}function FU(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function KP(t,e){this._pairs=[],t&&bB(t,this,e)}const Oj=KP.prototype;Oj.append=function(e,n){this._pairs.push([e,n])};Oj.toString=function(e){const n=e?function(r){return e.call(this,r,FU)}:FU;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function kTe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Dj(t,e,n){if(!e)return t;const r=n&&n.encode||kTe,o=n&&n.serialize;let l;if(o?l=o(e,n):l=Un.isURLSearchParams(e)?e.toString():new KP(e,n).toString(r),l){const h=t.indexOf("#");h!==-1&&(t=t.slice(0,h)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}class RU{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Un.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Uj={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},MTe=typeof URLSearchParams<"u"?URLSearchParams:KP,OTe=typeof FormData<"u"?FormData:null,DTe=typeof Blob<"u"?Blob:null,UTe={isBrowser:!0,classes:{URLSearchParams:MTe,FormData:OTe,Blob:DTe},protocols:["http","https","file","blob","url","data"]},qP=typeof window<"u"&&typeof document<"u",S5=typeof navigator=="object"&&navigator||void 0,NTe=qP&&(!S5||["ReactNative","NativeScript","NS"].indexOf(S5.product)<0),zTe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",VTe=qP&&window.location.href||"http://localhost",QTe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:qP,hasStandardBrowserEnv:NTe,hasStandardBrowserWebWorkerEnv:zTe,navigator:S5,origin:VTe},Symbol.toStringTag,{value:"Module"})),du={...QTe,...UTe};function HTe(t,e){return bB(t,new du.classes.URLSearchParams,Object.assign({visitor:function(n,r,o,l){return du.isNode&&Un.isBuffer(n)?(this.append(r,n.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},e))}function jTe(t){return Un.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function $Te(t){const e={},n=Object.keys(t);let r;const o=n.length;let l;for(r=0;r<o;r++)l=n[r],e[l]=t[l];return e}function Nj(t){function e(n,r,o,l){let h=n[l++];if(h==="__proto__")return!0;const p=Number.isFinite(+h),i=l>=n.length;return h=!h&&Un.isArray(o)?o.length:h,i?(Un.hasOwnProp(o,h)?o[h]=[o[h],r]:o[h]=r,!p):((!o[h]||!Un.isObject(o[h]))&&(o[h]=[]),e(n,r,o[h],l)&&Un.isArray(o[h])&&(o[h]=$Te(o[h])),!p)}if(Un.isFormData(t)&&Un.isFunction(t.entries)){const n={};return Un.forEachEntry(t,(r,o)=>{e(jTe(r),o,n,0)}),n}return null}function GTe(t,e,n){if(Un.isString(t))try{return(e||JSON.parse)(t),Un.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const wb={transitional:Uj,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",o=r.indexOf("application/json")>-1,l=Un.isObject(e);if(l&&Un.isHTMLForm(e)&&(e=new FormData(e)),Un.isFormData(e))return o?JSON.stringify(Nj(e)):e;if(Un.isArrayBuffer(e)||Un.isBuffer(e)||Un.isStream(e)||Un.isFile(e)||Un.isBlob(e)||Un.isReadableStream(e))return e;if(Un.isArrayBufferView(e))return e.buffer;if(Un.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let p;if(l){if(r.indexOf("application/x-www-form-urlencoded")>-1)return HTe(e,this.formSerializer).toString();if((p=Un.isFileList(e))||r.indexOf("multipart/form-data")>-1){const i=this.env&&this.env.FormData;return bB(p?{"files[]":e}:e,i&&new i,this.formSerializer)}}return l||o?(n.setContentType("application/json",!1),GTe(e)):e}],transformResponse:[function(e){const n=this.transitional||wb.transitional,r=n&&n.forcedJSONParsing,o=this.responseType==="json";if(Un.isResponse(e)||Un.isReadableStream(e))return e;if(e&&Un.isString(e)&&(r&&!this.responseType||o)){const h=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(p){if(h)throw p.name==="SyntaxError"?Vi.from(p,Vi.ERR_BAD_RESPONSE,this,null,this.response):p}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:du.classes.FormData,Blob:du.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Un.forEach(["delete","get","head","post","put","patch"],t=>{wb.headers[t]={}});const KTe=Un.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),qTe=t=>{const e={};let n,r,o;return t&&t.split(`
`).forEach(function(h){o=h.indexOf(":"),n=h.substring(0,o).trim().toLowerCase(),r=h.substring(o+1).trim(),!(!n||e[n]&&KTe[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},kU=Symbol("internals");function uv(t){return t&&String(t).trim().toLowerCase()}function rC(t){return t===!1||t==null?t:Un.isArray(t)?t.map(rC):String(t)}function WTe(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const XTe=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function mT(t,e,n,r,o){if(Un.isFunction(r))return r.call(this,e,n);if(o&&(e=n),!!Un.isString(e)){if(Un.isString(r))return e.indexOf(r)!==-1;if(Un.isRegExp(r))return r.test(e)}}function ZTe(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function YTe(t,e){const n=Un.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(o,l,h){return this[r].call(this,e,o,l,h)},configurable:!0})})}class fu{constructor(e){e&&this.set(e)}set(e,n,r){const o=this;function l(p,i,b){const E=uv(i);if(!E)throw new Error("header name must be a non-empty string");const I=Un.findKey(o,E);(!I||o[I]===void 0||b===!0||b===void 0&&o[I]!==!1)&&(o[I||i]=rC(p))}const h=(p,i)=>Un.forEach(p,(b,E)=>l(b,E,i));if(Un.isPlainObject(e)||e instanceof this.constructor)h(e,n);else if(Un.isString(e)&&(e=e.trim())&&!XTe(e))h(qTe(e),n);else if(Un.isHeaders(e))for(const[p,i]of e.entries())l(i,p,r);else e!=null&&l(n,e,r);return this}get(e,n){if(e=uv(e),e){const r=Un.findKey(this,e);if(r){const o=this[r];if(!n)return o;if(n===!0)return WTe(o);if(Un.isFunction(n))return n.call(this,o,r);if(Un.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=uv(e),e){const r=Un.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||mT(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let o=!1;function l(h){if(h=uv(h),h){const p=Un.findKey(r,h);p&&(!n||mT(r,r[p],p,n))&&(delete r[p],o=!0)}}return Un.isArray(e)?e.forEach(l):l(e),o}clear(e){const n=Object.keys(this);let r=n.length,o=!1;for(;r--;){const l=n[r];(!e||mT(this,this[l],l,e,!0))&&(delete this[l],o=!0)}return o}normalize(e){const n=this,r={};return Un.forEach(this,(o,l)=>{const h=Un.findKey(r,l);if(h){n[h]=rC(o),delete n[l];return}const p=e?ZTe(l):String(l).trim();p!==l&&delete n[l],n[p]=rC(o),r[p]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Un.forEach(this,(r,o)=>{r!=null&&r!==!1&&(n[o]=e&&Un.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(o=>r.set(o)),r}static accessor(e){const r=(this[kU]=this[kU]={accessors:{}}).accessors,o=this.prototype;function l(h){const p=uv(h);r[p]||(YTe(o,h),r[p]=!0)}return Un.isArray(e)?e.forEach(l):l(e),this}}fu.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Un.reduceDescriptors(fu.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Un.freezeMethods(fu);function gT(t,e){const n=this||wb,r=e||n,o=fu.from(r.headers);let l=r.data;return Un.forEach(t,function(p){l=p.call(n,l,o.normalize(),e?e.status:void 0)}),o.normalize(),l}function zj(t){return!!(t&&t.__CANCEL__)}function t0(t,e,n){Vi.call(this,t??"canceled",Vi.ERR_CANCELED,e,n),this.name="CanceledError"}Un.inherits(t0,Vi,{__CANCEL__:!0});function Vj(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Vi("Request failed with status code "+n.status,[Vi.ERR_BAD_REQUEST,Vi.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function JTe(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function eIe(t,e){t=t||10;const n=new Array(t),r=new Array(t);let o=0,l=0,h;return e=e!==void 0?e:1e3,function(i){const b=Date.now(),E=r[l];h||(h=b),n[o]=i,r[o]=b;let I=l,O=0;for(;I!==o;)O+=n[I++],I=I%t;if(o=(o+1)%t,o===l&&(l=(l+1)%t),b-h<e)return;const M=E&&b-E;return M?Math.round(O*1e3/M):void 0}}function tIe(t,e){let n=0,r=1e3/e,o,l;const h=(b,E=Date.now())=>{n=E,o=null,l&&(clearTimeout(l),l=null),t.apply(null,b)};return[(...b)=>{const E=Date.now(),I=E-n;I>=r?h(b,E):(o=b,l||(l=setTimeout(()=>{l=null,h(o)},r-I)))},()=>o&&h(o)]}const rE=(t,e,n=3)=>{let r=0;const o=eIe(50,250);return tIe(l=>{const h=l.loaded,p=l.lengthComputable?l.total:void 0,i=h-r,b=o(i),E=h<=p;r=h;const I={loaded:h,total:p,progress:p?h/p:void 0,bytes:i,rate:b||void 0,estimated:b&&p&&E?(p-h)/b:void 0,event:l,lengthComputable:p!=null,[e?"download":"upload"]:!0};t(I)},n)},MU=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},OU=t=>(...e)=>Un.asap(()=>t(...e)),nIe=du.hasStandardBrowserEnv?function(){const e=du.navigator&&/(msie|trident)/i.test(du.navigator.userAgent),n=document.createElement("a");let r;function o(l){let h=l;return e&&(n.setAttribute("href",h),h=n.href),n.setAttribute("href",h),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=o(window.location.href),function(h){const p=Un.isString(h)?o(h):h;return p.protocol===r.protocol&&p.host===r.host}}():function(){return function(){return!0}}(),rIe=du.hasStandardBrowserEnv?{write(t,e,n,r,o,l){const h=[t+"="+encodeURIComponent(e)];Un.isNumber(n)&&h.push("expires="+new Date(n).toGMTString()),Un.isString(r)&&h.push("path="+r),Un.isString(o)&&h.push("domain="+o),l===!0&&h.push("secure"),document.cookie=h.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function iIe(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function oIe(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Qj(t,e){return t&&!iIe(e)?oIe(t,e):e}const DU=t=>t instanceof fu?{...t}:t;function Bg(t,e){e=e||{};const n={};function r(b,E,I){return Un.isPlainObject(b)&&Un.isPlainObject(E)?Un.merge.call({caseless:I},b,E):Un.isPlainObject(E)?Un.merge({},E):Un.isArray(E)?E.slice():E}function o(b,E,I){if(Un.isUndefined(E)){if(!Un.isUndefined(b))return r(void 0,b,I)}else return r(b,E,I)}function l(b,E){if(!Un.isUndefined(E))return r(void 0,E)}function h(b,E){if(Un.isUndefined(E)){if(!Un.isUndefined(b))return r(void 0,b)}else return r(void 0,E)}function p(b,E,I){if(I in e)return r(b,E);if(I in t)return r(void 0,b)}const i={url:l,method:l,data:l,baseURL:h,transformRequest:h,transformResponse:h,paramsSerializer:h,timeout:h,timeoutMessage:h,withCredentials:h,withXSRFToken:h,adapter:h,responseType:h,xsrfCookieName:h,xsrfHeaderName:h,onUploadProgress:h,onDownloadProgress:h,decompress:h,maxContentLength:h,maxBodyLength:h,beforeRedirect:h,transport:h,httpAgent:h,httpsAgent:h,cancelToken:h,socketPath:h,responseEncoding:h,validateStatus:p,headers:(b,E)=>o(DU(b),DU(E),!0)};return Un.forEach(Object.keys(Object.assign({},t,e)),function(E){const I=i[E]||o,O=I(t[E],e[E],E);Un.isUndefined(O)&&I!==p||(n[E]=O)}),n}const Hj=t=>{const e=Bg({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:o,xsrfCookieName:l,headers:h,auth:p}=e;e.headers=h=fu.from(h),e.url=Dj(Qj(e.baseURL,e.url),t.params,t.paramsSerializer),p&&h.set("Authorization","Basic "+btoa((p.username||"")+":"+(p.password?unescape(encodeURIComponent(p.password)):"")));let i;if(Un.isFormData(n)){if(du.hasStandardBrowserEnv||du.hasStandardBrowserWebWorkerEnv)h.setContentType(void 0);else if((i=h.getContentType())!==!1){const[b,...E]=i?i.split(";").map(I=>I.trim()).filter(Boolean):[];h.setContentType([b||"multipart/form-data",...E].join("; "))}}if(du.hasStandardBrowserEnv&&(r&&Un.isFunction(r)&&(r=r(e)),r||r!==!1&&nIe(e.url))){const b=o&&l&&rIe.read(l);b&&h.set(o,b)}return e},sIe=typeof XMLHttpRequest<"u",aIe=sIe&&function(t){return new Promise(function(n,r){const o=Hj(t);let l=o.data;const h=fu.from(o.headers).normalize();let{responseType:p,onUploadProgress:i,onDownloadProgress:b}=o,E,I,O,M,G;function q(){M&&M(),G&&G(),o.cancelToken&&o.cancelToken.unsubscribe(E),o.signal&&o.signal.removeEventListener("abort",E)}let Z=new XMLHttpRequest;Z.open(o.method.toUpperCase(),o.url,!0),Z.timeout=o.timeout;function Y(){if(!Z)return;const be=fu.from("getAllResponseHeaders"in Z&&Z.getAllResponseHeaders()),Se={data:!p||p==="text"||p==="json"?Z.responseText:Z.response,status:Z.status,statusText:Z.statusText,headers:be,config:t,request:Z};Vj(function(Ae){n(Ae),q()},function(Ae){r(Ae),q()},Se),Z=null}"onloadend"in Z?Z.onloadend=Y:Z.onreadystatechange=function(){!Z||Z.readyState!==4||Z.status===0&&!(Z.responseURL&&Z.responseURL.indexOf("file:")===0)||setTimeout(Y)},Z.onabort=function(){Z&&(r(new Vi("Request aborted",Vi.ECONNABORTED,t,Z)),Z=null)},Z.onerror=function(){r(new Vi("Network Error",Vi.ERR_NETWORK,t,Z)),Z=null},Z.ontimeout=function(){let Pe=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const Se=o.transitional||Uj;o.timeoutErrorMessage&&(Pe=o.timeoutErrorMessage),r(new Vi(Pe,Se.clarifyTimeoutError?Vi.ETIMEDOUT:Vi.ECONNABORTED,t,Z)),Z=null},l===void 0&&h.setContentType(null),"setRequestHeader"in Z&&Un.forEach(h.toJSON(),function(Pe,Se){Z.setRequestHeader(Se,Pe)}),Un.isUndefined(o.withCredentials)||(Z.withCredentials=!!o.withCredentials),p&&p!=="json"&&(Z.responseType=o.responseType),b&&([O,G]=rE(b,!0),Z.addEventListener("progress",O)),i&&Z.upload&&([I,M]=rE(i),Z.upload.addEventListener("progress",I),Z.upload.addEventListener("loadend",M)),(o.cancelToken||o.signal)&&(E=be=>{Z&&(r(!be||be.type?new t0(null,t,Z):be),Z.abort(),Z=null)},o.cancelToken&&o.cancelToken.subscribe(E),o.signal&&(o.signal.aborted?E():o.signal.addEventListener("abort",E)));const te=JTe(o.url);if(te&&du.protocols.indexOf(te)===-1){r(new Vi("Unsupported protocol "+te+":",Vi.ERR_BAD_REQUEST,t));return}Z.send(l||null)})},lIe=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,o;const l=function(b){if(!o){o=!0,p();const E=b instanceof Error?b:this.reason;r.abort(E instanceof Vi?E:new t0(E instanceof Error?E.message:E))}};let h=e&&setTimeout(()=>{h=null,l(new Vi(`timeout ${e} of ms exceeded`,Vi.ETIMEDOUT))},e);const p=()=>{t&&(h&&clearTimeout(h),h=null,t.forEach(b=>{b.unsubscribe?b.unsubscribe(l):b.removeEventListener("abort",l)}),t=null)};t.forEach(b=>b.addEventListener("abort",l));const{signal:i}=r;return i.unsubscribe=()=>Un.asap(p),i}},cIe=function*(t,e){let n=t.byteLength;if(!e||n<e){yield t;return}let r=0,o;for(;r<n;)o=r+e,yield t.slice(r,o),r=o},uIe=async function*(t,e){for await(const n of hIe(t))yield*cIe(n,e)},hIe=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},UU=(t,e,n,r)=>{const o=uIe(t,e);let l=0,h,p=i=>{h||(h=!0,r&&r(i))};return new ReadableStream({async pull(i){try{const{done:b,value:E}=await o.next();if(b){p(),i.close();return}let I=E.byteLength;if(n){let O=l+=I;n(O)}i.enqueue(new Uint8Array(E))}catch(b){throw p(b),b}},cancel(i){return p(i),o.return()}},{highWaterMark:2})},wB=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",jj=wB&&typeof ReadableStream=="function",dIe=wB&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),$j=(t,...e)=>{try{return!!t(...e)}catch{return!1}},fIe=jj&&$j(()=>{let t=!1;const e=new Request(du.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),NU=64*1024,T5=jj&&$j(()=>Un.isReadableStream(new Response("").body)),iE={stream:T5&&(t=>t.body)};wB&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!iE[e]&&(iE[e]=Un.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new Vi(`Response type '${e}' is not supported`,Vi.ERR_NOT_SUPPORT,r)})})})(new Response);const AIe=async t=>{if(t==null)return 0;if(Un.isBlob(t))return t.size;if(Un.isSpecCompliantForm(t))return(await new Request(du.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Un.isArrayBufferView(t)||Un.isArrayBuffer(t))return t.byteLength;if(Un.isURLSearchParams(t)&&(t=t+""),Un.isString(t))return(await dIe(t)).byteLength},pIe=async(t,e)=>{const n=Un.toFiniteNumber(t.getContentLength());return n??AIe(e)},mIe=wB&&(async t=>{let{url:e,method:n,data:r,signal:o,cancelToken:l,timeout:h,onDownloadProgress:p,onUploadProgress:i,responseType:b,headers:E,withCredentials:I="same-origin",fetchOptions:O}=Hj(t);b=b?(b+"").toLowerCase():"text";let M=lIe([o,l&&l.toAbortSignal()],h),G;const q=M&&M.unsubscribe&&(()=>{M.unsubscribe()});let Z;try{if(i&&fIe&&n!=="get"&&n!=="head"&&(Z=await pIe(E,r))!==0){let Se=new Request(e,{method:"POST",body:r,duplex:"half"}),Ie;if(Un.isFormData(r)&&(Ie=Se.headers.get("content-type"))&&E.setContentType(Ie),Se.body){const[Ae,ne]=MU(Z,rE(OU(i)));r=UU(Se.body,NU,Ae,ne)}}Un.isString(I)||(I=I?"include":"omit");const Y="credentials"in Request.prototype;G=new Request(e,{...O,signal:M,method:n.toUpperCase(),headers:E.normalize().toJSON(),body:r,duplex:"half",credentials:Y?I:void 0});let te=await fetch(G);const be=T5&&(b==="stream"||b==="response");if(T5&&(p||be&&q)){const Se={};["status","statusText","headers"].forEach(ue=>{Se[ue]=te[ue]});const Ie=Un.toFiniteNumber(te.headers.get("content-length")),[Ae,ne]=p&&MU(Ie,rE(OU(p),!0))||[];te=new Response(UU(te.body,NU,Ae,()=>{ne&&ne(),q&&q()}),Se)}b=b||"text";let Pe=await iE[Un.findKey(iE,b)||"text"](te,t);return!be&&q&&q(),await new Promise((Se,Ie)=>{Vj(Se,Ie,{data:Pe,headers:fu.from(te.headers),status:te.status,statusText:te.statusText,config:t,request:G})})}catch(Y){throw q&&q(),Y&&Y.name==="TypeError"&&/fetch/i.test(Y.message)?Object.assign(new Vi("Network Error",Vi.ERR_NETWORK,t,G),{cause:Y.cause||Y}):Vi.from(Y,Y&&Y.code,t,G)}}),I5={http:LTe,xhr:aIe,fetch:mIe};Un.forEach(I5,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const zU=t=>`- ${t}`,gIe=t=>Un.isFunction(t)||t===null||t===!1,Gj={getAdapter:t=>{t=Un.isArray(t)?t:[t];const{length:e}=t;let n,r;const o={};for(let l=0;l<e;l++){n=t[l];let h;if(r=n,!gIe(n)&&(r=I5[(h=String(n)).toLowerCase()],r===void 0))throw new Vi(`Unknown adapter '${h}'`);if(r)break;o[h||"#"+l]=r}if(!r){const l=Object.entries(o).map(([p,i])=>`adapter ${p} `+(i===!1?"is not supported by the environment":"is not available in the build"));let h=e?l.length>1?`since :
`+l.map(zU).join(`
`):" "+zU(l[0]):"as no adapter specified";throw new Vi("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return r},adapters:I5};function yT(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new t0(null,t)}function VU(t){return yT(t),t.headers=fu.from(t.headers),t.data=gT.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Gj.getAdapter(t.adapter||wb.adapter)(t).then(function(r){return yT(t),r.data=gT.call(t,t.transformResponse,r),r.headers=fu.from(r.headers),r},function(r){return zj(r)||(yT(t),r&&r.response&&(r.response.data=gT.call(t,t.transformResponse,r.response),r.response.headers=fu.from(r.response.headers))),Promise.reject(r)})}const Kj="1.7.7",WP={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{WP[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const QU={};WP.transitional=function(e,n,r){function o(l,h){return"[Axios v"+Kj+"] Transitional option '"+l+"'"+h+(r?". "+r:"")}return(l,h,p)=>{if(e===!1)throw new Vi(o(h," has been removed"+(n?" in "+n:"")),Vi.ERR_DEPRECATED);return n&&!QU[h]&&(QU[h]=!0,console.warn(o(h," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(l,h,p):!0}};function yIe(t,e,n){if(typeof t!="object")throw new Vi("options must be an object",Vi.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let o=r.length;for(;o-- >0;){const l=r[o],h=e[l];if(h){const p=t[l],i=p===void 0||h(p,l,t);if(i!==!0)throw new Vi("option "+l+" must be "+i,Vi.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Vi("Unknown option "+l,Vi.ERR_BAD_OPTION)}}const P5={assertOptions:yIe,validators:WP},mp=P5.validators;class Ag{constructor(e){this.defaults=e,this.interceptors={request:new RU,response:new RU}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let o;Error.captureStackTrace?Error.captureStackTrace(o={}):o=new Error;const l=o.stack?o.stack.replace(/^.+\n/,""):"";try{r.stack?l&&!String(r.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+l):r.stack=l}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Bg(this.defaults,n);const{transitional:r,paramsSerializer:o,headers:l}=n;r!==void 0&&P5.assertOptions(r,{silentJSONParsing:mp.transitional(mp.boolean),forcedJSONParsing:mp.transitional(mp.boolean),clarifyTimeoutError:mp.transitional(mp.boolean)},!1),o!=null&&(Un.isFunction(o)?n.paramsSerializer={serialize:o}:P5.assertOptions(o,{encode:mp.function,serialize:mp.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let h=l&&Un.merge(l.common,l[n.method]);l&&Un.forEach(["delete","get","head","post","put","patch","common"],G=>{delete l[G]}),n.headers=fu.concat(h,l);const p=[];let i=!0;this.interceptors.request.forEach(function(q){typeof q.runWhen=="function"&&q.runWhen(n)===!1||(i=i&&q.synchronous,p.unshift(q.fulfilled,q.rejected))});const b=[];this.interceptors.response.forEach(function(q){b.push(q.fulfilled,q.rejected)});let E,I=0,O;if(!i){const G=[VU.bind(this),void 0];for(G.unshift.apply(G,p),G.push.apply(G,b),O=G.length,E=Promise.resolve(n);I<O;)E=E.then(G[I++],G[I++]);return E}O=p.length;let M=n;for(I=0;I<O;){const G=p[I++],q=p[I++];try{M=G(M)}catch(Z){q.call(this,Z);break}}try{E=VU.call(this,M)}catch(G){return Promise.reject(G)}for(I=0,O=b.length;I<O;)E=E.then(b[I++],b[I++]);return E}getUri(e){e=Bg(this.defaults,e);const n=Qj(e.baseURL,e.url);return Dj(n,e.params,e.paramsSerializer)}}Un.forEach(["delete","get","head","options"],function(e){Ag.prototype[e]=function(n,r){return this.request(Bg(r||{},{method:e,url:n,data:(r||{}).data}))}});Un.forEach(["post","put","patch"],function(e){function n(r){return function(l,h,p){return this.request(Bg(p||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:l,data:h}))}}Ag.prototype[e]=n(),Ag.prototype[e+"Form"]=n(!0)});class XP{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(l){n=l});const r=this;this.promise.then(o=>{if(!r._listeners)return;let l=r._listeners.length;for(;l-- >0;)r._listeners[l](o);r._listeners=null}),this.promise.then=o=>{let l;const h=new Promise(p=>{r.subscribe(p),l=p}).then(o);return h.cancel=function(){r.unsubscribe(l)},h},e(function(l,h,p){r.reason||(r.reason=new t0(l,h,p),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new XP(function(o){e=o}),cancel:e}}}function _Ie(t){return function(n){return t.apply(null,n)}}function vIe(t){return Un.isObject(t)&&t.isAxiosError===!0}const L5={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(L5).forEach(([t,e])=>{L5[e]=t});function qj(t){const e=new Ag(t),n=Ej(Ag.prototype.request,e);return Un.extend(n,Ag.prototype,e,{allOwnKeys:!0}),Un.extend(n,e,null,{allOwnKeys:!0}),n.create=function(o){return qj(Bg(t,o))},n}const Ha=qj(wb);Ha.Axios=Ag;Ha.CanceledError=t0;Ha.CancelToken=XP;Ha.isCancel=zj;Ha.VERSION=Kj;Ha.toFormData=bB;Ha.AxiosError=Vi;Ha.Cancel=Ha.CanceledError;Ha.all=function(e){return Promise.all(e)};Ha.spread=_Ie;Ha.isAxiosError=vIe;Ha.mergeConfig=Bg;Ha.AxiosHeaders=fu;Ha.formToJSON=t=>Nj(Un.isHTMLForm(t)?new FormData(t):t);Ha.getAdapter=Gj.getAdapter;Ha.HttpStatusCode=L5;Ha.default=Ha;const bIe={data(){return{emailData:{to:"",subject:"",text:"",attachment:null},statusMessage:null}},methods:{handleFileUpload(t){const e=t.target.files[0],n=new FileReader;n.onload=r=>{this.emailData.attachment={content:btoa(r.target.result),filename:e.name,type:e.type}},n.readAsBinaryString(e)},async sendEmail(){try{const t=await Ha.post("http://localhost:3000/api/send-email",this.emailData);this.statusMessage="Email sent successfully"}catch{this.statusMessage="Failed to send email"}}}},n0=t=>(Sg("data-v-a9ca3c0c"),t=t(),Tg(),t),wIe={class:"send-email-form"},xIe=n0(()=>mt("h2",null,"Send Email",-1)),CIe={class:"form-group"},EIe=n0(()=>mt("label",{for:"to"},"To:",-1)),BIe={class:"form-group"},SIe=n0(()=>mt("label",{for:"subject"},"Subject:",-1)),TIe={class:"form-group"},IIe=n0(()=>mt("label",{for:"text"},"Message:",-1)),PIe={class:"form-group"},LIe=n0(()=>mt("label",{for:"attachment"},"Attachment:",-1)),FIe=n0(()=>mt("div",{class:"button-group"},[mt("button",{type:"submit"},"Send Email")],-1)),RIe={key:0,class:"status-message"};function kIe(t,e,n,r,o,l){return ve(),et("div",wIe,[xIe,mt("form",{onSubmit:e[4]||(e[4]=gf((...h)=>l.sendEmail&&l.sendEmail(...h),["prevent"]))},[mt("div",CIe,[EIe,Fo(mt("input",{"onUpdate:modelValue":e[0]||(e[0]=h=>o.emailData.to=h),id:"to",type:"email",required:""},null,512),[[Ol,o.emailData.to]])]),mt("div",BIe,[SIe,Fo(mt("input",{"onUpdate:modelValue":e[1]||(e[1]=h=>o.emailData.subject=h),id:"subject",type:"text",required:""},null,512),[[Ol,o.emailData.subject]])]),mt("div",TIe,[IIe,Fo(mt("textarea",{"onUpdate:modelValue":e[2]||(e[2]=h=>o.emailData.text=h),id:"text",required:""},null,512),[[Ol,o.emailData.text]])]),mt("div",PIe,[LIe,mt("input",{type:"file",onChange:e[3]||(e[3]=(...h)=>l.handleFileUpload&&l.handleFileUpload(...h)),id:"attachment"},null,32)]),FIe],32),o.statusMessage?(ve(),et("div",RIe,[mt("p",null,Ar(o.statusMessage),1)])):Sn("",!0)])}const MIe=_f(bIe,[["render",kIe],["__scopeId","data-v-a9ca3c0c"]]),ZP=t=>(Sg("data-v-46169720"),t=t(),Tg(),t),OIe=ZP(()=>mt("h1",null,"Admin Page",-1)),DIe={key:0,class:"alert alert-warning"},UIe={class:"table table-striped table-responsive"},NIe={key:0},zIe={key:1},VIe={key:0},QIe={key:1},HIe={key:0},jIe={key:1},$Ie={key:0},GIe={key:1},KIe=ZP(()=>mt("th",null,"Select to send email",-1)),qIe=ZP(()=>mt("th",null,"Action",-1)),WIe=["onMouseover"],XIe=["checked","onChange"],ZIe=["onClick"],YIe={"aria-label":"Page navigation"},JIe={class:"pagination justify-content-center"},e5e=["onClick"],_T=10,t5e={__name:"Adminpage2",setup(t){const e=Y_(),n=ub(),r=SA(),o=yr([]),l=yr(""),h=yr("email"),p=yr("asc"),i=yr(1),b=yr(null),E=yr([]),I=yr(""),O=ne=>{if(!ne)return null;const ue=new Date(ne),ye=new Date-ue,se=new Date(ye);return Math.abs(se.getUTCFullYear()-1970)},M=async ne=>{const ue=o.value.find(se=>se.uid===ne);if(ue&&ue.isAdmin){alert("Cannot delete an admin user.");return}if(window.confirm("Are you sure you want to delete this user?"))try{await uve(gb(e,"users",ne)),alert("User deleted successfully!"),Z()}catch(se){console.error("Error deleting user: ",se),alert("Failed to delete user.")}},G=async()=>{if(E.value.length===0){alert("Please select at least one user.");return}const ne="Your Email Subject",ue=I.value;try{(await fetch("http://localhost:3000/api/send-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({emails:E.value,subject:ne,message:ue})})).ok?(alert("Emails sent successfully!"),E.value=[],I.value=""):alert("Failed to send emails.")}catch(ye){console.error("Error sending email:",ye),alert("An error occurred while sending emails.")}},q=ne=>{E.value.includes(ne)?E.value=E.value.filter(ue=>ue!==ne):E.value.push(ne)},Z=async()=>{try{const ne=await lve(G0e(e,"users"));o.value=ne.docs.map(ue=>({uid:ue.id,...ue.data()}))}catch(ne){console.error("Error fetching users: ",ne)}},Y=ft(()=>o.value.filter(ne=>ne.email.toLowerCase().includes(l.value.toLowerCase())).sort((ne,ue)=>{const ye=p.value==="asc"?1:-1;return ne[h.value]<ue[h.value]?-1*ye:ne[h.value]>ue[h.value]?1*ye:0})),te=ft(()=>{const ne=(i.value-1)*_T;return Y.value.slice(ne,ne+_T)}),be=ft(()=>Math.ceil(Y.value.length/_T)),Pe=ne=>{ne<1||ne>be.value||(i.value=ne)},Se=ne=>{h.value=ne,p.value=p.value==="asc"?"desc":"asc"},Ie=ne=>{b.value=ne.uid},Ae=async()=>{if(window.confirm("Are you sure you want to log out?"))try{await a9(n),console.log("Logged out successfully"),r.push("/FireLogin")}catch(ue){console.error("Error logging out: ",ue)}};return ws(()=>{Z()}),(ne,ue)=>(ve(),et("div",null,[OIe,mt("button",{onClick:Ae,class:"btn btn-danger"},"Logout"),Fo(mt("input",{type:"text","onUpdate:modelValue":ue[0]||(ue[0]=ye=>l.value=ye),placeholder:"Search by email",class:"form-control mb-3"},null,512),[[Ol,l.value]]),Y.value.length===0?(ve(),et("div",DIe," No users found. ")):Sn("",!0),mt("table",UIe,[mt("thead",null,[mt("tr",null,[mt("th",{onClick:ue[1]||(ue[1]=ye=>Se("email")),style:{cursor:"pointer"}},[jr(" Email "),h.value==="email"&&p.value==="asc"?(ve(),et("span",NIe,"↑")):Sn("",!0),h.value==="email"&&p.value==="desc"?(ve(),et("span",zIe,"↓")):Sn("",!0)]),mt("th",{onClick:ue[2]||(ue[2]=ye=>Se("gender")),style:{cursor:"pointer"}},[jr(" Gender "),h.value==="gender"&&p.value==="asc"?(ve(),et("span",VIe,"↑")):Sn("",!0),h.value==="gender"&&p.value==="desc"?(ve(),et("span",QIe,"↓")):Sn("",!0)]),mt("th",{onClick:ue[3]||(ue[3]=ye=>Se("age")),style:{cursor:"pointer"}},[jr(" Age "),h.value==="age"&&p.value==="asc"?(ve(),et("span",HIe,"↑")):Sn("",!0),h.value==="age"&&p.value==="desc"?(ve(),et("span",jIe,"↓")):Sn("",!0)]),mt("th",{onClick:ue[4]||(ue[4]=ye=>Se("isAdmin")),style:{cursor:"pointer"}},[jr(" Is Admin "),h.value==="isAdmin"&&p.value==="asc"?(ve(),et("span",$Ie,"↑")):Sn("",!0),h.value==="isAdmin"&&p.value==="desc"?(ve(),et("span",GIe,"↓")):Sn("",!0)]),KIe,qIe])]),mt("tbody",null,[(ve(!0),et(_r,null,Li(te.value,ye=>(ve(),et("tr",{key:ye.uid,onMouseover:se=>Ie(ye),class:On({"table-primary":b.value===ye.uid})},[mt("td",null,Ar(ye.email),1),mt("td",null,Ar(ye.gender),1),mt("td",null,Ar(O(ye.dateOfBirth)),1),mt("td",null,Ar(ye.isAdmin?"Yes":"No"),1),mt("td",null,[mt("input",{type:"checkbox",checked:E.value.includes(ye.email),onChange:se=>q(ye.email)},null,40,XIe)]),mt("td",null,[mt("button",{onClick:se=>M(ye.uid),class:"btn btn-danger btn-sm"},"Delete",8,ZIe)])],42,WIe))),128))])]),Fo(mt("textarea",{"onUpdate:modelValue":ue[5]||(ue[5]=ye=>I.value=ye),placeholder:"Enter email content",class:"form-control mb-3",rows:"4"},null,512),[[Ol,I.value]]),mt("button",{onClick:G,class:"btn btn-primary"},"Send Bulk Email"),mt("nav",YIe,[mt("ul",JIe,[mt("li",{class:On(["page-item",{disabled:i.value===1}])},[mt("a",{class:"page-link",onClick:ue[6]||(ue[6]=ye=>Pe(i.value-1))},"Previous")],2),(ve(!0),et(_r,null,Li(be.value,ye=>(ve(),et("li",{class:On(["page-item",{active:i.value===ye}]),key:ye},[mt("a",{class:"page-link",onClick:se=>Pe(ye)},Ar(ye),9,e5e)],2))),128)),mt("li",{class:On(["page-item",{disabled:i.value===be.value}])},[mt("a",{class:"page-link",onClick:ue[7]||(ue[7]=ye=>Pe(i.value+1))},"Next")],2)])])]))}},n5e=_f(t5e,[["__scopeId","data-v-46169720"]]);var dd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wj(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function r5e(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var o=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return t[r]}})}),n}var Xj={exports:{}};(function(t,e){var n={};(function(r,o){t.exports=o()})(dd,function(){var r,o,l;function h(i,b){if(!r)r=b;else if(!o)o=b;else{var E="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+r+")(sharedChunk); ("+o+")(sharedChunk); self.onerror = null;",I={};r(I),l=b(I),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(l.workerUrl=window.URL.createObjectURL(new Blob([E],{type:"text/javascript"})))}}h(["exports"],function(i){function b(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var E,I={},O={};function M(){if(E)return O;E=1,Object.defineProperty(O,"__esModule",{value:!0}),O.setMatrixArrayType=function(y){O.ARRAY_TYPE=s=y},O.toRadian=function(y){return y*f},O.equals=function(y,A){return Math.abs(y-A)<=d*Math.max(1,Math.abs(y),Math.abs(A))},O.RANDOM=O.ARRAY_TYPE=O.EPSILON=void 0;var d=1e-6;O.EPSILON=d;var s=typeof Float32Array<"u"?Float32Array:Array;O.ARRAY_TYPE=s;var c=Math.random;O.RANDOM=c;var f=Math.PI/180;return Math.hypot||(Math.hypot=function(){for(var y=0,A=arguments.length;A--;)y+=arguments[A]*arguments[A];return Math.sqrt(y)}),O}var G,q={};function Z(){if(G)return q;function d(A){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},d(A)}G=1,Object.defineProperty(q,"__esModule",{value:!0}),q.create=function(){var A=new s.ARRAY_TYPE(4);return s.ARRAY_TYPE!=Float32Array&&(A[1]=0,A[2]=0),A[0]=1,A[3]=1,A},q.clone=function(A){var _=new s.ARRAY_TYPE(4);return _[0]=A[0],_[1]=A[1],_[2]=A[2],_[3]=A[3],_},q.copy=function(A,_){return A[0]=_[0],A[1]=_[1],A[2]=_[2],A[3]=_[3],A},q.identity=function(A){return A[0]=1,A[1]=0,A[2]=0,A[3]=1,A},q.fromValues=function(A,_,C,P){var R=new s.ARRAY_TYPE(4);return R[0]=A,R[1]=_,R[2]=C,R[3]=P,R},q.set=function(A,_,C,P,R){return A[0]=_,A[1]=C,A[2]=P,A[3]=R,A},q.transpose=function(A,_){if(A===_){var C=_[1];A[1]=_[2],A[2]=C}else A[0]=_[0],A[1]=_[2],A[2]=_[1],A[3]=_[3];return A},q.invert=function(A,_){var C=_[0],P=_[1],R=_[2],w=_[3],S=C*w-R*P;return S?(A[0]=w*(S=1/S),A[1]=-P*S,A[2]=-R*S,A[3]=C*S,A):null},q.adjoint=function(A,_){var C=_[0];return A[0]=_[3],A[1]=-_[1],A[2]=-_[2],A[3]=C,A},q.determinant=function(A){return A[0]*A[3]-A[2]*A[1]},q.multiply=f,q.rotate=function(A,_,C){var P=_[0],R=_[1],w=_[2],S=_[3],F=Math.sin(C),T=Math.cos(C);return A[0]=P*T+w*F,A[1]=R*T+S*F,A[2]=P*-F+w*T,A[3]=R*-F+S*T,A},q.scale=function(A,_,C){var P=_[1],R=_[2],w=_[3],S=C[0],F=C[1];return A[0]=_[0]*S,A[1]=P*S,A[2]=R*F,A[3]=w*F,A},q.fromRotation=function(A,_){var C=Math.sin(_),P=Math.cos(_);return A[0]=P,A[1]=C,A[2]=-C,A[3]=P,A},q.fromScaling=function(A,_){return A[0]=_[0],A[1]=0,A[2]=0,A[3]=_[1],A},q.str=function(A){return"mat2("+A[0]+", "+A[1]+", "+A[2]+", "+A[3]+")"},q.frob=function(A){return Math.hypot(A[0],A[1],A[2],A[3])},q.LDU=function(A,_,C,P){return A[2]=P[2]/P[0],C[0]=P[0],C[1]=P[1],C[3]=P[3]-A[2]*C[1],[A,_,C]},q.add=function(A,_,C){return A[0]=_[0]+C[0],A[1]=_[1]+C[1],A[2]=_[2]+C[2],A[3]=_[3]+C[3],A},q.subtract=y,q.exactEquals=function(A,_){return A[0]===_[0]&&A[1]===_[1]&&A[2]===_[2]&&A[3]===_[3]},q.equals=function(A,_){var C=A[0],P=A[1],R=A[2],w=A[3],S=_[0],F=_[1],T=_[2],L=_[3];return Math.abs(C-S)<=s.EPSILON*Math.max(1,Math.abs(C),Math.abs(S))&&Math.abs(P-F)<=s.EPSILON*Math.max(1,Math.abs(P),Math.abs(F))&&Math.abs(R-T)<=s.EPSILON*Math.max(1,Math.abs(R),Math.abs(T))&&Math.abs(w-L)<=s.EPSILON*Math.max(1,Math.abs(w),Math.abs(L))},q.multiplyScalar=function(A,_,C){return A[0]=_[0]*C,A[1]=_[1]*C,A[2]=_[2]*C,A[3]=_[3]*C,A},q.multiplyScalarAndAdd=function(A,_,C,P){return A[0]=_[0]+C[0]*P,A[1]=_[1]+C[1]*P,A[2]=_[2]+C[2]*P,A[3]=_[3]+C[3]*P,A},q.sub=q.mul=void 0;var s=function(A,_){if(A&&A.__esModule)return A;if(A===null||d(A)!=="object"&&typeof A!="function")return{default:A};var C=c(void 0);if(C&&C.has(A))return C.get(A);var P={},R=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var w in A)if(w!=="default"&&Object.prototype.hasOwnProperty.call(A,w)){var S=R?Object.getOwnPropertyDescriptor(A,w):null;S&&(S.get||S.set)?Object.defineProperty(P,w,S):P[w]=A[w]}return P.default=A,C&&C.set(A,P),P}(M());function c(A){if(typeof WeakMap!="function")return null;var _=new WeakMap,C=new WeakMap;return(c=function(P){return P?C:_})(A)}function f(A,_,C){var P=_[0],R=_[1],w=_[2],S=_[3],F=C[0],T=C[1],L=C[2],U=C[3];return A[0]=P*F+w*T,A[1]=R*F+S*T,A[2]=P*L+w*U,A[3]=R*L+S*U,A}function y(A,_,C){return A[0]=_[0]-C[0],A[1]=_[1]-C[1],A[2]=_[2]-C[2],A[3]=_[3]-C[3],A}return q.mul=f,q.sub=y,q}var Y,te={};function be(){if(Y)return te;function d(A){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},d(A)}Y=1,Object.defineProperty(te,"__esModule",{value:!0}),te.create=function(){var A=new s.ARRAY_TYPE(6);return s.ARRAY_TYPE!=Float32Array&&(A[1]=0,A[2]=0,A[4]=0,A[5]=0),A[0]=1,A[3]=1,A},te.clone=function(A){var _=new s.ARRAY_TYPE(6);return _[0]=A[0],_[1]=A[1],_[2]=A[2],_[3]=A[3],_[4]=A[4],_[5]=A[5],_},te.copy=function(A,_){return A[0]=_[0],A[1]=_[1],A[2]=_[2],A[3]=_[3],A[4]=_[4],A[5]=_[5],A},te.identity=function(A){return A[0]=1,A[1]=0,A[2]=0,A[3]=1,A[4]=0,A[5]=0,A},te.fromValues=function(A,_,C,P,R,w){var S=new s.ARRAY_TYPE(6);return S[0]=A,S[1]=_,S[2]=C,S[3]=P,S[4]=R,S[5]=w,S},te.set=function(A,_,C,P,R,w,S){return A[0]=_,A[1]=C,A[2]=P,A[3]=R,A[4]=w,A[5]=S,A},te.invert=function(A,_){var C=_[0],P=_[1],R=_[2],w=_[3],S=_[4],F=_[5],T=C*w-P*R;return T?(A[0]=w*(T=1/T),A[1]=-P*T,A[2]=-R*T,A[3]=C*T,A[4]=(R*F-w*S)*T,A[5]=(P*S-C*F)*T,A):null},te.determinant=function(A){return A[0]*A[3]-A[1]*A[2]},te.multiply=f,te.rotate=function(A,_,C){var P=_[0],R=_[1],w=_[2],S=_[3],F=_[4],T=_[5],L=Math.sin(C),U=Math.cos(C);return A[0]=P*U+w*L,A[1]=R*U+S*L,A[2]=P*-L+w*U,A[3]=R*-L+S*U,A[4]=F,A[5]=T,A},te.scale=function(A,_,C){var P=_[1],R=_[2],w=_[3],S=_[4],F=_[5],T=C[0],L=C[1];return A[0]=_[0]*T,A[1]=P*T,A[2]=R*L,A[3]=w*L,A[4]=S,A[5]=F,A},te.translate=function(A,_,C){var P=_[0],R=_[1],w=_[2],S=_[3],F=_[4],T=_[5],L=C[0],U=C[1];return A[0]=P,A[1]=R,A[2]=w,A[3]=S,A[4]=P*L+w*U+F,A[5]=R*L+S*U+T,A},te.fromRotation=function(A,_){var C=Math.sin(_),P=Math.cos(_);return A[0]=P,A[1]=C,A[2]=-C,A[3]=P,A[4]=0,A[5]=0,A},te.fromScaling=function(A,_){return A[0]=_[0],A[1]=0,A[2]=0,A[3]=_[1],A[4]=0,A[5]=0,A},te.fromTranslation=function(A,_){return A[0]=1,A[1]=0,A[2]=0,A[3]=1,A[4]=_[0],A[5]=_[1],A},te.str=function(A){return"mat2d("+A[0]+", "+A[1]+", "+A[2]+", "+A[3]+", "+A[4]+", "+A[5]+")"},te.frob=function(A){return Math.hypot(A[0],A[1],A[2],A[3],A[4],A[5],1)},te.add=function(A,_,C){return A[0]=_[0]+C[0],A[1]=_[1]+C[1],A[2]=_[2]+C[2],A[3]=_[3]+C[3],A[4]=_[4]+C[4],A[5]=_[5]+C[5],A},te.subtract=y,te.multiplyScalar=function(A,_,C){return A[0]=_[0]*C,A[1]=_[1]*C,A[2]=_[2]*C,A[3]=_[3]*C,A[4]=_[4]*C,A[5]=_[5]*C,A},te.multiplyScalarAndAdd=function(A,_,C,P){return A[0]=_[0]+C[0]*P,A[1]=_[1]+C[1]*P,A[2]=_[2]+C[2]*P,A[3]=_[3]+C[3]*P,A[4]=_[4]+C[4]*P,A[5]=_[5]+C[5]*P,A},te.exactEquals=function(A,_){return A[0]===_[0]&&A[1]===_[1]&&A[2]===_[2]&&A[3]===_[3]&&A[4]===_[4]&&A[5]===_[5]},te.equals=function(A,_){var C=A[0],P=A[1],R=A[2],w=A[3],S=A[4],F=A[5],T=_[0],L=_[1],U=_[2],V=_[3],$=_[4],ee=_[5];return Math.abs(C-T)<=s.EPSILON*Math.max(1,Math.abs(C),Math.abs(T))&&Math.abs(P-L)<=s.EPSILON*Math.max(1,Math.abs(P),Math.abs(L))&&Math.abs(R-U)<=s.EPSILON*Math.max(1,Math.abs(R),Math.abs(U))&&Math.abs(w-V)<=s.EPSILON*Math.max(1,Math.abs(w),Math.abs(V))&&Math.abs(S-$)<=s.EPSILON*Math.max(1,Math.abs(S),Math.abs($))&&Math.abs(F-ee)<=s.EPSILON*Math.max(1,Math.abs(F),Math.abs(ee))},te.sub=te.mul=void 0;var s=function(A,_){if(A&&A.__esModule)return A;if(A===null||d(A)!=="object"&&typeof A!="function")return{default:A};var C=c(void 0);if(C&&C.has(A))return C.get(A);var P={},R=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var w in A)if(w!=="default"&&Object.prototype.hasOwnProperty.call(A,w)){var S=R?Object.getOwnPropertyDescriptor(A,w):null;S&&(S.get||S.set)?Object.defineProperty(P,w,S):P[w]=A[w]}return P.default=A,C&&C.set(A,P),P}(M());function c(A){if(typeof WeakMap!="function")return null;var _=new WeakMap,C=new WeakMap;return(c=function(P){return P?C:_})(A)}function f(A,_,C){var P=_[0],R=_[1],w=_[2],S=_[3],F=_[4],T=_[5],L=C[0],U=C[1],V=C[2],$=C[3],ee=C[4],ie=C[5];return A[0]=P*L+w*U,A[1]=R*L+S*U,A[2]=P*V+w*$,A[3]=R*V+S*$,A[4]=P*ee+w*ie+F,A[5]=R*ee+S*ie+T,A}function y(A,_,C){return A[0]=_[0]-C[0],A[1]=_[1]-C[1],A[2]=_[2]-C[2],A[3]=_[3]-C[3],A[4]=_[4]-C[4],A[5]=_[5]-C[5],A}return te.mul=f,te.sub=y,te}var Pe,Se={};function Ie(){if(Pe)return Se;function d(A){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},d(A)}Pe=1,Object.defineProperty(Se,"__esModule",{value:!0}),Se.create=function(){var A=new s.ARRAY_TYPE(9);return s.ARRAY_TYPE!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[5]=0,A[6]=0,A[7]=0),A[0]=1,A[4]=1,A[8]=1,A},Se.fromMat4=function(A,_){return A[0]=_[0],A[1]=_[1],A[2]=_[2],A[3]=_[4],A[4]=_[5],A[5]=_[6],A[6]=_[8],A[7]=_[9],A[8]=_[10],A},Se.clone=function(A){var _=new s.ARRAY_TYPE(9);return _[0]=A[0],_[1]=A[1],_[2]=A[2],_[3]=A[3],_[4]=A[4],_[5]=A[5],_[6]=A[6],_[7]=A[7],_[8]=A[8],_},Se.copy=function(A,_){return A[0]=_[0],A[1]=_[1],A[2]=_[2],A[3]=_[3],A[4]=_[4],A[5]=_[5],A[6]=_[6],A[7]=_[7],A[8]=_[8],A},Se.fromValues=function(A,_,C,P,R,w,S,F,T){var L=new s.ARRAY_TYPE(9);return L[0]=A,L[1]=_,L[2]=C,L[3]=P,L[4]=R,L[5]=w,L[6]=S,L[7]=F,L[8]=T,L},Se.set=function(A,_,C,P,R,w,S,F,T,L){return A[0]=_,A[1]=C,A[2]=P,A[3]=R,A[4]=w,A[5]=S,A[6]=F,A[7]=T,A[8]=L,A},Se.identity=function(A){return A[0]=1,A[1]=0,A[2]=0,A[3]=0,A[4]=1,A[5]=0,A[6]=0,A[7]=0,A[8]=1,A},Se.transpose=function(A,_){if(A===_){var C=_[1],P=_[2],R=_[5];A[1]=_[3],A[2]=_[6],A[3]=C,A[5]=_[7],A[6]=P,A[7]=R}else A[0]=_[0],A[1]=_[3],A[2]=_[6],A[3]=_[1],A[4]=_[4],A[5]=_[7],A[6]=_[2],A[7]=_[5],A[8]=_[8];return A},Se.invert=function(A,_){var C=_[0],P=_[1],R=_[2],w=_[3],S=_[4],F=_[5],T=_[6],L=_[7],U=_[8],V=U*S-F*L,$=-U*w+F*T,ee=L*w-S*T,ie=C*V+P*$+R*ee;return ie?(A[0]=V*(ie=1/ie),A[1]=(-U*P+R*L)*ie,A[2]=(F*P-R*S)*ie,A[3]=$*ie,A[4]=(U*C-R*T)*ie,A[5]=(-F*C+R*w)*ie,A[6]=ee*ie,A[7]=(-L*C+P*T)*ie,A[8]=(S*C-P*w)*ie,A):null},Se.adjoint=function(A,_){var C=_[0],P=_[1],R=_[2],w=_[3],S=_[4],F=_[5],T=_[6],L=_[7],U=_[8];return A[0]=S*U-F*L,A[1]=R*L-P*U,A[2]=P*F-R*S,A[3]=F*T-w*U,A[4]=C*U-R*T,A[5]=R*w-C*F,A[6]=w*L-S*T,A[7]=P*T-C*L,A[8]=C*S-P*w,A},Se.determinant=function(A){var _=A[3],C=A[4],P=A[5],R=A[6],w=A[7],S=A[8];return A[0]*(S*C-P*w)+A[1]*(-S*_+P*R)+A[2]*(w*_-C*R)},Se.multiply=f,Se.translate=function(A,_,C){var P=_[0],R=_[1],w=_[2],S=_[3],F=_[4],T=_[5],L=_[6],U=_[7],V=_[8],$=C[0],ee=C[1];return A[0]=P,A[1]=R,A[2]=w,A[3]=S,A[4]=F,A[5]=T,A[6]=$*P+ee*S+L,A[7]=$*R+ee*F+U,A[8]=$*w+ee*T+V,A},Se.rotate=function(A,_,C){var P=_[0],R=_[1],w=_[2],S=_[3],F=_[4],T=_[5],L=_[6],U=_[7],V=_[8],$=Math.sin(C),ee=Math.cos(C);return A[0]=ee*P+$*S,A[1]=ee*R+$*F,A[2]=ee*w+$*T,A[3]=ee*S-$*P,A[4]=ee*F-$*R,A[5]=ee*T-$*w,A[6]=L,A[7]=U,A[8]=V,A},Se.scale=function(A,_,C){var P=C[0],R=C[1];return A[0]=P*_[0],A[1]=P*_[1],A[2]=P*_[2],A[3]=R*_[3],A[4]=R*_[4],A[5]=R*_[5],A[6]=_[6],A[7]=_[7],A[8]=_[8],A},Se.fromTranslation=function(A,_){return A[0]=1,A[1]=0,A[2]=0,A[3]=0,A[4]=1,A[5]=0,A[6]=_[0],A[7]=_[1],A[8]=1,A},Se.fromRotation=function(A,_){var C=Math.sin(_),P=Math.cos(_);return A[0]=P,A[1]=C,A[2]=0,A[3]=-C,A[4]=P,A[5]=0,A[6]=0,A[7]=0,A[8]=1,A},Se.fromScaling=function(A,_){return A[0]=_[0],A[1]=0,A[2]=0,A[3]=0,A[4]=_[1],A[5]=0,A[6]=0,A[7]=0,A[8]=1,A},Se.fromMat2d=function(A,_){return A[0]=_[0],A[1]=_[1],A[2]=0,A[3]=_[2],A[4]=_[3],A[5]=0,A[6]=_[4],A[7]=_[5],A[8]=1,A},Se.fromQuat=function(A,_){var C=_[0],P=_[1],R=_[2],w=_[3],S=C+C,F=P+P,T=R+R,L=C*S,U=P*S,V=P*F,$=R*S,ee=R*F,ie=R*T,K=w*S,ce=w*F,he=w*T;return A[0]=1-V-ie,A[3]=U-he,A[6]=$+ce,A[1]=U+he,A[4]=1-L-ie,A[7]=ee-K,A[2]=$-ce,A[5]=ee+K,A[8]=1-L-V,A},Se.normalFromMat4=function(A,_){var C=_[0],P=_[1],R=_[2],w=_[3],S=_[4],F=_[5],T=_[6],L=_[7],U=_[8],V=_[9],$=_[10],ee=_[11],ie=_[12],K=_[13],ce=_[14],he=_[15],Be=C*F-P*S,Ne=C*T-R*S,Ve=C*L-w*S,Oe=P*T-R*F,rt=P*L-w*F,je=R*L-w*T,ct=U*K-V*ie,yt=U*ce-$*ie,Ct=U*he-ee*ie,Et=V*ce-$*K,Pt=V*he-ee*K,$t=$*he-ee*ce,Lt=Be*$t-Ne*Pt+Ve*Et+Oe*Ct-rt*yt+je*ct;return Lt?(A[0]=(F*$t-T*Pt+L*Et)*(Lt=1/Lt),A[1]=(T*Ct-S*$t-L*yt)*Lt,A[2]=(S*Pt-F*Ct+L*ct)*Lt,A[3]=(R*Pt-P*$t-w*Et)*Lt,A[4]=(C*$t-R*Ct+w*yt)*Lt,A[5]=(P*Ct-C*Pt-w*ct)*Lt,A[6]=(K*je-ce*rt+he*Oe)*Lt,A[7]=(ce*Ve-ie*je-he*Ne)*Lt,A[8]=(ie*rt-K*Ve+he*Be)*Lt,A):null},Se.projection=function(A,_,C){return A[0]=2/_,A[1]=0,A[2]=0,A[3]=0,A[4]=-2/C,A[5]=0,A[6]=-1,A[7]=1,A[8]=1,A},Se.str=function(A){return"mat3("+A[0]+", "+A[1]+", "+A[2]+", "+A[3]+", "+A[4]+", "+A[5]+", "+A[6]+", "+A[7]+", "+A[8]+")"},Se.frob=function(A){return Math.hypot(A[0],A[1],A[2],A[3],A[4],A[5],A[6],A[7],A[8])},Se.add=function(A,_,C){return A[0]=_[0]+C[0],A[1]=_[1]+C[1],A[2]=_[2]+C[2],A[3]=_[3]+C[3],A[4]=_[4]+C[4],A[5]=_[5]+C[5],A[6]=_[6]+C[6],A[7]=_[7]+C[7],A[8]=_[8]+C[8],A},Se.subtract=y,Se.multiplyScalar=function(A,_,C){return A[0]=_[0]*C,A[1]=_[1]*C,A[2]=_[2]*C,A[3]=_[3]*C,A[4]=_[4]*C,A[5]=_[5]*C,A[6]=_[6]*C,A[7]=_[7]*C,A[8]=_[8]*C,A},Se.multiplyScalarAndAdd=function(A,_,C,P){return A[0]=_[0]+C[0]*P,A[1]=_[1]+C[1]*P,A[2]=_[2]+C[2]*P,A[3]=_[3]+C[3]*P,A[4]=_[4]+C[4]*P,A[5]=_[5]+C[5]*P,A[6]=_[6]+C[6]*P,A[7]=_[7]+C[7]*P,A[8]=_[8]+C[8]*P,A},Se.exactEquals=function(A,_){return A[0]===_[0]&&A[1]===_[1]&&A[2]===_[2]&&A[3]===_[3]&&A[4]===_[4]&&A[5]===_[5]&&A[6]===_[6]&&A[7]===_[7]&&A[8]===_[8]},Se.equals=function(A,_){var C=A[0],P=A[1],R=A[2],w=A[3],S=A[4],F=A[5],T=A[6],L=A[7],U=A[8],V=_[0],$=_[1],ee=_[2],ie=_[3],K=_[4],ce=_[5],he=_[6],Be=_[7],Ne=_[8];return Math.abs(C-V)<=s.EPSILON*Math.max(1,Math.abs(C),Math.abs(V))&&Math.abs(P-$)<=s.EPSILON*Math.max(1,Math.abs(P),Math.abs($))&&Math.abs(R-ee)<=s.EPSILON*Math.max(1,Math.abs(R),Math.abs(ee))&&Math.abs(w-ie)<=s.EPSILON*Math.max(1,Math.abs(w),Math.abs(ie))&&Math.abs(S-K)<=s.EPSILON*Math.max(1,Math.abs(S),Math.abs(K))&&Math.abs(F-ce)<=s.EPSILON*Math.max(1,Math.abs(F),Math.abs(ce))&&Math.abs(T-he)<=s.EPSILON*Math.max(1,Math.abs(T),Math.abs(he))&&Math.abs(L-Be)<=s.EPSILON*Math.max(1,Math.abs(L),Math.abs(Be))&&Math.abs(U-Ne)<=s.EPSILON*Math.max(1,Math.abs(U),Math.abs(Ne))},Se.sub=Se.mul=void 0;var s=function(A,_){if(A&&A.__esModule)return A;if(A===null||d(A)!=="object"&&typeof A!="function")return{default:A};var C=c(void 0);if(C&&C.has(A))return C.get(A);var P={},R=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var w in A)if(w!=="default"&&Object.prototype.hasOwnProperty.call(A,w)){var S=R?Object.getOwnPropertyDescriptor(A,w):null;S&&(S.get||S.set)?Object.defineProperty(P,w,S):P[w]=A[w]}return P.default=A,C&&C.set(A,P),P}(M());function c(A){if(typeof WeakMap!="function")return null;var _=new WeakMap,C=new WeakMap;return(c=function(P){return P?C:_})(A)}function f(A,_,C){var P=_[0],R=_[1],w=_[2],S=_[3],F=_[4],T=_[5],L=_[6],U=_[7],V=_[8],$=C[0],ee=C[1],ie=C[2],K=C[3],ce=C[4],he=C[5],Be=C[6],Ne=C[7],Ve=C[8];return A[0]=$*P+ee*S+ie*L,A[1]=$*R+ee*F+ie*U,A[2]=$*w+ee*T+ie*V,A[3]=K*P+ce*S+he*L,A[4]=K*R+ce*F+he*U,A[5]=K*w+ce*T+he*V,A[6]=Be*P+Ne*S+Ve*L,A[7]=Be*R+Ne*F+Ve*U,A[8]=Be*w+Ne*T+Ve*V,A}function y(A,_,C){return A[0]=_[0]-C[0],A[1]=_[1]-C[1],A[2]=_[2]-C[2],A[3]=_[3]-C[3],A[4]=_[4]-C[4],A[5]=_[5]-C[5],A[6]=_[6]-C[6],A[7]=_[7]-C[7],A[8]=_[8]-C[8],A}return Se.mul=f,Se.sub=y,Se}var Ae,ne={};function ue(){if(Ae)return ne;function d(w){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},d(w)}Ae=1,Object.defineProperty(ne,"__esModule",{value:!0}),ne.create=function(){var w=new s.ARRAY_TYPE(16);return s.ARRAY_TYPE!=Float32Array&&(w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[11]=0,w[12]=0,w[13]=0,w[14]=0),w[0]=1,w[5]=1,w[10]=1,w[15]=1,w},ne.clone=function(w){var S=new s.ARRAY_TYPE(16);return S[0]=w[0],S[1]=w[1],S[2]=w[2],S[3]=w[3],S[4]=w[4],S[5]=w[5],S[6]=w[6],S[7]=w[7],S[8]=w[8],S[9]=w[9],S[10]=w[10],S[11]=w[11],S[12]=w[12],S[13]=w[13],S[14]=w[14],S[15]=w[15],S},ne.copy=function(w,S){return w[0]=S[0],w[1]=S[1],w[2]=S[2],w[3]=S[3],w[4]=S[4],w[5]=S[5],w[6]=S[6],w[7]=S[7],w[8]=S[8],w[9]=S[9],w[10]=S[10],w[11]=S[11],w[12]=S[12],w[13]=S[13],w[14]=S[14],w[15]=S[15],w},ne.fromValues=function(w,S,F,T,L,U,V,$,ee,ie,K,ce,he,Be,Ne,Ve){var Oe=new s.ARRAY_TYPE(16);return Oe[0]=w,Oe[1]=S,Oe[2]=F,Oe[3]=T,Oe[4]=L,Oe[5]=U,Oe[6]=V,Oe[7]=$,Oe[8]=ee,Oe[9]=ie,Oe[10]=K,Oe[11]=ce,Oe[12]=he,Oe[13]=Be,Oe[14]=Ne,Oe[15]=Ve,Oe},ne.set=function(w,S,F,T,L,U,V,$,ee,ie,K,ce,he,Be,Ne,Ve,Oe){return w[0]=S,w[1]=F,w[2]=T,w[3]=L,w[4]=U,w[5]=V,w[6]=$,w[7]=ee,w[8]=ie,w[9]=K,w[10]=ce,w[11]=he,w[12]=Be,w[13]=Ne,w[14]=Ve,w[15]=Oe,w},ne.identity=f,ne.transpose=function(w,S){if(w===S){var F=S[1],T=S[2],L=S[3],U=S[6],V=S[7],$=S[11];w[1]=S[4],w[2]=S[8],w[3]=S[12],w[4]=F,w[6]=S[9],w[7]=S[13],w[8]=T,w[9]=U,w[11]=S[14],w[12]=L,w[13]=V,w[14]=$}else w[0]=S[0],w[1]=S[4],w[2]=S[8],w[3]=S[12],w[4]=S[1],w[5]=S[5],w[6]=S[9],w[7]=S[13],w[8]=S[2],w[9]=S[6],w[10]=S[10],w[11]=S[14],w[12]=S[3],w[13]=S[7],w[14]=S[11],w[15]=S[15];return w},ne.invert=function(w,S){var F=S[0],T=S[1],L=S[2],U=S[3],V=S[4],$=S[5],ee=S[6],ie=S[7],K=S[8],ce=S[9],he=S[10],Be=S[11],Ne=S[12],Ve=S[13],Oe=S[14],rt=S[15],je=F*$-T*V,ct=F*ee-L*V,yt=F*ie-U*V,Ct=T*ee-L*$,Et=T*ie-U*$,Pt=L*ie-U*ee,$t=K*Ve-ce*Ne,Lt=K*Oe-he*Ne,dn=K*rt-Be*Ne,xn=ce*Oe-he*Ve,tn=ce*rt-Be*Ve,Jn=he*rt-Be*Oe,Hn=je*Jn-ct*tn+yt*xn+Ct*dn-Et*Lt+Pt*$t;return Hn?(w[0]=($*Jn-ee*tn+ie*xn)*(Hn=1/Hn),w[1]=(L*tn-T*Jn-U*xn)*Hn,w[2]=(Ve*Pt-Oe*Et+rt*Ct)*Hn,w[3]=(he*Et-ce*Pt-Be*Ct)*Hn,w[4]=(ee*dn-V*Jn-ie*Lt)*Hn,w[5]=(F*Jn-L*dn+U*Lt)*Hn,w[6]=(Oe*yt-Ne*Pt-rt*ct)*Hn,w[7]=(K*Pt-he*yt+Be*ct)*Hn,w[8]=(V*tn-$*dn+ie*$t)*Hn,w[9]=(T*dn-F*tn-U*$t)*Hn,w[10]=(Ne*Et-Ve*yt+rt*je)*Hn,w[11]=(ce*yt-K*Et-Be*je)*Hn,w[12]=($*Lt-V*xn-ee*$t)*Hn,w[13]=(F*xn-T*Lt+L*$t)*Hn,w[14]=(Ve*ct-Ne*Ct-Oe*je)*Hn,w[15]=(K*Ct-ce*ct+he*je)*Hn,w):null},ne.adjoint=function(w,S){var F=S[0],T=S[1],L=S[2],U=S[3],V=S[4],$=S[5],ee=S[6],ie=S[7],K=S[8],ce=S[9],he=S[10],Be=S[11],Ne=S[12],Ve=S[13],Oe=S[14],rt=S[15];return w[0]=$*(he*rt-Be*Oe)-ce*(ee*rt-ie*Oe)+Ve*(ee*Be-ie*he),w[1]=-(T*(he*rt-Be*Oe)-ce*(L*rt-U*Oe)+Ve*(L*Be-U*he)),w[2]=T*(ee*rt-ie*Oe)-$*(L*rt-U*Oe)+Ve*(L*ie-U*ee),w[3]=-(T*(ee*Be-ie*he)-$*(L*Be-U*he)+ce*(L*ie-U*ee)),w[4]=-(V*(he*rt-Be*Oe)-K*(ee*rt-ie*Oe)+Ne*(ee*Be-ie*he)),w[5]=F*(he*rt-Be*Oe)-K*(L*rt-U*Oe)+Ne*(L*Be-U*he),w[6]=-(F*(ee*rt-ie*Oe)-V*(L*rt-U*Oe)+Ne*(L*ie-U*ee)),w[7]=F*(ee*Be-ie*he)-V*(L*Be-U*he)+K*(L*ie-U*ee),w[8]=V*(ce*rt-Be*Ve)-K*($*rt-ie*Ve)+Ne*($*Be-ie*ce),w[9]=-(F*(ce*rt-Be*Ve)-K*(T*rt-U*Ve)+Ne*(T*Be-U*ce)),w[10]=F*($*rt-ie*Ve)-V*(T*rt-U*Ve)+Ne*(T*ie-U*$),w[11]=-(F*($*Be-ie*ce)-V*(T*Be-U*ce)+K*(T*ie-U*$)),w[12]=-(V*(ce*Oe-he*Ve)-K*($*Oe-ee*Ve)+Ne*($*he-ee*ce)),w[13]=F*(ce*Oe-he*Ve)-K*(T*Oe-L*Ve)+Ne*(T*he-L*ce),w[14]=-(F*($*Oe-ee*Ve)-V*(T*Oe-L*Ve)+Ne*(T*ee-L*$)),w[15]=F*($*he-ee*ce)-V*(T*he-L*ce)+K*(T*ee-L*$),w},ne.determinant=function(w){var S=w[0],F=w[1],T=w[2],L=w[3],U=w[4],V=w[5],$=w[6],ee=w[7],ie=w[8],K=w[9],ce=w[10],he=w[11],Be=w[12],Ne=w[13],Ve=w[14],Oe=w[15];return(S*V-F*U)*(ce*Oe-he*Ve)-(S*$-T*U)*(K*Oe-he*Ne)+(S*ee-L*U)*(K*Ve-ce*Ne)+(F*$-T*V)*(ie*Oe-he*Be)-(F*ee-L*V)*(ie*Ve-ce*Be)+(T*ee-L*$)*(ie*Ne-K*Be)},ne.multiply=y,ne.translate=function(w,S,F){var T,L,U,V,$,ee,ie,K,ce,he,Be,Ne,Ve=F[0],Oe=F[1],rt=F[2];return S===w?(w[12]=S[0]*Ve+S[4]*Oe+S[8]*rt+S[12],w[13]=S[1]*Ve+S[5]*Oe+S[9]*rt+S[13],w[14]=S[2]*Ve+S[6]*Oe+S[10]*rt+S[14],w[15]=S[3]*Ve+S[7]*Oe+S[11]*rt+S[15]):(L=S[1],U=S[2],V=S[3],$=S[4],ee=S[5],ie=S[6],K=S[7],ce=S[8],he=S[9],Be=S[10],Ne=S[11],w[0]=T=S[0],w[1]=L,w[2]=U,w[3]=V,w[4]=$,w[5]=ee,w[6]=ie,w[7]=K,w[8]=ce,w[9]=he,w[10]=Be,w[11]=Ne,w[12]=T*Ve+$*Oe+ce*rt+S[12],w[13]=L*Ve+ee*Oe+he*rt+S[13],w[14]=U*Ve+ie*Oe+Be*rt+S[14],w[15]=V*Ve+K*Oe+Ne*rt+S[15]),w},ne.scale=function(w,S,F){var T=F[0],L=F[1],U=F[2];return w[0]=S[0]*T,w[1]=S[1]*T,w[2]=S[2]*T,w[3]=S[3]*T,w[4]=S[4]*L,w[5]=S[5]*L,w[6]=S[6]*L,w[7]=S[7]*L,w[8]=S[8]*U,w[9]=S[9]*U,w[10]=S[10]*U,w[11]=S[11]*U,w[12]=S[12],w[13]=S[13],w[14]=S[14],w[15]=S[15],w},ne.rotate=function(w,S,F,T){var L,U,V,$,ee,ie,K,ce,he,Be,Ne,Ve,Oe,rt,je,ct,yt,Ct,Et,Pt,$t,Lt,dn,xn,tn=T[0],Jn=T[1],Hn=T[2],kn=Math.hypot(tn,Jn,Hn);return kn<s.EPSILON?null:(tn*=kn=1/kn,Jn*=kn,Hn*=kn,L=Math.sin(F),U=Math.cos(F),ee=S[1],ie=S[2],K=S[3],he=S[5],Be=S[6],Ne=S[7],Oe=S[9],rt=S[10],je=S[11],ct=tn*tn*(V=1-U)+U,Et=tn*Jn*V-Hn*L,Pt=Jn*Jn*V+U,$t=Hn*Jn*V+tn*L,Lt=tn*Hn*V+Jn*L,dn=Jn*Hn*V-tn*L,xn=Hn*Hn*V+U,w[0]=($=S[0])*ct+(ce=S[4])*(yt=Jn*tn*V+Hn*L)+(Ve=S[8])*(Ct=Hn*tn*V-Jn*L),w[1]=ee*ct+he*yt+Oe*Ct,w[2]=ie*ct+Be*yt+rt*Ct,w[3]=K*ct+Ne*yt+je*Ct,w[4]=$*Et+ce*Pt+Ve*$t,w[5]=ee*Et+he*Pt+Oe*$t,w[6]=ie*Et+Be*Pt+rt*$t,w[7]=K*Et+Ne*Pt+je*$t,w[8]=$*Lt+ce*dn+Ve*xn,w[9]=ee*Lt+he*dn+Oe*xn,w[10]=ie*Lt+Be*dn+rt*xn,w[11]=K*Lt+Ne*dn+je*xn,S!==w&&(w[12]=S[12],w[13]=S[13],w[14]=S[14],w[15]=S[15]),w)},ne.rotateX=function(w,S,F){var T=Math.sin(F),L=Math.cos(F),U=S[4],V=S[5],$=S[6],ee=S[7],ie=S[8],K=S[9],ce=S[10],he=S[11];return S!==w&&(w[0]=S[0],w[1]=S[1],w[2]=S[2],w[3]=S[3],w[12]=S[12],w[13]=S[13],w[14]=S[14],w[15]=S[15]),w[4]=U*L+ie*T,w[5]=V*L+K*T,w[6]=$*L+ce*T,w[7]=ee*L+he*T,w[8]=ie*L-U*T,w[9]=K*L-V*T,w[10]=ce*L-$*T,w[11]=he*L-ee*T,w},ne.rotateY=function(w,S,F){var T=Math.sin(F),L=Math.cos(F),U=S[0],V=S[1],$=S[2],ee=S[3],ie=S[8],K=S[9],ce=S[10],he=S[11];return S!==w&&(w[4]=S[4],w[5]=S[5],w[6]=S[6],w[7]=S[7],w[12]=S[12],w[13]=S[13],w[14]=S[14],w[15]=S[15]),w[0]=U*L-ie*T,w[1]=V*L-K*T,w[2]=$*L-ce*T,w[3]=ee*L-he*T,w[8]=U*T+ie*L,w[9]=V*T+K*L,w[10]=$*T+ce*L,w[11]=ee*T+he*L,w},ne.rotateZ=function(w,S,F){var T=Math.sin(F),L=Math.cos(F),U=S[0],V=S[1],$=S[2],ee=S[3],ie=S[4],K=S[5],ce=S[6],he=S[7];return S!==w&&(w[8]=S[8],w[9]=S[9],w[10]=S[10],w[11]=S[11],w[12]=S[12],w[13]=S[13],w[14]=S[14],w[15]=S[15]),w[0]=U*L+ie*T,w[1]=V*L+K*T,w[2]=$*L+ce*T,w[3]=ee*L+he*T,w[4]=ie*L-U*T,w[5]=K*L-V*T,w[6]=ce*L-$*T,w[7]=he*L-ee*T,w},ne.fromTranslation=function(w,S){return w[0]=1,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=1,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[10]=1,w[11]=0,w[12]=S[0],w[13]=S[1],w[14]=S[2],w[15]=1,w},ne.fromScaling=function(w,S){return w[0]=S[0],w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=S[1],w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[10]=S[2],w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w},ne.fromRotation=function(w,S,F){var T,L,U,V=F[0],$=F[1],ee=F[2],ie=Math.hypot(V,$,ee);return ie<s.EPSILON?null:(V*=ie=1/ie,$*=ie,ee*=ie,T=Math.sin(S),L=Math.cos(S),w[0]=V*V*(U=1-L)+L,w[1]=$*V*U+ee*T,w[2]=ee*V*U-$*T,w[3]=0,w[4]=V*$*U-ee*T,w[5]=$*$*U+L,w[6]=ee*$*U+V*T,w[7]=0,w[8]=V*ee*U+$*T,w[9]=$*ee*U-V*T,w[10]=ee*ee*U+L,w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w)},ne.fromXRotation=function(w,S){var F=Math.sin(S),T=Math.cos(S);return w[0]=1,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=T,w[6]=F,w[7]=0,w[8]=0,w[9]=-F,w[10]=T,w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w},ne.fromYRotation=function(w,S){var F=Math.sin(S),T=Math.cos(S);return w[0]=T,w[1]=0,w[2]=-F,w[3]=0,w[4]=0,w[5]=1,w[6]=0,w[7]=0,w[8]=F,w[9]=0,w[10]=T,w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w},ne.fromZRotation=function(w,S){var F=Math.sin(S),T=Math.cos(S);return w[0]=T,w[1]=F,w[2]=0,w[3]=0,w[4]=-F,w[5]=T,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[10]=1,w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w},ne.fromRotationTranslation=A,ne.fromQuat2=function(w,S){var F=new s.ARRAY_TYPE(3),T=-S[0],L=-S[1],U=-S[2],V=S[3],$=S[4],ee=S[5],ie=S[6],K=S[7],ce=T*T+L*L+U*U+V*V;return ce>0?(F[0]=2*($*V+K*T+ee*U-ie*L)/ce,F[1]=2*(ee*V+K*L+ie*T-$*U)/ce,F[2]=2*(ie*V+K*U+$*L-ee*T)/ce):(F[0]=2*($*V+K*T+ee*U-ie*L),F[1]=2*(ee*V+K*L+ie*T-$*U),F[2]=2*(ie*V+K*U+$*L-ee*T)),A(w,S,F),w},ne.getTranslation=function(w,S){return w[0]=S[12],w[1]=S[13],w[2]=S[14],w},ne.getScaling=_,ne.getRotation=function(w,S){var F=new s.ARRAY_TYPE(3);_(F,S);var T=1/F[0],L=1/F[1],U=1/F[2],V=S[0]*T,$=S[1]*L,ee=S[2]*U,ie=S[4]*T,K=S[5]*L,ce=S[6]*U,he=S[8]*T,Be=S[9]*L,Ne=S[10]*U,Ve=V+K+Ne,Oe=0;return Ve>0?(Oe=2*Math.sqrt(Ve+1),w[3]=.25*Oe,w[0]=(ce-Be)/Oe,w[1]=(he-ee)/Oe,w[2]=($-ie)/Oe):V>K&&V>Ne?(Oe=2*Math.sqrt(1+V-K-Ne),w[3]=(ce-Be)/Oe,w[0]=.25*Oe,w[1]=($+ie)/Oe,w[2]=(he+ee)/Oe):K>Ne?(Oe=2*Math.sqrt(1+K-V-Ne),w[3]=(he-ee)/Oe,w[0]=($+ie)/Oe,w[1]=.25*Oe,w[2]=(ce+Be)/Oe):(Oe=2*Math.sqrt(1+Ne-V-K),w[3]=($-ie)/Oe,w[0]=(he+ee)/Oe,w[1]=(ce+Be)/Oe,w[2]=.25*Oe),w},ne.fromRotationTranslationScale=function(w,S,F,T){var L=S[0],U=S[1],V=S[2],$=S[3],ee=L+L,ie=U+U,K=V+V,ce=L*ee,he=L*ie,Be=L*K,Ne=U*ie,Ve=U*K,Oe=V*K,rt=$*ee,je=$*ie,ct=$*K,yt=T[0],Ct=T[1],Et=T[2];return w[0]=(1-(Ne+Oe))*yt,w[1]=(he+ct)*yt,w[2]=(Be-je)*yt,w[3]=0,w[4]=(he-ct)*Ct,w[5]=(1-(ce+Oe))*Ct,w[6]=(Ve+rt)*Ct,w[7]=0,w[8]=(Be+je)*Et,w[9]=(Ve-rt)*Et,w[10]=(1-(ce+Ne))*Et,w[11]=0,w[12]=F[0],w[13]=F[1],w[14]=F[2],w[15]=1,w},ne.fromRotationTranslationScaleOrigin=function(w,S,F,T,L){var U=S[0],V=S[1],$=S[2],ee=S[3],ie=U+U,K=V+V,ce=$+$,he=U*ie,Be=U*K,Ne=U*ce,Ve=V*K,Oe=V*ce,rt=$*ce,je=ee*ie,ct=ee*K,yt=ee*ce,Ct=T[0],Et=T[1],Pt=T[2],$t=L[0],Lt=L[1],dn=L[2],xn=(1-(Ve+rt))*Ct,tn=(Be+yt)*Ct,Jn=(Ne-ct)*Ct,Hn=(Be-yt)*Et,kn=(1-(he+rt))*Et,Bn=(Oe+je)*Et,br=(Ne+ct)*Pt,Yn=(Oe-je)*Pt,or=(1-(he+Ve))*Pt;return w[0]=xn,w[1]=tn,w[2]=Jn,w[3]=0,w[4]=Hn,w[5]=kn,w[6]=Bn,w[7]=0,w[8]=br,w[9]=Yn,w[10]=or,w[11]=0,w[12]=F[0]+$t-(xn*$t+Hn*Lt+br*dn),w[13]=F[1]+Lt-(tn*$t+kn*Lt+Yn*dn),w[14]=F[2]+dn-(Jn*$t+Bn*Lt+or*dn),w[15]=1,w},ne.fromQuat=function(w,S){var F=S[0],T=S[1],L=S[2],U=S[3],V=F+F,$=T+T,ee=L+L,ie=F*V,K=T*V,ce=T*$,he=L*V,Be=L*$,Ne=L*ee,Ve=U*V,Oe=U*$,rt=U*ee;return w[0]=1-ce-Ne,w[1]=K+rt,w[2]=he-Oe,w[3]=0,w[4]=K-rt,w[5]=1-ie-Ne,w[6]=Be+Ve,w[7]=0,w[8]=he+Oe,w[9]=Be-Ve,w[10]=1-ie-ce,w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w},ne.frustum=function(w,S,F,T,L,U,V){var $=1/(F-S),ee=1/(L-T),ie=1/(U-V);return w[0]=2*U*$,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=2*U*ee,w[6]=0,w[7]=0,w[8]=(F+S)*$,w[9]=(L+T)*ee,w[10]=(V+U)*ie,w[11]=-1,w[12]=0,w[13]=0,w[14]=V*U*2*ie,w[15]=0,w},ne.perspectiveNO=C,ne.perspectiveZO=function(w,S,F,T,L){var U,V=1/Math.tan(S/2);return w[0]=V/F,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=V,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[11]=-1,w[12]=0,w[13]=0,w[15]=0,L!=null&&L!==1/0?(w[10]=L*(U=1/(T-L)),w[14]=L*T*U):(w[10]=-1,w[14]=-T),w},ne.perspectiveFromFieldOfView=function(w,S,F,T){var L=Math.tan(S.upDegrees*Math.PI/180),U=Math.tan(S.downDegrees*Math.PI/180),V=Math.tan(S.leftDegrees*Math.PI/180),$=Math.tan(S.rightDegrees*Math.PI/180),ee=2/(V+$),ie=2/(L+U);return w[0]=ee,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=ie,w[6]=0,w[7]=0,w[8]=-(V-$)*ee*.5,w[9]=(L-U)*ie*.5,w[10]=T/(F-T),w[11]=-1,w[12]=0,w[13]=0,w[14]=T*F/(F-T),w[15]=0,w},ne.orthoNO=P,ne.orthoZO=function(w,S,F,T,L,U,V){var $=1/(S-F),ee=1/(T-L),ie=1/(U-V);return w[0]=-2*$,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=-2*ee,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[10]=ie,w[11]=0,w[12]=(S+F)*$,w[13]=(L+T)*ee,w[14]=U*ie,w[15]=1,w},ne.lookAt=function(w,S,F,T){var L,U,V,$,ee,ie,K,ce,he,Be,Ne=S[0],Ve=S[1],Oe=S[2],rt=T[0],je=T[1],ct=T[2],yt=F[0],Ct=F[1],Et=F[2];return Math.abs(Ne-yt)<s.EPSILON&&Math.abs(Ve-Ct)<s.EPSILON&&Math.abs(Oe-Et)<s.EPSILON?f(w):(K=Ne-yt,ce=Ve-Ct,he=Oe-Et,L=je*(he*=Be=1/Math.hypot(K,ce,he))-ct*(ce*=Be),U=ct*(K*=Be)-rt*he,V=rt*ce-je*K,(Be=Math.hypot(L,U,V))?(L*=Be=1/Be,U*=Be,V*=Be):(L=0,U=0,V=0),$=ce*V-he*U,ee=he*L-K*V,ie=K*U-ce*L,(Be=Math.hypot($,ee,ie))?($*=Be=1/Be,ee*=Be,ie*=Be):($=0,ee=0,ie=0),w[0]=L,w[1]=$,w[2]=K,w[3]=0,w[4]=U,w[5]=ee,w[6]=ce,w[7]=0,w[8]=V,w[9]=ie,w[10]=he,w[11]=0,w[12]=-(L*Ne+U*Ve+V*Oe),w[13]=-($*Ne+ee*Ve+ie*Oe),w[14]=-(K*Ne+ce*Ve+he*Oe),w[15]=1,w)},ne.targetTo=function(w,S,F,T){var L=S[0],U=S[1],V=S[2],$=T[0],ee=T[1],ie=T[2],K=L-F[0],ce=U-F[1],he=V-F[2],Be=K*K+ce*ce+he*he;Be>0&&(K*=Be=1/Math.sqrt(Be),ce*=Be,he*=Be);var Ne=ee*he-ie*ce,Ve=ie*K-$*he,Oe=$*ce-ee*K;return(Be=Ne*Ne+Ve*Ve+Oe*Oe)>0&&(Ne*=Be=1/Math.sqrt(Be),Ve*=Be,Oe*=Be),w[0]=Ne,w[1]=Ve,w[2]=Oe,w[3]=0,w[4]=ce*Oe-he*Ve,w[5]=he*Ne-K*Oe,w[6]=K*Ve-ce*Ne,w[7]=0,w[8]=K,w[9]=ce,w[10]=he,w[11]=0,w[12]=L,w[13]=U,w[14]=V,w[15]=1,w},ne.str=function(w){return"mat4("+w[0]+", "+w[1]+", "+w[2]+", "+w[3]+", "+w[4]+", "+w[5]+", "+w[6]+", "+w[7]+", "+w[8]+", "+w[9]+", "+w[10]+", "+w[11]+", "+w[12]+", "+w[13]+", "+w[14]+", "+w[15]+")"},ne.frob=function(w){return Math.hypot(w[0],w[1],w[2],w[3],w[4],w[5],w[6],w[7],w[8],w[9],w[10],w[11],w[12],w[13],w[14],w[15])},ne.add=function(w,S,F){return w[0]=S[0]+F[0],w[1]=S[1]+F[1],w[2]=S[2]+F[2],w[3]=S[3]+F[3],w[4]=S[4]+F[4],w[5]=S[5]+F[5],w[6]=S[6]+F[6],w[7]=S[7]+F[7],w[8]=S[8]+F[8],w[9]=S[9]+F[9],w[10]=S[10]+F[10],w[11]=S[11]+F[11],w[12]=S[12]+F[12],w[13]=S[13]+F[13],w[14]=S[14]+F[14],w[15]=S[15]+F[15],w},ne.subtract=R,ne.multiplyScalar=function(w,S,F){return w[0]=S[0]*F,w[1]=S[1]*F,w[2]=S[2]*F,w[3]=S[3]*F,w[4]=S[4]*F,w[5]=S[5]*F,w[6]=S[6]*F,w[7]=S[7]*F,w[8]=S[8]*F,w[9]=S[9]*F,w[10]=S[10]*F,w[11]=S[11]*F,w[12]=S[12]*F,w[13]=S[13]*F,w[14]=S[14]*F,w[15]=S[15]*F,w},ne.multiplyScalarAndAdd=function(w,S,F,T){return w[0]=S[0]+F[0]*T,w[1]=S[1]+F[1]*T,w[2]=S[2]+F[2]*T,w[3]=S[3]+F[3]*T,w[4]=S[4]+F[4]*T,w[5]=S[5]+F[5]*T,w[6]=S[6]+F[6]*T,w[7]=S[7]+F[7]*T,w[8]=S[8]+F[8]*T,w[9]=S[9]+F[9]*T,w[10]=S[10]+F[10]*T,w[11]=S[11]+F[11]*T,w[12]=S[12]+F[12]*T,w[13]=S[13]+F[13]*T,w[14]=S[14]+F[14]*T,w[15]=S[15]+F[15]*T,w},ne.exactEquals=function(w,S){return w[0]===S[0]&&w[1]===S[1]&&w[2]===S[2]&&w[3]===S[3]&&w[4]===S[4]&&w[5]===S[5]&&w[6]===S[6]&&w[7]===S[7]&&w[8]===S[8]&&w[9]===S[9]&&w[10]===S[10]&&w[11]===S[11]&&w[12]===S[12]&&w[13]===S[13]&&w[14]===S[14]&&w[15]===S[15]},ne.equals=function(w,S){var F=w[0],T=w[1],L=w[2],U=w[3],V=w[4],$=w[5],ee=w[6],ie=w[7],K=w[8],ce=w[9],he=w[10],Be=w[11],Ne=w[12],Ve=w[13],Oe=w[14],rt=w[15],je=S[0],ct=S[1],yt=S[2],Ct=S[3],Et=S[4],Pt=S[5],$t=S[6],Lt=S[7],dn=S[8],xn=S[9],tn=S[10],Jn=S[11],Hn=S[12],kn=S[13],Bn=S[14],br=S[15];return Math.abs(F-je)<=s.EPSILON*Math.max(1,Math.abs(F),Math.abs(je))&&Math.abs(T-ct)<=s.EPSILON*Math.max(1,Math.abs(T),Math.abs(ct))&&Math.abs(L-yt)<=s.EPSILON*Math.max(1,Math.abs(L),Math.abs(yt))&&Math.abs(U-Ct)<=s.EPSILON*Math.max(1,Math.abs(U),Math.abs(Ct))&&Math.abs(V-Et)<=s.EPSILON*Math.max(1,Math.abs(V),Math.abs(Et))&&Math.abs($-Pt)<=s.EPSILON*Math.max(1,Math.abs($),Math.abs(Pt))&&Math.abs(ee-$t)<=s.EPSILON*Math.max(1,Math.abs(ee),Math.abs($t))&&Math.abs(ie-Lt)<=s.EPSILON*Math.max(1,Math.abs(ie),Math.abs(Lt))&&Math.abs(K-dn)<=s.EPSILON*Math.max(1,Math.abs(K),Math.abs(dn))&&Math.abs(ce-xn)<=s.EPSILON*Math.max(1,Math.abs(ce),Math.abs(xn))&&Math.abs(he-tn)<=s.EPSILON*Math.max(1,Math.abs(he),Math.abs(tn))&&Math.abs(Be-Jn)<=s.EPSILON*Math.max(1,Math.abs(Be),Math.abs(Jn))&&Math.abs(Ne-Hn)<=s.EPSILON*Math.max(1,Math.abs(Ne),Math.abs(Hn))&&Math.abs(Ve-kn)<=s.EPSILON*Math.max(1,Math.abs(Ve),Math.abs(kn))&&Math.abs(Oe-Bn)<=s.EPSILON*Math.max(1,Math.abs(Oe),Math.abs(Bn))&&Math.abs(rt-br)<=s.EPSILON*Math.max(1,Math.abs(rt),Math.abs(br))},ne.sub=ne.mul=ne.ortho=ne.perspective=void 0;var s=function(w,S){if(w&&w.__esModule)return w;if(w===null||d(w)!=="object"&&typeof w!="function")return{default:w};var F=c(void 0);if(F&&F.has(w))return F.get(w);var T={},L=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var U in w)if(U!=="default"&&Object.prototype.hasOwnProperty.call(w,U)){var V=L?Object.getOwnPropertyDescriptor(w,U):null;V&&(V.get||V.set)?Object.defineProperty(T,U,V):T[U]=w[U]}return T.default=w,F&&F.set(w,T),T}(M());function c(w){if(typeof WeakMap!="function")return null;var S=new WeakMap,F=new WeakMap;return(c=function(T){return T?F:S})(w)}function f(w){return w[0]=1,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=1,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[10]=1,w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w}function y(w,S,F){var T=S[0],L=S[1],U=S[2],V=S[3],$=S[4],ee=S[5],ie=S[6],K=S[7],ce=S[8],he=S[9],Be=S[10],Ne=S[11],Ve=S[12],Oe=S[13],rt=S[14],je=S[15],ct=F[0],yt=F[1],Ct=F[2],Et=F[3];return w[0]=ct*T+yt*$+Ct*ce+Et*Ve,w[1]=ct*L+yt*ee+Ct*he+Et*Oe,w[2]=ct*U+yt*ie+Ct*Be+Et*rt,w[3]=ct*V+yt*K+Ct*Ne+Et*je,w[4]=(ct=F[4])*T+(yt=F[5])*$+(Ct=F[6])*ce+(Et=F[7])*Ve,w[5]=ct*L+yt*ee+Ct*he+Et*Oe,w[6]=ct*U+yt*ie+Ct*Be+Et*rt,w[7]=ct*V+yt*K+Ct*Ne+Et*je,w[8]=(ct=F[8])*T+(yt=F[9])*$+(Ct=F[10])*ce+(Et=F[11])*Ve,w[9]=ct*L+yt*ee+Ct*he+Et*Oe,w[10]=ct*U+yt*ie+Ct*Be+Et*rt,w[11]=ct*V+yt*K+Ct*Ne+Et*je,w[12]=(ct=F[12])*T+(yt=F[13])*$+(Ct=F[14])*ce+(Et=F[15])*Ve,w[13]=ct*L+yt*ee+Ct*he+Et*Oe,w[14]=ct*U+yt*ie+Ct*Be+Et*rt,w[15]=ct*V+yt*K+Ct*Ne+Et*je,w}function A(w,S,F){var T=S[0],L=S[1],U=S[2],V=S[3],$=T+T,ee=L+L,ie=U+U,K=T*$,ce=T*ee,he=T*ie,Be=L*ee,Ne=L*ie,Ve=U*ie,Oe=V*$,rt=V*ee,je=V*ie;return w[0]=1-(Be+Ve),w[1]=ce+je,w[2]=he-rt,w[3]=0,w[4]=ce-je,w[5]=1-(K+Ve),w[6]=Ne+Oe,w[7]=0,w[8]=he+rt,w[9]=Ne-Oe,w[10]=1-(K+Be),w[11]=0,w[12]=F[0],w[13]=F[1],w[14]=F[2],w[15]=1,w}function _(w,S){var F=S[4],T=S[5],L=S[6],U=S[8],V=S[9],$=S[10];return w[0]=Math.hypot(S[0],S[1],S[2]),w[1]=Math.hypot(F,T,L),w[2]=Math.hypot(U,V,$),w}function C(w,S,F,T,L){var U,V=1/Math.tan(S/2);return w[0]=V/F,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=V,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[11]=-1,w[12]=0,w[13]=0,w[15]=0,L!=null&&L!==1/0?(w[10]=(L+T)*(U=1/(T-L)),w[14]=2*L*T*U):(w[10]=-1,w[14]=-2*T),w}function P(w,S,F,T,L,U,V){var $=1/(S-F),ee=1/(T-L),ie=1/(U-V);return w[0]=-2*$,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=-2*ee,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[10]=2*ie,w[11]=0,w[12]=(S+F)*$,w[13]=(L+T)*ee,w[14]=(V+U)*ie,w[15]=1,w}function R(w,S,F){return w[0]=S[0]-F[0],w[1]=S[1]-F[1],w[2]=S[2]-F[2],w[3]=S[3]-F[3],w[4]=S[4]-F[4],w[5]=S[5]-F[5],w[6]=S[6]-F[6],w[7]=S[7]-F[7],w[8]=S[8]-F[8],w[9]=S[9]-F[9],w[10]=S[10]-F[10],w[11]=S[11]-F[11],w[12]=S[12]-F[12],w[13]=S[13]-F[13],w[14]=S[14]-F[14],w[15]=S[15]-F[15],w}return ne.perspective=C,ne.ortho=P,ne.mul=y,ne.sub=R,ne}var ye,se={},le={};function ge(){if(ye)return le;function d(L){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},d(L)}ye=1,Object.defineProperty(le,"__esModule",{value:!0}),le.create=f,le.clone=function(L){var U=new s.ARRAY_TYPE(3);return U[0]=L[0],U[1]=L[1],U[2]=L[2],U},le.length=y,le.fromValues=function(L,U,V){var $=new s.ARRAY_TYPE(3);return $[0]=L,$[1]=U,$[2]=V,$},le.copy=function(L,U){return L[0]=U[0],L[1]=U[1],L[2]=U[2],L},le.set=function(L,U,V,$){return L[0]=U,L[1]=V,L[2]=$,L},le.add=function(L,U,V){return L[0]=U[0]+V[0],L[1]=U[1]+V[1],L[2]=U[2]+V[2],L},le.subtract=A,le.multiply=_,le.divide=C,le.ceil=function(L,U){return L[0]=Math.ceil(U[0]),L[1]=Math.ceil(U[1]),L[2]=Math.ceil(U[2]),L},le.floor=function(L,U){return L[0]=Math.floor(U[0]),L[1]=Math.floor(U[1]),L[2]=Math.floor(U[2]),L},le.min=function(L,U,V){return L[0]=Math.min(U[0],V[0]),L[1]=Math.min(U[1],V[1]),L[2]=Math.min(U[2],V[2]),L},le.max=function(L,U,V){return L[0]=Math.max(U[0],V[0]),L[1]=Math.max(U[1],V[1]),L[2]=Math.max(U[2],V[2]),L},le.round=function(L,U){return L[0]=Math.round(U[0]),L[1]=Math.round(U[1]),L[2]=Math.round(U[2]),L},le.scale=function(L,U,V){return L[0]=U[0]*V,L[1]=U[1]*V,L[2]=U[2]*V,L},le.scaleAndAdd=function(L,U,V,$){return L[0]=U[0]+V[0]*$,L[1]=U[1]+V[1]*$,L[2]=U[2]+V[2]*$,L},le.distance=P,le.squaredDistance=R,le.squaredLength=w,le.negate=function(L,U){return L[0]=-U[0],L[1]=-U[1],L[2]=-U[2],L},le.inverse=function(L,U){return L[0]=1/U[0],L[1]=1/U[1],L[2]=1/U[2],L},le.normalize=function(L,U){var V=U[0],$=U[1],ee=U[2],ie=V*V+$*$+ee*ee;return ie>0&&(ie=1/Math.sqrt(ie)),L[0]=U[0]*ie,L[1]=U[1]*ie,L[2]=U[2]*ie,L},le.dot=S,le.cross=function(L,U,V){var $=U[0],ee=U[1],ie=U[2],K=V[0],ce=V[1],he=V[2];return L[0]=ee*he-ie*ce,L[1]=ie*K-$*he,L[2]=$*ce-ee*K,L},le.lerp=function(L,U,V,$){var ee=U[0],ie=U[1],K=U[2];return L[0]=ee+$*(V[0]-ee),L[1]=ie+$*(V[1]-ie),L[2]=K+$*(V[2]-K),L},le.hermite=function(L,U,V,$,ee,ie){var K=ie*ie,ce=K*(2*ie-3)+1,he=K*(ie-2)+ie,Be=K*(ie-1),Ne=K*(3-2*ie);return L[0]=U[0]*ce+V[0]*he+$[0]*Be+ee[0]*Ne,L[1]=U[1]*ce+V[1]*he+$[1]*Be+ee[1]*Ne,L[2]=U[2]*ce+V[2]*he+$[2]*Be+ee[2]*Ne,L},le.bezier=function(L,U,V,$,ee,ie){var K=1-ie,ce=K*K,he=ie*ie,Be=ce*K,Ne=3*ie*ce,Ve=3*he*K,Oe=he*ie;return L[0]=U[0]*Be+V[0]*Ne+$[0]*Ve+ee[0]*Oe,L[1]=U[1]*Be+V[1]*Ne+$[1]*Ve+ee[1]*Oe,L[2]=U[2]*Be+V[2]*Ne+$[2]*Ve+ee[2]*Oe,L},le.random=function(L,U){U=U||1;var V=2*s.RANDOM()*Math.PI,$=2*s.RANDOM()-1,ee=Math.sqrt(1-$*$)*U;return L[0]=Math.cos(V)*ee,L[1]=Math.sin(V)*ee,L[2]=$*U,L},le.transformMat4=function(L,U,V){var $=U[0],ee=U[1],ie=U[2],K=V[3]*$+V[7]*ee+V[11]*ie+V[15];return L[0]=(V[0]*$+V[4]*ee+V[8]*ie+V[12])/(K=K||1),L[1]=(V[1]*$+V[5]*ee+V[9]*ie+V[13])/K,L[2]=(V[2]*$+V[6]*ee+V[10]*ie+V[14])/K,L},le.transformMat3=function(L,U,V){var $=U[0],ee=U[1],ie=U[2];return L[0]=$*V[0]+ee*V[3]+ie*V[6],L[1]=$*V[1]+ee*V[4]+ie*V[7],L[2]=$*V[2]+ee*V[5]+ie*V[8],L},le.transformQuat=function(L,U,V){var $=V[0],ee=V[1],ie=V[2],K=U[0],ce=U[1],he=U[2],Be=ee*he-ie*ce,Ne=ie*K-$*he,Ve=$*ce-ee*K,Oe=ee*Ve-ie*Ne,rt=ie*Be-$*Ve,je=$*Ne-ee*Be,ct=2*V[3];return Ne*=ct,Ve*=ct,rt*=2,je*=2,L[0]=K+(Be*=ct)+(Oe*=2),L[1]=ce+Ne+rt,L[2]=he+Ve+je,L},le.rotateX=function(L,U,V,$){var ee=[],ie=[];return ee[0]=U[0]-V[0],ee[1]=U[1]-V[1],ee[2]=U[2]-V[2],ie[0]=ee[0],ie[1]=ee[1]*Math.cos($)-ee[2]*Math.sin($),ie[2]=ee[1]*Math.sin($)+ee[2]*Math.cos($),L[0]=ie[0]+V[0],L[1]=ie[1]+V[1],L[2]=ie[2]+V[2],L},le.rotateY=function(L,U,V,$){var ee=[],ie=[];return ee[0]=U[0]-V[0],ee[1]=U[1]-V[1],ee[2]=U[2]-V[2],ie[0]=ee[2]*Math.sin($)+ee[0]*Math.cos($),ie[1]=ee[1],ie[2]=ee[2]*Math.cos($)-ee[0]*Math.sin($),L[0]=ie[0]+V[0],L[1]=ie[1]+V[1],L[2]=ie[2]+V[2],L},le.rotateZ=function(L,U,V,$){var ee=[],ie=[];return ee[0]=U[0]-V[0],ee[1]=U[1]-V[1],ee[2]=U[2]-V[2],ie[0]=ee[0]*Math.cos($)-ee[1]*Math.sin($),ie[1]=ee[0]*Math.sin($)+ee[1]*Math.cos($),ie[2]=ee[2],L[0]=ie[0]+V[0],L[1]=ie[1]+V[1],L[2]=ie[2]+V[2],L},le.angle=function(L,U){var V=L[0],$=L[1],ee=L[2],ie=U[0],K=U[1],ce=U[2],he=Math.sqrt(V*V+$*$+ee*ee)*Math.sqrt(ie*ie+K*K+ce*ce),Be=he&&S(L,U)/he;return Math.acos(Math.min(Math.max(Be,-1),1))},le.zero=function(L){return L[0]=0,L[1]=0,L[2]=0,L},le.str=function(L){return"vec3("+L[0]+", "+L[1]+", "+L[2]+")"},le.exactEquals=function(L,U){return L[0]===U[0]&&L[1]===U[1]&&L[2]===U[2]},le.equals=function(L,U){var V=L[0],$=L[1],ee=L[2],ie=U[0],K=U[1],ce=U[2];return Math.abs(V-ie)<=s.EPSILON*Math.max(1,Math.abs(V),Math.abs(ie))&&Math.abs($-K)<=s.EPSILON*Math.max(1,Math.abs($),Math.abs(K))&&Math.abs(ee-ce)<=s.EPSILON*Math.max(1,Math.abs(ee),Math.abs(ce))},le.forEach=le.sqrLen=le.len=le.sqrDist=le.dist=le.div=le.mul=le.sub=void 0;var s=function(L,U){if(L&&L.__esModule)return L;if(L===null||d(L)!=="object"&&typeof L!="function")return{default:L};var V=c(void 0);if(V&&V.has(L))return V.get(L);var $={},ee=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ie in L)if(ie!=="default"&&Object.prototype.hasOwnProperty.call(L,ie)){var K=ee?Object.getOwnPropertyDescriptor(L,ie):null;K&&(K.get||K.set)?Object.defineProperty($,ie,K):$[ie]=L[ie]}return $.default=L,V&&V.set(L,$),$}(M());function c(L){if(typeof WeakMap!="function")return null;var U=new WeakMap,V=new WeakMap;return(c=function($){return $?V:U})(L)}function f(){var L=new s.ARRAY_TYPE(3);return s.ARRAY_TYPE!=Float32Array&&(L[0]=0,L[1]=0,L[2]=0),L}function y(L){return Math.hypot(L[0],L[1],L[2])}function A(L,U,V){return L[0]=U[0]-V[0],L[1]=U[1]-V[1],L[2]=U[2]-V[2],L}function _(L,U,V){return L[0]=U[0]*V[0],L[1]=U[1]*V[1],L[2]=U[2]*V[2],L}function C(L,U,V){return L[0]=U[0]/V[0],L[1]=U[1]/V[1],L[2]=U[2]/V[2],L}function P(L,U){return Math.hypot(U[0]-L[0],U[1]-L[1],U[2]-L[2])}function R(L,U){var V=U[0]-L[0],$=U[1]-L[1],ee=U[2]-L[2];return V*V+$*$+ee*ee}function w(L){var U=L[0],V=L[1],$=L[2];return U*U+V*V+$*$}function S(L,U){return L[0]*U[0]+L[1]*U[1]+L[2]*U[2]}le.sub=A,le.mul=_,le.div=C,le.dist=P,le.sqrDist=R,le.len=y,le.sqrLen=w;var F,T=(F=f(),function(L,U,V,$,ee,ie){var K,ce;for(U||(U=3),V||(V=0),ce=$?Math.min($*U+V,L.length):L.length,K=V;K<ce;K+=U)F[0]=L[K],F[1]=L[K+1],F[2]=L[K+2],ee(F,F,ie),L[K]=F[0],L[K+1]=F[1],L[K+2]=F[2];return L});return le.forEach=T,le}var lt,Ot,gt={};function Tt(){if(lt)return gt;function d(T){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},d(T)}lt=1,Object.defineProperty(gt,"__esModule",{value:!0}),gt.create=f,gt.clone=function(T){var L=new s.ARRAY_TYPE(4);return L[0]=T[0],L[1]=T[1],L[2]=T[2],L[3]=T[3],L},gt.fromValues=function(T,L,U,V){var $=new s.ARRAY_TYPE(4);return $[0]=T,$[1]=L,$[2]=U,$[3]=V,$},gt.copy=function(T,L){return T[0]=L[0],T[1]=L[1],T[2]=L[2],T[3]=L[3],T},gt.set=function(T,L,U,V,$){return T[0]=L,T[1]=U,T[2]=V,T[3]=$,T},gt.add=function(T,L,U){return T[0]=L[0]+U[0],T[1]=L[1]+U[1],T[2]=L[2]+U[2],T[3]=L[3]+U[3],T},gt.subtract=y,gt.multiply=A,gt.divide=_,gt.ceil=function(T,L){return T[0]=Math.ceil(L[0]),T[1]=Math.ceil(L[1]),T[2]=Math.ceil(L[2]),T[3]=Math.ceil(L[3]),T},gt.floor=function(T,L){return T[0]=Math.floor(L[0]),T[1]=Math.floor(L[1]),T[2]=Math.floor(L[2]),T[3]=Math.floor(L[3]),T},gt.min=function(T,L,U){return T[0]=Math.min(L[0],U[0]),T[1]=Math.min(L[1],U[1]),T[2]=Math.min(L[2],U[2]),T[3]=Math.min(L[3],U[3]),T},gt.max=function(T,L,U){return T[0]=Math.max(L[0],U[0]),T[1]=Math.max(L[1],U[1]),T[2]=Math.max(L[2],U[2]),T[3]=Math.max(L[3],U[3]),T},gt.round=function(T,L){return T[0]=Math.round(L[0]),T[1]=Math.round(L[1]),T[2]=Math.round(L[2]),T[3]=Math.round(L[3]),T},gt.scale=function(T,L,U){return T[0]=L[0]*U,T[1]=L[1]*U,T[2]=L[2]*U,T[3]=L[3]*U,T},gt.scaleAndAdd=function(T,L,U,V){return T[0]=L[0]+U[0]*V,T[1]=L[1]+U[1]*V,T[2]=L[2]+U[2]*V,T[3]=L[3]+U[3]*V,T},gt.distance=C,gt.squaredDistance=P,gt.length=R,gt.squaredLength=w,gt.negate=function(T,L){return T[0]=-L[0],T[1]=-L[1],T[2]=-L[2],T[3]=-L[3],T},gt.inverse=function(T,L){return T[0]=1/L[0],T[1]=1/L[1],T[2]=1/L[2],T[3]=1/L[3],T},gt.normalize=function(T,L){var U=L[0],V=L[1],$=L[2],ee=L[3],ie=U*U+V*V+$*$+ee*ee;return ie>0&&(ie=1/Math.sqrt(ie)),T[0]=U*ie,T[1]=V*ie,T[2]=$*ie,T[3]=ee*ie,T},gt.dot=function(T,L){return T[0]*L[0]+T[1]*L[1]+T[2]*L[2]+T[3]*L[3]},gt.cross=function(T,L,U,V){var $=U[0]*V[1]-U[1]*V[0],ee=U[0]*V[2]-U[2]*V[0],ie=U[0]*V[3]-U[3]*V[0],K=U[1]*V[2]-U[2]*V[1],ce=U[1]*V[3]-U[3]*V[1],he=U[2]*V[3]-U[3]*V[2],Be=L[0],Ne=L[1],Ve=L[2],Oe=L[3];return T[0]=Ne*he-Ve*ce+Oe*K,T[1]=-Be*he+Ve*ie-Oe*ee,T[2]=Be*ce-Ne*ie+Oe*$,T[3]=-Be*K+Ne*ee-Ve*$,T},gt.lerp=function(T,L,U,V){var $=L[0],ee=L[1],ie=L[2],K=L[3];return T[0]=$+V*(U[0]-$),T[1]=ee+V*(U[1]-ee),T[2]=ie+V*(U[2]-ie),T[3]=K+V*(U[3]-K),T},gt.random=function(T,L){var U,V,$,ee,ie,K;L=L||1;do ie=(U=2*s.RANDOM()-1)*U+(V=2*s.RANDOM()-1)*V;while(ie>=1);do K=($=2*s.RANDOM()-1)*$+(ee=2*s.RANDOM()-1)*ee;while(K>=1);var ce=Math.sqrt((1-ie)/K);return T[0]=L*U,T[1]=L*V,T[2]=L*$*ce,T[3]=L*ee*ce,T},gt.transformMat4=function(T,L,U){var V=L[0],$=L[1],ee=L[2],ie=L[3];return T[0]=U[0]*V+U[4]*$+U[8]*ee+U[12]*ie,T[1]=U[1]*V+U[5]*$+U[9]*ee+U[13]*ie,T[2]=U[2]*V+U[6]*$+U[10]*ee+U[14]*ie,T[3]=U[3]*V+U[7]*$+U[11]*ee+U[15]*ie,T},gt.transformQuat=function(T,L,U){var V=L[0],$=L[1],ee=L[2],ie=U[0],K=U[1],ce=U[2],he=U[3],Be=he*V+K*ee-ce*$,Ne=he*$+ce*V-ie*ee,Ve=he*ee+ie*$-K*V,Oe=-ie*V-K*$-ce*ee;return T[0]=Be*he+Oe*-ie+Ne*-ce-Ve*-K,T[1]=Ne*he+Oe*-K+Ve*-ie-Be*-ce,T[2]=Ve*he+Oe*-ce+Be*-K-Ne*-ie,T[3]=L[3],T},gt.zero=function(T){return T[0]=0,T[1]=0,T[2]=0,T[3]=0,T},gt.str=function(T){return"vec4("+T[0]+", "+T[1]+", "+T[2]+", "+T[3]+")"},gt.exactEquals=function(T,L){return T[0]===L[0]&&T[1]===L[1]&&T[2]===L[2]&&T[3]===L[3]},gt.equals=function(T,L){var U=T[0],V=T[1],$=T[2],ee=T[3],ie=L[0],K=L[1],ce=L[2],he=L[3];return Math.abs(U-ie)<=s.EPSILON*Math.max(1,Math.abs(U),Math.abs(ie))&&Math.abs(V-K)<=s.EPSILON*Math.max(1,Math.abs(V),Math.abs(K))&&Math.abs($-ce)<=s.EPSILON*Math.max(1,Math.abs($),Math.abs(ce))&&Math.abs(ee-he)<=s.EPSILON*Math.max(1,Math.abs(ee),Math.abs(he))},gt.forEach=gt.sqrLen=gt.len=gt.sqrDist=gt.dist=gt.div=gt.mul=gt.sub=void 0;var s=function(T,L){if(T&&T.__esModule)return T;if(T===null||d(T)!=="object"&&typeof T!="function")return{default:T};var U=c(void 0);if(U&&U.has(T))return U.get(T);var V={},$=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ee in T)if(ee!=="default"&&Object.prototype.hasOwnProperty.call(T,ee)){var ie=$?Object.getOwnPropertyDescriptor(T,ee):null;ie&&(ie.get||ie.set)?Object.defineProperty(V,ee,ie):V[ee]=T[ee]}return V.default=T,U&&U.set(T,V),V}(M());function c(T){if(typeof WeakMap!="function")return null;var L=new WeakMap,U=new WeakMap;return(c=function(V){return V?U:L})(T)}function f(){var T=new s.ARRAY_TYPE(4);return s.ARRAY_TYPE!=Float32Array&&(T[0]=0,T[1]=0,T[2]=0,T[3]=0),T}function y(T,L,U){return T[0]=L[0]-U[0],T[1]=L[1]-U[1],T[2]=L[2]-U[2],T[3]=L[3]-U[3],T}function A(T,L,U){return T[0]=L[0]*U[0],T[1]=L[1]*U[1],T[2]=L[2]*U[2],T[3]=L[3]*U[3],T}function _(T,L,U){return T[0]=L[0]/U[0],T[1]=L[1]/U[1],T[2]=L[2]/U[2],T[3]=L[3]/U[3],T}function C(T,L){return Math.hypot(L[0]-T[0],L[1]-T[1],L[2]-T[2],L[3]-T[3])}function P(T,L){var U=L[0]-T[0],V=L[1]-T[1],$=L[2]-T[2],ee=L[3]-T[3];return U*U+V*V+$*$+ee*ee}function R(T){return Math.hypot(T[0],T[1],T[2],T[3])}function w(T){var L=T[0],U=T[1],V=T[2],$=T[3];return L*L+U*U+V*V+$*$}gt.sub=y,gt.mul=A,gt.div=_,gt.dist=C,gt.sqrDist=P,gt.len=R,gt.sqrLen=w;var S,F=(S=f(),function(T,L,U,V,$,ee){var ie,K;for(L||(L=4),U||(U=0),K=V?Math.min(V*L+U,T.length):T.length,ie=U;ie<K;ie+=L)S[0]=T[ie],S[1]=T[ie+1],S[2]=T[ie+2],S[3]=T[ie+3],$(S,S,ee),T[ie]=S[0],T[ie+1]=S[1],T[ie+2]=S[2],T[ie+3]=S[3];return T});return gt.forEach=F,gt}function Mt(){if(Ot)return se;function d(je){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ct){return typeof ct}:function(ct){return ct&&typeof Symbol=="function"&&ct.constructor===Symbol&&ct!==Symbol.prototype?"symbol":typeof ct},d(je)}Ot=1,Object.defineProperty(se,"__esModule",{value:!0}),se.create=C,se.identity=function(je){return je[0]=0,je[1]=0,je[2]=0,je[3]=1,je},se.setAxisAngle=P,se.getAxisAngle=function(je,ct){var yt=2*Math.acos(ct[3]),Ct=Math.sin(yt/2);return Ct>s.EPSILON?(je[0]=ct[0]/Ct,je[1]=ct[1]/Ct,je[2]=ct[2]/Ct):(je[0]=1,je[1]=0,je[2]=0),yt},se.getAngle=function(je,ct){var yt=U(je,ct);return Math.acos(2*yt*yt-1)},se.multiply=R,se.rotateX=function(je,ct,yt){yt*=.5;var Ct=ct[0],Et=ct[1],Pt=ct[2],$t=ct[3],Lt=Math.sin(yt),dn=Math.cos(yt);return je[0]=Ct*dn+$t*Lt,je[1]=Et*dn+Pt*Lt,je[2]=Pt*dn-Et*Lt,je[3]=$t*dn-Ct*Lt,je},se.rotateY=function(je,ct,yt){yt*=.5;var Ct=ct[0],Et=ct[1],Pt=ct[2],$t=ct[3],Lt=Math.sin(yt),dn=Math.cos(yt);return je[0]=Ct*dn-Pt*Lt,je[1]=Et*dn+$t*Lt,je[2]=Pt*dn+Ct*Lt,je[3]=$t*dn-Et*Lt,je},se.rotateZ=function(je,ct,yt){yt*=.5;var Ct=ct[0],Et=ct[1],Pt=ct[2],$t=ct[3],Lt=Math.sin(yt),dn=Math.cos(yt);return je[0]=Ct*dn+Et*Lt,je[1]=Et*dn-Ct*Lt,je[2]=Pt*dn+$t*Lt,je[3]=$t*dn-Pt*Lt,je},se.calculateW=function(je,ct){var yt=ct[0],Ct=ct[1],Et=ct[2];return je[0]=yt,je[1]=Ct,je[2]=Et,je[3]=Math.sqrt(Math.abs(1-yt*yt-Ct*Ct-Et*Et)),je},se.exp=w,se.ln=S,se.pow=function(je,ct,yt){return S(je,ct),L(je,je,yt),w(je,je),je},se.slerp=F,se.random=function(je){var ct=s.RANDOM(),yt=s.RANDOM(),Ct=s.RANDOM(),Et=Math.sqrt(1-ct),Pt=Math.sqrt(ct);return je[0]=Et*Math.sin(2*Math.PI*yt),je[1]=Et*Math.cos(2*Math.PI*yt),je[2]=Pt*Math.sin(2*Math.PI*Ct),je[3]=Pt*Math.cos(2*Math.PI*Ct),je},se.invert=function(je,ct){var yt=ct[0],Ct=ct[1],Et=ct[2],Pt=ct[3],$t=yt*yt+Ct*Ct+Et*Et+Pt*Pt,Lt=$t?1/$t:0;return je[0]=-yt*Lt,je[1]=-Ct*Lt,je[2]=-Et*Lt,je[3]=Pt*Lt,je},se.conjugate=function(je,ct){return je[0]=-ct[0],je[1]=-ct[1],je[2]=-ct[2],je[3]=ct[3],je},se.fromMat3=T,se.fromEuler=function(je,ct,yt,Ct){var Et=.5*Math.PI/180;ct*=Et,yt*=Et,Ct*=Et;var Pt=Math.sin(ct),$t=Math.cos(ct),Lt=Math.sin(yt),dn=Math.cos(yt),xn=Math.sin(Ct),tn=Math.cos(Ct);return je[0]=Pt*dn*tn-$t*Lt*xn,je[1]=$t*Lt*tn+Pt*dn*xn,je[2]=$t*dn*xn-Pt*Lt*tn,je[3]=$t*dn*tn+Pt*Lt*xn,je},se.str=function(je){return"quat("+je[0]+", "+je[1]+", "+je[2]+", "+je[3]+")"},se.setAxes=se.sqlerp=se.rotationTo=se.equals=se.exactEquals=se.normalize=se.sqrLen=se.squaredLength=se.len=se.length=se.lerp=se.dot=se.scale=se.mul=se.add=se.set=se.copy=se.fromValues=se.clone=void 0;var s=_(M()),c=_(Ie()),f=_(ge()),y=_(Tt());function A(je){if(typeof WeakMap!="function")return null;var ct=new WeakMap,yt=new WeakMap;return(A=function(Ct){return Ct?yt:ct})(je)}function _(je,ct){if(je&&je.__esModule)return je;if(je===null||d(je)!=="object"&&typeof je!="function")return{default:je};var yt=A(ct);if(yt&&yt.has(je))return yt.get(je);var Ct={},Et=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Pt in je)if(Pt!=="default"&&Object.prototype.hasOwnProperty.call(je,Pt)){var $t=Et?Object.getOwnPropertyDescriptor(je,Pt):null;$t&&($t.get||$t.set)?Object.defineProperty(Ct,Pt,$t):Ct[Pt]=je[Pt]}return Ct.default=je,yt&&yt.set(je,Ct),Ct}function C(){var je=new s.ARRAY_TYPE(4);return s.ARRAY_TYPE!=Float32Array&&(je[0]=0,je[1]=0,je[2]=0),je[3]=1,je}function P(je,ct,yt){yt*=.5;var Ct=Math.sin(yt);return je[0]=Ct*ct[0],je[1]=Ct*ct[1],je[2]=Ct*ct[2],je[3]=Math.cos(yt),je}function R(je,ct,yt){var Ct=ct[0],Et=ct[1],Pt=ct[2],$t=ct[3],Lt=yt[0],dn=yt[1],xn=yt[2],tn=yt[3];return je[0]=Ct*tn+$t*Lt+Et*xn-Pt*dn,je[1]=Et*tn+$t*dn+Pt*Lt-Ct*xn,je[2]=Pt*tn+$t*xn+Ct*dn-Et*Lt,je[3]=$t*tn-Ct*Lt-Et*dn-Pt*xn,je}function w(je,ct){var yt=ct[0],Ct=ct[1],Et=ct[2],Pt=ct[3],$t=Math.sqrt(yt*yt+Ct*Ct+Et*Et),Lt=Math.exp(Pt),dn=$t>0?Lt*Math.sin($t)/$t:0;return je[0]=yt*dn,je[1]=Ct*dn,je[2]=Et*dn,je[3]=Lt*Math.cos($t),je}function S(je,ct){var yt=ct[0],Ct=ct[1],Et=ct[2],Pt=ct[3],$t=Math.sqrt(yt*yt+Ct*Ct+Et*Et),Lt=$t>0?Math.atan2($t,Pt)/$t:0;return je[0]=yt*Lt,je[1]=Ct*Lt,je[2]=Et*Lt,je[3]=.5*Math.log(yt*yt+Ct*Ct+Et*Et+Pt*Pt),je}function F(je,ct,yt,Ct){var Et,Pt,$t,Lt,dn,xn=ct[0],tn=ct[1],Jn=ct[2],Hn=ct[3],kn=yt[0],Bn=yt[1],br=yt[2],Yn=yt[3];return(Pt=xn*kn+tn*Bn+Jn*br+Hn*Yn)<0&&(Pt=-Pt,kn=-kn,Bn=-Bn,br=-br,Yn=-Yn),1-Pt>s.EPSILON?(Et=Math.acos(Pt),$t=Math.sin(Et),Lt=Math.sin((1-Ct)*Et)/$t,dn=Math.sin(Ct*Et)/$t):(Lt=1-Ct,dn=Ct),je[0]=Lt*xn+dn*kn,je[1]=Lt*tn+dn*Bn,je[2]=Lt*Jn+dn*br,je[3]=Lt*Hn+dn*Yn,je}function T(je,ct){var yt,Ct=ct[0]+ct[4]+ct[8];if(Ct>0)yt=Math.sqrt(Ct+1),je[3]=.5*yt,je[0]=(ct[5]-ct[7])*(yt=.5/yt),je[1]=(ct[6]-ct[2])*yt,je[2]=(ct[1]-ct[3])*yt;else{var Et=0;ct[4]>ct[0]&&(Et=1),ct[8]>ct[3*Et+Et]&&(Et=2);var Pt=(Et+1)%3,$t=(Et+2)%3;yt=Math.sqrt(ct[3*Et+Et]-ct[3*Pt+Pt]-ct[3*$t+$t]+1),je[Et]=.5*yt,je[3]=(ct[3*Pt+$t]-ct[3*$t+Pt])*(yt=.5/yt),je[Pt]=(ct[3*Pt+Et]+ct[3*Et+Pt])*yt,je[$t]=(ct[3*$t+Et]+ct[3*Et+$t])*yt}return je}se.clone=y.clone,se.fromValues=y.fromValues,se.copy=y.copy,se.set=y.set,se.add=y.add,se.mul=R;var L=y.scale;se.scale=L;var U=y.dot;se.dot=U,se.lerp=y.lerp;var V=y.length;se.length=V,se.len=V;var $=y.squaredLength;se.squaredLength=$,se.sqrLen=$;var ee=y.normalize;se.normalize=ee,se.exactEquals=y.exactEquals,se.equals=y.equals;var ie,K,ce,he=(ie=f.create(),K=f.fromValues(1,0,0),ce=f.fromValues(0,1,0),function(je,ct,yt){var Ct=f.dot(ct,yt);return Ct<-.999999?(f.cross(ie,K,ct),f.len(ie)<1e-6&&f.cross(ie,ce,ct),f.normalize(ie,ie),P(je,ie,Math.PI),je):Ct>.999999?(je[0]=0,je[1]=0,je[2]=0,je[3]=1,je):(f.cross(ie,ct,yt),je[0]=ie[0],je[1]=ie[1],je[2]=ie[2],je[3]=1+Ct,ee(je,je))});se.rotationTo=he;var Be,Ne,Ve=(Be=C(),Ne=C(),function(je,ct,yt,Ct,Et,Pt){return F(Be,ct,Et,Pt),F(Ne,yt,Ct,Pt),F(je,Be,Ne,2*Pt*(1-Pt)),je});se.sqlerp=Ve;var Oe,rt=(Oe=c.create(),function(je,ct,yt,Ct){return Oe[0]=yt[0],Oe[3]=yt[1],Oe[6]=yt[2],Oe[1]=Ct[0],Oe[4]=Ct[1],Oe[7]=Ct[2],Oe[2]=-ct[0],Oe[5]=-ct[1],Oe[8]=-ct[2],ee(je,T(je,Oe))});return se.setAxes=rt,se}var on,Ut={};function In(){if(on)return Ut;function d(F){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},d(F)}on=1,Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.create=function(){var F=new s.ARRAY_TYPE(8);return s.ARRAY_TYPE!=Float32Array&&(F[0]=0,F[1]=0,F[2]=0,F[4]=0,F[5]=0,F[6]=0,F[7]=0),F[3]=1,F},Ut.clone=function(F){var T=new s.ARRAY_TYPE(8);return T[0]=F[0],T[1]=F[1],T[2]=F[2],T[3]=F[3],T[4]=F[4],T[5]=F[5],T[6]=F[6],T[7]=F[7],T},Ut.fromValues=function(F,T,L,U,V,$,ee,ie){var K=new s.ARRAY_TYPE(8);return K[0]=F,K[1]=T,K[2]=L,K[3]=U,K[4]=V,K[5]=$,K[6]=ee,K[7]=ie,K},Ut.fromRotationTranslationValues=function(F,T,L,U,V,$,ee){var ie=new s.ARRAY_TYPE(8);ie[0]=F,ie[1]=T,ie[2]=L,ie[3]=U;var K=.5*V,ce=.5*$,he=.5*ee;return ie[4]=K*U+ce*L-he*T,ie[5]=ce*U+he*F-K*L,ie[6]=he*U+K*T-ce*F,ie[7]=-K*F-ce*T-he*L,ie},Ut.fromRotationTranslation=_,Ut.fromTranslation=function(F,T){return F[0]=0,F[1]=0,F[2]=0,F[3]=1,F[4]=.5*T[0],F[5]=.5*T[1],F[6]=.5*T[2],F[7]=0,F},Ut.fromRotation=function(F,T){return F[0]=T[0],F[1]=T[1],F[2]=T[2],F[3]=T[3],F[4]=0,F[5]=0,F[6]=0,F[7]=0,F},Ut.fromMat4=function(F,T){var L=c.create();f.getRotation(L,T);var U=new s.ARRAY_TYPE(3);return f.getTranslation(U,T),_(F,L,U),F},Ut.copy=C,Ut.identity=function(F){return F[0]=0,F[1]=0,F[2]=0,F[3]=1,F[4]=0,F[5]=0,F[6]=0,F[7]=0,F},Ut.set=function(F,T,L,U,V,$,ee,ie,K){return F[0]=T,F[1]=L,F[2]=U,F[3]=V,F[4]=$,F[5]=ee,F[6]=ie,F[7]=K,F},Ut.getDual=function(F,T){return F[0]=T[4],F[1]=T[5],F[2]=T[6],F[3]=T[7],F},Ut.setDual=function(F,T){return F[4]=T[0],F[5]=T[1],F[6]=T[2],F[7]=T[3],F},Ut.getTranslation=function(F,T){var L=T[4],U=T[5],V=T[6],$=T[7],ee=-T[0],ie=-T[1],K=-T[2],ce=T[3];return F[0]=2*(L*ce+$*ee+U*K-V*ie),F[1]=2*(U*ce+$*ie+V*ee-L*K),F[2]=2*(V*ce+$*K+L*ie-U*ee),F},Ut.translate=function(F,T,L){var U=T[0],V=T[1],$=T[2],ee=T[3],ie=.5*L[0],K=.5*L[1],ce=.5*L[2],he=T[4],Be=T[5],Ne=T[6],Ve=T[7];return F[0]=U,F[1]=V,F[2]=$,F[3]=ee,F[4]=ee*ie+V*ce-$*K+he,F[5]=ee*K+$*ie-U*ce+Be,F[6]=ee*ce+U*K-V*ie+Ne,F[7]=-U*ie-V*K-$*ce+Ve,F},Ut.rotateX=function(F,T,L){var U=-T[0],V=-T[1],$=-T[2],ee=T[3],ie=T[4],K=T[5],ce=T[6],he=T[7],Be=ie*ee+he*U+K*$-ce*V,Ne=K*ee+he*V+ce*U-ie*$,Ve=ce*ee+he*$+ie*V-K*U,Oe=he*ee-ie*U-K*V-ce*$;return c.rotateX(F,T,L),F[4]=Be*(ee=F[3])+Oe*(U=F[0])+Ne*($=F[2])-Ve*(V=F[1]),F[5]=Ne*ee+Oe*V+Ve*U-Be*$,F[6]=Ve*ee+Oe*$+Be*V-Ne*U,F[7]=Oe*ee-Be*U-Ne*V-Ve*$,F},Ut.rotateY=function(F,T,L){var U=-T[0],V=-T[1],$=-T[2],ee=T[3],ie=T[4],K=T[5],ce=T[6],he=T[7],Be=ie*ee+he*U+K*$-ce*V,Ne=K*ee+he*V+ce*U-ie*$,Ve=ce*ee+he*$+ie*V-K*U,Oe=he*ee-ie*U-K*V-ce*$;return c.rotateY(F,T,L),F[4]=Be*(ee=F[3])+Oe*(U=F[0])+Ne*($=F[2])-Ve*(V=F[1]),F[5]=Ne*ee+Oe*V+Ve*U-Be*$,F[6]=Ve*ee+Oe*$+Be*V-Ne*U,F[7]=Oe*ee-Be*U-Ne*V-Ve*$,F},Ut.rotateZ=function(F,T,L){var U=-T[0],V=-T[1],$=-T[2],ee=T[3],ie=T[4],K=T[5],ce=T[6],he=T[7],Be=ie*ee+he*U+K*$-ce*V,Ne=K*ee+he*V+ce*U-ie*$,Ve=ce*ee+he*$+ie*V-K*U,Oe=he*ee-ie*U-K*V-ce*$;return c.rotateZ(F,T,L),F[4]=Be*(ee=F[3])+Oe*(U=F[0])+Ne*($=F[2])-Ve*(V=F[1]),F[5]=Ne*ee+Oe*V+Ve*U-Be*$,F[6]=Ve*ee+Oe*$+Be*V-Ne*U,F[7]=Oe*ee-Be*U-Ne*V-Ve*$,F},Ut.rotateByQuatAppend=function(F,T,L){var U=L[0],V=L[1],$=L[2],ee=L[3],ie=T[0],K=T[1],ce=T[2],he=T[3];return F[0]=ie*ee+he*U+K*$-ce*V,F[1]=K*ee+he*V+ce*U-ie*$,F[2]=ce*ee+he*$+ie*V-K*U,F[3]=he*ee-ie*U-K*V-ce*$,F[4]=(ie=T[4])*ee+(he=T[7])*U+(K=T[5])*$-(ce=T[6])*V,F[5]=K*ee+he*V+ce*U-ie*$,F[6]=ce*ee+he*$+ie*V-K*U,F[7]=he*ee-ie*U-K*V-ce*$,F},Ut.rotateByQuatPrepend=function(F,T,L){var U=T[0],V=T[1],$=T[2],ee=T[3],ie=L[0],K=L[1],ce=L[2],he=L[3];return F[0]=U*he+ee*ie+V*ce-$*K,F[1]=V*he+ee*K+$*ie-U*ce,F[2]=$*he+ee*ce+U*K-V*ie,F[3]=ee*he-U*ie-V*K-$*ce,F[4]=U*(he=L[7])+ee*(ie=L[4])+V*(ce=L[6])-$*(K=L[5]),F[5]=V*he+ee*K+$*ie-U*ce,F[6]=$*he+ee*ce+U*K-V*ie,F[7]=ee*he-U*ie-V*K-$*ce,F},Ut.rotateAroundAxis=function(F,T,L,U){if(Math.abs(U)<s.EPSILON)return C(F,T);var V=Math.hypot(L[0],L[1],L[2]);U*=.5;var $=Math.sin(U),ee=$*L[0]/V,ie=$*L[1]/V,K=$*L[2]/V,ce=Math.cos(U),he=T[0],Be=T[1],Ne=T[2],Ve=T[3];F[0]=he*ce+Ve*ee+Be*K-Ne*ie,F[1]=Be*ce+Ve*ie+Ne*ee-he*K,F[2]=Ne*ce+Ve*K+he*ie-Be*ee,F[3]=Ve*ce-he*ee-Be*ie-Ne*K;var Oe=T[4],rt=T[5],je=T[6],ct=T[7];return F[4]=Oe*ce+ct*ee+rt*K-je*ie,F[5]=rt*ce+ct*ie+je*ee-Oe*K,F[6]=je*ce+ct*K+Oe*ie-rt*ee,F[7]=ct*ce-Oe*ee-rt*ie-je*K,F},Ut.add=function(F,T,L){return F[0]=T[0]+L[0],F[1]=T[1]+L[1],F[2]=T[2]+L[2],F[3]=T[3]+L[3],F[4]=T[4]+L[4],F[5]=T[5]+L[5],F[6]=T[6]+L[6],F[7]=T[7]+L[7],F},Ut.multiply=P,Ut.scale=function(F,T,L){return F[0]=T[0]*L,F[1]=T[1]*L,F[2]=T[2]*L,F[3]=T[3]*L,F[4]=T[4]*L,F[5]=T[5]*L,F[6]=T[6]*L,F[7]=T[7]*L,F},Ut.lerp=function(F,T,L,U){var V=1-U;return R(T,L)<0&&(U=-U),F[0]=T[0]*V+L[0]*U,F[1]=T[1]*V+L[1]*U,F[2]=T[2]*V+L[2]*U,F[3]=T[3]*V+L[3]*U,F[4]=T[4]*V+L[4]*U,F[5]=T[5]*V+L[5]*U,F[6]=T[6]*V+L[6]*U,F[7]=T[7]*V+L[7]*U,F},Ut.invert=function(F,T){var L=S(T);return F[0]=-T[0]/L,F[1]=-T[1]/L,F[2]=-T[2]/L,F[3]=T[3]/L,F[4]=-T[4]/L,F[5]=-T[5]/L,F[6]=-T[6]/L,F[7]=T[7]/L,F},Ut.conjugate=function(F,T){return F[0]=-T[0],F[1]=-T[1],F[2]=-T[2],F[3]=T[3],F[4]=-T[4],F[5]=-T[5],F[6]=-T[6],F[7]=T[7],F},Ut.normalize=function(F,T){var L=S(T);if(L>0){L=Math.sqrt(L);var U=T[0]/L,V=T[1]/L,$=T[2]/L,ee=T[3]/L,ie=T[4],K=T[5],ce=T[6],he=T[7],Be=U*ie+V*K+$*ce+ee*he;F[0]=U,F[1]=V,F[2]=$,F[3]=ee,F[4]=(ie-U*Be)/L,F[5]=(K-V*Be)/L,F[6]=(ce-$*Be)/L,F[7]=(he-ee*Be)/L}return F},Ut.str=function(F){return"quat2("+F[0]+", "+F[1]+", "+F[2]+", "+F[3]+", "+F[4]+", "+F[5]+", "+F[6]+", "+F[7]+")"},Ut.exactEquals=function(F,T){return F[0]===T[0]&&F[1]===T[1]&&F[2]===T[2]&&F[3]===T[3]&&F[4]===T[4]&&F[5]===T[5]&&F[6]===T[6]&&F[7]===T[7]},Ut.equals=function(F,T){var L=F[0],U=F[1],V=F[2],$=F[3],ee=F[4],ie=F[5],K=F[6],ce=F[7],he=T[0],Be=T[1],Ne=T[2],Ve=T[3],Oe=T[4],rt=T[5],je=T[6],ct=T[7];return Math.abs(L-he)<=s.EPSILON*Math.max(1,Math.abs(L),Math.abs(he))&&Math.abs(U-Be)<=s.EPSILON*Math.max(1,Math.abs(U),Math.abs(Be))&&Math.abs(V-Ne)<=s.EPSILON*Math.max(1,Math.abs(V),Math.abs(Ne))&&Math.abs($-Ve)<=s.EPSILON*Math.max(1,Math.abs($),Math.abs(Ve))&&Math.abs(ee-Oe)<=s.EPSILON*Math.max(1,Math.abs(ee),Math.abs(Oe))&&Math.abs(ie-rt)<=s.EPSILON*Math.max(1,Math.abs(ie),Math.abs(rt))&&Math.abs(K-je)<=s.EPSILON*Math.max(1,Math.abs(K),Math.abs(je))&&Math.abs(ce-ct)<=s.EPSILON*Math.max(1,Math.abs(ce),Math.abs(ct))},Ut.sqrLen=Ut.squaredLength=Ut.len=Ut.length=Ut.dot=Ut.mul=Ut.setReal=Ut.getReal=void 0;var s=A(M()),c=A(Mt()),f=A(ue());function y(F){if(typeof WeakMap!="function")return null;var T=new WeakMap,L=new WeakMap;return(y=function(U){return U?L:T})(F)}function A(F,T){if(F&&F.__esModule)return F;if(F===null||d(F)!=="object"&&typeof F!="function")return{default:F};var L=y(T);if(L&&L.has(F))return L.get(F);var U={},V=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var $ in F)if($!=="default"&&Object.prototype.hasOwnProperty.call(F,$)){var ee=V?Object.getOwnPropertyDescriptor(F,$):null;ee&&(ee.get||ee.set)?Object.defineProperty(U,$,ee):U[$]=F[$]}return U.default=F,L&&L.set(F,U),U}function _(F,T,L){var U=.5*L[0],V=.5*L[1],$=.5*L[2],ee=T[0],ie=T[1],K=T[2],ce=T[3];return F[0]=ee,F[1]=ie,F[2]=K,F[3]=ce,F[4]=U*ce+V*K-$*ie,F[5]=V*ce+$*ee-U*K,F[6]=$*ce+U*ie-V*ee,F[7]=-U*ee-V*ie-$*K,F}function C(F,T){return F[0]=T[0],F[1]=T[1],F[2]=T[2],F[3]=T[3],F[4]=T[4],F[5]=T[5],F[6]=T[6],F[7]=T[7],F}function P(F,T,L){var U=T[0],V=T[1],$=T[2],ee=T[3],ie=L[4],K=L[5],ce=L[6],he=L[7],Be=T[4],Ne=T[5],Ve=T[6],Oe=T[7],rt=L[0],je=L[1],ct=L[2],yt=L[3];return F[0]=U*yt+ee*rt+V*ct-$*je,F[1]=V*yt+ee*je+$*rt-U*ct,F[2]=$*yt+ee*ct+U*je-V*rt,F[3]=ee*yt-U*rt-V*je-$*ct,F[4]=U*he+ee*ie+V*ce-$*K+Be*yt+Oe*rt+Ne*ct-Ve*je,F[5]=V*he+ee*K+$*ie-U*ce+Ne*yt+Oe*je+Ve*rt-Be*ct,F[6]=$*he+ee*ce+U*K-V*ie+Ve*yt+Oe*ct+Be*je-Ne*rt,F[7]=ee*he-U*ie-V*K-$*ce+Oe*yt-Be*rt-Ne*je-Ve*ct,F}Ut.getReal=c.copy,Ut.setReal=c.copy,Ut.mul=P;var R=c.dot;Ut.dot=R;var w=c.length;Ut.length=w,Ut.len=w;var S=c.squaredLength;return Ut.squaredLength=S,Ut.sqrLen=S,Ut}var Ee,$e,We={};function vt(){if(Ee)return We;function d(T){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},d(T)}Ee=1,Object.defineProperty(We,"__esModule",{value:!0}),We.create=f,We.clone=function(T){var L=new s.ARRAY_TYPE(2);return L[0]=T[0],L[1]=T[1],L},We.fromValues=function(T,L){var U=new s.ARRAY_TYPE(2);return U[0]=T,U[1]=L,U},We.copy=function(T,L){return T[0]=L[0],T[1]=L[1],T},We.set=function(T,L,U){return T[0]=L,T[1]=U,T},We.add=function(T,L,U){return T[0]=L[0]+U[0],T[1]=L[1]+U[1],T},We.subtract=y,We.multiply=A,We.divide=_,We.ceil=function(T,L){return T[0]=Math.ceil(L[0]),T[1]=Math.ceil(L[1]),T},We.floor=function(T,L){return T[0]=Math.floor(L[0]),T[1]=Math.floor(L[1]),T},We.min=function(T,L,U){return T[0]=Math.min(L[0],U[0]),T[1]=Math.min(L[1],U[1]),T},We.max=function(T,L,U){return T[0]=Math.max(L[0],U[0]),T[1]=Math.max(L[1],U[1]),T},We.round=function(T,L){return T[0]=Math.round(L[0]),T[1]=Math.round(L[1]),T},We.scale=function(T,L,U){return T[0]=L[0]*U,T[1]=L[1]*U,T},We.scaleAndAdd=function(T,L,U,V){return T[0]=L[0]+U[0]*V,T[1]=L[1]+U[1]*V,T},We.distance=C,We.squaredDistance=P,We.length=R,We.squaredLength=w,We.negate=function(T,L){return T[0]=-L[0],T[1]=-L[1],T},We.inverse=function(T,L){return T[0]=1/L[0],T[1]=1/L[1],T},We.normalize=function(T,L){var U=L[0],V=L[1],$=U*U+V*V;return $>0&&($=1/Math.sqrt($)),T[0]=L[0]*$,T[1]=L[1]*$,T},We.dot=function(T,L){return T[0]*L[0]+T[1]*L[1]},We.cross=function(T,L,U){var V=L[0]*U[1]-L[1]*U[0];return T[0]=T[1]=0,T[2]=V,T},We.lerp=function(T,L,U,V){var $=L[0],ee=L[1];return T[0]=$+V*(U[0]-$),T[1]=ee+V*(U[1]-ee),T},We.random=function(T,L){L=L||1;var U=2*s.RANDOM()*Math.PI;return T[0]=Math.cos(U)*L,T[1]=Math.sin(U)*L,T},We.transformMat2=function(T,L,U){var V=L[0],$=L[1];return T[0]=U[0]*V+U[2]*$,T[1]=U[1]*V+U[3]*$,T},We.transformMat2d=function(T,L,U){var V=L[0],$=L[1];return T[0]=U[0]*V+U[2]*$+U[4],T[1]=U[1]*V+U[3]*$+U[5],T},We.transformMat3=function(T,L,U){var V=L[0],$=L[1];return T[0]=U[0]*V+U[3]*$+U[6],T[1]=U[1]*V+U[4]*$+U[7],T},We.transformMat4=function(T,L,U){var V=L[0],$=L[1];return T[0]=U[0]*V+U[4]*$+U[12],T[1]=U[1]*V+U[5]*$+U[13],T},We.rotate=function(T,L,U,V){var $=L[0]-U[0],ee=L[1]-U[1],ie=Math.sin(V),K=Math.cos(V);return T[0]=$*K-ee*ie+U[0],T[1]=$*ie+ee*K+U[1],T},We.angle=function(T,L){var U=T[0],V=T[1],$=L[0],ee=L[1],ie=Math.sqrt(U*U+V*V)*Math.sqrt($*$+ee*ee);return Math.acos(Math.min(Math.max(ie&&(U*$+V*ee)/ie,-1),1))},We.zero=function(T){return T[0]=0,T[1]=0,T},We.str=function(T){return"vec2("+T[0]+", "+T[1]+")"},We.exactEquals=function(T,L){return T[0]===L[0]&&T[1]===L[1]},We.equals=function(T,L){var U=T[0],V=T[1],$=L[0],ee=L[1];return Math.abs(U-$)<=s.EPSILON*Math.max(1,Math.abs(U),Math.abs($))&&Math.abs(V-ee)<=s.EPSILON*Math.max(1,Math.abs(V),Math.abs(ee))},We.forEach=We.sqrLen=We.sqrDist=We.dist=We.div=We.mul=We.sub=We.len=void 0;var s=function(T,L){if(T&&T.__esModule)return T;if(T===null||d(T)!=="object"&&typeof T!="function")return{default:T};var U=c(void 0);if(U&&U.has(T))return U.get(T);var V={},$=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ee in T)if(ee!=="default"&&Object.prototype.hasOwnProperty.call(T,ee)){var ie=$?Object.getOwnPropertyDescriptor(T,ee):null;ie&&(ie.get||ie.set)?Object.defineProperty(V,ee,ie):V[ee]=T[ee]}return V.default=T,U&&U.set(T,V),V}(M());function c(T){if(typeof WeakMap!="function")return null;var L=new WeakMap,U=new WeakMap;return(c=function(V){return V?U:L})(T)}function f(){var T=new s.ARRAY_TYPE(2);return s.ARRAY_TYPE!=Float32Array&&(T[0]=0,T[1]=0),T}function y(T,L,U){return T[0]=L[0]-U[0],T[1]=L[1]-U[1],T}function A(T,L,U){return T[0]=L[0]*U[0],T[1]=L[1]*U[1],T}function _(T,L,U){return T[0]=L[0]/U[0],T[1]=L[1]/U[1],T}function C(T,L){return Math.hypot(L[0]-T[0],L[1]-T[1])}function P(T,L){var U=L[0]-T[0],V=L[1]-T[1];return U*U+V*V}function R(T){return Math.hypot(T[0],T[1])}function w(T){var L=T[0],U=T[1];return L*L+U*U}We.len=R,We.sub=y,We.mul=A,We.div=_,We.dist=C,We.sqrDist=P,We.sqrLen=w;var S,F=(S=f(),function(T,L,U,V,$,ee){var ie,K;for(L||(L=2),U||(U=0),K=V?Math.min(V*L+U,T.length):T.length,ie=U;ie<K;ie+=L)S[0]=T[ie],S[1]=T[ie+1],$(S,S,ee),T[ie]=S[0],T[ie+1]=S[1];return T});return We.forEach=F,We}function _t(){if($e)return I;function d(T){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},d(T)}$e=1,Object.defineProperty(I,"__esModule",{value:!0}),I.vec4=I.vec3=I.vec2=I.quat2=I.quat=I.mat4=I.mat3=I.mat2d=I.mat2=I.glMatrix=void 0;var s=F(M());I.glMatrix=s;var c=F(Z());I.mat2=c;var f=F(be());I.mat2d=f;var y=F(Ie());I.mat3=y;var A=F(ue());I.mat4=A;var _=F(Mt());I.quat=_;var C=F(In());I.quat2=C;var P=F(vt());I.vec2=P;var R=F(ge());I.vec3=R;var w=F(Tt());function S(T){if(typeof WeakMap!="function")return null;var L=new WeakMap,U=new WeakMap;return(S=function(V){return V?U:L})(T)}function F(T,L){if(T&&T.__esModule)return T;if(T===null||d(T)!=="object"&&typeof T!="function")return{default:T};var U=S(L);if(U&&U.has(T))return U.get(T);var V={},$=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ee in T)if(ee!=="default"&&Object.prototype.hasOwnProperty.call(T,ee)){var ie=$?Object.getOwnPropertyDescriptor(T,ee):null;ie&&(ie.get||ie.set)?Object.defineProperty(V,ee,ie):V[ee]=T[ee]}return V.default=T,U&&U.set(T,V),V}return I.vec4=w,I}var at,Ft,Dt,yn,De=_t(),jn=function(){if(Ft)return at;function d(s,c,f,y){this.cx=3*s,this.bx=3*(f-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(y-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=c,this.p2x=f,this.p2y=y}return Ft=1,at=d,d.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,c){if(c===void 0&&(c=1e-6),s<0)return 0;if(s>1)return 1;for(var f=s,y=0;y<8;y++){var A=this.sampleCurveX(f)-s;if(Math.abs(A)<c)return f;var _=this.sampleCurveDerivativeX(f);if(Math.abs(_)<1e-6)break;f-=A/_}var C=0,P=1;for(f=s,y=0;y<20&&(A=this.sampleCurveX(f),!(Math.abs(A-s)<c));y++)s>A?C=f:P=f,f=.5*(P-C)+C;return f},solve:function(s,c){return this.sampleCurveY(this.solveCurveX(s,c))}},at}(),Te=b(jn);function Je(){if(yn)return Dt;function d(s,c){this.x=s,this.y=c}return yn=1,Dt=d,d.prototype={clone:function(){return new d(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,c){return this.clone()._rotateAround(s,c)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var c=s.x-this.x,f=s.y-this.y;return c*c+f*f},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,c){return Math.atan2(this.x*c-this.y*s,this.x*s+this.y*c)},_matMult:function(s){var c=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=c,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var c=Math.cos(s),f=Math.sin(s),y=f*this.x+c*this.y;return this.x=c*this.x-f*this.y,this.y=y,this},_rotateAround:function(s,c){var f=Math.cos(s),y=Math.sin(s),A=c.y+y*(this.x-c.x)+f*(this.y-c.y);return this.x=c.x+f*(this.x-c.x)-y*(this.y-c.y),this.y=A,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},d.convert=function(s){return s instanceof d?s:Array.isArray(s)?new d(s[0],s[1]):s},Dt}var Fe=b(Je());function Re(d,s){if(Array.isArray(d)){if(!Array.isArray(s)||d.length!==s.length)return!1;for(let c=0;c<d.length;c++)if(!Re(d[c],s[c]))return!1;return!0}if(typeof d=="object"&&d!==null&&s!==null){if(typeof s!="object"||Object.keys(d).length!==Object.keys(s).length)return!1;for(const c in d)if(!Re(d[c],s[c]))return!1;return!0}return d===s}const Yt=Math.PI/180,rn=180/Math.PI;function zt(d){return d*Yt}function Jt(d){return d*rn}const gn=[[0,0],[1,0],[1,1],[0,1]];function fn(d){if(d<=0)return 0;if(d>=1)return 1;const s=d*d,c=s*d;return 4*(d<.5?c:3*(d-s)+c-.75)}function Fn(d,s,c,f){const y=new Te(d,s,c,f);return function(A){return y.solve(A)}}const Wn=Fn(.25,.1,.25,1);function _n(d,s,c){return Math.min(c,Math.max(s,d))}function er(d,s,c){return(c=_n((c-d)/(s-d),0,1))*c*(3-2*c)}function ar(d,s,c){const f=c-s,y=((d-s)%f+f)%f+s;return y===s?c:y}function Fr(d,s,c){if(!d.length)return c(null,[]);let f=d.length;const y=new Array(d.length);let A=null;d.forEach((_,C)=>{s(_,(P,R)=>{P&&(A=P),y[C]=R,--f==0&&c(A,y)})})}function lr(d,...s){for(const c of s)for(const f in c)d[f]=c[f];return d}let Ir=1;function pr(){return Ir++}function to(d){return d<=1?1:Math.pow(2,Math.ceil(Math.log(d)/Math.LN2))}function xi(d,s){d.forEach(c=>{s[c]&&(s[c]=s[c].bind(s))})}function No(d,s){return d.indexOf(s,d.length-s.length)!==-1}function Fi(d,s,c){const f={};for(const y in d)f[y]=s.call(this,d[y],y,d);return f}function pi(d,s,c){const f={};for(const y in d)s.call(this,d[y],y,d)&&(f[y]=d[y]);return f}function Wi(d){return Array.isArray(d)?d.map(Wi):typeof d=="object"&&d?Fi(d,Wi):d}const Ti={};function Jr(d){Ti[d]||(typeof console<"u"&&console.warn(d),Ti[d]=!0)}function Xi(d,s,c){return(c.y-d.y)*(s.x-d.x)>(s.y-d.y)*(c.x-d.x)}function Ns(d){let s=0;for(let c,f,y=0,A=d.length,_=A-1;y<A;_=y++)c=d[y],f=d[_],s+=(f.x-c.x)*(c.y+f.y);return s}function ns([d,s,c]){const f=zt(s+90),y=zt(c);return{x:d*Math.cos(f)*Math.sin(y),y:d*Math.sin(f)*Math.sin(y),z:d*Math.cos(y),azimuthal:s,polar:c}}function lo(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Gr(d){const s={};if(d.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(c,f,y,A)=>{const _=y||A;return s[f]=!_||_.toLowerCase(),""}),s["max-age"]){const c=parseInt(s["max-age"],10);isNaN(c)?delete s["max-age"]:s["max-age"]=c}return s}let Ni,Pa=null;function Zo(d,s){return[d[4*s],d[4*s+1],d[4*s+2],d[4*s+3]]}function jt(d,s,c,f){for(;s<c;){const y=s+c>>1;d[y]<f?s=y+1:c=y}return s}function we(d,s,c,f){for(;s<c;){const y=s+c>>1;d[y]<=f?s=y+1:c=y}return s}function Ce(d){return d>0?1/(1.001-d):1+d}function Ye(d){return d>0?1-1/(1.001-d):-d}const dt={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(Ni==null){const d=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{Ni=n.API_URL_REGEX!=null?new RegExp(n.API_URL_REGEX):d}catch{Ni=d}}return Ni},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!dt.API_URL)return null;try{const d=new URL(dt.API_URL);return d.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":d.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",RASTERARRAYS_URL_PREFIX:"rasterarrays/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",MESHOPT_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_base_v0.20.wasm",MESHOPT_SIMD_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_simd_v0.20.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",TILES3D_URL_PREFIX:"3dtiles/v1"};function ot(d){return dt.API_URL_REGEX.test(d)}function wt(d){return dt.API_SPRITE_REGEX.test(d)}let Vt,St,Gt,nn,qt,En;function zn(){return Vt==null&&(Vt=self.OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),Vt}const Vn={now:()=>nn!==void 0?nn:performance.now(),setNow(d){nn=d},restoreNow(){nn=void 0},frame(d){const s=requestAnimationFrame(d);return{cancel:()=>cancelAnimationFrame(s)}},getImageData(d,s=0){const{width:c,height:f}=d;qt||(qt=document.createElement("canvas"));const y=qt.getContext("2d",{willReadFrequently:!0});if(!y)throw new Error("failed to create canvas 2d context");return(c>qt.width||f>qt.height)&&(qt.width=c,qt.height=f),y.clearRect(-s,-s,c+2*s,f+2*s),y.drawImage(d,0,0,c,f),y.getImageData(-s,-s,c+2*s,f+2*s)},resolveURL:d=>(St||(St=document.createElement("a")),St.href=d,St.href),get devicePixelRatio(){return window.devicePixelRatio},get prefersReducedMotion(){return!!window.matchMedia&&(Gt==null&&(Gt=window.matchMedia("(prefers-reduced-motion: reduce)")),Gt.matches)},hasCanvasFingerprintNoise(){if(En!==void 0)return En;if(!zn())return En=!1,!1;const d=new OffscreenCanvas(85,1),s=d.getContext("2d",{willReadFrequently:!0});let c=0;for(let y=0;y<d.width;++y)s.fillStyle=`rgba(${c++},${c++},${c++}, 255)`,s.fillRect(y,0,1,1);const f=s.getImageData(0,0,d.width,d.height);c=0;for(let y=0;y<f.data.length;++y)if(y%4!=3&&c++!==f.data[y])return En=!0,!0;return En=!1,!1}};function gr(d,s){const c=d.indexOf("?");if(c<0)return`${d}?${new URLSearchParams(s).toString()}`;const f=new URLSearchParams(d.slice(c));for(const y in s)f.set(y,s[y]);return`${d.slice(0,c)}?${f.toString()}`}function Er(d,s={persistentParams:[]}){const c=d.indexOf("?");if(c<0)return d;const f=new URLSearchParams,y=new URLSearchParams(d.slice(c));for(const _ of s.persistentParams){const C=y.get(_);C&&f.set(_,C)}const A=f.toString();return`${d.slice(0,c)}${A.length>0?`?${A}`:""}`}const Tr="mapbox-tiles";let Br=500,hi=50;const mi=["language","worldview","jobid"];let Mr,Ci;function $i(){try{return caches}catch{}}function jo(){const d=$i();d&&Mr==null&&(Mr=d.open(Tr))}let Co=1/0;const $o={supported:!1,testSupport:function(d){!Xu&&ya&&(yc?Vl(d):Ps=d)}};let Ps,ya,Xu=!1,yc=!1;const _c=typeof self<"u"?self:{};function Vl(d){const s=d.createTexture();d.bindTexture(d.TEXTURE_2D,s);try{if(d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,ya),d.isContextLost())return;$o.supported=!0}catch{}d.deleteTexture(s),Xu=!0}_c.document&&(ya=_c.document.createElement("img"),ya.onload=function(){Ps&&Vl(Ps),Ps=null,yc=!0},ya.onerror=function(){Xu=!0,Ps=null},ya.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Ql={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image",Model:"Model"};typeof Object.freeze=="function"&&Object.freeze(Ql);class Go extends Error{constructor(s,c,f){c===401&&ot(f)&&(s+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(s),this.status=c,this.url=f}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const vu=lo()?()=>self.worker&&self.worker.referrer:()=>(location.protocol==="blob:"?parent:self).location.href,vc=function(d,s){if(!(/^file:/.test(c=d.url)||/^file:/.test(vu())&&!/^\w+:/.test(c))){if(self.fetch&&self.Request&&self.AbortController&&Request.prototype.hasOwnProperty("signal"))return function(f,y){const A=new AbortController,_=new Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,referrer:vu(),referrerPolicy:f.referrerPolicy,signal:A.signal});let C=!1,P=!1;const R=(w=_.url).indexOf("sku=")>0&&ot(w);var w;f.type==="json"&&_.headers.set("Accept","application/json");const S=(T,L,U)=>{if(P)return;if(T&&T.message!=="SecurityError"&&Jr(T.toString()),L&&U)return F(L);const V=Date.now();fetch(_).then($=>{if($.ok){const ee=R?$.clone():null;return F($,ee,V)}return y(new Go($.statusText,$.status,f.url))}).catch($=>{$.name!=="AbortError"&&y(new Error(`${$.message} ${f.url}`))})},F=(T,L,U)=>{(f.type==="arrayBuffer"?T.arrayBuffer():f.type==="json"?T.json():T.text()).then(V=>{P||(L&&U&&function($,ee,ie){if(jo(),Mr==null)return;const K=Gr(ee.headers.get("Cache-Control")||"");if(K["no-store"])return;const ce={status:ee.status,statusText:ee.statusText,headers:new Headers};ee.headers.forEach((Ne,Ve)=>ce.headers.set(Ve,Ne)),K["max-age"]&&ce.headers.set("Expires",new Date(ie+1e3*K["max-age"]).toUTCString());const he=ce.headers.get("Expires");if(!he||new Date(he).getTime()-ie<42e4)return;let Be=Er($.url,{persistentParams:mi});if(ee.status===206){const Ne=$.headers.get("Range");if(!Ne)return;ce.status=200,Be=gr(Be,{range:Ne})}(function(Ne,Ve){if(Ci===void 0)try{new Response(new ReadableStream),Ci=!0}catch{Ci=!1}Ci?Ve(Ne.body):Ne.blob().then(Ve)})(ee,Ne=>{const Ve=new Response((Oe=ee.status)!==200&&Oe!==404&&[101,103,204,205,304].includes(Oe)?null:Ne,ce);var Oe;jo(),Mr!=null&&Mr.then(rt=>rt.put(Be,Ve)).catch(rt=>Jr(rt.message))})}(_,L,U),C=!0,y(null,V,T.headers.get("Cache-Control"),T.headers.get("Expires")))}).catch(V=>{P||y(new Error(V.message))})};return R?function(T,L){if(jo(),Mr==null)return L(null);Mr.then(U=>{let V=Er(T.url,{persistentParams:mi});const $=T.headers.get("Range");$&&(V=gr(V,{range:$})),U.match(V).then(ee=>{const ie=function(K){if(!K)return!1;const ce=new Date(K.headers.get("Expires")||0),he=Gr(K.headers.get("Cache-Control")||"");return ce>Date.now()&&!he["no-cache"]}(ee);U.delete(V),ie&&U.put(V,ee.clone()),L(null,ee,ie)}).catch(L)}).catch(L)}(_,S):S(null,null),{cancel:()=>{P=!0,C||A.abort()}}}(d,s);if(lo()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",d,s,void 0,!0)}var c;return function(f,y){const A=new XMLHttpRequest;A.open(f.method||"GET",f.url,!0),f.type==="arrayBuffer"&&(A.responseType="arraybuffer");for(const _ in f.headers)A.setRequestHeader(_,f.headers[_]);return f.type==="json"&&(A.responseType="text",A.setRequestHeader("Accept","application/json")),A.withCredentials=f.credentials==="include",A.onerror=()=>{y(new Error(A.statusText))},A.onload=()=>{if((A.status>=200&&A.status<300||A.status===0)&&A.response!==null){let _=A.response;if(f.type==="json")try{_=JSON.parse(A.response)}catch(C){return y(C)}y(null,_,A.getResponseHeader("Cache-Control"),A.getResponseHeader("Expires"))}else y(new Go(A.statusText,A.status,f.url))},A.send(f.body),{cancel:()=>A.abort()}}(d,s)},bc=function(d,s){return vc(lr(d,{type:"arrayBuffer"}),s)};function sa(d){const s=document.createElement("a");return s.href=d,s.protocol===location.protocol&&s.host===location.host}const La="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let ls,Ls;ls=[],Ls=0;const go=function(d,s){if($o.supported&&(d.headers||(d.headers={}),d.headers.accept="image/webp,*/*"),Ls>=dt.MAX_PARALLEL_IMAGE_REQUESTS){const A={requestParameters:d,callback:s,cancelled:!1,cancel(){this.cancelled=!0}};return ls.push(A),A}Ls++;let c=!1;const f=()=>{if(!c)for(c=!0,Ls--;ls.length&&Ls<dt.MAX_PARALLEL_IMAGE_REQUESTS;){const A=ls.shift(),{requestParameters:_,callback:C,cancelled:P}=A;P||(A.cancel=go(_,C).cancel)}},y=bc(d,(A,_,C,P)=>{f(),A?s(A):_&&(self.createImageBitmap?function(R,w){const S=new Blob([new Uint8Array(R)],{type:"image/png"});createImageBitmap(S).then(F=>{w(null,F)}).catch(F=>{w(new Error(`Could not load image because of ${F.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(_,(R,w)=>s(R,w,C,P)):function(R,w){const S=new Image;S.onload=()=>{w(null,S),URL.revokeObjectURL(S.src),S.onload=null,requestAnimationFrame(()=>{S.src=La})},S.onerror=()=>w(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const F=new Blob([new Uint8Array(R)],{type:"image/png"});S.src=R.byteLength?URL.createObjectURL(F):La}(_,(R,w)=>s(R,w,C,P)))});return{cancel:()=>{y.cancel(),f()}}};var qs,wc,Vc,Fa={exports:{}},co={exports:{}},Qc={exports:{}},bu=function(){if(Vc)return Fa.exports;Vc=1;var d=(qs||(qs=1,co.exports=function(c,f){var y,A,_,C,P,R,w,S;for(A=c.length-(y=3&c.length),_=f,P=3432918353,R=461845907,S=0;S<A;)w=255&c.charCodeAt(S)|(255&c.charCodeAt(++S))<<8|(255&c.charCodeAt(++S))<<16|(255&c.charCodeAt(++S))<<24,++S,_=27492+(65535&(C=5*(65535&(_=(_^=w=(65535&(w=(w=(65535&w)*P+(((w>>>16)*P&65535)<<16)&4294967295)<<15|w>>>17))*R+(((w>>>16)*R&65535)<<16)&4294967295)<<13|_>>>19))+((5*(_>>>16)&65535)<<16)&4294967295))+((58964+(C>>>16)&65535)<<16);switch(w=0,y){case 3:w^=(255&c.charCodeAt(S+2))<<16;case 2:w^=(255&c.charCodeAt(S+1))<<8;case 1:_^=w=(65535&(w=(w=(65535&(w^=255&c.charCodeAt(S)))*P+(((w>>>16)*P&65535)<<16)&4294967295)<<15|w>>>17))*R+(((w>>>16)*R&65535)<<16)&4294967295}return _^=c.length,_=2246822507*(65535&(_^=_>>>16))+((2246822507*(_>>>16)&65535)<<16)&4294967295,_=3266489909*(65535&(_^=_>>>13))+((3266489909*(_>>>16)&65535)<<16)&4294967295,(_^=_>>>16)>>>0}),co.exports),s=(wc||(wc=1,Qc.exports=function(c,f){for(var y,A=c.length,_=f^A,C=0;A>=4;)y=1540483477*(65535&(y=255&c.charCodeAt(C)|(255&c.charCodeAt(++C))<<8|(255&c.charCodeAt(++C))<<16|(255&c.charCodeAt(++C))<<24))+((1540483477*(y>>>16)&65535)<<16),_=1540483477*(65535&_)+((1540483477*(_>>>16)&65535)<<16)^(y=1540483477*(65535&(y^=y>>>24))+((1540483477*(y>>>16)&65535)<<16)),A-=4,++C;switch(A){case 3:_^=(255&c.charCodeAt(C+2))<<16;case 2:_^=(255&c.charCodeAt(C+1))<<8;case 1:_=1540483477*(65535&(_^=255&c.charCodeAt(C)))+((1540483477*(_>>>16)&65535)<<16)}return _=1540483477*(65535&(_^=_>>>13))+((1540483477*(_>>>16)&65535)<<16),(_^=_>>>15)>>>0}),Qc.exports);return Fa.exports=d,Fa.exports.murmur3=d,Fa.exports.murmur2=s,Fa.exports}(),cs=b(bu);class Hl{constructor(s,...c){lr(this,c[0]||{}),this.type=s}}class Hc extends Hl{constructor(s,c={}){super("error",lr({error:s},c))}}function jc(d,s,c){c[d]&&c[d].indexOf(s)!==-1||(c[d]=c[d]||[],c[d].push(s))}function bl(d,s,c){if(c&&c[d]){const f=c[d].indexOf(s);f!==-1&&c[d].splice(f,1)}}class wl{on(s,c){return this._listeners=this._listeners||{},jc(s,c,this._listeners),this}off(s,c){return bl(s,c,this._listeners),bl(s,c,this._oneTimeListeners),this}once(s,c){return c?(this._oneTimeListeners=this._oneTimeListeners||{},jc(s,c,this._oneTimeListeners),this):new Promise(f=>this.once(s,f))}fire(s,c){const f=typeof s=="string"?new Hl(s,c):s,y=f.type;if(this.listens(y)){f.target=this;const A=this._listeners&&this._listeners[y]?this._listeners[y].slice():[];for(const P of A)P.call(this,f);const _=this._oneTimeListeners&&this._oneTimeListeners[y]?this._oneTimeListeners[y].slice():[];for(const P of _)bl(y,P,this._oneTimeListeners),P.call(this,f);const C=this._eventedParent;C&&(lr(f,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),C.fire(f))}else f instanceof Hc&&console.error(f.error);return this}listens(s){return!!(this._listeners&&this._listeners[s]&&this._listeners[s].length>0||this._oneTimeListeners&&this._oneTimeListeners[s]&&this._oneTimeListeners[s].length>0||this._eventedParent&&this._eventedParent.listens(s))}setEventedParent(s,c){return this._eventedParent=s,this._eventedParentData=c,this}}var $c,ei={},Ko=function(){if($c)return ei;$c=1;var d={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function s(A){return(A=Math.round(A))<0?0:A>255?255:A}function c(A){return s(A[A.length-1]==="%"?parseFloat(A)/100*255:parseInt(A))}function f(A){return(_=A[A.length-1]==="%"?parseFloat(A)/100:parseFloat(A))<0?0:_>1?1:_;var _}function y(A,_,C){return C<0?C+=1:C>1&&(C-=1),6*C<1?A+(_-A)*C*6:2*C<1?_:3*C<2?A+(_-A)*(2/3-C)*6:A}try{ei.parseCSSColor=function(A){var _,C=A.replace(/ /g,"").toLowerCase();if(C in d)return d[C].slice();if(C[0]==="#")return C.length===4?(_=parseInt(C.substr(1),16))>=0&&_<=4095?[(3840&_)>>4|(3840&_)>>8,240&_|(240&_)>>4,15&_|(15&_)<<4,1]:null:C.length===7&&(_=parseInt(C.substr(1),16))>=0&&_<=16777215?[(16711680&_)>>16,(65280&_)>>8,255&_,1]:null;var P=C.indexOf("("),R=C.indexOf(")");if(P!==-1&&R+1===C.length){var w=C.substr(0,P),S=C.substr(P+1,R-(P+1)).split(","),F=1;switch(w){case"rgba":if(S.length!==4)return null;F=f(S.pop());case"rgb":return S.length!==3?null:[c(S[0]),c(S[1]),c(S[2]),F];case"hsla":if(S.length!==4)return null;F=f(S.pop());case"hsl":if(S.length!==3)return null;var T=(parseFloat(S[0])%360+360)%360/360,L=f(S[1]),U=f(S[2]),V=U<=.5?U*(L+1):U+L-U*L,$=2*U-V;return[s(255*y($,V,T+1/3)),s(255*y($,V,T)),s(255*y($,V,T-1/3)),F];default:return null}}return null}}catch{}return ei}();class _i{constructor(s,c,f,y=1){this.r=s,this.g=c,this.b=f,this.a=y}static parse(s){if(!s)return;if(s instanceof _i)return s;if(typeof s!="string")return;const c=Ko.parseCSSColor(s);return c?new _i(c[0]/255*c[3],c[1]/255*c[3],c[2]/255*c[3],c[3]):void 0}toString(){const[s,c,f,y]=this.a===0?[0,0,0,0]:[255*this.r/this.a,255*this.g/this.a,255*this.b/this.a,this.a];return`rgba(${Math.round(s)},${Math.round(c)},${Math.round(f)},${y})`}toRenderColor(s){const{r:c,g:f,b:y,a:A}=this;return new Dh(s,c,f,y,A)}}class Dh{constructor(s,c,f,y,A){if(s){const _=s.image.height,C=_*_;c=A===0?0:c/A*(_-1),f=A===0?0:f/A*(_-1),y=A===0?0:y/A*(_-1);const P=Math.floor(c),R=Math.floor(f),w=Math.floor(y),S=Math.ceil(c),F=Math.ceil(f),T=Math.ceil(y),L=c-P,U=f-R,V=y-w,$=s.image.data,ee=4*(P+R*C+w*_),ie=4*(P+R*C+T*_),K=4*(P+F*C+w*_),ce=4*(P+F*C+T*_),he=4*(S+R*C+w*_),Be=4*(S+R*C+T*_),Ne=4*(S+F*C+w*_),Ve=4*(S+F*C+T*_);if(ee<0||Ve>=$.length)throw new Error("out of range");this.r=$n($n($n($[ee],$[ie],V),$n($[K],$[ce],V),U),$n($n($[he],$[Be],V),$n($[Ne],$[Ve],V),U),L)/255*A,this.g=$n($n($n($[ee+1],$[ie+1],V),$n($[K+1],$[ce+1],V),U),$n($n($[he+1],$[Be+1],V),$n($[Ne+1],$[Ve+1],V),U),L)/255*A,this.b=$n($n($n($[ee+2],$[ie+2],V),$n($[K+2],$[ce+2],V),U),$n($n($[he+2],$[Be+2],V),$n($[Ne+2],$[Ve+2],V),U),L)/255*A,this.a=A}else this.r=c,this.g=f,this.b=y,this.a=A}toArray(){const{r:s,g:c,b:f,a:y}=this;return y===0?[0,0,0,0]:[255*s/y,255*c/y,255*f/y,y]}toArray01(){const{r:s,g:c,b:f,a:y}=this;return y===0?[0,0,0,0]:[s/y,c/y,f/y,y]}toArray01Scaled(s){const{r:c,g:f,b:y,a:A}=this;return A===0?[0,0,0]:[c/A*s,f/A*s,y/A*s]}toArray01PremultipliedAlpha(){const{r:s,g:c,b:f,a:y}=this;return[s,c,f,y]}toArray01Linear(){const{r:s,g:c,b:f,a:y}=this;return y===0?[0,0,0,0]:[Math.pow(s/y,2.2),Math.pow(c/y,2.2),Math.pow(f/y,2.2),y]}}function $n(d,s,c){return d*(1-c)+s*c}function sl(d,s,c){return d.map((f,y)=>$n(f,s[y],c))}_i.black=new _i(0,0,0,1),_i.white=new _i(1,1,1,1),_i.transparent=new _i(0,0,0,0),_i.red=new _i(1,0,0,1),_i.blue=new _i(0,0,1,1);var xc=Object.freeze({__proto__:null,array:sl,color:function(d,s,c){return new _i($n(d.r,s.r,c),$n(d.g,s.g,c),$n(d.b,s.b,c),$n(d.a,s.a,c))},number:$n});function _a(d,...s){for(const c of s)for(const f in c)d[f]=c[f];return d}class ja extends Error{constructor(s,c){super(c),this.message=c,this.key=s}}class Ra{constructor(s,c=[]){this.parent=s,this.bindings={};for(const[f,y]of c)this.bindings[f]=y}concat(s){return new Ra(this,s)}get(s){if(this.bindings[s])return this.bindings[s];if(this.parent)return this.parent.get(s);throw new Error(`${s} not found in scope.`)}has(s){return!!this.bindings[s]||!!this.parent&&this.parent.has(s)}}const aa={kind:"null"},tr={kind:"number"},ti={kind:"string"},ni={kind:"boolean"},Ws={kind:"color"},Yo={kind:"object"},$r={kind:"value"},al={kind:"collator"},jl={kind:"formatted"},Gi={kind:"resolvedImage"};function Fs(d,s){return{kind:"array",itemType:d,N:s}}function uo(d){if(d.kind==="array"){const s=uo(d.itemType);return typeof d.N=="number"?`array<${s}, ${d.N}>`:d.itemType.kind==="value"?"array":`array<${s}>`}return d.kind}const Zu=[aa,tr,ti,ni,Ws,jl,Yo,Fs($r),Gi];function $l(d,s){if(s.kind==="error")return null;if(d.kind==="array"){if(s.kind==="array"&&(s.N===0&&s.itemType.kind==="value"||!$l(d.itemType,s.itemType))&&(typeof d.N!="number"||d.N===s.N))return null}else{if(d.kind===s.kind)return null;if(d.kind==="value"){for(const c of Zu)if(!$l(c,s))return null}}return`Expected ${uo(d)} but found ${uo(s)} instead.`}function Gl(d,s){return s.some(c=>c.kind===d.kind)}function la(d,s){return s.some(c=>c==="null"?d===null:c==="array"?Array.isArray(d):c==="object"?d&&!Array.isArray(d)&&typeof d=="object":c===typeof d)}class ka{constructor(s,c,f){this.sensitivity=s?c?"variant":"case":c?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(s,c){return this.collator.compare(s,c)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class yo{constructor(s,c,f,y,A){this.text=s.normalize?s.normalize():s,this.image=c,this.scale=f,this.fontStack=y,this.textColor=A}}class Rs{constructor(s){this.sections=s}static fromString(s){return new Rs([new yo(s,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(s=>s.text.length!==0||s.image&&s.image.namePrimary.length!==0)}static factory(s){return s instanceof Rs?s:Rs.fromString(s)}toString(){return this.sections.length===0?"":this.sections.map(s=>s.text).join("")}serialize(){const s=["format"];for(const c of this.sections){if(c.image){s.push(["image",c.image.namePrimary]);continue}s.push(c.text);const f={};c.fontStack&&(f["text-font"]=["literal",c.fontStack.split(",")]),c.scale&&(f["font-scale"]=c.scale),c.textColor&&(f["text-color"]=["rgba"].concat(c.textColor.toRenderColor(null).toArray())),s.push(f)}return s}}class us{constructor(s){this.namePrimary=s.namePrimary,s.nameSecondary&&(this.nameSecondary=s.nameSecondary),this.available=s.available}toString(){return this.nameSecondary?`[${this.namePrimary},${this.nameSecondary}]`:this.namePrimary}static fromString(s,c){return s?new us({namePrimary:s,nameSecondary:c,available:!1}):null}serialize(){return this.nameSecondary?["image",this.namePrimary,this.nameSecondary]:["image",this.namePrimary]}}function ca(d,s,c,f){return typeof d=="number"&&d>=0&&d<=255&&typeof s=="number"&&s>=0&&s<=255&&typeof c=="number"&&c>=0&&c<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[d,s,c,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[d,s,c,f]:[d,s,c]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function $a(d){if(d===null||typeof d=="string"||typeof d=="boolean"||typeof d=="number"||d instanceof _i||d instanceof ka||d instanceof Rs||d instanceof us)return!0;if(Array.isArray(d)){for(const s of d)if(!$a(s))return!1;return!0}if(typeof d=="object"){for(const s in d)if(!$a(d[s]))return!1;return!0}return!1}function no(d){if(d===null)return aa;if(typeof d=="string")return ti;if(typeof d=="boolean")return ni;if(typeof d=="number")return tr;if(d instanceof _i)return Ws;if(d instanceof ka)return al;if(d instanceof Rs)return jl;if(d instanceof us)return Gi;if(Array.isArray(d)){const s=d.length;let c;for(const f of d){const y=no(f);if(c){if(c===y)continue;c=$r;break}c=y}return Fs(c||$r,s)}return Yo}function xs(d){const s=typeof d;return d===null?"":s==="string"||s==="number"||s==="boolean"?String(d):d instanceof _i||d instanceof Rs||d instanceof us?d.toString():JSON.stringify(d)}class Xs{constructor(s,c){this.type=s,this.value=c}static parse(s,c){if(s.length!==2)return c.error(`'literal' expression requires exactly one argument, but found ${s.length-1} instead.`);if(!$a(s[1]))return c.error("invalid value");const f=s[1];let y=no(f);const A=c.expectedType;return y.kind!=="array"||y.N!==0||!A||A.kind!=="array"||typeof A.N=="number"&&A.N!==0||(y=A),new Xs(y,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof _i?["rgba"].concat(this.value.toRenderColor(null).toArray()):this.value instanceof Rs?this.value.serialize():this.value}}class qo{constructor(s){this.name="ExpressionEvaluationError",this.message=s}toJSON(){return this.message}}const wu={string:ti,number:tr,boolean:ni,object:Yo};class ua{constructor(s,c){this.type=s,this.args=c}static parse(s,c){if(s.length<2)return c.error("Expected at least one argument.");let f,y=1;const A=s[0];if(A==="array"){let C,P;if(s.length>2){const R=s[1];if(typeof R!="string"||!(R in wu)||R==="object")return c.error('The item type argument of "array" must be one of string, number, boolean',1);C=wu[R],y++}else C=$r;if(s.length>3){if(s[2]!==null&&(typeof s[2]!="number"||s[2]<0||s[2]!==Math.floor(s[2])))return c.error('The length argument to "array" must be a positive integer literal',2);P=s[2],y++}f=Fs(C,P)}else f=wu[A];const _=[];for(;y<s.length;y++){const C=c.parse(s[y],y,$r);if(!C)return null;_.push(C)}return new ua(f,_)}evaluate(s){for(let c=0;c<this.args.length;c++){const f=this.args[c].evaluate(s);if(!$l(this.type,no(f)))return f;if(c===this.args.length-1)throw new qo(`The expression ${JSON.stringify(this.args[c].serialize())} evaluated to ${uo(no(f))} but was expected to be of type ${uo(this.type)}.`)}return null}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}serialize(){const s=this.type,c=[s.kind];if(s.kind==="array"){const f=s.itemType;if(f.kind==="string"||f.kind==="number"||f.kind==="boolean"){c.push(f.kind);const y=s.N;(typeof y=="number"||this.args.length>1)&&c.push(y)}}return c.concat(this.args.map(f=>f.serialize()))}}class Ga{constructor(s){this.type=jl,this.sections=s}static parse(s,c){if(s.length<2)return c.error("Expected at least one argument.");const f=s[1];if(!Array.isArray(f)&&typeof f=="object")return c.error("First argument must be an image or text section.");const y=[];let A=!1;for(let _=1;_<=s.length-1;++_){const C=s[_];if(A&&typeof C=="object"&&!Array.isArray(C)){A=!1;let P=null;if(C["font-scale"]&&(P=c.parseObjectValue(C["font-scale"],_,"font-scale",tr),!P))return null;let R=null;if(C["text-font"]&&(R=c.parseObjectValue(C["text-font"],_,"text-font",Fs(ti)),!R))return null;let w=null;if(C["text-color"]&&(w=c.parseObjectValue(C["text-color"],_,"text-color",Ws),!w))return null;const S=y[y.length-1];S.scale=P,S.font=R,S.textColor=w}else{const P=c.parse(s[_],_,$r);if(!P)return null;const R=P.type.kind;if(R!=="string"&&R!=="value"&&R!=="null"&&R!=="resolvedImage")return c.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");A=!0,y.push({content:P,scale:null,font:null,textColor:null})}}return new Ga(y)}evaluate(s){return new Rs(this.sections.map(c=>{const f=c.content.evaluate(s);return no(f)===Gi?new yo("",f,null,null,null):new yo(xs(f),null,c.scale?c.scale.evaluate(s):null,c.font?c.font.evaluate(s).join(","):null,c.textColor?c.textColor.evaluate(s):null)}))}eachChild(s){for(const c of this.sections)s(c.content),c.scale&&s(c.scale),c.font&&s(c.font),c.textColor&&s(c.textColor)}outputDefined(){return!1}serialize(){const s=["format"];for(const c of this.sections){s.push(c.content.serialize());const f={};c.scale&&(f["font-scale"]=c.scale.serialize()),c.font&&(f["text-font"]=c.font.serialize()),c.textColor&&(f["text-color"]=c.textColor.serialize()),s.push(f)}return s}}class Ka{constructor(s,c){this.type=Gi,this.inputPrimary=s,this.inputSecondary=c}static parse(s,c){if(s.length<2)return c.error("Expected two or more arguments.");const f=c.parse(s[1],1,ti);if(!f)return c.error("No image name provided.");if(s.length===2)return new Ka(f);const y=c.parse(s[2],1,ti);return y?new Ka(f,y):c.error("Secondary image variant is not a string.")}evaluate(s){const c=us.fromString(this.inputPrimary.evaluate(s),this.inputSecondary?this.inputSecondary.evaluate(s):void 0);return c&&s.availableImages&&(c.available=s.availableImages.indexOf(c.namePrimary)>-1,c.nameSecondary&&c.available&&s.availableImages&&(c.available=s.availableImages.indexOf(c.nameSecondary)>-1)),c}eachChild(s){s(this.inputPrimary),this.inputSecondary&&s(this.inputSecondary)}outputDefined(){return!1}serialize(){return this.inputSecondary?["image",this.inputPrimary.serialize(),this.inputSecondary.serialize()]:["image",this.inputPrimary.serialize()]}}function ll(d){return d instanceof Number?"number":d instanceof String?"string":d instanceof Boolean?"boolean":Array.isArray(d)?"array":d===null?"null":typeof d}const Kl={"to-boolean":ni,"to-color":Ws,"to-number":tr,"to-string":ti};class Ma{constructor(s,c){this.type=s,this.args=c}static parse(s,c){if(s.length<2)return c.error("Expected at least one argument.");const f=s[0],y=[];let A=aa;if(f==="to-array"){if(!Array.isArray(s[1]))return null;const _=s[1].length;if(c.expectedType){if(c.expectedType.kind!=="array")return c.error(`Expected ${c.expectedType.kind} but found array.`);A=Fs(c.expectedType.itemType,_)}else{if(!(_>0&&$a(s[1][0])))return null;A=Fs(no(s[1][0]),_)}for(let C=0;C<_;C++){const P=s[1][C];let R;if(ll(P)==="array")R=c.parse(P,void 0,A.itemType);else{const w=ll(P);if(w!==A.itemType.kind)return c.error(`Expected ${A.itemType.kind} but found ${w}.`);R=c.registry.literal.parse(["literal",P===void 0?null:P],c)}if(!R)return null;y.push(R)}}else{if((f==="to-boolean"||f==="to-string")&&s.length!==2)return c.error("Expected one argument.");A=Kl[f];for(let _=1;_<s.length;_++){const C=c.parse(s[_],_,$r);if(!C)return null;y.push(C)}}return new Ma(A,y)}evaluate(s){if(this.type.kind==="boolean")return!!this.args[0].evaluate(s);if(this.type.kind==="color"){let c,f;for(const y of this.args){if(c=y.evaluate(s),f=null,c instanceof _i)return c;if(typeof c=="string"){const A=s.parseColor(c);if(A)return A}else if(Array.isArray(c)&&(f=c.length<3||c.length>4?`Invalid rbga value ${JSON.stringify(c)}: expected an array containing either three or four numeric values.`:ca(c[0],c[1],c[2],c[3]),!f))return new _i(c[0]/255,c[1]/255,c[2]/255,c[3])}throw new qo(f||`Could not parse color from value '${typeof c=="string"?c:String(JSON.stringify(c))}'`)}if(this.type.kind==="number"){let c=null;for(const f of this.args){if(c=f.evaluate(s),c===null)return 0;const y=Number(c);if(!isNaN(y))return y}throw new qo(`Could not convert ${JSON.stringify(c)} to number.`)}return this.type.kind==="formatted"?Rs.fromString(xs(this.args[0].evaluate(s))):this.type.kind==="resolvedImage"?us.fromString(xs(this.args[0].evaluate(s))):this.type.kind==="array"?this.args.map(c=>c.evaluate(s)):xs(this.args[0].evaluate(s))}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Ga([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Ka(this.args[0]).serialize();const s=this.type.kind==="array"?[]:[`to-${this.type.kind}`];return this.eachChild(c=>{s.push(c.serialize())}),s}}const xd=["Unknown","Point","LineString","Polygon"];class ql{constructor(s,c){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=s,this.options=c}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?xd[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(s){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const s=this.featureDistanceData.center,c=this.featureDistanceData.scale,{x:f,y}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(f*c-s[0])+this.featureDistanceData.bearing[1]*(y*c-s[1])}return 0}parseColor(s){let c=this._parseColorCache[s];return c||(c=this._parseColorCache[s]=_i.parse(s)),c}getConfig(s){return this.options?this.options.get(s):null}}class gs{constructor(s,c,f,y,A){this.name=s,this.type=c,this._evaluate=f,this.args=y,this._overloadIndex=A}evaluate(s){if(!this._evaluate){const c=gs.definitions[this.name];this._evaluate=Array.isArray(c)?c[2]:c.overloads[this._overloadIndex][1]}return this._evaluate(s,this.args)}eachChild(s){this.args.forEach(s)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(s=>s.serialize()))}static parse(s,c){const f=s[0],y=gs.definitions[f];if(!y)return c.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const A=Array.isArray(y)?y[0]:y.type,_=Array.isArray(y)?[[y[1],y[2]]]:y.overloads,C=[];let P=null,R=-1;for(const[w,S]of _){if(Array.isArray(w)&&w.length!==s.length-1)continue;C.push(w),R++,P=new Zc(c.registry,c.path,null,c.scope,void 0,c._scope,c.options);const F=[];let T=!1;for(let L=1;L<s.length;L++){const U=s[L],V=Array.isArray(w)?w[L-1]:w.type,$=P.parse(U,1+F.length,V);if(!$){T=!0;break}F.push($)}if(!T)if(Array.isArray(w)&&w.length!==F.length)P.error(`Expected ${w.length} arguments, but found ${F.length} instead.`);else{for(let L=0;L<F.length;L++){const U=Array.isArray(w)?w[L]:w.type,V=F[L];P.concat(L+1).checkSubtype(U,V.type)}if(P.errors.length===0)return new gs(f,A,S,F,R)}}if(C.length===1)c.errors.push(...P.errors);else{const w=(C.length?C:_.map(([F])=>F)).map(Yu).join(" | "),S=[];for(let F=1;F<s.length;F++){const T=c.parse(s[F],1+S.length);if(!T)return null;S.push(uo(T.type))}c.error(`Expected arguments of type ${w}, but found (${S.join(", ")}) instead.`)}return null}static register(s,c){gs.definitions=c;for(const f in c)s[f]=gs}}function Yu(d){return Array.isArray(d)?`(${d.map(uo).join(", ")})`:`(${uo(d.type)}...)`}class Zs{constructor(s,c,f){this.type=al,this.locale=f,this.caseSensitive=s,this.diacriticSensitive=c}static parse(s,c){if(s.length!==2)return c.error("Expected one argument.");const f=s[1];if(typeof f!="object"||Array.isArray(f))return c.error("Collator options argument must be an object.");const y=f["case-sensitive"]===void 0?c.parse(!1,1,ni):c.parseObjectValue(f["case-sensitive"],1,"case-sensitive",ni);if(!y)return null;const A=f["diacritic-sensitive"]===void 0?c.parse(!1,1,ni):c.parseObjectValue(f["diacritic-sensitive"],1,"diacritic-sensitive",ni);if(!A)return null;let _=null;return f.locale&&(_=c.parseObjectValue(f.locale,1,"locale",ti),!_)?null:new Zs(y,A,_)}evaluate(s){return new ka(this.caseSensitive.evaluate(s),this.diacriticSensitive.evaluate(s),this.locale?this.locale.evaluate(s):null)}eachChild(s){s(this.caseSensitive),s(this.diacriticSensitive),this.locale&&s(this.locale)}outputDefined(){return!1}serialize(){const s={};return s["case-sensitive"]=this.caseSensitive.serialize(),s["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(s.locale=this.locale.serialize()),["collator",s]}}function xu(d,s,c=0,f=d.length-1,y=ke){for(;f>c;){if(f-c>600){const P=f-c+1,R=s-c+1,w=Math.log(P),S=.5*Math.exp(2*w/3),F=.5*Math.sqrt(w*S*(P-S)/P)*(R-P/2<0?-1:1);xu(d,s,Math.max(c,Math.floor(s-R*S/P+F)),Math.min(f,Math.floor(s+(P-R)*S/P+F)),y)}const A=d[s];let _=c,C=f;for(X(d,c,s),y(d[f],A)>0&&X(d,c,f);_<C;){for(X(d,_,C),_++,C--;y(d[_],A)<0;)_++;for(;y(d[C],A)>0;)C--}y(d[c],A)===0?X(d,c,C):(C++,X(d,C,f)),C<=s&&(c=C+1),s<=C&&(f=C-1)}}function X(d,s,c){const f=d[s];d[s]=d[c],d[c]=f}function ke(d,s){return d<s?-1:d>s?1:0}function Bt(d){let s=0;for(let c,f,y=0,A=d.length,_=A-1;y<A;_=y++)c=d[y],f=d[_],s+=(f.x-c.x)*(c.y+f.y);return s}function Ht(d,s){d[0]=Math.min(d[0],s[0]),d[1]=Math.min(d[1],s[1]),d[2]=Math.max(d[2],s[0]),d[3]=Math.max(d[3],s[1])}function sn(d,s){return!(d[0]<=s[0]||d[2]>=s[2]||d[1]<=s[1]||d[3]>=s[3])}function Dn(d,s,c){const f=d[0]-s[0],y=d[1]-s[1],A=d[0]-c[0],_=d[1]-c[1];return f*_-A*y==0&&f*A<=0&&y*_<=0}function Zn(d,s,c=!1){let f=!1;for(let C=0,P=s.length;C<P;C++){const R=s[C];for(let w=0,S=R.length,F=S-1;w<S;F=w++){const T=R[F],L=R[w];if(Dn(d,T,L))return c;(A=T)[1]>(y=d)[1]!=(_=L)[1]>y[1]&&y[0]<(_[0]-A[0])*(y[1]-A[1])/(_[1]-A[1])+A[0]&&(f=!f)}}var y,A,_;return f}function xr(d,s,c,f){const y=f[0]-c[0],A=f[1]-c[1],_=(d[0]-c[0])*A-y*(d[1]-c[1]),C=(s[0]-c[0])*A-y*(s[1]-c[1]);return _>0&&C<0||_<0&&C>0}function N(d,s,c,f){return(y=[f[0]-c[0],f[1]-c[1]])[0]*(A=[s[0]-d[0],s[1]-d[1]])[1]-y[1]*A[0]!=0&&!(!xr(d,s,c,f)||!xr(c,f,d,s));var y,A}const ae=8192;function fe(d,s){const c=(180+d[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d[1]*Math.PI/360)))/360,y=Math.pow(2,s.z);return[Math.round(c*y*ae),Math.round(f*y*ae)]}function Le(d,s){for(let c=0;c<s.length;c++)if(Zn(d,s[c]))return!0;return!1}function an(d,s,c){for(const f of c)for(let y=0,A=f.length,_=A-1;y<A;_=y++)if(N(d,s,f[_],f[y]))return!0;return!1}function Qt(d,s){for(let c=0;c<d.length;++c)if(!Zn(d[c],s))return!1;for(let c=0;c<d.length-1;++c)if(an(d[c],d[c+1],s))return!1;return!0}function nr(d,s){for(let c=0;c<s.length;c++)if(Qt(d,s[c]))return!0;return!1}function di(d,s,c){const f=[];for(let y=0;y<d.length;y++){const A=[];for(let _=0;_<d[y].length;_++){const C=fe(d[y][_],c);Ht(s,C),A.push(C)}f.push(A)}return f}function ir(d,s,c){const f=[];for(let y=0;y<d.length;y++){const A=di(d[y],s,c);f.push(A)}return f}function Ai(d,s,c,f){if(d[0]<c[0]||d[0]>c[2]){const y=.5*f;let A=d[0]-c[0]>y?-f:c[0]-d[0]>y?f:0;A===0&&(A=d[0]-c[2]>y?-f:c[2]-d[0]>y?f:0),d[0]+=A}Ht(s,d)}function ro(d,s,c,f){const y=Math.pow(2,f.z)*ae,A=[f.x*ae,f.y*ae],_=[];if(!d)return _;for(const C of d)for(const P of C){const R=[P.x+A[0],P.y+A[1]];Ai(R,s,c,y),_.push(R)}return _}function ko(d,s,c,f){const y=Math.pow(2,f.z)*ae,A=[f.x*ae,f.y*ae],_=[];if(!d)return _;for(const P of d){const R=[];for(const w of P){const S=[w.x+A[0],w.y+A[1]];Ht(s,S),R.push(S)}_.push(R)}if(s[2]-s[0]<=y/2){(C=s)[0]=C[1]=1/0,C[2]=C[3]=-1/0;for(const P of _)for(const R of P)Ai(R,s,c,y)}var C;return _}class ha{constructor(s,c){this.type=ni,this.geojson=s,this.geometries=c}static parse(s,c){if(s.length!==2)return c.error(`'within' expression requires exactly one argument, but found ${s.length-1} instead.`);if($a(s[1])){const f=s[1];if(f.type==="FeatureCollection")for(let y=0;y<f.features.length;++y){const A=f.features[y].geometry.type;if(A==="Polygon"||A==="MultiPolygon")return new ha(f,f.features[y].geometry)}else if(f.type==="Feature"){const y=f.geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new ha(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new ha(f,f)}return c.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return function(c,f){const y=[1/0,1/0,-1/0,-1/0],A=[1/0,1/0,-1/0,-1/0],_=c.canonicalID();if(!_)return!1;if(f.type==="Polygon"){const C=di(f.coordinates,A,_),P=ro(c.geometry(),y,A,_);if(!sn(y,A))return!1;for(const R of P)if(!Zn(R,C))return!1}if(f.type==="MultiPolygon"){const C=ir(f.coordinates,A,_),P=ro(c.geometry(),y,A,_);if(!sn(y,A))return!1;for(const R of P)if(!Le(R,C))return!1}return!0}(s,this.geometries);if(s.geometryType()==="LineString")return function(c,f){const y=[1/0,1/0,-1/0,-1/0],A=[1/0,1/0,-1/0,-1/0],_=c.canonicalID();if(!_)return!1;if(f.type==="Polygon"){const C=di(f.coordinates,A,_),P=ko(c.geometry(),y,A,_);if(!sn(y,A))return!1;for(const R of P)if(!Qt(R,C))return!1}if(f.type==="MultiPolygon"){const C=ir(f.coordinates,A,_),P=ko(c.geometry(),y,A,_);if(!sn(y,A))return!1;for(const R of P)if(!nr(R,C))return!1}return!0}(s,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}const ys={kilometers:1,miles:1e3/1609.344,nauticalmiles:1e3/1852,meters:1e3,metres:1e3,yards:1e3/.9144,feet:1e3/.3048,inches:1e3/.0254},Jo=1/298.257223563,xl=Jo*(2-Jo),Gc=Math.PI/180;class Kc{static fromTile(s,c,f){const y=Math.PI*(1-2*(s+.5)/Math.pow(2,c)),A=Math.atan(.5*(Math.exp(y)-Math.exp(-y)))/Gc;return new Kc(A,f)}static get units(){return ys}constructor(s,c){if(s===void 0)throw new Error("No latitude given.");if(c&&!ys[c])throw new Error(`Unknown unit ${c}. Use one of: ${Object.keys(ys).join(", ")}`);const f=6378.137*Gc*(c?ys[c]:1),y=Math.cos(s*Gc),A=1/(1-xl*(1-y*y)),_=Math.sqrt(A);this.kx=f*_*y,this.ky=f*_*A*(1-xl)}distance(s,c){const f=ho(s[0]-c[0])*this.kx,y=(s[1]-c[1])*this.ky;return Math.sqrt(f*f+y*y)}bearing(s,c){const f=ho(c[0]-s[0])*this.kx;return Math.atan2(f,(c[1]-s[1])*this.ky)/Gc}destination(s,c,f){const y=f*Gc;return this.offset(s,Math.sin(y)*c,Math.cos(y)*c)}offset(s,c,f){return[s[0]+c/this.kx,s[1]+f/this.ky]}lineDistance(s){let c=0;for(let f=0;f<s.length-1;f++)c+=this.distance(s[f],s[f+1]);return c}area(s){let c=0;for(let f=0;f<s.length;f++){const y=s[f];for(let A=0,_=y.length,C=_-1;A<_;C=A++)c+=ho(y[A][0]-y[C][0])*(y[A][1]+y[C][1])*(f?-1:1)}return Math.abs(c)/2*this.kx*this.ky}along(s,c){let f=0;if(c<=0)return s[0];for(let y=0;y<s.length-1;y++){const A=s[y],_=s[y+1],C=this.distance(A,_);if(f+=C,f>c)return rs(A,_,(c-(f-C))/C)}return s[s.length-1]}pointToSegmentDistance(s,c,f){let[y,A]=c,_=ho(f[0]-y)*this.kx,C=(f[1]-A)*this.ky;if(_!==0||C!==0){const P=(ho(s[0]-y)*this.kx*_+(s[1]-A)*this.ky*C)/(_*_+C*C);P>1?(y=f[0],A=f[1]):P>0&&(y+=_/this.kx*P,A+=C/this.ky*P)}return _=ho(s[0]-y)*this.kx,C=(s[1]-A)*this.ky,Math.sqrt(_*_+C*C)}pointOnLine(s,c){let f=1/0,y=s[0][0],A=s[0][1],_=0,C=0;for(let P=0;P<s.length-1;P++){let R=s[P][0],w=s[P][1],S=ho(s[P+1][0]-R)*this.kx,F=(s[P+1][1]-w)*this.ky,T=0;S===0&&F===0||(T=(ho(c[0]-R)*this.kx*S+(c[1]-w)*this.ky*F)/(S*S+F*F),T>1?(R=s[P+1][0],w=s[P+1][1]):T>0&&(R+=S/this.kx*T,w+=F/this.ky*T)),S=ho(c[0]-R)*this.kx,F=(c[1]-w)*this.ky;const L=S*S+F*F;L<f&&(f=L,y=R,A=w,_=P,C=T)}return{point:[y,A],index:_,t:Math.max(0,Math.min(1,C))}}lineSlice(s,c,f){let y=this.pointOnLine(f,s),A=this.pointOnLine(f,c);if(y.index>A.index||y.index===A.index&&y.t>A.t){const R=y;y=A,A=R}const _=[y.point],C=y.index+1,P=A.index;!Cu(f[C],_[0])&&C<=P&&_.push(f[C]);for(let R=C+1;R<=P;R++)_.push(f[R]);return Cu(f[P],A.point)||_.push(A.point),_}lineSliceAlong(s,c,f){let y=0;const A=[];for(let _=0;_<f.length-1;_++){const C=f[_],P=f[_+1],R=this.distance(C,P);if(y+=R,y>s&&A.length===0&&A.push(rs(C,P,(s-(y-R))/R)),y>=c)return A.push(rs(C,P,(c-(y-R))/R)),A;y>s&&A.push(P)}return A}bufferPoint(s,c){const f=c/this.ky,y=c/this.kx;return[s[0]-y,s[1]-f,s[0]+y,s[1]+f]}bufferBBox(s,c){const f=c/this.ky,y=c/this.kx;return[s[0]-y,s[1]-f,s[2]+y,s[3]+f]}insideBBox(s,c){return ho(s[0]-c[0])>=0&&ho(s[0]-c[2])<=0&&s[1]>=c[1]&&s[1]<=c[3]}}function Cu(d,s){return d[0]===s[0]&&d[1]===s[1]}function rs(d,s,c){const f=ho(s[0]-d[0]);return[d[0]+f*c,d[1]+(s[1]-d[1])*c]}function ho(d){for(;d<-180;)d+=360;for(;d>180;)d-=360;return d}class Ju{constructor(s=[],c=(f,y)=>f<y?-1:f>y?1:0){if(this.data=s,this.length=this.data.length,this.compare=c,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(this.length===0)return;const s=this.data[0],c=this.data.pop();return--this.length>0&&(this.data[0]=c,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:c,compare:f}=this,y=c[s];for(;s>0;){const A=s-1>>1,_=c[A];if(f(y,_)>=0)break;c[s]=_,s=A}c[s]=y}_down(s){const{data:c,compare:f}=this,y=this.length>>1,A=c[s];for(;s<y;){let _=1+(s<<1);const C=_+1;if(C<this.length&&f(c[C],c[_])<0&&(_=C),f(c[_],A)>=0)break;c[s]=c[_],s=_}c[s]=A}}var Nn=8192;function Cd(d,s){return s.dist-d.dist}const Ys=100,Ed=50;function eh(d){const s=[1/0,1/0,-1/0,-1/0];if(s.length!==d.length)return!1;for(let c=0;c<s.length;c++)if(s[c]!==d[c])return!1;return!0}function Uh(d){return d[1]-d[0]+1}function zs(d,s){const c=d[1]>=d[0]&&d[1]<s;return c||console.warn("Distance Expression: Index is out of range"),c}function th(d,s){if(d[0]>d[1])return[null,null];const c=Uh(d);if(s){if(c===2)return[d,null];const f=Math.floor(c/2);return[[d[0],d[0]+f],[d[0]+f,d[1]]]}{if(c===1)return[d,null];const f=Math.floor(c/2)-1;return[[d[0],d[0]+f],[d[0]+f+1,d[1]]]}}function Oa(d,s){const c=[1/0,1/0,-1/0,-1/0];if(!zs(s,d.length))return c;for(let f=s[0];f<=s[1];++f)Ht(c,d[f]);return c}function Nh(d){const s=[1/0,1/0,-1/0,-1/0];for(let c=0;c<d.length;++c)for(let f=0;f<d[c].length;++f)Ht(s,d[c][f]);return s}function Cl(d,s,c){if(eh(d)||eh(s))return NaN;let f=0,y=0;return d[2]<s[0]&&(f=s[0]-d[2]),d[0]>s[2]&&(f=d[0]-s[2]),d[1]>s[3]&&(y=d[1]-s[3]),d[3]<s[1]&&(y=s[1]-d[3]),c.distance([0,0],[f,y])}function nh(d){return 360*d-180}function qa(d){return 360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90}function Wo(d,s){const c=Math.pow(2,s.z),f=(d.y/Nn+s.y)/c;return[nh((d.x/Nn+s.x)/c),qa(f)]}function Eu(d,s){const c=[];for(let f=0;f<d.length;++f)c.push(Wo(d[f],s));return c}function Cc(d,s,c){const f=c.pointOnLine(s,d).point;return c.distance(d,f)}function Ec(d,s,c,f,y){const A=c.slice(f[0],f[1]+1);let _=1/0;for(let C=s[0];C<=s[1];++C)if((_=Math.min(_,Cc(d[C],A,y)))===0)return 0;return _}function Bu(d,s,c,f,y){const A=Math.min(y.pointToSegmentDistance(d,c,f),y.pointToSegmentDistance(s,c,f)),_=Math.min(y.pointToSegmentDistance(c,d,s),y.pointToSegmentDistance(f,d,s));return Math.min(A,_)}function qc(d,s,c,f,y){if(!zs(s,d.length)||!zs(f,c.length))return NaN;let A=1/0;for(let _=s[0];_<s[1];++_)for(let C=f[0];C<f[1];++C){if(N(d[_],d[_+1],c[C],c[C+1]))return 0;A=Math.min(A,Bu(d[_],d[_+1],c[C],c[C+1],y))}return A}function Cs(d,s,c,f,y){if(!zs(s,d.length)||!zs(f,c.length))return NaN;let A=1/0;for(let _=s[0];_<=s[1];++_)for(let C=f[0];C<=f[1];++C)if((A=Math.min(A,y.distance(d[_],c[C])))===0)return A;return A}function Bd(d,s,c){if(Zn(d,s,!0))return 0;let f=1/0;for(const y of s){const A=y.length;if(A<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(y[0]!==y[A-1]&&(f=Math.min(f,c.pointToSegmentDistance(d,y[A-1],y[0])))===0||(f=Math.min(f,Cc(d,y,c)))===0)return f}return f}function Da(d,s,c,f){if(!zs(s,d.length))return NaN;for(let A=s[0];A<=s[1];++A)if(Zn(d[A],c,!0))return 0;let y=1/0;for(let A=s[0];A<s[1];++A)for(const _ of c)for(let C=0,P=_.length,R=P-1;C<P;R=C++){if(N(d[A],d[A+1],_[R],_[C]))return 0;y=Math.min(y,Bu(d[A],d[A+1],_[R],_[C],f))}return y}function cl(d,s){for(const c of d)for(let f=0;f<=c.length-1;++f)if(Zn(c[f],s,!0))return!0;return!1}function zh(d,s,c,f=1/0){const y=Nh(d),A=Nh(s);if(f!==1/0&&Cl(y,A,c)>=f)return f;if(sn(y,A)){if(cl(d,s))return 0}else if(cl(s,d))return 0;let _=f;for(const C of d)for(let P=0,R=C.length,w=R-1;P<R;w=P++)for(const S of s)for(let F=0,T=S.length,L=T-1;F<T;L=F++){if(N(C[w],C[P],S[L],S[F]))return 0;_=Math.min(_,Bu(C[w],C[P],S[L],S[F],c))}return _}function rh(d,s,c,f,y,A,_){if(A===null||_===null)return;const C=Cl(Oa(f,A),Oa(y,_),c);C<s&&d.push({dist:C,range1:A,range2:_})}function ih(d,s,c,f,y=1/0){let A=Math.min(f.distance(d[0],c[0][0]),y);if(A===0)return A;const _=new Ju([{dist:0,range1:[0,d.length-1],range2:[0,0]}],Cd),C=s?Ed:Ys,P=Nh(c);for(;_.length;){const R=_.pop();if(R.dist>=A)continue;const w=R.range1;if(Uh(w)<=C){if(!zs(w,d.length))return NaN;if(s){const S=Da(d,w,c,f);if((A=Math.min(A,S))===0)return A}else for(let S=w[0];S<=w[1];++S){const F=Bd(d[S],c,f);if((A=Math.min(A,F))===0)return A}}else{const S=th(w,s);if(S[0]!==null){const F=Cl(Oa(d,S[0]),P,f);F<A&&_.push({dist:F,range1:S[0],range2:[0,0]})}if(S[1]!==null){const F=Cl(Oa(d,S[1]),P,f);F<A&&_.push({dist:F,range1:S[1],range2:[0,0]})}}}return A}function Bc(d,s,c,f,y,A=1/0){let _=Math.min(A,y.distance(d[0],c[0]));if(_===0)return _;const C=new Ju([{dist:0,range1:[0,d.length-1],range2:[0,c.length-1]}],Cd),P=s?Ed:Ys,R=f?Ed:Ys;for(;C.length;){const w=C.pop();if(w.dist>=_)continue;const S=w.range1,F=w.range2;if(Uh(S)<=P&&Uh(F)<=R){if(!zs(S,d.length)||!zs(F,c.length))return NaN;if(s&&f?_=Math.min(_,qc(d,S,c,F,y)):s||f?s&&!f?_=Math.min(_,Ec(c,F,d,S,y)):!s&&f&&(_=Math.min(_,Ec(d,S,c,F,y))):_=Math.min(_,Cs(d,S,c,F,y)),_===0)return _}else{const T=th(S,s),L=th(F,f);rh(C,_,y,d,c,T[0],L[0]),rh(C,_,y,d,c,T[0],L[1]),rh(C,_,y,d,c,T[1],L[0]),rh(C,_,y,d,c,T[1],L[1])}}return _}function Wl(d,s,c,f,y=1/0){let A=y;const _=Oa(d,[0,d.length-1]);for(const C of c)if(!(A!==1/0&&Cl(_,Oa(C,[0,C.length-1]),f)>=A)&&(A=Math.min(A,Bc(d,s,C,!0,f,A)),A===0))return A;return A}function Xl(d,s,c,f,y=1/0){let A=y;const _=Oa(d,[0,d.length-1]);for(const C of c){if(A!==1/0&&Cl(_,Nh(C),f)>=A)continue;const P=ih(d,s,C,f,A);if(isNaN(P))return P;if((A=Math.min(A,P))===0)return A}return A}function Wc(d){return d==="Point"||d==="MultiPoint"||d==="LineString"||d==="MultiLineString"||d==="Polygon"||d==="MultiPolygon"}class El{constructor(s,c){this.type=tr,this.geojson=s,this.geometries=c}static parse(s,c){if(s.length!==2)return c.error(`'distance' expression requires either one argument, but found ' ${s.length-1} instead.`);if($a(s[1])){const f=s[1];if(f.type==="FeatureCollection"){for(let y=0;y<f.features.length;++y)if(Wc(f.features[y].geometry.type))return new El(f,f.features[y].geometry)}else if(f.type==="Feature"){if(Wc(f.geometry.type))return new El(f,f.geometry)}else if(Wc(f.type))return new El(f,f)}return c.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(s){const c=s.geometry(),f=s.canonicalID();if(c!=null&&f!=null){if(s.geometryType()==="Point")return function(y,A,_){const C=[];for(const R of y)for(const w of R)C.push(Wo(w,A));const P=new Kc(C[0][1],"meters");return _.type==="Point"||_.type==="MultiPoint"||_.type==="LineString"?Bc(C,!1,_.type==="Point"?[_.coordinates]:_.coordinates,_.type==="LineString",P):_.type==="MultiLineString"?Wl(C,!1,_.coordinates,P):_.type==="Polygon"||_.type==="MultiPolygon"?Xl(C,!1,_.type==="Polygon"?[_.coordinates]:_.coordinates,P):null}(c,f,this.geometries);if(s.geometryType()==="LineString")return function(y,A,_){const C=[];for(const R of y){const w=[];for(const S of R)w.push(Wo(S,A));C.push(w)}const P=new Kc(C[0][0][1],"meters");if(_.type==="Point"||_.type==="MultiPoint"||_.type==="LineString")return Wl(_.type==="Point"?[_.coordinates]:_.coordinates,_.type==="LineString",C,P);if(_.type==="MultiLineString"){let R=1/0;for(let w=0;w<_.coordinates.length;w++){const S=Wl(_.coordinates[w],!0,C,P,R);if(isNaN(S))return S;if((R=Math.min(R,S))===0)return R}return R}if(_.type==="Polygon"||_.type==="MultiPolygon"){let R=1/0;for(let w=0;w<C.length;w++){const S=Xl(C[w],!0,_.type==="Polygon"?[_.coordinates]:_.coordinates,P,R);if(isNaN(S))return S;if((R=Math.min(R,S))===0)return R}return R}return null}(c,f,this.geometries);if(s.geometryType()==="Polygon")return function(y,A,_){const C=[];for(const R of function(w,S){const F=w.length;if(F<=1)return[w];const T=[];let L,U;for(let V=0;V<F;V++){const $=Bt(w[V]);$!==0&&(w[V].area=Math.abs($),U===void 0&&(U=$<0),U===$<0?(L&&T.push(L),L=[w[V]]):L.push(w[V]))}return L&&T.push(L),T}(y)){const w=[];for(let S=0;S<R.length;++S)w.push(Eu(R[S],A));C.push(w)}const P=new Kc(C[0][0][0][1],"meters");if(_.type==="Point"||_.type==="MultiPoint"||_.type==="LineString")return Xl(_.type==="Point"?[_.coordinates]:_.coordinates,_.type==="LineString",C,P);if(_.type==="MultiLineString"){let R=1/0;for(let w=0;w<_.coordinates.length;w++){const S=Xl(_.coordinates[w],!0,C,P,R);if(isNaN(S))return S;if((R=Math.min(R,S))===0)return R}return R}return _.type==="Polygon"||_.type==="MultiPolygon"?function(R,w,S){let F=1/0;for(const T of R)for(const L of w){const U=zh(T,L,S,F);if(isNaN(U))return U;if((F=Math.min(F,U))===0)return F}return F}(_.type==="Polygon"?[_.coordinates]:_.coordinates,C,P):null}(c,f,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}function ul(d,s){switch(d){case"string":return xs(s);case"number":return+s;case"boolean":return!!s;case"color":return _i.parse(s);case"formatted":return Rs.fromString(xs(s));case"resolvedImage":return us.fromString(xs(s))}return s}function ri(d,s,c,f){return f!==void 0&&(d=f*Math.round(d/f)),s!==void 0&&d<s&&(d=s),c!==void 0&&d>c&&(d=c),d}class Xc{constructor(s,c,f){this.type=s,this.key=c,this.scope=f}static parse(s,c){let f=c.expectedType;if(f==null&&(f=$r),s.length<2||s.length>3)return c.error("Invalid number of arguments for 'config' expression.");const y=c.parse(s[1],1);if(!(y instanceof Xs))return c.error("Key name of 'config' expression must be a string literal.");if(s.length>=3){const A=c.parse(s[2],2);return A instanceof Xs?new Xc(f,xs(y.value),xs(A.value)):c.error("Scope of 'config' expression must be a string literal.")}return new Xc(f,xs(y.value))}evaluate(s){const c=[this.key,this.scope,s.scope].filter(Boolean).join(""),f=s.getConfig(c);if(!f)return null;const{type:y,value:A,values:_,minValue:C,maxValue:P,stepValue:R}=f,w=f.default.evaluate(s);let S=w;if(A){const F=s.scope;s.scope=(F||"").split("").slice(1).join(""),S=A.evaluate(s),s.scope=F}return y&&(S=ul(y,S)),S===void 0||C===void 0&&P===void 0&&R===void 0||(typeof S=="number"?S=ri(S,C,P,R):Array.isArray(S)&&(S=S.map(F=>typeof F=="number"?ri(F,C,P,R):F))),A!==void 0&&S!==void 0&&_&&!_.includes(S)&&(S=w,y&&(S=ul(y,S))),(y&&y!==this.type||S!==void 0&&no(S)!==this.type)&&(S=ul(this.type.kind,S)),S}eachChild(){}outputDefined(){return!1}serialize(){const s=["config",this.key];return this.scope&&s.concat(this.key),s}}function Ua(d){if(d instanceof gs&&(d.name==="get"&&d.args.length===1||d.name==="feature-state"||d.name==="has"&&d.args.length===1||d.name==="properties"||d.name==="geometry-type"||d.name==="id"||/^filter-/.test(d.name))||d instanceof ha||d instanceof El)return!1;let s=!0;return d.eachChild(c=>{s&&!Ua(c)&&(s=!1)}),s}function Wa(d){if(d instanceof gs&&d.name==="feature-state")return!1;let s=!0;return d.eachChild(c=>{s&&!Wa(c)&&(s=!1)}),s}function Mo(d){if(d instanceof Xc)return new Set([d.key]);let s=new Set;return d.eachChild(c=>{s=new Set([...s,...Mo(c)])}),s}function Eo(d,s){if(d instanceof gs&&s.indexOf(d.name)>=0)return!1;let c=!0;return d.eachChild(f=>{c&&!Eo(f,s)&&(c=!1)}),c}class Wr{constructor(s,c){this.type=c.type,this.name=s,this.boundExpression=c}static parse(s,c){if(s.length!==2||typeof s[1]!="string")return c.error("'var' expression requires exactly one string literal argument.");const f=s[1];return c.scope.has(f)?new Wr(f,c.scope.get(f)):c.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(s){return this.boundExpression.evaluate(s)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class ks{constructor(s,c=[],f,y=new Ra,A=[],_,C){this.registry=s,this.path=c,this.key=c.map(P=>typeof P=="string"?`['${P}']`:`[${P}]`).join(""),this.scope=y,this.errors=A,this.expectedType=f,this._scope=_,this.options=C}parse(s,c,f,y,A={}){return c||f?this.concat(c,null,f,y)._parse(s,A):this._parse(s,A)}parseObjectValue(s,c,f,y,A,_={}){return this.concat(c,f,y,A)._parse(s,_)}_parse(s,c){function f(y,A,_){return _==="assert"?new ua(A,[y]):_==="coerce"?new Ma(A,[y]):y}if(s!==null&&typeof s!="string"&&typeof s!="boolean"&&typeof s!="number"||(s=["literal",s]),Array.isArray(s)){if(s.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const y=typeof s[0]=="string"?this.registry[s[0]]:void 0;if(y){let A=y.parse(s,this);if(!A)return null;if(this.expectedType){const _=this.expectedType,C=A.type;if(_.kind!=="string"&&_.kind!=="number"&&_.kind!=="boolean"&&_.kind!=="object"&&_.kind!=="array"||C.kind!=="value")if(_.kind!=="color"&&_.kind!=="formatted"&&_.kind!=="resolvedImage"||C.kind!=="value"&&C.kind!=="string"){if(this.checkSubtype(_,C))return null}else A=f(A,_,c.typeAnnotation||"coerce");else A=f(A,_,c.typeAnnotation||"assert")}if(!(A instanceof Xs)&&A.type.kind!=="resolvedImage"&&Vh(A)){const _=new ql(this._scope,this.options);try{A=new Xs(A.type,A.evaluate(_))}catch(C){return this.error(C.message),null}}return A}return Ma.parse(["to-array",s],this)}return this.error(s===void 0?"'undefined' value invalid. Use null instead.":typeof s=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof s} instead.`)}concat(s,c,f,y){let A=typeof s=="number"?this.path.concat(s):this.path;A=typeof c=="string"?A.concat(c):A;const _=y?this.scope.concat(y):this.scope;return new ks(this.registry,A,f||null,_,this.errors,this._scope,this.options)}error(s,...c){const f=`${this.key}${c.map(y=>`[${y}]`).join("")}`;this.errors.push(new ja(f,s))}checkSubtype(s,c){const f=$l(s,c);return f&&this.error(f),f}}var Zc=ks;function Vh(d){if(d instanceof Wr)return Vh(d.boundExpression);if(d instanceof gs&&d.name==="error"||d instanceof Zs||d instanceof ha||d instanceof El||d instanceof Xc)return!1;const s=d instanceof Ma||d instanceof ua;let c=!0;return d.eachChild(f=>{c=s?c&&Vh(f):c&&f instanceof Xs}),!!c&&Ua(d)&&Eo(d,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])}function Su(d,s){const c=d.length-1;let f,y,A=0,_=c,C=0;for(;A<=_;)if(C=Math.floor((A+_)/2),f=d[C],y=d[C+1],f<=s){if(C===c||s<y)return C;A=C+1}else{if(!(f>s))throw new qo("Input is not a number.");_=C-1}return 0}class oh{constructor(s,c,f){this.type=s,this.input=c,this.labels=[],this.outputs=[];for(const[y,A]of f)this.labels.push(y),this.outputs.push(A)}static parse(s,c){if(s.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return c.error("Expected an even number of arguments.");const f=c.parse(s[1],1,tr);if(!f)return null;const y=[];let A=null;c.expectedType&&c.expectedType.kind!=="value"&&(A=c.expectedType);for(let _=1;_<s.length;_+=2){const C=_===1?-1/0:s[_],P=s[_+1],R=_,w=_+1;if(typeof C!="number")return c.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',R);if(y.length&&y[y.length-1][0]>=C)return c.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',R);const S=c.parse(P,w,A);if(!S)return null;A=A||S.type,y.push([C,S])}return new oh(A,f,y)}evaluate(s){const c=this.labels,f=this.outputs;if(c.length===1)return f[0].evaluate(s);const y=this.input.evaluate(s);if(y<=c[0])return f[0].evaluate(s);const A=c.length;return y>=c[A-1]?f[A-1].evaluate(s):f[Su(c,y)].evaluate(s)}eachChild(s){s(this.input);for(const c of this.outputs)s(c)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}serialize(){const s=["step",this.input.serialize()];for(let c=0;c<this.labels.length;c++)c>0&&s.push(this.labels[c]),s.push(this.outputs[c].serialize());return s}}const TA=.95047,xf=1.08883,hl=4/29,va=6/29,Cf=3*va*va,IA=va*va*va,Ng=Math.PI/180,PA=180/Math.PI;function Sd(d){return d>IA?Math.pow(d,1/3):d/Cf+hl}function Ef(d){return d>va?d*d*d:Cf*(d-hl)}function LA(d){return 255*(d<=.0031308?12.92*d:1.055*Math.pow(d,1/2.4)-.055)}function Bf(d){return(d/=255)<=.04045?d/12.92:Math.pow((d+.055)/1.055,2.4)}function FA(d){const s=Bf(d.r),c=Bf(d.g),f=Bf(d.b),y=Sd((.4124564*s+.3575761*c+.1804375*f)/TA),A=Sd((.2126729*s+.7151522*c+.072175*f)/1);return{l:116*A-16,a:500*(y-A),b:200*(A-Sd((.0193339*s+.119192*c+.9503041*f)/xf)),alpha:d.a}}function Sf(d){let s=(d.l+16)/116,c=isNaN(d.a)?s:s+d.a/500,f=isNaN(d.b)?s:s-d.b/200;return s=1*Ef(s),c=TA*Ef(c),f=xf*Ef(f),new _i(LA(3.2404542*c-1.5371385*s-.4985314*f),LA(-.969266*c+1.8760108*s+.041556*f),LA(.0556434*c-.2040259*s+1.0572252*f),d.alpha)}function ym(d,s,c){const f=s-d;return d+c*(f>180||f<-180?f-360*Math.round(f/360):f)}const Tf={forward:FA,reverse:Sf,interpolate:function(d,s,c){return{l:$n(d.l,s.l,c),a:$n(d.a,s.a,c),b:$n(d.b,s.b,c),alpha:$n(d.alpha,s.alpha,c)}}},If={forward:function(d){const{l:s,a:c,b:f}=FA(d),y=Math.atan2(f,c)*PA;return{h:y<0?y+360:y,c:Math.sqrt(c*c+f*f),l:s,alpha:d.a}},reverse:function(d){const s=d.h*Ng,c=d.c;return Sf({l:d.l,a:Math.cos(s)*c,b:Math.sin(s)*c,alpha:d.alpha})},interpolate:function(d,s,c){return{h:ym(d.h,s.h,c),c:$n(d.c,s.c,c),l:$n(d.l,s.l,c),alpha:$n(d.alpha,s.alpha,c)}}};var _m=Object.freeze({__proto__:null,hcl:If,lab:Tf});class Bl{constructor(s,c,f,y,A){this.type=s,this.operator=c,this.interpolation=f,this.input=y,this.labels=[],this.outputs=[];for(const[_,C]of A)this.labels.push(_),this.outputs.push(C)}static interpolationFactor(s,c,f,y){let A=0;if(s.name==="exponential")A=vm(c,s.base,f,y);else if(s.name==="linear")A=vm(c,1,f,y);else if(s.name==="cubic-bezier"){const _=s.controlPoints;A=new Te(_[0],_[1],_[2],_[3]).solve(vm(c,1,f,y))}return A}static parse(s,c){let[f,y,A,..._]=s;if(!Array.isArray(y)||y.length===0)return c.error("Expected an interpolation type expression.",1);if(y[0]==="linear")y={name:"linear"};else if(y[0]==="exponential"){const R=y[1];if(typeof R!="number")return c.error("Exponential interpolation requires a numeric base.",1,1);y={name:"exponential",base:R}}else{if(y[0]!=="cubic-bezier")return c.error(`Unknown interpolation type ${String(y[0])}`,1,0);{const R=y.slice(1);if(R.length!==4||R.some(w=>typeof w!="number"||w<0||w>1))return c.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);y={name:"cubic-bezier",controlPoints:R}}}if(s.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return c.error("Expected an even number of arguments.");if(A=c.parse(A,2,tr),!A)return null;const C=[];let P=null;f==="interpolate-hcl"||f==="interpolate-lab"?P=Ws:c.expectedType&&c.expectedType.kind!=="value"&&(P=c.expectedType);for(let R=0;R<_.length;R+=2){const w=_[R],S=_[R+1],F=R+3,T=R+4;if(typeof w!="number")return c.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',F);if(C.length&&C[C.length-1][0]>=w)return c.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',F);const L=c.parse(S,T,P);if(!L)return null;P=P||L.type,C.push([w,L])}return P.kind==="number"||P.kind==="color"||P.kind==="array"&&P.itemType.kind==="number"&&typeof P.N=="number"?new Bl(P,f,y,A,C):c.error(`Type ${uo(P)} is not interpolatable.`)}evaluate(s){const c=this.labels,f=this.outputs;if(c.length===1)return f[0].evaluate(s);const y=this.input.evaluate(s);if(y<=c[0])return f[0].evaluate(s);const A=c.length;if(y>=c[A-1])return f[A-1].evaluate(s);const _=Su(c,y),C=Bl.interpolationFactor(this.interpolation,y,c[_],c[_+1]),P=f[_].evaluate(s),R=f[_+1].evaluate(s);return this.operator==="interpolate"?xc[this.type.kind.toLowerCase()](P,R,C):this.operator==="interpolate-hcl"?If.reverse(If.interpolate(If.forward(P),If.forward(R),C)):Tf.reverse(Tf.interpolate(Tf.forward(P),Tf.forward(R),C))}eachChild(s){s(this.input);for(const c of this.outputs)s(c)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}serialize(){let s;s=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const c=[this.operator,s,this.input.serialize()];for(let f=0;f<this.labels.length;f++)c.push(this.labels[f],this.outputs[f].serialize());return c}}function vm(d,s,c,f){const y=f-c,A=d-c;return y===0?0:s===1?A/y:(Math.pow(s,A)-1)/(Math.pow(s,y)-1)}class RA{constructor(s,c){this.type=s,this.args=c}static parse(s,c){if(s.length<2)return c.error("Expectected at least one argument.");let f=null;const y=c.expectedType;y&&y.kind!=="value"&&(f=y);const A=[];for(const C of s.slice(1)){const P=c.parse(C,1+A.length,f,void 0,{typeAnnotation:"omit"});if(!P)return null;f=f||P.type,A.push(P)}const _=y&&A.some(C=>$l(y,C.type));return new RA(_?$r:f,A)}evaluate(s){let c,f=null,y=0;for(const A of this.args){if(y++,f=A.evaluate(s),f&&f instanceof us&&!f.available&&(c||(c=f),f=null,y===this.args.length))return c;if(f!==null)break}return f}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}serialize(){const s=["coalesce"];return this.eachChild(c=>{s.push(c.serialize())}),s}}class kA{constructor(s,c){this.type=c.type,this.bindings=[].concat(s),this.result=c}evaluate(s){return this.result.evaluate(s)}eachChild(s){for(const c of this.bindings)s(c[1]);s(this.result)}static parse(s,c){if(s.length<4)return c.error(`Expected at least 3 arguments, but found ${s.length-1} instead.`);const f=[];for(let A=1;A<s.length-1;A+=2){const _=s[A];if(typeof _!="string")return c.error(`Expected string, but found ${typeof _} instead.`,A);if(/[^a-zA-Z0-9_]/.test(_))return c.error("Variable names must contain only alphanumeric characters or '_'.",A);const C=c.parse(s[A+1],A+1);if(!C)return null;f.push([_,C])}const y=c.parse(s[s.length-1],s.length-1,c.expectedType,f);return y?new kA(f,y):null}outputDefined(){return this.result.outputDefined()}serialize(){const s=["let"];for(const[c,f]of this.bindings)s.push(c,f.serialize());return s.push(this.result.serialize()),s}}class bm{constructor(s,c,f){this.type=s,this.index=c,this.input=f}static parse(s,c){if(s.length!==3)return c.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const f=c.parse(s[1],1,tr),y=c.parse(s[2],2,Fs(c.expectedType||$r));return f&&y?new bm(y.type.itemType,f,y):null}evaluate(s){const c=this.index.evaluate(s),f=this.input.evaluate(s);if(c<0)throw new qo(`Array index out of bounds: ${c} < 0.`);if(c>=f.length)throw new qo(`Array index out of bounds: ${c} > ${f.length-1}.`);if(c!==Math.floor(c))throw new qo(`Array index must be an integer, but found ${c} instead.`);return f[c]}eachChild(s){s(this.index),s(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class Pf{constructor(s,c){this.type=ni,this.needle=s,this.haystack=c}static parse(s,c){if(s.length!==3)return c.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const f=c.parse(s[1],1,$r),y=c.parse(s[2],2,$r);return f&&y?Gl(f.type,[ni,ti,tr,aa,$r])?new Pf(f,y):c.error(`Expected first argument to be of type boolean, string, number or null, but found ${uo(f.type)} instead`):null}evaluate(s){const c=this.needle.evaluate(s),f=this.haystack.evaluate(s);if(f==null)return!1;if(!la(c,["boolean","string","number","null"]))throw new qo(`Expected first argument to be of type boolean, string, number or null, but found ${uo(no(c))} instead.`);if(!la(f,["string","array"]))throw new qo(`Expected second argument to be of type array or string, but found ${uo(no(f))} instead.`);return f.indexOf(c)>=0}eachChild(s){s(this.needle),s(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Td{constructor(s,c,f){this.type=tr,this.needle=s,this.haystack=c,this.fromIndex=f}static parse(s,c){if(s.length<=2||s.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const f=c.parse(s[1],1,$r),y=c.parse(s[2],2,$r);if(!f||!y)return null;if(!Gl(f.type,[ni,ti,tr,aa,$r]))return c.error(`Expected first argument to be of type boolean, string, number or null, but found ${uo(f.type)} instead`);if(s.length===4){const A=c.parse(s[3],3,tr);return A?new Td(f,y,A):null}return new Td(f,y)}evaluate(s){const c=this.needle.evaluate(s),f=this.haystack.evaluate(s);if(!la(c,["boolean","string","number","null"]))throw new qo(`Expected first argument to be of type boolean, string, number or null, but found ${uo(no(c))} instead.`);if(!la(f,["string","array"]))throw new qo(`Expected second argument to be of type array or string, but found ${uo(no(f))} instead.`);if(this.fromIndex){const y=this.fromIndex.evaluate(s);return f.indexOf(c,y)}return f.indexOf(c)}eachChild(s){s(this.needle),s(this.haystack),this.fromIndex&&s(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const s=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),s]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Qh{constructor(s,c,f,y,A,_){this.inputType=s,this.type=c,this.input=f,this.cases=y,this.outputs=A,this.otherwise=_}static parse(s,c){if(s.length<5)return c.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if(s.length%2!=1)return c.error("Expected an even number of arguments.");let f,y;c.expectedType&&c.expectedType.kind!=="value"&&(y=c.expectedType);const A={},_=[];for(let R=2;R<s.length-1;R+=2){let w=s[R];const S=s[R+1];Array.isArray(w)||(w=[w]);const F=c.concat(R);if(w.length===0)return F.error("Expected at least one branch label.");for(const L of w){if(typeof L!="number"&&typeof L!="string")return F.error("Branch labels must be numbers or strings.");if(typeof L=="number"&&Math.abs(L)>Number.MAX_SAFE_INTEGER)return F.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof L=="number"&&Math.floor(L)!==L)return F.error("Numeric branch labels must be integer values.");if(f){if(F.checkSubtype(f,no(L)))return null}else f=no(L);if(A[String(L)]!==void 0)return F.error("Branch labels must be unique.");A[String(L)]=_.length}const T=c.parse(S,R,y);if(!T)return null;y=y||T.type,_.push(T)}const C=c.parse(s[1],1,$r);if(!C)return null;const P=c.parse(s[s.length-1],s.length-1,y);return P?C.type.kind!=="value"&&c.concat(1).checkSubtype(f,C.type)?null:new Qh(f,y,C,A,_,P):null}evaluate(s){const c=this.input.evaluate(s);return(no(c)===this.inputType&&this.outputs[this.cases[c]]||this.otherwise).evaluate(s)}eachChild(s){s(this.input),this.outputs.forEach(s),s(this.otherwise)}outputDefined(){return this.outputs.every(s=>s.outputDefined())&&this.otherwise.outputDefined()}serialize(){const s=["match",this.input.serialize()],c=Object.keys(this.cases).sort(),f=[],y={};for(const _ of c){const C=y[this.cases[_]];C===void 0?(y[this.cases[_]]=f.length,f.push([this.cases[_],[_]])):f[C][1].push(_)}const A=_=>this.inputType.kind==="number"?Number(_):_;for(const[_,C]of f)s.push(C.length===1?A(C[0]):C.map(A)),s.push(this.outputs[_].serialize());return s.push(this.otherwise.serialize()),s}}class Lf{constructor(s,c,f){this.type=s,this.branches=c,this.otherwise=f}static parse(s,c){if(s.length<4)return c.error(`Expected at least 3 arguments, but found only ${s.length-1}.`);if(s.length%2!=0)return c.error("Expected an odd number of arguments.");let f;c.expectedType&&c.expectedType.kind!=="value"&&(f=c.expectedType);const y=[];for(let _=1;_<s.length-1;_+=2){const C=c.parse(s[_],_,ni);if(!C)return null;const P=c.parse(s[_+1],_+1,f);if(!P)return null;y.push([C,P]),f=f||P.type}const A=c.parse(s[s.length-1],s.length-1,f);return A?new Lf(f,y,A):null}evaluate(s){for(const[c,f]of this.branches)if(c.evaluate(s))return f.evaluate(s);return this.otherwise.evaluate(s)}eachChild(s){for(const[c,f]of this.branches)s(c),s(f);s(this.otherwise)}outputDefined(){return this.branches.every(([s,c])=>c.outputDefined())&&this.otherwise.outputDefined()}serialize(){const s=["case"];return this.eachChild(c=>{s.push(c.serialize())}),s}}class MA{constructor(s,c,f,y){this.type=s,this.input=c,this.beginIndex=f,this.endIndex=y}static parse(s,c){if(s.length<=2||s.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const f=c.parse(s[1],1,$r),y=c.parse(s[2],2,tr);if(!f||!y)return null;if(!Gl(f.type,[Fs($r),ti,$r]))return c.error(`Expected first argument to be of type array or string, but found ${uo(f.type)} instead`);if(s.length===4){const A=c.parse(s[3],3,tr);return A?new MA(f.type,f,y,A):null}return new MA(f.type,f,y)}evaluate(s){const c=this.input.evaluate(s),f=this.beginIndex.evaluate(s);if(!la(c,["string","array"]))throw new qo(`Expected first argument to be of type array or string, but found ${uo(no(c))} instead.`);if(this.endIndex){const y=this.endIndex.evaluate(s);return c.slice(f,y)}return c.slice(f)}eachChild(s){s(this.input),s(this.beginIndex),this.endIndex&&s(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const s=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),s]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function OA(d,s){return d==="=="||d==="!="?s.kind==="boolean"||s.kind==="string"||s.kind==="number"||s.kind==="null"||s.kind==="value":s.kind==="string"||s.kind==="number"||s.kind==="value"}function zg(d,s,c,f){return f.compare(s,c)===0}function Id(d,s,c){const f=d!=="=="&&d!=="!=";return class Zj{constructor(A,_,C){this.type=ni,this.lhs=A,this.rhs=_,this.collator=C,this.hasUntypedArgument=A.type.kind==="value"||_.type.kind==="value"}static parse(A,_){if(A.length!==3&&A.length!==4)return _.error("Expected two or three arguments.");const C=A[0];let P=_.parse(A[1],1,$r);if(!P)return null;if(!OA(C,P.type))return _.concat(1).error(`"${C}" comparisons are not supported for type '${uo(P.type)}'.`);let R=_.parse(A[2],2,$r);if(!R)return null;if(!OA(C,R.type))return _.concat(2).error(`"${C}" comparisons are not supported for type '${uo(R.type)}'.`);if(P.type.kind!==R.type.kind&&P.type.kind!=="value"&&R.type.kind!=="value")return _.error(`Cannot compare types '${uo(P.type)}' and '${uo(R.type)}'.`);f&&(P.type.kind==="value"&&R.type.kind!=="value"?P=new ua(R.type,[P]):P.type.kind!=="value"&&R.type.kind==="value"&&(R=new ua(P.type,[R])));let w=null;if(A.length===4){if(P.type.kind!=="string"&&R.type.kind!=="string"&&P.type.kind!=="value"&&R.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(w=_.parse(A[3],3,al),!w)return null}return new Zj(P,R,w)}evaluate(A){const _=this.lhs.evaluate(A),C=this.rhs.evaluate(A);if(f&&this.hasUntypedArgument){const P=no(_),R=no(C);if(P.kind!==R.kind||P.kind!=="string"&&P.kind!=="number")throw new qo(`Expected arguments for "${d}" to be (string, string) or (number, number), but found (${P.kind}, ${R.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const P=no(_),R=no(C);if(P.kind!=="string"||R.kind!=="string")return s(A,_,C)}return this.collator?c(A,_,C,this.collator.evaluate(A)):s(A,_,C)}eachChild(A){A(this.lhs),A(this.rhs),this.collator&&A(this.collator)}outputDefined(){return!0}serialize(){const A=[d];return this.eachChild(_=>{A.push(_.serialize())}),A}}}const o0=Id("==",function(d,s,c){return s===c},zg),Vg=Id("!=",function(d,s,c){return s!==c},function(d,s,c,f){return!zg(0,s,c,f)}),Tu=Id("<",function(d,s,c){return s<c},function(d,s,c,f){return f.compare(s,c)<0}),Na=Id(">",function(d,s,c){return s>c},function(d,s,c,f){return f.compare(s,c)>0}),Yc=Id("<=",function(d,s,c){return s<=c},function(d,s,c,f){return f.compare(s,c)<=0}),Qg=Id(">=",function(d,s,c){return s>=c},function(d,s,c,f){return f.compare(s,c)>=0});class DA{constructor(s,c,f,y,A,_){this.type=ti,this.number=s,this.locale=c,this.currency=f,this.unit=y,this.minFractionDigits=A,this.maxFractionDigits=_}static parse(s,c){if(s.length!==3)return c.error("Expected two arguments.");const f=c.parse(s[1],1,tr);if(!f)return null;const y=s[2];if(typeof y!="object"||Array.isArray(y))return c.error("NumberFormat options argument must be an object.");let A=null;if(y.locale&&(A=c.parseObjectValue(y.locale,2,"locale",ti),!A))return null;let _=null;if(y.currency&&(_=c.parseObjectValue(y.currency,2,"currency",ti),!_))return null;let C=null;if(y.unit&&(C=c.parseObjectValue(y.unit,2,"unit",ti),!C))return null;let P=null;if(y["min-fraction-digits"]&&(P=c.parseObjectValue(y["min-fraction-digits"],2,"min-fraction-digits",tr),!P))return null;let R=null;return y["max-fraction-digits"]&&(R=c.parseObjectValue(y["max-fraction-digits"],2,"max-fraction-digits",tr),!R)?null:new DA(f,A,_,C,P,R)}evaluate(s){return new Intl.NumberFormat(this.locale?this.locale.evaluate(s):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(s):void 0,unit:this.unit?this.unit.evaluate(s):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(s):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(s):void 0}).format(this.number.evaluate(s))}eachChild(s){s(this.number),this.locale&&s(this.locale),this.currency&&s(this.currency),this.unit&&s(this.unit),this.minFractionDigits&&s(this.minFractionDigits),this.maxFractionDigits&&s(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const s={};return this.locale&&(s.locale=this.locale.serialize()),this.currency&&(s.currency=this.currency.serialize()),this.unit&&(s.unit=this.unit.serialize()),this.minFractionDigits&&(s["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(s["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),s]}}class Zl{constructor(s){this.type=tr,this.input=s}static parse(s,c){if(s.length!==2)return c.error(`Expected 1 argument, but found ${s.length-1} instead.`);const f=c.parse(s[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?c.error(`Expected argument of type string or array, but found ${uo(f.type)} instead.`):new Zl(f):null}evaluate(s){const c=this.input.evaluate(s);if(typeof c=="string"||Array.isArray(c))return c.length;throw new qo(`Expected value to be of type string or array, but found ${uo(no(c))} instead.`)}eachChild(s){s(this.input)}outputDefined(){return!1}serialize(){const s=["length"];return this.eachChild(c=>{s.push(c.serialize())}),s}}function Xa(d){return function(){d=1831565813+(d|=0)|0;let s=Math.imul(d^d>>>15,1|d);return s=s+Math.imul(s^s>>>7,61|s)^s,((s^s>>>14)>>>0)/4294967296}}const Pd={"==":o0,"!=":Vg,">":Na,"<":Tu,">=":Qg,"<=":Yc,array:ua,at:bm,boolean:ua,case:Lf,coalesce:RA,collator:Zs,format:Ga,image:Ka,in:Pf,"index-of":Td,interpolate:Bl,"interpolate-hcl":Bl,"interpolate-lab":Bl,length:Zl,let:kA,literal:Xs,match:Qh,number:ua,"number-format":DA,object:ua,slice:MA,step:oh,string:ua,"to-boolean":Ma,"to-color":Ma,"to-number":Ma,"to-string":Ma,var:Wr,within:ha,distance:El,config:Xc};function Hg(d,[s,c,f,y]){s=s.evaluate(d),c=c.evaluate(d),f=f.evaluate(d);const A=y?y.evaluate(d):1,_=ca(s,c,f,A);if(_)throw new qo(_);return new _i(s/255*A,c/255*A,f/255*A,A)}function UA(d,[s,c,f,y]){s=s.evaluate(d),c=c.evaluate(d),f=f.evaluate(d);const A=y?y.evaluate(d):1,_=function(R,w,S,F){return typeof R=="number"&&R>=0&&R<=360?typeof w=="number"&&w>=0&&w<=100&&typeof S=="number"&&S>=0&&S<=100?F===void 0||typeof F=="number"&&F>=0&&F<=1?null:`Invalid hsla value [${[R,w,S,F].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid hsla value [${(typeof F=="number"?[R,w,S,F]:[R,w,S]).join(", ")}]: 's', and 'l' must be between 0 and 100.`:`Invalid hsla value [${(typeof F=="number"?[R,w,S,F]:[R,w,S]).join(", ")}]: 'h' must be between 0 and 360.`}(s,c,f,A);if(_)throw new qo(_);const C=`hsla(${s}, ${c}%, ${f}%, ${A})`,P=_i.parse(C);if(!P)throw new qo(`Failed to parse HSLA color: ${C}`);return P}function NA(d,s){return d in s}function zA(d,s){const c=s[d];return c===void 0?null:c}function sh(d){return{type:d}}function jg(d){return{result:"success",value:d}}function Sc(d){return{result:"error",value:d}}function Ld(d,s){return!!d&&!!d.parameters&&d.parameters.indexOf(s)>-1}function ah(d){return d["property-type"]==="data-driven"}function Ff(d){return Ld(d.expression,"measure-light")}function wm(d){return Ld(d.expression,"zoom")}function xm(d){return!!d.expression&&d.expression.interpolated}function Rf(d){return typeof d=="object"&&d!==null&&!Array.isArray(d)}function $g(d){return d}function Gg(d,s){const c=s.type==="color",f=d.stops&&typeof d.stops[0][0]=="object",y=f||!(f||d.property!==void 0),A=d.type||(xm(s)?"exponential":"interval");if(c&&((d=_a({},d)).stops&&(d.stops=d.stops.map(R=>[R[0],_i.parse(R[1])])),d.default=_i.parse(d.default?d.default:s.default)),d.colorSpace&&d.colorSpace!=="rgb"&&!_m[d.colorSpace])throw new Error(`Unknown color space: ${d.colorSpace}`);let _,C,P;if(A==="exponential")_=qg;else if(A==="interval")_=Kg;else if(A==="categorical"){_=s0,C=Object.create(null);for(const R of d.stops)C[R[0]]=R[1];P=typeof d.stops[0][0]}else{if(A!=="identity")throw new Error(`Unknown function type "${A}"`);_=Wg}if(f){const R={},w=[];for(let T=0;T<d.stops.length;T++){const L=d.stops[T],U=L[0].zoom;R[U]===void 0&&(R[U]={zoom:U,type:d.type,property:d.property,default:d.default,stops:[]},w.push(U)),R[U].stops.push([L[0].value,L[1]])}const S=[];for(const T of w)S.push([R[T].zoom,Gg(R[T],s)]);const F={name:"linear"};return{kind:"composite",interpolationType:F,interpolationFactor:Bl.interpolationFactor.bind(void 0,F),zoomStops:S.map(T=>T[0]),evaluate:({zoom:T},L)=>qg({stops:S,base:d.base},s,T).evaluate(T,L)}}if(y){const R=A==="exponential"?{name:"exponential",base:d.base!==void 0?d.base:1}:null;return{kind:"camera",interpolationType:R,interpolationFactor:Bl.interpolationFactor.bind(void 0,R),zoomStops:d.stops.map(w=>w[0]),evaluate:({zoom:w})=>_(d,s,w,C,P)}}return{kind:"source",evaluate(R,w){const S=w&&w.properties?w.properties[d.property]:void 0;return S===void 0?kf(d.default,s.default):_(d,s,S,C,P)}}}function kf(d,s,c){return d!==void 0?d:s!==void 0?s:c!==void 0?c:void 0}function s0(d,s,c,f,y){return kf(typeof c===y?f[c]:void 0,d.default,s.default)}function Kg(d,s,c){if(ll(c)!=="number")return kf(d.default,s.default);const f=d.stops.length;if(f===1||c<=d.stops[0][0])return d.stops[0][1];if(c>=d.stops[f-1][0])return d.stops[f-1][1];const y=Su(d.stops.map(A=>A[0]),c);return d.stops[y][1]}function qg(d,s,c){const f=d.base!==void 0?d.base:1;if(ll(c)!=="number")return kf(d.default,s.default);const y=d.stops.length;if(y===1||c<=d.stops[0][0])return d.stops[0][1];if(c>=d.stops[y-1][0])return d.stops[y-1][1];const A=Su(d.stops.map(w=>w[0]),c),_=function(w,S,F,T){const L=T-F,U=w-F;return L===0?0:S===1?U/L:(Math.pow(S,U)-1)/(Math.pow(S,L)-1)}(c,f,d.stops[A][0],d.stops[A+1][0]),C=d.stops[A][1],P=d.stops[A+1][1];let R=xc[s.type]||$g;if(d.colorSpace&&d.colorSpace!=="rgb"){const w=_m[d.colorSpace];R=(S,F)=>w.reverse(w.interpolate(w.forward(S),w.forward(F),_))}return typeof C.evaluate=="function"?{evaluate(...w){const S=C.evaluate.apply(void 0,w),F=P.evaluate.apply(void 0,w);if(S!==void 0&&F!==void 0)return R(S,F,_)}}:R(C,P,_)}function Wg(d,s,c){return s.type==="color"?c=_i.parse(c):s.type==="formatted"?c=Rs.fromString(c.toString()):s.type==="resolvedImage"?c=us.fromString(c.toString()):ll(c)===s.type||s.type==="enum"&&s.values[c]||(c=void 0),kf(c,d.default,s.default)}gs.register(Pd,{error:[{kind:"error"},[ti],(d,[s])=>{throw new qo(s.evaluate(d))}],typeof:[ti,[$r],(d,[s])=>uo(no(s.evaluate(d)))],"to-rgba":[Fs(tr,4),[Ws],(d,[s])=>s.evaluate(d).toRenderColor(null).toArray()],rgb:[Ws,[tr,tr,tr],Hg],rgba:[Ws,[tr,tr,tr,tr],Hg],hsl:[Ws,[tr,tr,tr],UA],hsla:[Ws,[tr,tr,tr,tr],UA],has:{type:ni,overloads:[[[ti],(d,[s])=>NA(s.evaluate(d),d.properties())],[[ti,Yo],(d,[s,c])=>NA(s.evaluate(d),c.evaluate(d))]]},get:{type:$r,overloads:[[[ti],(d,[s])=>zA(s.evaluate(d),d.properties())],[[ti,Yo],(d,[s,c])=>zA(s.evaluate(d),c.evaluate(d))]]},"feature-state":[$r,[ti],(d,[s])=>zA(s.evaluate(d),d.featureState||{})],properties:[Yo,[],d=>d.properties()],"geometry-type":[ti,[],d=>d.geometryType()],id:[$r,[],d=>d.id()],zoom:[tr,[],d=>d.globals.zoom],pitch:[tr,[],d=>d.globals.pitch||0],"distance-from-center":[tr,[],d=>d.distanceFromCenter()],"measure-light":[tr,[ti],(d,[s])=>d.measureLight(s.evaluate(d))],"heatmap-density":[tr,[],d=>d.globals.heatmapDensity||0],"line-progress":[tr,[],d=>d.globals.lineProgress||0],"raster-value":[tr,[],d=>d.globals.rasterValue||0],"raster-particle-speed":[tr,[],d=>d.globals.rasterParticleSpeed||0],"sky-radial-progress":[tr,[],d=>d.globals.skyRadialProgress||0],accumulated:[$r,[],d=>d.globals.accumulated===void 0?null:d.globals.accumulated],"+":[tr,sh(tr),(d,s)=>{let c=0;for(const f of s)c+=f.evaluate(d);return c}],"*":[tr,sh(tr),(d,s)=>{let c=1;for(const f of s)c*=f.evaluate(d);return c}],"-":{type:tr,overloads:[[[tr,tr],(d,[s,c])=>s.evaluate(d)-c.evaluate(d)],[[tr],(d,[s])=>-s.evaluate(d)]]},"/":[tr,[tr,tr],(d,[s,c])=>s.evaluate(d)/c.evaluate(d)],"%":[tr,[tr,tr],(d,[s,c])=>s.evaluate(d)%c.evaluate(d)],ln2:[tr,[],()=>Math.LN2],pi:[tr,[],()=>Math.PI],e:[tr,[],()=>Math.E],"^":[tr,[tr,tr],(d,[s,c])=>Math.pow(s.evaluate(d),c.evaluate(d))],sqrt:[tr,[tr],(d,[s])=>Math.sqrt(s.evaluate(d))],log10:[tr,[tr],(d,[s])=>Math.log(s.evaluate(d))/Math.LN10],ln:[tr,[tr],(d,[s])=>Math.log(s.evaluate(d))],log2:[tr,[tr],(d,[s])=>Math.log(s.evaluate(d))/Math.LN2],sin:[tr,[tr],(d,[s])=>Math.sin(s.evaluate(d))],cos:[tr,[tr],(d,[s])=>Math.cos(s.evaluate(d))],tan:[tr,[tr],(d,[s])=>Math.tan(s.evaluate(d))],asin:[tr,[tr],(d,[s])=>Math.asin(s.evaluate(d))],acos:[tr,[tr],(d,[s])=>Math.acos(s.evaluate(d))],atan:[tr,[tr],(d,[s])=>Math.atan(s.evaluate(d))],min:[tr,sh(tr),(d,s)=>Math.min(...s.map(c=>c.evaluate(d)))],max:[tr,sh(tr),(d,s)=>Math.max(...s.map(c=>c.evaluate(d)))],abs:[tr,[tr],(d,[s])=>Math.abs(s.evaluate(d))],round:[tr,[tr],(d,[s])=>{const c=s.evaluate(d);return c<0?-Math.round(-c):Math.round(c)}],floor:[tr,[tr],(d,[s])=>Math.floor(s.evaluate(d))],ceil:[tr,[tr],(d,[s])=>Math.ceil(s.evaluate(d))],"filter-==":[ni,[ti,$r],(d,[s,c])=>d.properties()[s.value]===c.value],"filter-id-==":[ni,[$r],(d,[s])=>d.id()===s.value],"filter-type-==":[ni,[ti],(d,[s])=>d.geometryType()===s.value],"filter-<":[ni,[ti,$r],(d,[s,c])=>{const f=d.properties()[s.value],y=c.value;return typeof f==typeof y&&f<y}],"filter-id-<":[ni,[$r],(d,[s])=>{const c=d.id(),f=s.value;return typeof c==typeof f&&c<f}],"filter->":[ni,[ti,$r],(d,[s,c])=>{const f=d.properties()[s.value],y=c.value;return typeof f==typeof y&&f>y}],"filter-id->":[ni,[$r],(d,[s])=>{const c=d.id(),f=s.value;return typeof c==typeof f&&c>f}],"filter-<=":[ni,[ti,$r],(d,[s,c])=>{const f=d.properties()[s.value],y=c.value;return typeof f==typeof y&&f<=y}],"filter-id-<=":[ni,[$r],(d,[s])=>{const c=d.id(),f=s.value;return typeof c==typeof f&&c<=f}],"filter->=":[ni,[ti,$r],(d,[s,c])=>{const f=d.properties()[s.value],y=c.value;return typeof f==typeof y&&f>=y}],"filter-id->=":[ni,[$r],(d,[s])=>{const c=d.id(),f=s.value;return typeof c==typeof f&&c>=f}],"filter-has":[ni,[$r],(d,[s])=>s.value in d.properties()],"filter-has-id":[ni,[],d=>d.id()!==null&&d.id()!==void 0],"filter-type-in":[ni,[Fs(ti)],(d,[s])=>s.value.indexOf(d.geometryType())>=0],"filter-id-in":[ni,[Fs($r)],(d,[s])=>s.value.indexOf(d.id())>=0],"filter-in-small":[ni,[ti,Fs($r)],(d,[s,c])=>c.value.indexOf(d.properties()[s.value])>=0],"filter-in-large":[ni,[ti,Fs($r)],(d,[s,c])=>function(f,y,A,_){for(;A<=_;){const C=A+_>>1;if(y[C]===f)return!0;y[C]>f?_=C-1:A=C+1}return!1}(d.properties()[s.value],c.value,0,c.value.length-1)],all:{type:ni,overloads:[[[ni,ni],(d,[s,c])=>s.evaluate(d)&&c.evaluate(d)],[sh(ni),(d,s)=>{for(const c of s)if(!c.evaluate(d))return!1;return!0}]]},any:{type:ni,overloads:[[[ni,ni],(d,[s,c])=>s.evaluate(d)||c.evaluate(d)],[sh(ni),(d,s)=>{for(const c of s)if(c.evaluate(d))return!0;return!1}]]},"!":[ni,[ni],(d,[s])=>!s.evaluate(d)],"is-supported-script":[ni,[ti],(d,[s])=>{const c=d.globals&&d.globals.isSupportedScript;return!c||c(s.evaluate(d))}],upcase:[ti,[ti],(d,[s])=>s.evaluate(d).toUpperCase()],downcase:[ti,[ti],(d,[s])=>s.evaluate(d).toLowerCase()],concat:[ti,sh($r),(d,s)=>s.map(c=>xs(c.evaluate(d))).join("")],"resolved-locale":[ti,[al],(d,[s])=>s.evaluate(d).resolvedLocale()],random:[tr,[tr,tr,$r],(d,s)=>{const[c,f,y]=s.map(_=>_.evaluate(d));if(c>f||c===f)return c;let A;if(typeof y=="string")A=function(_){let C=0;if(_.length===0)return C;for(let P=0;P<_.length;P++)C=(C<<5)-C+_.charCodeAt(P),C|=0;return C}(y);else{if(typeof y!="number")throw new qo(`Invalid seed input: ${y}`);A=y}return c+Xa(A)()*(f-c)}]});class Hh{constructor(s,c,f,y){this.expression=s,this._warningHistory={},this._evaluator=new ql(f,y),this._defaultValue=c?function(A){return A.type==="color"&&(Rf(A.default)||Array.isArray(A.default))?new _i(0,0,0,0):A.type==="color"?_i.parse(A.default)||null:A.default===void 0?null:A.default}(c):null,this._enumValues=c&&c.type==="enum"?c.values:null}evaluateWithoutErrorHandling(s,c,f,y,A,_,C,P){return this._evaluator.globals=s,this._evaluator.feature=c,this._evaluator.featureState=f,this._evaluator.canonical=y||null,this._evaluator.availableImages=A||null,this._evaluator.formattedSection=_,this._evaluator.featureTileCoord=C||null,this._evaluator.featureDistanceData=P||null,this.expression.evaluate(this._evaluator)}evaluate(s,c,f,y,A,_,C,P){this._evaluator.globals=s,this._evaluator.feature=c||null,this._evaluator.featureState=f||null,this._evaluator.canonical=y||null,this._evaluator.availableImages=A||null,this._evaluator.formattedSection=_||null,this._evaluator.featureTileCoord=C||null,this._evaluator.featureDistanceData=P||null;try{const R=this.expression.evaluate(this._evaluator);if(R==null||typeof R=="number"&&R!=R)return this._defaultValue;if(this._enumValues&&!(R in this._enumValues))throw new qo(`Expected value to be one of ${Object.keys(this._enumValues).map(w=>JSON.stringify(w)).join(", ")}, but found ${JSON.stringify(R)} instead.`);return R}catch(R){return this._warningHistory[R.message]||(this._warningHistory[R.message]=!0,typeof console<"u"&&console.warn(`Failed to evaluate expression "${JSON.stringify(this.expression.serialize())}". ${R.message}`)),this._defaultValue}}}function VA(d){return Array.isArray(d)&&d.length>0&&typeof d[0]=="string"&&d[0]in Pd}function Mf(d,s,c,f){const y=new Zc(Pd,[],s?function(_){const C={color:Ws,string:ti,number:tr,enum:ti,boolean:ni,formatted:jl,resolvedImage:Gi};return _.type==="array"?Fs(C[_.value]||$r,_.length):C[_.type]}(s):void 0,void 0,void 0,c,f),A=y.parse(d,void 0,void 0,void 0,s&&s.type==="string"?{typeAnnotation:"coerce"}:void 0);return A?jg(new Hh(A,s,c,f)):Sc(y.errors)}class QA{constructor(s,c,f){this.kind=s,this._styleExpression=c,this.isLightConstant=f,this.isStateDependent=s!=="constant"&&!Wa(c.expression),this.configDependencies=Mo(c.expression)}evaluateWithoutErrorHandling(s,c,f,y,A,_){return this._styleExpression.evaluateWithoutErrorHandling(s,c,f,y,A,_)}evaluate(s,c,f,y,A,_){return this._styleExpression.evaluate(s,c,f,y,A,_)}}class D{constructor(s,c,f,y,A){this.kind=s,this.zoomStops=f,this._styleExpression=c,this.isStateDependent=s!=="camera"&&!Wa(c.expression),this.isLightConstant=A,this.configDependencies=Mo(c.expression),this.interpolationType=y}evaluateWithoutErrorHandling(s,c,f,y,A,_){return this._styleExpression.evaluateWithoutErrorHandling(s,c,f,y,A,_)}evaluate(s,c,f,y,A,_){return this._styleExpression.evaluate(s,c,f,y,A,_)}interpolationFactor(s,c,f){return this.interpolationType?Bl.interpolationFactor(this.interpolationType,s,c,f):0}}function H(d,s,c,f){if((d=Mf(d,s,c,f)).result==="error")return d;const y=d.value.expression,A=Ua(y);if(!A&&!ah(s))return Sc([new ja("","data expressions not supported")]);const _=Eo(y,["zoom","pitch","distance-from-center"]);if(!_&&!wm(s))return Sc([new ja("","zoom expressions not supported")]);const C=Eo(y,["measure-light"]);if(!C&&!Ff(s))return Sc([new ja("","measure-light expression not supported")]);const P=s.expression&&s.expression.relaxZoomRestriction,R=pe(y);return R||_||P?R instanceof ja?Sc([R]):R instanceof Bl&&!xm(s)?Sc([new ja("",'"interpolate" expressions cannot be used with this property')]):jg(R?new D(A?"camera":"composite",d.value,R.labels,R instanceof Bl?R.interpolation:void 0,C):new QA(A?"constant":"source",d.value,C)):Sc([new ja("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class oe{constructor(s,c){this._parameters=s,this._specification=c,_a(this,Gg(this._parameters,this._specification))}static deserialize(s){return new oe(s._parameters,s._specification)}static serialize(s){return{_parameters:s._parameters,_specification:s._specification}}}function pe(d){let s=null;if(d instanceof kA)s=pe(d.result);else if(d instanceof RA){for(const c of d.args)if(s=pe(c),s)break}else(d instanceof oh||d instanceof Bl)&&d.input instanceof gs&&d.input.name==="zoom"&&(s=d);return s instanceof ja||d.eachChild(c=>{const f=pe(c);f instanceof ja?s=f:s&&f&&s!==f&&(s=new ja("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),s}var Me,Ge,Ke=function(){if(Ge)return Me;Ge=1,Me=s;var d=3;function s(c,f,y){var A=this.cells=[];if(c instanceof ArrayBuffer){this.arrayBuffer=c;var _=new Int32Array(this.arrayBuffer);c=_[0],this.d=(f=_[1])+2*(y=_[2]);for(var C=0;C<this.d*this.d;C++){var P=_[d+C],R=_[d+C+1];A.push(P===R?null:_.subarray(P,R))}var w=_[d+A.length+1];this.keys=_.subarray(_[d+A.length],w),this.bboxes=_.subarray(w),this.insert=this._insertReadonly}else{this.d=f+2*y;for(var S=0;S<this.d*this.d;S++)A.push([]);this.keys=[],this.bboxes=[]}this.n=f,this.extent=c,this.padding=y,this.scale=f/c,this.uid=0;var F=y/f*c;this.min=-F,this.max=c+F}return s.prototype.insert=function(c,f,y,A,_){this._forEachCell(f,y,A,_,this._insertCell,this.uid++),this.keys.push(c),this.bboxes.push(f),this.bboxes.push(y),this.bboxes.push(A),this.bboxes.push(_)},s.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},s.prototype._insertCell=function(c,f,y,A,_,C){this.cells[_].push(C)},s.prototype.query=function(c,f,y,A,_){var C=this.min,P=this.max;if(c<=C&&f<=C&&P<=y&&P<=A&&!_)return Array.prototype.slice.call(this.keys);var R=[];return this._forEachCell(c,f,y,A,this._queryCell,R,{},_),R},s.prototype._queryCell=function(c,f,y,A,_,C,P,R){var w=this.cells[_];if(w!==null)for(var S=this.keys,F=this.bboxes,T=0;T<w.length;T++){var L=w[T];if(P[L]===void 0){var U=4*L;(R?R(F[U+0],F[U+1],F[U+2],F[U+3]):c<=F[U+2]&&f<=F[U+3]&&y>=F[U+0]&&A>=F[U+1])?(P[L]=!0,C.push(S[L])):P[L]=!1}}},s.prototype._forEachCell=function(c,f,y,A,_,C,P,R){for(var w=this._convertToCellCoord(c),S=this._convertToCellCoord(f),F=this._convertToCellCoord(y),T=this._convertToCellCoord(A),L=w;L<=F;L++)for(var U=S;U<=T;U++){var V=this.d*U+L;if((!R||R(this._convertFromCellCoord(L),this._convertFromCellCoord(U),this._convertFromCellCoord(L+1),this._convertFromCellCoord(U+1)))&&_.call(this,c,f,y,A,V,C,P,R))return}},s.prototype._convertFromCellCoord=function(c){return(c-this.padding)/this.scale},s.prototype._convertToCellCoord=function(c){return Math.max(0,Math.min(this.d-1,Math.floor(c*this.scale)+this.padding))},s.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var c=this.cells,f=d+this.cells.length+1+1,y=0,A=0;A<this.cells.length;A++)y+=this.cells[A].length;var _=new Int32Array(f+y+this.keys.length+this.bboxes.length);_[0]=this.extent,_[1]=this.n,_[2]=this.padding;for(var C=f,P=0;P<c.length;P++){var R=c[P];_[d+P]=C,_.set(R,C),C+=R.length}return _[d+c.length]=C,_.set(this.keys,C),_[d+c.length+1]=C+=this.keys.length,_.set(this.bboxes,C),C+=this.bboxes.length,_.buffer},Me}(),Ze=b(Ke);const nt={};function He(d,s,c={}){Object.defineProperty(d,"_classRegistryKey",{value:s,writable:!1}),nt[s]={klass:d,omit:c.omit||[]}}He(Object,"Object"),Ze.serialize=function(d,s){const c=d.toArrayBuffer();return s&&s.add(c),{buffer:c}},Ze.deserialize=function(d){return new Ze(d.buffer)},Object.defineProperty(Ze,"name",{value:"Grid"}),He(Ze,"Grid"),He(_i,"Color"),He(Error,"Error"),He(Rs,"Formatted"),He(yo,"FormattedSection"),He(Go,"AJAXError"),He(us,"ResolvedImage"),He(oe,"StylePropertyFunction"),He(Hh,"StyleExpression",{omit:["_evaluator"]}),He(D,"ZoomDependentExpression"),He(QA,"ZoomConstantExpression"),He(gs,"CompoundExpression",{omit:["_evaluate"]});for(const d in Pd)nt[Pd[d]._classRegistryKey]||He(Pd[d],`Expression${d}`);function Kt(d){return d&&typeof ArrayBuffer<"u"&&(d instanceof ArrayBuffer||d.constructor&&d.constructor.name==="ArrayBuffer")}function vn(d){return self.ImageBitmap&&d instanceof ImageBitmap}function pn(d,s){if(d==null||typeof d=="boolean"||typeof d=="number"||typeof d=="string"||d instanceof Boolean||d instanceof Number||d instanceof String||d instanceof Date||d instanceof RegExp)return d;if(Kt(d)||vn(d))return s&&s.add(d),d;if(ArrayBuffer.isView(d)){const c=d;return s&&s.add(c.buffer),c}if(d instanceof ImageData)return s&&s.add(d.data.buffer),d;if(Array.isArray(d)){const c=[];for(const f of d)c.push(pn(f,s));return c}if(d instanceof Map){const c={$name:"Map"};for(const[f,y]of d.entries())c[f]=pn(y);return c}if(d instanceof Set){const c={$name:"Set"};let f=0;for(const y of d.values())c[++f]=pn(y);return c}if(typeof d=="object"){const c=d.constructor,f=c._classRegistryKey;if(!f)throw new Error(`can't serialize object of unregistered class ${f}`);const y=c.serialize?c.serialize(d,s):{};if(!c.serialize){for(const A in d)d.hasOwnProperty(A)&&(nt[f].omit.indexOf(A)>=0||(y[A]=pn(d[A],s)));d instanceof Error&&(y.message=d.message)}if(y.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(y.$name=f),y}throw new Error("can't serialize object of type "+typeof d)}function un(d){if(d==null||typeof d=="boolean"||typeof d=="number"||typeof d=="string"||d instanceof Boolean||d instanceof Number||d instanceof String||d instanceof Date||d instanceof RegExp||Kt(d)||vn(d)||ArrayBuffer.isView(d)||d instanceof ImageData)return d;if(Array.isArray(d))return d.map(un);if(typeof d=="object"){const s=d.$name||"Object";if(s==="Map"){const y=new Map;for(const A of Object.keys(d))A!=="$name"&&y.set(A,un(d[A]));return y}if(s==="Set"){const y=new Set;for(const A of Object.keys(d))A!=="$name"&&y.add(un(d[A]));return y}const{klass:c}=nt[s];if(!c)throw new Error(`can't deserialize unregistered class ${s}`);if(c.deserialize)return c.deserialize(d);const f=Object.create(c.prototype);for(const y of Object.keys(d))y!=="$name"&&(f[y]=un(d[y]));return f}throw new Error("can't deserialize object of type "+typeof d)}const Zt={"Latin-1 Supplement":d=>d>=128&&d<=255,Arabic:d=>d>=1536&&d<=1791,"Arabic Supplement":d=>d>=1872&&d<=1919,"Arabic Extended-A":d=>d>=2208&&d<=2303,"Hangul Jamo":d=>d>=4352&&d<=4607,"Unified Canadian Aboriginal Syllabics":d=>d>=5120&&d<=5759,Khmer:d=>d>=6016&&d<=6143,"Unified Canadian Aboriginal Syllabics Extended":d=>d>=6320&&d<=6399,"General Punctuation":d=>d>=8192&&d<=8303,"Letterlike Symbols":d=>d>=8448&&d<=8527,"Number Forms":d=>d>=8528&&d<=8591,"Miscellaneous Technical":d=>d>=8960&&d<=9215,"Control Pictures":d=>d>=9216&&d<=9279,"Optical Character Recognition":d=>d>=9280&&d<=9311,"Enclosed Alphanumerics":d=>d>=9312&&d<=9471,"Geometric Shapes":d=>d>=9632&&d<=9727,"Miscellaneous Symbols":d=>d>=9728&&d<=9983,"Miscellaneous Symbols and Arrows":d=>d>=11008&&d<=11263,"CJK Radicals Supplement":d=>d>=11904&&d<=12031,"Kangxi Radicals":d=>d>=12032&&d<=12255,"Ideographic Description Characters":d=>d>=12272&&d<=12287,"CJK Symbols and Punctuation":d=>d>=12288&&d<=12351,Hiragana:d=>d>=12352&&d<=12447,Katakana:d=>d>=12448&&d<=12543,Bopomofo:d=>d>=12544&&d<=12591,"Hangul Compatibility Jamo":d=>d>=12592&&d<=12687,Kanbun:d=>d>=12688&&d<=12703,"Bopomofo Extended":d=>d>=12704&&d<=12735,"CJK Strokes":d=>d>=12736&&d<=12783,"Katakana Phonetic Extensions":d=>d>=12784&&d<=12799,"Enclosed CJK Letters and Months":d=>d>=12800&&d<=13055,"CJK Compatibility":d=>d>=13056&&d<=13311,"CJK Unified Ideographs Extension A":d=>d>=13312&&d<=19903,"Yijing Hexagram Symbols":d=>d>=19904&&d<=19967,"CJK Unified Ideographs":d=>d>=19968&&d<=40959,"Yi Syllables":d=>d>=40960&&d<=42127,"Yi Radicals":d=>d>=42128&&d<=42191,"Hangul Jamo Extended-A":d=>d>=43360&&d<=43391,"Hangul Syllables":d=>d>=44032&&d<=55215,"Hangul Jamo Extended-B":d=>d>=55216&&d<=55295,"Private Use Area":d=>d>=57344&&d<=63743,"CJK Compatibility Ideographs":d=>d>=63744&&d<=64255,"Arabic Presentation Forms-A":d=>d>=64336&&d<=65023,"Vertical Forms":d=>d>=65040&&d<=65055,"CJK Compatibility Forms":d=>d>=65072&&d<=65103,"Small Form Variants":d=>d>=65104&&d<=65135,"Arabic Presentation Forms-B":d=>d>=65136&&d<=65279,"Halfwidth and Fullwidth Forms":d=>d>=65280&&d<=65519,"CJK Unified Ideographs Extension B":d=>d>=131072&&d<=173791};function Pn(d){for(const s of d)if(Gn(s.charCodeAt(0)))return!0;return!1}function Wt(d){for(const s of d)if(!en(s.charCodeAt(0)))return!1;return!0}function en(d){return!(Zt.Arabic(d)||Zt["Arabic Supplement"](d)||Zt["Arabic Extended-A"](d)||Zt["Arabic Presentation Forms-A"](d)||Zt["Arabic Presentation Forms-B"](d))}function Gn(d){return!(d!==746&&d!==747&&(d<4352||!(Zt["Bopomofo Extended"](d)||Zt.Bopomofo(d)||Zt["CJK Compatibility Forms"](d)&&!(d>=65097&&d<=65103)||Zt["CJK Compatibility Ideographs"](d)||Zt["CJK Compatibility"](d)||Zt["CJK Radicals Supplement"](d)||Zt["CJK Strokes"](d)||!(!Zt["CJK Symbols and Punctuation"](d)||d>=12296&&d<=12305||d>=12308&&d<=12319||d===12336)||Zt["CJK Unified Ideographs Extension A"](d)||Zt["CJK Unified Ideographs"](d)||Zt["Enclosed CJK Letters and Months"](d)||Zt["Hangul Compatibility Jamo"](d)||Zt["Hangul Jamo Extended-A"](d)||Zt["Hangul Jamo Extended-B"](d)||Zt["Hangul Jamo"](d)||Zt["Hangul Syllables"](d)||Zt.Hiragana(d)||Zt["Ideographic Description Characters"](d)||Zt.Kanbun(d)||Zt["Kangxi Radicals"](d)||Zt["Katakana Phonetic Extensions"](d)||Zt.Katakana(d)&&d!==12540||!(!Zt["Halfwidth and Fullwidth Forms"](d)||d===65288||d===65289||d===65293||d>=65306&&d<=65310||d===65339||d===65341||d===65343||d>=65371&&d<=65503||d===65507||d>=65512&&d<=65519)||!(!Zt["Small Form Variants"](d)||d>=65112&&d<=65118||d>=65123&&d<=65126)||Zt["Unified Canadian Aboriginal Syllabics"](d)||Zt["Unified Canadian Aboriginal Syllabics Extended"](d)||Zt["Vertical Forms"](d)||Zt["Yijing Hexagram Symbols"](d)||Zt["Yi Syllables"](d)||Zt["Yi Radicals"](d))))}function Xn(d){return!(Gn(d)||function(s){return!!(Zt["Latin-1 Supplement"](s)&&(s===167||s===169||s===174||s===177||s===188||s===189||s===190||s===215||s===247)||Zt["General Punctuation"](s)&&(s===8214||s===8224||s===8225||s===8240||s===8241||s===8251||s===8252||s===8258||s===8263||s===8264||s===8265||s===8273)||Zt["Letterlike Symbols"](s)||Zt["Number Forms"](s)||Zt["Miscellaneous Technical"](s)&&(s>=8960&&s<=8967||s>=8972&&s<=8991||s>=8996&&s<=9e3||s===9003||s>=9085&&s<=9114||s>=9150&&s<=9165||s===9167||s>=9169&&s<=9179||s>=9186&&s<=9215)||Zt["Control Pictures"](s)&&s!==9251||Zt["Optical Character Recognition"](s)||Zt["Enclosed Alphanumerics"](s)||Zt["Geometric Shapes"](s)||Zt["Miscellaneous Symbols"](s)&&!(s>=9754&&s<=9759)||Zt["Miscellaneous Symbols and Arrows"](s)&&(s>=11026&&s<=11055||s>=11088&&s<=11097||s>=11192&&s<=11243)||Zt["CJK Symbols and Punctuation"](s)||Zt.Katakana(s)||Zt["Private Use Area"](s)||Zt["CJK Compatibility Forms"](s)||Zt["Small Form Variants"](s)||Zt["Halfwidth and Fullwidth Forms"](s)||s===8734||s===8756||s===8757||s>=9984&&s<=10087||s>=10102&&s<=10131||s===65532||s===65533)}(d))}function qn(d){return d>=1424&&d<=2303||Zt["Arabic Presentation Forms-A"](d)||Zt["Arabic Presentation Forms-B"](d)}function Pr(d,s){return!(!s&&qn(d)||d>=2304&&d<=3583||d>=3840&&d<=4255||Zt.Khmer(d))}function Cr(d){for(const s of d)if(qn(s.charCodeAt(0)))return!0;return!1}const Kr="deferred",wr="loading",Zi="loaded";let Yi=null,si="unavailable",Ei=null;const zo=function(d){d&&typeof d=="string"&&d.indexOf("NetworkError")>-1&&(si="error"),Yi&&Yi(d)};function Bo(){vi.fire(new Hl("pluginStateChange",{pluginStatus:si,pluginURL:Ei}))}const vi=new wl,Es=function(){return si},za=function(){if(si!==Kr||!Ei)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");si=wr,Bo(),Ei&&bc({url:Ei},d=>{d?zo(d):(si=Zi,Bo())})},io={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>si===Zi||io.applyArabicShaping!=null,isLoading:()=>si===wr,setState(d){si=d.pluginStatus,Ei=d.pluginURL},isParsed:()=>io.applyArabicShaping!=null&&io.processBidirectionalText!=null&&io.processStyledBidirectionalText!=null,getPluginURL:()=>Ei};class Oi{constructor(s,c){this.zoom=s,c?(this.now=c.now,this.fadeDuration=c.fadeDuration,this.transition=c.transition,this.pitch=c.pitch,this.brightness=c.brightness):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(s){return function(c,f){for(const y of c)if(!Pr(y.charCodeAt(0),f))return!1;return!0}(s,io.isLoaded())}}class fo{constructor(s,c,f,y){this.property=s,this.value=c,this.expression=function(A,_,C,P){if(Rf(A))return new oe(A,_);if(VA(A)||Array.isArray(A)&&A.length>0){const R=H(A,_,C,P);if(R.result==="error")throw new Error(R.value.map(w=>`${w.key}: ${w.message}`).join(", "));return R.value}{let R=A;return typeof A=="string"&&_.type==="color"&&(R=_i.parse(A)),{kind:"constant",configDependencies:new Set,evaluate:()=>R}}}(c===void 0?s.specification.default:c,s.specification,f,y)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(s,c,f){return this.property.possiblyEvaluate(this,s,c,f)}}class Za{constructor(s,c,f){this.property=s,this.value=new fo(s,void 0,c,f)}transitioned(s,c){return new Js(this.property,this.value,c,lr({},s.transition,this.transition),s.now)}untransitioned(){return new Js(this.property,this.value,null,{},0)}}class dl{constructor(s,c,f){this._properties=s,this._values=Object.create(s.defaultTransitionablePropertyValues),this._scope=c,this._options=f,this.configDependencies=new Set}getValue(s){return Wi(this._values[s].value.value)}setValue(s,c){this._values.hasOwnProperty(s)||(this._values[s]=new Za(this._values[s].property,this._scope,this._options)),this._values[s].value=new fo(this._values[s].property,c===null?void 0:Wi(c),this._scope,this._options),this._values[s].value.expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[s].value.expression.configDependencies]))}setTransitionOrValue(s,c){c&&(this._options=c);const f=this._properties.properties;if(s)for(const y in s){const A=s[y];if(No(y,"-transition")){const _=y.slice(0,-11);f[_]&&this.setTransition(_,A)}else f.hasOwnProperty(y)&&this.setValue(y,A)}}getTransition(s){return Wi(this._values[s].transition)}setTransition(s,c){this._values.hasOwnProperty(s)||(this._values[s]=new Za(this._values[s].property)),this._values[s].transition=Wi(c)||void 0}serialize(){const s={};for(const c of Object.keys(this._values)){const f=this.getValue(c);f!==void 0&&(s[c]=f);const y=this.getTransition(c);y!==void 0&&(s[`${c}-transition`]=y)}return s}transitioned(s,c){const f=new da(this._properties);for(const y of Object.keys(this._values))f._values[y]=this._values[y].transitioned(s,c._values[y]);return f}untransitioned(){const s=new da(this._properties);for(const c of Object.keys(this._values))s._values[c]=this._values[c].untransitioned();return s}}class Js{constructor(s,c,f,y,A){const _=y.delay||0,C=y.duration||0;A=A||0,this.property=s,this.value=c,this.begin=A+_,this.end=this.begin+C,s.specification.transition&&(y.delay||y.duration)&&(this.prior=f)}possiblyEvaluate(s,c,f){const y=s.now||0,A=this.value.possiblyEvaluate(s,c,f),_=this.prior;if(_){if(y>this.end)return this.prior=null,A;if(this.value.isDataDriven())return this.prior=null,A;if(y<this.begin)return _.possiblyEvaluate(s,c,f);{const C=(y-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(s,c,f),A,fn(C))}}return A}}class da{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitioningPropertyValues)}possiblyEvaluate(s,c,f){const y=new Ja(this._properties);for(const A of Object.keys(this._values))y._values[A]=this._values[A].possiblyEvaluate(s,c,f);return y}hasTransition(){for(const s of Object.keys(this._values))if(this._values[s].prior)return!0;return!1}}class Ya{constructor(s,c,f){this._properties=s,this._values=Object.create(s.defaultPropertyValues),this._scope=c,this._options=f,this.configDependencies=new Set}getValue(s){return Wi(this._values[s].value)}setValue(s,c){this._values[s]=new fo(this._values[s].property,c===null?void 0:Wi(c),this._scope,this._options),this._values[s].expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[s].expression.configDependencies]))}serialize(){const s={};for(const c of Object.keys(this._values)){const f=this.getValue(c);f!==void 0&&(s[c]=f)}return s}possiblyEvaluate(s,c,f){const y=new Ja(this._properties);for(const A of Object.keys(this._values))y._values[A]=this._values[A].possiblyEvaluate(s,c,f);return y}}class ba{constructor(s,c,f){this.property=s,this.value=c,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(s){return this.value.kind==="constant"?this.value.value:s}evaluate(s,c,f,y){return this.property.evaluate(this.value,this.parameters,s,c,f,y)}}class Ja{constructor(s){this._properties=s,this._values=Object.create(s.defaultPossiblyEvaluatedValues)}get(s){return this._values[s]}}class Tn{constructor(s){this.specification=s}possiblyEvaluate(s,c){return s.expression.evaluate(c)}interpolate(s,c,f){const y=xc[this.specification.type];return y?y(s,c,f):s}}class dr{constructor(s,c){this.specification=s,this.overrides=c}possiblyEvaluate(s,c,f,y){return new ba(this,s.expression.kind==="constant"||s.expression.kind==="camera"?{kind:"constant",value:s.expression.evaluate(c,null,{},f,y)}:s.expression,c)}interpolate(s,c,f){if(s.value.kind!=="constant"||c.value.kind!=="constant")return s;if(s.value.value===void 0||c.value.value===void 0)return new ba(this,{kind:"constant",value:void 0},s.parameters);const y=xc[this.specification.type];return y?new ba(this,{kind:"constant",value:y(s.value.value,c.value.value,f)},s.parameters):s}evaluate(s,c,f,y,A,_){return s.kind==="constant"?s.value:s.evaluate(c,f,y,A,_)}}class wa{constructor(s){this.specification=s}possiblyEvaluate(s,c,f,y){return!!s.expression.evaluate(c,null,{},f,y)}interpolate(){return!1}}class Ji{constructor(s){this.properties=s,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const c=new Oi(0,{});for(const f in s){const y=s[f];y.specification.overridable&&this.overridableProperties.push(f);const A=this.defaultPropertyValues[f]=new fo(y,void 0),_=this.defaultTransitionablePropertyValues[f]=new Za(y);this.defaultTransitioningPropertyValues[f]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[f]=A.possiblyEvaluate(c)}}}He(dr,"DataDrivenProperty"),He(Tn,"DataConstantProperty"),He(wa,"ColorRampProperty");var Nt=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"required":false,"type":"array","value":"light-3d"},"terrain":{"type":"terrain","optional":true},"fog":{"type":"fog"},"camera":{"type":"camera"},"color-theme":{"type":"colorTheme"},"imports":{"type":"array","value":"import"},"schema":{"type":"schema"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"},"models":{"type":"models"},"featuresets":{"experimental":true,"type":"featuresets"}},"featuresets":{"experimental":true,"*":{"type":"featureset"}},"featureset":{"experimental":true,"selectors":{"type":"array","value":"selector"}},"selector":{"experimental":true,"layer":{"type":"string","required":true},"properties":{"type":"selectorProperty","required":false},"featureNamespace":{"type":"string","required":false}},"selectorProperty":{"experimental":true,"*":{"type":"*"}},"model":{"type":"string","required":true},"import":{"id":{"type":"string","required":true},"url":{"type":"string","required":true},"config":{"type":"config"},"data":{"type":"$root"}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","property-type":"data-constant","expression":{},"required":true},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string","required":true},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false,"property-type":"data-constant"},"shadow-intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_ambient":{"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_array":{"experimental":true,"type":{"required":true,"type":"enum","values":{"raster-array":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"rasterLayers":{"type":"*"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"},"dynamic":{"type":"boolean","default":false}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":1}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":1}},"url":{"required":false,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_model":{"type":{"required":true,"type":"enum","values":{"model":1,"batched-model":1}},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"raster-particle":{"experimental":true},"hillshade":{},"model":{"experimental":true},"background":{},"sky":{},"slot":{},"clip":{"experimental":true}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_clip","layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_raster-particle","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}}},"layout_clip":{"clip-layer-types":{"type":"array","value":"enum","values":{"model":1,"symbol":1},"default":[],"expression":{},"property-type":"data-constant","experimental":true},"clip-layer-scope":{"type":"array","value":"string","default":[],"expression":{},"property-type":"data-constant","experimental":true}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1,"none":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-z-offset":{"type":"number","experimental":true,"expression":{"parameters":["zoom","feature","line-progress"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster-particle":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective","property-type":"data-constant"}},"colorTheme":{"data":{"type":"string","property-type":"data-constant","expression":{}}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_raster-particle","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"fill-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"property-type":"data-constant","type":"color","experimental":true,"default":"#ffffff","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"property-type":"data-constant","type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"property-type":"data-constant","type":"number","experimental":true,"default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"property-type":"data-constant","type":"boolean","default":true,"experimental":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"fill-extrusion-line-width":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-cast-shadows":{"type":"boolean","default":true,"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"property-type":"constant"},"line-trim-fade-range":{"type":"array","value":"number","experimental":true,"length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-trim-color":{"type":"color","experimental":true,"default":"transparent","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-border-width":{"type":"number","private":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","private":true,"default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-occlusion-opacity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"property-type":"data-constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-image-cross-fade":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"transition":true},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-color-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"symbol-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-elevation-reference":{"type":"enum","values":{"sea":1,"ground":1},"default":"ground","experimental":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-value"]},"property-type":"color-ramp"},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"raster-array-band":{"type":"string","required":false,"experimental":true,"property-type":"data-constant"},"raster-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster-particle":{"raster-particle-array-band":{"type":"string","required":false,"property-type":"data-constant"},"raster-particle-count":{"type":"number","default":512,"minimum":1,"property-type":"data-constant"},"raster-particle-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-particle-speed"]},"property-type":"color-ramp"},"raster-particle-max-speed":{"type":"number","default":1,"minimum":1,"property-type":"data-constant"},"raster-particle-speed-factor":{"type":"number","default":0.2,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-fade-opacity-factor":{"type":"number","default":0.98,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-reset-rate-factor":{"type":"number","default":0.8,"minimum":0,"maximum":1,"property-type":"data-constant"},"raster-particle-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_background":{"background-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":[]},"property-type":"data-constant"},"background-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d","property-type":"data-constant"},"model-cast-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-receive-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant","transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"model-front-cutoff":{"type":"array","private":true,"value":"number","property-type":"data-constant","expression":{"interpolated":true,"parameters":["zoom"]},"length":3,"default":[0,0,1],"minimum":[0,0,0],"maximum":[1,1,1]}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function es(d){return d instanceof Number||d instanceof String||d instanceof Boolean?d.valueOf():d}function Fd(d){if(Array.isArray(d))return d.map(Fd);if(d instanceof Object&&!(d instanceof Number||d instanceof String||d instanceof Boolean)){const s={};for(const c in d)s[c]=Fd(d[c]);return s}return es(d)}function HA(d){if(d===!0||d===!1)return!0;if(!Array.isArray(d)||d.length===0)return!1;switch(d[0]){case"has":return d.length>=2&&d[1]!=="$id"&&d[1]!=="$type";case"in":return d.length>=3&&(typeof d[1]!="string"||Array.isArray(d[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return d.length!==3||Array.isArray(d[1])||Array.isArray(d[2]);case"any":case"all":for(const s of d.slice(1))if(!HA(s)&&typeof s!="boolean")return!1;return!0;default:return!0}}function Yl(d,s="",c=null,f="fill"){if(d==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};HA(d)||(d=Of(d));const y=d;let A=!0;try{A=function(S){if(!Iu(S))return S;let F=Fd(S);return Tc(F),F=Rd(F),F}(y)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(y,null,2)}
        `)}const _=Nt[`filter_${f}`],C=Mf(A,_,s,c);let P=null;if(C.result==="error")throw new Error(C.value.map(S=>`${S.key}: ${S.message}`).join(", "));P=(S,F,T)=>C.value.evaluate(S,F,{},T);let R=null,w=null;if(A!==y){const S=Mf(y,_,s,c);if(S.result==="error")throw new Error(S.value.map(F=>`${F.key}: ${F.message}`).join(", "));R=(F,T,L,U,V)=>S.value.evaluate(F,T,{},L,void 0,void 0,U,V),w=!Ua(S.value.expression)}return{filter:P,dynamicFilter:R||void 0,needGeometry:jh(A),needFeature:!!w}}function Rd(d){if(!Array.isArray(d))return d;const s=function(c){if(Ic.has(c[0])){for(let f=1;f<c.length;f++)if(Iu(c[f]))return!0}return c}(d);return s===!0?s:s.map(c=>Rd(c))}function Tc(d){let s=!1;const c=[];if(d[0]==="case"){for(let f=1;f<d.length-1;f+=2)s=s||Iu(d[f]),c.push(d[f+1]);c.push(d[d.length-1])}else if(d[0]==="match"){s=s||Iu(d[1]);for(let f=2;f<d.length-1;f+=2)c.push(d[f+1]);c.push(d[d.length-1])}else if(d[0]==="step"){s=s||Iu(d[1]);for(let f=1;f<d.length-1;f+=2)c.push(d[f+1])}s&&(d.length=0,d.push("any",...c));for(let f=1;f<d.length;f++)Tc(d[f])}function Iu(d){if(!Array.isArray(d))return!1;if((s=d[0])==="pitch"||s==="distance-from-center")return!0;var s;for(let c=1;c<d.length;c++)if(Iu(d[c]))return!0;return!1}const Ic=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function kd(d,s){return d<s?-1:d>s?1:0}function jh(d){if(!Array.isArray(d))return!1;if(d[0]==="within"||d[0]==="distance")return!0;for(let s=1;s<d.length;s++)if(jh(d[s]))return!0;return!1}function Of(d){if(!d)return!0;const s=d[0];return d.length<=1?s!=="any":s==="=="?$h(d[1],d[2],"=="):s==="!="?Gh($h(d[1],d[2],"==")):s==="<"||s===">"||s==="<="||s===">="?$h(d[1],d[2],s):s==="any"?(c=d.slice(1),["any"].concat(c.map(Of))):s==="all"?["all"].concat(d.slice(1).map(Of)):s==="none"?["all"].concat(d.slice(1).map(Of).map(Gh)):s==="in"?Df(d[1],d.slice(2)):s==="!in"?Gh(Df(d[1],d.slice(2))):s==="has"?lh(d[1]):s!=="!has"||Gh(lh(d[1]));var c}function $h(d,s,c){switch(d){case"$type":return[`filter-type-${c}`,s];case"$id":return[`filter-id-${c}`,s];default:return[`filter-${c}`,d,s]}}function Df(d,s){if(s.length===0)return!1;switch(d){case"$type":return["filter-type-in",["literal",s]];case"$id":return["filter-id-in",["literal",s]];default:return s.length>200&&!s.some(c=>typeof c!=typeof s[0])?["filter-in-large",d,["literal",s.sort(kd)]]:["filter-in-small",d,["literal",s]]}}function lh(d){switch(d){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",d]}}function Gh(d){return["!",d]}const Pu="";function Md(d,s){return s?`${d}${Pu}${s}`:d}const Pc="-transition",a0=new Set(["fill","line","background","hillshade","raster"]);class fa extends wl{constructor(s,c,f,y,A){if(super(),this.id=s.id,this.fqid=Md(this.id,f),this.type=s.type,this.scope=f,this.lut=y,this.options=A,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.configDependencies=new Set,s.type!=="custom"&&(this.metadata=s.metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,s.type!=="background"&&s.type!=="sky"&&s.type!=="slot"&&(this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter),s.slot&&(this.slot=s.slot),c.layout&&(this._unevaluatedLayout=new Ya(c.layout,this.scope,A),this.configDependencies=new Set([...this.configDependencies,...this._unevaluatedLayout.configDependencies])),c.paint)){this._transitionablePaint=new dl(c.paint,this.scope,A);for(const _ in s.paint)this.setPaintProperty(_,s.paint[_]);for(const _ in s.layout)this.setLayoutProperty(_,s.layout[_]);this.configDependencies=new Set([...this.configDependencies,...this._transitionablePaint.configDependencies]),this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ja(c.paint)}}onAdd(s){}onRemove(s){}isDraped(s){return!this.is3D()&&a0.has(this.type)}getLayoutProperty(s){return s==="visibility"?this.visibility:this._unevaluatedLayout.getValue(s)}setLayoutProperty(s,c){if(this.type==="custom"&&s==="visibility")return void(this.visibility=c);const f=this._unevaluatedLayout;f._properties.properties[s]&&(f.setValue(s,c),this.configDependencies=new Set([...this.configDependencies,...f.configDependencies]),s==="visibility"&&this.possiblyEvaluateVisibility())}possiblyEvaluateVisibility(){this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0})}getPaintProperty(s){return No(s,Pc)?this._transitionablePaint.getTransition(s.slice(0,-11)):this._transitionablePaint.getValue(s)}setPaintProperty(s,c){const f=this._transitionablePaint,y=f._properties.properties;if(No(s,Pc)){const S=s.slice(0,-11);return y[S]&&f.setTransition(S,c||void 0),!1}if(!y[s])return!1;const A=f._values[s],_=A.value.isDataDriven(),C=A.value;f.setValue(s,c),this.configDependencies=new Set([...this.configDependencies,...f.configDependencies]),this._handleSpecialPaintPropertyUpdate(s);const P=f._values[s].value,R=P.isDataDriven(),w=No(s,"pattern")||s==="line-dasharray";return R||_||w||this._handleOverridablePaintPropertyUpdate(s,C,P)}_handleSpecialPaintPropertyUpdate(s){}getProgramIds(){return null}getDefaultProgramParams(s,c,f){return null}_handleOverridablePaintPropertyUpdate(s,c,f){return!1}isHidden(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||this.visibility==="none"}updateTransitions(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(s,c){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,c)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,c)}serialize(){return pi({id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()},(s,c)=>!(s===void 0||c==="layout"&&!Object.keys(s).length||c==="paint"&&!Object.keys(s).length))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}tileCoverLift(){return 0}resize(){}isStateDependent(){for(const s in this.paint._values){const c=this.paint.get(s);if(c instanceof ba&&ah(c.property.specification)&&(c.value.kind==="source"||c.value.kind==="composite")&&c.value.isStateDependent)return!0}return!1}compileFilter(s){this._filterCompiled||(this._featureFilter=Yl(this.filter,this.scope,s),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}getLayerRenderingStats(){return this._stats}resetLayerRenderingStats(s){this._stats&&(s.renderPass==="shadow"?this._stats.numRenderedVerticesInShadowPass=0:this._stats.numRenderedVerticesInTransparentPass=0)}queryRadius(s){}queryIntersectsFeature(s,c,f,y,A,_,C,P,R){}queryIntersectsMatchingFeature(s,c,f,y){}}const ch={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Uf{constructor(s,c){this._structArray=s,this._pos1=c*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class _o{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(s,c){return s._trim(),c&&(s.isTransferred=!0,c.add(s.arrayBuffer)),{length:s.length,arrayBuffer:s.arrayBuffer}}static deserialize(s){const c=Object.create(this.prototype);return c.arrayBuffer=s.arrayBuffer,c.length=s.length,c.capacity=s.arrayBuffer.byteLength/c.bytesPerElement,c._refreshViews(),c}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(s){this.reserve(s),this.length=s}reserve(s){if(s>this.capacity){this.capacity=Math.max(s,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const c=this.uint8;this._refreshViews(),c&&this.uint8.set(c)}}_refreshViews(){throw new Error("StructArray#_refreshViews() must be implemented by each concrete StructArray layout")}emplace(...s){throw new Error("StructArray#emplace() must be implemented by each concrete StructArray layout")}emplaceBack(...s){throw new Error("StructArray#emplaceBack() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Bi(d,s=1){let c=0,f=0;return{members:d.map(y=>{const A=ch[y.type].BYTES_PER_ELEMENT,_=c=Cm(c,Math.max(s,A)),C=y.components||1;return f=Math.max(f,A),c+=A*C,{name:y.name,type:y.type,components:C,offset:_}}),size:Cm(c,Math.max(f,s)),alignment:s}}function Cm(d,s){return Math.ceil(d/s)*s}class Lc extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c){const f=this.length;return this.resize(f+1),this.emplace(f,s,c)}emplace(s,c,f){const y=2*s;return this.int16[y+0]=c,this.int16[y+1]=f,s}}Lc.prototype.bytesPerElement=4,He(Lc,"StructArrayLayout2i4");class Nf extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c,f){const y=this.length;return this.resize(y+1),this.emplace(y,s,c,f)}emplace(s,c,f,y){const A=3*s;return this.int16[A+0]=c,this.int16[A+1]=f,this.int16[A+2]=y,s}}Nf.prototype.bytesPerElement=6,He(Nf,"StructArrayLayout3i6");class Lu extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c,f,y){const A=this.length;return this.resize(A+1),this.emplace(A,s,c,f,y)}emplace(s,c,f,y,A){const _=4*s;return this.int16[_+0]=c,this.int16[_+1]=f,this.int16[_+2]=y,this.int16[_+3]=A,s}}Lu.prototype.bytesPerElement=8,He(Lu,"StructArrayLayout4i8");class Kh extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c,f,y,A){const _=this.length;return this.resize(_+1),this.emplace(_,s,c,f,y,A)}emplace(s,c,f,y,A,_){const C=5*s;return this.int16[C+0]=c,this.int16[C+1]=f,this.int16[C+2]=y,this.int16[C+3]=A,this.int16[C+4]=_,s}}Kh.prototype.bytesPerElement=10,He(Kh,"StructArrayLayout5i10");class zf extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,f,y,A,_,C){const P=this.length;return this.resize(P+1),this.emplace(P,s,c,f,y,A,_,C)}emplace(s,c,f,y,A,_,C,P){const R=6*s,w=12*s,S=3*s;return this.int16[R+0]=c,this.int16[R+1]=f,this.uint8[w+4]=y,this.uint8[w+5]=A,this.uint8[w+6]=_,this.uint8[w+7]=C,this.float32[S+2]=P,s}}zf.prototype.bytesPerElement=12,He(zf,"StructArrayLayout2i4ub1f12");class Sl extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,f,y){const A=this.length;return this.resize(A+1),this.emplace(A,s,c,f,y)}emplace(s,c,f,y,A){const _=4*s;return this.float32[_+0]=c,this.float32[_+1]=f,this.float32[_+2]=y,this.float32[_+3]=A,s}}Sl.prototype.bytesPerElement=16,He(Sl,"StructArrayLayout4f16");class Fu extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,f){const y=this.length;return this.resize(y+1),this.emplace(y,s,c,f)}emplace(s,c,f,y){const A=3*s;return this.float32[A+0]=c,this.float32[A+1]=f,this.float32[A+2]=y,s}}Fu.prototype.bytesPerElement=12,He(Fu,"StructArrayLayout3f12");class Ru extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,f,y,A){const _=this.length;return this.resize(_+1),this.emplace(_,s,c,f,y,A)}emplace(s,c,f,y,A,_){const C=6*s,P=3*s;return this.uint16[C+0]=c,this.uint16[C+1]=f,this.uint16[C+2]=y,this.uint16[C+3]=A,this.float32[P+2]=_,s}}Ru.prototype.bytesPerElement=12,He(Ru,"StructArrayLayout4ui1f12");class Jc extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,c,f,y){const A=this.length;return this.resize(A+1),this.emplace(A,s,c,f,y)}emplace(s,c,f,y,A){const _=4*s;return this.uint16[_+0]=c,this.uint16[_+1]=f,this.uint16[_+2]=y,this.uint16[_+3]=A,s}}Jc.prototype.bytesPerElement=8,He(Jc,"StructArrayLayout4ui8");class Vf extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c,f,y,A,_){const C=this.length;return this.resize(C+1),this.emplace(C,s,c,f,y,A,_)}emplace(s,c,f,y,A,_,C){const P=6*s;return this.int16[P+0]=c,this.int16[P+1]=f,this.int16[P+2]=y,this.int16[P+3]=A,this.int16[P+4]=_,this.int16[P+5]=C,s}}Vf.prototype.bytesPerElement=12,He(Vf,"StructArrayLayout6i12");class Qf extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,c,f,y,A,_,C,P,R,w,S,F){const T=this.length;return this.resize(T+1),this.emplace(T,s,c,f,y,A,_,C,P,R,w,S,F)}emplace(s,c,f,y,A,_,C,P,R,w,S,F,T){const L=12*s;return this.int16[L+0]=c,this.int16[L+1]=f,this.int16[L+2]=y,this.int16[L+3]=A,this.uint16[L+4]=_,this.uint16[L+5]=C,this.uint16[L+6]=P,this.uint16[L+7]=R,this.int16[L+8]=w,this.int16[L+9]=S,this.int16[L+10]=F,this.int16[L+11]=T,s}}Qf.prototype.bytesPerElement=24,He(Qf,"StructArrayLayout4i4ui4i24");class eu extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,f,y,A,_){const C=this.length;return this.resize(C+1),this.emplace(C,s,c,f,y,A,_)}emplace(s,c,f,y,A,_,C){const P=10*s,R=5*s;return this.int16[P+0]=c,this.int16[P+1]=f,this.int16[P+2]=y,this.float32[R+2]=A,this.float32[R+3]=_,this.float32[R+4]=C,s}}eu.prototype.bytesPerElement=20,He(eu,"StructArrayLayout3i3f20");class jA extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s){const c=this.length;return this.resize(c+1),this.emplace(c,s)}emplace(s,c){return this.uint32[1*s+0]=c,s}}jA.prototype.bytesPerElement=4,He(jA,"StructArrayLayout1ul4");class ku extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,c){const f=this.length;return this.resize(f+1),this.emplace(f,s,c)}emplace(s,c,f){const y=2*s;return this.uint16[y+0]=c,this.uint16[y+1]=f,s}}ku.prototype.bytesPerElement=4,He(ku,"StructArrayLayout2ui4");class Od extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,c,f,y,A,_,C,P,R,w,S,F,T){const L=this.length;return this.resize(L+1),this.emplace(L,s,c,f,y,A,_,C,P,R,w,S,F,T)}emplace(s,c,f,y,A,_,C,P,R,w,S,F,T,L){const U=20*s,V=10*s;return this.int16[U+0]=c,this.int16[U+1]=f,this.int16[U+2]=y,this.int16[U+3]=A,this.int16[U+4]=_,this.float32[V+3]=C,this.float32[V+4]=P,this.float32[V+5]=R,this.float32[V+6]=w,this.int16[U+14]=S,this.uint32[V+8]=F,this.uint16[U+18]=T,this.uint16[U+19]=L,s}}Od.prototype.bytesPerElement=40,He(Od,"StructArrayLayout5i4f1i1ul2ui40");class uh extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c,f,y,A,_,C){const P=this.length;return this.resize(P+1),this.emplace(P,s,c,f,y,A,_,C)}emplace(s,c,f,y,A,_,C,P){const R=8*s;return this.int16[R+0]=c,this.int16[R+1]=f,this.int16[R+2]=y,this.int16[R+4]=A,this.int16[R+5]=_,this.int16[R+6]=C,this.int16[R+7]=P,s}}uh.prototype.bytesPerElement=16,He(uh,"StructArrayLayout3i2i2i16");class Vs extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c,f,y,A){const _=this.length;return this.resize(_+1),this.emplace(_,s,c,f,y,A)}emplace(s,c,f,y,A,_){const C=4*s,P=8*s;return this.float32[C+0]=c,this.float32[C+1]=f,this.float32[C+2]=y,this.int16[P+6]=A,this.int16[P+7]=_,s}}Vs.prototype.bytesPerElement=16,He(Vs,"StructArrayLayout2f1f2i16");class Dd extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,f,y,A,_){const C=this.length;return this.resize(C+1),this.emplace(C,s,c,f,y,A,_)}emplace(s,c,f,y,A,_,C){const P=20*s,R=5*s;return this.uint8[P+0]=c,this.uint8[P+1]=f,this.float32[R+1]=y,this.float32[R+2]=A,this.float32[R+3]=_,this.float32[R+4]=C,s}}Dd.prototype.bytesPerElement=20,He(Dd,"StructArrayLayout2ub4f20");class ea extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,c,f){const y=this.length;return this.resize(y+1),this.emplace(y,s,c,f)}emplace(s,c,f,y){const A=3*s;return this.uint16[A+0]=c,this.uint16[A+1]=f,this.uint16[A+2]=y,s}}ea.prototype.bytesPerElement=6,He(ea,"StructArrayLayout3ui6");class Em extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s,c,f,y,A,_,C,P,R,w,S,F,T,L,U,V,$,ee,ie,K,ce){const he=this.length;return this.resize(he+1),this.emplace(he,s,c,f,y,A,_,C,P,R,w,S,F,T,L,U,V,$,ee,ie,K,ce)}emplace(s,c,f,y,A,_,C,P,R,w,S,F,T,L,U,V,$,ee,ie,K,ce,he){const Be=30*s,Ne=15*s,Ve=60*s;return this.int16[Be+0]=c,this.int16[Be+1]=f,this.int16[Be+2]=y,this.float32[Ne+2]=A,this.float32[Ne+3]=_,this.uint16[Be+8]=C,this.uint16[Be+9]=P,this.uint32[Ne+5]=R,this.uint32[Ne+6]=w,this.uint32[Ne+7]=S,this.uint16[Be+16]=F,this.uint16[Be+17]=T,this.uint16[Be+18]=L,this.float32[Ne+10]=U,this.float32[Ne+11]=V,this.uint8[Ve+48]=$,this.uint8[Ve+49]=ee,this.uint8[Ve+50]=ie,this.uint32[Ne+13]=K,this.int16[Be+28]=ce,this.uint8[Ve+58]=he,s}}Em.prototype.bytesPerElement=60,He(Em,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class $A extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s,c,f,y,A,_,C,P,R,w,S,F,T,L,U,V,$,ee,ie,K,ce,he,Be,Ne,Ve,Oe,rt,je,ct,yt,Ct,Et){const Pt=this.length;return this.resize(Pt+1),this.emplace(Pt,s,c,f,y,A,_,C,P,R,w,S,F,T,L,U,V,$,ee,ie,K,ce,he,Be,Ne,Ve,Oe,rt,je,ct,yt,Ct,Et)}emplace(s,c,f,y,A,_,C,P,R,w,S,F,T,L,U,V,$,ee,ie,K,ce,he,Be,Ne,Ve,Oe,rt,je,ct,yt,Ct,Et,Pt){const $t=20*s,Lt=40*s,dn=80*s;return this.float32[$t+0]=c,this.float32[$t+1]=f,this.int16[Lt+4]=y,this.int16[Lt+5]=A,this.int16[Lt+6]=_,this.int16[Lt+7]=C,this.int16[Lt+8]=P,this.int16[Lt+9]=R,this.int16[Lt+10]=w,this.int16[Lt+11]=S,this.int16[Lt+12]=F,this.uint16[Lt+13]=T,this.uint16[Lt+14]=L,this.uint16[Lt+15]=U,this.uint16[Lt+16]=V,this.uint16[Lt+17]=$,this.uint16[Lt+18]=ee,this.uint16[Lt+19]=ie,this.uint16[Lt+20]=K,this.uint16[Lt+21]=ce,this.uint16[Lt+22]=he,this.uint16[Lt+23]=Be,this.uint16[Lt+24]=Ne,this.uint16[Lt+25]=Ve,this.uint16[Lt+26]=Oe,this.uint16[Lt+27]=rt,this.uint32[$t+14]=je,this.float32[$t+15]=ct,this.float32[$t+16]=yt,this.float32[$t+17]=Ct,this.float32[$t+18]=Et,this.uint8[dn+76]=Pt,s}}$A.prototype.bytesPerElement=80,He($A,"StructArrayLayout2f9i15ui1ul4f1ub80");class Ud extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s){const c=this.length;return this.resize(c+1),this.emplace(c,s)}emplace(s,c){return this.float32[1*s+0]=c,s}}Ud.prototype.bytesPerElement=4,He(Ud,"StructArrayLayout1f4");class Tl extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,f,y,A){const _=this.length;return this.resize(_+1),this.emplace(_,s,c,f,y,A)}emplace(s,c,f,y,A,_){const C=5*s;return this.float32[C+0]=c,this.float32[C+1]=f,this.float32[C+2]=y,this.float32[C+3]=A,this.float32[C+4]=_,s}}Tl.prototype.bytesPerElement=20,He(Tl,"StructArrayLayout5f20");class Hf extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,f,y,A,_,C){const P=this.length;return this.resize(P+1),this.emplace(P,s,c,f,y,A,_,C)}emplace(s,c,f,y,A,_,C,P){const R=7*s;return this.float32[R+0]=c,this.float32[R+1]=f,this.float32[R+2]=y,this.float32[R+3]=A,this.float32[R+4]=_,this.float32[R+5]=C,this.float32[R+6]=P,s}}Hf.prototype.bytesPerElement=28,He(Hf,"StructArrayLayout7f28");class hh extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,c,f,y){const A=this.length;return this.resize(A+1),this.emplace(A,s,c,f,y)}emplace(s,c,f,y,A){const _=6*s;return this.uint32[3*s+0]=c,this.uint16[_+2]=f,this.uint16[_+3]=y,this.uint16[_+4]=A,s}}hh.prototype.bytesPerElement=12,He(hh,"StructArrayLayout1ul3ui12");class Fc extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s){const c=this.length;return this.resize(c+1),this.emplace(c,s)}emplace(s,c){return this.uint16[1*s+0]=c,s}}Fc.prototype.bytesPerElement=2,He(Fc,"StructArrayLayout1ui2");class Jl extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c){const f=this.length;return this.resize(f+1),this.emplace(f,s,c)}emplace(s,c,f){const y=2*s;return this.float32[y+0]=c,this.float32[y+1]=f,s}}Jl.prototype.bytesPerElement=8,He(Jl,"StructArrayLayout2f8");class ec extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,f,y,A,_,C,P,R,w,S,F,T,L,U,V){const $=this.length;return this.resize($+1),this.emplace($,s,c,f,y,A,_,C,P,R,w,S,F,T,L,U,V)}emplace(s,c,f,y,A,_,C,P,R,w,S,F,T,L,U,V,$){const ee=16*s;return this.float32[ee+0]=c,this.float32[ee+1]=f,this.float32[ee+2]=y,this.float32[ee+3]=A,this.float32[ee+4]=_,this.float32[ee+5]=C,this.float32[ee+6]=P,this.float32[ee+7]=R,this.float32[ee+8]=w,this.float32[ee+9]=S,this.float32[ee+10]=F,this.float32[ee+11]=T,this.float32[ee+12]=L,this.float32[ee+13]=U,this.float32[ee+14]=V,this.float32[ee+15]=$,s}}ec.prototype.bytesPerElement=64,He(ec,"StructArrayLayout16f64");class qh extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,f,y,A,_,C){const P=this.length;return this.resize(P+1),this.emplace(P,s,c,f,y,A,_,C)}emplace(s,c,f,y,A,_,C,P){const R=10*s,w=5*s;return this.uint16[R+0]=c,this.uint16[R+1]=f,this.uint16[R+2]=y,this.uint16[R+3]=A,this.float32[w+2]=_,this.float32[w+3]=C,this.float32[w+4]=P,s}}qh.prototype.bytesPerElement=20,He(qh,"StructArrayLayout4ui3f20");class Nd extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s){const c=this.length;return this.resize(c+1),this.emplace(c,s)}emplace(s,c){return this.int16[1*s+0]=c,s}}Nd.prototype.bytesPerElement=2,He(Nd,"StructArrayLayout1i2");class jf extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(s){const c=this.length;return this.resize(c+1),this.emplace(c,s)}emplace(s,c){return this.uint8[1*s+0]=c,s}}jf.prototype.bytesPerElement=1,He(jf,"StructArrayLayout1ub1");class Xg extends Uf{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Xg.prototype.size=40;class zd extends Od{get(s){return new Xg(this,s)}}He(zd,"CollisionBoxArray");class Wh extends Uf{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(s){this._structArray.uint8[this._pos1+49]=s}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(s){this._structArray.uint8[this._pos1+50]=s}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(s){this._structArray.uint32[this._pos4+13]=s}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(s){this._structArray.uint8[this._pos1+58]=s}}Wh.prototype.size=60;class l0 extends Em{get(s){return new Wh(this,s)}}He(l0,"PlacedSymbolArray");class xb extends Uf{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(s){this._structArray.uint32[this._pos4+14]=s}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(s){this._structArray.float32[this._pos4+18]=s}get hasIconTextFit(){return this._structArray.uint8[this._pos1+76]}}xb.prototype.size=80;class c0 extends $A{get(s){return new xb(this,s)}}He(c0,"SymbolInstanceArray");class Cb extends Ud{getoffsetX(s){return this.float32[1*s+0]}}He(Cb,"GlyphOffsetArray");class Zg extends Lc{getx(s){return this.int16[2*s+0]}gety(s){return this.int16[2*s+1]}}He(Zg,"SymbolLineVertexArray");class Eb extends Uf{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Eb.prototype.size=12;class Bb extends hh{get(s){return new Eb(this,s)}}He(Bb,"FeatureIndexArray");class Sb extends ku{geta_centroid_pos0(s){return this.uint16[2*s+0]}geta_centroid_pos1(s){return this.uint16[2*s+1]}}He(Sb,"FillExtrusionCentroidArray");class Tb extends Uf{get a_join_normal_inside0(){return this._structArray.int16[this._pos2+0]}get a_join_normal_inside1(){return this._structArray.int16[this._pos2+1]}get a_join_normal_inside2(){return this._structArray.int16[this._pos2+2]}}Tb.prototype.size=6;class u0 extends Nf{get(s){return new Tb(this,s)}}He(u0,"FillExtrusionWallArray");const EB=Bi([{name:"a_pos",components:2,type:"Int16"}],4),BB=Bi([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class hs{constructor(s=[]){this.segments=s}_prepareSegment(s,c,f,y){let A=this.segments[this.segments.length-1];return s>hs.MAX_VERTEX_ARRAY_LENGTH&&Jr(`Max vertices per segment is ${hs.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${s}`),(!A||A.vertexLength+s>hs.MAX_VERTEX_ARRAY_LENGTH||A.sortKey!==y)&&(A={vertexOffset:c,primitiveOffset:f,vertexLength:0,primitiveLength:0},y!==void 0&&(A.sortKey=y),this.segments.push(A)),A}prepareSegment(s,c,f,y){return this._prepareSegment(s,c.length,f.length,y)}get(){return this.segments}destroy(){for(const s of this.segments)for(const c in s.vaos)s.vaos[c].destroy()}static simpleSegment(s,c,f,y){return new hs([{vertexOffset:s,primitiveOffset:c,vertexLength:f,primitiveLength:y,vaos:{},sortKey:0}])}}function Ib(d,s){return 256*(d=_n(Math.floor(d),0,255))+_n(Math.floor(s),0,255)}hs.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,He(hs,"SegmentVector");const SB=Bi([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),TB=Bi([{name:"a_dash",components:4,type:"Uint16"}]);class Bm{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(s,c,f,y){this.ids.push(Pb(s)),this.positions.push(c,f,y)}eachPosition(s,c){const f=Pb(s);let y=0,A=this.ids.length-1;for(;y<A;){const _=y+A>>1;this.ids[_]>=f?A=_:y=_+1}for(;this.ids[y]===f;)c(this.positions[3*y],this.positions[3*y+1],this.positions[3*y+2]),y++}static serialize(s,c){const f=new Float64Array(s.ids),y=new Uint32Array(s.positions);return GA(f,y,0,f.length-1),c&&(c.add(f.buffer),c.add(y.buffer)),{ids:f,positions:y}}static deserialize(s){const c=new Bm;let f;c.ids=s.ids,c.positions=s.positions;for(const y of c.ids)y!==f&&c.uniqueIds.push(y),f=y;return c.indexed=!0,c}}function Pb(d){const s=+d;return!isNaN(s)&&Number.MIN_SAFE_INTEGER<=s&&s<=Number.MAX_SAFE_INTEGER?s:cs(String(d))}function GA(d,s,c,f){for(;c<f;){const y=d[c+f>>1];let A=c-1,_=f+1;for(;;){do A++;while(d[A]<y);do _--;while(d[_]>y);if(A>=_)break;Yg(d,A,_),Yg(s,3*A,3*_),Yg(s,3*A+1,3*_+1),Yg(s,3*A+2,3*_+2)}_-c<f-_?(GA(d,s,c,_),c=_+1):(GA(d,s,_+1,f),f=_)}}function Yg(d,s,c){const f=d[s];d[s]=d[c],d[c]=f}He(Bm,"FeaturePositionMap");class Xh{constructor(s){this.gl=s.gl,this.initialized=!1}fetchUniformLocation(s,c){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(s,c),this.initialized=!0),!!this.location}set(s,c,f){throw new Error("Uniform#set() must be implemented by each concrete Uniform")}}class $f extends Xh{constructor(s){super(s),this.current=0}set(s,c,f){this.fetchUniformLocation(s,c)&&this.current!==f&&(this.current=f,this.gl.uniform1i(this.location,f))}}class fl extends Xh{constructor(s){super(s),this.current=0}set(s,c,f){this.fetchUniformLocation(s,c)&&this.current!==f&&(this.current=f,this.gl.uniform1f(this.location,f))}}class dh extends Xh{constructor(s){super(s),this.current=[0,0]}set(s,c,f){this.fetchUniformLocation(s,c)&&(f[0]===this.current[0]&&f[1]===this.current[1]||(this.current=f,this.gl.uniform2f(this.location,f[0],f[1])))}}class h0 extends Xh{constructor(s){super(s),this.current=[0,0,0]}set(s,c,f){this.fetchUniformLocation(s,c)&&(f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]||(this.current=f,this.gl.uniform3f(this.location,f[0],f[1],f[2])))}}class Jg extends Xh{constructor(s){super(s),this.current=[0,0,0,0]}set(s,c,f){this.fetchUniformLocation(s,c)&&(f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]&&f[3]===this.current[3]||(this.current=f,this.gl.uniform4f(this.location,f[0],f[1],f[2],f[3])))}}class d0 extends Xh{constructor(s){super(s),this.current=_i.transparent.toRenderColor(null)}set(s,c,f){this.fetchUniformLocation(s,c)&&(f.r===this.current.r&&f.g===this.current.g&&f.b===this.current.b&&f.a===this.current.a||(this.current=f,this.gl.uniform4f(this.location,f.r,f.g,f.b,f.a)))}}const Lb=new Float32Array(16);class Sm extends Xh{constructor(s){super(s),this.current=Lb}set(s,c,f){if(this.fetchUniformLocation(s,c)){if(f[12]!==this.current[12]||f[0]!==this.current[0])return this.current=f,void this.gl.uniformMatrix4fv(this.location,!1,f);for(let y=1;y<16;y++)if(f[y]!==this.current[y]){this.current=f,this.gl.uniformMatrix4fv(this.location,!1,f);break}}}}const IB=new Float32Array(9),PB=new Float32Array(4);class f0 extends Xh{constructor(s){super(s),this.current=PB}set(s,c,f){if(this.fetchUniformLocation(s,c)){for(let y=0;y<4;y++)if(f[y]!==this.current[y]){this.current=f,this.gl.uniformMatrix2fv(this.location,!1,f);break}}}}function A0(d){return[Ib(255*d.r,255*d.g),Ib(255*d.b,255*d.a)]}class Tm{constructor(s,c,f,y){this.value=s,this.uniformNames=c.map(A=>`u_${A}`),this.type=f,this.context=y}setUniform(s,c,f,y,A){const _=y.constantOr(this.value);c.set(s,A,_ instanceof _i?_.toRenderColor(this.context.lut):_)}getBinding(s,c){return this.type==="color"?new d0(s):new fl(s)}}class KA{constructor(s,c){this.uniformNames=c.map(f=>`u_${f}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(s){this.pixelRatio=s.pixelRatio||1,this.pattern=s.tl.concat(s.br)}setUniform(s,c,f,y,A){const _=A==="u_pattern"||A==="u_dash"?this.pattern:A==="u_pixel_ratio"?this.pixelRatio:null;_&&c.set(s,A,_)}getBinding(s,c){return c==="u_pattern"||c==="u_dash"?new Jg(s):new fl(s)}}class fh{constructor(s,c,f,y){this.expression=s,this.type=f,this.maxValue=0,this.paintVertexAttributes=c.map(A=>({name:`a_${A}`,type:"Float32",components:f==="color"?2:1,offset:0})),this.paintVertexArray=new y}populatePaintArray(s,c,f,y,A,_,C){const P=this.paintVertexArray.length,R=this.expression.evaluate(new Oi(0,{brightness:_}),c,{},A,y,C);this.paintVertexArray.resize(s),this._setPaintValue(P,s,R,this.context)}updatePaintArray(s,c,f,y,A,_,C){const P=this.expression.evaluate({zoom:0,brightness:C},f,y,void 0,A);this._setPaintValue(s,c,P,this.context)}_setPaintValue(s,c,f,y){if(this.type==="color"){const A=A0(f.toRenderColor(y.lut));for(let _=s;_<c;_++)this.paintVertexArray.emplace(_,A[0],A[1])}else{for(let A=s;A<c;A++)this.paintVertexArray.emplace(A,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Rc{constructor(s,c,f,y,A,_){this.expression=s,this.uniformNames=c.map(C=>`u_${C}_t`),this.type=f,this.useIntegerZoom=y,this.context=A,this.maxValue=0,this.paintVertexAttributes=c.map(C=>({name:`a_${C}`,type:"Float32",components:f==="color"?4:2,offset:0})),this.paintVertexArray=new _}populatePaintArray(s,c,f,y,A,_,C){const P=this.expression.evaluate(new Oi(this.context.zoom,{brightness:_}),c,{},A,y,C),R=this.expression.evaluate(new Oi(this.context.zoom+1,{brightness:_}),c,{},A,y,C),w=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValue(w,s,P,R,this.context)}updatePaintArray(s,c,f,y,A,_,C){const P=this.expression.evaluate({zoom:this.context.zoom,brightness:C},f,y,void 0,A),R=this.expression.evaluate({zoom:this.context.zoom+1,brightness:C},f,y,void 0,A);this._setPaintValue(s,c,P,R,this.context)}_setPaintValue(s,c,f,y,A){if(this.type==="color"){const _=A0(f.toRenderColor(A.lut)),C=A0(f.toRenderColor(A.lut));for(let P=s;P<c;P++)this.paintVertexArray.emplace(P,_[0],_[1],C[0],C[1])}else{for(let _=s;_<c;_++)this.paintVertexArray.emplace(_,f,y);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(y))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(s,c,f,y,A){const _=this.useIntegerZoom?Math.floor(f.zoom):f.zoom,C=_n(this.expression.interpolationFactor(_,this.context.zoom,this.context.zoom+1),0,1);c.set(s,A,C)}getBinding(s,c){return new fl(s)}}class Ah{constructor(s,c,f,y,A){this.expression=s,this.layerId=A,this.paintVertexAttributes=(f==="array"?TB:SB).members;for(let _=0;_<c.length;++_);this.paintVertexArray=new y}populatePaintArray(s,c,f,y){const A=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValues(A,s,c.patterns&&c.patterns[this.layerId],f)}updatePaintArray(s,c,f,y,A,_,C){this._setPaintValues(s,c,f.patterns&&f.patterns[this.layerId],_)}_setPaintValues(s,c,f,y){if(!y||!f)return;const A=y[f];if(!A)return;const{tl:_,br:C,pixelRatio:P}=A;for(let R=s;R<c;R++)this.paintVertexArray.emplace(R,_[0],_[1],C[0],C[1],P)}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Gf{constructor(s,c,f=()=>!0){this.binders={},this._buffers=[],this.context=c;const y=[];for(const A in s.paint._values){const _=s.paint.get(A);if(!f(A)||!(_ instanceof ba&&ah(_.property.specification)))continue;const C=FB(A,s.type),P=_.value,R=_.property.specification.type,w=!!_.property.useIntegerZoom,S=A==="line-dasharray"||A.endsWith("pattern"),F=A==="line-dasharray"&&s.layout.get("line-cap").value.kind!=="constant";if(P.kind!=="constant"||F)if(P.kind==="source"||F||S){const T=m(A,R,"source");this.binders[A]=S?new Ah(P,C,R,T,s.id):new fh(P,C,R,T),y.push(`/a_${A}`)}else{const T=m(A,R,"composite");this.binders[A]=new Rc(P,C,R,w,c,T),y.push(`/z_${A}`)}else this.binders[A]=S?new KA(P.value,C):new Tm(P.value,C,R,c),y.push(`/u_${A}`)}this.cacheKey=y.sort().join("")}getMaxValue(s){const c=this.binders[s];return c instanceof fh||c instanceof Rc?c.maxValue:0}populatePaintArrays(s,c,f,y,A,_,C){for(const P in this.binders){const R=this.binders[P];R.context=this.context,(R instanceof fh||R instanceof Rc||R instanceof Ah)&&R.populatePaintArray(s,c,f,y,A,_,C)}}setConstantPatternPositions(s){for(const c in this.binders){const f=this.binders[c];f instanceof KA&&f.setConstantPatternPositions(s)}}updatePaintArrays(s,c,f,y,A,_,C,P){let R=!1;const w=Object.keys(s),S=w.length!==0,F=S?w:c.uniqueIds;this.context.lut=A.lut;for(const T in this.binders){const L=this.binders[T];if(L.context=this.context,(L instanceof fh||L instanceof Rc||L instanceof Ah)&&(L.expression.isStateDependent===!0||L.expression.isLightConstant===!1)){const U=A.paint.get(T);L.expression=U.value;for(const V of F){const $=s[V.toString()];c.eachPosition(V,(ee,ie,K)=>{const ce=y.feature(ee);L.updatePaintArray(ie,K,ce,$,_,C,P)})}if(!S)for(const V of f.uniqueIds){const $=s[V.toString()];f.eachPosition(V,(ee,ie,K)=>{const ce=y.feature(ee);L.updatePaintArray(ie,K,ce,$,_,C,P)})}R=!0}}return R}defines(){const s=[];for(const c in this.binders){const f=this.binders[c];(f instanceof Tm||f instanceof KA)&&s.push(...f.uniformNames.map(y=>`#define HAS_UNIFORM_${y}`))}return s}getBinderAttributes(){const s=[];for(const c in this.binders){const f=this.binders[c];if(f instanceof fh||f instanceof Rc||f instanceof Ah)for(let y=0;y<f.paintVertexAttributes.length;y++)s.push(f.paintVertexAttributes[y].name)}return s}getBinderUniforms(){const s=[];for(const c in this.binders){const f=this.binders[c];if(f instanceof Tm||f instanceof KA||f instanceof Rc)for(const y of f.uniformNames)s.push(y)}return s}getPaintVertexBuffers(){return this._buffers}getUniforms(s){const c=[];for(const f in this.binders){const y=this.binders[f];if(y instanceof Tm||y instanceof KA||y instanceof Rc)for(const A of y.uniformNames)c.push({name:A,property:f,binding:y.getBinding(s,A)})}return c}setUniforms(s,c,f,y,A){for(const{name:_,property:C,binding:P}of f)this.binders[C].setUniform(s,P,A,y.get(C),_)}updatePaintBuffers(){this._buffers=[];for(const s in this.binders){const c=this.binders[s];(c instanceof fh||c instanceof Rc||c instanceof Ah)&&c.paintVertexBuffer&&this._buffers.push(c.paintVertexBuffer)}}upload(s){for(const c in this.binders){const f=this.binders[c];(f instanceof fh||f instanceof Rc||f instanceof Ah)&&f.upload(s)}this.updatePaintBuffers()}destroy(){for(const s in this.binders){const c=this.binders[s];(c instanceof fh||c instanceof Rc||c instanceof Ah)&&c.destroy()}}}class Vd{constructor(s,c,f=()=>!0){this.programConfigurations={};for(const y of s)this.programConfigurations[y.id]=new Gf(y,c,f);this.needsUpload=!1,this._featureMap=new Bm,this._featureMapWithoutIds=new Bm,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(s,c,f,y,A,_,C,P){for(const R in this.programConfigurations)this.programConfigurations[R].populatePaintArrays(s,c,y,A,_,C,P);c.id!==void 0?this._featureMap.add(c.id,f,this._bufferOffset,s):(this._featureMapWithoutIds.add(this._idlessCounter,f,this._bufferOffset,s),this._idlessCounter+=1),this._bufferOffset=s,this.needsUpload=!0}updatePaintArrays(s,c,f,y,A,_){for(const C of f)this.needsUpload=this.programConfigurations[C.id].updatePaintArrays(s,this._featureMap,this._featureMapWithoutIds,c,C,y,A,_||0)||this.needsUpload}get(s){return this.programConfigurations[s]}upload(s){if(this.needsUpload){for(const c in this.programConfigurations)this.programConfigurations[c].upload(s);this.needsUpload=!1}}destroy(){for(const s in this.programConfigurations)this.programConfigurations[s].destroy()}}const LB={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-occlusion-opacity":["occlusion_opacity"],"icon-occlusion-opacity":["occlusion_opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"symbol-z-offset":["z_offset"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function FB(d,s){return LB[d]||[d.replace(`${s}-`,"").replace(/-/g,"_")]}const RB={"line-pattern":{source:Ru,composite:Ru},"fill-pattern":{source:Ru,composite:Ru},"fill-extrusion-pattern":{source:Ru,composite:Ru},"line-dasharray":{source:Jc,composite:Jc}},Fb={color:{source:Jl,composite:Sl},number:{source:Ud,composite:Jl}};function m(d,s,c){const f=RB[d];return f&&f[c]||Fb[s][c]}He(Tm,"ConstantBinder"),He(KA,"PatternConstantBinder"),He(fh,"SourceExpressionBinder"),He(Ah,"PatternCompositeBinder"),He(Rc,"CompositeExpressionBinder"),He(Gf,"ProgramConfiguration",{omit:["_buffers"]}),He(Vd,"ProgramConfigurationSet");const a=Nn/Math.PI/2,u=5,g=6,v=16383,x=64,B=[x,32,16],k=-a,z=a;function Q(d,s,c,f=a){return c=zt(c),[d*Math.sin(c)*f,-s*f,d*Math.cos(c)*f]}function j(d,s,c){return Q(Math.cos(zt(d)),Math.sin(zt(d)),s,c)}const W=63710088e-1,J=2*Math.PI*W;class re{constructor(s,c){if(isNaN(s)||isNaN(c))throw new Error(`Invalid LngLat object: (${s}, ${c})`);if(this.lng=+s,this.lat=+c,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new re(ar(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(s){const c=Math.PI/180,f=this.lat*c,y=s.lat*c,A=Math.sin(f)*Math.sin(y)+Math.cos(f)*Math.cos(y)*Math.cos((s.lng-this.lng)*c);return W*Math.acos(Math.min(A,1))}toBounds(s=0){const c=360*s/40075017,f=c/Math.cos(Math.PI/180*this.lat);return new de({lng:this.lng-f,lat:this.lat-c},{lng:this.lng+f,lat:this.lat+c})}toEcef(s){return j(this.lat,this.lng,a+s*a/W)}static convert(s){if(s instanceof re)return s;if(Array.isArray(s)&&(s.length===2||s.length===3))return new re(Number(s[0]),Number(s[1]));if(!Array.isArray(s)&&typeof s=="object"&&s!==null)return new re(Number("lng"in s?s.lng:s.lon),Number(s.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class de{constructor(s,c){if(s)if(c)this.setSouthWest(s).setNorthEast(c);else if(s.length===4){const f=s;this.setSouthWest([f[0],f[1]]).setNorthEast([f[2],f[3]])}else{const f=s;this.setSouthWest(f[0]).setNorthEast(f[1])}}setNorthEast(s){return this._ne=s instanceof re?new re(s.lng,s.lat):re.convert(s),this}setSouthWest(s){return this._sw=s instanceof re?new re(s.lng,s.lat):re.convert(s),this}extend(s){const c=this._sw,f=this._ne;let y,A;if(s instanceof re)y=s,A=s;else{if(!(s instanceof de))return Array.isArray(s)?s.length===4||s.every(Array.isArray)?this.extend(de.convert(s)):this.extend(re.convert(s)):typeof s=="object"&&s!==null&&s.hasOwnProperty("lat")&&(s.hasOwnProperty("lon")||s.hasOwnProperty("lng"))?this.extend(re.convert(s)):this;if(y=s._sw,A=s._ne,!y||!A)return this}return c||f?(c.lng=Math.min(y.lng,c.lng),c.lat=Math.min(y.lat,c.lat),f.lng=Math.max(A.lng,f.lng),f.lat=Math.max(A.lat,f.lat)):(this._sw=new re(y.lng,y.lat),this._ne=new re(A.lng,A.lat)),this}getCenter(){return new re((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new re(this.getWest(),this.getNorth())}getSouthEast(){return new re(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(s){const{lng:c,lat:f}=re.convert(s);let y=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&y}static convert(s){if(s)return s instanceof de?s:new de(s)}}const me=0,_e=25.5;function xe(d){return J*Math.cos(d*Math.PI/180)}function ze(d){return(180+d)/360}function Qe(d){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360)))/360}function Ue(d,s){return d/xe(s)}function Xe(d){return 360*d-180}function qe(d){return 360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90}function ut(d,s){return d*xe(qe(s))}const it=85.051129;function ht(d){return Math.cos(zt(_n(d,-it,it)))}function xt(d,s){const c=_n(s,me,_e),f=Math.pow(2,c);return ht(d)*J/(512*f)}function pt(d){return 1/Math.cos(d*Math.PI/180)}function At(d,s=0){const c=Math.exp(Math.PI*(1-(d.y+s/Nn)/(1<<d.z)*2));return 80150034*c/(c*c+1)/Nn/(1<<d.z)}class Rt{constructor(s,c,f=0){this.x=+s,this.y=+c,this.z=+f}static fromLngLat(s,c=0){const f=re.convert(s);return new Rt(ze(f.lng),Qe(f.lat),Ue(c,f.lat))}toLngLat(){return new re(Xe(this.x),qe(this.y))}toAltitude(){return ut(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/J*pt(qe(this.y))}}function cn(d,s,c,f,y,A,_,C,P){const R=(s+f)/2,w=(c+y)/2,S=new Fe(R,w);C(S),function(F,T,L,U,V,$){const ee=L-V,ie=U-$;return Math.abs((U-T)*ee-(L-F)*ie)/Math.hypot(ee,ie)}(S.x,S.y,A.x,A.y,_.x,_.y)>=P?(cn(d,s,c,R,w,A,S,C,P),cn(d,R,w,f,y,S,_,C,P)):d.push(_)}function wn(d,s,c){let f=d[0],y=f.x,A=f.y;s(f);const _=[f];for(let C=1;C<d.length;C++){const P=d[C],{x:R,y:w}=P;s(P),cn(_,y,A,R,w,f,P,s,c),y=R,A=w,f=P}return _}function ln(d,s,c,f){if(f(s,c)){const y=s.add(c)._mult(.5);ln(d,s,y,f),ln(d,y,c,f)}else d.push(c)}function Ln(d,s){let c=d[0];const f=[c];for(let y=1;y<d.length;y++){const A=d[y];ln(f,c,A,s),c=A}return f}const kt=Math.pow(2,14)-1,mn=-kt-1;function An(d,s){const c=Math.round(d.x*s),f=Math.round(d.y*s);return d.x=_n(c,mn,kt),d.y=_n(f,mn,kt),(c<d.x||c>d.x+1||f<d.y||f>d.y+1)&&Jr("Geometry exceeds allowed extent, reduce your vector tile buffer size"),d}function Rn(d,s,c){const f=d.loadGeometry(),y=d.extent,A=Nn/y;if(s&&c&&c.projection.isReprojectedInTileSpace){const _=1<<s.z,{scale:C,x:P,y:R,projection:w}=c,S=F=>{const T=Xe((s.x+F.x/y)/_),L=qe((s.y+F.y/y)/_),U=w.project(T,L);F.x=(U.x*C-P)*y,F.y=(U.y*C-R)*y};for(let F=0;F<f.length;F++)if(d.type!==1)f[F]=wn(f[F],S,1);else{const T=[];for(const L of f[F])L.x<0||L.x>=y||L.y<0||L.y>=y||(S(L),T.push(L));f[F]=T}}for(const _ of f)for(const C of _)An(C,A);return f}function Mn(d,s){return{type:d.type,id:d.id,properties:d.properties,geometry:s?Rn(d):[]}}function bn(d,s,c,f,y){d.emplaceBack(2*s+(f+1)/2,2*c+(y+1)/2)}function Cn(d,s,c){d.emplaceBack(s.x,s.y,s.z,c[0]*16384,c[1]*16384,c[2]*16384)}class vr{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(c=>c.fqid),this.index=s.index,this.hasPattern=!1,this.projection=s.projection,this.layoutVertexArray=new Lc,this.indexArray=new ea,this.segments=new hs,this.programConfigurations=new Vd(s.layers,{zoom:s.zoom,lut:s.lut}),this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}updateFootprints(s,c){}populate(s,c,f,y){const A=this.layers[0],_=[];let C=null;A.type==="circle"&&(C=A.layout.get("circle-sort-key"));for(const{feature:R,id:w,index:S,sourceLayerIndex:F}of s){const T=this.layers[0]._featureFilter.needGeometry,L=Mn(R,T);if(!this.layers[0]._featureFilter.filter(new Oi(this.zoom),L,f))continue;const U=C?C.evaluate(L,{},f):void 0,V={id:w,properties:R.properties,type:R.type,sourceLayerIndex:F,index:S,geometry:T?L.geometry:Rn(R,f,y),patterns:{},sortKey:U};_.push(V)}C&&_.sort((R,w)=>R.sortKey-w.sortKey);let P=null;y.projection.name==="globe"&&(this.globeExtVertexArray=new Vf,P=y.projection);for(const R of _){const{geometry:w,index:S,sourceLayerIndex:F}=R,T=s[S].feature;this.addFeature(R,w,S,c.availableImages,f,P,c.brightness),c.featureIndex.insert(T,w,S,F,this.index)}}update(s,c,f,y,A){const _=Object.keys(s).length!==0;_&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(s,c,_?this.stateDependentLayers:this.layers,f,y,A)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,EB.members),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=s.createVertexBuffer(this.globeExtVertexArray,BB.members))),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(s,c,f,y,A,_,C){for(const P of c)for(const R of P){const w=R.x,S=R.y;if(w<0||w>=Nn||S<0||S>=Nn)continue;if(_){const L=_.projectTilePoint(w,S,A),U=_.upVector(A,w,S),V=this.globeExtVertexArray;Cn(V,L,U),Cn(V,L,U),Cn(V,L,U),Cn(V,L,U)}const F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,s.sortKey),T=F.vertexLength;bn(this.layoutVertexArray,w,S,-1,-1),bn(this.layoutVertexArray,w,S,1,-1),bn(this.layoutVertexArray,w,S,1,1),bn(this.layoutVertexArray,w,S,-1,1),this.indexArray.emplaceBack(T,T+1,T+2),this.indexArray.emplaceBack(T,T+2,T+3),F.vertexLength+=4,F.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,f,{},y,A,C)}}function Qn(d,s){for(let c=0;c<d.length;c++)if(So(s,d[c]))return!0;for(let c=0;c<s.length;c++)if(So(d,s[c]))return!0;return!!Sr(d,s)}function rr(d,s,c){return!!So(d,s)||!!qr(s,d,c)}function Rr(d,s){if(d.length===1)return oo(s,d[0]);for(let c=0;c<s.length;c++){const f=s[c];for(let y=0;y<f.length;y++)if(So(d,f[y]))return!0}for(let c=0;c<d.length;c++)if(oo(s,d[c]))return!0;for(let c=0;c<s.length;c++)if(Sr(d,s[c]))return!0;return!1}function fr(d,s,c){if(d.length>1){if(Sr(d,s))return!0;for(let f=0;f<s.length;f++)if(qr(s[f],d,c))return!0}for(let f=0;f<d.length;f++)if(qr(d[f],s,c))return!0;return!1}function Sr(d,s){if(d.length===0||s.length===0)return!1;for(let c=0;c<d.length-1;c++){const f=d[c],y=d[c+1];for(let A=0;A<s.length-1;A++)if(Yr(f,y,s[A],s[A+1]))return!0}return!1}function Yr(d,s,c,f){return Xi(d,c,f)!==Xi(s,c,f)&&Xi(d,s,c)!==Xi(d,s,f)}function qr(d,s,c){const f=c*c;if(s.length===1)return d.distSqr(s[0])<f;for(let y=1;y<s.length;y++)if(ji(d,s[y-1],s[y])<f)return!0;return!1}function ji(d,s,c){const f=s.distSqr(c);if(f===0)return d.distSqr(s);const y=((d.x-s.x)*(c.x-s.x)+(d.y-s.y)*(c.y-s.y))/f;return d.distSqr(y<0?s:y>1?c:c.sub(s)._mult(y)._add(s))}function oo(d,s){let c,f,y,A=!1;for(let _=0;_<d.length;_++){c=d[_];for(let C=0,P=c.length-1;C<c.length;P=C++)f=c[C],y=c[P],f.y>s.y!=y.y>s.y&&s.x<(y.x-f.x)*(s.y-f.y)/(y.y-f.y)+f.x&&(A=!A)}return A}function So(d,s){let c=!1;for(let f=0,y=d.length-1;f<d.length;y=f++){const A=d[f],_=d[y];A.y>s.y!=_.y>s.y&&s.x<(_.x-A.x)*(s.y-A.y)/(_.y-A.y)+A.x&&(c=!c)}return c}function tu(d,s,c,f,y){for(const _ of d)if(s<=_.x&&c<=_.y&&f>=_.x&&y>=_.y)return!0;const A=[new Fe(s,c),new Fe(s,y),new Fe(f,y),new Fe(f,c)];if(d.length>2){for(const _ of A)if(So(d,_))return!0}for(let _=0;_<d.length-1;_++)if(Bs(d[_],d[_+1],A))return!0;return!1}function Bs(d,s,c){const f=c[0],y=c[2];if(d.x<f.x&&s.x<f.x||d.x>y.x&&s.x>y.x||d.y<f.y&&s.y<f.y||d.y>y.y&&s.y>y.y)return!1;const A=Xi(d,s,c[0]);return A!==Xi(d,s,c[1])||A!==Xi(d,s,c[2])||A!==Xi(d,s,c[3])}function ci(d,s,c,f,y,A){let _=s.y-d.y,C=d.x-s.x;if(A=A||0){const P=_*_+C*C;if(P===0)return!0;const R=Math.sqrt(P);_/=R,C/=R}return!((c.x-d.x)*_+(c.y-d.y)*C-A<0||(f.x-d.x)*_+(f.y-d.y)*C-A<0||(y.x-d.x)*_+(y.y-d.y)*C-A<0)}function eo(d,s,c,f,y,A,_){return!(ci(d,s,f,y,A,_)||ci(s,c,f,y,A,_)||ci(c,d,f,y,A,_)||ci(f,y,d,s,c,_)||ci(y,A,d,s,c,_)||ci(A,f,d,s,c,_))}function Xo(d,s,c){const f=s.paint.get(d).value;return f.kind==="constant"?f.value:c.programConfigurations.get(s.id).getMaxValue(d)}function Ki(d){return Math.sqrt(d[0]*d[0]+d[1]*d[1])}function Xr(d,s,c,f,y){if(!s[0]&&!s[1])return d;const A=Fe.convert(s)._mult(y);c==="viewport"&&A._rotate(-f);const _=[];for(let C=0;C<d.length;C++)_.push(d[C].sub(A));return _}function Ii(d,s,c,f){const y=Fe.convert(d)._mult(f);return s==="viewport"&&y._rotate(-c),y}let Qi,ds;He(vr,"CircleBucket",{omit:["layers"]});var Ss,bi={exports:{}},ta=(Ss||(Ss=1,function(d,s){(function(c){function f(A,_,C){var P=y(256*A,256*(_=Math.pow(2,C)-_-1),C),R=y(256*(A+1),256*(_+1),C);return P[0]+","+P[1]+","+R[0]+","+R[1]}function y(A,_,C){var P=2*Math.PI*6378137/256/Math.pow(2,C);return[A*P-2*Math.PI*6378137/2,_*P-2*Math.PI*6378137/2]}c.getURL=function(A,_,C,P,R,w){return w=w||{},A+"?"+["bbox="+f(C,P,R),"format="+(w.format||"image/png"),"service="+(w.service||"WMS"),"version="+(w.version||"1.1.1"),"request="+(w.request||"GetMap"),"srs="+(w.srs||"EPSG:3857"),"width="+(w.width||256),"height="+(w.height||256),"layers="+_].join("&")},c.getTileBBox=f,c.getMercCoords=y,Object.defineProperty(c,"__esModule",{value:!0})})(s)}(0,bi.exports)),bi.exports);class Aa{constructor(s,c,f){this.z=s,this.x=c,this.y=f,this.key=Il(0,s,s,c,f)}equals(s){return this.z===s.z&&this.x===s.x&&this.y===s.y}url(s,c){const f=ta.getTileBBox(this.x,this.y,this.z),y=function(A,_,C){let P,R="";for(let w=A;w>0;w--)P=1<<w-1,R+=(_&P?1:0)+(C&P?2:0);return R}(this.z,this.x,this.y);return s[(this.x+this.y)%s.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(c==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",y).replace("{bbox-epsg-3857}",f)}toString(){return`${this.z}/${this.x}/${this.y}`}}class na{constructor(s,c){this.wrap=s,this.canonical=c,this.key=Il(s,c.z,c.z,c.x,c.y)}}class vo{constructor(s,c,f,y,A){this.overscaledZ=s,this.wrap=c,this.canonical=new Aa(f,+y,+A),this.key=c===0&&s===f?this.canonical.key:Il(c,s,f,y,A)}equals(s){return this.overscaledZ===s.overscaledZ&&this.wrap===s.wrap&&this.canonical.equals(s.canonical)}scaledTo(s){const c=this.canonical.z-s;return s>this.canonical.z?new vo(s,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new vo(s,this.wrap,s,this.canonical.x>>c,this.canonical.y>>c)}calculateScaledKey(s,c=!0){if(this.overscaledZ===s&&c)return this.key;if(s>this.canonical.z)return Il(this.wrap*+c,s,this.canonical.z,this.canonical.x,this.canonical.y);{const f=this.canonical.z-s;return Il(this.wrap*+c,s,s,this.canonical.x>>f,this.canonical.y>>f)}}isChildOf(s){if(s.wrap!==this.wrap)return!1;const c=this.canonical.z-s.canonical.z;return s.overscaledZ===0||s.overscaledZ<this.overscaledZ&&s.canonical.z<this.canonical.z&&s.canonical.x===this.canonical.x>>c&&s.canonical.y===this.canonical.y>>c}children(s){if(this.overscaledZ>=s)return[new vo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const c=this.canonical.z+1,f=2*this.canonical.x,y=2*this.canonical.y;return[new vo(c,this.wrap,c,f,y),new vo(c,this.wrap,c,f+1,y),new vo(c,this.wrap,c,f,y+1),new vo(c,this.wrap,c,f+1,y+1)]}isLessThan(s){return this.wrap<s.wrap||!(this.wrap>s.wrap)&&(this.overscaledZ<s.overscaledZ||!(this.overscaledZ>s.overscaledZ)&&(this.canonical.x<s.canonical.x||!(this.canonical.x>s.canonical.x)&&this.canonical.y<s.canonical.y))}wrapped(){return new vo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(s){return new vo(this.overscaledZ,s,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new na(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Il(d,s,c,f,y){const A=1<<Math.min(c,22);let _=A*(y%A)+f%A;return d&&c<22&&(_+=A*A*((d<0?-2*d-1:2*d)%(1<<2*(22-c)))),16*(32*_+c)+(s-c)}const Pl=[d=>{let s=d.canonical.x-1,c=d.wrap;return s<0&&(s=(1<<d.canonical.z)-1,c--),new vo(d.overscaledZ,c,d.canonical.z,s,d.canonical.y)},d=>{let s=d.canonical.x+1,c=d.wrap;return s===1<<d.canonical.z&&(s=0,c++),new vo(d.overscaledZ,c,d.canonical.z,s,d.canonical.y)},d=>new vo(d.overscaledZ,d.wrap,d.canonical.z,d.canonical.x,(d.canonical.y===0?1<<d.canonical.z:d.canonical.y)-1),d=>new vo(d.overscaledZ,d.wrap,d.canonical.z,d.canonical.x,d.canonical.y===(1<<d.canonical.z)-1?0:d.canonical.y+1)];He(Aa,"CanonicalTileID"),He(vo,"OverscaledTileID",{omit:["projMatrix","expandedProjMatrix"]});const nu=Bi([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:kc}=nu,tc=Bi([{name:"a_pos_3",components:3,type:"Int16"}]);var ru=Bi([{name:"a_pos",type:"Int16",components:2}]);class Zh{constructor(s,c){this.pos=s,this.dir=c}intersectsPlane(s,c,f){const y=De.vec3.dot(c,this.dir);if(Math.abs(y)<1e-6)return!1;const A=((s[0]-this.pos[0])*c[0]+(s[1]-this.pos[1])*c[1]+(s[2]-this.pos[2])*c[2])/y;return f[0]=this.pos[0]+this.dir[0]*A,f[1]=this.pos[1]+this.dir[1]*A,f[2]=this.pos[2]+this.dir[2]*A,!0}closestPointOnSphere(s,c,f){if(De.vec3.equals(this.pos,s)||c===0)return f[0]=f[1]=f[2]=0,!1;const[y,A,_]=this.dir,C=this.pos[0]-s[0],P=this.pos[1]-s[1],R=this.pos[2]-s[2],w=y*y+A*A+_*_,S=2*(C*y+P*A+R*_),F=S*S-4*w*(C*C+P*P+R*R-c*c);if(F<0){const T=Math.max(-S/2,0),L=C+y*T,U=P+A*T,V=R+_*T,$=Math.hypot(L,U,V);return f[0]=L*c/$,f[1]=U*c/$,f[2]=V*c/$,!1}{const T=(-S-Math.sqrt(F))/(2*w);if(T<0){const L=Math.hypot(C,P,R);return f[0]=C*c/L,f[1]=P*c/L,f[2]=R*c/L,!1}return f[0]=C+y*T,f[1]=P+A*T,f[2]=R+_*T,!0}}}class Qd{constructor(s,c,f,y,A){this.TL=s,this.TR=c,this.BR=f,this.BL=y,this.horizon=A}static fromInvProjectionMatrix(s,c,f){const y=[-1,1,1],A=[1,1,1],_=[1,-1,1],C=[-1,-1,1],P=De.vec3.transformMat4(y,y,s),R=De.vec3.transformMat4(A,A,s),w=De.vec3.transformMat4(_,_,s),S=De.vec3.transformMat4(C,C,s);return new Qd(P,R,w,S,c/f)}}function ph(d,s,c){let f=1/0,y=-1/0;const A=[];for(const _ of d){De.vec3.sub(A,_,s);const C=De.vec3.dot(A,c);f=Math.min(f,C),y=Math.max(y,C)}return[f,y]}function qA(d,s){let c=!0;for(let f=0;f<d.planes.length;f++){const y=d.planes[f];let A=0;for(let _=0;_<s.length;_++)A+=De.vec3.dot(y,s[_])+y[3]>=0;if(A===0)return 0;A!==s.length&&(c=!1)}return c?2:1}function WA(d,s){for(const c of d.projections){const f=ph(s,d.points[0],c.axis);if(c.projection[1]<f[0]||c.projection[0]>f[1])return 0}return 1}function ey(d,s){let c=0;const f=[0,0,0,0];for(let y=0;y<d.length;y++)f[0]=d[y][0],f[1]=d[y][1],f[2]=d[y][2],f[3]=1,De.vec4.dot(f,s)>=0&&c++;return c}class XA{constructor(s,c){this.points=s||new Array(8).fill([0,0,0]),this.planes=c||new Array(6).fill([0,0,0,0]),this.bounds=bo.fromPoints(this.points),this.projections=[],this.frustumEdges=[De.vec3.sub([],this.points[2],this.points[3]),De.vec3.sub([],this.points[0],this.points[3]),De.vec3.sub([],this.points[4],this.points[0]),De.vec3.sub([],this.points[5],this.points[1]),De.vec3.sub([],this.points[6],this.points[2]),De.vec3.sub([],this.points[7],this.points[3])];for(const f of this.frustumEdges){const y=[0,-f[2],f[1]],A=[f[2],0,-f[0]];this.projections.push({axis:y,projection:ph(this.points,this.points[0],y)}),this.projections.push({axis:A,projection:ph(this.points,this.points[0],A)})}}static fromInvProjectionMatrix(s,c,f,y){const A=Math.pow(2,f),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(R=>{const w=De.vec4.transformMat4([],R,s),S=1/w[3]/c*A;return De.vec4.mul(w,w,[S,S,y?1/w[3]:S,S])}),C=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(R=>{const w=De.vec3.sub([],_[R[0]],_[R[1]]),S=De.vec3.sub([],_[R[2]],_[R[1]]),F=De.vec3.normalize([],De.vec3.cross([],w,S)),T=-De.vec3.dot(F,_[R[1]]);return F.concat(T)}),P=[];for(let R=0;R<_.length;R++)P.push([_[R][0],_[R][1],_[R][2]]);return new XA(P,C)}intersectsPrecise(s,c,f){for(let y=0;y<c.length;y++)if(!ey(s,c[y]))return 0;for(let y=0;y<this.planes.length;y++)if(!ey(s,this.planes[y]))return 0;for(const y of f)for(const A of this.frustumEdges){const _=De.vec3.cross([],y,A),C=De.vec3.length(_);if(C===0)continue;De.vec3.scale(_,_,1/C);const P=ph(this.points,this.points[0],_),R=ph(s,this.points[0],_);if(P[0]>R[1]||R[0]>P[1])return 0}return 1}containsPoint(s){for(const c of this.planes){const f=c[3];if(De.vec3.dot([c[0],c[1],c[2]],s)+f<0)return!1}return!0}}class bo{static fromPoints(s){const c=[1/0,1/0,1/0],f=[-1/0,-1/0,-1/0];for(const y of s)De.vec3.min(c,c,y),De.vec3.max(f,f,y);return new bo(c,f)}static fromTileIdAndHeight(s,c,f){const y=1<<s.canonical.z,A=s.canonical.x,_=s.canonical.y;return new bo([A/y,_/y,c],[(A+1)/y,(_+1)/y,f])}static applyTransform(s,c){const f=s.getCorners();for(let y=0;y<f.length;++y)De.vec3.transformMat4(f[y],f[y],c);return bo.fromPoints(f)}static applyTransformFast(s,c){const f=[c[12],c[13],c[14]],y=[...f];for(let A=0;A<3;A++)for(let _=0;_<3;_++){const C=c[4*_+A],P=C*s.min[_],R=C*s.max[_];f[A]+=Math.min(P,R),y[A]+=Math.max(P,R)}return new bo(f,y)}static projectAabbCorners(s,c){const f=s.getCorners();for(let y=0;y<f.length;++y)De.vec3.transformMat4(f[y],f[y],c);return f}constructor(s,c){this.min=s,this.max=c,this.center=De.vec3.scale([],De.vec3.add([],this.min,this.max),.5)}quadrant(s){const c=[s%2==0,s<2],f=De.vec3.clone(this.min),y=De.vec3.clone(this.max);for(let A=0;A<c.length;A++)f[A]=c[A]?this.min[A]:this.center[A],y[A]=c[A]?this.center[A]:this.max[A];return y[2]=this.max[2],new bo(f,y)}distanceX(s){return Math.max(Math.min(this.max[0],s[0]),this.min[0])-s[0]}distanceY(s){return Math.max(Math.min(this.max[1],s[1]),this.min[1])-s[1]}distanceZ(s){return Math.max(Math.min(this.max[2],s[2]),this.min[2])-s[2]}getCorners(){const s=this.min,c=this.max;return[[s[0],s[1],s[2]],[c[0],s[1],s[2]],[c[0],c[1],s[2]],[s[0],c[1],s[2]],[s[0],s[1],c[2]],[c[0],s[1],c[2]],[c[0],c[1],c[2]],[s[0],c[1],c[2]]]}intersects(s){return this.intersectsAabb(s.bounds)?qA(s,this.getCorners()):0}intersectsFlat(s){return this.intersectsAabb(s.bounds)?qA(s,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(s,c){return c||this.intersects(s)?WA(s,this.getCorners()):0}intersectsPreciseFlat(s,c){return c||this.intersectsFlat(s)?WA(s,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(s){for(let c=0;c<3;++c)if(this.min[c]>s.max[c]||s.min[c]>this.max[c])return!1;return!0}intersectsAabbXY(s){return!(this.min[0]>s.max[0]||s.min[0]>this.max[0]||this.min[1]>s.max[1]||s.min[1]>this.max[1])}encapsulate(s){for(let c=0;c<3;c++)this.min[c]=Math.min(this.min[c],s.min[c]),this.max[c]=Math.max(this.max[c],s.max[c])}encapsulatePoint(s){for(let c=0;c<3;c++)this.min[c]=Math.min(this.min[c],s[c]),this.max[c]=Math.max(this.max[c],s[c])}closestPoint(s){return[Math.max(Math.min(this.max[0],s[0]),this.min[0]),Math.max(Math.min(this.max[1],s[1]),this.min[1]),Math.max(Math.min(this.max[2],s[2]),this.min[2])]}}function Kf(d){return d*a/W}He(bo,"Aabb");const kB=[new bo([k,k,k],[z,z,z]),new bo([k,k,k],[0,0,z]),new bo([0,k,k],[z,0,z]),new bo([k,0,k],[0,z,z]),new bo([0,0,k],[z,z,z])];function Rb(d,s,c,f=!0){const y=De.vec3.scale([],d._camera.position,d.worldSize),A=[s,c,1,1];De.vec4.transformMat4(A,A,d.pixelMatrixInverse),De.vec4.scale(A,A,1/A[3]);const _=De.vec3.sub([],A,y),C=De.vec3.normalize([],_),P=d.globeMatrix,R=[P[12],P[13],P[14]],w=De.vec3.sub([],R,y),S=De.vec3.length(w),F=De.vec3.normalize([],w),T=d.worldSize/(2*Math.PI),L=De.vec3.dot(F,C),U=Math.asin(T/S);if(U<Math.acos(L)){if(!f)return null;const rt=[],je=[];De.vec3.scale(rt,C,S/L),De.vec3.normalize(je,De.vec3.sub(je,rt,w)),De.vec3.normalize(C,De.vec3.add(C,w,De.vec3.scale(C,je,Math.tan(U)*S)))}const V=[];new Zh(y,C).closestPointOnSphere(R,T,V);const $=De.vec3.normalize([],Zo(P,0)),ee=De.vec3.normalize([],Zo(P,1)),ie=De.vec3.normalize([],Zo(P,2)),K=De.vec3.dot($,V),ce=De.vec3.dot(ee,V),he=De.vec3.dot(ie,V),Be=Jt(Math.asin(-ce/T));let Ne=Jt(Math.atan2(K,he));Ne=d.center.lng+function(rt,je){const ct=(je-rt+180)%360-180;return ct<-180?ct+360:ct}(d.center.lng,Ne);const Ve=ze(Ne),Oe=_n(Qe(Be),0,1);return new Rt(Ve,Oe)}class k${constructor(s,c,f){this.a=De.vec3.sub([],s,f),this.b=De.vec3.sub([],c,f),this.center=f;const y=De.vec3.normalize([],this.a),A=De.vec3.normalize([],this.b);this.angle=Math.acos(De.vec3.dot(y,A))}}function MB(d,s){if(d.angle===0)return null;let c;return c=d.a[s]===0?1/d.angle*.5*Math.PI:1/d.angle*Math.atan(d.b[s]/d.a[s]/Math.sin(d.angle)-1/Math.tan(d.angle)),c<0||c>1?null:function(f,y,A,_){const C=Math.sin(A);return f*(Math.sin((1-_)*A)/C)+y*(Math.sin(_*A)/C)}(d.a[s],d.b[s],d.angle,_n(c,0,1))+d.center[s]}function Hd(d){if(d.z<=1)return kB[d.z+2*d.y+d.x];const s=OB(kb(d));return bo.fromPoints(s)}function qf(d,s,c){return De.vec3.scale(d,d,1-c),De.vec3.scaleAndAdd(d,d,s,c)}function rL(d,s,c){for(const f of d)De.vec3.transformMat4(f,f,s),De.vec3.scale(f,f,c)}function iL(d,s,c,f){const y=s/d.worldSize,A=d.globeMatrix;if(c.z<=1){const Ve=Hd(c).getCorners();return rL(Ve,A,y),bo.fromPoints(Ve)}const _=kb(c,f),C=OB(_,a+Kf(d._tileCoverLift));rL(C,A,y);const P=Number.MAX_VALUE,R=[-P,-P,-P],w=[P,P,P];if(_.contains(d.center)){for(const rt of C)De.vec3.min(w,w,rt),De.vec3.max(R,R,rt);R[2]=0;const Ve=d.point,Oe=[Ve.x*y,Ve.y*y,0];return De.vec3.min(w,w,Oe),De.vec3.max(R,R,Oe),new bo(w,R)}if(d._tileCoverLift>0){for(const Ve of C)De.vec3.min(w,w,Ve),De.vec3.max(R,R,Ve);return new bo(w,R)}const S=[A[12]*y,A[13]*y,A[14]*y],F=_.getCenter(),T=_n(d.center.lat,-it,it),L=_n(F.lat,-it,it),U=ze(d.center.lng),V=Qe(T);let $=U-ze(F.lng);const ee=V-Qe(L);$>.5?$-=1:$<-.5&&($+=1);let ie=0;if(Math.abs($)>Math.abs(ee))ie=$>=0?1:3;else{ie=ee>=0?0:2;const Ve=[A[4]*y,A[5]*y,A[6]*y],Oe=-Math.sin(zt(ee>=0?_.getSouth():_.getNorth()))*a;De.vec3.scaleAndAdd(S,S,Ve,Oe)}const K=C[ie],ce=C[(ie+1)%4],he=new k$(K,ce,S),Be=[MB(he,0)||K[0],MB(he,1)||K[1],MB(he,2)||K[2]],Ne=ZA(d.zoom);if(Ne>0){const Ve=function({x:rt,y:je,z:ct},yt,Ct,Et,Pt){const $t=1/(1<<ct);let Lt=rt*$t,dn=Lt+$t,xn=je*$t,tn=xn+$t,Jn=0;const Hn=(Lt+dn)/2-Et;return Hn>.5?Jn=-1:Hn<-.5&&(Jn=1),Lt=((Lt+Jn)*yt-(Et*=yt))*Ct+Et,dn=((dn+Jn)*yt-Et)*Ct+Et,xn=(xn*yt-(Pt*=yt))*Ct+Pt,tn=(tn*yt-Pt)*Ct+Pt,[[Lt,tn,0],[dn,tn,0],[dn,xn,0],[Lt,xn,0]]}(c,s,d._pixelsPerMercatorPixel,U,V);for(let rt=0;rt<C.length;rt++)qf(C[rt],Ve[rt],Ne);const Oe=De.vec3.add([],Ve[ie],Ve[(ie+1)%4]);De.vec3.scale(Oe,Oe,.5),qf(Be,Oe,Ne)}for(const Ve of C)De.vec3.min(w,w,Ve),De.vec3.max(R,R,Ve);return w[2]=Math.min(K[2],ce[2]),De.vec3.min(w,w,Be),De.vec3.max(R,R,Be),new bo(w,R)}function kb({x:d,y:s,z:c},f=!1){const y=1/(1<<c),A=new re(Xe(d*y),s===(1<<c)-1&&f?-90:qe((s+1)*y)),_=new re(Xe((d+1)*y),s===0&&f?90:qe(s*y));return new de(A,_)}function OB(d,s=a){const c=zt(d.getNorth()),f=zt(d.getSouth()),y=Math.cos(c),A=Math.cos(f),_=Math.sin(c),C=Math.sin(f),P=d.getWest(),R=d.getEast();return[Q(A,C,P,s),Q(A,C,R,s),Q(y,_,R,s),Q(y,_,P,s)]}function p0(d,s,c,f){const y=1<<c.z,A=(d/Nn+c.x)/y;return j(qe((s/Nn+c.y)/y),Xe(A),f)}function Mb({min:d,max:s}){return v/Math.max(s[0]-d[0],s[1]-d[1],s[2]-d[2])}const oL=new Float64Array(16);function Ob(d){const s=Mb(d),c=De.mat4.fromScaling(oL,[s,s,s]);return De.mat4.translate(c,c,De.vec3.negate([],d.min))}function DB(d){const s=De.mat4.fromTranslation(oL,d.min),c=1/Mb(d);return De.mat4.scale(s,s,[c,c,c])}function UB(d){const s=Nn/(2*Math.PI);return d/(2*Math.PI)/s}function sL(d,s){return Nn/(512*Math.pow(2,d))*Mb(Hd(s))}function aL(d,s,c,f,y){const A=UB(c),_=[d,s,-c/(2*Math.PI)],C=De.mat4.identity(new Float64Array(16));return De.mat4.translate(C,C,_),De.mat4.scale(C,C,[A,A,A]),De.mat4.rotateX(C,C,zt(-y)),De.mat4.rotateY(C,C,zt(-f)),C}function ZA(d){return er(u,g,d)}function lL(d,s){const c=j(s.lat,s.lng),f=function(A){const _=j(A._center.lat,A._center.lng),C=De.vec3.fromValues(0,1,0);let P=De.vec3.cross([],C,_);const R=De.mat4.fromRotation([],-A.angle,_);P=De.vec3.transformMat4(P,P,R),De.mat4.fromRotation(R,-A._pitch,P);const w=De.vec3.normalize([],_);return De.vec3.scale(w,w,Kf(A.cameraToCenterDistance/A.pixelsPerMeter)),De.vec3.transformMat4(w,w,R),De.vec3.add([],_,w)}(d),y=De.vec3.subtract([],f,c);return De.vec3.angle(y,c)}function NB(d,s){return lL(d,s)>Math.PI/2*1.01}const cL=zt(85),M$=Math.cos(cL),O$=Math.sin(cL),D$=De.mat4.create(),uL=d=>{const s=[];return d.paint.get("circle-pitch-alignment")==="map"&&s.push("PITCH_WITH_MAP"),d.paint.get("circle-pitch-scale")==="map"&&s.push("SCALE_WITH_MAP"),s};function hL(d,s,c,f,y,A,_,C,P){if(A&&d.queryGeometry.isAboveHorizon)return!1;A&&(P*=d.pixelToTileUnitsFactor);const R=d.tileID.canonical,w=c.projection.upVectorScale(R,c.center.lat,c.worldSize).metersToTile;for(const S of s)for(const F of S){const T=F.add(C),L=y&&c.elevation?c.elevation.exaggeration()*y.getElevationAt(T.x,T.y,!0):0,U=c.projection.projectTilePoint(T.x,T.y,R);if(L>0){const ie=c.projection.upVector(R,T.x,T.y);U.x+=ie[0]*w*L,U.y+=ie[1]*w*L,U.z+=ie[2]*w*L}const V=A?T:U$(U.x,U.y,U.z,f),$=A?d.tilespaceRays.map(ie=>z$(ie,L)):d.queryGeometry.screenGeometry,ee=De.vec4.transformMat4([],[U.x,U.y,U.z,1],f);if(!_&&A?P*=ee[3]/c.cameraToCenterDistance:_&&!A&&(P*=c.cameraToCenterDistance/ee[3]),A){const ie=qe((F.y/Nn+R.y)/(1<<R.z));P/=c.projection.pixelsPerMeter(ie,1)/Ue(1,ie)}if(rr($,V,P))return!0}return!1}function U$(d,s,c,f){const y=De.vec4.transformMat4([],[d,s,c,1],f);return new Fe(y[0]/y[3],y[1]/y[3])}const dL=De.vec3.fromValues(0,0,0),N$=De.vec3.fromValues(0,0,1);function z$(d,s){const c=De.vec3.create();return dL[2]=s,d.intersectsPlane(dL,N$,c),new Fe(c[0],c[1])}class fL extends vr{}let AL,pL,mL,gL;function yL(d,{width:s,height:c},f,y){if(y){if(y instanceof Uint8ClampedArray)y=new Uint8Array(y.buffer);else if(y.length!==s*c*f)throw new RangeError("mismatched image size")}else y=new Uint8Array(s*c*f);return d.width=s,d.height=c,d.data=y,d}function _L(d,s,c){const{width:f,height:y}=s;f===d.width&&y===d.height||(zB(d,s,{x:0,y:0},{x:0,y:0},{width:Math.min(d.width,f),height:Math.min(d.height,y)},c,null),d.width=f,d.height=y,d.data=s.data)}function zB(d,s,c,f,y,A,_,C){if(y.width===0||y.height===0)return s;if(y.width>d.width||y.height>d.height||c.x>d.width-y.width||c.y>d.height-y.height)throw new RangeError("out of range source coordinates for image copy");if(y.width>s.width||y.height>s.height||f.x>s.width-y.width||f.y>s.height-y.height)throw new RangeError("out of range destination coordinates for image copy");const P=d.data,R=s.data,w=A===4&&C;for(let S=0;S<y.height;S++){const F=((c.y+S)*d.width+c.x)*A,T=((f.y+S)*s.width+f.x)*A;if(w)for(let L=0;L<y.width;L++){const U=F+L*A+3,V=T+L*A;R[V+0]=255,R[V+1]=255,R[V+2]=255,R[V+3]=P[U]}else if(_)for(let L=0;L<y.width;L++){const U=F+L*A,V=T+L*A,$=P[U+3],ee=new _i(P[U+0]/255*$,P[U+1]/255*$,P[U+2]/255*$,$).toRenderColor(_).toArray();R[V+0]=ee[0],R[V+1]=ee[1],R[V+2]=ee[2],R[V+3]=ee[3]}else for(let L=0;L<y.width*A;L++)R[T+L]=P[F+L]}return s}He(fL,"HeatmapBucket",{omit:["layers"]});class YA{constructor(s,c){yL(this,s,1,c)}resize(s){_L(this,new YA(s),1)}clone(){return new YA({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,c,f,y,A){zB(s,c,f,y,A,1,null)}}class Ll{constructor(s,c){yL(this,s,4,c)}resize(s){_L(this,new Ll(s),4)}replace(s,c){c?this.data.set(s):this.data=s instanceof Uint8ClampedArray?new Uint8Array(s.buffer):s}clone(){return new Ll({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,c,f,y,A,_,C){zB(s,c,f,y,A,4,_,C)}}class vL{constructor(s,c){this.width=s.width,this.height=s.height,this.data=c instanceof Uint8Array?new Float32Array(c.buffer):c}}function m0(d){const s={},c=d.resolution||256,f=d.clips?d.clips.length:1,y=d.image||new Ll({width:c,height:f}),A=(_,C,P)=>{s[d.evaluationKey]=P;const R=d.expression.evaluate(s);R&&(y.data[_+C+0]=Math.floor(255*R.r/R.a),y.data[_+C+1]=Math.floor(255*R.g/R.a),y.data[_+C+2]=Math.floor(255*R.b/R.a),y.data[_+C+3]=Math.floor(255*R.a))};if(d.clips)for(let _=0,C=0;_<f;++_,C+=4*c)for(let P=0,R=0;P<c;P++,R+=4){const w=P/(c-1),{start:S,end:F}=d.clips[_];A(C,R,S*(1-w)+F*w)}else for(let _=0,C=0;_<c;_++,C+=4)A(0,C,_/(c-1));return y}He(YA,"AlphaImage"),He(Ll,"RGBAImage");const V$=Bi([{name:"a_pos",components:2,type:"Int16"}],4),{members:Q$}=V$;function g0(d,s,c=2){const f=s&&s.length,y=f?s[0]*c:d.length;let A=bL(d,0,y,c,!0);const _=[];if(!A||A.next===A.prev)return _;let C,P,R;if(f&&(A=function(w,S,F,T){const L=[];for(let U=0,V=S.length;U<V;U++){const $=bL(w,S[U]*T,U<V-1?S[U+1]*T:w.length,T,!1);$===$.next&&($.steiner=!0),L.push(X$($))}L.sort(K$);for(let U=0;U<L.length;U++)F=q$(L[U],F);return F}(d,s,A,c)),d.length>80*c){C=1/0,P=1/0;let w=-1/0,S=-1/0;for(let F=c;F<y;F+=c){const T=d[F],L=d[F+1];T<C&&(C=T),L<P&&(P=L),T>w&&(w=T),L>S&&(S=L)}R=Math.max(w-C,S-P),R=R!==0?32767/R:0}return y0(A,_,c,C,P,R,0),_}function bL(d,s,c,f,y){let A;if(y===function(_,C,P,R){let w=0;for(let S=C,F=P-R;S<P;S+=R)w+=(_[F]-_[S])*(_[S+1]+_[F+1]),F=S;return w}(d,s,c,f)>0)for(let _=s;_<c;_+=f)A=CL(_/f|0,d[_],d[_+1],A);else for(let _=c-f;_>=s;_-=f)A=CL(_/f|0,d[_],d[_+1],A);return A&&Db(A,A.next)&&(v0(A),A=A.next),A}function Im(d,s){if(!d)return d;s||(s=d);let c,f=d;do if(c=!1,f.steiner||!Db(f,f.next)&&ra(f.prev,f,f.next)!==0)f=f.next;else{if(v0(f),f=s=f.prev,f===f.next)break;c=!0}while(c||f!==s);return s}function y0(d,s,c,f,y,A,_){if(!d)return;!_&&A&&function(P,R,w,S){let F=P;do F.z===0&&(F.z=VB(F.x,F.y,R,w,S)),F.prevZ=F.prev,F.nextZ=F.next,F=F.next;while(F!==P);F.prevZ.nextZ=null,F.prevZ=null,function(T){let L,U=1;do{let V,$=T;T=null;let ee=null;for(L=0;$;){L++;let ie=$,K=0;for(let he=0;he<U&&(K++,ie=ie.nextZ,ie);he++);let ce=U;for(;K>0||ce>0&&ie;)K!==0&&(ce===0||!ie||$.z<=ie.z)?(V=$,$=$.nextZ,K--):(V=ie,ie=ie.nextZ,ce--),ee?ee.nextZ=V:T=V,V.prevZ=ee,ee=V;$=ie}ee.nextZ=null,U*=2}while(L>1)}(F)}(d,f,y,A);let C=d;for(;d.prev!==d.next;){const P=d.prev,R=d.next;if(A?j$(d,f,y,A):H$(d))s.push(P.i,d.i,R.i),v0(d),d=R.next,C=R.next;else if((d=R)===C){_?_===1?y0(d=$$(Im(d),s),s,c,f,y,A,2):_===2&&G$(d,s,c,f,y,A):y0(Im(d),s,c,f,y,A,1);break}}}function H$(d){const s=d.prev,c=d,f=d.next;if(ra(s,c,f)>=0)return!1;const y=s.x,A=c.x,_=f.x,C=s.y,P=c.y,R=f.y,w=y<A?y<_?y:_:A<_?A:_,S=C<P?C<R?C:R:P<R?P:R,F=y>A?y>_?y:_:A>_?A:_,T=C>P?C>R?C:R:P>R?P:R;let L=f.next;for(;L!==s;){if(L.x>=w&&L.x<=F&&L.y>=S&&L.y<=T&&ty(y,C,A,P,_,R,L.x,L.y)&&ra(L.prev,L,L.next)>=0)return!1;L=L.next}return!0}function j$(d,s,c,f){const y=d.prev,A=d,_=d.next;if(ra(y,A,_)>=0)return!1;const C=y.x,P=A.x,R=_.x,w=y.y,S=A.y,F=_.y,T=C<P?C<R?C:R:P<R?P:R,L=w<S?w<F?w:F:S<F?S:F,U=C>P?C>R?C:R:P>R?P:R,V=w>S?w>F?w:F:S>F?S:F,$=VB(T,L,s,c,f),ee=VB(U,V,s,c,f);let ie=d.prevZ,K=d.nextZ;for(;ie&&ie.z>=$&&K&&K.z<=ee;){if(ie.x>=T&&ie.x<=U&&ie.y>=L&&ie.y<=V&&ie!==y&&ie!==_&&ty(C,w,P,S,R,F,ie.x,ie.y)&&ra(ie.prev,ie,ie.next)>=0||(ie=ie.prevZ,K.x>=T&&K.x<=U&&K.y>=L&&K.y<=V&&K!==y&&K!==_&&ty(C,w,P,S,R,F,K.x,K.y)&&ra(K.prev,K,K.next)>=0))return!1;K=K.nextZ}for(;ie&&ie.z>=$;){if(ie.x>=T&&ie.x<=U&&ie.y>=L&&ie.y<=V&&ie!==y&&ie!==_&&ty(C,w,P,S,R,F,ie.x,ie.y)&&ra(ie.prev,ie,ie.next)>=0)return!1;ie=ie.prevZ}for(;K&&K.z<=ee;){if(K.x>=T&&K.x<=U&&K.y>=L&&K.y<=V&&K!==y&&K!==_&&ty(C,w,P,S,R,F,K.x,K.y)&&ra(K.prev,K,K.next)>=0)return!1;K=K.nextZ}return!0}function $$(d,s){let c=d;do{const f=c.prev,y=c.next.next;!Db(f,y)&&wL(f,c,c.next,y)&&_0(f,y)&&_0(y,f)&&(s.push(f.i,c.i,y.i),v0(c),v0(c.next),c=d=y),c=c.next}while(c!==d);return Im(c)}function G$(d,s,c,f,y,A){let _=d;do{let C=_.next.next;for(;C!==_.prev;){if(_.i!==C.i&&Z$(_,C)){let P=xL(_,C);return _=Im(_,_.next),P=Im(P,P.next),y0(_,s,c,f,y,A,0),void y0(P,s,c,f,y,A,0)}C=C.next}_=_.next}while(_!==d)}function K$(d,s){return d.x-s.x}function q$(d,s){const c=function(y,A){let _=A;const C=y.x,P=y.y;let R,w=-1/0;do{if(P<=_.y&&P>=_.next.y&&_.next.y!==_.y){const U=_.x+(P-_.y)*(_.next.x-_.x)/(_.next.y-_.y);if(U<=C&&U>w&&(w=U,R=_.x<_.next.x?_:_.next,U===C))return R}_=_.next}while(_!==A);if(!R)return null;const S=R,F=R.x,T=R.y;let L=1/0;_=R;do{if(C>=_.x&&_.x>=F&&C!==_.x&&ty(P<T?C:w,P,F,T,P<T?w:C,P,_.x,_.y)){const U=Math.abs(P-_.y)/(C-_.x);_0(_,y)&&(U<L||U===L&&(_.x>R.x||_.x===R.x&&W$(R,_)))&&(R=_,L=U)}_=_.next}while(_!==S);return R}(d,s);if(!c)return s;const f=xL(c,d);return Im(f,f.next),Im(c,c.next)}function W$(d,s){return ra(d.prev,d,s.prev)<0&&ra(s.next,d,d.next)<0}function VB(d,s,c,f,y){return(d=1431655765&((d=858993459&((d=252645135&((d=16711935&((d=(d-c)*y|0)|d<<8))|d<<4))|d<<2))|d<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-f)*y|0)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function X$(d){let s=d,c=d;do(s.x<c.x||s.x===c.x&&s.y<c.y)&&(c=s),s=s.next;while(s!==d);return c}function ty(d,s,c,f,y,A,_,C){return(y-_)*(s-C)>=(d-_)*(A-C)&&(d-_)*(f-C)>=(c-_)*(s-C)&&(c-_)*(A-C)>=(y-_)*(f-C)}function Z$(d,s){return d.next.i!==s.i&&d.prev.i!==s.i&&!function(c,f){let y=c;do{if(y.i!==c.i&&y.next.i!==c.i&&y.i!==f.i&&y.next.i!==f.i&&wL(y,y.next,c,f))return!0;y=y.next}while(y!==c);return!1}(d,s)&&(_0(d,s)&&_0(s,d)&&function(c,f){let y=c,A=!1;const _=(c.x+f.x)/2,C=(c.y+f.y)/2;do y.y>C!=y.next.y>C&&y.next.y!==y.y&&_<(y.next.x-y.x)*(C-y.y)/(y.next.y-y.y)+y.x&&(A=!A),y=y.next;while(y!==c);return A}(d,s)&&(ra(d.prev,d,s.prev)||ra(d,s.prev,s))||Db(d,s)&&ra(d.prev,d,d.next)>0&&ra(s.prev,s,s.next)>0)}function ra(d,s,c){return(s.y-d.y)*(c.x-s.x)-(s.x-d.x)*(c.y-s.y)}function Db(d,s){return d.x===s.x&&d.y===s.y}function wL(d,s,c,f){const y=Nb(ra(d,s,c)),A=Nb(ra(d,s,f)),_=Nb(ra(c,f,d)),C=Nb(ra(c,f,s));return y!==A&&_!==C||!(y!==0||!Ub(d,c,s))||!(A!==0||!Ub(d,f,s))||!(_!==0||!Ub(c,d,f))||!(C!==0||!Ub(c,s,f))}function Ub(d,s,c){return s.x<=Math.max(d.x,c.x)&&s.x>=Math.min(d.x,c.x)&&s.y<=Math.max(d.y,c.y)&&s.y>=Math.min(d.y,c.y)}function Nb(d){return d>0?1:d<0?-1:0}function _0(d,s){return ra(d.prev,d,d.next)<0?ra(d,s,d.next)>=0&&ra(d,d.prev,s)>=0:ra(d,s,d.prev)<0||ra(d,d.next,s)<0}function xL(d,s){const c=QB(d.i,d.x,d.y),f=QB(s.i,s.x,s.y),y=d.next,A=s.prev;return d.next=s,s.prev=d,c.next=y,y.prev=c,f.next=c,c.prev=f,A.next=f,f.prev=A,f}function CL(d,s,c,f){const y=QB(d,s,c);return f?(y.next=f.next,y.prev=f,f.next.prev=y,f.next=y):(y.prev=y,y.next=y),y}function v0(d){d.next.prev=d.prev,d.prev.next=d.next,d.prevZ&&(d.prevZ.nextZ=d.nextZ),d.nextZ&&(d.nextZ.prevZ=d.prevZ)}function QB(d,s,c){return{i:d,x:s,y:c,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function zb(d,s){const c=d.length;if(c<=1)return[d];const f=[];let y,A;for(let _=0;_<c;_++){const C=Ns(d[_]);C!==0&&(d[_].area=Math.abs(C),A===void 0&&(A=C<0),A===C<0?(y&&f.push(y),y=[d[_]]):y.push(d[_]))}if(y&&f.push(y),s>1)for(let _=0;_<f.length;_++)f[_].length<=s||(xu(f[_],s,1,f[_].length-1,Y$),f[_]=f[_].slice(0,s));return f}function Y$(d,s){return s.area-d.area}function HB(d,s,c){const f=c.patternDependencies;let y=!1;for(const A of s){const _=A.paint.get(`${d}-pattern`);_.isConstant()||(y=!0);const C=_.constantOr(null);C&&(y=!0,f[C]=!0)}return y}function jB(d,s,c,f,y){const A=y.patternDependencies;for(const _ of s){const C=_.paint.get(`${d}-pattern`).value;if(C.kind!=="constant"){let P=C.evaluate({zoom:f},c,{},y.availableImages);P=P&&P.name?P.name:P,A[P]=!0,c.patterns[_.id]=P}}return c}class $B{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(c=>c.fqid),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Lc,this.indexArray=new ea,this.indexArray2=new ku,this.programConfigurations=new Vd(s.layers,{zoom:s.zoom,lut:s.lut}),this.segments=new hs,this.segments2=new hs,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id),this.projection=s.projection}updateFootprints(s,c){}populate(s,c,f,y){this.hasPattern=HB("fill",this.layers,c);const A=this.layers[0].layout.get("fill-sort-key"),_=[];for(const{feature:C,id:P,index:R,sourceLayerIndex:w}of s){const S=this.layers[0]._featureFilter.needGeometry,F=Mn(C,S);if(!this.layers[0]._featureFilter.filter(new Oi(this.zoom),F,f))continue;const T=A?A.evaluate(F,{},f,c.availableImages):void 0,L={id:P,properties:C.properties,type:C.type,sourceLayerIndex:w,index:R,geometry:S?F.geometry:Rn(C,f,y),patterns:{},sortKey:T};_.push(L)}A&&_.sort((C,P)=>C.sortKey-P.sortKey);for(const C of _){const{geometry:P,index:R,sourceLayerIndex:w}=C;if(this.hasPattern){const S=jB("fill",this.layers,C,this.zoom,c);this.patternFeatures.push(S)}else this.addFeature(C,P,R,f,{},c.availableImages,c.brightness);c.featureIndex.insert(s[R].feature,P,R,w,this.index)}}update(s,c,f,y,A){const _=Object.keys(s).length!==0;_&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(s,c,_?this.stateDependentLayers:this.layers,f,y,A)}addFeatures(s,c,f,y,A,_){for(const C of this.patternFeatures)this.addFeature(C,C.geometry,C.index,c,f,y,_)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Q$),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.indexBuffer2=s.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(s,c,f,y,A,_=[],C){for(const P of zb(c,500)){let R=0;for(const U of P)R+=U.length;const w=this.segments.prepareSegment(R,this.layoutVertexArray,this.indexArray),S=w.vertexLength,F=[],T=[];for(const U of P){if(U.length===0)continue;U!==P[0]&&T.push(F.length/2);const V=this.segments2.prepareSegment(U.length,this.layoutVertexArray,this.indexArray2),$=V.vertexLength;this.layoutVertexArray.emplaceBack(U[0].x,U[0].y),this.indexArray2.emplaceBack($+U.length-1,$),F.push(U[0].x),F.push(U[0].y);for(let ee=1;ee<U.length;ee++)this.layoutVertexArray.emplaceBack(U[ee].x,U[ee].y),this.indexArray2.emplaceBack($+ee-1,$+ee),F.push(U[ee].x),F.push(U[ee].y);V.vertexLength+=U.length,V.primitiveLength+=U.length}const L=g0(F,T);for(let U=0;U<L.length;U+=3)this.indexArray.emplaceBack(S+L[U],S+L[U+1],S+L[U+2]);w.vertexLength+=R,w.primitiveLength+=L.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,f,A,_,y,C)}}let EL,BL,SL,TL;He($B,"FillBucket",{omit:["layers","patternFeatures"]});class GB{constructor(s,c,f,y){if(this.triangleCount=c.length/3,this.min=new Fe(0,0),this.max=new Fe(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],this.triangleCount===0||s.length===0)return;const[A,_]=[s[0].clone(),s[0].clone()];for(let S=1;S<s.length;++S){const F=s[S];A.x=Math.min(A.x,F.x),A.y=Math.min(A.y,F.y),_.x=Math.max(_.x,F.x),_.y=Math.max(_.y,F.y)}if(y){const S=Math.ceil(Math.max(_.x-A.x,_.y-A.y)/y);f=Math.max(f,S)}if(f===0)return;this.min=A,this.max=_;const C=this.max.sub(this.min);C.x=Math.max(C.x,1),C.y=Math.max(C.y,1);const P=Math.max(C.x,C.y)/f;this.cellsX=Math.max(1,Math.ceil(C.x/P)),this.cellsY=Math.max(1,Math.ceil(C.y/P)),this.xScale=1/P,this.yScale=1/P;const R=[];for(let S=0;S<this.triangleCount;S++){const F=s[c[3*S+0]].sub(this.min),T=s[c[3*S+1]].sub(this.min),L=s[c[3*S+2]].sub(this.min),U=jd(Math.floor(Math.min(F.x,T.x,L.x)),this.xScale,this.cellsX),V=jd(Math.floor(Math.max(F.x,T.x,L.x)),this.xScale,this.cellsX),$=jd(Math.floor(Math.min(F.y,T.y,L.y)),this.yScale,this.cellsY),ee=jd(Math.floor(Math.max(F.y,T.y,L.y)),this.yScale,this.cellsY),ie=new Fe(0,0),K=new Fe(0,0),ce=new Fe(0,0),he=new Fe(0,0);for(let Be=$;Be<=ee;++Be){ie.y=K.y=Be*P,ce.y=he.y=(Be+1)*P;for(let Ne=U;Ne<=V;++Ne)ie.x=ce.x=Ne*P,K.x=he.x=(Ne+1)*P,(eo(F,T,L,ie,K,he)||eo(F,T,L,ie,he,ce))&&R.push({cellIdx:Be*this.cellsX+Ne,triIdx:S})}}if(R.length===0)return;R.sort((S,F)=>S.cellIdx-F.cellIdx||S.triIdx-F.triIdx);let w=0;for(;w<R.length;){const S=R[w].cellIdx,F={start:this.payload.length,len:0};for(;w<R.length&&R[w].cellIdx===S;)++F.len,this.payload.push(R[w++].triIdx);this.cells[S]=F}}_lazyInitLookup(){this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8))),this.lookup.fill(0)}queryPoint(s,c){if(this.triangleCount===0||this.cells.length===0||s.x>this.max.x||this.min.x>s.x||s.y>this.max.y||this.min.y>s.y)return;const f=jd(s.x-this.min.x,this.xScale,this.cellsX),y=jd(s.y-this.min.y,this.yScale,this.cellsY),A=this.cells[y*this.cellsX+f];if(A){this._lazyInitLookup();for(let _=0;_<A.len;_++){const C=this.payload[A.start+_],P=Math.floor(C/8),R=1<<C%8;if(!(this.lookup[P]&R)&&(this.lookup[P]|=R,c.push(C),c.length===this.triangleCount))return}}}query(s,c,f){if(this.triangleCount===0||this.cells.length===0||s.x>this.max.x||this.min.x>c.x||s.y>this.max.y||this.min.y>c.y)return;this._lazyInitLookup();const y=jd(s.x-this.min.x,this.xScale,this.cellsX),A=jd(c.x-this.min.x,this.xScale,this.cellsX),_=jd(s.y-this.min.y,this.yScale,this.cellsY),C=jd(c.y-this.min.y,this.yScale,this.cellsY);for(let P=_;P<=C;P++)for(let R=y;R<=A;R++){const w=this.cells[P*this.cellsX+R];if(w)for(let S=0;S<w.len;S++){const F=this.payload[w.start+S],T=Math.floor(F/8),L=1<<F%8;if(!(this.lookup[T]&L)&&(this.lookup[T]|=L,f.push(F),f.length===this.triangleCount))return}}}}function jd(d,s,c){return Math.max(0,Math.min(c-1,Math.floor(d*s)))}He(GB,"TriangleGridIndex");class IL{constructor(s){this.zoom=s.zoom,this.layers=s.layers,this.layerIds=this.layers.map(c=>c.fqid),this.index=s.index,this.hasPattern=!1,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id),this.footprints=[]}updateFootprints(s,c){for(const f of this.footprints)c.push({footprint:f,id:s})}populate(s,c,f,y){const A=[];for(const{feature:_,id:C,index:P,sourceLayerIndex:R}of s){const w=this.layers[0]._featureFilter.needGeometry,S=Mn(_,w);if(!this.layers[0]._featureFilter.filter(new Oi(this.zoom),S,f))continue;const F={id:C,properties:_.properties,type:_.type,sourceLayerIndex:R,index:P,geometry:w?S.geometry:Rn(_,f,y),patterns:{}};A.push(F)}for(const _ of A){const{geometry:C,index:P,sourceLayerIndex:R}=_;this.addFeature(_,C,P,f,{},c.availableImages,c.brightness),c.featureIndex.insert(s[P].feature,C,P,R,this.index)}}isEmpty(){return this.footprints.length===0}uploadPending(){return!1}upload(s){}update(s,c,f,y,A){}destroy(){}addFeature(s,c,f,y,A,_=[],C){for(const P of zb(c,2)){const R=[],w=[],S=[],F=new Fe(1/0,1/0),T=new Fe(-1/0,-1/0);for(const V of P)if(V.length!==0){V!==P[0]&&S.push(w.length/2);for(let $=0;$<V.length;$++)w.push(V[$].x),w.push(V[$].y),R.push(V[$]),F.x=Math.min(F.x,V[$].x),F.y=Math.min(F.y,V[$].y),T.x=Math.max(T.x,V[$].x),T.y=Math.max(T.y,V[$].y)}const L=g0(w,S),U=new GB(R,L,8,256);this.footprints.push({vertices:R,indices:L,grid:U,min:F,max:T})}}}He(IL,"ClipBucket",{omit:["layers"]});const J$=Bi([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),eG=Bi([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),tG=Bi([{name:"a_centroid_pos",components:2,type:"Uint16"}]),nG=Bi([{name:"a_join_normal_inside",components:3,type:"Int16"}]),rG=Bi([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),iG=Bi([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:oG}=J$;var KB,PL,qB,LL,WB,FL,RL,Vb={};function kL(){if(PL)return KB;PL=1;var d=Je();function s(y,A,_,C,P){this.properties={},this.extent=_,this.type=0,this._pbf=y,this._geometry=-1,this._keys=C,this._values=P,y.readFields(c,this,A)}function c(y,A,_){y==1?A.id=_.readVarint():y==2?function(C,P){for(var R=C.readVarint()+C.pos;C.pos<R;){var w=P._keys[C.readVarint()],S=P._values[C.readVarint()];P.properties[w]=S}}(_,A):y==3?A.type=_.readVarint():y==4&&(A._geometry=_.pos)}function f(y){for(var A,_,C=0,P=0,R=y.length,w=R-1;P<R;w=P++)C+=((_=y[w]).x-(A=y[P]).x)*(A.y+_.y);return C}return KB=s,s.types=["Unknown","Point","LineString","Polygon"],s.prototype.loadGeometry=function(){var y=this._pbf;y.pos=this._geometry;for(var A,_=y.readVarint()+y.pos,C=1,P=0,R=0,w=0,S=[];y.pos<_;){if(P<=0){var F=y.readVarint();C=7&F,P=F>>3}if(P--,C===1||C===2)R+=y.readSVarint(),w+=y.readSVarint(),C===1&&(A&&S.push(A),A=[]),A.push(new d(R,w));else{if(C!==7)throw new Error("unknown command "+C);A&&A.push(A[0].clone())}}return A&&S.push(A),S},s.prototype.bbox=function(){var y=this._pbf;y.pos=this._geometry;for(var A=y.readVarint()+y.pos,_=1,C=0,P=0,R=0,w=1/0,S=-1/0,F=1/0,T=-1/0;y.pos<A;){if(C<=0){var L=y.readVarint();_=7&L,C=L>>3}if(C--,_===1||_===2)(P+=y.readSVarint())<w&&(w=P),P>S&&(S=P),(R+=y.readSVarint())<F&&(F=R),R>T&&(T=R);else if(_!==7)throw new Error("unknown command "+_)}return[w,F,S,T]},s.prototype.toGeoJSON=function(y,A,_){var C,P,R=this.extent*Math.pow(2,_),w=this.extent*y,S=this.extent*A,F=this.loadGeometry(),T=s.types[this.type];function L($){for(var ee=0;ee<$.length;ee++){var ie=$[ee];$[ee]=[360*(ie.x+w)/R-180,360/Math.PI*Math.atan(Math.exp((180-360*(ie.y+S)/R)*Math.PI/180))-90]}}switch(this.type){case 1:var U=[];for(C=0;C<F.length;C++)U[C]=F[C][0];L(F=U);break;case 2:for(C=0;C<F.length;C++)L(F[C]);break;case 3:for(F=function($){var ee=$.length;if(ee<=1)return[$];for(var ie,K,ce=[],he=0;he<ee;he++){var Be=f($[he]);Be!==0&&(K===void 0&&(K=Be<0),K===Be<0?(ie&&ce.push(ie),ie=[$[he]]):ie.push($[he]))}return ie&&ce.push(ie),ce}(F),C=0;C<F.length;C++)for(P=0;P<F[C].length;P++)L(F[C][P])}F.length===1?F=F[0]:T="Multi"+T;var V={type:"Feature",geometry:{type:T,coordinates:F},properties:this.properties};return"id"in this&&(V.id=this.id),V},KB}function ML(){if(LL)return qB;LL=1;var d=kL();function s(f,y){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=f,this._keys=[],this._values=[],this._features=[],f.readFields(c,this,y),this.length=this._features.length}function c(f,y,A){f===15?y.version=A.readVarint():f===1?y.name=A.readString():f===5?y.extent=A.readVarint():f===2?y._features.push(A.pos):f===3?y._keys.push(A.readString()):f===4&&y._values.push(function(_){for(var C=null,P=_.readVarint()+_.pos;_.pos<P;){var R=_.readVarint()>>3;C=R===1?_.readString():R===2?_.readFloat():R===3?_.readDouble():R===4?_.readVarint64():R===5?_.readVarint():R===6?_.readSVarint():R===7?_.readBoolean():null}return C}(A))}return qB=s,s.prototype.feature=function(f){if(f<0||f>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[f];var y=this._pbf.readVarint()+this._pbf.pos;return new d(this._pbf,y,this.extent,this._keys,this._values)},qB}function OL(){return RL||(RL=1,Vb.VectorTile=function(){if(FL)return WB;FL=1;var d=ML();function s(c,f,y){if(c===3){var A=new d(y,y.readVarint()+y.pos);A.length&&(f[A.name]=A)}}return WB=function(c,f){this.layers=c.readFields(s,{},f)},WB}(),Vb.VectorTileFeature=kL(),Vb.VectorTileLayer=ML()),Vb}var ny=OL();class Pm extends Fe{constructor(s,c,f){super(s,c),this.z=f}}class DL extends Pm{constructor(s,c,f,y){super(s,c,f),this.w=y}}function Qb(d,s,c,f){const y=[],A=f===0?(_,C,P,R,w,S)=>{_.push(new Fe(S,P+(S-C)/(R-C)*(w-P)))}:(_,C,P,R,w,S)=>{_.push(new Fe(C+(S-P)/(w-P)*(R-C),S))};for(const _ of d){const C=[];for(const P of _){if(P.length<=2)continue;const R=[];for(let F=0;F<P.length-1;F++){const T=P[F].x,L=P[F].y,U=P[F+1].x,V=P[F+1].y,$=f===0?T:L,ee=f===0?U:V;$<s?ee>s&&A(R,T,L,U,V,s):$>c?ee<c&&A(R,T,L,U,V,c):R.push(P[F]),ee<s&&$>=s&&A(R,T,L,U,V,s),ee>c&&$<=c&&A(R,T,L,U,V,c)}let w=P[P.length-1];const S=f===0?w.x:w.y;S>=s&&S<=c&&R.push(w),R.length&&(w=R[R.length-1],R[0].x===w.x&&R[0].y===w.y||R.push(R[0]),C.push(R))}C.length&&y.push(C)}return y}function UL(d,s,c,f){const y=c==="x"?"y":"x",A=(f-d[c])/(s[c]-d[c]);d[y]=d[y]+(s[y]-d[y])*A,d[c]=f,d.hasOwnProperty("z")&&(d.z=$n(d.z,s.z,A)),d.hasOwnProperty("w")&&(d.w=$n(d.w,s.w,A))}function NL(d,s,c,f){const y=c,A=f;for(const _ of["x","y"]){let C=d,P=s;C[_]>=P[_]&&(C=s,P=d),C[_]<y&&P[_]>y&&UL(C,P,_,y),C[_]<A&&P[_]>A&&UL(P,C,_,A)}}const Hb=Number.MAX_SAFE_INTEGER;function zL(d,s,c,f){return d.order<s||d.order===Hb||!(d.clipMask&c)||function(y,A){return A.length!==0&&A.find(_=>_===y)===void 0}(f,d.clipScope)}function jb(d,s){return d.x-s.x||d.y-s.y}function VL(d,s){return jb(d.min,s.min)===0&&jb(d.max,s.max)===0}function XB(d,s){return!(d.min.x>s.max.x||d.max.x<s.min.x||d.min.y>s.max.y||d.max.y<s.min.y)}function ZB(d,s){if(d.length!==s.length)return!1;for(let c=0;c<d.length;c++)if(d[c].sourceId!==s[c].sourceId||!VL(d[c],s[c])||d[c].order!==s[c].order||d[c].clipMask!==s[c].clipMask||!Re(d[c].clipScope,s[c].clipScope))return!1;return!0}function QL(d,s,c){const f=1/Nn,y=1/(1<<c.canonical.z),A=(s.x*f+c.canonical.x)*y+c.wrap,_=(s.y*f+c.canonical.y)*y;return{min:new Fe((d.x*f+c.canonical.x)*y+c.wrap,(d.y*f+c.canonical.y)*y),max:new Fe(A,_)}}function sG(d,s,c){const f=1<<c.canonical.z,y=((s.x-c.wrap)*f-c.canonical.x)*Nn,A=(s.y*f-c.canonical.y)*Nn;return{min:new Fe(((d.x-c.wrap)*f-c.canonical.x)*Nn,(d.y*f-c.canonical.y)*Nn),max:new Fe(y,A)}}function HL(d,s,c,f,y,A,_){const C=d.indices,P=d.vertices,R=[];for(let w=f;w<f+y;w+=3){const S=s[c[w+0]+A],F=s[c[w+1]+A],T=s[c[w+2]+A],L=Math.min(S.x,F.x,T.x),U=Math.max(S.x,F.x,T.x),V=Math.min(S.y,F.y,T.y),$=Math.max(S.y,F.y,T.y);R.length=0,d.grid.query(new Fe(L,V),new Fe(U,$),R);for(let ee=0;ee<R.length;ee++){const ie=R[ee];if(eo(P[C[3*ie+0]],P[C[3*ie+1]],P[C[3*ie+2]],S,F,T,_))return!0}}return!1}function jL(d,s,c,f){if(!d||!c)return!1;let y=d.vertices;if(!s.canonical.equals(f.canonical)||s.wrap!==f.wrap){if(c.vertices.length<d.vertices.length)return jL(c,f,d,s);const A=s.canonical,_=f.canonical,C=Math.pow(2,_.z-A.z);y=d.vertices.map(P=>new Fe((P.x+A.x*Nn)*C-_.x*Nn,(P.y+A.y*Nn)*C-_.y*Nn))}return HL(c,y,d.indices,0,d.indices.length,0,0)}function $L(d,s,c,f){const y=Math.pow(2,f.z-c.z);return new Fe((d+c.x*Nn)*y-f.x*Nn,(s+c.y*Nn)*y-f.y*Nn)}function GL(d,s){const c=[];s.grid.queryPoint(d,c);const f=s.indices,y=s.vertices;for(let A=0;A<c.length;A++){const _=c[A];if(So([y[f[3*_+0]],y[f[3*_+1]],y[f[3*_+2]]],d))return!0}return!1}const YB=[new Fe(0,0),new Fe(Nn,0),new Fe(Nn,Nn),new Fe(0,Nn)];function KL(d,s){const c=[];let f=[];if(!s||d.length<2)return[d];if(d.length===2)return Bs(d[0],d[1],YB)?[d]:[];for(let y=0;y<d.length+2;y++){const A=d[y%d.length],_=d[(y+1)%d.length],C=Bs(y===0?d[d.length-1]:d[(y-1)%d.length],A,YB),P=Bs(A,_,YB),R=C||P;R&&f.push(A),R&&P||f.length>0&&(f.length>1&&c.push(f),f=[])}return f.length>1&&c.push(f),c}const JB=ny.VectorTileFeature.types,aG=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius","fill-extrusion-line-width","fill-extrusion-emissive-strength"],lG=["fill-extrusion-flood-light-ground-radius"],cG=Math.pow(2,13),uG=Math.pow(2,15)-1,qL=new Fe(0,1),JA=2147483648;function b0(d,s,c,f,y,A,_,C){d.emplaceBack((s<<1)+_,(c<<1)+A,(Math.floor(f*cG)<<1)+y,Math.round(C))}function w0(d,s,c){d.emplaceBack(s.x*Nn,s.y*Nn,c?1:0)}function $b(d,s,c,f,y,A){d.emplaceBack(s.x,s.y,(c.x<<1)+f,(c.y<<1)+y,A)}function x0(d,s,c){d.emplaceBack(s.x,s.y,s.z,c[0]*16384,c[1]*16384,c[2]*16384)}class WL{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class XL{constructor(){this.centroidXY=new Fe(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.polygonSegIdx=-1,this.polygonSegLen=0,this.min=new Fe(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new Fe(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0}span(){return new Fe(this.max.x-this.min.x,this.max.y-this.min.y)}}class ZL{constructor(){this.acc=new Fe(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(s,c){s.min.x===Number.MAX_VALUE&&(s.min.x=s.max.x=c.x,s.min.y=s.max.y=c.y)}appendEdge(s,c,f){this.accCount++,this.acc._add(c);let y=!!this.borders;c.x<s.min.x?(s.min.x=c.x,y=!0):c.x>s.max.x&&(s.max.x=c.x,y=!0),c.y<s.min.y?(s.min.y=c.y,y=!0):c.y>s.max.y&&(s.max.y=c.y,y=!0),((c.x===0||c.x===Nn)&&c.x===f.x)!=((c.y===0||c.y===Nn)&&c.y===f.y)&&this.processBorderOverlap(c,f),y&&this.checkBorderIntersection(c,f)}checkBorderIntersection(s,c){c.x<0!=s.x<0&&this.addBorderIntersection(0,$n(c.y,s.y,(0-c.x)/(s.x-c.x))),c.x>Nn!=s.x>Nn&&this.addBorderIntersection(1,$n(c.y,s.y,(Nn-c.x)/(s.x-c.x))),c.y<0!=s.y<0&&this.addBorderIntersection(2,$n(c.x,s.x,(0-c.y)/(s.y-c.y))),c.y>Nn!=s.y>Nn&&this.addBorderIntersection(3,$n(c.x,s.x,(Nn-c.y)/(s.y-c.y)))}addBorderIntersection(s,c){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const f=this.borders[s];c<f[0]&&(f[0]=c),c>f[1]&&(f[1]=c)}processBorderOverlap(s,c){if(s.x===c.x){if(s.y===c.y)return;const f=s.x===0?0:1;this.addBorderIntersection(f,c.y),this.addBorderIntersection(f,s.y)}else{const f=s.y===0?2:3;this.addBorderIntersection(f,c.x),this.addBorderIntersection(f,s.x)}}centroid(){return this.accCount===0?new Fe(0,0):new Fe(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce((s,c)=>s+ +(c[0]!==Number.MAX_VALUE),0):0}}function YL(d,s){const c=d.add(s)._unit(),f=_n(d.x*c.x+d.y*c.y,-1,1);var y,A,_;return _=Math.acos(f),Math.min(4,Math.max(-4,Math.tan(_)))/4*uG*((y=d).x*(A=s).y-y.y*A.x<0?-1:1)}const hG=[d=>d.x<0,d=>d.x>Nn,d=>d.y<0,d=>d.y>Nn];function dG(d,s,c,f){const y=[4];if(f===0)return y;c._mult(f);const A=d.sub(c),_=s.sub(c),C=[d,s,A,_];for(let P=0;P<4;P++)for(const R of C)if(hG[P](R)){y.push(P);break}return y}class JL{constructor(s){this.vertexArray=new Kh,this.indexArray=new ea,this.programConfigurations=new Vd(s.layers,{zoom:s.zoom,lut:s.lut},c=>lG.includes(c)),this._segments=new hs,this.hiddenByLandmarkVertexArray=new jf,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new hs}getDefaultSegment(){return this.regionSegments[4]}hasData(){return this.vertexArray.length!==0}addData(s,c,f,y=!1){const A=s.length;if(A>2){let _=Math.max(0,this._segments.get().length-1);const C=this._segments._prepareSegment(4*A,this.vertexArray.length,2*this._segmentToGroundQuads[_].length);let P;_!==this._segments.get().length-1&&(_++,this._segmentToGroundQuads[_]=[],this._segmentToRegionTriCounts[_]=[0,0,0,0,0]);{const R=s[0],w=s[1];P=YL(R.sub(s[A-1])._perp()._unit(),w.sub(R)._perp()._unit())}for(let R=0;R<A;R++){const w=R===A-1?0:R+1,S=s[R],F=s[w],T=s[w===A-1?0:w+1],L=F.sub(S)._perp()._unit(),U=YL(L,T.sub(F)._perp()._unit()),V=P,$=U;if(eS(S,F,c)||y&&nF(S,c)&&nF(F,c)){P=U;continue}const ee=C.vertexLength;$b(this.vertexArray,S,F,1,1,V),$b(this.vertexArray,S,F,1,0,V),$b(this.vertexArray,S,F,0,1,$),$b(this.vertexArray,S,F,0,0,$),C.vertexLength+=4;const ie=dG(S,F,L,f);for(const K of ie)this._segmentToGroundQuads[_].push({id:ee,region:K}),this._segmentToRegionTriCounts[_][K]+=2,C.primitiveLength+=2;P=U}}}prepareBorderSegments(){if(!this.hasData())return;const s=this._segments.get(),c=s.length;for(let f=0;f<c;f++)this._segmentToGroundQuads[f].sort((y,A)=>y.region-A.region);for(let f=0;f<c;f++){const y=this._segmentToGroundQuads[f],A=s[f],_=this._segmentToRegionTriCounts[f];_.reduce((P,R)=>P+R,0);let C=0;for(let P=0;P<=4;P++){const R=_[P];if(R!==0){let w=this.regionSegments[P];w||(w=this.regionSegments[P]=new hs);const S={vertexOffset:A.vertexOffset,primitiveOffset:A.primitiveOffset+C,vertexLength:A.vertexLength,primitiveLength:R};w.get().push(S)}C+=R}for(let P=0;P<y.length;P++){const R=y[P].id;this.indexArray.emplaceBack(R,R+1,R+3),this.indexArray.emplaceBack(R,R+3,R+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(s,c,f,y,A,_){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,s,c,f,y,A,_)}upload(s){this.hasData()&&(this.vertexBuffer=s.createVertexBuffer(this.vertexArray,eG.members),this.indexBuffer=s.createIndexBuffer(this.indexArray))}uploadPaintProperties(s){this.hasData()&&this.programConfigurations.upload(s)}update(s,c,f,y,A,_){this.hasData()&&this.programConfigurations.updatePaintArrays(s,c,f,y,A,_)}updateHiddenByLandmark(s){if(!this.hasData())return;const c=s.groundVertexCount+s.groundVertexArrayOffset;if(s.groundVertexCount===0)return;const f=s.flags&JA?1:0;for(let y=s.groundVertexArrayOffset;y<c;++y)this.hiddenByLandmarkVertexArray.emplace(y,f);this._needsHiddenByLandmarkUpdate=!0}uploadHiddenByLandmark(s){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=s.createVertexBuffer(this.hiddenByLandmarkVertexArray,rG.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let s=0;s<=4;s++){const c=this.regionSegments[s];c&&c.destroy()}}}}class Gb{constructor(s){this.zoom=s.zoom,this.canonical=s.canonical,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(c=>c.fqid),this.index=s.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=s.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new ea,this.footprintVertices=new Lc,this.footprintSegments=[],this.layoutVertexArray=new Lu,this.centroidVertexArray=new Sb,this.wallVertexArray=new u0,this.indexArray=new ea,this.programConfigurations=new Vd(s.layers,{zoom:s.zoom,lut:s.lut},c=>aG.includes(c)),this.segments=new hs,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id),this.groundEffect=new JL(s),this.maxHeight=0,this.partLookup={},this.triangleSubSegments=[],this.polygonSegments=[]}updateFootprints(s,c){}populate(s,c,f,y){this.features=[],this.hasPattern=HB("fill-extrusion",this.layers,c),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=At(f),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter,this.wallMode=this.layers[0].paint.get("fill-extrusion-line-width").constantOr(1)!==0;for(const{feature:A,id:_,index:C,sourceLayerIndex:P}of s){const R=this.layers[0]._featureFilter.needGeometry,w=Mn(A,R);if(!this.layers[0]._featureFilter.filter(new Oi(this.zoom),w,f))continue;const S={id:_,sourceLayerIndex:P,index:C,geometry:R?w.geometry:Rn(A,f,y),properties:A.properties,type:A.type,patterns:{}},F=this.layoutVertexArray.length,T=JB[S.type]==="Polygon";if(this.hasPattern)this.features.push(jB("fill-extrusion",this.layers,S,this.zoom,c));else if(this.wallMode)for(const L of S.geometry)for(const U of KL(L,T))this.addFeature(S,[U],C,f,{},c.availableImages,y,c.brightness);else this.addFeature(S,S.geometry,C,f,{},c.availableImages,y,c.brightness);c.featureIndex.insert(A,S.geometry,C,P,this.index,F)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles(),this.groundEffect.prepareBorderSegments(),this.polygonSegments.length=0}addFeatures(s,c,f,y,A,_){for(const C of this.features){const P=JB[C.type]==="Polygon",{geometry:R}=C;if(this.wallMode)for(const w of R)for(const S of KL(w,P))this.addFeature(C,[S],C.index,c,f,y,A,_);else this.addFeature(C,R,C.index,c,f,y,A,_)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles()}update(s,c,f,y,A){const _=Object.keys(s).length!==0;if(_&&!this.stateDependentLayers.length)return;const C=_?this.stateDependentLayers:this.layers;this.programConfigurations.updatePaintArrays(s,c,C,f,y,A),this.groundEffect.update(s,c,C,f,y,A)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,oG),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.wallVertexBuffer=s.createVertexBuffer(this.wallVertexArray,nG.members),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=s.createVertexBuffer(this.layoutVertexExtArray,iG.members,!0)),this.groundEffect.upload(s)),this.groundEffect.uploadPaintProperties(s),this.programConfigurations.upload(s),this.uploaded=!0}uploadCentroid(s){this.groundEffect.uploadHiddenByLandmark(s),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=s.createVertexBuffer(this.centroidVertexArray,tG.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(s,c,f,y,A,_,C,P){const R=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(s,{})/this.tileToMeter,w=[new Fe(0,0),new Fe(Nn,Nn)],S=C.projection,F=S.name==="globe",T=this.wallMode||JB[s.type]==="Polygon",L=new ZL;L.centroidDataIndex=this.centroidData.length;const U=new XL,V=this.layers[0].paint.get("fill-extrusion-base").evaluate(s,{},y)<=0,$=this.layers[0].paint.get("fill-extrusion-height").evaluate(s,{},y);let ee;if(U.height=$,U.vertexArrayOffset=this.layoutVertexArray.length,U.groundVertexArrayOffset=this.groundEffect.vertexArray.length,F&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Vf),this.wallMode){if(F)return void Jr("Non zero fill-extrusion-line-width is not yet supported on globe.");if(c.length!==1)return;ee=function(Oe){const rt=Oe[0].x===Oe[Oe.length-1].x&&Oe[0].y===Oe[Oe.length-1].y;(function(kn){let Bn=0;const br=kn.length;for(let Yn=0;Yn<br;Yn++)Bn+=(kn[(Yn+1)%br].x-kn[Yn].x)*(kn[(Yn+1)%br].y+kn[Yn].y);return Bn>=0})(Oe)||(Oe=Oe.reverse());const ct={geometry:[],joinNormals:[],indices:[]},yt=[],Ct=[],Et=[];let Pt=Oe.length;if(Pt<(rt?3:2))return ct;for(;Pt>=2&&Oe[Pt-1].equals(Oe[Pt-2]);)Pt--;let $t,Lt,dn,xn,tn,Jn=0;for(;Jn<Pt-1&&Oe[Jn].equals(Oe[Jn+1]);)Jn++;rt&&($t=Oe[Pt-2],tn=Oe[Jn].sub($t)._unit()._perp());for(let kn=Jn;kn<Pt;kn++){if(dn=kn===Pt-1?rt?Oe[Jn+1]:void 0:Oe[kn+1],dn&&Oe[kn].equals(dn))continue;tn&&(xn=tn),$t&&(Lt=$t),$t=Oe[kn],tn=dn?dn.sub($t)._unit()._perp():xn,xn=xn||tn;let Bn=xn.add(tn);Bn.x===0&&Bn.y===0||Bn._unit();const br=Bn.x*tn.x+Bn.y*tn.y,Yn=br!==0?1/br:1/0,or=xn.x*tn.y-xn.y*tn.x>0;let Or="miter";const Zr=2;Or==="miter"&&Yn>Zr&&(Or="bevel"),Or==="bevel"&&(Yn>100&&(Or="flipbevel"),Yn<Zr&&(Or="miter"));const Vr=(Qr,ii,ai,so)=>{const Hi=new Fe(Qr.x,Qr.y),Ur=new Fe(Qr.x,Qr.y);Hi.x+=ii.x*so,Hi.y+=ii.y*so,Ur.x-=ii.x*Math.max(ai,1),Ur.y-=ii.y*Math.max(ai,1),Et.push(ii),yt.push(Hi),Ct.push(Ur)};if(Or==="miter")Bn._mult(Yn),Vr($t,Bn,0,0);else if(Or==="flipbevel")Bn=tn.mult(-1),Vr($t,Bn,0,0),Vr($t,Bn.mult(-1),0,0);else{const Qr=-Math.sqrt(Yn*Yn-1),ii=or?Qr:0,ai=or?0:Qr;Lt&&Vr($t,xn,ii,ai),dn&&Vr($t,tn,ii,ai)}}ct.geometry=[...yt,...Ct.reverse(),yt[0]],ct.joinNormals=[...Et,...Et.reverse(),Et[Et.length-1]];const Hn=ct.geometry.length-1;for(let kn=0;kn<Hn/2;kn++)if(kn+1<Hn/2){let Bn=kn,br=kn+1,Yn=Hn-1-kn,or=Hn-2-kn;Bn=Bn===0?Hn-1:Bn-1,br=br===0?Hn-1:br-1,Yn=Yn===0?Hn-1:Yn-1,or=or===0?Hn-1:or-1,ct.indices.push(Yn),ct.indices.push(br),ct.indices.push(Bn),ct.indices.push(Yn),ct.indices.push(or),ct.indices.push(br)}return ct}(c[0]),c=[ee.geometry]}const ie=(Oe,rt)=>Oe<(rt.length-1)/2||Oe===rt.length-1,K=this.wallMode?[c]:zb(c,500);for(let Oe=K.length-1;Oe>=0;Oe--){const rt=K[Oe];(rt.length===0||(ce=rt[0]).every(je=>je.x<=0)||ce.every(je=>je.x>=Nn)||ce.every(je=>je.y<=0)||ce.every(je=>je.y>=Nn))&&K.splice(Oe,1)}var ce;let he;if(F)he=sF(K,w,y);else{he=[];for(const Oe of K)he.push({polygon:Oe,bounds:w})}const Be=T?this.edgeRadius:0,Ne=Be>0&&this.zoom<17,Ve=(Oe,rt)=>{if(Oe.length===0)return!1;const je=Oe[Oe.length-1];return rt.x===je.x&&rt.y===je.y};for(const{polygon:Oe,bounds:rt}of he){let je=0,ct=0;for(const Pt of Oe)T&&!Pt[0].equals(Pt[Pt.length-1])&&Pt.push(Pt[0]),ct+=T?Pt.length-1:Pt.length;const yt=this.segments.prepareSegment((T?5:4)*ct,this.layoutVertexArray,this.indexArray);U.footprintSegIdx<0&&(U.footprintSegIdx=this.footprintSegments.length),U.polygonSegIdx<0&&(U.polygonSegIdx=this.polygonSegments.length);const Ct={triangleArrayOffset:this.indexArray.length,triangleCount:0,triangleSegIdx:this.segments.segments.length-1},Et=new WL;if(Et.vertexOffset=this.footprintVertices.length,Et.indexOffset=3*this.footprintIndices.length,Et.ringIndices=[],T){const Pt=[],$t=[];je=yt.vertexLength;for(let dn=0;dn<Oe.length;dn++){const xn=Oe[dn];xn.length&&dn!==0&&$t.push(Pt.length/2);const tn=[];let Jn,Hn;Jn=xn[1].sub(xn[0])._perp()._unit(),Et.ringIndices.push(xn.length-1);for(let kn=1;kn<xn.length;kn++){const Bn=xn[kn],br=xn[kn===xn.length-1?1:kn+1],Yn=Bn.clone();if(Be){Hn=br.sub(Bn)._perp()._unit();const or=Jn.add(Hn)._unit(),Or=Be*Math.min(4,1/(Jn.x*or.x+Jn.y*or.y));Yn.x+=Or*or.x,Yn.y+=Or*or.y,Yn.x=Math.round(Yn.x),Yn.y=Math.round(Yn.y),Jn=Hn}if(!V||Be!==0&&!Ne||Ve(tn,Yn)||tn.push(Yn),b0(this.layoutVertexArray,Yn.x,Yn.y,0,0,1,1,0),this.wallMode){const or=ie(kn,xn);w0(this.wallVertexArray,ee.joinNormals[kn],!or)}yt.vertexLength++,this.footprintVertices.emplaceBack(Bn.x,Bn.y),Pt.push(Bn.x,Bn.y),F&&x0(this.layoutVertexExtArray,S.projectTilePoint(Yn.x,Yn.y,y),S.upVector(y,Yn.x,Yn.y))}V&&(Be===0||Ne)&&(tn.length!==0&&Ve(tn,tn[0])&&tn.pop(),this.groundEffect.addData(tn,rt,R))}const Lt=this.wallMode?ee.indices:g0(Pt,$t);for(let dn=0;dn<Lt.length;dn+=3)this.footprintIndices.emplaceBack(Et.vertexOffset+Lt[dn+0],Et.vertexOffset+Lt[dn+1],Et.vertexOffset+Lt[dn+2]),this.indexArray.emplaceBack(je+Lt[dn],je+Lt[dn+2],je+Lt[dn+1]),yt.primitiveLength++;Et.indexCount+=Lt.length,Et.vertexCount+=this.footprintVertices.length-Et.vertexOffset}for(let Pt=0;Pt<Oe.length;Pt++){const $t=Oe[Pt];L.startRing(U,$t[0]);let Lt=$t.length>4&&rF($t[$t.length-2],$t[0],$t[1]),dn=Be?fG($t[$t.length-2],$t[0],$t[1],Be):0;const xn=[];let tn,Jn,Hn;Jn=$t[1].sub($t[0])._perp()._unit();let kn=!0;for(let Bn=1,br=0;Bn<$t.length;Bn++){let Yn=$t[Bn-1],or=$t[Bn];const Or=$t[Bn===$t.length-1?1:Bn+1];if(L.appendEdge(U,or,Yn),eS(or,Yn,rt)){Be&&(Jn=Or.sub(or)._perp()._unit(),kn=!kn);continue}const Zr=or.sub(Yn)._perp(),Vr=Zr.x/(Math.abs(Zr.x)+Math.abs(Zr.y)),Qr=Zr.y>0?1:0,ii=Yn.dist(or);if(br+ii>32768&&(br=0),Be){Hn=Or.sub(or)._perp()._unit();let Ur=tF(Yn,or,Or,eF(Jn,Hn),Be);isNaN(Ur)&&(Ur=0);const Di=or.sub(Yn)._unit();Yn=Yn.add(Di.mult(dn))._round(),or=or.add(Di.mult(-Ur))._round(),dn=Ur,Jn=Hn,V&&this.zoom>=17&&(Ve(xn,Yn)||xn.push(Yn),Ve(xn,or)||xn.push(or))}const ai=yt.vertexLength,so=$t.length>4&&rF(Yn,or,Or);let Hi=iF(br,Lt,kn);if(b0(this.layoutVertexArray,Yn.x,Yn.y,Vr,Qr,0,0,Hi),b0(this.layoutVertexArray,Yn.x,Yn.y,Vr,Qr,0,1,Hi),this.wallMode){const Ur=ie(Bn-1,$t),Di=ee.joinNormals[Bn-1];w0(this.wallVertexArray,Di,Ur),w0(this.wallVertexArray,Di,Ur)}if(br+=ii,Hi=iF(br,so,!kn),Lt=so,b0(this.layoutVertexArray,or.x,or.y,Vr,Qr,0,0,Hi),b0(this.layoutVertexArray,or.x,or.y,Vr,Qr,0,1,Hi),this.wallMode){const Ur=ie(Bn,$t),Di=ee.joinNormals[Bn];w0(this.wallVertexArray,Di,Ur),w0(this.wallVertexArray,Di,Ur)}if(yt.vertexLength+=4,this.indexArray.emplaceBack(ai+0,ai+1,ai+2),this.indexArray.emplaceBack(ai+1,ai+3,ai+2),yt.primitiveLength+=2,Be){const Ur=je+(Bn===1?$t.length-2:Bn-2),Di=Bn===1?je:Ur+1;if(this.indexArray.emplaceBack(ai+1,Ur,ai+3),this.indexArray.emplaceBack(Ur,Di,ai+3),yt.primitiveLength+=2,tn===void 0&&(tn=ai),!eS(Or,$t[Bn],rt)){const zi=Bn===$t.length-1?tn:yt.vertexLength;this.indexArray.emplaceBack(ai+2,ai+3,zi),this.indexArray.emplaceBack(ai+3,zi+1,zi),this.indexArray.emplaceBack(ai+3,Di,zi+1),yt.primitiveLength+=3}kn=!kn}if(F){const Ur=this.layoutVertexExtArray,Di=S.projectTilePoint(Yn.x,Yn.y,y),zi=S.projectTilePoint(or.x,or.y,y),To=S.upVector(y,Yn.x,Yn.y),_s=S.upVector(y,or.x,or.y);x0(Ur,Di,To),x0(Ur,Di,To),x0(Ur,zi,_s),x0(Ur,zi,_s)}}T&&(je+=$t.length-1),V&&Be&&this.zoom>=17&&(xn.length!==0&&Ve(xn,xn[0])&&xn.pop(),this.groundEffect.addData(xn,rt,R,Be>0))}this.footprintSegments.push(Et),Ct.triangleCount=this.indexArray.length-Ct.triangleArrayOffset,this.polygonSegments.push(Ct),++U.footprintSegLen,++U.polygonSegLen}if(U.vertexCount=this.layoutVertexArray.length-U.vertexArrayOffset,U.groundVertexCount=this.groundEffect.vertexArray.length-U.groundVertexArrayOffset,U.vertexCount!==0){if(U.centroidXY=L.borders?qL:this.encodeCentroid(L,U),this.centroidData.push(U),L.borders){this.featuresOnBorder.push(L);const Oe=this.featuresOnBorder.length-1;for(let rt=0;rt<L.borders.length;rt++)L.borders[rt][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[rt].push(Oe)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,f,A,_,y,P),this.groundEffect.addPaintPropertiesData(s,f,A,_,y,P),this.maxHeight=Math.max(this.maxHeight,$)}}sortBorders(){for(let s=0;s<this.borderFeatureIndices.length;s++)this.borderFeatureIndices[s].sort((c,f)=>this.featuresOnBorder[c].borders[s][0]-this.featuresOnBorder[f].borders[s][0])}splitToSubtiles(){const s=[];for(let C=0;C<this.centroidData.length;C++){const P=this.centroidData[C],R=+(P.min.y+P.max.y>Nn),w=2*R+(+(P.min.x+P.max.x>Nn)^R);for(let S=0;S<P.polygonSegLen;S++){const F=P.polygonSegIdx+S;s.push({centroidIdx:C,subtile:w,polygonSegmentIdx:F,triangleSegmentIdx:this.polygonSegments[F].triangleSegIdx})}}const c=new ea;s.sort((C,P)=>C.triangleSegmentIdx===P.triangleSegmentIdx?C.subtile-P.subtile:C.triangleSegmentIdx-P.triangleSegmentIdx);let f=0,y=0,A=0;for(const C of s){if(C.triangleSegmentIdx!==f)break;A++}const _=s.length;for(;y!==s.length;){f=s[y].triangleSegmentIdx;let C=0,P=y,R=y;for(let w=P;w<A&&s[w].subtile===C;w++)R++;for(;P!==A;){const w=s[P];C=w.subtile;const S=this.centroidData[w.centroidIdx].min.clone(),F=this.centroidData[w.centroidIdx].max.clone(),T={vertexOffset:this.segments.segments[f].vertexOffset,primitiveOffset:c.length,vertexLength:this.segments.segments[f].vertexLength,primitiveLength:0,sortKey:void 0,vaos:{}};for(let L=P;L<R;L++){const U=s[L],V=this.polygonSegments[U.polygonSegmentIdx],$=this.centroidData[U.centroidIdx].min,ee=this.centroidData[U.centroidIdx].max,ie=this.indexArray.uint16;for(let K=V.triangleArrayOffset;K<V.triangleArrayOffset+V.triangleCount;K++)c.emplaceBack(ie[3*K],ie[3*K+1],ie[3*K+2]);T.primitiveLength+=V.triangleCount,S.x=Math.min(S.x,$.x),S.y=Math.min(S.y,$.y),F.x=Math.max(F.x,ee.x),F.y=Math.max(F.y,ee.y)}T.primitiveLength>0&&this.triangleSubSegments.push({segment:T,min:S,max:F}),P=R;for(let L=P;L<A&&s[L].subtile===s[P].subtile;L++)R++}y=A;for(let w=y;w<_&&s[w].triangleSegmentIdx===s[y].triangleSegmentIdx;w++)A++}c._trim(),this.indexArray=c}getVisibleSegments(s,c,f){const y=new hs;if(this.wallMode){for(const U of this.triangleSubSegments)y.segments.push(U.segment);return y}let A=0,_=0;const C=1<<s.canonical.z;if(c){const U=c.getMinMaxForTile(s);U&&(A=U.min,_=U.max)}_+=this.maxHeight;const P=s.toUnwrapped();let R;const w=[P.canonical.x/C+P.wrap,P.canonical.y/C],S=[(P.canonical.x+1)/C+P.wrap,(P.canonical.y+1)/C],F=(U,V,$)=>[U[0]*(1-$[0])+V[0]*$[0],U[1]*(1-$[1])+V[1]*$[1]],T=[],L=[];for(const U of this.triangleSubSegments){T[0]=U.min.x/Nn,T[1]=U.min.y/Nn,L[0]=U.max.x/Nn,L[1]=U.max.y/Nn;const V=F(w,S,T),$=F(w,S,L);if(new bo([V[0],V[1],A],[$[0],$[1],_]).intersectsPrecise(f)===0){R&&(y.segments.push(R),R=void 0);continue}const ee=U.segment;R&&R.vertexOffset!==ee.vertexOffset&&(y.segments.push(R),R=void 0),R?(R.vertexLength+=ee.vertexLength,R.primitiveLength+=ee.primitiveLength):R={vertexOffset:ee.vertexOffset,primitiveLength:ee.primitiveLength,vertexLength:ee.vertexLength,primitiveOffset:ee.primitiveOffset,sortKey:void 0,vaos:{}}}return R&&y.segments.push(R),y}encodeCentroid(s,c){const f=s.centroid(),y=c.span(),A=Math.min(7,Math.round(y.x*this.tileToMeter/10)),_=Math.min(7,Math.round(y.y*this.tileToMeter/10));return new Fe(_n(f.x,1,Nn-1)<<3|A,_n(f.y,1,Nn-1)<<3|_)}encodeBorderCentroid(s){if(!s.borders)return new Fe(0,0);const c=s.borders,f=Number.MAX_VALUE;if(c[0][0]!==f||c[1][0]!==f){const y=c[0][0]!==f?0:1;return new Fe(6|(c[0][0]!==f?0:65528),(c[y][0]+c[y][1])/2<<3|6)}{const y=c[2][0]!==f?2:3;return new Fe((c[y][0]+c[y][1])/2<<3|6,6|(c[2][0]!==f?0:65528))}}showCentroid(s){const c=this.centroidData[s.centroidDataIndex];c.flags&=JA,c.centroidXY.x=0,c.centroidXY.y=0,this.writeCentroidToBuffer(c)}writeCentroidToBuffer(s){this.groundEffect.updateHiddenByLandmark(s);const c=s.vertexArrayOffset,f=s.vertexCount+s.vertexArrayOffset,y=s.flags&JA?qL:s.centroidXY,A=this.centroidVertexArray.geta_centroid_pos0(c);if(this.centroidVertexArray.geta_centroid_pos1(c)!==y.y||A!==y.x){for(let _=c;_<f;++_)this.centroidVertexArray.emplace(_,y.x,y.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const s of this.centroidData)this.writeCentroidToBuffer(s)}updateReplacement(s,c,f){if(c.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=c.updateTime;const y=c.getReplacementRegionsForTile(s.toUnwrapped());if(ZB(this.activeReplacements,y))return;if(this.activeReplacements=y,this.centroidVertexArray.length===0)this.createCentroidsBuffer();else for(const _ of this.centroidData)_.flags&=2147483647;const A=[];for(const _ of this.activeReplacements){if(_.order<f)continue;const C=Math.pow(2,_.footprintTileId.canonical.z-s.canonical.z);for(const P of this.centroidData)if(!(P.flags&JA||_.min.x>P.max.x||P.min.x>_.max.x||_.min.y>P.max.y||P.min.y>_.max.y))for(let R=0;R<P.footprintSegLen;R++){const w=this.footprintSegments[P.footprintSegIdx+R];if(A.length=0,AG(this.footprintVertices,w.vertexOffset,w.vertexCount,_.footprintTileId.canonical,s.canonical,A),HL(_.footprint,A,this.footprintIndices.uint16,w.indexOffset,w.indexCount,-w.vertexOffset,-C)){P.flags|=JA;break}}}for(const _ of this.centroidData)this.writeCentroidToBuffer(_);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(s,c,f){let y=!1;for(let A=0;A<f.footprintSegLen;A++){const _=this.footprintSegments[f.footprintSegIdx+A];let C=0;for(const P of _.ringIndices){for(let R=C,w=P+C-1;R<P+C;w=R++){const S=this.footprintVertices.int16[2*(R+_.vertexOffset)+0],F=this.footprintVertices.int16[2*(R+_.vertexOffset)+1],T=this.footprintVertices.int16[2*(w+_.vertexOffset)+1];F>c!=T>c&&s<(this.footprintVertices.int16[2*(w+_.vertexOffset)+0]-S)*(c-F)/(T-F)+S&&(y=!y)}C=P}}return y}getHeightAtTileCoord(s,c){let f=Number.NEGATIVE_INFINITY,y=!0;const A=4*(s+Nn)*Nn+(c+Nn);if(this.partLookup.hasOwnProperty(A)){const _=this.partLookup[A];return _?{height:_.height,hidden:!!(_.flags&JA)}:void 0}for(const _ of this.centroidData)s>_.max.x||_.min.x>s||c>_.max.y||_.min.y>c||this.footprintContainsPoint(s,c,_)&&_&&_.height>f&&(f=_.height,this.partLookup[A]=_,y=!!(_.flags&JA));if(f!==Number.NEGATIVE_INFINITY)return{height:f,hidden:y};this.partLookup[A]=void 0}}function eF(d,s){const c=d.add(s)._unit();return d.x*c.x+d.y*c.y}function fG(d,s,c,f){const y=s.sub(d)._perp()._unit(),A=c.sub(s)._perp()._unit();return tF(d,s,c,eF(y,A),f)}function tF(d,s,c,f,y){const A=Math.sqrt(1-f*f);return Math.min(d.dist(s)/3,s.dist(c)/3,y*A/f)}function eS(d,s,c){return d.x<c[0].x&&s.x<c[0].x||d.x>c[1].x&&s.x>c[1].x||d.y<c[0].y&&s.y<c[0].y||d.y>c[1].y&&s.y>c[1].y}function nF(d,s){return d.x<s[0].x||d.x>s[1].x||d.y<s[0].y||d.y>s[1].y}function rF(d,s,c){if(d.x<0||d.x>=Nn||s.x<0||s.x>=Nn||c.x<0||c.x>=Nn)return!1;const f=c.sub(s),y=f.perp(),A=d.sub(s);return(f.x*A.x+f.y*A.y)/Math.sqrt((f.x*f.x+f.y*f.y)*(A.x*A.x+A.y*A.y))>-.866&&y.x*A.x+y.y*A.y<0}function iF(d,s,c){const f=s?2|d:-3&d;return c?1|f:-2&f}function oF(){const d=Math.PI/32,s=Math.tan(d),c=W;return c*Math.sqrt(1+2*s*s)-c}function sF(d,s,c){const f=1<<c.z,y=Xe(c.x/f),A=Xe((c.x+1)/f),_=qe(c.y/f),C=qe((c.y+1)/f);return function(P,R,w,S,F=0,T){const L=[];if(!P.length||!w||!S)return L;const U=(he,Be)=>{for(const Ne of he)L.push({polygon:Ne,bounds:Be})},V=Math.ceil(Math.log2(w)),$=Math.ceil(Math.log2(S)),ee=V-$,ie=[];for(let he=0;he<Math.abs(ee);he++)ie.push(ee>0?0:1);for(let he=0;he<Math.min(V,$);he++)ie.push(0),ie.push(1);let K=P;if(K=Qb(K,R[0].y-F,R[1].y+F,1),K=Qb(K,R[0].x-F,R[1].x+F,0),!K.length)return L;const ce=[];for(ie.length?ce.push({polygons:K,bounds:R,depth:0}):U(K,R);ce.length;){const he=ce.pop(),Be=he.depth,Ne=ie[Be],Ve=he.bounds[0],Oe=he.bounds[1],rt=Ne===0?Ve.x:Ve.y,je=Ne===0?Oe.x:Oe.y,ct=T?T(Ne,rt,je):.5*(rt+je),yt=Qb(he.polygons,rt-F,ct+F,Ne),Ct=Qb(he.polygons,ct-F,je+F,Ne);if(yt.length){const Et=[Ve,new Fe(Ne===0?ct:Oe.x,Ne===1?ct:Oe.y)];ie.length>Be+1?ce.push({polygons:yt,bounds:Et,depth:Be+1}):U(yt,Et)}if(Ct.length){const Et=[new Fe(Ne===0?ct:Ve.x,Ne===1?ct:Ve.y),Oe];ie.length>Be+1?ce.push({polygons:Ct,bounds:Et,depth:Be+1}):U(Ct,Et)}}return L}(d,s,Math.ceil((A-y)/11.25),Math.ceil((_-C)/11.25),1,(P,R,w)=>{if(P===0)return .5*(R+w);{const S=qe((c.y+R/Nn)/f);return(Qe(.5*(qe((c.y+w/Nn)/f)+S))*f-c.y)*Nn}})}function AG(d,s,c,f,y,A){const _=Math.pow(2,f.z-y.z);for(let C=0;C<c;C++){let P=d.int16[2*(C+s)+0],R=d.int16[2*(C+s)+1];P=(P+y.x*Nn)*_-f.x*Nn,R=(R+y.y*Nn)*_-f.y*Nn,A.push(new Fe(P,R))}}let aF,lF;function C0(d,s){return d.x*s.x+d.y*s.y}function cF(d,s){if(d.length===1){let c=0;const f=s[c++];let y;for(;!y||f.equals(y);)if(y=s[c++],!y)return 1/0;for(;c<s.length;c++){const A=s[c],_=d[0],C=y.sub(f),P=A.sub(f),R=_.sub(f),w=C0(C,C),S=C0(C,P),F=C0(P,P),T=C0(R,C),L=C0(R,P),U=w*F-S*S,V=(F*T-S*L)/U,$=(w*L-S*T)/U,ee=f.z*(1-V-$)+y.z*V+A.z*$;if(isFinite(ee))return ee}return 1/0}{let c=1/0;for(const f of s)c=Math.min(c,f.z);return c}}function uF(d,s,c,f,y,A,_,C){const P=_*y.getElevationAt(d,s,!0,!0),R=A[0]!==0,w=R?A[1]===0?_*(A[0]/7-450):_*function(S,F,T){const L=Math.floor(F[0]/8),U=Math.floor(F[1]/8),V=10*(F[0]-8*L),$=10*(F[1]-8*U),ee=S.getElevationAt(L,U,!0,!0),ie=S.getMeterToDEM(T),K=Math.floor(.5*(V*ie-1)),ce=Math.floor(.5*($*ie-1)),he=S.tileCoordToPixel(L,U),Be=2*K+1,Ne=2*ce+1,Ve=function(Ct,Et,Pt,$t,Lt){return[Ct.getElevationAtPixel(Et,Pt,!0),Ct.getElevationAtPixel(Et+Lt,Pt,!0),Ct.getElevationAtPixel(Et,Pt+Lt,!0),Ct.getElevationAtPixel(Et+$t,Pt+Lt,!0)]}(S,he.x-K,he.y-ce,Be,Ne),Oe=Math.abs(Ve[0]-Ve[1]),rt=Math.abs(Ve[2]-Ve[3]),je=Math.abs(Ve[0]-Ve[2])+Math.abs(Ve[1]-Ve[3]),ct=Math.min(.25,.5*ie*(Oe+rt)/Be),yt=Math.min(.25,.5*ie*je/Ne);return ee+Math.max(ct*V,yt*$)}(y,A,C):P;return{base:P+(c===0)?-1:c,top:R?Math.max(w+f,P+c+2):P+f}}He(Gb,"FillExtrusionBucket",{omit:["layers","features"]}),He(XL,"PartData"),He(WL,"FootprintSegment"),He(ZL,"BorderCentroidData"),He(JL,"GroundEffect");const pG=Bi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),mG=Bi([{name:"a_z_offset",components:1,type:"Float32"}],4),{members:gG}=pG,yG=Bi([{name:"a_packed",components:4,type:"Float32"}]),{members:_G}=yG,vG=Bi([{name:"a_pattern_data",components:3,type:"Float32"}]),{members:bG}=vG;class hF{constructor(s,c){this.width=s,this.height=c,this.nextRow=0,this.image=new YA({width:s,height:c}),this.positions={},this.uploaded=!1}getDash(s,c){const f=this.getKey(s,c);return this.positions[f]}trim(){const s=this.width,c=this.height=to(this.nextRow);this.image.resize({width:s,height:c})}getKey(s,c){return s.join(",")+c}getDashRanges(s,c,f){const y=[];let A=s.length%2==1?-s[s.length-1]*f:0,_=s[0]*f,C=!0;y.push({left:A,right:_,isDash:C,zeroLength:s[0]===0});let P=s[0];for(let R=1;R<s.length;R++){C=!C;const w=s[R];A=P*f,P+=w,_=P*f,y.push({left:A,right:_,isDash:C,zeroLength:w===0})}return y}addRoundDash(s,c,f){const y=c/2;for(let A=-f;A<=f;A++){const _=this.width*(this.nextRow+f+A);let C=0,P=s[C];for(let R=0;R<this.width;R++){R/P.right>1&&(P=s[++C]);const w=Math.abs(R-P.left),S=Math.abs(R-P.right),F=Math.min(w,S);let T;const L=A/f*(y+1);if(P.isDash){const U=y-Math.abs(L);T=Math.sqrt(F*F+U*U)}else T=y-Math.sqrt(F*F+L*L);this.image.data[_+R]=Math.max(0,Math.min(255,T+128))}}}addRegularDash(s,c){for(let P=s.length-1;P>=0;--P){const R=s[P],w=s[P+1];R.zeroLength?s.splice(P,1):w&&w.isDash===R.isDash&&(w.left=R.left,s.splice(P,1))}const f=s[0],y=s[s.length-1];f.isDash===y.isDash&&(f.left=y.left-this.width,y.right=f.right+this.width);const A=this.width*this.nextRow;let _=0,C=s[_];for(let P=0;P<this.width;P++){P/C.right>1&&(C=s[++_]);const R=Math.abs(P-C.left),w=Math.abs(P-C.right),S=Math.min(R,w);this.image.data[A+P]=Math.max(0,Math.min(255,(C.isDash?S:-S)+c+128))}}addDash(s,c){const f=this.getKey(s,c);if(this.positions[f])return this.positions[f];const y=c==="round",A=y?7:0,_=2*A+1;if(this.nextRow+_>this.height)return Jr("LineAtlas out of space"),null;s.length===0&&s.push(1);let C=0;for(let w=0;w<s.length;w++)s[w]<0&&(Jr("Negative value is found in line dasharray, replacing values with 0"),s[w]=0),C+=s[w];if(C!==0){const w=this.width/C,S=this.getDashRanges(s,this.width,w);y?this.addRoundDash(S,w,A):this.addRegularDash(S,c==="square"?.5*w:0)}const P=this.nextRow+A;this.nextRow+=_;const R={tl:[P,A],br:[C,0]};return this.positions[f]=R,R}}He(hF,"LineAtlas");const wG=ny.VectorTileFeature.types,xG=Math.cos(Math.PI/180*37.5),CG=Math.cos(Math.PI/180*5);class tS{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(c=>c.fqid),this.index=s.index,this.projection=s.projection,this.hasPattern=!1,this.hasZOffset=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(c=>{this.gradients[c.id]={}}),this.layoutVertexArray=new zf,this.layoutVertexArray2=new Sl,this.patternVertexArray=new Fu,this.indexArray=new ea,this.programConfigurations=new Vd(s.layers,{zoom:s.zoom,lut:s.lut}),this.segments=new hs,this.maxLineLength=0,this.zOffsetVertexArray=new Ud,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id),this.tessellationStep=s.tessellationStep?s.tessellationStep:Nn/64}updateFootprints(s,c){}populate(s,c,f,y){this.hasPattern=HB("line",this.layers,c);const A=this.layers[0].layout.get("line-sort-key"),_=this.layers[0].layout.get("line-z-offset");this.hasZOffset=!_.isConstant()||!!_.constantOr(0);const C=[];for(const{feature:S,id:F,index:T,sourceLayerIndex:L}of s){const U=this.layers[0]._featureFilter.needGeometry,V=Mn(S,U);if(!this.layers[0]._featureFilter.filter(new Oi(this.zoom),V,f))continue;const $=A?A.evaluate(V,{},f):void 0,ee={id:F,properties:S.properties,type:S.type,sourceLayerIndex:L,index:T,geometry:U?V.geometry:Rn(S,f,y),patterns:{},sortKey:$};C.push(ee)}A&&C.sort((S,F)=>S.sortKey-F.sortKey);const{lineAtlas:P,featureIndex:R}=c,w=this.addConstantDashes(P);for(const S of C){const{geometry:F,index:T,sourceLayerIndex:L}=S;if(w&&this.addFeatureDashes(S,P),this.hasPattern){const U=jB("line",this.layers,S,this.zoom,c);this.patternFeatures.push(U)}else this.addFeature(S,F,T,f,P.positions,c.availableImages,c.brightness);R.insert(s[T].feature,F,T,L,this.index)}}addConstantDashes(s){let c=!1;for(const f of this.layers){const y=f.paint.get("line-dasharray").value,A=f.layout.get("line-cap").value;if(y.kind!=="constant"||A.kind!=="constant")c=!0;else{const _=A.value,C=y.value;if(!C)continue;s.addDash(C,_)}}return c}addFeatureDashes(s,c){const f=this.zoom;for(const y of this.layers){const A=y.paint.get("line-dasharray").value,_=y.layout.get("line-cap").value;if(A.kind==="constant"&&_.kind==="constant")continue;let C,P;if(A.kind==="constant"){if(C=A.value,!C)continue}else C=A.evaluate({zoom:f},s);P=_.kind==="constant"?_.value:_.evaluate({zoom:f},s),c.addDash(C,P),s.patterns[y.id]=c.getKey(C,P)}}update(s,c,f,y,A){const _=Object.keys(s).length!==0;_&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(s,c,_?this.stateDependentLayers:this.layers,f,y,A)}addFeatures(s,c,f,y,A,_){for(const C of this.patternFeatures)this.addFeature(C,C.geometry,C.index,c,f,y,_)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=s.createVertexBuffer(this.layoutVertexArray2,_G)),this.patternVertexArray.length!==0&&(this.patternVertexBuffer=s.createVertexBuffer(this.patternVertexArray,bG)),!this.zOffsetVertexBuffer&&this.zOffsetVertexArray.length>0&&(this.zOffsetVertexBuffer=s.createVertexBuffer(this.zOffsetVertexArray,mG.members,!0)),this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,gG),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(s){if(s.properties&&s.properties.hasOwnProperty("mapbox_clip_start")&&s.properties.hasOwnProperty("mapbox_clip_end"))return{start:+s.properties.mapbox_clip_start,end:+s.properties.mapbox_clip_end}}addFeature(s,c,f,y,A,_,C){const P=this.layers[0].layout,R=P.get("line-join").evaluate(s,{}),w=P.get("line-cap").evaluate(s,{}),S=P.get("line-miter-limit"),F=P.get("line-round-limit");this.lineClips=this.lineFeatureClips(s);for(const T of c)this.addLine(T,s,y,R,w,S,F);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,f,A,_,y,C)}addLine(s,c,f,y,A,_,C){this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.currentVertex=void 0;const P={zoom:this.zoom,lineProgress:void 0},R=this.layers[0].layout,w=y==="none";if(this.patternJoinNone=this.hasPattern&&w,this.segmentStart=0,this.segmentStartf32=0,this.segmentPoints=[],this.lineClips){this.lineClipsArray.push(this.lineClips);for(let he=0;he<s.length-1;he++)this.totalDistance+=s[he].dist(s[he+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const S=wG[c.type]==="Polygon";let F=s.length;for(;F>=2&&s[F-1].equals(s[F-2]);)F--;let T=0;for(;T<F-1&&s[T].equals(s[T+1]);)T++;if(F<(S?3:2))return;y==="bevel"&&(_=1.05);const L=this.overscaling<=16?15*Nn/(512*this.overscaling):0,U=this.segments.prepareSegment(10*F,this.layoutVertexArray,this.indexArray);let V,$,ee,ie,K,ce;this.e1=this.e2=-1,S&&(V=s[F-2],K=s[T].sub(V)._unit()._perp());for(let he=T;he<F;he++){if(ee=he===F-1?S?s[T+1]:void 0:s[he+1],ee&&s[he].equals(ee))continue;if(K&&(ie=K),V&&($=V),V=s[he],this.hasZOffset){const Et=R.get("line-z-offset").value;if(Et.kind==="constant")ce=Et.value;else{if(this.lineClips){const Pt=this.totalDistance/(this.lineClips.end-this.lineClips.start);P.lineProgress=(Pt*this.lineClips.start+this.distance+($?$.dist(V):0))/Pt}else Jr(`line-z-offset evaluation for ${this.layerIds[0]} requires enabling 'lineMetrics' for the source.`),P.lineProgress=0;ce=Et.evaluate(P,c)}ce=ce||0}K=ee?ee.sub(V)._unit()._perp():ie,ie=ie||K;const Be=$&&ee;let Ne=Be?y:S||w?"butt":A;const Ve=ie.x*K.x+ie.y*K.y;if(w){const Et=function(Pt){if(Pt.patternJoinNone){const $t=Pt.segmentPoints.length/2,Lt=Pt.lineSoFar-Pt.segmentStart;for(let dn=0;dn<$t;++dn){const xn=Pt.segmentPoints[2*dn+1],tn=Math.round(Pt.segmentPoints[2*dn])+.5+.25*xn;Pt.patternVertexArray.emplaceBack(tn,Lt,Pt.segmentStart),Pt.patternVertexArray.emplaceBack(tn,Lt,Pt.segmentStart)}Pt.segmentPoints.length=0}Pt.e1=Pt.e2=-1};if(Be&&Ve<CG){this.updateDistance($,V),this.addCurrentVertex(V,ie,1,1,U,ce),Et(this),this.addCurrentVertex(V,K,-1,-1,U,ce);continue}if($){if(!ee){this.updateDistance($,V),this.addCurrentVertex(V,ie,1,1,U,ce),Et(this);continue}Ne="miter"}}let Oe=ie.add(K);Oe.x===0&&Oe.y===0||Oe._unit();const rt=Oe.x*K.x+Oe.y*K.y,je=rt!==0?1/rt:1/0,ct=2*Math.sqrt(2-2*rt),yt=rt<xG&&$&&ee,Ct=ie.x*K.y-ie.y*K.x>0;if(yt&&he>T){const Et=V.dist($);if(Et>2*L){const Pt=V.sub(V.sub($)._mult(L/Et)._round());this.updateDistance($,Pt),this.addCurrentVertex(Pt,ie,0,0,U,ce),$=Pt}}if(Be&&Ne==="round"&&(je<C?Ne="miter":je<=2&&(Ne="fakeround")),Ne==="miter"&&je>_&&(Ne="bevel"),Ne==="bevel"&&(je>2&&(Ne="flipbevel"),je<_&&(Ne="miter")),$&&this.updateDistance($,V),Ne==="miter")Oe._mult(je),this.addCurrentVertex(V,Oe,0,0,U,ce);else if(Ne==="flipbevel"){if(je>100)Oe=K.mult(-1);else{const Et=je*ie.add(K).mag()/ie.sub(K).mag();Oe._perp()._mult(Et*(Ct?-1:1))}this.addCurrentVertex(V,Oe,0,0,U,ce),this.addCurrentVertex(V,Oe.mult(-1),0,0,U,ce)}else if(Ne==="bevel"||Ne==="fakeround"){const Et=-Math.sqrt(je*je-1),Pt=Ct?Et:0,$t=Ct?0:Et;if($&&this.addCurrentVertex(V,ie,Pt,$t,U,ce),Ne==="fakeround"){const Lt=Math.round(180*ct/Math.PI/20);for(let dn=1;dn<Lt;dn++){let xn=dn/Lt;if(xn!==.5){const Jn=xn-.5;xn+=xn*Jn*(xn-1)*((1.0904+Ve*(Ve*(3.55645-1.43519*Ve)-3.2452))*Jn*Jn+(.848013+Ve*(.215638*Ve-1.06021)))}const tn=K.sub(ie)._mult(xn)._add(ie)._unit()._mult(Ct?-1:1);this.addHalfVertex(V,tn.x,tn.y,!1,Ct,0,U,ce)}}ee&&this.addCurrentVertex(V,K,-Pt,-$t,U,ce)}else Ne==="butt"?this.addCurrentVertex(V,Oe,0,0,U,ce):Ne==="square"?($||this.addCurrentVertex(V,Oe,-1,-1,U,ce),this.addCurrentVertex(V,Oe,0,0,U,ce),$&&this.addCurrentVertex(V,Oe,1,1,U,ce)):Ne==="round"&&($&&(this.addCurrentVertex(V,ie,0,0,U,ce),this.addCurrentVertex(V,ie,1,1,U,ce,!0)),ee&&(this.addCurrentVertex(V,K,-1,-1,U,ce,!0),this.addCurrentVertex(V,K,0,0,U,ce)));if(yt&&he<F-1){const Et=V.dist(ee);if(Et>2*L){const Pt=V.add(ee.sub(V)._mult(L/Et)._round());this.updateDistance(V,Pt),this.addCurrentVertex(Pt,K,0,0,U,ce),V=Pt}}}}addVerticesTo(s,c,f,y,A,_,C,P,R,w){const S=(c.w-s.w)/this.tessellationStep|0;if(S>1){this.lineSoFar=s.w;const F=(c.x-s.x)/S,T=(c.y-s.y)/S,L=(c.z-s.z)/S,U=(c.w-s.w)/S;for(let V=1;V<S;++V)s.x+=F,s.y+=T,s.z+=L,this.lineSoFar+=U,this.addHalfVertex(s,f,y,w,!1,C,R,s.z),this.addHalfVertex(s,A,_,w,!0,-P,R,s.z)}this.lineSoFar=c.w,this.addHalfVertex(c,f,y,w,!1,C,R,c.z),this.addHalfVertex(c,A,_,w,!0,-P,R,c.z)}addCurrentVertex(s,c,f,y,A,_,C=!1){const P=c.x+c.y*f,R=c.y-c.x*f,w=c.y*y-c.x,S=-c.y-c.x*y;if(_!=null){const T=Nn+10,L=_,U=new DL(s.x,s.y,L,this.lineSoFar),V=dF(s,-10,T),$=this.lineSoFar;if(this.currentVertex)if(V){const ee=this.currentVertexIsOutside,ie=this.currentVertex,K=new DL(s.x,s.y,L,this.lineSoFar);NL(ie,K,-10,T),dF(K,-10,T)||(ee&&(this.e1=this.e2=-1,this.lineSoFar=ie.w,this.addHalfVertex(ie,P,R,C,!1,f,A,ie.z),this.addHalfVertex(ie,w,S,C,!0,-y,A,ie.z)),this.addVerticesTo(ie,K,P,R,w,S,f,y,A,C))}else{const ee=this.currentVertex;this.currentVertexIsOutside&&(NL(ee,U,-10,T),this.e1=this.e2=-1,this.lineSoFar=ee.w,this.addHalfVertex(ee,P,R,C,!1,f,A,ee.z),this.addHalfVertex(ee,w,S,C,!0,-y,A,ee.z)),this.addVerticesTo(ee,U,P,R,w,S,f,y,A,C)}else V||(this.addHalfVertex(s,P,R,C,!1,f,A,_),this.addHalfVertex(s,w,S,C,!0,-y,A,_));this.currentVertex=U,this.currentVertexIsOutside=V,this.lineSoFar=$}else this.addHalfVertex(s,P,R,C,!1,f,A,_),this.addHalfVertex(s,w,S,C,!0,-y,A,_)}addHalfVertex({x:s,y:c},f,y,A,_,C,P,R){this.patternJoinNone&&(this.segmentPoints.length===0&&(this.segmentStart=this.lineSoFar,this.segmentStartf32=Math.fround(this.lineSoFar)),_||this.segmentPoints.push(this.lineSoFar-this.segmentStart,C)),this.layoutVertexArray.emplaceBack((s<<1)+(A?1:0),(c<<1)+(_?1:0),Math.round(63*f)+128,Math.round(63*y)+128,1+(C===0?0:C<0?-1:1),0,this.lineSoFar-this.segmentStartf32),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const w=P.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,w),P.primitiveLength++),_?this.e2=w:this.e1=w,R!=null&&this.zOffsetVertexArray.emplaceBack(R)}updateScaledDistance(){if(this.lineClips){const s=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=s*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(s,c){this.distance+=s.dist(c),this.updateScaledDistance()}}function dF(d,s,c){return d.x<s||d.x>c||d.y<s||d.y>c}let fF,AF;function pF(d,s,c){return s*(Nn/(d.tileSize*Math.pow(2,c-d.tileID.overscaledZ)))}function mF(d,s){return 1/pF(d,1,s.tileZoom)}function gF(d,s,c,f){return d.translatePosMatrix(f||s.tileID.projMatrix,s,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}He(tS,"LineBucket",{omit:["layers","patternFeatures","currentVertex","currentVertexIsOutside"]});const yF=d=>{const s=[];_F(d)&&s.push("RENDER_LINE_DASH"),d.paint.get("line-gradient")&&s.push("RENDER_LINE_GRADIENT");const c=d.paint.get("line-trim-offset");c[0]===0&&c[1]===0||s.push("RENDER_LINE_TRIM_OFFSET"),d.paint.get("line-border-width").constantOr(1)!==0&&s.push("RENDER_LINE_BORDER");const f=d.layout.get("line-join").constantOr("miter")==="none",y=!!d.paint.get("line-pattern").constantOr(1);return f&&y&&s.push("LINE_JOIN_NONE"),s};function _F(d){const s=d.paint.get("line-dasharray").value;return s.value||s.kind!=="constant"}let nS;const vF=()=>nS||(nS={layout:fF||(fF=new Ji({"line-cap":new dr(Nt.layout_line["line-cap"]),"line-join":new dr(Nt.layout_line["line-join"]),"line-miter-limit":new Tn(Nt.layout_line["line-miter-limit"]),"line-round-limit":new Tn(Nt.layout_line["line-round-limit"]),"line-sort-key":new dr(Nt.layout_line["line-sort-key"]),"line-z-offset":new dr(Nt.layout_line["line-z-offset"]),visibility:new Tn(Nt.layout_line.visibility)})),paint:AF||(AF=new Ji({"line-opacity":new dr(Nt.paint_line["line-opacity"]),"line-color":new dr(Nt.paint_line["line-color"]),"line-translate":new Tn(Nt.paint_line["line-translate"]),"line-translate-anchor":new Tn(Nt.paint_line["line-translate-anchor"]),"line-width":new dr(Nt.paint_line["line-width"]),"line-gap-width":new dr(Nt.paint_line["line-gap-width"]),"line-offset":new dr(Nt.paint_line["line-offset"]),"line-blur":new dr(Nt.paint_line["line-blur"]),"line-dasharray":new dr(Nt.paint_line["line-dasharray"]),"line-pattern":new dr(Nt.paint_line["line-pattern"]),"line-gradient":new wa(Nt.paint_line["line-gradient"]),"line-trim-offset":new Tn(Nt.paint_line["line-trim-offset"]),"line-trim-fade-range":new Tn(Nt.paint_line["line-trim-fade-range"]),"line-trim-color":new Tn(Nt.paint_line["line-trim-color"]),"line-emissive-strength":new Tn(Nt.paint_line["line-emissive-strength"]),"line-border-width":new dr(Nt.paint_line["line-border-width"]),"line-border-color":new dr(Nt.paint_line["line-border-color"]),"line-occlusion-opacity":new Tn(Nt.paint_line["line-occlusion-opacity"])}))},nS);class EG extends dr{possiblyEvaluate(s,c){return c=new Oi(Math.floor(c.zoom),{now:c.now,fadeDuration:c.fadeDuration,transition:c.transition}),super.possiblyEvaluate(s,c)}evaluate(s,c,f,y){return c=lr({},c,{zoom:Math.floor(c.zoom)}),super.evaluate(s,c,f,y)}}let E0;function bF(d,s){return s>0?s+2*d:d}const BG=Bi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),SG=Bi([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),TG=Bi([{name:"a_projected_pos",components:4,type:"Float32"}],4);Bi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const IG=Bi([{name:"a_auto_z_offset",components:1,type:"Float32"}],4),PG=Bi([{name:"a_texb",components:2,type:"Uint16"}]),LG=Bi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_elevation_from_sea",components:2,type:"Float32"}]),FG=Bi([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"},{name:"a_auto_z_offset",components:1,type:"Float32"}]);Bi([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const wF=Bi([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),RG=Bi([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Bi([{name:"triangle",components:3,type:"Uint16"}]),Bi([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Bi([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Uint8",name:"hasIconTextFit"}]),Bi([{type:"Float32",name:"offsetX"}]),Bi([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var el=24;const Yh=128;function rS(d,s){const{expression:c}=s;if(c.kind==="constant")return{kind:"constant",layoutSize:c.evaluate(new Oi(d+1))};if(c.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:y}=c;let A=0;for(;A<f.length&&f[A]<=d;)A++;A=Math.max(0,A-1);let _=A;for(;_<f.length&&f[_]<d+1;)_++;_=Math.min(f.length-1,_);const C=f[A],P=f[_];return c.kind==="composite"?{kind:"composite",minZoom:C,maxZoom:P,interpolationType:y}:{kind:"camera",minZoom:C,maxZoom:P,minSize:c.evaluate(new Oi(C)),maxSize:c.evaluate(new Oi(P)),interpolationType:y}}}function Kb(d,{uSize:s,uSizeT:c},{lowerSize:f,upperSize:y}){return d.kind==="source"?f/Yh:d.kind==="composite"?$n(f/Yh,y/Yh,c):s}function ry(d,s){let c=0,f=0;if(d.kind==="constant")f=d.layoutSize;else if(d.kind!=="source"){const{interpolationType:y,minZoom:A,maxZoom:_}=d,C=y?_n(Bl.interpolationFactor(y,s,A,_),0,1):0;d.kind==="camera"?f=$n(d.minSize,d.maxSize,C):c=C}return{uSizeT:c,uSize:f}}var kG=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Yh,evaluateSizeForFeature:Kb,evaluateSizeForZoom:ry,getSizeData:rS});function MG(d,s,c){return d.sections.forEach(f=>{f.text=function(y,A,_){const C=A.layout.get("text-transform").evaluate(_,{});return C==="uppercase"?y=y.toLocaleUpperCase():C==="lowercase"&&(y=y.toLocaleLowerCase()),io.applyArabicShaping&&(y=io.applyArabicShaping(y)),y}(f.text,s,c)}),d}const B0={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂","←":"↑","→":"↓"};function OG(d){return d==="︶"||d==="﹈"||d==="︸"||d==="﹄"||d==="﹂"||d==="︾"||d==="︼"||d==="︺"||d==="︘"||d==="﹀"||d==="︐"||d==="︓"||d==="︔"||d==="｀"||d==="￣"||d==="︑"||d==="︒"}function DG(d){return d==="︵"||d==="﹇"||d==="︷"||d==="﹃"||d==="﹁"||d==="︽"||d==="︻"||d==="︹"||d==="︗"||d==="︿"}var xF,iS,CF,oS={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function UG(){return xF||(xF=1,oS.read=function(d,s,c,f,y){var A,_,C=8*y-f-1,P=(1<<C)-1,R=P>>1,w=-7,S=c?y-1:0,F=c?-1:1,T=d[s+S];for(S+=F,A=T&(1<<-w)-1,T>>=-w,w+=C;w>0;A=256*A+d[s+S],S+=F,w-=8);for(_=A&(1<<-w)-1,A>>=-w,w+=f;w>0;_=256*_+d[s+S],S+=F,w-=8);if(A===0)A=1-R;else{if(A===P)return _?NaN:1/0*(T?-1:1);_+=Math.pow(2,f),A-=R}return(T?-1:1)*_*Math.pow(2,A-f)},oS.write=function(d,s,c,f,y,A){var _,C,P,R=8*A-y-1,w=(1<<R)-1,S=w>>1,F=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=f?0:A-1,L=f?1:-1,U=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(C=isNaN(s)?1:0,_=w):(_=Math.floor(Math.log(s)/Math.LN2),s*(P=Math.pow(2,-_))<1&&(_--,P*=2),(s+=_+S>=1?F/P:F*Math.pow(2,1-S))*P>=2&&(_++,P/=2),_+S>=w?(C=0,_=w):_+S>=1?(C=(s*P-1)*Math.pow(2,y),_+=S):(C=s*Math.pow(2,S-1)*Math.pow(2,y),_=0));y>=8;d[c+T]=255&C,T+=L,C/=256,y-=8);for(_=_<<y|C,R+=y;R>0;d[c+T]=255&_,T+=L,_/=256,R-=8);d[c+T-L]|=128*U}),oS}function EF(){if(CF)return iS;CF=1,iS=s;var d=UG();function s(K){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(K)?K:new Uint8Array(K||0),this.pos=0,this.type=0,this.length=this.buf.length}s.Varint=0,s.Fixed64=1,s.Bytes=2,s.Fixed32=5;var c=4294967296,f=1/c,y=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function A(K){return K.type===s.Bytes?K.readVarint()+K.pos:K.pos+1}function _(K,ce,he){return he?4294967296*ce+(K>>>0):4294967296*(ce>>>0)+(K>>>0)}function C(K,ce,he){var Be=ce<=16383?1:ce<=2097151?2:ce<=268435455?3:Math.floor(Math.log(ce)/(7*Math.LN2));he.realloc(Be);for(var Ne=he.pos-1;Ne>=K;Ne--)he.buf[Ne+Be]=he.buf[Ne]}function P(K,ce){for(var he=0;he<K.length;he++)ce.writeVarint(K[he])}function R(K,ce){for(var he=0;he<K.length;he++)ce.writeSVarint(K[he])}function w(K,ce){for(var he=0;he<K.length;he++)ce.writeFloat(K[he])}function S(K,ce){for(var he=0;he<K.length;he++)ce.writeDouble(K[he])}function F(K,ce){for(var he=0;he<K.length;he++)ce.writeBoolean(K[he])}function T(K,ce){for(var he=0;he<K.length;he++)ce.writeFixed32(K[he])}function L(K,ce){for(var he=0;he<K.length;he++)ce.writeSFixed32(K[he])}function U(K,ce){for(var he=0;he<K.length;he++)ce.writeFixed64(K[he])}function V(K,ce){for(var he=0;he<K.length;he++)ce.writeSFixed64(K[he])}function $(K,ce){return(K[ce]|K[ce+1]<<8|K[ce+2]<<16)+16777216*K[ce+3]}function ee(K,ce,he){K[he]=ce,K[he+1]=ce>>>8,K[he+2]=ce>>>16,K[he+3]=ce>>>24}function ie(K,ce){return(K[ce]|K[ce+1]<<8|K[ce+2]<<16)+(K[ce+3]<<24)}return s.prototype={destroy:function(){this.buf=null},readFields:function(K,ce,he){for(he=he||this.length;this.pos<he;){var Be=this.readVarint(),Ne=Be>>3,Ve=this.pos;this.type=7&Be,K(Ne,ce,this),this.pos===Ve&&this.skip(Be)}return ce},readMessage:function(K,ce){return this.readFields(K,ce,this.readVarint()+this.pos)},readFixed32:function(){var K=$(this.buf,this.pos);return this.pos+=4,K},readSFixed32:function(){var K=ie(this.buf,this.pos);return this.pos+=4,K},readFixed64:function(){var K=$(this.buf,this.pos)+$(this.buf,this.pos+4)*c;return this.pos+=8,K},readSFixed64:function(){var K=$(this.buf,this.pos)+ie(this.buf,this.pos+4)*c;return this.pos+=8,K},readFloat:function(){var K=d.read(this.buf,this.pos,!0,23,4);return this.pos+=4,K},readDouble:function(){var K=d.read(this.buf,this.pos,!0,52,8);return this.pos+=8,K},readVarint:function(K){var ce,he,Be=this.buf;return ce=127&(he=Be[this.pos++]),he<128?ce:(ce|=(127&(he=Be[this.pos++]))<<7,he<128?ce:(ce|=(127&(he=Be[this.pos++]))<<14,he<128?ce:(ce|=(127&(he=Be[this.pos++]))<<21,he<128?ce:function(Ne,Ve,Oe){var rt,je,ct=Oe.buf;if(rt=(112&(je=ct[Oe.pos++]))>>4,je<128||(rt|=(127&(je=ct[Oe.pos++]))<<3,je<128)||(rt|=(127&(je=ct[Oe.pos++]))<<10,je<128)||(rt|=(127&(je=ct[Oe.pos++]))<<17,je<128)||(rt|=(127&(je=ct[Oe.pos++]))<<24,je<128)||(rt|=(1&(je=ct[Oe.pos++]))<<31,je<128))return _(Ne,rt,Ve);throw new Error("Expected varint not more than 10 bytes")}(ce|=(15&(he=Be[this.pos]))<<28,K,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var K=this.readVarint();return K%2==1?(K+1)/-2:K/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var K=this.readVarint()+this.pos,ce=this.pos;return this.pos=K,K-ce>=12&&y?function(he,Be,Ne){return y.decode(he.subarray(Be,Ne))}(this.buf,ce,K):function(he,Be,Ne){for(var Ve="",Oe=Be;Oe<Ne;){var rt,je,ct,yt=he[Oe],Ct=null,Et=yt>239?4:yt>223?3:yt>191?2:1;if(Oe+Et>Ne)break;Et===1?yt<128&&(Ct=yt):Et===2?(192&(rt=he[Oe+1]))==128&&(Ct=(31&yt)<<6|63&rt)<=127&&(Ct=null):Et===3?(je=he[Oe+2],(192&(rt=he[Oe+1]))==128&&(192&je)==128&&((Ct=(15&yt)<<12|(63&rt)<<6|63&je)<=2047||Ct>=55296&&Ct<=57343)&&(Ct=null)):Et===4&&(je=he[Oe+2],ct=he[Oe+3],(192&(rt=he[Oe+1]))==128&&(192&je)==128&&(192&ct)==128&&((Ct=(15&yt)<<18|(63&rt)<<12|(63&je)<<6|63&ct)<=65535||Ct>=1114112)&&(Ct=null)),Ct===null?(Ct=65533,Et=1):Ct>65535&&(Ct-=65536,Ve+=String.fromCharCode(Ct>>>10&1023|55296),Ct=56320|1023&Ct),Ve+=String.fromCharCode(Ct),Oe+=Et}return Ve}(this.buf,ce,K)},readBytes:function(){var K=this.readVarint()+this.pos,ce=this.buf.subarray(this.pos,K);return this.pos=K,ce},readPackedVarint:function(K,ce){if(this.type!==s.Bytes)return K.push(this.readVarint(ce));var he=A(this);for(K=K||[];this.pos<he;)K.push(this.readVarint(ce));return K},readPackedSVarint:function(K){if(this.type!==s.Bytes)return K.push(this.readSVarint());var ce=A(this);for(K=K||[];this.pos<ce;)K.push(this.readSVarint());return K},readPackedBoolean:function(K){if(this.type!==s.Bytes)return K.push(this.readBoolean());var ce=A(this);for(K=K||[];this.pos<ce;)K.push(this.readBoolean());return K},readPackedFloat:function(K){if(this.type!==s.Bytes)return K.push(this.readFloat());var ce=A(this);for(K=K||[];this.pos<ce;)K.push(this.readFloat());return K},readPackedDouble:function(K){if(this.type!==s.Bytes)return K.push(this.readDouble());var ce=A(this);for(K=K||[];this.pos<ce;)K.push(this.readDouble());return K},readPackedFixed32:function(K){if(this.type!==s.Bytes)return K.push(this.readFixed32());var ce=A(this);for(K=K||[];this.pos<ce;)K.push(this.readFixed32());return K},readPackedSFixed32:function(K){if(this.type!==s.Bytes)return K.push(this.readSFixed32());var ce=A(this);for(K=K||[];this.pos<ce;)K.push(this.readSFixed32());return K},readPackedFixed64:function(K){if(this.type!==s.Bytes)return K.push(this.readFixed64());var ce=A(this);for(K=K||[];this.pos<ce;)K.push(this.readFixed64());return K},readPackedSFixed64:function(K){if(this.type!==s.Bytes)return K.push(this.readSFixed64());var ce=A(this);for(K=K||[];this.pos<ce;)K.push(this.readSFixed64());return K},skip:function(K){var ce=7&K;if(ce===s.Varint)for(;this.buf[this.pos++]>127;);else if(ce===s.Bytes)this.pos=this.readVarint()+this.pos;else if(ce===s.Fixed32)this.pos+=4;else{if(ce!==s.Fixed64)throw new Error("Unimplemented type: "+ce);this.pos+=8}},writeTag:function(K,ce){this.writeVarint(K<<3|ce)},realloc:function(K){for(var ce=this.length||16;ce<this.pos+K;)ce*=2;if(ce!==this.length){var he=new Uint8Array(ce);he.set(this.buf),this.buf=he,this.length=ce}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(K){this.realloc(4),ee(this.buf,K,this.pos),this.pos+=4},writeSFixed32:function(K){this.realloc(4),ee(this.buf,K,this.pos),this.pos+=4},writeFixed64:function(K){this.realloc(8),ee(this.buf,-1&K,this.pos),ee(this.buf,Math.floor(K*f),this.pos+4),this.pos+=8},writeSFixed64:function(K){this.realloc(8),ee(this.buf,-1&K,this.pos),ee(this.buf,Math.floor(K*f),this.pos+4),this.pos+=8},writeVarint:function(K){(K=+K||0)>268435455||K<0?function(ce,he){var Be,Ne;if(ce>=0?(Be=ce%4294967296|0,Ne=ce/4294967296|0):(Ne=~(-ce/4294967296),4294967295^(Be=~(-ce%4294967296))?Be=Be+1|0:(Be=0,Ne=Ne+1|0)),ce>=18446744073709552e3||ce<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");he.realloc(10),function(Ve,Oe,rt){rt.buf[rt.pos++]=127&Ve|128,Ve>>>=7,rt.buf[rt.pos++]=127&Ve|128,Ve>>>=7,rt.buf[rt.pos++]=127&Ve|128,Ve>>>=7,rt.buf[rt.pos++]=127&Ve|128,rt.buf[rt.pos]=127&(Ve>>>=7)}(Be,0,he),function(Ve,Oe){var rt=(7&Ve)<<4;Oe.buf[Oe.pos++]|=rt|((Ve>>>=3)?128:0),Ve&&(Oe.buf[Oe.pos++]=127&Ve|((Ve>>>=7)?128:0),Ve&&(Oe.buf[Oe.pos++]=127&Ve|((Ve>>>=7)?128:0),Ve&&(Oe.buf[Oe.pos++]=127&Ve|((Ve>>>=7)?128:0),Ve&&(Oe.buf[Oe.pos++]=127&Ve|((Ve>>>=7)?128:0),Ve&&(Oe.buf[Oe.pos++]=127&Ve)))))}(Ne,he)}(K,this):(this.realloc(4),this.buf[this.pos++]=127&K|(K>127?128:0),K<=127||(this.buf[this.pos++]=127&(K>>>=7)|(K>127?128:0),K<=127||(this.buf[this.pos++]=127&(K>>>=7)|(K>127?128:0),K<=127||(this.buf[this.pos++]=K>>>7&127))))},writeSVarint:function(K){this.writeVarint(K<0?2*-K-1:2*K)},writeBoolean:function(K){this.writeVarint(!!K)},writeString:function(K){K=String(K),this.realloc(4*K.length),this.pos++;var ce=this.pos;this.pos=function(Be,Ne,Ve){for(var Oe,rt,je=0;je<Ne.length;je++){if((Oe=Ne.charCodeAt(je))>55295&&Oe<57344){if(!rt){Oe>56319||je+1===Ne.length?(Be[Ve++]=239,Be[Ve++]=191,Be[Ve++]=189):rt=Oe;continue}if(Oe<56320){Be[Ve++]=239,Be[Ve++]=191,Be[Ve++]=189,rt=Oe;continue}Oe=rt-55296<<10|Oe-56320|65536,rt=null}else rt&&(Be[Ve++]=239,Be[Ve++]=191,Be[Ve++]=189,rt=null);Oe<128?Be[Ve++]=Oe:(Oe<2048?Be[Ve++]=Oe>>6|192:(Oe<65536?Be[Ve++]=Oe>>12|224:(Be[Ve++]=Oe>>18|240,Be[Ve++]=Oe>>12&63|128),Be[Ve++]=Oe>>6&63|128),Be[Ve++]=63&Oe|128)}return Ve}(this.buf,K,this.pos);var he=this.pos-ce;he>=128&&C(ce,he,this),this.pos=ce-1,this.writeVarint(he),this.pos+=he},writeFloat:function(K){this.realloc(4),d.write(this.buf,K,this.pos,!0,23,4),this.pos+=4},writeDouble:function(K){this.realloc(8),d.write(this.buf,K,this.pos,!0,52,8),this.pos+=8},writeBytes:function(K){var ce=K.length;this.writeVarint(ce),this.realloc(ce);for(var he=0;he<ce;he++)this.buf[this.pos++]=K[he]},writeRawMessage:function(K,ce){this.pos++;var he=this.pos;K(ce,this);var Be=this.pos-he;Be>=128&&C(he,Be,this),this.pos=he-1,this.writeVarint(Be),this.pos+=Be},writeMessage:function(K,ce,he){this.writeTag(K,s.Bytes),this.writeRawMessage(ce,he)},writePackedVarint:function(K,ce){ce.length&&this.writeMessage(K,P,ce)},writePackedSVarint:function(K,ce){ce.length&&this.writeMessage(K,R,ce)},writePackedBoolean:function(K,ce){ce.length&&this.writeMessage(K,F,ce)},writePackedFloat:function(K,ce){ce.length&&this.writeMessage(K,w,ce)},writePackedDouble:function(K,ce){ce.length&&this.writeMessage(K,S,ce)},writePackedFixed32:function(K,ce){ce.length&&this.writeMessage(K,T,ce)},writePackedSFixed32:function(K,ce){ce.length&&this.writeMessage(K,L,ce)},writePackedFixed64:function(K,ce){ce.length&&this.writeMessage(K,U,ce)},writePackedSFixed64:function(K,ce){ce.length&&this.writeMessage(K,V,ce)},writeBytesField:function(K,ce){this.writeTag(K,s.Bytes),this.writeBytes(ce)},writeFixed32Field:function(K,ce){this.writeTag(K,s.Fixed32),this.writeFixed32(ce)},writeSFixed32Field:function(K,ce){this.writeTag(K,s.Fixed32),this.writeSFixed32(ce)},writeFixed64Field:function(K,ce){this.writeTag(K,s.Fixed64),this.writeFixed64(ce)},writeSFixed64Field:function(K,ce){this.writeTag(K,s.Fixed64),this.writeSFixed64(ce)},writeVarintField:function(K,ce){this.writeTag(K,s.Varint),this.writeVarint(ce)},writeSVarintField:function(K,ce){this.writeTag(K,s.Varint),this.writeSVarint(ce)},writeStringField:function(K,ce){this.writeTag(K,s.Bytes),this.writeString(ce)},writeFloatField:function(K,ce){this.writeTag(K,s.Fixed32),this.writeFloat(ce)},writeDoubleField:function(K,ce){this.writeTag(K,s.Fixed64),this.writeDouble(ce)},writeBooleanField:function(K,ce){this.writeVarintField(K,!!ce)}},iS}var qb=b(EF());const sS=3;function NG(d,s,c){s.glyphs=[],d===1&&c.readMessage(zG,s)}function zG(d,s,c){if(d===3){const{id:f,bitmap:y,width:A,height:_,left:C,top:P,advance:R}=c.readMessage(VG,{});s.glyphs.push({id:f,bitmap:new YA({width:A+2*sS,height:_+2*sS},y),metrics:{width:A,height:_,left:C,top:P,advance:R}})}else d===4?s.ascender=c.readSVarint():d===5&&(s.descender=c.readSVarint())}function VG(d,s,c){d===1?s.id=c.readVarint():d===2?s.bitmap=c.readBytes():d===3?s.width=c.readVarint():d===4?s.height=c.readVarint():d===5?s.left=c.readSVarint():d===6?s.top=c.readSVarint():d===7&&(s.advance=c.readVarint())}const BF=sS,Mu={horizontal:1,vertical:2,horizontalOnly:3};class S0{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(s,c){const f=new S0;return f.scale=s||1,f.fontStack=c,f}static forImage(s){const c=new S0;return c.imageName=s,c}}class iy{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(s,c){const f=new iy;for(let y=0;y<s.sections.length;y++){const A=s.sections[y];A.image?f.addImageSection(A):f.addTextSection(A,c)}return f}length(){return this.text.length}getSection(s){return this.sections[this.sectionIndex[s]]}getSections(){return this.sections}getSectionIndex(s){return this.sectionIndex[s]}getCodePoint(s){return this.text.codePointAt(s)}verticalizePunctuation(s){this.text=function(c,f){let y="";for(let A=0;A<c.length;A++){const _=c.charCodeAt(A+1)||null,C=c.charCodeAt(A-1)||null;y+=!f&&(_&&Xn(_)&&!B0[c[A+1]]||C&&Xn(C)&&!B0[c[A-1]])||!B0[c[A]]?c[A]:B0[c[A]]}return y}(this.text,s)}trim(){let s=0;for(let f=0;f<this.text.length&&Wb[this.text.charCodeAt(f)];f++)s++;let c=this.text.length;for(let f=this.text.length-1;f>=0&&f>=s&&Wb[this.text.charCodeAt(f)];f--)c--;this.text=this.text.substring(s,c),this.sectionIndex=this.sectionIndex.slice(s,c)}substring(s,c){const f=new iy;return f.text=this.text.substring(s,c),f.sectionIndex=this.sectionIndex.slice(s,c),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((s,c)=>Math.max(s,this.sections[c].scale),0)}addTextSection(s,c){this.text+=s.text,this.sections.push(S0.forText(s.scale,s.fontStack||c));const f=this.sections.length-1;for(let y=0;y<s.text.length;++y)this.sectionIndex.push(f)}addImageSection(s){const c=s.image?s.image.namePrimary:"";if(c.length===0)return void Jr("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCodePoint(f),this.sections.push(S0.forImage(c)),this.sectionIndex.push(this.sections.length-1)):Jr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function aS(d,s,c,f,y,A,_,C,P,R,w,S,F,T,L){const U=iy.fromFeature(d,y);S===Mu.vertical&&U.verticalizePunctuation(F);let V=[];const $=function(he,Be,Ne,Ve,Oe,rt){if(!he)return[];const je=[],ct=function(Pt,$t,Lt,dn,xn,tn){let Jn=0;for(let Hn=0;Hn<Pt.length();Hn++){const kn=Pt.getSection(Hn);Jn+=SF(Pt.getCodePoint(Hn),kn,dn,xn,$t,tn)}return Jn/Math.max(1,Math.ceil(Jn/Lt))}(he,Be,Ne,Ve,Oe,rt),yt=he.text.indexOf("​")>=0;let Ct=0;for(let Pt=0;Pt<he.length();Pt++){const $t=he.getSection(Pt),Lt=he.getCodePoint(Pt);if(Wb[Lt]||(Ct+=SF(Lt,$t,Ve,Oe,Be,rt)),Pt<he.length()-1){const dn=!((Et=Lt)<11904||!(Zt["Bopomofo Extended"](Et)||Zt.Bopomofo(Et)||Zt["CJK Compatibility Forms"](Et)||Zt["CJK Compatibility Ideographs"](Et)||Zt["CJK Compatibility"](Et)||Zt["CJK Radicals Supplement"](Et)||Zt["CJK Strokes"](Et)||Zt["CJK Symbols and Punctuation"](Et)||Zt["CJK Unified Ideographs Extension A"](Et)||Zt["CJK Unified Ideographs"](Et)||Zt["Enclosed CJK Letters and Months"](Et)||Zt["Halfwidth and Fullwidth Forms"](Et)||Zt.Hiragana(Et)||Zt["Ideographic Description Characters"](Et)||Zt["Kangxi Radicals"](Et)||Zt["Katakana Phonetic Extensions"](Et)||Zt.Katakana(Et)||Zt["Vertical Forms"](Et)||Zt["Yi Radicals"](Et)||Zt["Yi Syllables"](Et)));(QG[Lt]||dn||$t.imageName)&&je.push(IF(Pt+1,Ct,ct,je,HG(Lt,he.getCodePoint(Pt+1),dn&&yt),!1))}}var Et;return PF(IF(he.length(),Ct,ct,je,0,!0))}(U,R,A,s,f,T),{processBidirectionalText:ee,processStyledBidirectionalText:ie}=io;if(ee&&U.sections.length===1){const he=ee(U.toString(),$);for(const Be of he){const Ne=new iy;Ne.text=Be,Ne.sections=U.sections;for(let Ve=0;Ve<Be.length;Ve++)Ne.sectionIndex.push(0);V.push(Ne)}}else if(ie){const he=ie(U.text,U.sectionIndex,$);for(const Be of he){const Ne=new iy;Ne.text=Be[0],Ne.sectionIndex=Be[1],Ne.sections=U.sections,V.push(Ne)}}else V=function(he,Be){const Ne=[],Ve=he.text;let Oe=0;for(const rt of Be)Ne.push(he.substring(Oe,rt)),Oe=rt;return Oe<Ve.length&&Ne.push(he.substring(Oe,Ve.length)),Ne}(U,$);const K=[],ce={positionedLines:K,text:U.toString(),top:w[1],bottom:w[1],left:w[0],right:w[0],writingMode:S,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(he,Be,Ne,Ve,Oe,rt,je,ct,yt,Ct,Et,Pt){let $t=0,Lt=0,dn=0;const xn=ct==="right"?1:ct==="left"?0:.5;let tn=!1;for(const Yn of Oe){const or=Yn.getSections();for(const Or of or){if(Or.imageName)continue;const Zr=Be[Or.fontStack];if(Zr&&(tn=Zr.ascender!==void 0&&Zr.descender!==void 0,!tn))break}if(!tn)break}let Jn=0;for(const Yn of Oe){Yn.trim();const or=Yn.getMaxScale(),Or=(or-1)*el,Zr={positionedGlyphs:[],lineOffset:0};he.positionedLines[Jn]=Zr;const Vr=Zr.positionedGlyphs;let Qr=0;if(!Yn.length()){Lt+=rt,++Jn;continue}let ii=0,ai=0;for(let Hi=0;Hi<Yn.length();Hi++){const Ur=Yn.getSection(Hi),Di=Yn.getSectionIndex(Hi),zi=Yn.getCodePoint(Hi);let To=Ur.scale,_s=null,Os=null,vs=null,is=el,xa=0;const Qs=!(yt===Mu.horizontal||!Et&&!Gn(zi)||Et&&(Wb[zi]||(Hn=zi,Zt.Arabic(Hn)||Zt["Arabic Supplement"](Hn)||Zt["Arabic Extended-A"](Hn)||Zt["Arabic Presentation Forms-A"](Hn)||Zt["Arabic Presentation Forms-B"](Hn))));if(Ur.imageName){const tl=Ve[Ur.imageName];if(!tl)continue;vs=Ur.imageName,he.iconsInText=he.iconsInText||!0,Os=tl.paddedRect;const wo=tl.displaySize;To=To*el/Pt,_s={width:wo[0],height:wo[1],left:0,top:-BF,advance:Qs?wo[1]:wo[0],localGlyph:!1},xa=tn?-_s.height*To:or*el-17-wo[1]*To,is=_s.advance;const Mc=(Qs?wo[0]:wo[1])*To-el*or;Mc>0&&Mc>Qr&&(Qr=Mc)}else{const tl=Ne[Ur.fontStack];if(!tl)continue;tl[zi]&&(Os=tl[zi]);const wo=Be[Ur.fontStack];if(!wo)continue;const Mc=wo.glyphs[zi];if(!Mc)continue;if(_s=Mc.metrics,is=zi!==8203?el:0,tn){const rd=wo.ascender!==void 0?Math.abs(wo.ascender):0,gh=wo.descender!==void 0?Math.abs(wo.descender):0,yh=(rd+gh)*To;ii<yh&&(ii=yh,ai=(rd-gh)/2*To),xa=-rd*To}else xa=(or-To)*el-17}Qs?(he.verticalizable=!0,Vr.push({glyph:zi,imageName:vs,x:$t,y:Lt+xa,vertical:Qs,scale:To,localGlyph:_s.localGlyph,fontStack:Ur.fontStack,sectionIndex:Di,metrics:_s,rect:Os}),$t+=is*To+Ct):(Vr.push({glyph:zi,imageName:vs,x:$t,y:Lt+xa,vertical:Qs,scale:To,localGlyph:_s.localGlyph,fontStack:Ur.fontStack,sectionIndex:Di,metrics:_s,rect:Os}),$t+=_s.advance*To+Ct)}Vr.length!==0&&(dn=Math.max($t-Ct,dn),tn?LF(Vr,xn,Qr,ai,rt*or/2):LF(Vr,xn,Qr,0,rt/2)),$t=0;const so=rt*or+Qr;Zr.lineOffset=Math.max(Qr,Or),Lt+=so,++Jn}var Hn;const kn=Lt,{horizontalAlign:Bn,verticalAlign:br}=lS(je);(function(Yn,or,Or,Zr,Vr,Qr){const ii=(or-Or)*Vr,ai=-Qr*Zr;for(const so of Yn)for(const Hi of so.positionedGlyphs)Hi.x+=ii,Hi.y+=ai})(he.positionedLines,xn,Bn,br,dn,kn),he.top+=-br*kn,he.bottom=he.top+kn,he.left+=-Bn*dn,he.right=he.left+dn,he.hasBaseline=tn}(ce,s,c,f,V,_,C,P,S,R,F,L),!function(he){for(const Be of he)if(Be.positionedGlyphs.length!==0)return!1;return!0}(K)&&ce}const Wb={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},QG={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function SF(d,s,c,f,y,A){if(s.imageName){const _=f[s.imageName];return _?_.displaySize[0]*s.scale*el/A+y:0}{const _=c[s.fontStack],C=_&&_.glyphs[d];return C?C.metrics.advance*s.scale+y:0}}function TF(d,s,c,f){const y=Math.pow(d-s,2);return f?d<s?y/2:2*y:y+Math.abs(c)*c}function HG(d,s,c){let f=0;return d===10&&(f-=1e4),c&&(f+=150),d!==40&&d!==65288||(f+=50),s!==41&&s!==65289||(f+=50),f}function IF(d,s,c,f,y,A){let _=null,C=TF(s,c,y,A);for(const P of f){const R=TF(s-P.x,c,y,A)+P.badness;R<=C&&(_=P,C=R)}return{index:d,x:s,priorBreak:_,badness:C}}function PF(d){return d?PF(d.priorBreak).concat(d.index):[]}function lS(d){let s=.5,c=.5;switch(d){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0}switch(d){case"bottom":case"bottom-right":case"bottom-left":c=1;break;case"top":case"top-right":case"top-left":c=0}return{horizontalAlign:s,verticalAlign:c}}function LF(d,s,c,f,y){if(!(s||c||f||y))return;const A=d.length-1,_=d[A],C=(_.x+_.metrics.advance*_.scale)*s;for(let P=0;P<=A;P++)d[P].x-=C,d[P].y+=c+f+y}function jG(d,s,c,f){const{horizontalAlign:y,verticalAlign:A}=lS(f),_=c[0]-d.displaySize[0]*y,C=c[1]-d.displaySize[1]*A;return{imagePrimary:d,imageSecondary:s,top:C,bottom:C+d.displaySize[1],left:_,right:_+d.displaySize[0]}}function FF(d,s,c,f,y,A){const _=d.imagePrimary;let C;if(_.content){const V=_.content,$=_.pixelRatio||1;C=[V[0]/$,V[1]/$,_.displaySize[0]-V[2]/$,_.displaySize[1]-V[3]/$]}const P=s.left*A,R=s.right*A;let w,S,F,T;c==="width"||c==="both"?(T=y[0]+P-f[3],S=y[0]+R+f[1]):(T=y[0]+(P+R-_.displaySize[0])/2,S=T+_.displaySize[0]);const L=s.top*A,U=s.bottom*A;return c==="height"||c==="both"?(w=y[1]+L-f[0],F=y[1]+U+f[2]):(w=y[1]+(L+U-_.displaySize[1])/2,F=w+_.displaySize[1]),{imagePrimary:_,imageSecondary:void 0,top:w,right:S,bottom:F,left:T,collisionPadding:C}}class Wf extends Fe{constructor(s,c,f,y,A){super(s,c),this.angle=y,this.z=f,A!==void 0&&(this.segment=A)}clone(){return new Wf(this.x,this.y,this.z,this.angle,this.segment)}}function RF(d,s,c,f,y){if(s.segment===void 0)return!0;let A=s,_=s.segment+1,C=0;for(;C>-c/2;){if(_--,_<0)return!1;C-=d[_].dist(A),A=d[_]}C+=d[_].dist(d[_+1]),_++;const P=[];let R=0;for(;C<c/2;){const w=d[_],S=d[_+1];if(!S)return!1;let F=d[_-1].angleTo(w)-w.angleTo(S);for(F=Math.abs((F+3*Math.PI)%(2*Math.PI)-Math.PI),P.push({distance:C,angleDelta:F}),R+=F;C-P[0].distance>f;)R-=P.shift().angleDelta;if(R>y)return!1;_++,C+=w.dist(S)}return!0}function kF(d){let s=0;for(let c=0;c<d.length-1;c++)s+=d[c].dist(d[c+1]);return s}function MF(d,s,c){return d?.6*s*c:0}function OF(d,s){return Math.max(d?d.right-d.left:0,s?s.right-s.left:0)}function $G(d,s,c,f,y,A){const _=MF(c,y,A),C=OF(c,f)*A;let P=0;const R=kF(d)/2;for(let w=0;w<d.length-1;w++){const S=d[w],F=d[w+1],T=S.dist(F);if(P+T>R){const L=(R-P)/T,U=$n(S.x,F.x,L),V=$n(S.y,F.y,L),$=new Wf(U,V,0,F.angleTo(S),w);return!_||RF(d,$,C,_,s)?$:void 0}P+=T}}function GG(d,s,c,f,y,A,_,C,P){const R=MF(f,A,_),w=OF(f,y),S=w*_,F=d[0].x===0||d[0].x===P||d[0].y===0||d[0].y===P;return s-S<s/4&&(s=S+s/4),DF(d,F?s/2*C%s:(w/2+2*A)*_*C%s,s,R,c,S,F,!1,P)}function DF(d,s,c,f,y,A,_,C,P){const R=A/2,w=kF(d);let S=0,F=s-c,T=[];for(let L=0;L<d.length-1;L++){const U=d[L],V=d[L+1],$=U.dist(V),ee=V.angleTo(U);for(;F+c<S+$;){F+=c;const ie=(F-S)/$,K=$n(U.x,V.x,ie),ce=$n(U.y,V.y,ie);if(K>=0&&K<P&&ce>=0&&ce<P&&F-R>=0&&F+R<=w){const he=new Wf(K,ce,0,ee,L);f&&!RF(d,he,A,f,y)||T.push(he)}}S+=$}return C||T.length||_||(T=DF(d,S/2,c,f,y,A,_,!0,P)),T}function UF(d,s,c,f,y){const A=[];for(let _=0;_<d.length;_++){const C=d[_];let P;for(let R=0;R<C.length-1;R++){let w=C[R],S=C[R+1];w.x<s&&S.x<s||(w.x<s?w=new Fe(s,w.y+(s-w.x)/(S.x-w.x)*(S.y-w.y))._round():S.x<s&&(S=new Fe(s,w.y+(s-w.x)/(S.x-w.x)*(S.y-w.y))._round()),w.y<c&&S.y<c||(w.y<c?w=new Fe(w.x+(c-w.y)/(S.y-w.y)*(S.x-w.x),c)._round():S.y<c&&(S=new Fe(w.x+(c-w.y)/(S.y-w.y)*(S.x-w.x),c)._round()),w.x>=f&&S.x>=f||(w.x>=f?w=new Fe(f,w.y+(f-w.x)/(S.x-w.x)*(S.y-w.y))._round():S.x>=f&&(S=new Fe(f,w.y+(f-w.x)/(S.x-w.x)*(S.y-w.y))._round()),w.y>=y&&S.y>=y||(w.y>=y?w=new Fe(w.x+(y-w.y)/(S.y-w.y)*(S.x-w.x),y)._round():S.y>=y&&(S=new Fe(w.x+(y-w.y)/(S.y-w.y)*(S.x-w.x),y)._round()),P&&w.equals(P[P.length-1])||(P=[w],A.push(P)),P.push(S)))))}}return A}function NF(d){let s=0,c=0;for(const _ of d)s+=_.w*_.h,c=Math.max(c,_.w);d.sort((_,C)=>C.h-_.h);const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(s/.95)),c),h:1/0}];let y=0,A=0;for(const _ of d)for(let C=f.length-1;C>=0;C--){const P=f[C];if(!(_.w>P.w||_.h>P.h)){if(_.x=P.x,_.y=P.y,A=Math.max(A,_.y+_.h),y=Math.max(y,_.x+_.w),_.w===P.w&&_.h===P.h){const R=f.pop();C<f.length&&(f[C]=R)}else _.h===P.h?(P.x+=_.w,P.w-=_.w):_.w===P.w?(P.y+=_.h,P.h-=_.h):(f.push({x:P.x+_.w,y:P.y,w:P.w-_.w,h:_.h}),P.y+=_.h,P.h-=_.h);break}}return{w:y,h:A,fill:s/(y*A)||0}}He(Wf,"Anchor");const T0=1;class cS{constructor(s,{pixelRatio:c,version:f,stretchX:y,stretchY:A,content:_},C){this.paddedRect=s,this.pixelRatio=c,this.stretchX=y,this.stretchY=A,this.content=_,this.version=f,this.padding=C}get tl(){return[this.paddedRect.x+this.padding,this.paddedRect.y+this.padding]}get br(){return[this.paddedRect.x+this.paddedRect.w-this.padding,this.paddedRect.y+this.paddedRect.h-this.padding]}get displaySize(){return[(this.paddedRect.w-2*this.padding)/this.pixelRatio,(this.paddedRect.h-2*this.padding)/this.pixelRatio]}}class zF{constructor(s,c,f){const y={},A={};this.haveRenderCallbacks=[];const _=[];this.addImages(s,y,T0,_),this.addImages(c,A,2,_);const{w:C,h:P}=NF(_),R=new Ll({width:C||1,height:P||1});for(const w in s){const S=s[w],F=y[w].paddedRect;Ll.copy(S.data,R,{x:0,y:0},{x:F.x+T0,y:F.y+T0},S.data,f,S.sdf)}for(const w in c){const S=c[w],F=A[w].paddedRect;let T=A[w].padding;const L=F.x+T,U=F.y+T,V=S.data.width,$=S.data.height;T=T>1?T-1:T,Ll.copy(S.data,R,{x:0,y:0},{x:L,y:U},S.data,f),Ll.copy(S.data,R,{x:0,y:$-T},{x:L,y:U-T},{width:V,height:T},f),Ll.copy(S.data,R,{x:0,y:0},{x:L,y:U+$},{width:V,height:T},f),Ll.copy(S.data,R,{x:V-T,y:0},{x:L-T,y:U},{width:T,height:$},f),Ll.copy(S.data,R,{x:0,y:0},{x:L+V,y:U},{width:T,height:$},f),Ll.copy(S.data,R,{x:V-T,y:$-T},{x:L-T,y:U-T},{width:T,height:T},f),Ll.copy(S.data,R,{x:0,y:$-T},{x:L+V,y:U-T},{width:T,height:T},f),Ll.copy(S.data,R,{x:0,y:0},{x:L+V,y:U+$},{width:T,height:T},f),Ll.copy(S.data,R,{x:V-T,y:0},{x:L-T,y:U+$},{width:T,height:T},f)}this.image=R,this.iconPositions=y,this.patternPositions=A}addImages(s,c,f,y){for(const A in s){const _=s[A],C={x:0,y:0,w:_.data.width+2*f,h:_.data.height+2*f};y.push(C),c[A]=new cS(C,_,f),_.hasRenderCallback&&this.haveRenderCallbacks.push(A)}}patchUpdatedImages(s,c,f){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(y=>s.hasImage(y,f)),s.dispatchRenderCallbacks(this.haveRenderCallbacks,f);for(const y in s.getUpdatedImages(f))this.patchUpdatedImage(this.iconPositions[y],s.getImage(y,f),c),this.patchUpdatedImage(this.patternPositions[y],s.getImage(y,f),c)}patchUpdatedImage(s,c,f){if(!s||!c||s.version===c.version)return;s.version=c.version;const[y,A]=s.tl;f.update(c.data,{position:{x:y,y:A}})}}He(cS,"ImagePosition"),He(zF,"ImageAtlas");const I0=1e20;function VF(d,s,c,f,y,A,_,C,P){for(let R=s;R<s+f;R++)QF(d,c*A+R,A,y,_,C,P);for(let R=c;R<c+y;R++)QF(d,R*A+s,1,f,_,C,P)}function QF(d,s,c,f,y,A,_){A[0]=0,_[0]=-I0,_[1]=I0,y[0]=d[s];for(let C=1,P=0,R=0;C<f;C++){y[C]=d[s+C*c];const w=C*C;do{const S=A[P];R=(y[C]-y[S]+w-S*S)/(C-S)/2}while(R<=_[P]&&--P>-1);P++,A[P]=C,_[P]=R,_[P+1]=I0}for(let C=0,P=0;C<f;C++){for(;_[P+1]<C;)P++;const R=A[P],w=C-R;d[s+C*c]=y[R]+w*w}}const Jh=2,uS={none:0,ideographs:1,all:2};class oy{constructor(s,c,f){this.requestManager=s,this.localGlyphMode=c,this.localFontFamily=f,this.urls={},this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(s,c){this.urls[c]=s}getGlyphs(s,c,f){const y=[],A=this.urls[c]||dt.GLYPHS_URL;for(const _ in s)for(const C of s[_])y.push({stack:_,id:C});Fr(y,({stack:_,id:C},P)=>{let R=this.entries[_];R||(R=this.entries[_]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let w=R.glyphs[C];if(w!==void 0)return void P(null,{stack:_,id:C,glyph:w});if(w=this._tinySDF(R,_,C),w)return R.glyphs[C]=w,void P(null,{stack:_,id:C,glyph:w});const S=Math.floor(C/256);if(256*S>65535)return void P(new Error("glyphs > 65535 not supported"));if(R.ranges[S])return void P(null,{stack:_,id:C,glyph:w});let F=R.requests[S];F||(F=R.requests[S]=[],oy.loadGlyphRange(_,S,A,this.requestManager,(T,L)=>{if(L){R.ascender=L.ascender,R.descender=L.descender;for(const U in L.glyphs)this._doesCharSupportLocalGlyph(+U)||(R.glyphs[+U]=L.glyphs[+U]);R.ranges[S]=!0}for(const U of F)U(T,L);delete R.requests[S]})),F.push((T,L)=>{T?P(T):L&&P(null,{stack:_,id:C,glyph:L.glyphs[C]||null})})},(_,C)=>{if(_)f(_);else if(C){const P={};for(const{stack:R,id:w,glyph:S}of C)P[R]===void 0&&(P[R]={}),P[R].glyphs===void 0&&(P[R].glyphs={}),P[R].glyphs[w]=S&&{id:S.id,bitmap:S.bitmap.clone(),metrics:S.metrics},P[R].ascender=this.entries[R].ascender,P[R].descender=this.entries[R].descender;f(null,P)}})}_doesCharSupportLocalGlyph(s){return this.localGlyphMode!==uS.none&&(this.localGlyphMode===uS.all?!!this.localFontFamily:!!this.localFontFamily&&(Zt["CJK Unified Ideographs"](s)||Zt["Hangul Syllables"](s)||Zt.Hiragana(s)||Zt.Katakana(s)||Zt["CJK Symbols and Punctuation"](s)||Zt["CJK Unified Ideographs Extension A"](s)||Zt["CJK Unified Ideographs Extension B"](s)))}_tinySDF(s,c,f){const y=this.localFontFamily;if(!y||!this._doesCharSupportLocalGlyph(f))return;let A=s.tinySDF;if(!A){let U="400";/bold/i.test(c)?U="900":/medium/i.test(c)?U="500":/light/i.test(c)&&(U="200"),A=s.tinySDF=new oy.TinySDF({fontFamily:y,fontWeight:U,fontSize:24*Jh,buffer:3*Jh,radius:8*Jh}),A.fontWeight=U}if(this.localGlyphs[A.fontWeight][f])return this.localGlyphs[A.fontWeight][f];const _=String.fromCodePoint(f),{data:C,width:P,height:R,glyphWidth:w,glyphHeight:S,glyphLeft:F,glyphTop:T,glyphAdvance:L}=A.draw(_);return this.localGlyphs[A.fontWeight][f]={id:f,bitmap:new YA({width:P,height:R},C),metrics:{width:w/Jh,height:S/Jh,left:F/Jh,top:T/Jh-27,advance:L/Jh,localGlyph:!0}}}}oy.loadGlyphRange=function(d,s,c,f,y){const A=256*s,_=A+255,C=f.transformRequest(f.normalizeGlyphsURL(c).replace("{fontstack}",d).replace("{range}",`${A}-${_}`),Ql.Glyphs);bc(C,(P,R)=>{if(P)y(P);else if(R){const w={},S=function(F){return new qb(F).readFields(NG,{})}(R);for(const F of S.glyphs)w[F.id]=F;y(null,{glyphs:w,ascender:S.ascender,descender:S.descender})}})},oy.TinySDF=class{constructor({fontSize:d=24,buffer:s=3,radius:c=8,cutoff:f=.25,fontFamily:y="sans-serif",fontWeight:A="normal",fontStyle:_="normal"}={}){this.buffer=s,this.cutoff=f,this.radius=c;const C=this.size=d+4*s,P=this._createCanvas(C),R=this.ctx=P.getContext("2d",{willReadFrequently:!0});R.font=`${_} ${A} ${d}px ${y}`,R.textBaseline="alphabetic",R.textAlign="left",R.fillStyle="black",this.gridOuter=new Float64Array(C*C),this.gridInner=new Float64Array(C*C),this.f=new Float64Array(C),this.z=new Float64Array(C+1),this.v=new Uint16Array(C)}_createCanvas(d){const s=document.createElement("canvas");return s.width=s.height=d,s}draw(d){const{width:s,actualBoundingBoxAscent:c,actualBoundingBoxDescent:f,actualBoundingBoxLeft:y,actualBoundingBoxRight:A}=this.ctx.measureText(d),_=Math.ceil(c),C=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(A-y))),P=Math.min(this.size-this.buffer,_+Math.ceil(f)),R=C+2*this.buffer,w=P+2*this.buffer,S=Math.max(R*w,0),F=new Uint8ClampedArray(S),T={data:F,width:R,height:w,glyphWidth:C,glyphHeight:P,glyphTop:_,glyphLeft:0,glyphAdvance:s};if(C===0||P===0)return T;const{ctx:L,buffer:U,gridInner:V,gridOuter:$}=this;L.clearRect(U,U,C,P),L.fillText(d,U,U+_);const ee=L.getImageData(U,U,C,P);$.fill(I0,0,S),V.fill(0,0,S);for(let ie=0;ie<P;ie++)for(let K=0;K<C;K++){const ce=ee.data[4*(ie*C+K)+3]/255;if(ce===0)continue;const he=(ie+U)*R+K+U;if(ce===1)$[he]=0,V[he]=I0;else{const Be=.5-ce;$[he]=Be>0?Be*Be:0,V[he]=Be<0?Be*Be:0}}VF($,0,0,R,w,R,this.f,this.v,this.z),VF(V,U,U,C,P,R,this.f,this.v,this.z);for(let ie=0;ie<S;ie++){const K=Math.sqrt($[ie])-Math.sqrt(V[ie]);F[ie]=Math.round(255-255*(K/this.radius+this.cutoff))}return T}};const ep=T0;function HF(d,s,c,f){const y=[],A=d.imagePrimary,_=A.pixelRatio,C=A.paddedRect.w-2*ep,P=A.paddedRect.h-2*ep,R=d.right-d.left,w=d.bottom-d.top,S=A.stretchX||[[0,C]],F=A.stretchY||[[0,P]],T=(rt,je)=>rt+je[1]-je[0],L=S.reduce(T,0),U=F.reduce(T,0),V=C-L,$=P-U;let ee=0,ie=L,K=0,ce=U,he=0,Be=V,Ne=0,Ve=$;if(A.content&&f){const rt=A.content;ee=Xb(S,0,rt[0]),K=Xb(F,0,rt[1]),ie=Xb(S,rt[0],rt[2]),ce=Xb(F,rt[1],rt[3]),he=rt[0]-ee,Ne=rt[1]-K,Be=rt[2]-rt[0]-ie,Ve=rt[3]-rt[1]-ce}const Oe=(rt,je,ct,yt)=>{const Ct=Zb(rt.stretch-ee,ie,R,d.left),Et=Yb(rt.fixed-he,Be,rt.stretch,L),Pt=Zb(je.stretch-K,ce,w,d.top),$t=Yb(je.fixed-Ne,Ve,je.stretch,U),Lt=Zb(ct.stretch-ee,ie,R,d.left),dn=Yb(ct.fixed-he,Be,ct.stretch,L),xn=Zb(yt.stretch-K,ce,w,d.top),tn=Yb(yt.fixed-Ne,Ve,yt.stretch,U),Jn=new Fe(Ct,Pt),Hn=new Fe(Lt,Pt),kn=new Fe(Lt,xn),Bn=new Fe(Ct,xn),br=new Fe(Et/_,$t/_),Yn=new Fe(dn/_,tn/_),or=s*Math.PI/180;if(or){const ai=Math.sin(or),so=Math.cos(or),Hi=[so,-ai,ai,so];Jn._matMult(Hi),Hn._matMult(Hi),Bn._matMult(Hi),kn._matMult(Hi)}const Or=rt.stretch+rt.fixed,Zr=ct.stretch+ct.fixed,Vr=je.stretch+je.fixed,Qr=yt.stretch+yt.fixed,ii=d.imageSecondary;return{tl:Jn,tr:Hn,bl:Bn,br:kn,texPrimary:{x:A.paddedRect.x+ep+Or,y:A.paddedRect.y+ep+Vr,w:Zr-Or,h:Qr-Vr},texSecondary:ii?{x:ii.paddedRect.x+ep+Or,y:ii.paddedRect.y+ep+Vr,w:Zr-Or,h:Qr-Vr}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:br,pixelOffsetBR:Yn,minFontScaleX:Be/_/R,minFontScaleY:Ve/_/w,isSDF:c}};if(f&&(A.stretchX||A.stretchY)){const rt=jF(S,V,L),je=jF(F,$,U);for(let ct=0;ct<rt.length-1;ct++){const yt=rt[ct],Ct=rt[ct+1];for(let Et=0;Et<je.length-1;Et++)y.push(Oe(yt,je[Et],Ct,je[Et+1]))}}else y.push(Oe({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:C+1},{fixed:0,stretch:P+1}));return y}function Xb(d,s,c){let f=0;for(const y of d)f+=Math.max(s,Math.min(c,y[1]))-Math.max(s,Math.min(c,y[0]));return f}function jF(d,s,c){const f=[{fixed:-ep,stretch:0}];for(const[y,A]of d){const _=f[f.length-1];f.push({fixed:y-_.stretch,stretch:_.stretch}),f.push({fixed:y-_.stretch,stretch:_.stretch+(A-y)})}return f.push({fixed:s+ep,stretch:c}),f}function Zb(d,s,c,f){return d/s*c+f}function Yb(d,s,c,f){return d-s*c/f}function KG(d,s,c,f){const y=s+d.positionedLines[f].lineOffset;return f===0?c+y/2:c+(y+(s+d.positionedLines[f-1].lineOffset))/2}function qG(d,s=1,c=!1){let f=1/0,y=1/0,A=-1/0,_=-1/0;const C=d[0];for(let T=0;T<C.length;T++){const L=C[T];(!T||L.x<f)&&(f=L.x),(!T||L.y<y)&&(y=L.y),(!T||L.x>A)&&(A=L.x),(!T||L.y>_)&&(_=L.y)}const P=Math.min(A-f,_-y);let R=P/2;const w=new Ju([],WG);if(P===0)return new Fe(f,y);for(let T=f;T<A;T+=P)for(let L=y;L<_;L+=P)w.push(new sy(T+R,L+R,R,d));let S=function(T){let L=0,U=0,V=0;const $=T[0];for(let ee=0,ie=$.length,K=ie-1;ee<ie;K=ee++){const ce=$[ee],he=$[K],Be=ce.x*he.y-he.x*ce.y;U+=(ce.x+he.x)*Be,V+=(ce.y+he.y)*Be,L+=3*Be}return new sy(U/L,V/L,0,T)}(d),F=w.length;for(;w.length;){const T=w.pop();(T.d>S.d||!S.d)&&(S=T,c&&console.log("found best %d after %d probes",Math.round(1e4*T.d)/1e4,F)),T.max-S.d<=s||(R=T.h/2,w.push(new sy(T.p.x-R,T.p.y-R,R,d)),w.push(new sy(T.p.x+R,T.p.y-R,R,d)),w.push(new sy(T.p.x-R,T.p.y+R,R,d)),w.push(new sy(T.p.x+R,T.p.y+R,R,d)),F+=4)}return c&&(console.log(`num probes: ${F}`),console.log(`best distance: ${S.d}`)),S.p}function WG(d,s){return s.max-d.max}class sy{constructor(s,c,f,y){this.p=new Fe(s,c),this.h=f,this.d=function(A,_){let C=!1,P=1/0;for(let R=0;R<_.length;R++){const w=_[R];for(let S=0,F=w.length,T=F-1;S<F;T=S++){const L=w[S],U=w[T];L.y>A.y!=U.y>A.y&&A.x<(U.x-L.x)*(A.y-L.y)/(U.y-L.y)+L.x&&(C=!C),P=Math.min(P,ji(A,L,U))}}return(C?1:-1)*Math.sqrt(P)}(this.p,y),this.max=this.d+this.h*Math.SQRT2}}const hS=Number.POSITIVE_INFINITY,XG=Math.sqrt(2);function $F(d,[s,c]){let f=0,y=0;if(c===hS){s<0&&(s=0);const A=s/XG;switch(d){case"top-right":case"top-left":y=A-7;break;case"bottom-right":case"bottom-left":y=7-A;break;case"bottom":y=7-s;break;case"top":y=s-7}switch(d){case"top-right":case"bottom-right":f=-A;break;case"top-left":case"bottom-left":f=A;break;case"left":f=s;break;case"right":f=-s}}else{switch(s=Math.abs(s),c=Math.abs(c),d){case"top-right":case"top-left":case"top":y=c-7;break;case"bottom-right":case"bottom-left":case"bottom":y=7-c}switch(d){case"top-right":case"bottom-right":case"right":f=-s;break;case"top-left":case"bottom-left":case"left":f=s}}return[f,y]}function dS(d){switch(d){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function ZG(d,s,c,f,y,A,_,C,P,R,w,S,F,T,L){let U=A.textMaxSize.evaluate(s,{},S);U===void 0&&(U=_);const V=d.layers[0].layout,$=V.get("icon-offset").evaluate(s,{},S),ee=KF(c.horizontal)||c.vertical,ie=F.name==="globe",K=el,ce=_/K,he=d.tilePixelRatio*U/K,Be=(Ct=d.overscaling,d.zoom>18&&Ct>2&&(Ct>>=1),Math.max(Nn/(512*Ct),1)*V.get("symbol-spacing")),Ne=V.get("text-padding")*d.tilePixelRatio,Ve=V.get("icon-padding")*d.tilePixelRatio,Oe=zt(V.get("text-max-angle")),rt=V.get("text-rotation-alignment")==="map"&&V.get("symbol-placement")!=="point",je=V.get("icon-rotation-alignment")==="map"&&V.get("symbol-placement")!=="point",ct=V.get("symbol-placement"),yt=Be/2;var Ct;const Et=V.get("icon-text-fit").evaluate(s,{},S),Pt=V.get("icon-text-fit-padding").evaluate(s,{},S),$t=Et!=="none";let Lt;d.hasAnyIconTextFit===!1&&$t&&(d.hasAnyIconTextFit=!0),f&&$t&&(d.allowVerticalPlacement&&c.vertical&&(Lt=FF(f,c.vertical,Et,Pt,$,ce)),ee&&(f=FF(f,ee,Et,Pt,$,ce)));const dn=(xn,tn,Jn)=>{if(tn.x<0||tn.x>=Nn||tn.y<0||tn.y>=Nn)return;let Hn=null;if(ie){const{x:kn,y:Bn,z:br}=F.projectTilePoint(tn.x,tn.y,Jn);Hn={anchor:new Wf(kn,Bn,br,0,void 0),up:F.upVector(Jn,tn.x,tn.y)}}(function(kn,Bn,br,Yn,or,Or,Zr,Vr,Qr,ii,ai,so,Hi,Ur,Di,zi,To,_s,Os,vs,is,xa,Qs,tl,wo,Mc,rd){const gh=kn.addToLineVertexArray(Bn,Yn);let yh,km,op,Mm,K0,Ak,pk,mk=0,gk=0,yk=0,_k=0,VS=-1,QS=-1;const $d={};let vk=cs("");const Om=br?br.anchor:Bn,HS=Qr.layout.get("icon-text-fit").evaluate(is,{},wo)!=="none";let jS=0,$S=0;if(Qr._unevaluatedLayout.getValue("text-radial-offset")===void 0?[jS,$S]=Qr.layout.get("text-offset").evaluate(is,{},wo).map(iu=>iu*el):(jS=Qr.layout.get("text-radial-offset").evaluate(is,{},wo)*el,$S=hS),kn.allowVerticalPlacement&&or.vertical){const iu=or.vertical;if(Di)Ak=fS(iu),Vr&&(pk=fS(Vr));else{const ou=Qr.layout.get("text-rotate").evaluate(is,{},wo)+90;op=Jb(ii,Om,Bn,ai,so,Hi,iu,Ur,ou,zi),Vr&&(Mm=Jb(ii,Om,Bn,ai,so,Hi,Vr,_s,ou))}}if(Or){const iu=Qr.layout.get("icon-rotate").evaluate(is,{},wo),ou=HF(Or,iu,Qs,HS),Ay=Vr?HF(Vr,iu,Qs,HS):void 0;km=Jb(ii,Om,Bn,ai,so,Hi,Or,_s,iu),mk=4*ou.length;const bk=kn.iconSizeData;let Dm=null;bk.kind==="source"?(Dm=[Yh*Qr.layout.get("icon-size").evaluate(is,{},wo)],Dm[0]>tp&&Jr(`${kn.layerIds[0]}: Value for "icon-size" is >= ${P0}. Reduce your "icon-size".`)):bk.kind==="composite"&&(Dm=[Yh*xa.compositeIconSizes[0].evaluate(is,{},wo),Yh*xa.compositeIconSizes[1].evaluate(is,{},wo)],(Dm[0]>tp||Dm[1]>tp)&&Jr(`${kn.layerIds[0]}: Value for "icon-size" is >= ${P0}. Reduce your "icon-size".`)),kn.addSymbols(kn.icon,ou,Dm,vs,Os,is,!1,br,Bn,gh.lineStartIndex,gh.lineLength,-1,tl,wo,Mc,rd),VS=kn.icon.placedSymbolArray.length-1,Ay&&(gk=4*Ay.length,kn.addSymbols(kn.icon,Ay,Dm,vs,Os,is,Mu.vertical,br,Bn,gh.lineStartIndex,gh.lineLength,-1,tl,wo,Mc,rd),QS=kn.icon.placedSymbolArray.length-1)}for(const iu in or.horizontal){const ou=or.horizontal[iu];yh||(vk=cs(ou.text),Di?K0=fS(ou):yh=Jb(ii,Om,Bn,ai,so,Hi,ou,Ur,Qr.layout.get("text-rotate").evaluate(is,{},wo),zi));const Ay=ou.positionedLines.length===1;if(yk+=GF(kn,br,Bn,ou,Zr,Qr,Di,is,zi,gh,or.vertical?Mu.horizontal:Mu.horizontalOnly,Ay?Object.keys(or.horizontal):[iu],$d,VS,xa,tl,wo,Mc),Ay)break}or.vertical&&(_k+=GF(kn,br,Bn,or.vertical,Zr,Qr,Di,is,zi,gh,Mu.vertical,["vertical"],$d,QS,xa,tl,wo,Mc));let sp=-1;const GS=(iu,ou)=>iu?Math.max(iu,ou):ou;sp=GS(K0,sp),sp=GS(Ak,sp),sp=GS(pk,sp);const dq=sp>-1?1:0;kn.glyphOffsetArray.length>=65535&&Jr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),is.sortKey!==void 0&&kn.addToSortKeyRanges(kn.symbolInstances.length,is.sortKey),kn.symbolInstances.emplaceBack(Bn.x,Bn.y,Om.x,Om.y,Om.z,$d.right>=0?$d.right:-1,$d.center>=0?$d.center:-1,$d.left>=0?$d.left:-1,$d.vertical>=0?$d.vertical:-1,VS,QS,vk,yh!==void 0?yh:kn.collisionBoxArray.length,yh!==void 0?yh+1:kn.collisionBoxArray.length,op!==void 0?op:kn.collisionBoxArray.length,op!==void 0?op+1:kn.collisionBoxArray.length,km!==void 0?km:kn.collisionBoxArray.length,km!==void 0?km+1:kn.collisionBoxArray.length,Mm||kn.collisionBoxArray.length,Mm?Mm+1:kn.collisionBoxArray.length,ai,yk,_k,mk,gk,dq,0,jS,$S,sp,0,HS?1:0)})(d,tn,Hn,xn,c,f,y,Lt,d.layers[0],d.collisionBoxArray,s.index,s.sourceLayerIndex,d.index,Ne,rt,P,0,Ve,je,$,s,A,R,w,S,T,L)};if(ct==="line")for(const xn of UF(s.geometry,0,0,Nn,Nn)){const tn=GG(xn,Be,Oe,c.vertical||ee,f,K,he,d.overscaling,Nn);for(const Jn of tn)ee&&YG(d,ee.text,yt,Jn)||dn(xn,Jn,S)}else if(ct==="line-center"){for(const xn of s.geometry)if(xn.length>1){const tn=$G(xn,Oe,c.vertical||ee,f,K,he);tn&&dn(xn,tn,S)}}else if(s.type==="Polygon")for(const xn of zb(s.geometry,0)){const tn=qG(xn,16);dn(xn[0],new Wf(tn.x,tn.y,0,0,void 0),S)}else if(s.type==="LineString")for(const xn of s.geometry)dn(xn,new Wf(xn[0].x,xn[0].y,0,0,void 0),S);else if(s.type==="Point")for(const xn of s.geometry)for(const tn of xn)dn([tn],new Wf(tn.x,tn.y,0,0,void 0),S)}const P0=255,tp=P0*Yh;function GF(d,s,c,f,y,A,_,C,P,R,w,S,F,T,L,U,V,$){const ee=function(ce,he,Be,Ne,Ve,Oe,rt,je){const ct=[];if(he.positionedLines.length===0)return ct;const yt=Ne.layout.get("text-rotate").evaluate(Oe,{})*Math.PI/180,Ct=function(dn){const xn=dn[0],tn=dn[1],Jn=xn*tn;return Jn>0?[xn,-tn]:Jn<0?[-xn,tn]:xn===0?[tn,xn]:[tn,-xn]}(Be);let Et=Math.abs(he.top-he.bottom);for(const dn of he.positionedLines)Et-=dn.lineOffset;const Pt=he.positionedLines.length,$t=Et/Pt;let Lt=he.top-Be[1];for(let dn=0;dn<Pt;++dn){const xn=he.positionedLines[dn];Lt=KG(he,$t,Lt,dn);for(const tn of xn.positionedGlyphs){if(!tn.rect)continue;const Jn=tn.rect||{};let Hn=BF+1,kn=!0,Bn=1,br=0;if(tn.imageName){const vs=rt[tn.imageName];if(!vs)continue;if(vs.sdf){Jr("SDF images are not supported in formatted text and will be ignored.");continue}kn=!1,Bn=vs.pixelRatio,Hn=T0/Bn}const Yn=(Ve||je)&&tn.vertical,or=tn.metrics.advance*tn.scale/2,Or=tn.metrics,Zr=tn.rect;if(Zr===null)continue;je&&he.verticalizable&&(br=tn.imageName?or-tn.metrics.width*tn.scale/2:0);const Vr=Ve?[tn.x+or,tn.y]:[0,0];let Qr=[0,0],ii=[0,0],ai=!1;Ve||(Yn?(ii=[tn.x+or+Ct[0],tn.y+Ct[1]-br],ai=!0):Qr=[tn.x+or+Be[0],tn.y+Be[1]-br]);const so=Zr.w*tn.scale/(Bn*(tn.localGlyph?Jh:1)),Hi=Zr.h*tn.scale/(Bn*(tn.localGlyph?Jh:1));let Ur,Di,zi,To;if(Yn){const vs=tn.y-Lt,is=new Fe(-or,or-vs),xa=-Math.PI/2,Qs=new Fe(...ii);Ur=new Fe(-or+Qr[0],Qr[1]),Ur._rotateAround(xa,is)._add(Qs),Ur.x+=-vs+or,Ur.y-=(Or.left-Hn)*tn.scale;const tl=tn.imageName?Or.advance*tn.scale:el*tn.scale,wo=String.fromCodePoint(tn.glyph);OG(wo)?Ur.x+=(1-Hn)*tn.scale:DG(wo)?Ur.x+=tl-Or.height*tn.scale+(-Hn-1)*tn.scale:Ur.x+=tn.imageName||Or.width+2*Hn===Zr.w&&Or.height+2*Hn===Zr.h?(tl-Hi)/2:(tl-(Or.height+2*Hn)*tn.scale)/2,Di=new Fe(Ur.x,Ur.y-so),zi=new Fe(Ur.x+Hi,Ur.y),To=new Fe(Ur.x+Hi,Ur.y-so)}else{const vs=(Or.left-Hn)*tn.scale-or+Qr[0],is=(-Or.top-Hn)*tn.scale+Qr[1],xa=vs+so,Qs=is+Hi;Ur=new Fe(vs,is),Di=new Fe(xa,is),zi=new Fe(vs,Qs),To=new Fe(xa,Qs)}if(yt){let vs;vs=Ve?new Fe(0,0):ai?new Fe(Ct[0],Ct[1]):new Fe(Be[0],Be[1]),Ur._rotateAround(yt,vs),Di._rotateAround(yt,vs),zi._rotateAround(yt,vs),To._rotateAround(yt,vs)}const _s=new Fe(0,0),Os=new Fe(0,0);ct.push({tl:Ur,tr:Di,bl:zi,br:To,texPrimary:Jn,texSecondary:void 0,writingMode:he.writingMode,glyphOffset:Vr,sectionIndex:tn.sectionIndex,isSDF:kn,pixelOffsetTL:_s,pixelOffsetBR:Os,minFontScaleX:0,minFontScaleY:0})}}return ct}(0,f,P,A,_,C,y,d.allowVerticalPlacement),ie=d.textSizeData;let K=null;ie.kind==="source"?(K=[Yh*A.layout.get("text-size").evaluate(C,{},V)],K[0]>tp&&Jr(`${d.layerIds[0]}: Value for "text-size" is >= ${P0}. Reduce your "text-size".`)):ie.kind==="composite"&&(K=[Yh*L.compositeTextSizes[0].evaluate(C,{},V),Yh*L.compositeTextSizes[1].evaluate(C,{},V)],(K[0]>tp||K[1]>tp)&&Jr(`${d.layerIds[0]}: Value for "text-size" is >= ${P0}. Reduce your "text-size".`)),d.addSymbols(d.text,ee,K,P,_,C,w,s,c,R.lineStartIndex,R.lineLength,T,U,V,$,!1);for(const ce of S)F[ce]=d.text.placedSymbolArray.length-1;return 4*ee.length}function KF(d){for(const s in d)return d[s];return null}function Jb(d,s,c,f,y,A,_,C,P,R){let w=_.top,S=_.bottom,F=_.left,T=_.right;const L=_.collisionPadding;if(L&&(F-=L[0],w-=L[1],T+=L[2],S+=L[3]),P){const U=new Fe(F,w),V=new Fe(T,w),$=new Fe(F,S),ee=new Fe(T,S),ie=zt(P);let K=new Fe(0,0);R&&(K=new Fe(R[0],R[1])),U._rotateAround(ie,K),V._rotateAround(ie,K),$._rotateAround(ie,K),ee._rotateAround(ie,K),F=Math.min(U.x,V.x,$.x,ee.x),T=Math.max(U.x,V.x,$.x,ee.x),w=Math.min(U.y,V.y,$.y,ee.y),S=Math.max(U.y,V.y,$.y,ee.y)}return d.emplaceBack(s.x,s.y,s.z,c.x,c.y,F,w,T,S,C,f,y,A),d.length-1}function fS(d){d.collisionPadding&&(d.top-=d.collisionPadding[1],d.bottom+=d.collisionPadding[3]);const s=d.bottom-d.top;return s>0?Math.max(10,s):null}function YG(d,s,c,f){const y=d.compareText;if(s in y){const A=y[s];for(let _=A.length-1;_>=0;_--)if(f.dist(A[_])<c)return!0}else y[s]=[];return y[s].push(f),!1}function qF(d,s){const c=d.fovAboveCenter,f=d.elevation?d.elevation.getMinElevationBelowMSL()*s:0,y=(d._camera.position[2]*d.worldSize-f)/Math.cos(d._pitch),A=Math.sin(c)*y/Math.sin(Math.max(Math.PI/2-d._pitch-c,.01));let _=Math.sin(d._pitch)*A+y;const C=y*(1/d._horizonShift);return d.elevation&&d.elevation.exaggeration()!==0||(_*=1+Math.max(d.zoom-17,0)),Math.min(1.01*_,C)}function L0(d,s){if(!s.isReprojectedInTileSpace)return{scale:1<<d.z,x:d.x,y:d.y,x2:d.x+1,y2:d.y+1,projection:s};const c=Math.pow(2,-d.z),f=d.x*c,y=(d.x+1)*c,A=d.y*c,_=(d.y+1)*c,C=Xe(f),P=Xe(y),R=qe(A),w=qe(_),S=s.project(C,R),F=s.project(P,R),T=s.project(P,w),L=s.project(C,w);let U=Math.min(S.x,F.x,T.x,L.x),V=Math.min(S.y,F.y,T.y,L.y),$=Math.max(S.x,F.x,T.x,L.x),ee=Math.max(S.y,F.y,T.y,L.y);const ie=c/16;function K(he,Be,Ne,Ve,Oe,rt){const je=(Ne+Oe)/2,ct=(Ve+rt)/2,yt=s.project(Xe(je),qe(ct)),Ct=Math.max(0,U-yt.x,V-yt.y,yt.x-$,yt.y-ee);U=Math.min(U,yt.x),$=Math.max($,yt.x),V=Math.min(V,yt.y),ee=Math.max(ee,yt.y),Ct>ie&&(K(he,yt,Ne,Ve,je,ct),K(yt,Be,je,ct,Oe,rt))}K(S,F,f,A,y,A),K(F,T,y,A,y,_),K(T,L,y,_,f,_),K(L,S,f,_,f,A),U-=ie,V-=ie,$+=ie,ee+=ie;const ce=1/Math.max($-U,ee-V);return{scale:ce,x:U*ce,y:V*ce,x2:$*ce,y2:ee*ce,projection:s}}function WF(d,{x:s,y:c},f=0){return new Fe(((s-f)*d.scale-d.x)*Nn,(c*d.scale-d.y)*Nn)}const JG=De.mat4.identity(new Float32Array(16));class np{constructor(s){this.spec=s,this.name=s.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(s,c){return{x:0,y:0,z:0}}unproject(s,c){return new re(0,0)}projectTilePoint(s,c,f){return{x:s,y:c,z:0}}locationPoint(s,c,f=!0){return s._coordinatePoint(s.locationCoordinate(c),f)}pixelsPerMeter(s,c){return Ue(1,s)*c}pixelSpaceConversion(s,c,f){return 1}farthestPixelDistance(s){return qF(s,s.pixelsPerMeter)}pointCoordinate(s,c,f,y){const A=s.horizonLineFromTop(!1),_=new Fe(c,Math.max(A,f));return s.rayIntersectionCoordinate(s.pointRayIntersection(_,y))}pointCoordinate3D(s,c,f){const y=new Fe(c,f);if(s.elevation)return s.elevation.pointCoordinate(y);{const A=this.pointCoordinate(s,y.x,y.y,0);return[A.x,A.y,A.z]}}isPointAboveHorizon(s,c){if(s.elevation&&s.elevation.visibleDemTiles.length)return!this.pointCoordinate3D(s,c.x,c.y);const f=s.horizonLineFromTop();return c.y<f}createInversionMatrix(s,c){return JG}createTileMatrix(s,c,f){let y,A,_;const C=f.canonical,P=De.mat4.identity(new Float64Array(16));if(this.isReprojectedInTileSpace){const R=L0(C,this);y=1,A=R.x+f.wrap*R.scale,_=R.y,De.mat4.scale(P,P,[y/R.scale,y/R.scale,s.pixelsPerMeter/c])}else y=c/s.zoomScale(C.z),A=(C.x+Math.pow(2,C.z)*f.wrap)*y,_=C.y*y;return De.mat4.translate(P,P,[A,_,0]),De.mat4.scale(P,P,[y/Nn,y/Nn,1]),P}upVector(s,c,f){return[0,0,1]}upVectorScale(s,c,f){return{metersToTile:1}}}class eK extends np{constructor(s){super(s),this.range=[4,7],this.center=s.center||[-96,37.5];const[c,f]=this.parallels=s.parallels||[29.5,45.5],y=Math.sin(zt(c));this.n=(y+Math.sin(zt(f)))/2,this.c=1+y*(2*this.n-y),this.r0=Math.sqrt(this.c)/this.n}project(s,c){const{n:f,c:y,r0:A}=this,_=zt(s-this.center[0]),C=zt(c),P=Math.sqrt(y-2*f*Math.sin(C))/f;return{x:P*Math.sin(_*f),y:P*Math.cos(_*f)-A,z:0}}unproject(s,c){const{n:f,c:y,r0:A}=this,_=A+c;let C=Math.atan2(s,Math.abs(_))*Math.sign(_);_*f<0&&(C-=Math.PI*Math.sign(s)*Math.sign(_));const P=zt(this.center[0])*f;C=ar(C,-Math.PI-P,Math.PI-P);const R=_n(Jt(C/f)+this.center[0],-180,180),w=Math.asin(_n((y-(s*s+_*_)*f*f)/(2*f),-1,1)),S=_n(Jt(w),-it,it);return new re(R,S)}}const F0=1.340264,R0=-.081106,k0=893e-6,M0=.003796,ew=Math.sqrt(3)/2;class tK extends np{project(s,c){c=c/180*Math.PI,s=s/180*Math.PI;const f=Math.asin(ew*Math.sin(c)),y=f*f,A=y*y*y;return{x:.5*(s*Math.cos(f)/(ew*(F0+3*R0*y+A*(7*k0+9*M0*y)))/Math.PI+.5),y:1-.5*(f*(F0+R0*y+A*(k0+M0*y))/Math.PI+1),z:0}}unproject(s,c){s=(2*s-.5)*Math.PI;let f=c=(2*(1-c)-1)*Math.PI,y=f*f,A=y*y*y;for(let w,S,F,T=0;T<12&&(S=f*(F0+R0*y+A*(k0+M0*y))-c,F=F0+3*R0*y+A*(7*k0+9*M0*y),w=S/F,f=_n(f-w,-Math.PI/3,Math.PI/3),y=f*f,A=y*y*y,!(Math.abs(w)<1e-12));++T);const _=ew*s*(F0+3*R0*y+A*(7*k0+9*M0*y))/Math.cos(f),C=Math.asin(Math.sin(f)/ew),P=_n(180*_/Math.PI,-180,180),R=_n(180*C/Math.PI,-it,it);return new re(P,R)}}class nK extends np{constructor(s){super(s),this.wrap=!0,this.supportsWorldCopies=!0}project(s,c){return{x:.5+s/360,y:.5-c/360,z:0}}unproject(s,c){const f=360*(s-.5),y=_n(360*(.5-c),-it,it);return new re(f,y)}}const ay=Math.PI/2;function tw(d){return Math.tan((ay+d)/2)}class rK extends np{constructor(s){super(s),this.center=s.center||[0,30];const[c,f]=this.parallels=s.parallels||[30,30];let y=zt(c),A=zt(f);this.southernCenter=y+A<0,this.southernCenter&&(y=-y,A=-A);const _=Math.cos(y),C=tw(y);this.n=y===A?Math.sin(y):Math.log(_/Math.cos(A))/Math.log(tw(A)/C),this.f=_*Math.pow(tw(y),this.n)/this.n}project(s,c){c=zt(c),this.southernCenter&&(c=-c),s=zt(s-this.center[0]);const f=1e-6,{n:y,f:A}=this;A>0?c<-ay+f&&(c=-ay+f):c>ay-f&&(c=ay-f);const _=A/Math.pow(tw(c),y);let C=_*Math.sin(y*s),P=A-_*Math.cos(y*s);return C=.5*(C/Math.PI+.5),P=.5*(P/Math.PI+.5),{x:C,y:this.southernCenter?P:1-P,z:0}}unproject(s,c){s=(2*s-.5)*Math.PI,this.southernCenter&&(c=1-c),c=(2*(1-c)-.5)*Math.PI;const{n:f,f:y}=this,A=y-c,_=Math.sign(A),C=Math.sign(f)*Math.sqrt(s*s+A*A);let P=Math.atan2(s,Math.abs(A))*_;A*f<0&&(P-=Math.PI*Math.sign(s)*_);const R=_n(Jt(P/f)+this.center[0],-180,180),w=_n(Jt(2*Math.atan(Math.pow(y/C,1/f))-ay),-it,it);return new re(R,this.southernCenter?-w:w)}}class XF extends np{constructor(s){super(s),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(s,c){return{x:ze(s),y:Qe(c),z:0}}unproject(s,c){const f=Xe(s),y=qe(c);return new re(f,y)}}const ZF=zt(it);class iK extends np{project(s,c){const f=(c=zt(c))*c,y=f*f;return{x:.5*((s=zt(s))*(.8707-.131979*f+y*(y*(.003971*f-.001529*y)-.013791))/Math.PI+.5),y:1-.5*(c*(1.007226+f*(.015085+y*(.028874*f-.044475-.005916*y)))/Math.PI+1),z:0}}unproject(s,c){s=(2*s-.5)*Math.PI;let f=c=(2*(1-c)-1)*Math.PI,y=25,A=0,_=f*f;do{_=f*f;const R=_*_;A=(f*(1.007226+_*(.015085+R*(.028874*_-.044475-.005916*R)))-c)/(1.007226+_*(.045255+R*(.259866*_-.311325-.005916*11*R))),f=_n(f-A,-ZF,ZF)}while(Math.abs(A)>1e-6&&--y>0);_=f*f;const C=_n(Jt(s/(.8707+_*(_*(_*_*_*(.003971-.001529*_)-.013791)-.131979))),-180,180),P=Jt(f);return new re(C,P)}}const YF=zt(it);class oK extends np{project(s,c){c=zt(c),s=zt(s);const f=Math.cos(c),y=2/Math.PI,A=Math.acos(f*Math.cos(s/2)),_=Math.sin(A)/A,C=.5*(s*y+2*f*Math.sin(s/2)/_)||0,P=.5*(c+Math.sin(c)/_)||0;return{x:.5*(C/Math.PI+.5),y:1-.5*(P/Math.PI+1),z:0}}unproject(s,c){let f=s=(2*s-.5)*Math.PI,y=c=(2*(1-c)-1)*Math.PI,A=25;const _=1e-6;let C=0,P=0;do{const R=Math.cos(y),w=Math.sin(y),S=2*w*R,F=w*w,T=R*R,L=Math.cos(f/2),U=Math.sin(f/2),V=2*L*U,$=U*U,ee=1-T*L*L,ie=ee?1/ee:0,K=ee?Math.acos(R*L)*Math.sqrt(1/ee):0,ce=.5*(2*K*R*U+2*f/Math.PI)-s,he=.5*(K*w+y)-c,Be=.5*ie*(T*$+K*R*L*F)+1/Math.PI,Ne=ie*(V*S/4-K*w*U),Ve=.125*ie*(S*U-K*w*T*V),Oe=.5*ie*(F*L+K*$*R)+.5,rt=Ne*Ve-Oe*Be;C=(he*Ne-ce*Oe)/rt,P=(ce*Ve-he*Be)/rt,f=_n(f-C,-Math.PI,Math.PI),y=_n(y-P,-YF,YF)}while((Math.abs(C)>_||Math.abs(P)>_)&&--A>0);return new re(Jt(f),Jt(y))}}class JF extends np{constructor(s){super(s),this.center=s.center||[0,0],this.parallels=s.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(zt(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(s,c){const{scale:f,cosPhi:y}=this;return{x:zt(s)*y*f+.5,y:-Math.sin(zt(c))/y*f+.5,z:0}}unproject(s,c){const{scale:f,cosPhi:y}=this,A=-(c-.5)/f,_=_n(Jt((s-.5)/f)/y,-180,180),C=Math.asin(_n(A*y,-1,1)),P=_n(Jt(C),-it,it);return new re(_,P)}}class sK extends XF{constructor(s){super(s),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(s,c,f){const y=p0(s,c,f),A=Ob(Hd(f));return De.vec3.transformMat4(y,y,A),{x:y[0],y:y[1],z:y[2]}}locationPoint(s,c){const f=j(c.lat,c.lng),y=De.vec3.normalize([],f),A=s.elevation?s.elevation.getAtPointOrZero(s.locationCoordinate(c),s._centerAltitude):s._centerAltitude,_=Ue(1,0)*Nn*A;De.vec3.scaleAndAdd(f,f,y,_);const C=De.mat4.identity(new Float64Array(16));return De.mat4.multiply(C,s.pixelMatrix,s.globeMatrix),De.vec3.transformMat4(f,f,C),new Fe(f[0],f[1])}pixelsPerMeter(s,c){return Ue(1,0)*c}pixelSpaceConversion(s,c,f){const y=Ue(1,s)*c,A=$n(Ue(1,45)*c,y,f);return this.pixelsPerMeter(s,c)/A}createTileMatrix(s,c,f){const y=DB(Hd(f.canonical));return De.mat4.multiply(new Float64Array(16),s.globeMatrix,y)}createInversionMatrix(s,c){const{center:f}=s,y=Ob(Hd(c));return De.mat4.rotateY(y,y,zt(f.lng)),De.mat4.rotateX(y,y,zt(f.lat)),De.mat4.scale(y,y,[s._pixelsPerMercatorPixel,s._pixelsPerMercatorPixel,1]),Float32Array.from(y)}pointCoordinate(s,c,f,y){return Rb(s,c,f,!0)||new Rt(0,0)}pointCoordinate3D(s,c,f){const y=this.pointCoordinate(s,c,f,0);return[y.x,y.y,y.z]}isPointAboveHorizon(s,c){return!Rb(s,c.x,c.y,!1)}farthestPixelDistance(s){const c=function(y,A){const _=y.cameraToCenterDistance,C=y._centerAltitude*A,P=y._camera,R=y._camera.forward(),w=De.vec3.add([],De.vec3.scale([],R,-_),[0,0,C]),S=y.worldSize/(2*Math.PI),F=[0,0,-S],T=y.width/y.height,L=Math.tan(y.fovAboveCenter),U=De.vec3.scale([],P.up(),L),V=De.vec3.scale([],P.right(),L*T),$=De.vec3.normalize([],De.vec3.add([],De.vec3.add([],R,U),V)),ee=[];let ie;if(new Zh(w,$).closestPointOnSphere(F,S,ee)){const K=De.vec3.add([],ee,F),ce=De.vec3.sub([],K,w);ie=Math.cos(y.fovAboveCenter)*De.vec3.length(ce)}else{const K=De.vec3.sub([],w,F),ce=De.vec3.sub([],F,w);De.vec3.normalize(ce,ce);const he=De.vec3.length(K)-S;ie=Math.sqrt(he*(he+2*S));const Be=Math.acos(ie/(S+he))-Math.acos(De.vec3.dot(R,ce));ie*=Math.cos(Be)}return 1.01*ie}(s,this.pixelsPerMeter(s.center.lat,s.worldSize)),f=ZA(s.zoom);if(f>0){const y=qF(s,Ue(1,s.center.lat)*s.worldSize),A=s.worldSize/(2*Math.PI),_=Math.max(s.width,s.height)/s.worldSize*Math.PI;return $n(c,y+A*(1-Math.cos(_)),Math.pow(f,10))}return c}upVector(s,c,f){return p0(c,f,s,1)}upVectorScale(s){return{metersToTile:Kf(Mb(Hd(s)))}}}function eR(d){const s=d.parallels,c=!!s&&Math.abs(s[0]+s[1])<.01;switch(d.name){case"mercator":return new XF(d);case"equirectangular":return new nK(d);case"naturalEarth":return new iK(d);case"equalEarth":return new tK(d);case"winkelTripel":return new oK(d);case"albers":return c?new JF(d):new eK(d);case"lambertConformalConic":return c?new JF(d):new rK(d);case"globe":return new sK(d)}throw new Error(`Invalid projection name: ${d.name}`)}const aK=ny.VectorTileFeature.types,lK=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function nw(d,s,c,f,y,A,_,C,P,R,w,S,F){const T=C?Math.min(tp,Math.round(C[0])):0,L=C?Math.min(tp,Math.round(C[1])):0;d.emplaceBack(s,c,Math.round(32*f),Math.round(32*y),A,_,(T<<1)+(P?1:0),L,16*R,16*w,256*S,256*F)}function rw(d,s,c){d.emplaceBack(s,c)}function iw(d,s,c,f,y,A,_){d.emplaceBack(s,c,f,y,A,_)}function ow(d,s,c,f,y){d.emplaceBack(s,c,f,y),d.emplaceBack(s,c,f,y),d.emplaceBack(s,c,f,y),d.emplaceBack(s,c,f,y)}function cK(d){for(const s of d.sections)if(Cr(s.text))return!0;return!1}class AS{constructor(s){this.layoutVertexArray=new Qf,this.indexArray=new ea,this.programConfigurations=s,this.segments=new hs,this.dynamicLayoutVertexArray=new Sl,this.opacityVertexArray=new jA,this.placedSymbolArray=new l0,this.iconTransitioningVertexArray=new ku,this.globeExtVertexArray=new eu,this.zOffsetVertexArray=new Ud}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0&&this.iconTransitioningVertexArray.length===0}upload(s,c,f,y,A){this.isEmpty()||(f&&(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,BG.members),this.indexBuffer=s.createIndexBuffer(this.indexArray,c),this.dynamicLayoutVertexBuffer=s.createVertexBuffer(this.dynamicLayoutVertexArray,TG.members,!0),this.opacityVertexBuffer=s.createVertexBuffer(this.opacityVertexArray,lK,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=s.createVertexBuffer(this.iconTransitioningVertexArray,PG.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=s.createVertexBuffer(this.globeExtVertexArray,SG.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||A)&&(this.zOffsetVertexBuffer=s.createVertexBuffer(this.zOffsetVertexArray,IG.members,!0)),this.opacityVertexBuffer.itemSize=1),(f||y)&&this.programConfigurations.upload(s))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy())}}He(AS,"SymbolBuffers");class pS{constructor(s,c,f){this.layoutVertexArray=new s,this.layoutAttributes=c,this.indexArray=new f,this.segments=new hs,this.collisionVertexArray=new Dd,this.collisionVertexArrayExt=new Sl}upload(s){this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=s.createVertexBuffer(this.collisionVertexArray,LG.members,!0),this.collisionVertexBufferExt=s.createVertexBuffer(this.collisionVertexArrayExt,FG.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}He(pS,"CollisionBuffers");class sw{constructor(s){this.collisionBoxArray=s.collisionBoxArray,this.zoom=s.zoom,this.lut=s.lut,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(_=>_.fqid),this.index=s.index,this.pixelRatio=s.pixelRatio,this.sourceLayerIndex=s.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=De.mat4.identity([]),this.placementViewportMatrix=De.mat4.identity([]);const c=this.layers[0]._unevaluatedLayout._values;this.textSizeData=rS(this.zoom,c["text-size"]),this.iconSizeData=rS(this.zoom,c["icon-size"]);const f=this.layers[0].layout,y=f.get("symbol-sort-key"),A=f.get("symbol-z-order");this.canOverlap=f.get("text-allow-overlap")||f.get("icon-allow-overlap")||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=A!=="viewport-y"&&y.constantOr(1)!==void 0,this.sortFeaturesByY=(A==="viewport-y"||A==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=f.get("text-writing-mode").map(_=>Mu[_]),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id),this.sourceID=s.sourceID,this.projection=s.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=f.get("symbol-z-elevate"),this.activeReplacements=[],this.replacementUpdateTime=0}createArrays(){this.text=new AS(new Vd(this.layers,{zoom:this.zoom,lut:this.lut},s=>s.startsWith("text")||s.startsWith("symbol"))),this.icon=new AS(new Vd(this.layers,{zoom:this.zoom,lut:this.lut},s=>s.startsWith("icon")||s.startsWith("symbol"))),this.glyphOffsetArray=new Cb,this.lineVertexArray=new Zg,this.symbolInstances=new c0}calculateGlyphDependencies(s,c,f,y,A){for(let _=0;_<s.length;_++){const C=s.codePointAt(_);if(C===void 0)break;if(c[C]=!0,y&&A&&C<=65535){const P=B0[s.charAt(_)];P&&(c[P.charCodeAt(0)]=!0)}}}updateFootprints(s,c){}updateReplacement(s,c){if(c.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=c.updateTime;const f=c.getReplacementRegionsForTile(s.toUnwrapped(),!0);return!ZB(this.activeReplacements,f)&&(this.activeReplacements=f,!0)}populate(s,c,f,y){const A=this.layers[0],_=A.layout,C=this.projection.name==="globe",P=_.get("text-font"),R=_.get("text-field"),w=_.get("icon-image"),S=(R.value.kind!=="constant"||R.value.value instanceof Rs&&!R.value.value.isEmpty()||R.value.value.toString().length>0)&&(P.value.kind!=="constant"||P.value.value.length>0),F=w.value.kind!=="constant"||!!w.value.value||Object.keys(w.parameters).length>0,T=_.get("symbol-sort-key");if(this.features=[],!S&&!F)return;const L=c.iconDependencies,U=c.glyphDependencies,V=c.availableImages,$=new Oi(this.zoom);for(const{feature:ee,id:ie,index:K,sourceLayerIndex:ce}of s){const he=A._featureFilter.needGeometry,Be=Mn(ee,he);if(!A._featureFilter.filter($,Be,f))continue;if(he||(Be.geometry=Rn(ee,f,y)),C&&ee.type!==1&&f.z<=5){const rt=Be.geometry,je=.98078528056,ct=(yt,Ct)=>{const Et=p0(yt.x,yt.y,f,1),Pt=p0(Ct.x,Ct.y,f,1);return De.vec3.dot(Et,Pt)<je};for(let yt=0;yt<rt.length;yt++)rt[yt]=Ln(rt[yt],ct)}let Ne,Ve;if(S){const rt=A.getValueAndResolveTokens("text-field",Be,f,V),je=Rs.factory(rt);cK(je)&&(this.hasRTLText=!0),(!this.hasRTLText||Es()==="unavailable"||this.hasRTLText&&io.isParsed())&&(Ne=MG(je,A,Be))}if(F){const rt=A.getValueAndResolveTokens("icon-image",Be,f,V);Ve=rt instanceof us?rt:us.fromString(rt)}if(!Ne&&!Ve)continue;const Oe=this.sortFeaturesByKey?T.evaluate(Be,{},f):void 0;if(this.features.push({id:ie,text:Ne,icon:Ve,index:K,sourceLayerIndex:ce,geometry:Be.geometry,properties:ee.properties,type:aK[ee.type],sortKey:Oe}),Ve&&(L[Ve.namePrimary]=!0,Ve.nameSecondary&&(L[Ve.nameSecondary]=!0)),Ne){const rt=P.evaluate(Be,{},f).join(","),je=_.get("text-rotation-alignment")==="map"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Mu.vertical)>=0;for(const ct of Ne.sections)if(ct.image)L[ct.image.namePrimary]=!0;else{const yt=Pn(Ne.toString()),Ct=ct.fontStack||rt,Et=U[Ct]=U[Ct]||{};this.calculateGlyphDependencies(ct.text,Et,je,this.allowVerticalPlacement,yt)}}}_.get("symbol-placement")==="line"&&(this.features=function(ee){const ie={},K={},ce=[];let he=0;function Be(rt){ce.push(ee[rt]),he++}function Ne(rt,je,ct){const yt=K[rt];return delete K[rt],K[je]=yt,ce[yt].geometry[0].pop(),ce[yt].geometry[0]=ce[yt].geometry[0].concat(ct[0]),yt}function Ve(rt,je,ct){const yt=ie[je];return delete ie[je],ie[rt]=yt,ce[yt].geometry[0].shift(),ce[yt].geometry[0]=ct[0].concat(ce[yt].geometry[0]),yt}function Oe(rt,je,ct){const yt=ct?je[0][je[0].length-1]:je[0][0];return`${rt}:${yt.x}:${yt.y}`}for(let rt=0;rt<ee.length;rt++){const je=ee[rt],ct=je.geometry,yt=je.text?je.text.toString():null;if(!yt){Be(rt);continue}const Ct=Oe(yt,ct),Et=Oe(yt,ct,!0);if(Ct in K&&Et in ie&&K[Ct]!==ie[Et]){const Pt=Ve(Ct,Et,ct),$t=Ne(Ct,Et,ce[Pt].geometry);delete ie[Ct],delete K[Et],K[Oe(yt,ce[$t].geometry,!0)]=$t,ce[Pt].geometry=null}else Ct in K?Ne(Ct,Et,ct):Et in ie?Ve(Ct,Et,ct):(Be(rt),ie[Ct]=he-1,K[Et]=he-1)}return ce.filter(rt=>rt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ee,ie)=>ee.sortKey-ie.sortKey)}update(s,c,f,y,A){const _=Object.keys(s).length!==0;if(_&&!this.stateDependentLayers.length)return;const C=_?this.stateDependentLayers:this.layers;this.text.programConfigurations.updatePaintArrays(s,c,C,f,y,A),this.icon.programConfigurations.updatePaintArrays(s,c,C,f,y,A)}updateZOffset(){const s=(A,_,C)=>{f+=_,f>A.length&&A.resize(f);for(let P=-_;P<0;P++)A.emplace(P+f,C)},c=(A,_,C)=>{y+=_,y>A.length&&A.resize(y);for(let P=-_;P<0;P++)A.emplace(P+y,C)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let f=0,y=0;for(let A=0;A<this.symbolInstances.length;A++){const _=this.symbolInstances.get(A),{numHorizontalGlyphVertices:C,numVerticalGlyphVertices:P,numIconVertices:R}=_,w=_.zOffset,S=R>0;if((C>0||P>0)&&(s(this.text.zOffsetVertexArray,C,w),s(this.text.zOffsetVertexArray,P,w)),S){const{placedIconSymbolIndex:F,verticalPlacedIconSymbolIndex:T}=_;F>=0&&c(this.icon.zOffsetVertexArray,R,w),T>=0&&c(this.icon.zOffsetVertexArray,_.numVerticalIconVertices,w)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(s){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(s),this.iconCollisionBox.upload(s)),this.text.upload(s,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.icon.upload(s,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=eR(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(s,c){const f=this.lineVertexArray.length;if(s.segment!==void 0)for(const{x:y,y:A}of c)this.lineVertexArray.emplaceBack(y,A);return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(s,c,f,y,A,_,C,P,R,w,S,F,T,L,U,V){const $=s.indexArray,ee=s.layoutVertexArray,ie=s.globeExtVertexArray,K=s.segments.prepareSegment(4*c.length,ee,$,this.canOverlap?_.sortKey:void 0),ce=this.glyphOffsetArray.length,he=K.vertexLength,Be=this.allowVerticalPlacement&&C===Mu.vertical?Math.PI/2:0,Ne=_.text&&_.text.sections;for(let Oe=0;Oe<c.length;Oe++){const{tl:rt,tr:je,bl:ct,br:yt,texPrimary:Ct,texSecondary:Et,pixelOffsetTL:Pt,pixelOffsetBR:$t,minFontScaleX:Lt,minFontScaleY:dn,glyphOffset:xn,isSDF:tn,sectionIndex:Jn}=c[Oe],Hn=K.vertexLength,kn=xn[1];if(nw(ee,R.x,R.y,rt.x,kn+rt.y,Ct.x,Ct.y,f,tn,Pt.x,Pt.y,Lt,dn),nw(ee,R.x,R.y,je.x,kn+je.y,Ct.x+Ct.w,Ct.y,f,tn,$t.x,Pt.y,Lt,dn),nw(ee,R.x,R.y,ct.x,kn+ct.y,Ct.x,Ct.y+Ct.h,f,tn,Pt.x,$t.y,Lt,dn),nw(ee,R.x,R.y,yt.x,kn+yt.y,Ct.x+Ct.w,Ct.y+Ct.h,f,tn,$t.x,$t.y,Lt,dn),P){const{x:Bn,y:br,z:Yn}=P.anchor,[or,Or,Zr]=P.up;iw(ie,Bn,br,Yn,or,Or,Zr),iw(ie,Bn,br,Yn,or,Or,Zr),iw(ie,Bn,br,Yn,or,Or,Zr),iw(ie,Bn,br,Yn,or,Or,Zr),ow(s.dynamicLayoutVertexArray,Bn,br,Yn,Be)}else ow(s.dynamicLayoutVertexArray,R.x,R.y,R.z,Be);if(V){const Bn=Et||Ct;rw(s.iconTransitioningVertexArray,Bn.x,Bn.y),rw(s.iconTransitioningVertexArray,Bn.x+Bn.w,Bn.y),rw(s.iconTransitioningVertexArray,Bn.x,Bn.y+Bn.h),rw(s.iconTransitioningVertexArray,Bn.x+Bn.w,Bn.y+Bn.h)}$.emplaceBack(Hn,Hn+1,Hn+2),$.emplaceBack(Hn+1,Hn+2,Hn+3),K.vertexLength+=4,K.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(xn[0]),Oe!==c.length-1&&Jn===c[Oe+1].sectionIndex||s.programConfigurations.populatePaintArrays(ee.length,_,_.index,{},T,L,U,Ne&&Ne[Jn])}const Ve=P?P.anchor:R;s.placedSymbolArray.emplaceBack(Ve.x,Ve.y,Ve.z,R.x,R.y,ce,this.glyphOffsetArray.length-ce,he,w,S,R.segment,f?f[0]:0,f?f[1]:0,y[0],y[1],C,0,!1,0,F,0)}_commitLayoutVertex(s,c,f,y,A,_,C){s.emplaceBack(c,f,y,A,_,Math.round(C.x),Math.round(C.y))}_addCollisionDebugVertices(s,c,f,y,A,_,C){const P=f.segments.prepareSegment(4,f.layoutVertexArray,f.indexArray),R=P.vertexLength,w=C.tileAnchorX,S=C.tileAnchorY;for(let T=0;T<4;T++)f.collisionVertexArray.emplaceBack(0,0,0,0,0,0);this._commitDebugCollisionVertexUpdate(f.collisionVertexArrayExt,c,s.padding,C.zOffset),this._commitLayoutVertex(f.layoutVertexArray,y,A,_,w,S,new Fe(s.x1,s.y1)),this._commitLayoutVertex(f.layoutVertexArray,y,A,_,w,S,new Fe(s.x2,s.y1)),this._commitLayoutVertex(f.layoutVertexArray,y,A,_,w,S,new Fe(s.x2,s.y2)),this._commitLayoutVertex(f.layoutVertexArray,y,A,_,w,S,new Fe(s.x1,s.y2)),P.vertexLength+=4;const F=f.indexArray;F.emplaceBack(R,R+1),F.emplaceBack(R+1,R+2),F.emplaceBack(R+2,R+3),F.emplaceBack(R+3,R),P.primitiveLength+=4}_addTextDebugCollisionBoxes(s,c,f,y,A,_){for(let C=y;C<A;C++){const P=f.get(C),R=this.getSymbolInstanceTextSize(s,_,c,C);this._addCollisionDebugVertices(P,R,this.textCollisionBox,P.projectedAnchorX,P.projectedAnchorY,P.projectedAnchorZ,_)}}_addIconDebugCollisionBoxes(s,c,f,y,A,_){for(let C=y;C<A;C++){const P=f.get(C),R=this.getSymbolInstanceIconSize(s,c,_.placedIconSymbolIndex);this._addCollisionDebugVertices(P,R,this.iconCollisionBox,P.projectedAnchorX,P.projectedAnchorY,P.projectedAnchorZ,_)}}generateCollisionDebugBuffers(s,c){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new pS(uh,wF.members,ku),this.iconCollisionBox=new pS(uh,wF.members,ku);const f=ry(this.iconSizeData,s),y=ry(this.textSizeData,s);for(let A=0;A<this.symbolInstances.length;A++){const _=this.symbolInstances.get(A);this._addTextDebugCollisionBoxes(y,s,c,_.textBoxStartIndex,_.textBoxEndIndex,_),this._addTextDebugCollisionBoxes(y,s,c,_.verticalTextBoxStartIndex,_.verticalTextBoxEndIndex,_),this._addIconDebugCollisionBoxes(f,s,c,_.iconBoxStartIndex,_.iconBoxEndIndex,_),this._addIconDebugCollisionBoxes(f,s,c,_.verticalIconBoxStartIndex,_.verticalIconBoxEndIndex,_)}}getSymbolInstanceTextSize(s,c,f,y){const A=this.text.placedSymbolArray.get(c.rightJustifiedTextSymbolIndex>=0?c.rightJustifiedTextSymbolIndex:c.centerJustifiedTextSymbolIndex>=0?c.centerJustifiedTextSymbolIndex:c.leftJustifiedTextSymbolIndex>=0?c.leftJustifiedTextSymbolIndex:c.verticalPlacedTextSymbolIndex>=0?c.verticalPlacedTextSymbolIndex:y),_=Kb(this.textSizeData,s,A)/el;return this.tilePixelRatio*_}getSymbolInstanceIconSize(s,c,f){const y=this.icon.placedSymbolArray.get(f),A=Kb(this.iconSizeData,s,y);return this.tilePixelRatio*A}_commitDebugCollisionVertexUpdate(s,c,f,y){s.emplaceBack(c,-f,-f,y),s.emplaceBack(c,f,-f,y),s.emplaceBack(c,f,f,y),s.emplaceBack(c,-f,f,y)}_updateTextDebugCollisionBoxes(s,c,f,y,A,_){for(let C=y;C<A;C++){const P=f.get(C),R=this.getSymbolInstanceTextSize(s,_,c,C);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,R,P.padding,_.zOffset)}}_updateIconDebugCollisionBoxes(s,c,f,y,A,_){for(let C=y;C<A;C++){const P=f.get(C),R=this.getSymbolInstanceIconSize(s,c,_.placedIconSymbolIndex);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,R,P.padding,_.zOffset)}}updateCollisionDebugBuffers(s,c){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const f=ry(this.iconSizeData,s),y=ry(this.textSizeData,s);for(let A=0;A<this.symbolInstances.length;A++){const _=this.symbolInstances.get(A);this._updateTextDebugCollisionBoxes(y,s,c,_.textBoxStartIndex,_.textBoxEndIndex,_),this._updateTextDebugCollisionBoxes(y,s,c,_.verticalTextBoxStartIndex,_.verticalTextBoxEndIndex,_),this._updateIconDebugCollisionBoxes(f,s,c,_.iconBoxStartIndex,_.iconBoxEndIndex,_),this._updateIconDebugCollisionBoxes(f,s,c,_.verticalIconBoxStartIndex,_.verticalIconBoxEndIndex,_)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(s,c,f,y,A,_,C,P,R){const w={};if(c<f){const{x1:S,y1:F,x2:T,y2:L,padding:U,projectedAnchorX:V,projectedAnchorY:$,projectedAnchorZ:ee,tileAnchorX:ie,tileAnchorY:K,featureIndex:ce}=s.get(c);w.textBox={x1:S,y1:F,x2:T,y2:L,padding:U,projectedAnchorX:V,projectedAnchorY:$,projectedAnchorZ:ee,tileAnchorX:ie,tileAnchorY:K},w.textFeatureIndex=ce}if(y<A){const{x1:S,y1:F,x2:T,y2:L,padding:U,projectedAnchorX:V,projectedAnchorY:$,projectedAnchorZ:ee,tileAnchorX:ie,tileAnchorY:K,featureIndex:ce}=s.get(y);w.verticalTextBox={x1:S,y1:F,x2:T,y2:L,padding:U,projectedAnchorX:V,projectedAnchorY:$,projectedAnchorZ:ee,tileAnchorX:ie,tileAnchorY:K},w.verticalTextFeatureIndex=ce}if(_<C){const{x1:S,y1:F,x2:T,y2:L,padding:U,projectedAnchorX:V,projectedAnchorY:$,projectedAnchorZ:ee,tileAnchorX:ie,tileAnchorY:K,featureIndex:ce}=s.get(_);w.iconBox={x1:S,y1:F,x2:T,y2:L,padding:U,projectedAnchorX:V,projectedAnchorY:$,projectedAnchorZ:ee,tileAnchorX:ie,tileAnchorY:K},w.iconFeatureIndex=ce}if(P<R){const{x1:S,y1:F,x2:T,y2:L,padding:U,projectedAnchorX:V,projectedAnchorY:$,projectedAnchorZ:ee,tileAnchorX:ie,tileAnchorY:K,featureIndex:ce}=s.get(P);w.verticalIconBox={x1:S,y1:F,x2:T,y2:L,padding:U,projectedAnchorX:V,projectedAnchorY:$,projectedAnchorZ:ee,tileAnchorX:ie,tileAnchorY:K},w.verticalIconFeatureIndex=ce}return w}deserializeCollisionBoxes(s){this.collisionArrays=[];for(let c=0;c<this.symbolInstances.length;c++){const f=this.symbolInstances.get(c);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(s,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(s,c){const f=s.placedSymbolArray.get(c),y=f.vertexStartIndex+4*f.numGlyphs;for(let A=f.vertexStartIndex;A<y;A+=4)s.indexArray.emplaceBack(A,A+1,A+2),s.indexArray.emplaceBack(A+1,A+2,A+3)}getSortedSymbolIndexes(s){if(this.sortedAngle===s&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const c=Math.sin(s),f=Math.cos(s),y=[],A=[],_=[];for(let C=0;C<this.symbolInstances.length;++C){_.push(C);const P=this.symbolInstances.get(C);y.push(0|Math.round(c*P.tileAnchorX+f*P.tileAnchorY)),A.push(P.featureIndex)}return _.sort((C,P)=>y[C]-y[P]||A[P]-A[C]),_}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let s=0;s<this.symbolInstances.length;++s)this.symbolInstanceIndexesSortedZOffset.push(s)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort((s,c)=>this.symbolInstances.get(c).zOffset-this.symbolInstances.get(s).zOffset)}addToSortKeyRanges(s,c){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===c?f.symbolInstanceEnd=s+1:this.sortKeyRanges.push({sortKey:c,symbolInstanceStart:s,symbolInstanceEnd:s+1})}sortFeatures(s){if(this.sortFeaturesByY&&this.sortedAngle!==s&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(s),this.sortedAngle=s,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const c of this.symbolInstanceIndexes){const f=this.symbolInstances.get(c);this.featureSortOrder.push(f.featureIndex);const{rightJustifiedTextSymbolIndex:y,centerJustifiedTextSymbolIndex:A,leftJustifiedTextSymbolIndex:_,verticalPlacedTextSymbolIndex:C,placedIconSymbolIndex:P,verticalPlacedIconSymbolIndex:R}=f;y>=0&&this.addIndicesForPlacedSymbol(this.text,y),A>=0&&A!==y&&this.addIndicesForPlacedSymbol(this.text,A),_>=0&&_!==A&&_!==y&&this.addIndicesForPlacedSymbol(this.text,_),C>=0&&this.addIndicesForPlacedSymbol(this.text,C),P>=0&&this.addIndicesForPlacedSymbol(this.icon,P),R>=0&&this.addIndicesForPlacedSymbol(this.icon,R)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let tR,nR,mS;He(sw,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),sw.addDynamicAttributes=ow;class rR{constructor(s){this.type=s.property.overrides?s.property.overrides.runtimeType:aa,this.defaultValue=s}evaluate(s){if(s.formattedSection){const c=this.defaultValue.property.overrides;if(c&&c.hasOverride(s.formattedSection))return c.getOverride(s.formattedSection)}return s.feature&&s.featureState?this.defaultValue.evaluate(s.feature,s.featureState):this.defaultValue.property.specification.default}eachChild(s){this.defaultValue.isConstant()||s(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}He(rR,"FormatSectionOverride",{omit:["defaultValue"]});const gS=()=>mS||(mS={layout:tR||(tR=new Ji({"symbol-placement":new Tn(Nt.layout_symbol["symbol-placement"]),"symbol-spacing":new Tn(Nt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Tn(Nt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new dr(Nt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Tn(Nt.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new Tn(Nt.layout_symbol["symbol-z-elevate"]),"icon-allow-overlap":new Tn(Nt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Tn(Nt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Tn(Nt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Tn(Nt.layout_symbol["icon-rotation-alignment"]),"icon-size":new dr(Nt.layout_symbol["icon-size"]),"icon-text-fit":new dr(Nt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new dr(Nt.layout_symbol["icon-text-fit-padding"]),"icon-image":new dr(Nt.layout_symbol["icon-image"]),"icon-rotate":new dr(Nt.layout_symbol["icon-rotate"]),"icon-padding":new Tn(Nt.layout_symbol["icon-padding"]),"icon-keep-upright":new Tn(Nt.layout_symbol["icon-keep-upright"]),"icon-offset":new dr(Nt.layout_symbol["icon-offset"]),"icon-anchor":new dr(Nt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Tn(Nt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Tn(Nt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Tn(Nt.layout_symbol["text-rotation-alignment"]),"text-field":new dr(Nt.layout_symbol["text-field"]),"text-font":new dr(Nt.layout_symbol["text-font"]),"text-size":new dr(Nt.layout_symbol["text-size"]),"text-max-width":new dr(Nt.layout_symbol["text-max-width"]),"text-line-height":new dr(Nt.layout_symbol["text-line-height"]),"text-letter-spacing":new dr(Nt.layout_symbol["text-letter-spacing"]),"text-justify":new dr(Nt.layout_symbol["text-justify"]),"text-radial-offset":new dr(Nt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Tn(Nt.layout_symbol["text-variable-anchor"]),"text-anchor":new dr(Nt.layout_symbol["text-anchor"]),"text-max-angle":new Tn(Nt.layout_symbol["text-max-angle"]),"text-writing-mode":new Tn(Nt.layout_symbol["text-writing-mode"]),"text-rotate":new dr(Nt.layout_symbol["text-rotate"]),"text-padding":new Tn(Nt.layout_symbol["text-padding"]),"text-keep-upright":new Tn(Nt.layout_symbol["text-keep-upright"]),"text-transform":new dr(Nt.layout_symbol["text-transform"]),"text-offset":new dr(Nt.layout_symbol["text-offset"]),"text-allow-overlap":new Tn(Nt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Tn(Nt.layout_symbol["text-ignore-placement"]),"text-optional":new Tn(Nt.layout_symbol["text-optional"]),visibility:new Tn(Nt.layout_symbol.visibility)})),paint:nR||(nR=new Ji({"icon-opacity":new dr(Nt.paint_symbol["icon-opacity"]),"icon-occlusion-opacity":new dr(Nt.paint_symbol["icon-occlusion-opacity"]),"icon-emissive-strength":new dr(Nt.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new dr(Nt.paint_symbol["text-emissive-strength"]),"icon-color":new dr(Nt.paint_symbol["icon-color"]),"icon-halo-color":new dr(Nt.paint_symbol["icon-halo-color"]),"icon-halo-width":new dr(Nt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new dr(Nt.paint_symbol["icon-halo-blur"]),"icon-translate":new Tn(Nt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Tn(Nt.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new dr(Nt.paint_symbol["icon-image-cross-fade"]),"text-opacity":new dr(Nt.paint_symbol["text-opacity"]),"text-occlusion-opacity":new dr(Nt.paint_symbol["text-occlusion-opacity"]),"text-color":new dr(Nt.paint_symbol["text-color"],{runtimeType:Ws,getOverride:d=>d.textColor,hasOverride:d=>!!d.textColor}),"text-halo-color":new dr(Nt.paint_symbol["text-halo-color"]),"text-halo-width":new dr(Nt.paint_symbol["text-halo-width"]),"text-halo-blur":new dr(Nt.paint_symbol["text-halo-blur"]),"text-translate":new Tn(Nt.paint_symbol["text-translate"]),"text-translate-anchor":new Tn(Nt.paint_symbol["text-translate-anchor"]),"icon-color-saturation":new Tn(Nt.paint_symbol["icon-color-saturation"]),"icon-color-contrast":new Tn(Nt.paint_symbol["icon-color-contrast"]),"icon-color-brightness-min":new Tn(Nt.paint_symbol["icon-color-brightness-min"]),"icon-color-brightness-max":new Tn(Nt.paint_symbol["icon-color-brightness-max"]),"symbol-z-offset":new dr(Nt.paint_symbol["symbol-z-offset"]),"symbol-elevation-reference":new Tn(Nt.paint_symbol["symbol-elevation-reference"])}))},mS);class aw extends fa{constructor(s,c,f,y){super(s,gS(),c,f,y),this._colorAdjustmentMatrix=De.mat4.identity([]),this.hasInitialOcclusionOpacityProperties=s.paint!==void 0&&("icon-occlusion-opacity"in s.paint||"text-occlusion-opacity"in s.paint)}recalculate(s,c){super.recalculate(s,c),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const f=this.layout.get("text-writing-mode");if(f){const y=[];for(const A of f)y.indexOf(A)<0&&y.push(A);this.layout._values["text-writing-mode"]=y}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getColorAdjustmentMatrix(s,c,f,y){return this._saturation===s&&this._contrast===c&&this._brightnessMin===f&&this._brightnessMax===y||(this._colorAdjustmentMatrix=function(A,_,C,P){A=Ye(A),_=Ce(_);const R=De.mat4.create(),w=A/3,S=1-2*w,F=[S,w,w,0,w,S,w,0,w,w,S,0,0,0,0,1],T=.5-.5*_,L=P-C;return De.mat4.multiply(R,[L,0,0,0,0,L,0,0,0,0,L,0,C,C,C,1],[_,0,0,0,0,_,0,0,0,0,_,0,T,T,T,1]),De.mat4.multiply(R,R,F),R}(s,c,f,y),this._saturation=s,this._contrast=c,this._brightnessMin=f,this._brightnessMax=y),this._colorAdjustmentMatrix}getValueAndResolveTokens(s,c,f,y){const A=this.layout.get(s).evaluate(c,{},f,y),_=this._unevaluatedLayout._values[s];return _.isDataDriven()||VA(_.value)||!A?A:function(C,P){return P.replace(/{([^{}]+)}/g,(R,w)=>w in C?String(C[w]):"")}(c.properties,A)}createBucket(s){return new sw(s)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const s of gS().paint.overridableProperties){if(!aw.hasPaintOverride(this.layout,s))continue;const c=this.paint.get(s),f=new rR(c),y=new Hh(f,c.property.specification,this.scope,this.options);let A=null;A=c.value.kind==="constant"||c.value.kind==="source"?new QA("source",y):new D("composite",y,c.value.zoomStops,c.value._interpolationType),this.paint._values[s]=new ba(c.property,A,c.parameters)}}_handleOverridablePaintPropertyUpdate(s,c,f){return!(!this.layout||c.isDataDriven()||f.isDataDriven())&&aw.hasPaintOverride(this.layout,s)}static hasPaintOverride(s,c){const f=s.get("text-field"),y=gS().paint.properties[c];let A=!1;const _=C=>{for(const P of C)if(y.overrides&&y.overrides.hasOverride(P))return void(A=!0)};if(f.value.kind==="constant"&&f.value.value instanceof Rs)_(f.value.value.sections);else if(f.value.kind==="source"){const C=R=>{A||(R instanceof Xs&&no(R.value)===jl?_(R.value.sections):R instanceof Ga?_(R.sections):R.eachChild(C))},P=f.value;P._styleExpression&&C(P._styleExpression.expression)}return A}getProgramIds(){return["symbol"]}getDefaultProgramParams(s,c,f){return{config:new Gf(this,{zoom:c,lut:f}),overrideFog:!1}}}let iR,oR,sR,aR;var yS=Bi([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);function _S(d){switch(d){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.RGBA;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.DEPTH_COMPONENT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.DEPTH_STENCIL;case WebGL2RenderingContext.R8:case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.RED}}function vS(d){switch(d){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.UNSIGNED_SHORT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.UNSIGNED_INT_24_8;case WebGL2RenderingContext.R8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.FLOAT}}class bS{constructor(s,c,f,y){this.context=s,this.format=f,this.useMipmap=y&&y.useMipmap,this.texture=s.gl.createTexture(),this.update(c,{premultiply:y&&y.premultiply})}update(s,c){const f=s&&s instanceof HTMLVideoElement&&s.width===0?s.videoWidth:s.width,y=s&&s instanceof HTMLVideoElement&&s.height===0?s.videoHeight:s.height,{context:A}=this,{gl:_}=A,{x:C,y:P}=c&&c.position?c.position:{x:0,y:0},R=Math.max(C+f,this.size?this.size[0]:0),w=Math.max(P+y,this.size?this.size[1]:0);!this.size||this.size[0]===R&&this.size[1]===w||(_.bindTexture(_.TEXTURE_2D,null),_.deleteTexture(this.texture),this.texture=_.createTexture(),this.size=null),_.bindTexture(_.TEXTURE_2D,this.texture),A.pixelStoreUnpackFlipY.set(!1),A.pixelStoreUnpack.set(1),A.pixelStoreUnpackPremultiplyAlpha.set(this.format===_.RGBA8&&(!c||c.premultiply!==!1));const S=s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||ImageBitmap&&s instanceof ImageBitmap;if(!this.size&&R>0&&w>0){const F=this.useMipmap?Math.floor(Math.log2(Math.max(R,w)))+1:1;_.texStorage2D(_.TEXTURE_2D,F,this.format,R,w),this.size=[R,w]}if(this.size)if(S)_.texSubImage2D(_.TEXTURE_2D,0,C,P,_S(this.format),vS(this.format),s);else{const F=s.data;F&&_.texSubImage2D(_.TEXTURE_2D,0,C,P,f,y,_S(this.format),vS(this.format),F)}this.useMipmap&&_.generateMipmap(_.TEXTURE_2D)}bind(s,c,f=!1){const{context:y}=this,{gl:A}=y;A.bindTexture(A.TEXTURE_2D,this.texture),s!==this.minFilter&&(A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,s),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,this.useMipmap&&!f?s===A.NEAREST?A.NEAREST_MIPMAP_NEAREST:A.LINEAR_MIPMAP_LINEAR:s),this.minFilter=s),c!==this.wrapS&&(A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,c),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,c),this.wrapS=c)}bindExtraParam(s,c,f,y){const{context:A}=this,{gl:_}=A;_.bindTexture(_.TEXTURE_2D,this.texture),c!==this.magFilter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,c),this.magFilter=c),s!==this.minFilter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,this.useMipmap?s===_.NEAREST?_.NEAREST_MIPMAP_NEAREST:_.LINEAR_MIPMAP_LINEAR:s),this.minFilter=s),f!==this.wrapS&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,f),this.wrapS=f),y!==this.wrapT&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,y),this.wrapT=y)}destroy(){const{gl:s}=this.context;s.deleteTexture(this.texture),this.texture=null}}class lw{constructor(s,c){this.context=s,this.texture=c}bind(s,c){const{context:f}=this,{gl:y}=f;y.bindTexture(y.TEXTURE_2D,this.texture),s!==this.minFilter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,s),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,s),this.minFilter=s),c!==this.wrapS&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,c),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,c),this.wrapS=c)}}function cw(d,s,c,f,y,A,_,C){const P=[d,s,1,c,f,1,y,A,1],R=[_,C,1],w=De.mat3.adjoint([],P),[S,F,T]=De.vec3.transformMat3(R,R,w);return De.mat3.multiply(P,P,[S,0,0,0,F,0,0,0,T])}function lR(d,s,c,f,y,A,_,C){const P=function(R,w,S,F,T,L,U,V){const $=cw(0,0,1,0,1,1,0,1),ee=cw(R,w,S,F,T,L,U,V),ie=De.mat3.adjoint([],$);return De.mat3.multiply(ee,ee,ie)}(d,s,c,f,y,A,_,C);return[P[2]/P[8]/Nn,P[5]/P[8]/Nn]}function uw(d){return[d[0],Math.min(Math.max(d[1],-it),it)]}class cR extends wl{constructor(s,c,f,y){super(),this.id=s,this.dispatcher=f,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(y),this.options=c,this._dirty=!1}load(s,c){if(this._loaded=c||!1,this.fire(new Hl("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return s&&(this.coordinates=s),this._loaded=!0,void this._finishLoading();this._imageRequest=go(this.map._requestManager.transformRequest(this.url,Ql.Image),(f,y)=>{this._imageRequest=null,this._loaded=!0,f?this.fire(new Hc(f)):y&&(this.image=y instanceof HTMLImageElement?Vn.getImageData(y):y,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,s&&(this.coordinates=s),this._finishLoading())})}loaded(){return this._loaded}updateImage(s){return s.url?(this._imageRequest&&s.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=s.url,this.load(s.coordinates,this._loaded),this):this}setTexture(s){if(!(s.handle instanceof WebGLTexture))throw new Error("The provided handle is not a WebGLTexture instance");return this.texture=new lw(this.map.painter.context,s.handle),this.width=s.dimensions[0],this.height=s.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new Hl("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}onRemove(s){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof lw||this.texture.destroy(),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy())}setCoordinates(s){if(this.coordinates=s,this._boundsArray=void 0,this._unsupportedCoords=!1,!s.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let c=s[0][1],f=s[0][1];for(const A of s)A[1]>f&&(f=A[1]),A[1]<c&&(c=A[1]);const y=(f+c)/2;if(y>it?this.onNorthPole=!0:y<-it&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){const A=s.map(Rt.fromLngLat);this.tileID=function(_){let C=1/0,P=1/0,R=-1/0,w=-1/0;for(const U of _)C=Math.min(C,U.x),P=Math.min(P,U.y),R=Math.max(R,U.x),w=Math.max(w,U.y);const S=Math.max(R-C,w-P),F=Math.max(0,Math.floor(-Math.log(S)/Math.LN2)),T=Math.pow(2,F);let L=Math.floor((C+R)/2*T);return L>1&&(L-=1),new Aa(F,L,Math.floor((P+w)/2*T))}(A),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new Hl("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0,this._unsupportedCoords=!1}_prepareData(s){for(const $ in this.tiles){const ee=this.tiles[$];ee.state!=="loaded"&&(ee.state="loaded",ee.texture=this.texture)}if(this._boundsArray||this.onNorthPole||this.onSouthPole||this._unsupportedCoords)return;const c=L0(new Aa(0,0,0),this.map.transform.projection),f=[c.projection.project(this.coordinates[0][0],this.coordinates[0][1]),c.projection.project(this.coordinates[1][0],this.coordinates[1][1]),c.projection.project(this.coordinates[2][0],this.coordinates[2][1]),c.projection.project(this.coordinates[3][0],this.coordinates[3][1])];if(!function($){const ee=$[1].x-$[0].x,ie=$[1].y-$[0].y,K=$[2].x-$[1].x,ce=$[2].y-$[1].y,he=$[3].x-$[2].x,Be=$[3].y-$[2].y,Ne=$[0].x-$[3].x,Ve=$[0].y-$[3].y,Oe=ee*ce-K*ie,rt=K*Be-he*ce,je=he*Ve-Ne*Be,ct=Ne*ie-ee*Ve;return Oe>0&&rt>0&&je>0&&ct>0||Oe<0&&rt<0&&je<0&&ct<0}(f))return console.warn("Image source coordinates are defining non-convex area in the Mercator projection"),void(this._unsupportedCoords=!0);const y=L0(this.tileID,this.map.transform.projection),[A,_,C,P]=this.coordinates.map($=>{const ee=y.projection.project($[0],$[1]);return WF(y,ee)._round()});this.perspectiveTransform=lR(A.x,A.y,_.x,_.y,C.x,C.y,P.x,P.y);const R=this._boundsArray=new Lu;R.emplaceBack(A.x,A.y,0,0),R.emplaceBack(_.x,_.y,Nn,0),R.emplaceBack(P.x,P.y,0,Nn),R.emplaceBack(C.x,C.y,Nn,Nn),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy()),this.boundsBuffer=s.createVertexBuffer(R,yS.members),this.boundsSegments=hs.simpleSegment(0,0,4,2);const w=[],S=[uw((F=this.coordinates)[0]),uw(F[1]),uw(F[2]),uw(F[3])];var F;const[T,L,U,V]=function($){let ee=$[0][0],ie=ee,K=$[0][1],ce=K;for(let he=1;he<$.length;he++)$[he][0]<ee?ee=$[he][0]:$[he][0]>ie&&(ie=$[he][0]),$[he][1]<K?K=$[he][1]:$[he][1]>ce&&(ce=$[he][1]);return[ee,K,ie-ee,ce-K]}(S);{const $=new Lu,[ee,ie,K,ce]=function(Pt){let $t=Pt[0].x,Lt=$t,dn=Pt[0].y,xn=dn;for(let tn=1;tn<Pt.length;tn++)Pt[tn].x<$t?$t=Pt[tn].x:Pt[tn].x>Lt&&(Lt=Pt[tn].x),Pt[tn].y<dn?dn=Pt[tn].y:Pt[tn].y>xn&&(xn=Pt[tn].y);return[$t,dn,Lt-$t,xn-dn]}(f),he=Pt=>[(Pt.x-ee)/K,(Pt.y-ie)/ce],[Be,Ne,Ve,Oe]=f.map(he),rt=function(Pt,$t,Lt,dn,xn,tn,Jn,Hn){const kn=cw(0,0,1,0,1,1,0,1),Bn=cw(Pt,$t,Lt,dn,xn,tn,Jn,Hn),br=De.mat3.adjoint([],Bn);return De.mat3.multiply(kn,kn,br)}(Be[0],Be[1],Ne[0],Ne[1],Ve[0],Ve[1],Oe[0],Oe[1]);this.elevatedGlobePerspectiveTransform=lR(Be[0],Be[1],Ne[0],Ne[1],Ve[0],Ve[1],Oe[0],Oe[1]);const je=(Pt,$t)=>{w.push(Pt.lng);const Lt=Math.round((Pt.lng-T)/U*Nn),dn=Math.round((Pt.lat-L)/V*Nn),xn=he($t),tn=De.vec3.transformMat3([],[xn[0],xn[1],1],rt),Jn=Math.round(tn[0]/tn[2]*Nn),Hn=Math.round(tn[1]/tn[2]*Nn);$.emplaceBack(Lt,dn,Jn,Hn)},ct=f[3].x-f[0].x,yt=f[3].y-f[0].y,Ct=f[2].x-f[1].x,Et=f[2].y-f[1].y;for(let Pt=0;Pt<65;Pt++){const $t=Pt/64,Lt=[f[0].x+$t*ct,f[0].y+$t*yt],dn=[f[1].x+$t*Ct,f[1].y+$t*Et],xn=dn[0]-Lt[0],tn=dn[1]-Lt[1];for(let Jn=0;Jn<65;Jn++){const Hn=Jn/64,kn={x:Lt[0]+xn*Hn,y:Lt[1]+tn*Hn,z:0};je(c.projection.unproject(kn.x,kn.y),kn)}}this.elevatedGlobeVertexBuffer=s.createVertexBuffer($,yS.members)}{this.maxLongitudeTriangleSize=0;let $=[],ee=new ea;const ie=(K,ce,he)=>{ee.emplaceBack(K,ce,he);const Be=w[K],Ne=w[ce],Ve=w[he],Oe=Math.min(Math.min(Be,Ne),Ve),rt=Math.max(Math.max(Be,Ne),Ve)-Oe;rt>this.maxLongitudeTriangleSize&&(this.maxLongitudeTriangleSize=rt),$.push(Oe+rt/2)};for(let K=0;K<64;K++)for(let ce=0;ce<64;ce++){const he=65*K+ce,Be=he+1,Ne=he+65,Ve=Ne+1;ie(he,Ne,Be),ie(Be,Ne,Ve)}[$,ee]=function(K,ce){const he=Array.from({length:K.length},(Ve,Oe)=>Oe);he.sort((Ve,Oe)=>K[Ve]-K[Oe]);const Be=[],Ne=new ea;for(let Ve=0;Ve<he.length;Ve++){const Oe=he[Ve];Be.push(K[Oe]);const rt=3*Oe,je=rt+1;Ne.emplaceBack(ce.uint16[rt],ce.uint16[je],ce.uint16[je+1])}return[Be,Ne]}($,ee),this.elevatedGlobeTrianglesCenterLongitudes=$,this.elevatedGlobeIndexBuffer=s.createIndexBuffer(ee)}this.elevatedGlobeSegments=hs.simpleSegment(0,0,4225,8192),this.elevatedGlobeGridMatrix=new Float32Array([0,U/Nn,0,V/Nn,0,0,L,T,0])}prepare(){const s=Object.keys(this.tiles).length!==0;if(this.tileID&&!s)return;const c=this.map.painter.context,f=c.gl;!this._dirty||this.texture instanceof lw||(this.texture?this.texture.update(this.image):(this.texture=new bS(c,this.image,f.RGBA8),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE)),this._dirty=!1),s&&this._prepareData(c)}loadTile(s,c){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={},c(null)):(s.state="errored",c(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}getSegmentsForLongitude(s){const c=this.elevatedGlobeSegments;if(!this.elevatedGlobeTrianglesCenterLongitudes||!c)return null;const f=this.elevatedGlobeTrianglesCenterLongitudes;let y=(A=s+180)+360*Math.round((f[0]-A)/360);var A;const _=new hs,C=(S,F)=>{_.segments.push({vertexOffset:0,primitiveOffset:S,vertexLength:c.segments[0].vertexLength,primitiveLength:F,sortKey:void 0,vaos:{}})},P=.51*this.maxLongitudeTriangleSize;if(Math.abs(f[0]-y)<=P){const S=we(f,0,f.length,y+P);return S===f.length||C(S,jt(f,S+1,f.length,y+360-P)-S),_}y<f[0]&&(y+=360);const R=jt(f,0,f.length,y-P);if(R===f.length)return C(0,f.length),_;C(0,R-0);const w=we(f,R+1,f.length,y+P);return w!==f.length&&C(w,f.length-w),_}}const uK=(Math.pow(256,2)-1)/16907520;class uR extends fa{constructor(s,c,f,y){super(s,{layout:sR||(sR=new Ji({visibility:new Tn(Nt.layout_raster.visibility)})),paint:aR||(aR=new Ji({"raster-opacity":new Tn(Nt.paint_raster["raster-opacity"]),"raster-color":new wa(Nt.paint_raster["raster-color"]),"raster-color-mix":new Tn(Nt.paint_raster["raster-color-mix"]),"raster-color-range":new Tn(Nt.paint_raster["raster-color-range"]),"raster-hue-rotate":new Tn(Nt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Tn(Nt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Tn(Nt.paint_raster["raster-brightness-max"]),"raster-saturation":new Tn(Nt.paint_raster["raster-saturation"]),"raster-contrast":new Tn(Nt.paint_raster["raster-contrast"]),"raster-resampling":new Tn(Nt.paint_raster["raster-resampling"]),"raster-fade-duration":new Tn(Nt.paint_raster["raster-fade-duration"]),"raster-emissive-strength":new Tn(Nt.paint_raster["raster-emissive-strength"]),"raster-array-band":new Tn(Nt.paint_raster["raster-array-band"]),"raster-elevation":new Tn(Nt.paint_raster["raster-elevation"])}))},c,f,y),this.updateColorRamp(),this._curRampRange=[NaN,NaN]}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}tileCoverLift(){return this.paint.get("raster-elevation")}isDraped(s){return!(s&&s._source instanceof cR&&(s._source.onNorthPole||s._source.onSouthPole))&&this.paint.get("raster-elevation")===0}_handleSpecialPaintPropertyUpdate(s){s!=="raster-color"&&s!=="raster-color-range"||(this._curRampRange=[NaN,NaN],this.updateColorRamp())}updateColorRamp(s){if(!this.hasColorMap()||!this._curRampRange)return;const c=this._transitionablePaint._values["raster-color"].value.expression,[f,y]=s||this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0})||[NaN,NaN];isNaN(f)&&isNaN(y)||f===this._curRampRange[0]&&y===this._curRampRange[1]||(this.colorRamp=m0({expression:c,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:f,end:y}],resolution:256}),this.colorRampTexture=null,this._curRampRange=[f,y])}}let hR,dR,fR,AR,pR;class mR extends fa{constructor(s,c,f,y){super(s,{layout:hR||(hR=new Ji({visibility:new Tn(Nt["layout_raster-particle"].visibility)})),paint:dR||(dR=new Ji({"raster-particle-array-band":new Tn(Nt["paint_raster-particle"]["raster-particle-array-band"]),"raster-particle-count":new Tn(Nt["paint_raster-particle"]["raster-particle-count"]),"raster-particle-color":new wa(Nt["paint_raster-particle"]["raster-particle-color"]),"raster-particle-max-speed":new Tn(Nt["paint_raster-particle"]["raster-particle-max-speed"]),"raster-particle-speed-factor":new Tn(Nt["paint_raster-particle"]["raster-particle-speed-factor"]),"raster-particle-fade-opacity-factor":new Tn(Nt["paint_raster-particle"]["raster-particle-fade-opacity-factor"]),"raster-particle-reset-rate-factor":new Tn(Nt["paint_raster-particle"]["raster-particle-reset-rate-factor"]),"raster-particle-elevation":new Tn(Nt["paint_raster-particle"]["raster-particle-elevation"])}))},c,f,y),this._updateColorRamp(),this.lastInvalidatedAt=Vn.now()}onRemove(s){this.colorRampTexture&&this.colorRampTexture.destroy(),this.tileFramebuffer&&this.tileFramebuffer.destroy(),this.particleFramebuffer&&this.particleFramebuffer.destroy()}hasColorMap(){return!!this._transitionablePaint._values["raster-particle-color"].value.value}getProgramIds(){return["rasterParticle"]}hasOffscreenPass(){return this.visibility!=="none"}isDraped(s){return!1}_handleSpecialPaintPropertyUpdate(s){s!=="raster-particle-color"&&s!=="raster-particle-max-speed"||(this._updateColorRamp(),this._invalidateAnimationState()),s==="raster-particle-count"&&this._invalidateAnimationState()}_updateColorRamp(){if(!this.hasColorMap())return;const s=this._transitionablePaint._values["raster-particle-color"].value.expression,c=this._transitionablePaint._values["raster-particle-max-speed"].value.expression.evaluate({zoom:0});this.colorRamp=m0({expression:s,evaluationKey:"rasterParticleSpeed",image:this.colorRamp,clips:[{start:0,end:c}],resolution:256}),this.colorRampTexture=null}_invalidateAnimationState(){this.lastInvalidatedAt=Vn.now()}tileCoverLift(){return this.paint.get("raster-particle-elevation")}}class hK extends fa{constructor(s,c){super(s,{},c,null),this.implementation=s,s.slot&&(this.slot=s.slot)}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isDraped(s){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(s){this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)}onRemove(s){this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)}}function wS(d,s,c){const f=[0,0,1],y=De.quat.identity([]);return De.quat.rotateY(y,y,c?-zt(d)+Math.PI:zt(d)),De.quat.rotateX(y,y,-zt(s)),De.vec3.transformQuat(f,f,y),De.vec3.normalize(f,f)}function gR(d,s){const c=hw(d.projection,d.zoom,d.width,d.height),f=function(A,_,C,P,R){const w=new re(C.lng-180*rp,C.lat),S=new re(C.lng+180*rp,C.lat),F=A.project(w.lng,w.lat),T=A.project(S.lng,S.lat),L=-Math.atan2(T.y-F.y,T.x-F.x),U=Rt.fromLngLat(C);U.y=_n(U.y,-1+rp,1-rp);const V=U.toLngLat(),$=A.project(V.lng,V.lat),ee=Rt.fromLngLat(V);ee.x+=rp;const ie=ee.toLngLat(),K=A.project(ie.lng,ie.lat),ce=_R(K.x-$.x,K.y-$.y,L),he=Rt.fromLngLat(V);he.y+=rp;const Be=he.toLngLat(),Ne=A.project(Be.lng,Be.lat),Ve=_R(Ne.x-$.x,Ne.y-$.y,L),Oe=Math.abs(ce.x)/Math.abs(Ve.y),rt=De.mat4.identity([]);De.mat4.rotateZ(rt,rt,-L*(1-(R?0:P)));const je=De.mat4.identity([]);return De.mat4.scale(je,je,[1,1-(1-Oe)*P,1]),je[4]=-Ve.x/Ve.y*P,De.mat4.rotateZ(je,je,L),De.mat4.multiply(je,rt,je),je}(d.projection,0,d.center,c,s),y=yR(d);return De.mat4.scale(f,f,[y,y,1]),f}function yR(d){const s=d.projection,c=hw(d.projection,d.zoom,d.width,d.height),f=xS(s,d.center),y=xS(s,re.convert(s.center));return Math.pow(2,f*c+(1-c)*y)}function hw(d,s,c,f,y=1/0){const A=d.range;if(!A)return 0;const _=Math.min(y,Math.max(c,f)),C=Math.log(_/1024)/Math.LN2;return er(A[0]+C,A[1]+C,s)}const rp=1/4e4;function xS(d,s){const c=_n(s.lat,-it,it),f=new re(s.lng-180*rp,c),y=new re(s.lng+180*rp,c),A=d.project(f.lng,c),_=d.project(y.lng,c),C=Rt.fromLngLat(f),P=Rt.fromLngLat(y),R=_.x-A.x,w=_.y-A.y,S=P.x-C.x,F=P.y-C.y,T=Math.sqrt((S*S+F*F)/(R*R+w*w));return Math.log(T)/Math.LN2}function _R(d,s,c){const f=Math.cos(c),y=Math.sin(c);return{x:d*f-s*y,y:d*y+s*f}}function vR(d,s,c){De.mat4.identity(d),De.mat4.rotateZ(d,d,zt(s[2])),De.mat4.rotateX(d,d,zt(s[0])),De.mat4.rotateY(d,d,zt(s[1])),De.mat4.scale(d,d,c),De.mat4.multiply(d,d,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function dw(d,s,c,f,y,A,_,C){const P=[c[0]-s[0],c[1]-s[1],0],R=[f[0]-s[0],f[1]-s[1],0];if(De.vec3.length(P)<1e-12||De.vec3.length(R)<1e-12)return De.quat.identity(d);const w=De.vec3.cross([],P,R);De.vec3.normalize(w,w),De.vec3.subtract(R,f,s),P[2]=(A-y)*C,R[2]=(_-y)*C;const S=P;return De.vec3.cross(S,P,R),De.vec3.normalize(S,S),De.quat.rotationTo(d,w,S)}function CS(d,s,c=!1){const f=ZA(s.zoom),y=function(A,_,C){const P=_.worldSize,R=[A[12],A[13],A[14]],w=qe(R[1]/P),S=Xe(R[0]/P),F=De.mat4.identity([]),T=Ue(1,w)*P,L=Ue(1,0)*P*xt(w,_.zoom),U=1/UB(P);let V=L*U;if(C){const K=hw(_.projection,_.zoom,_.width,_.height,1024);V=U*_.projection.pixelSpaceConversion(_.center.lat,P,K)}const $=j(w,S);De.vec3.add($,$,De.vec3.scale([],De.vec3.normalize([],$),T*V*R[2]));const ee=function(K){const ce=[K[0],K[1],K[2]];let he=[0,1,0];const Be=De.vec3.cross([],he,ce);return De.vec3.cross(he,ce,Be),De.vec3.squaredLength(he)===0&&(he=[0,1,0],De.vec3.cross(Be,ce,he)),De.vec3.normalize(Be,Be),De.vec3.normalize(he,he),De.vec3.normalize(ce,ce),[Be[0],Be[1],Be[2],0,he[0],he[1],he[2],0,ce[0],ce[1],ce[2],0,K[0],K[1],K[2],1]}($);De.mat4.scale(F,F,[V,V,V*T]),De.mat4.translate(F,F,[-R[0],-R[1],-R[2]]);const ie=De.mat4.multiply([],_.globeMatrix,ee);return De.mat4.multiply(ie,ie,F),De.mat4.multiply(ie,ie,A),ie}(d,s,c);if(f>0){const A=function(_,C){const P=C.worldSize,R=Ue(1,0)*P*xt(C.center.lat,C.zoom)/UB(P),w=Ue(1,C.center.lat)*P,S=De.mat4.identity([]);return De.mat4.rotateY(S,S,zt(C.center.lng)),De.mat4.rotateX(S,S,zt(C.center.lat)),De.mat4.translate(S,S,[0,0,a]),De.mat4.scale(S,S,[R,R,R*w]),De.mat4.translate(S,S,[C.point.x-.5*P,C.point.y-.5*P,0]),De.mat4.multiply(S,S,_),De.mat4.multiply(S,C.globeMatrix,S)}(d,s);return function(_,C,P){const R=(L,U,V)=>{const $=De.vec3.length(L),ee=De.vec3.length(U),ie=qf(L,U,V);return De.vec3.scale(ie,ie,1/De.vec3.length(ie)*$n($,ee,V))},w=R([_[0],_[1],_[2]],[C[0],C[1],C[2]],P),S=R([_[4],_[5],_[6]],[C[4],C[5],C[6]],P),F=R([_[8],_[9],_[10]],[C[8],C[9],C[10]],P),T=qf([_[12],_[13],_[14]],[C[12],C[13],C[14]],P);return[w[0],w[1],w[2],0,S[0],S[1],S[2],0,F[0],F[1],F[2],0,T[0],T[1],T[2],1]}(y,A,f)}return y}function bR(d,s,c,f){const y=bo.projectAabbCorners(f,c);let A=Number.MAX_VALUE,_=-1;for(let R=0;R<y.length;++R){const w=y[R];w[0]=(.5*w[0]+.5)*s.width,w[1]=(.5-.5*w[1])*s.height,w[2]<A&&(_=R,A=w[2])}const C=R=>new Fe(y[R][0],y[R][1]);let P;switch(_){case 0:case 6:P=[C(1),C(5),C(4),C(7),C(3),C(2),C(1)];break;case 1:case 7:P=[C(0),C(4),C(5),C(6),C(2),C(3),C(0)];break;case 3:case 5:P=[C(1),C(0),C(4),C(7),C(6),C(2),C(1)];break;default:P=[C(1),C(5),C(6),C(7),C(3),C(0),C(1)]}if(Qn(d,P))return A}const dK=Bi([{name:"a_pos_3f",components:3,type:"Float32"}]),fK=Bi([{name:"a_color_3f",components:3,type:"Float32"}]),AK=Bi([{name:"a_color_4f",components:4,type:"Float32"}]),pK=Bi([{name:"a_uv_2f",components:2,type:"Float32"}]),mK=Bi([{name:"a_normal_3f",components:3,type:"Float32"}]),gK=Bi([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),yK=Bi([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]),wR={None:0,Model:1,Symbol:2,FillExtrusion:4,All:7};class fw{constructor(s,c,f,y){this.message=(s?`${s}: `:"")+f,y&&(this.identifier=y),c!=null&&c.__line__&&(this.line=c.__line__)}}function xR(d,s){const c=d.indexOf("://")===-1;try{return new URL(d,c&&s?"http://example.com":void 0),!0}catch{return!1}}class CR{constructor(s,c){this.feature=s,this.instancedDataOffset=c,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class ER{constructor(){this.instancedDataArray=new ec,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}}class ES{constructor(s){this.zoom=s.zoom,this.canonical=s.canonical,this.layers=s.layers,this.layerIds=this.layers.map(c=>c.fqid),this.projection=s.projection,this.index=s.index,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0},this.modelUris=[],this.modelsRequested=!1,this.activeReplacements=[],this.replacementUpdateTime=0}updateFootprints(s,c){}populate(s,c,f,y){this.tileToMeter=At(f);const A=this.layers[0]._featureFilter.needGeometry;this.lookup=new Uint8Array(this.lookupDim*this.lookupDim);for(const{feature:_,id:C,index:P,sourceLayerIndex:R}of s){const w=C??(_.properties&&_.properties.hasOwnProperty("id")?_.properties.id:void 0),S=Mn(_,A);if(!this.layers[0]._featureFilter.filter(new Oi(this.zoom),S,f))continue;const F={id:w,sourceLayerIndex:R,index:P,geometry:A?S.geometry:Rn(_,f,y),properties:_.properties,type:_.type,patterns:{}},T=this.addFeature(F,F.geometry,S);T&&c.featureIndex.insert(_,F.geometry,P,R,this.index,this.instancesPerModel[T].instancedDataArray.length,Nn/32)}this.lookup=null}update(s,c,f,y){for(const A in this.instancesPerModel){const _=this.instancesPerModel[A];for(const C in s)_.idToFeaturesIndex.hasOwnProperty(C)&&(this.evaluate(_.features[_.idToFeaturesIndex[C]],s[C],_,!0),this.uploaded=!1)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let s=!1;for(const c in this.instancesPerModel){const f=this.instancesPerModel[c];for(const y of f.features){const A=this.layers[0],_=y.feature,C=this.canonical,P=A.paint.get("model-rotation").evaluate(_,{},C),R=A.paint.get("model-scale").evaluate(_,{},C),w=A.paint.get("model-translation").evaluate(_,{},C);De.vec3.exactEquals(y.rotation,P)&&De.vec3.exactEquals(y.scale,R)&&De.vec3.exactEquals(y.translation,w)||(this.evaluate(y,y.featureStates,f,!0),s=!0)}}return s}updateReplacement(s,c,f,y){if(c.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=c.updateTime;const A=c.getReplacementRegionsForTile(s.toUnwrapped(),!0);if(ZB(this.activeReplacements,A))return!1;this.activeReplacements=A;let _=!1;for(const C in this.instancesPerModel){const P=this.instancesPerModel[C],R=P.instancedDataArray;for(const w of P.features){const S=w.instancedDataOffset,F=w.instancedDataCount;for(let T=0;T<F;T++){const L=16*(T+S);let U=R.float32[L+0];const V=U>Nn;U=V?U-Nn:U;const $=Math.floor(U),ee=R.float32[L+1];let ie=!1;for(const K of this.activeReplacements)if(!zL(K,f,wR.Model,y)&&!(K.min.x>$||$>K.max.x||K.min.y>ee||ee>K.max.y)&&(ie=GL($L($,ee,s.canonical,K.footprintTileId.canonical),K.footprint),ie))break;R.float32[L]=ie?U+Nn:U,_=_||ie!==V}}}return _}isEmpty(){for(const s in this.instancesPerModel)if(this.instancesPerModel[s].instancedDataArray.length!==0)return!1;return!0}uploadPending(){return!this.uploaded}upload(s){if(!this.uploaded)for(const c in this.instancesPerModel){const f=this.instancesPerModel[c];f.instancedDataArray.length<0||f.instancedDataArray.length===0||(f.instancedDataBuffer?f.instancedDataBuffer.updateData(f.instancedDataArray):f.instancedDataBuffer=s.createVertexBuffer(f.instancedDataArray,gK.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(){for(const c in this.instancesPerModel){const f=this.instancesPerModel[c];f.instancedDataArray.length!==0&&f.instancedDataBuffer&&f.instancedDataBuffer.destroy()}const s=this.layers[0].modelManager;if(s&&this.modelUris)for(const c of this.modelUris)s.removeModel(c,"")}addFeature(s,c,f){const y=this.layers[0],A=y.layout.get("model-id").evaluate(f,{},this.canonical);if(!A)return Jr(`modelId is not evaluated for layer ${y.id} and it is not going to get rendered.`),A;xR(A,!1)&&(this.modelUris.includes(A)||this.modelUris.push(A)),this.instancesPerModel[A]||(this.instancesPerModel[A]=new ER);const _=this.instancesPerModel[A],C=_.instancedDataArray,P=new CR(f,C.length);for(const R of c)for(const w of R){if(w.x<0||w.x>=Nn||w.y<0||w.y>=Nn)continue;const S=(this.lookupDim-1)/Nn,F=this.lookupDim*(w.y*S|0)+w.x*S|0;if(this.lookup){if(this.lookup[F]!==0)continue;this.lookup[F]=1}this.instanceCount++;const T=C.length;C.resize(T+1),_.instancesEvaluatedElevation.push(0),C.float32[16*T]=w.x,C.float32[16*T+1]=w.y}return P.instancedDataCount=_.instancedDataArray.length-P.instancedDataOffset,P.instancedDataCount>0&&(s.id&&(_.idToFeaturesIndex[s.id]=_.features.length),_.features.push(P),this.evaluate(P,{},_,!1)),A}getModelUris(){return this.modelUris}evaluate(s,c,f,y){const A=this.layers[0],_=s.feature,C=this.canonical,P=s.rotation=A.paint.get("model-rotation").evaluate(_,c,C),R=s.scale=A.paint.get("model-scale").evaluate(_,c,C),w=s.translation=A.paint.get("model-translation").evaluate(_,c,C),S=A.paint.get("model-color").evaluate(_,c,C);S.a=A.paint.get("model-color-mix-intensity").evaluate(_,c,C);const F=[];this.maxVerticalOffset<w[2]&&(this.maxVerticalOffset=w[2]),this.maxScale=Math.max(Math.max(this.maxScale,R[0]),Math.max(R[1],R[2])),vR(F,P,R);const T=Math.round(100*S.a)+S.b/1.05;for(let L=0;L<s.instancedDataCount;++L){const U=s.instancedDataOffset+L,V=16*U,$=f.instancedDataArray.float32;let ee=0;y&&(ee=$[V+6]-f.instancesEvaluatedElevation[U]);const ie=0|$[V+1];$[V]=(0|$[V])+S.r/1.05,$[V+1]=ie+S.g/1.05,$[V+2]=T,$[V+3]=1/(C.z>10?this.tileToMeter:At(C,ie)),$[V+4]=w[0],$[V+5]=w[1],$[V+6]=w[2]+ee,$[V+7]=F[0],$[V+8]=F[1],$[V+9]=F[2],$[V+10]=F[4],$[V+11]=F[5],$[V+12]=F[6],$[V+13]=F[8],$[V+14]=F[9],$[V+15]=F[10],f.instancesEvaluatedElevation[U]=w[2]}}}let BR,SR;He(ES,"ModelBucket",{omit:["layers"]}),He(ER,"PerModelAttributes"),He(CR,"ModelFeature");const Lm=64,ly={CoordinateSpaceTile:1,CoordinateSpaceYUp:2,HasMapboxMeshFeatures:4,HasMeshoptCompression:8};function TR(d,s,c,f,y,A,_,C,P,R=!1){const w=c.zoom,S=c.project(f),F=xt(f.lat,w),T=1/F;De.mat4.identity(d),De.mat4.translate(d,d,[S.x+_[0]*T,S.y+_[1]*T,_[2]]);let L=1,U=1;const V=c.worldSize;if(R){if(c.projection.name==="mercator"){let K=0;c.elevation&&(K=c.elevation.getAtPointOrZero(new Rt(S.x/V,S.y/V),0));const ce=De.vec4.transformMat4([],[S.x,S.y,K,1],c.projMatrix)[3]/c.cameraToCenterDistance;L=ce,U=ce*xt(c.center.lat,w)}else if(c.projection.name==="globe"){const K=CS(d,c),ce=De.mat4.multiply([],c.projMatrix,K),he=[0,0,0,1];De.vec4.transformMat4(he,he,ce);const Be=he[3]/c.cameraToCenterDistance,Ne=ZA(w),Ve=c.projection.pixelsPerMeter(f.lat,V)*xt(f.lat,w),Oe=c.projection.pixelsPerMeter(c.center.lat,V)*xt(c.center.lat,w);L=Be/$n(Ve,ht(c.center.lat),Ne),U=Be*F/Ve,L*=Oe,U*=Oe}}else L=T;De.mat4.scale(d,d,[L,L,U]);const $=[...d],ee=s.orientation,ie=[];if(vR(ie,[ee[0]+y[0],ee[1]+y[1],ee[2]+y[2]],A),De.mat4.multiply(d,$,ie),C&&c.elevation){let K=0;const ce=[];if(P&&c.elevation){K=function(Ne,Ve,Oe,rt,je){const ct=Ve.elevation;if(!ct)return 0;const yt=bo.projectAabbCorners(Oe,rt),Ct=Ue(1,je.lat)*Ve.worldSize,Et=function(br,Yn){const or=[0,0,1],Or=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(const Zr of Or){const Vr=br[Zr.corners[0]],Qr=br[Zr.corners[1]],ii=br[Zr.corners[2]],ai=[Qr[0]-Vr[0],Qr[1]-Vr[1],Yn*(Qr[2]-Vr[2])],so=De.vec3.cross(ai,ai,[ii[0]-Vr[0],ii[1]-Vr[1],Yn*(ii[2]-Vr[2])]);De.vec3.normalize(so,so),Zr.dotProductWithUp=De.vec3.dot(so,or)}return Or.sort((Zr,Vr)=>Zr.dotProductWithUp-Vr.dotProductWithUp),Or[0].corners}(yt,Ct),Pt=yt[Et[0]],$t=yt[Et[1]],Lt=yt[Et[2]],dn=yt[Et[3]],xn=ct.getAtPointOrZero(new Rt(Pt[0]/Ve.worldSize,Pt[1]/Ve.worldSize),0),tn=ct.getAtPointOrZero(new Rt($t[0]/Ve.worldSize,$t[1]/Ve.worldSize),0),Jn=ct.getAtPointOrZero(new Rt(Lt[0]/Ve.worldSize,Lt[1]/Ve.worldSize),0),Hn=ct.getAtPointOrZero(new Rt(dn[0]/Ve.worldSize,dn[1]/Ve.worldSize),0),kn=(xn+Hn)/2,Bn=(tn+Jn)/2;return kn>Bn?tn<Jn?dw(Ne,$t,dn,Pt,tn,Hn,xn,Ct):dw(Ne,Lt,Pt,dn,Jn,xn,Hn,Ct):xn<Hn?dw(Ne,Pt,$t,Lt,xn,tn,Jn,Ct):dw(Ne,dn,Lt,$t,Hn,Jn,tn,Ct),Math.max(kn,Bn)}(ce,c,s.aabb,d,f);const he=De.mat4.fromQuat([],ce),Be=De.mat4.multiply([],he,ie);De.mat4.multiply(d,$,Be)}else K=c.elevation.getAtPointOrZero(new Rt(S.x/V,S.y/V),0);K!==0&&(d[14]+=K)}}function O0(d,s,c=!1){d.uploaded||(d.gfxTexture=new bS(s,d.image,c?s.gl.R8:s.gl.RGBA8,{useMipmap:d.sampler.minFilter>=s.gl.NEAREST_MIPMAP_NEAREST}),d.uploaded=!0,d.image=null)}function _K(d,s,c){d.indexBuffer=s.createIndexBuffer(d.indexArray,!1,!0),d.vertexBuffer=s.createVertexBuffer(d.vertexArray,dK.members,!1,!0),d.normalArray&&(d.normalBuffer=s.createVertexBuffer(d.normalArray,mK.members,!1,!0)),d.texcoordArray&&(d.texcoordBuffer=s.createVertexBuffer(d.texcoordArray,pK.members,!1,!0)),d.colorArray&&(d.colorBuffer=s.createVertexBuffer(d.colorArray,(d.colorArray.bytesPerElement===12?fK:AK).members,!1,!0)),d.featureArray&&(d.pbrBuffer=s.createVertexBuffer(d.featureArray,yK.members,!0)),d.segments=hs.simpleSegment(0,0,d.vertexArray.length,d.indexArray.length);const f=d.material;f.pbrMetallicRoughness.baseColorTexture&&O0(f.pbrMetallicRoughness.baseColorTexture,s),f.pbrMetallicRoughness.metallicRoughnessTexture&&O0(f.pbrMetallicRoughness.metallicRoughnessTexture,s),f.normalTexture&&O0(f.normalTexture,s),f.occlusionTexture&&O0(f.occlusionTexture,s,c),f.emissionTexture&&O0(f.emissionTexture,s)}function BS(d,s,c){if(d.meshes)for(const f of d.meshes)_K(f,s,c);if(d.children)for(const f of d.children)BS(f,s,c)}function Aw(d){if(d.meshes)for(const s of d.meshes)s.indexArray.destroy(),s.vertexArray.destroy(),s.colorArray&&s.colorArray.destroy(),s.normalArray&&s.normalArray.destroy(),s.texcoordArray&&s.texcoordArray.destroy(),s.featureArray&&s.featureArray.destroy();if(d.children)for(const s of d.children)Aw(s)}function SS(d){if(d.meshes)for(const c of d.meshes)c.vertexBuffer&&(c.vertexBuffer.destroy(),c.indexBuffer.destroy(),c.normalBuffer&&c.normalBuffer.destroy(),c.texcoordBuffer&&c.texcoordBuffer.destroy(),c.colorBuffer&&c.colorBuffer.destroy(),c.pbrBuffer&&c.pbrBuffer.destroy(),c.segments.destroy(),c.material&&((s=c.material).pbrMetallicRoughness.baseColorTexture&&s.pbrMetallicRoughness.baseColorTexture.gfxTexture&&s.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),s.pbrMetallicRoughness.metallicRoughnessTexture&&s.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&s.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),s.normalTexture&&s.normalTexture.gfxTexture&&s.normalTexture.gfxTexture.destroy(),s.emissionTexture&&s.emissionTexture.gfxTexture&&s.emissionTexture.gfxTexture.destroy(),s.occlusionTexture&&s.occlusionTexture.gfxTexture&&s.occlusionTexture.gfxTexture.destroy()));var s;if(d.children)for(const c of d.children)SS(c)}class cy{constructor(s,c,f){this._demTile=s,this._dem=this._demTile.dem,this._scale=c,this._offset=f}static create(s,c,f){const y=f||s.findDEMTileFor(c);if(!y||!y.dem)return;const A=y.dem,_=y.tileID,C=1<<c.canonical.z-_.canonical.z;return new cy(y,A.dim/Nn/C,[(c.canonical.x/C-_.canonical.x)*A.dim,(c.canonical.y/C-_.canonical.y)*A.dim])}tileCoordToPixel(s,c){const f=c*this._scale+this._offset[1],y=Math.floor(s*this._scale+this._offset[0]),A=Math.floor(f);return new Fe(y,A)}getElevationAt(s,c,f,y){const A=s*this._scale+this._offset[0],_=c*this._scale+this._offset[1],C=Math.floor(A),P=Math.floor(_),R=this._dem;return y=!!y,f?$n($n(R.get(C,P,y),R.get(C,P+1,y),_-P),$n(R.get(C+1,P,y),R.get(C+1,P+1,y),_-P),A-C):R.get(C,P,y)}getElevationAtPixel(s,c,f){return this._dem.get(s,c,!!f)}getMeterToDEM(s){return(1<<this._demTile.tileID.canonical.z)*Ue(1,s)*this._dem.stride}}const TS=new Float32Array(262144),Fm=new Uint8Array(262144);function IR(d){let s=0;if(d.meshes)for(const c of d.meshes)s=Math.max(s,c.aabb.max[2]);if(d.children)for(const c of d.children)s=Math.max(s,IR(c));return s}function PR(d,s,c){if(d.meshes)for(const f of d.meshes)f.aabb.min[0]!==1/0&&c.insert(s,f.aabb.min[0],f.aabb.min[1],f.aabb.max[0],f.aabb.max[1]);if(d.children)for(const f of d.children)PR(f,s,c)}const LR=["","wall","door","roof","window","lamp","logo"];class FR{constructor(s){this.node=s,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.cameraCollisionOpacity=1,this.feature={type:"Point",id:s.id,geometry:[],properties:{height:IR(s)}},this.aabb=this._getLocalBounds()}_getLocalBounds(){if(!this.node.meshes)return new bo([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);if(!this.aabb){let s=0;const c=new bo([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);for(const f of this.node.meshes)this.node.lightMeshIndex!==s&&(f.transformedAabb=bo.applyTransformFast(f.aabb,this.node.matrix),c.encapsulate(f.transformedAabb)),s++;this.aabb=c}return this.aabb}}class pw{constructor(s,c,f,y,A,_){this.id=c,this.modelTraits|=ly.CoordinateSpaceTile,this.uploaded=!1,this.hasPattern=!1,f&&(this.modelTraits|=ly.HasMapboxMeshFeatures),y&&(this.modelTraits|=ly.HasMeshoptCompression),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=A,this.dirty=!0,this.needsUpload=!1,this.nodesInfo=[];for(const C of s)this.nodesInfo.push(new FR(C)),PR(C,_.featureIndexArray.length,_.grid),_.featureIndexArray.emplaceBack(this.nodesInfo.length-1,0,_.bucketLayerIDs.length-1,0)}updateFootprints(s,c){for(const f of this.getNodesInfo()){const y=f.node;y.footprint&&c.push({footprint:y.footprint,id:s})}}update(){console.log("Update 3D model bucket")}populate(){console.log("populate 3D model bucket")}uploadPending(){return!this.uploaded||this.needsUpload}upload(s){if(!this.needsUpload)return;const c=this.getNodesInfo();for(const f of c){const y=f.node;this.uploaded?this.updatePbrBuffer(y):BS(y,s,!0)}for(const f of c)Aw(f.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(s){let c=!1;if(!s.meshes)return c;for(const f of s.meshes)f.pbrBuffer&&(f.pbrBuffer.updateData(f.featureArray),c=!0);return c}needsReEvaluation(s,c,f){const y=s.transform.projectionOptions,A=s.style.getBrightness(),_=this.brightness!==A;return!!(!this.uploaded||this.dirty||y.name!==this.projection.name||D0(f.paint.get("model-color").value,_)||D0(f.paint.get("model-color-mix-intensity").value,_)||D0(f.paint.get("model-roughness").value,_)||D0(f.paint.get("model-emissive-strength").value,_)||D0(f.paint.get("model-height-based-emissive-strength-multiplier").value,_))&&(this.projection=y,this.brightness=A,!0)}evaluateScale(s,c){if(s.transform.zoom===this.zoom)return;this.zoom=s.transform.zoom;const f=this.getNodesInfo(),y=this.id.canonical;for(const A of f){const _=A.feature;A.evaluatedScale=c.paint.get("model-scale").evaluate(_,{},y)}}evaluate(s){const c=this.getNodesInfo();for(const f of c){if(!f.node.meshes)continue;const y=f.feature,A=f.node.meshes&&f.node.meshes[0].featureData,_=f.evaluatedColor[2],C=f.evaluatedRMEA[2],P=this.id.canonical;if(f.hasTranslucentParts=!1,A){for(let R=0;R<LR.length;R++){const w=LR[R];w.length&&(y.properties.part=w);const S=s.paint.get("model-color").evaluate(y,{},P).toRenderColor(null),F=s.paint.get("model-color-mix-intensity").evaluate(y,{},P);f.evaluatedColor[R]=[S.r,S.g,S.b,F],f.evaluatedRMEA[R][0]=s.paint.get("model-roughness").evaluate(y,{},P),f.evaluatedRMEA[R][2]=s.paint.get("model-emissive-strength").evaluate(y,{},P),f.evaluatedRMEA[R][3]=S.a,f.emissionHeightBasedParams[R]=s.paint.get("model-height-based-emissive-strength-multiplier").evaluate(y,{},P),!f.hasTranslucentParts&&S.a<1&&(f.hasTranslucentParts=!0)}delete y.properties.part,bK(f,_!==f.evaluatedColor[2]||C!==f.evaluatedRMEA[2],this.modelTraits)}else f.evaluatedRMEA[0][2]=s.paint.get("model-emissive-strength").evaluate(y,{},P);f.evaluatedScale=s.paint.get("model-scale").evaluate(y,{},P),this.updatePbrBuffer(f.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(s,c,f,y){const A=s.findDEMTileFor(f);if(A&&(A.tileID.canonical!==this.terrainTile||c!==this.terrainExaggeration)){if(A.dem&&A.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=A.tileID.overscaledZ;const _=cy.create(s,f,A);if(!_)return;this.modelTraits&ly.HasMapboxMeshFeatures&&this.updateDEM(s,_,f,y);for(const C of this.getNodesInfo()){const P=C.node;if(!P.footprint||!P.footprint.vertices||!P.footprint.vertices.length)continue;const R=P.footprint.vertices;let w=_.getElevationAt(R[0].x,R[0].y,!0,!0);for(let S=1;S<R.length;S++)w=Math.min(w,_.getElevationAt(R[S].x,R[S].y,!0,!0));P.elevation=w}}this.terrainTile=A.tileID.canonical,this.terrainExaggeration=c}}updateDEM(s,c,f,y){let A=c._dem._modifiedForSources[y];if(A===void 0&&(c._dem._modifiedForSources[y]=[],A=c._dem._modifiedForSources[y]),A.includes(f.canonical))return;const _=c._dem.dim;A.push(f.canonical);let C=!1;for(const P of this.getNodesInfo()){const R=P.node;if(!R.footprint||!R.footprint.grid)continue;const w=R.footprint.grid,S=c.tileCoordToPixel(w.min.x,w.min.y),F=c.tileCoordToPixel(w.max.x,w.max.y),T=Math.min(Math.min(_-F.y,S.x),Math.min(S.y,_-F.x));if(T<0)continue;const L=_n(T,2,5);let U=Math.max(0,S.x-L),V=Math.max(0,S.y-L),$=Math.min(F.x+L,_-1),ee=Math.min(F.y+L,_-1);for(let he=V;he<=ee;++he)for(let Be=U;Be<=$;++Be)Fm[he*_+Be]=255;let ie=0,K=0;for(let he=0;he<w.cellsY;++he)for(let Be=0;Be<w.cellsX;++Be){if(!w.cells[he*w.cellsX+Be])continue;const Ne=c.tileCoordToPixel(w.min.x+Be/w.xScale,w.min.y+he/w.yScale),Ve=c.tileCoordToPixel(w.min.x+(Be+1)/w.xScale,w.min.y+(he+1)/w.yScale);for(let Oe=Ne.y;Oe<=Math.min(Ve.y+1,_-1);++Oe)for(let rt=Ne.x;rt<=Math.min(Ve.x+1,_-1);++rt)Fm[Oe*_+rt]===255&&(Fm[Oe*_+rt]=0,ie+=c.getElevationAtPixel(rt,Oe),K++)}const ce=ie/K;U=Math.max(1,S.x-L),V=Math.max(1,S.y-L),$=Math.min(F.x+L,_-2),ee=Math.min(F.y+L,_-2),C=!0;for(let he=V;he<=ee;++he)for(let Be=U;Be<=$;++Be)Fm[he*_+Be]===0&&(TS[he*_+Be]=c._dem.set(Be,he,ce));for(let he=1;he<L;++he){U=Math.max(1,S.x-he),V=Math.max(1,S.y-he),$=Math.min(F.x+he,_-2),ee=Math.min(F.y+he,_-2);for(let Be=V;Be<=ee;++Be)for(let Ne=U;Ne<=$;++Ne){const Ve=Be*_+Ne;if(Fm[Ve]===255){let Oe=0,rt=0,je=-1,ct=-1;for(let yt=-1;yt<=1;++yt)for(let Ct=-1;Ct<=1;++Ct){const Et=(Be+yt)*_+Ne+Ct;if(Fm[Et]>=he)continue;const Pt=TS[Et],$t=Math.abs(Pt);$t>rt&&(Oe=Pt,rt=$t,je=Ct,ct=yt)}if(rt>.1){const yt=1-(he+.5*Math.abs(je*ct))/L;let Ct=c._dem.get(Ne,Be)+Oe*yt;const Et=c._dem.get(Ne+je,Be+ct),Pt=c._dem.get(Ne-je,Be-ct,!0);(Ct-Et)*(Ct-Pt)>0&&(Ct=(Et+Pt)/2),TS[Ve]=c._dem.set(Ne,Be,Ct),Fm[Ve]=he}}}}}C&&(c._demTile.needsDEMTextureUpload=!0,c._dem._timestamp=Vn.now())}getNodesInfo(){return this.nodesInfo}destroy(){const s=this.getNodesInfo();for(const c of s)Aw(c.node),SS(c.node)}isEmpty(){return!this.nodesInfo.length}updateReplacement(s,c){if(c.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=c.updateTime;const f=c.getReplacementRegionsForTile(s.toUnwrapped()),y=this.getNodesInfo();for(let A=0;A<this.nodesInfo.length;A++){const _=y[A].node;y[A].hiddenByReplacement=!!_.footprint&&!f.find(C=>C.footprint===_.footprint)}}getHeightAtTileCoord(s,c){const f=this.getNodesInfo(),y=[],A=[0,0,0],_=De.mat4.identity([]);for(let C=0;C<this.nodesInfo.length;C++){const P=f[C],R=P.node.meshes[0],w=R.transformedAabb;if(s<w.min[0]||c<w.min[1]||s>w.max[0]||c>w.max[1])continue;if(P.node.hidden===!0)return{height:1/0,maxHeight:P.feature.properties.height,hidden:!1,verticalScale:P.evaluatedScale[2]};De.mat4.invert(_,P.node.matrix),A[0]=s,A[1]=c,De.vec3.transformMat4(A,A,_);const S=(A[0]-R.aabb.min[0])/(R.aabb.max[0]-R.aabb.min[0])*Lm|0,F=Math.min(63,(A[1]-R.aabb.min[1])/(R.aabb.max[1]-R.aabb.min[1])*Lm|0)*Lm+Math.min(63,S),T=R.heightmap[F];if(!(T<0&&P.node.footprint))return P.hiddenByReplacement?void 0:{height:T,maxHeight:P.feature.properties.height,hidden:!1,verticalScale:P.evaluatedScale[2]};if(P.node.footprint.grid.query(new Fe(s,c),new Fe(s,c),y),y.length>0)return{height:void 0,maxHeight:P.feature.properties.height,hidden:P.hiddenByReplacement,verticalScale:P.evaluatedScale[2]}}}}function D0(d,s){return!d.isLightConstant&&s}function vK(d,s,c,f,y,A,_,C){let P=(61440&s|(61440&s)>>4)>>8,R=(3840&s|(3840&s)>>4)>>4,w=240&s|(240&s)>>4;c[3]>0&&(P=$n(P,255*c[0],c[3]),R=$n(R,255*c[1],c[3]),w=$n(w,255*c[2],c[3]));const S=P<<8|R,F=w<<8|Math.floor(255*f[3]),T=function(he){const Be=_n(he,0,2);return Math.min(Math.round(.5*Be*255),255)}(f[2])<<8|15*f[0]<<4|15*f[1],L=_n(y[0],0,1),U=_n(y[1],0,1),V=_n(y[2],0,1),$=_n(y[3],0,1);let ee,ie,K,ce;if(L!==U&&_!==A&&U!==L){const he=_-A;ie=1/(he*(U-L)),K=-(A+he*L)/(he*(U-L));const Be=_n(y[4],-1,1);ce=Math.pow(10,Be),ee=255*V<<8|255*$}else ee=65535,ie=0,K=1,ce=1;if(d.emplaceBack(S,F,T,ee,ie,K,ce),C){const he=C.length;C.clear();for(let Be=0;Be<he;Be++)C.emplaceBack(S,F,T,ee,ie,K,ce)}}function bK(d,s,c){const f=d.node;let y=0;const A=c&ly.HasMeshoptCompression;for(const _ of f.meshes){if(f.lights&&f.lightMeshIndex===y||!_.featureData)continue;_.featureArray=new qh,_.featureArray.reserve(_.featureData.length);let C=s;for(const P of _.featureData){const R=A?65535&P:P>>16&65535,w=A?P>>16&65535:65535&P,S=(15&w)<8?15&w:0,F=d.evaluatedRMEA[S],T=d.evaluatedColor[S],L=d.emissionHeightBasedParams[S];let U;if(C&&S===2&&f.lights&&(U=new qh,U.resize(10*f.lights.length)),vK(_.featureArray,R,T,F,L,_.aabb.min[2],_.aabb.max[2],U),U&&C){C=!1;const V=f.meshes[f.lightMeshIndex];V.featureArray=U,V.featureArray._trim()}}_.featureArray._trim(),y++}}function RR(d,s,c,f){const y=1<<d.z;s.lat=qe((f/Nn+d.y)/y),s.lng=Xe((c/Nn+d.x)/y)}He(pw,"Tiled3dModelBucket",{omit:["layers"]}),He(FR,"Tiled3dModelFeature");const wK={circle:class extends fa{constructor(d,s,c,f){super(d,{layout:Qi||(Qi=new Ji({"circle-sort-key":new dr(Nt.layout_circle["circle-sort-key"]),visibility:new Tn(Nt.layout_circle.visibility)})),paint:ds||(ds=new Ji({"circle-radius":new dr(Nt.paint_circle["circle-radius"]),"circle-color":new dr(Nt.paint_circle["circle-color"]),"circle-blur":new dr(Nt.paint_circle["circle-blur"]),"circle-opacity":new dr(Nt.paint_circle["circle-opacity"]),"circle-translate":new Tn(Nt.paint_circle["circle-translate"]),"circle-translate-anchor":new Tn(Nt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Tn(Nt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Tn(Nt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new dr(Nt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new dr(Nt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new dr(Nt.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new Tn(Nt.paint_circle["circle-emissive-strength"])}))},s,c,f)}createBucket(d){return new vr(d)}queryRadius(d){const s=d;return Xo("circle-radius",this,s)+Xo("circle-stroke-width",this,s)+Ki(this.paint.get("circle-translate"))}queryIntersectsFeature(d,s,c,f,y,A,_,C){const P=Ii(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),A.angle,d.pixelToTileUnitsFactor),R=this.paint.get("circle-radius").evaluate(s,c)+this.paint.get("circle-stroke-width").evaluate(s,c);return hL(d,f,A,_,C,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",P,R)}getProgramIds(){return["circle"]}getDefaultProgramParams(d,s,c){const f=uL(this);return{config:new Gf(this,{zoom:s,lut:c}),defines:f,overrideFog:!1}}},heatmap:class extends fa{createBucket(d){return new fL(d)}constructor(d,s,c,f){super(d,{layout:AL||(AL=new Ji({visibility:new Tn(Nt.layout_heatmap.visibility)})),paint:pL||(pL=new Ji({"heatmap-radius":new dr(Nt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new dr(Nt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Tn(Nt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new wa(Nt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Tn(Nt.paint_heatmap["heatmap-opacity"])}))},s,c,f),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(d){d==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=m0({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(d){return Xo("heatmap-radius",this,d)}queryIntersectsFeature(d,s,c,f,y,A,_,C){const P=this.paint.get("heatmap-radius").evaluate(s,c);return hL(d,f,A,_,C,!0,!0,new Fe(0,0),P)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(d,s,c){return d==="heatmap"?{config:new Gf(this,{zoom:s,lut:c}),overrideFog:!1}:{}}},hillshade:class extends fa{constructor(d,s,c,f){super(d,{layout:mL||(mL=new Ji({visibility:new Tn(Nt.layout_hillshade.visibility)})),paint:gL||(gL=new Ji({"hillshade-illumination-direction":new Tn(Nt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Tn(Nt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Tn(Nt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Tn(Nt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Tn(Nt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Tn(Nt.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new Tn(Nt.paint_hillshade["hillshade-emissive-strength"])}))},s,c,f)}shouldRedrape(){return this.hasOffscreenPass()&&this.paint.get("hillshade-illumination-anchor")==="viewport"}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(d,s,c){return{overrideFog:!1}}},fill:class extends fa{constructor(d,s,c,f){super(d,{layout:EL||(EL=new Ji({"fill-sort-key":new dr(Nt.layout_fill["fill-sort-key"]),visibility:new Tn(Nt.layout_fill.visibility)})),paint:BL||(BL=new Ji({"fill-antialias":new Tn(Nt.paint_fill["fill-antialias"]),"fill-opacity":new dr(Nt.paint_fill["fill-opacity"]),"fill-color":new dr(Nt.paint_fill["fill-color"]),"fill-outline-color":new dr(Nt.paint_fill["fill-outline-color"]),"fill-translate":new Tn(Nt.paint_fill["fill-translate"]),"fill-translate-anchor":new Tn(Nt.paint_fill["fill-translate-anchor"]),"fill-pattern":new dr(Nt.paint_fill["fill-pattern"]),"fill-emissive-strength":new Tn(Nt.paint_fill["fill-emissive-strength"]),"fill-z-offset":new dr(Nt.paint_fill["fill-z-offset"])}))},s,c,f)}getProgramIds(){const d=this.paint.get("fill-pattern"),s=d&&d.constantOr(1),c=[s?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&c.push(s&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),c}getDefaultProgramParams(d,s,c){return{config:new Gf(this,{zoom:s,lut:c}),overrideFog:!1}}recalculate(d,s){super.recalculate(d,s);const c=this.paint._values["fill-outline-color"];c.value.kind==="constant"&&c.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(d){return new $B(d)}queryRadius(){return Ki(this.paint.get("fill-translate"))}queryIntersectsFeature(d,s,c,f,y,A){return!d.queryGeometry.isAboveHorizon&&Rr(Xr(d.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),A.angle,d.pixelToTileUnitsFactor),f)}isTileClipped(){return!0}is3D(){return this.paint.get("fill-z-offset").constantOr(1)!==0}},"fill-extrusion":class extends fa{constructor(d,s,c,f){super(d,{layout:aF||(aF=new Ji({visibility:new Tn(Nt["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new Tn(Nt["layout_fill-extrusion"]["fill-extrusion-edge-radius"])})),paint:lF||(lF=new Ji({"fill-extrusion-opacity":new Tn(Nt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new dr(Nt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Tn(Nt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Tn(Nt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new dr(Nt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new dr(Nt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new dr(Nt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Tn(Nt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Tn(Nt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Tn(Nt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new Tn(Nt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new Tn(Nt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new Tn(Nt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new Tn(Nt["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new Tn(Nt["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new dr(Nt["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new dr(Nt["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new Tn(Nt["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new Tn(Nt["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new Tn(Nt["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new Tn(Nt["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"]),"fill-extrusion-emissive-strength":new dr(Nt["paint_fill-extrusion"]["fill-extrusion-emissive-strength"]),"fill-extrusion-line-width":new dr(Nt["paint_fill-extrusion"]["fill-extrusion-line-width"]),"fill-extrusion-cast-shadows":new Tn(Nt["paint_fill-extrusion"]["fill-extrusion-cast-shadows"])}))},s,c,f),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(d){return new Gb(d)}queryRadius(){return Ki(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}hasShadowPass(){return this.paint.get("fill-extrusion-cast-shadows")}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(d,s,c,f,y,A,_,C,P){const R=Ii(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),A.angle,d.pixelToTileUnitsFactor),w=this.paint.get("fill-extrusion-height").evaluate(s,c),S=this.paint.get("fill-extrusion-base").evaluate(s,c),F=[0,0],T=C&&A.elevation,L=A.elevation?A.elevation.exaggeration():1,U=d.tile.getBucket(this);if(T&&U instanceof Gb){const K=U.centroidVertexArray,ce=P+1;ce<K.length&&(F[0]=K.geta_centroid_pos0(ce),F[1]=K.geta_centroid_pos1(ce))}if(F[0]===0&&F[1]===1)return!1;A.projection.name==="globe"&&(f=sF([f],[new Fe(0,0),new Fe(Nn,Nn)],d.tileID.canonical).map(K=>K.polygon).flat());const V=T?C:null,[$,ee]=function(K,ce,he,Be,Ne,Ve,Oe,rt,je,ct,yt){return K.projection.name==="globe"?function(Ct,Et,Pt,$t,Lt,dn,xn,tn,Jn,Hn,kn){const Bn=[],br=[],Yn=Ct.projection.upVectorScale(kn,Ct.center.lat,Ct.worldSize).metersToTile,or=[0,0,0,1],Or=[0,0,0,1],Zr=(Qr,ii,ai,so)=>{Qr[0]=ii,Qr[1]=ai,Qr[2]=so,Qr[3]=1},Vr=oF();Pt>0&&(Pt+=Vr),$t+=Vr;for(const Qr of Et){const ii=[],ai=[];for(const so of Qr){const Hi=so.x+Lt.x,Ur=so.y+Lt.y,Di=Ct.projection.projectTilePoint(Hi,Ur,kn),zi=Ct.projection.upVector(kn,so.x,so.y);let To=Pt,_s=$t;if(xn){const Os=uF(Hi,Ur,Pt,$t,xn,tn,Jn,Hn);To+=Os.base,_s+=Os.top}Pt!==0?Zr(or,Di.x+zi[0]*Yn*To,Di.y+zi[1]*Yn*To,Di.z+zi[2]*Yn*To):Zr(or,Di.x,Di.y,Di.z),Zr(Or,Di.x+zi[0]*Yn*_s,Di.y+zi[1]*Yn*_s,Di.z+zi[2]*Yn*_s),De.vec3.transformMat4(or,or,dn),De.vec3.transformMat4(Or,Or,dn),ii.push(new Pm(or[0],or[1],or[2])),ai.push(new Pm(Or[0],Or[1],Or[2]))}Bn.push(ii),br.push(ai)}return[Bn,br]}(K,ce,he,Be,Ne,Ve,Oe,rt,je,ct,yt):Oe?function(Ct,Et,Pt,$t,Lt,dn,xn,tn,Jn){const Hn=[],kn=[],Bn=[0,0,0,1];for(const br of Ct){const Yn=[],or=[];for(const Or of br){const Zr=Or.x+$t.x,Vr=Or.y+$t.y,Qr=uF(Zr,Vr,Et,Pt,dn,xn,tn,Jn);Bn[0]=Zr,Bn[1]=Vr,Bn[2]=Qr.base,Bn[3]=1,De.vec4.transformMat4(Bn,Bn,Lt),Bn[3]=Math.max(Bn[3],1e-5);const ii=new Pm(Bn[0]/Bn[3],Bn[1]/Bn[3],Bn[2]/Bn[3]);Bn[0]=Zr,Bn[1]=Vr,Bn[2]=Qr.top,Bn[3]=1,De.vec4.transformMat4(Bn,Bn,Lt),Bn[3]=Math.max(Bn[3],1e-5);const ai=new Pm(Bn[0]/Bn[3],Bn[1]/Bn[3],Bn[2]/Bn[3]);Yn.push(ii),or.push(ai)}Hn.push(Yn),kn.push(or)}return[Hn,kn]}(ce,he,Be,Ne,Ve,Oe,rt,je,ct):function(Ct,Et,Pt,$t,Lt){const dn=[],xn=[],tn=Lt[8]*Et,Jn=Lt[9]*Et,Hn=Lt[10]*Et,kn=Lt[11]*Et,Bn=Lt[8]*Pt,br=Lt[9]*Pt,Yn=Lt[10]*Pt,or=Lt[11]*Pt;for(const Or of Ct){const Zr=[],Vr=[];for(const Qr of Or){const ii=Qr.x+$t.x,ai=Qr.y+$t.y,so=Lt[0]*ii+Lt[4]*ai+Lt[12],Hi=Lt[1]*ii+Lt[5]*ai+Lt[13],Ur=Lt[2]*ii+Lt[6]*ai+Lt[14],Di=Lt[3]*ii+Lt[7]*ai+Lt[15],zi=so+tn,To=Hi+Jn,_s=Ur+Hn,Os=Math.max(Di+kn,1e-5),vs=so+Bn,is=Hi+br,xa=Ur+Yn,Qs=Math.max(Di+or,1e-5);Zr.push(new Pm(zi/Os,To/Os,_s/Os)),Vr.push(new Pm(vs/Qs,is/Qs,xa/Qs))}dn.push(Zr),xn.push(Vr)}return[dn,xn]}(ce,he,Be,Ne,Ve)}(A,f,S,w,R,_,V,F,L,A.center.lat,d.tileID.canonical),ie=d.queryGeometry;return function(K,ce,he){let Be=1/0;Rr(he,ce)&&(Be=cF(he,ce[0]));for(let Ne=0;Ne<ce.length;Ne++){const Ve=ce[Ne],Oe=K[Ne];for(let rt=0;rt<Ve.length-1;rt++){const je=Ve[rt],ct=[je,Ve[rt+1],Oe[rt+1],Oe[rt],je];Qn(he,ct)&&(Be=Math.min(Be,cF(he,ct)))}}return Be!==1/0&&Be}($,ee,ie.isPointQuery()?ie.screenBounds:ie.screenGeometry)}},line:class extends fa{constructor(d,s,c,f){const y=vF();super(d,y,s,c,f),y.layout&&(this.layout=new Ja(y.layout)),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(d){if(d==="line-gradient"){const s=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=s._styleExpression&&s._styleExpression.expression instanceof oh,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(d,s){super.recalculate(d,s),this.paint._values["line-floorwidth"]=(()=>{if(E0)return E0;const c=vF();return E0=new EG(c.paint.properties["line-width"].specification),E0.useIntegerZoom=!0,E0})().possiblyEvaluate(this._transitioningPaint._values["line-width"].value,d)}createBucket(d){return new tS(d)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(d,s,c){const f=yF(this);return{config:new Gf(this,{zoom:s,lut:c}),defines:f,overrideFog:!1}}queryRadius(d){const s=d,c=bF(Xo("line-width",this,s),Xo("line-gap-width",this,s)),f=Xo("line-offset",this,s);return c/2+Math.abs(f)+Ki(this.paint.get("line-translate"))}queryIntersectsFeature(d,s,c,f,y,A){if(d.queryGeometry.isAboveHorizon)return!1;const _=Xr(d.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),A.angle,d.pixelToTileUnitsFactor),C=d.pixelToTileUnitsFactor/2*bF(this.paint.get("line-width").evaluate(s,c),this.paint.get("line-gap-width").evaluate(s,c)),P=this.paint.get("line-offset").evaluate(s,c);return P&&(f=function(R,w){const S=[],F=new Fe(0,0);for(let T=0;T<R.length;T++){const L=R[T],U=[];for(let V=0;V<L.length;V++){const $=L[V],ee=L[V+1],ie=V===0?F:$.sub(L[V-1])._unit()._perp(),K=V===L.length-1?F:ee.sub($)._unit()._perp(),ce=ie._add(K)._unit();ce._mult(1/(ce.x*K.x+ce.y*K.y)),U.push(ce._mult(w)._add($))}S.push(U)}return S}(f,P*d.pixelToTileUnitsFactor)),function(R,w,S){for(let F=0;F<w.length;F++){const T=w[F];if(R.length>=3){for(let L=0;L<T.length;L++)if(So(R,T[L]))return!0}if(fr(R,T,S))return!0}return!1}(_,f,C)}isTileClipped(){return!0}isDraped(d){const s=this.layout.get("line-z-offset");return s.isConstant()&&!s.constantOr(0)}},symbol:aw,background:class extends fa{constructor(d,s,c,f){super(d,{layout:iR||(iR=new Ji({visibility:new Tn(Nt.layout_background.visibility)})),paint:oR||(oR=new Ji({"background-pitch-alignment":new Tn(Nt.paint_background["background-pitch-alignment"]),"background-color":new Tn(Nt.paint_background["background-color"]),"background-pattern":new Tn(Nt.paint_background["background-pattern"]),"background-opacity":new Tn(Nt.paint_background["background-opacity"]),"background-emissive-strength":new Tn(Nt.paint_background["background-emissive-strength"])}))},s,c,f)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(d,s,c){return{overrideFog:!1}}is3D(){return this.paint.get("background-pitch-alignment")==="viewport"}},raster:uR,"raster-particle":mR,sky:class extends fa{constructor(d,s,c,f){super(d,{layout:fR||(fR=new Ji({visibility:new Tn(Nt.layout_sky.visibility)})),paint:AR||(AR=new Ji({"sky-type":new Tn(Nt.paint_sky["sky-type"]),"sky-atmosphere-sun":new Tn(Nt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Tn(Nt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Tn(Nt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Tn(Nt.paint_sky["sky-gradient-radius"]),"sky-gradient":new wa(Nt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Tn(Nt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Tn(Nt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Tn(Nt.paint_sky["sky-opacity"])}))},s,c,f),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(d){d==="sky-gradient"?this._updateColorRamp():d!=="sky-atmosphere-sun"&&d!=="sky-atmosphere-halo-color"&&d!=="sky-atmosphere-color"&&d!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=m0({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(d){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const s=d.style.light.properties.get("position");return this._lightPosition.azimuthal!==s.azimuthal||this._lightPosition.polar!==s.polar}return!1}getCenter(d,s){if(this.paint.get("sky-type")==="atmosphere"){const f=this.paint.get("sky-atmosphere-sun"),y=!f,A=d.style.light,_=A.properties.get("position");return y&&A.properties.get("anchor")==="viewport"&&Jr("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),y?wS(_.azimuthal,90-_.polar,s):wS(f[0],90-f[1],s)}const c=this.paint.get("sky-gradient-center");return wS(c[0],90-c[1],s)}isSky(){return!0}markSkyboxValid(d){this._skyboxInvalidated=!1,this._lightPosition=d.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const d=this.paint.get("sky-type");return d==="atmosphere"?["skyboxCapture","skybox"]:d==="gradient"?["skyboxGradient"]:null}},slot:class extends fa{constructor(d,s,c,f){super(d,{paint:pR||(pR=new Ji({}))},s,null)}},model:class extends fa{constructor(d,s,c,f){super(d,{layout:BR||(BR=new Ji({visibility:new Tn(Nt.layout_model.visibility),"model-id":new dr(Nt.layout_model["model-id"])})),paint:SR||(SR=new Ji({"model-opacity":new Tn(Nt.paint_model["model-opacity"]),"model-rotation":new dr(Nt.paint_model["model-rotation"]),"model-scale":new dr(Nt.paint_model["model-scale"]),"model-translation":new dr(Nt.paint_model["model-translation"]),"model-color":new dr(Nt.paint_model["model-color"]),"model-color-mix-intensity":new dr(Nt.paint_model["model-color-mix-intensity"]),"model-type":new Tn(Nt.paint_model["model-type"]),"model-cast-shadows":new Tn(Nt.paint_model["model-cast-shadows"]),"model-receive-shadows":new Tn(Nt.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new Tn(Nt.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new dr(Nt.paint_model["model-emissive-strength"]),"model-roughness":new dr(Nt.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new dr(Nt.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new Tn(Nt.paint_model["model-cutoff-fade-range"]),"model-front-cutoff":new Tn(Nt.paint_model["model-front-cutoff"])}))},s,c,f),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(d){return new ES(d)}getProgramIds(){return["model"]}is3D(){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(d){return d instanceof pw?Nn-1:0}queryIntersectsFeature(d,s,c,f,y,A){if(!this.modelManager)return!1;const _=this.modelManager,C=d.tile.getBucket(this);if(!(C&&C instanceof ES))return!1;const P=C;for(const R in P.instancesPerModel){const w=P.instancesPerModel[R],S=s.id!==void 0?s.id:s.properties&&s.properties.hasOwnProperty("id")?s.properties.id:void 0;if(w.idToFeaturesIndex.hasOwnProperty(S)){const F=w.features[w.idToFeaturesIndex[S]],T=_.getModel(R,this.scope);if(!T)return!1;let L=De.mat4.create();const U=new re(0,0),V=P.canonical;let $=Number.MAX_VALUE;for(let ee=0;ee<F.instancedDataCount;++ee){const ie=16*(F.instancedDataOffset+ee),K=w.instancedDataArray.float32,ce=[K[ie+4],K[ie+5],K[ie+6]];RR(V,U,K[ie],0|K[ie+1]),TR(L,T,A,U,F.rotation,F.scale,ce,!1,!1,!1),A.projection.name==="globe"&&(L=CS(L,A));const he=De.mat4.multiply([],A.projMatrix,L),Be=d.queryGeometry,Ne=bR(Be.isPointQuery()?Be.screenBounds:Be.screenGeometry,A,he,T.aabb);Ne!=null&&($=Math.min(Ne,$))}return $!==Number.MAX_VALUE&&$}}return!1}_handleOverridablePaintPropertyUpdate(d,s,c){return!(!this.layout||s.isDataDriven()||c.isDataDriven()||d!=="model-color"&&d!=="model-color-mix-intensity"&&d!=="model-rotation"&&d!=="model-scale"&&d!=="model-translation"&&d!=="model-emissive-strength")}_isPropertyZoomDependent(d){const s=this._transitionablePaint._values[d];return s!=null&&s.value!=null&&s.value.expression!=null&&s.value.expression instanceof D}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}queryIntersectsMatchingFeature(d,s,c,f){const y=d.tile,A=y.getBucket(this);let _=null,C=Number.MAX_VALUE;if(!(A&&A instanceof pw))return{queryFeature:_,intersectionZ:C};const P=A.getNodesInfo()[s];if(P.hiddenByReplacement||!P.node.meshes||!c.filter(new Oi(y.tileID.overscaledZ),P.feature,y.tileID.canonical))return{queryFeature:_,intersectionZ:C};const R=P.node,w=f.calculatePosMatrix(y.tileID.toUnwrapped(),f.worldSize),S=P.evaluatedScale;let F=0;f.elevation&&R.elevation&&(F=R.elevation*f.elevation.exaggeration()),De.mat4.translate(w,w,[(R.anchor?R.anchor[0]:0)*(S[0]-1),(R.anchor?R.anchor[1]:0)*(S[1]-1),F]),De.mat4.scale(w,w,S),De.mat4.multiply(w,w,R.matrix);const T=d.queryGeometry,L=T.isPointQuery()?T.screenBounds:T.screenGeometry,U=function($){const ee=De.mat4.multiply([],w,$.matrix),ie=De.mat4.multiply(ee,f.expandedFarZProjMatrix,ee);for(let K=0;K<$.meshes.length;++K){const ce=$.meshes[K];if(K===$.lightMeshIndex)continue;const he=bR(L,f,ie,ce.aabb);he!=null&&(C=Math.min(he,C))}if($.children)for(const K of $.children)U(K)};if(U(R),C===Number.MAX_VALUE)return{queryFeature:_,intersectionZ:C};const V=new re(0,0);return RR(y.tileID.canonical,V,P.node.anchor[0],P.node.anchor[1]),_={type:"Feature",geometry:{type:"Point",coordinates:[V.lng,V.lat]},properties:P.feature.properties,id:P.feature.id,state:{},layer:this.serialize()},{queryFeature:_,intersectionZ:C}}},clip:class extends fa{constructor(d,s,c,f){super(d,{layout:SL||(SL=new Ji({"clip-layer-types":new Tn(Nt.layout_clip["clip-layer-types"]),"clip-layer-scope":new Tn(Nt.layout_clip["clip-layer-scope"])})),paint:TL||(TL=new Ji({}))},s,c,f)}recalculate(d,s){super.recalculate(d,s)}createBucket(d){return new IL(d)}isTileClipped(){return!0}is3D(){return!0}}};class xK{constructor(s){this._callback=s,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class CK{constructor(){this.tasks={},this.taskQueue=[],xi(["process"],this),this.invoker=new xK(this.process),this.nextId=0}add(s,c){const f=this.nextId++,y=function({type:A,isSymbolTile:_,zoom:C}){return C=C||0,A==="message"?0:A!=="maybePrepare"||_?A!=="parseTile"||_?A==="parseTile"&&_?300-C:A==="maybePrepare"&&_?400-C:500:200-C:100-C}(c);if(y===0){try{s()}finally{}return null}return this.tasks[f]={fn:s,metadata:c,priority:y,id:f},this.taskQueue.push(f),this.invoker.trigger(),{cancel:()=>{delete this.tasks[f]}}}process(){try{if(this.taskQueue=this.taskQueue.filter(f=>!!this.tasks[f]),!this.taskQueue.length)return;const s=this.pick();if(s===null)return;const c=this.tasks[s];if(delete this.tasks[s],this.taskQueue.length&&this.invoker.trigger(),!c)return;c.fn()}finally{}}pick(){let s=null,c=1/0;for(let y=0;y<this.taskQueue.length;y++){const A=this.tasks[this.taskQueue[y]];A.priority<c&&(c=A.priority,s=y)}if(s===null)return null;const f=this.taskQueue[s];return this.taskQueue.splice(s,1),f}remove(){this.invoker.remove()}}class kR{constructor(s,c,f){this.target=s,this.parent=c,this.mapId=f,this.callbacks={},this.cancelCallbacks={},xi(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new CK}send(s,c,f,y,A=!1,_){const C=Math.round(1e18*Math.random()).toString(36).substring(0,10);f&&(f.metadata=_,this.callbacks[C]=f);const P=new Set;return this.target.postMessage({id:C,type:s,hasCallback:!!f,targetMapId:y,mustQueue:A,sourceMapId:this.mapId,data:pn(c,P)},P),{cancel:()=>{f&&delete this.callbacks[C],this.target.postMessage({id:C,type:"<cancel>",targetMapId:y,sourceMapId:this.mapId})}}}receive(s){const c=s.data,f=c.id;if(f&&(!c.targetMapId||this.mapId===c.targetMapId))if(c.type==="<cancel>"){const y=this.cancelCallbacks[f];delete this.cancelCallbacks[f],y&&y.cancel()}else if(c.mustQueue||lo()){const y=this.callbacks[f],A=this.scheduler.add(()=>this.processTask(f,c),y&&y.metadata||{type:"message"});A&&(this.cancelCallbacks[f]=A)}else this.processTask(f,c)}processTask(s,c){if(delete this.cancelCallbacks[s],c.type==="<response>"){const f=this.callbacks[s];delete this.callbacks[s],f&&(c.error?f(un(c.error)):f(null,un(c.data)))}else{const f=new Set,y=c.hasCallback?(_,C)=>{this.target.postMessage({id:s,type:"<response>",sourceMapId:this.mapId,error:_?pn(_):null,data:pn(C,f)},f)}:_=>{},A=un(c.data);if(this.parent[c.type])this.parent[c.type](c.sourceMapId,A,y);else if(this.parent.getWorkerSource){const _=c.type.split(".");this.parent.getWorkerSource(c.sourceMapId,_[0],A.source,A.scope)[_[1]](A,y)}else y(new Error(`Could not find function ${c.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}class uy{constructor(s,c){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=pr();const f=this.workerPool.acquire(this.id);for(let y=0;y<f.length;y++){const A=new uy.Actor(f[y],c,this.id);A.name=`Worker ${y}`,this.actors.push(A)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(s,c,f){Fr(this.actors,(y,A)=>{y.send(s,c,A)},f=f||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(s=>{s.remove()}),this.actors=[],this.workerPool.release(this.id)}}uy.Actor=kR;class MR{constructor(s){this.size=s,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(s,c){const f=this.toIdx(s,c);return{min:this.minimums[f],max:this.maximums[f]}}isLeaf(s,c){return this.leaves[this.toIdx(s,c)]}toIdx(s,c){return c*this.size+s}}function OR(d,s,c,f){let y=0,A=Number.MAX_VALUE;for(let _=0;_<3;_++)if(Math.abs(f[_])<1e-15){if(c[_]<d[_]||c[_]>s[_])return null}else{const C=1/f[_];let P=(d[_]-c[_])*C,R=(s[_]-c[_])*C;if(P>R){const w=P;P=R,R=w}if(P>y&&(y=P),R<A&&(A=R),y>A)return null}return y}function DR(d,s,c,f,y,A,_,C,P,R,w){const S=f-d,F=y-s,T=A-c,L=_-d,U=C-s,V=P-c,$=w[1]*V-w[2]*U,ee=w[2]*L-w[0]*V,ie=w[0]*U-w[1]*L,K=S*$+F*ee+T*ie;if(Math.abs(K)<1e-15)return null;const ce=1/K,he=R[0]-d,Be=R[1]-s,Ne=R[2]-c,Ve=(he*$+Be*ee+Ne*ie)*ce;if(Ve<0||Ve>1)return null;const Oe=Be*T-Ne*F,rt=Ne*S-he*T,je=he*F-Be*S,ct=(w[0]*Oe+w[1]*rt+w[2]*je)*ce;return ct<0||Ve+ct>1?null:(L*Oe+U*rt+V*je)*ce}function UR(d,s,c){return(d-s)/(c-s)}function NR(d,s,c,f,y,A,_,C,P){const R=1<<c,w=A-f,S=_-y,F=(d+1)/R*w+f,T=(s+0)/R*S+y,L=(s+1)/R*S+y;C[0]=(d+0)/R*w+f,C[1]=T,P[0]=F,P[1]=L}class zR{constructor(s){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=s,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const c=function(A){const _=Math.ceil(Math.log2(A.dim/8)),C=[];let P=Math.ceil(Math.pow(2,_));const R=1/P,w=(T,L,U,V,$)=>{const ee=V?1:0,ie=(T+1)*U-ee,K=L*U,ce=(L+1)*U-ee;$[0]=T*U,$[1]=K,$[2]=ie,$[3]=ce};let S=new MR(P);const F=[];for(let T=0;T<P*P;T++){w(T%P,Math.floor(T/P),R,!1,F);const L=ip(F[0],F[1],A),U=ip(F[2],F[1],A),V=ip(F[2],F[3],A),$=ip(F[0],F[3],A);S.minimums.push(Math.min(L,U,V,$)),S.maximums.push(Math.max(L,U,V,$)),S.leaves.push(1)}for(C.push(S),P/=2;P>=1;P/=2){const T=C[C.length-1];S=new MR(P);for(let L=0;L<P*P;L++){w(L%P,Math.floor(L/P),2,!0,F);const U=T.getElevation(F[0],F[1]),V=T.getElevation(F[2],F[1]),$=T.getElevation(F[2],F[3]),ee=T.getElevation(F[0],F[3]),ie=T.isLeaf(F[0],F[1]),K=T.isLeaf(F[2],F[1]),ce=T.isLeaf(F[2],F[3]),he=T.isLeaf(F[0],F[3]),Be=Math.min(U.min,V.min,$.min,ee.min),Ne=Math.max(U.max,V.max,$.max,ee.max),Ve=ie&&K&&ce&&he;S.maximums.push(Ne),S.minimums.push(Be),S.leaves.push(Ne-Be<=5&&Ve?1:0)}C.push(S)}return C}(this.dem),f=c.length-1,y=c[f];this._addNode(y.minimums[0],y.maximums[0],y.leaves[0]),this._construct(c,0,0,f,0)}raycastRoot(s,c,f,y,A,_,C=1){return OR([s,c,-100],[f,y,this.maximums[0]*C],A,_)}raycast(s,c,f,y,A,_,C=1){if(!this.nodeCount)return null;const P=this.raycastRoot(s,c,f,y,A,_,C);if(P==null)return null;const R=[],w=[],S=[],F=[],T=[{idx:0,t:P,nodex:0,nodey:0,depth:0}];for(;T.length>0;){const{idx:L,t:U,nodex:V,nodey:$,depth:ee}=T.pop();if(this.leaves[L]){NR(V,$,ee,s,c,f,y,S,F);const K=1<<ee,ce=(V+0)/K,he=(V+1)/K,Be=($+0)/K,Ne=($+1)/K,Ve=ip(ce,Be,this.dem)*C,Oe=ip(he,Be,this.dem)*C,rt=ip(he,Ne,this.dem)*C,je=ip(ce,Ne,this.dem)*C,ct=DR(S[0],S[1],Ve,F[0],S[1],Oe,F[0],F[1],rt,A,_),yt=DR(F[0],F[1],rt,S[0],F[1],je,S[0],S[1],Ve,A,_),Ct=Math.min(ct!==null?ct:Number.MAX_VALUE,yt!==null?yt:Number.MAX_VALUE);if(Ct!==Number.MAX_VALUE)return Ct;{const Et=De.vec3.scaleAndAdd([],A,_,U);if(VR(Ve,Oe,je,rt,UR(Et[0],S[0],F[0]),UR(Et[1],S[1],F[1]))>=Et[2])return U}continue}let ie=0;for(let K=0;K<this._siblingOffset.length;K++){NR((V<<1)+this._siblingOffset[K][0],($<<1)+this._siblingOffset[K][1],ee+1,s,c,f,y,S,F),S[2]=-100,F[2]=this.maximums[this.childOffsets[L]+K]*C;const ce=OR(S,F,A,_);if(ce!=null){const he=ce;R[K]=he;let Be=!1;for(let Ne=0;Ne<ie&&!Be;Ne++)he>=R[w[Ne]]&&(w.splice(Ne,0,K),Be=!0);Be||(w[ie]=K),ie++}}for(let K=0;K<ie;K++){const ce=w[K];T.push({idx:this.childOffsets[L]+ce,t:R[ce],nodex:(V<<1)+this._siblingOffset[ce][0],nodey:($<<1)+this._siblingOffset[ce][1],depth:ee+1})}}return null}_addNode(s,c,f){return this.minimums.push(s),this.maximums.push(c),this.leaves.push(f),this.childOffsets.push(0),this.nodeCount++}_construct(s,c,f,y,A){if(s[y].isLeaf(c,f)===1)return;this.childOffsets[A]||(this.childOffsets[A]=this.nodeCount);const _=y-1,C=s[_];let P=0,R=0;for(let w=0;w<this._siblingOffset.length;w++){const S=2*c+this._siblingOffset[w][0],F=2*f+this._siblingOffset[w][1],T=C.getElevation(S,F),L=C.isLeaf(S,F),U=this._addNode(T.min,T.max,L);L&&(P|=1<<w),R||(R=U)}for(let w=0;w<this._siblingOffset.length;w++)P&1<<w||this._construct(s,2*c+this._siblingOffset[w][0],2*f+this._siblingOffset[w][1],_,R+w)}}function VR(d,s,c,f,y,A){return $n($n(d,c,A),$n(s,f,A),y)}function ip(d,s,c){const f=c.dim,y=_n(d*f-.5,0,f-1),A=_n(s*f-.5,0,f-1),_=Math.floor(y),C=Math.floor(A),P=Math.min(_+1,f-1),R=Math.min(C+1,f-1);return VR(c.get(_,C),c.get(P,C),c.get(_,R),c.get(P,R),y-_,A-C)}const EK={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function BK(d,s,c){return(256*d*256+256*s+c)/10-1e4}function SK(d,s,c){return 256*d+s+c/256-32768}class mw{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(s,c,f,y=!1){if(this.uid=s,c.height!==c.width)throw new RangeError("DEM tiles must be square");if(f&&f!=="mapbox"&&f!=="terrarium")return void Jr(`"${f}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=c.height;const A=this.dim=c.height-2,_=new Uint32Array(c.data.buffer);if(this.pixels=new Uint8Array(c.data.buffer),this.floatView=new Float32Array(c.data.buffer),this.borderReady=y,this._modifiedForSources={},!y){for(let P=0;P<A;P++)_[this._idx(-1,P)]=_[this._idx(0,P)],_[this._idx(A,P)]=_[this._idx(A-1,P)],_[this._idx(P,-1)]=_[this._idx(P,0)],_[this._idx(P,A)]=_[this._idx(P,A-1)];_[this._idx(-1,-1)]=_[this._idx(0,0)],_[this._idx(A,-1)]=_[this._idx(A-1,0)],_[this._idx(-1,A)]=_[this._idx(0,A-1)],_[this._idx(A,A)]=_[this._idx(A-1,A-1)]}const C=f==="terrarium"?SK:BK;for(let P=0;P<_.length;++P){const R=4*P;this.floatView[P]=C(this.pixels[R],this.pixels[R+1],this.pixels[R+2])}this._timestamp=Vn.now()}_buildQuadTree(){this._tree=new zR(this)}get(s,c,f=!1){f&&(s=_n(s,-1,this.dim),c=_n(c,-1,this.dim));const y=this._idx(s,c);return this.floatView[y]}set(s,c,f){const y=this._idx(s,c),A=this.floatView[y];return this.floatView[y]=f,f-A}static getUnpackVector(s){return EK[s]}_idx(s,c){if(s<-1||s>=this.dim+1||c<-1||c>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(c+1)*this.stride+(s+1)}static pack(s,c){const f=[0,0,0,0],y=mw.getUnpackVector(c);let A=Math.floor((s+y[3])/y[2]);return f[2]=A%256,A=Math.floor(A/256),f[1]=A%256,A=Math.floor(A/256),f[0]=A,f}getPixels(){return new vL({width:this.stride,height:this.stride},this.pixels)}backfillBorder(s,c,f){if(this.dim!==s.dim)throw new Error("dem dimension mismatch");let y=c*this.dim,A=c*this.dim+this.dim,_=f*this.dim,C=f*this.dim+this.dim;switch(c){case-1:y=A-1;break;case 1:A=y+1}switch(f){case-1:_=C-1;break;case 1:C=_+1}const P=-c*this.dim,R=-f*this.dim;for(let w=_;w<C;w++)for(let S=y;S<A;S++){const F=4*this._idx(S,w),T=4*this._idx(S+P,w+R);this.pixels[F+0]=s.pixels[T+0],this.pixels[F+1]=s.pixels[T+1],this.pixels[F+2]=s.pixels[T+2],this.pixels[F+3]=s.pixels[T+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}function TK(d,s,c){d===1?s.header_length=c.readFixed32():d===2?s.x=c.readVarint():d===3?s.y=c.readVarint():d===4?s.z=c.readVarint():d===5&&s.layers.push(function(f,y){return f.readFields(RK,{version:0,name:"",units:"",tilesize:0,buffer:0,pixel_format:0,data_index:[]},y)}(c,c.readVarint()+c.pos))}function IK(d,s,c){d===1?(s.delta_filter=function(f,y){return f.readFields(PK,{block_size:0},y)}(c,c.readVarint()+c.pos),s.filter="delta_filter"):d===2?(c.readVarint(),s.filter="zigzag_filter"):d===3?(c.readVarint(),s.filter="bitshuffle_filter"):d===4&&(c.readVarint(),s.filter="byteshuffle_filter")}function PK(d,s,c){d===1&&(s.block_size=c.readVarint())}function LK(d,s,c){d===1?(c.readVarint(),s.codec="gzip_data"):d===2?(c.readVarint(),s.codec="jpeg_image"):d===3?(c.readVarint(),s.codec="webp_image"):d===4&&(c.readVarint(),s.codec="png_image")}function FK(d,s,c){d===1?s.first_byte=c.readFixed64():d===2?s.last_byte=c.readFixed64():d===3?s.filters.push(function(f,y){return f.readFields(IK,{},y)}(c,c.readVarint()+c.pos)):d===4?s.codec=function(f,y){return f.readFields(LK,{},y)}(c,c.readVarint()+c.pos):d===5?s.deprecated_offset=c.readFloat():d===6?s.deprecated_scale=c.readFloat():d===7?s.bands.push(c.readString()):d===8?s.offset=c.readDouble():d===9&&(s.scale=c.readDouble())}function RK(d,s,c){d===1?s.version=c.readVarint():d===2?s.name=c.readString():d===3?s.units=c.readString():d===4?s.tilesize=c.readVarint():d===5?s.buffer=c.readVarint():d===6?s.pixel_format=c.readVarint():d===7&&s.data_index.push(function(f,y){return f.readFields(FK,{first_byte:0,last_byte:0,filters:[],codec:null,offset:0,scale:0,deprecated_offset:0,deprecated_scale:0,bands:[]},y)}(c,c.readVarint()+c.pos))}function kK(d,s,c){if(d===2)(function(f,y,A){f.readFields(MK,A,y)})(c,c.readVarint()+c.pos,s);else if(d===3)throw new Error("Not implemented")}function MK(d,s,c){if(d===1){let f=0;const y=c.readVarint()+c.pos;for(;c.pos<y;)s[f++]=c.readVarint()}}He(mw,"DEMData"),He(zR,"DemMinMaxQuadTree",{omit:["dem"]});class OK{constructor(s){this.capacity=s,this.cache=new Map}get(s){if(!this.cache.has(s))return;const c=this.cache.get(s);return this.cache.delete(s),this.cache.set(s,c),c}put(s,c){this.cache.has(s)?this.cache.delete(s):this.cache.size===this.capacity&&this.cache.delete(this.cache.keys().next().value),this.cache.set(s,c)}}function DK(d,s){if(s.length!==4)throw new Error(`Expected data of dimension 4 but got ${s.length}.`);let c=s[3];for(let f=2;f>=1;f--){const y=f===1?1:0,A=f===2?1:0;for(let _=0;_<s[0];_++){const C=s[1]*_;for(let P=y;P<s[1];P++){const R=s[2]*(P+C);for(let w=A;w<s[2];w++){const S=s[3]*(w+R);for(let F=0;F<s[3];F++){const T=S+F;d[T]+=d[T-c]}}}}c*=s[f]}return d}function UK(d){for(let s=0,c=d.length;s<c;s++)d[s]=d[s]>>>1^-(1&d[s]);return d}function NK(d,s){switch(s){case"uint32":return d;case"uint16":for(let c=0;c<d.length;c+=2){const f=d[c],y=d[c+1];d[c]=(240&f)>>4|(61440&f)>>8|(240&y)<<4|61440&y,d[c+1]=15&f|(3840&f)>>4|(15&y)<<8|(3840&y)<<4}return d;case"uint8":for(let c=0;c<d.length;c+=4){const f=d[c],y=d[c+1],A=d[c+2],_=d[c+3];d[c+0]=(192&f)>>6|(192&y)>>4|(192&A)>>2|192&_,d[c+1]=(48&f)>>4|(48&y)>>2|48&A|(48&_)<<2,d[c+2]=(12&f)>>2|12&y|(12&A)<<2|(12&_)<<4,d[c+3]=3&f|(3&y)<<2|(3&A)<<4|(3&_)<<6}return d;default:throw new Error(`Invalid pixel format, "${s}"`)}}var Ou=Uint8Array,U0=Uint16Array,zK=Int32Array,QR=new Ou([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),HR=new Ou([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),VK=new Ou([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),jR=function(d,s){for(var c=new U0(31),f=0;f<31;++f)c[f]=s+=1<<d[f-1];var y=new zK(c[30]);for(f=1;f<30;++f)for(var A=c[f];A<c[f+1];++A)y[A]=A-c[f]<<5|f;return{b:c,r:y}},$R=jR(QR,2),GR=$R.b,QK=$R.r;GR[28]=258,QK[258]=28;for(var HK=jR(HR,0).b,KR=new U0(32768),Ms=0;Ms<32768;++Ms){var hy=(43690&Ms)>>1|(21845&Ms)<<1;KR[Ms]=((65280&(hy=(61680&(hy=(52428&hy)>>2|(13107&hy)<<2))>>4|(3855&hy)<<4))>>8|(255&hy)<<8)>>1}var N0=function(d,s,c){for(var f=d.length,y=0,A=new U0(s);y<f;++y)d[y]&&++A[d[y]-1];var _,C=new U0(s);for(y=1;y<s;++y)C[y]=C[y-1]+A[y-1]<<1;_=new U0(1<<s);var P=15-s;for(y=0;y<f;++y)if(d[y])for(var R=y<<4|d[y],w=s-d[y],S=C[d[y]-1]++<<w,F=S|(1<<w)-1;S<=F;++S)_[KR[S]>>P]=R;return _},z0=new Ou(288);for(Ms=0;Ms<144;++Ms)z0[Ms]=8;for(Ms=144;Ms<256;++Ms)z0[Ms]=9;for(Ms=256;Ms<280;++Ms)z0[Ms]=7;for(Ms=280;Ms<288;++Ms)z0[Ms]=8;var qR=new Ou(32);for(Ms=0;Ms<32;++Ms)qR[Ms]=5;var jK=N0(z0,9),$K=N0(qR,5),IS=function(d){for(var s=d[0],c=1;c<d.length;++c)d[c]>s&&(s=d[c]);return s},ed=function(d,s,c){var f=s/8|0;return(d[f]|d[f+1]<<8)>>(7&s)&c},PS=function(d,s){var c=s/8|0;return(d[c]|d[c+1]<<8|d[c+2]<<16)>>(7&s)},GK=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],td=function(d,s,c){var f=new Error(s||GK[d]);if(f.code=d,Error.captureStackTrace&&Error.captureStackTrace(f,td),!c)throw f;return f},KK=new Ou(0),qK=typeof TextDecoder<"u"&&new TextDecoder;try{qK.decode(KK,{stream:!0})}catch{}const WK={gzip_data:"gzip"};class mh extends Error{constructor(s){super(s),this.name="MRTError"}}const XK={0:"uint32",1:"uint32",2:"uint16",3:"uint8"},WR={uint32:1,uint16:2,uint8:4},ZK={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array};let LS;class FS{constructor(s=5){this.x=NaN,this.y=NaN,this.z=NaN,this.layers={},this._cacheSize=s}getLayer(s){const c=this.layers[s];if(!c)throw new mh(`Layer '${s}' not found`);return c}getHeaderLength(s){const c=new Uint8Array(s),f=new DataView(s);if(c[0]!==13)throw new mh("File is not a valid MRT.");return f.getUint32(1,!0)}parseHeader(s){const c=new Uint8Array(s),f=this.getHeaderLength(s);if(c.length<f)throw new mh(`Expected header with length >= ${f} but got buffer of length ${c.length}`);const y=function(A,_){return A.readFields(TK,{header_length:0,x:0,y:0,z:0,layers:[]},void 0)}(new LS(c.subarray(0,f)));if(!isNaN(this.x)&&(this.x!==y.x||this.y!==y.y||this.z!==y.z))throw new mh(`Invalid attempt to parse header ${y.z}/${y.x}/${y.y} for tile ${this.z}/${this.x}/${this.y}`);this.x=y.x,this.y=y.y,this.z=y.z;for(const A of y.layers)this.layers[A.name]=new YK(A,{cacheSize:this._cacheSize});return this}createDecodingTask(s){const c=[],f=this.getLayer(s.layerName);for(let y of s.blockIndices){const A=f.dataIndex[y],_=A.first_byte-s.firstByte,C=A.last_byte-s.firstByte;if(f._blocksInProgress.has(y))continue;const P={layerName:f.name,firstByte:_,lastByte:C,pixelFormat:f.pixelFormat,blockIndex:y,blockShape:[A.bands.length].concat(f.bandShape),buffer:f.buffer,codec:A.codec.codec,filters:A.filters.map(R=>R.filter)};f._blocksInProgress.add(y),c.push(P)}return new XR(c,()=>{c.forEach(y=>f._blocksInProgress.delete(y.blockIndex))},(y,A)=>{if(c.forEach(_=>f._blocksInProgress.delete(_.blockIndex)),y)throw y;A.forEach(_=>{this.getLayer(_.layerName).processDecodedData(_)})})}}class YK{constructor({version:s,name:c,units:f,tilesize:y,pixel_format:A,buffer:_,data_index:C},P){if(this.version=s,this.version!==1)throw new mh(`Cannot parse raster layer encoded with MRT version ${s}`);this.name=c,this.units=f,this.tileSize=y,this.buffer=_,this.pixelFormat=XK[A],this.dataIndex=C,this.bandShape=[y+2*_,y+2*_,WR[this.pixelFormat]],this._decodedBlocks=new OK(P?P.cacheSize:5),this._blocksInProgress=new Set}get dimension(){return WR[this.pixelFormat]}get cacheSize(){return this._decodedBlocks.capacity}getBandList(){return this.dataIndex.map(({bands:s})=>s).flat()}processDecodedData(s){const c=s.blockIndex.toString();this._decodedBlocks.get(c)||this._decodedBlocks.put(c,s.data)}getBlockForBand(s){let c=0;switch(typeof s){case"string":for(const[f,y]of this.dataIndex.entries()){for(const[A,_]of y.bands.entries())if(_===s)return{bandIndex:c+A,blockIndex:f,blockBandIndex:A};c+=y.bands.length}break;case"number":for(const[f,y]of this.dataIndex.entries()){if(s>=c&&s<c+y.bands.length)return{bandIndex:s,blockIndex:f,blockBandIndex:s-c};c+=y.bands.length}break;default:throw new mh(`Invalid band \`${JSON.stringify(s)}\`. Expected string or integer.`)}throw new mh(`Band not found: ${JSON.stringify(s)}`)}getDataRange(s){let c=1/0,f=-1/0;const y=[],A=new Set;for(const _ of s){const{blockIndex:C}=this.getBlockForBand(_);if(C<0)throw new mh(`Invalid band: ${JSON.stringify(_)}`);const P=this.dataIndex[C];y.includes(C)||y.push(C),A.add(C),c=Math.min(c,P.first_byte),f=Math.max(f,P.last_byte)}if(A.size>this.cacheSize)throw new mh(`Number of blocks to decode (${A.size}) exceeds cache size (${this.cacheSize}).`);return{layerName:this.name,firstByte:c,lastByte:f,blockIndices:y}}hasBand(s){const{blockIndex:c}=this.getBlockForBand(s);return c>=0}hasDataForBand(s){const{blockIndex:c}=this.getBlockForBand(s);return c>=0&&!!this._decodedBlocks.get(c.toString())}getBandView(s){const{blockIndex:c,blockBandIndex:f}=this.getBlockForBand(s),y=this._decodedBlocks.get(c.toString());if(!y)throw new mh(`Data for band ${JSON.stringify(s)} of layer "${this.name}" not decoded.`);const A=this.dataIndex[c],_=this.bandShape.reduce((R,w)=>R*w,1),C=f*_,P=y.subarray(C,C+_);return{data:P,bytes:new Uint8Array(P.buffer).subarray(P.byteOffset,P.byteOffset+P.byteLength),tileSize:this.tileSize,buffer:this.buffer,pixelFormat:this.pixelFormat,dimension:this.dimension,offset:A.offset!==0?A.offset:A.deprecated_offset,scale:A.scale!==0?A.scale:A.deprecated_scale}}}FS.setPbf=function(d){LS=d};class XR{constructor(s,c,f){this.tasks=s,this._onCancel=c,this._onComplete=f,this._finalized=!1}cancel(){this._finalized||(this._onCancel(),this._finalized=!0)}complete(s,c){this._finalized||(this._onComplete(s,c),this._finalized=!0)}}FS.performDecoding=function(d,s){const c=new Uint8Array(d);return Promise.all(s.tasks.map(f=>{const{layerName:y,firstByte:A,lastByte:_,pixelFormat:C,blockShape:P,blockIndex:R,filters:w,codec:S}=f,F=c.subarray(A,_+1),T=new Uint32Array(P[0]*P[1]*P[2]);let L;if(S!=="gzip_data")throw new mh(`Unhandled codec: ${S}`);return L=function(U,V){if(!globalThis.DecompressionStream&&V==="gzip_data")return Promise.resolve(((K=function(Be){Be[0]==31&&Be[1]==139&&Be[2]==8||td(6,"invalid gzip data");var Ne=Be[3],Ve=10;4&Ne&&(Ve+=2+(Be[10]|Be[11]<<8));for(var Oe=(Ne>>3&1)+(Ne>>4&1);Oe>0;Oe-=!Be[Ve++]);return Ve+(2&Ne)}(ie=U))+8>ie.length&&td(6,"invalid gzip data"),function(Be,Ne,Ve,Oe){var rt=Be.length;if(!rt||Ne.f&&!Ne.l)return Ve||new Ou(0);var je=!Ve,ct=je||Ne.i!=2,yt=Ne.i;je&&(Ve=new Ou(3*rt));var Ct,Et,Pt=function(op){var Mm=Ve.length;if(op>Mm){var K0=new Ou(Math.max(2*Mm,op));K0.set(Ve),Ve=K0}},$t=Ne.f||0,Lt=Ne.p||0,dn=Ne.b||0,xn=Ne.l,tn=Ne.d,Jn=Ne.m,Hn=Ne.n,kn=8*rt;do{if(!xn){$t=ed(Be,Lt,1);var Bn=ed(Be,Lt+1,3);if(Lt+=3,!Bn){var br=Be[(Ur=4+((Lt+7)/8|0))-4]|Be[Ur-3]<<8,Yn=Ur+br;if(Yn>rt){yt&&td(0);break}ct&&Pt(dn+br),Ve.set(Be.subarray(Ur,Yn),dn),Ne.b=dn+=br,Ne.p=Lt=8*Yn,Ne.f=$t;continue}if(Bn==1)xn=jK,tn=$K,Jn=9,Hn=5;else if(Bn==2){var or=ed(Be,Lt,31)+257,Or=ed(Be,Lt+10,15)+4,Zr=or+ed(Be,Lt+5,31)+1;Lt+=14;for(var Vr=new Ou(Zr),Qr=new Ou(19),ii=0;ii<Or;++ii)Qr[VK[ii]]=ed(Be,Lt+3*ii,7);Lt+=3*Or;var ai=IS(Qr),so=(1<<ai)-1,Hi=N0(Qr,ai);for(ii=0;ii<Zr;){var Ur,Di=Hi[ed(Be,Lt,so)];if(Lt+=15&Di,(Ur=Di>>4)<16)Vr[ii++]=Ur;else{var zi=0,To=0;for(Ur==16?(To=3+ed(Be,Lt,3),Lt+=2,zi=Vr[ii-1]):Ur==17?(To=3+ed(Be,Lt,7),Lt+=3):Ur==18&&(To=11+ed(Be,Lt,127),Lt+=7);To--;)Vr[ii++]=zi}}var _s=Vr.subarray(0,or),Os=Vr.subarray(or);Jn=IS(_s),Hn=IS(Os),xn=N0(_s,Jn),tn=N0(Os,Hn)}else td(1);if(Lt>kn){yt&&td(0);break}}ct&&Pt(dn+131072);for(var vs=(1<<Jn)-1,is=(1<<Hn)-1,xa=Lt;;xa=Lt){var Qs=(zi=xn[PS(Be,Lt)&vs])>>4;if((Lt+=15&zi)>kn){yt&&td(0);break}if(zi||td(2),Qs<256)Ve[dn++]=Qs;else{if(Qs==256){xa=Lt,xn=null;break}var tl=Qs-254;Qs>264&&(tl=ed(Be,Lt,(1<<(rd=QR[ii=Qs-257]))-1)+GR[ii],Lt+=rd);var wo=tn[PS(Be,Lt)&is],Mc=wo>>4;if(wo||td(3),Lt+=15&wo,Os=HK[Mc],Mc>3){var rd=HR[Mc];Os+=PS(Be,Lt)&(1<<rd)-1,Lt+=rd}if(Lt>kn){yt&&td(0);break}ct&&Pt(dn+131072);var gh=dn+tl;if(dn<Os){var yh=0-Os,km=Math.min(Os,gh);for(yh+dn<0&&td(3);dn<km;++dn)Ve[dn]=(void 0)[yh+dn]}for(;dn<gh;++dn)Ve[dn]=Ve[dn-Os]}}Ne.l=xn,Ne.p=xa,Ne.b=dn,Ne.f=$t,xn&&($t=1,Ne.m=Jn,Ne.d=tn,Ne.n=Hn)}while(!$t);return dn!=Ve.length&&je?(Ct=Ve,((Et=dn)==null||Et>Ct.length)&&(Et=Ct.length),new Ou(Ct.subarray(0,Et))):Ve.subarray(0,dn)}(ie.subarray(K,-8),{i:2},new Ou((($=ie)[(ee=$.length)-4]|$[ee-3]<<8|$[ee-2]<<16|$[ee-1]<<24)>>>0))));var $,ee,ie,K;const ce=WK[V];if(!ce)throw new Error(`Unhandled codec: ${V}`);const he=new globalThis.DecompressionStream(ce);return new Response(new Blob([U]).stream().pipeThrough(he)).arrayBuffer().then(Be=>new Uint8Array(Be))}(F,S).then(U=>(function(V,$){V.readFields(kK,$)}(new LS(U),T),new ZK[C](T.buffer))),L.then(U=>{for(let V=w.length-1;V>=0;V--)switch(w[V]){case"delta_filter":DK(U,P);break;case"zigzag_filter":UK(U);break;case"bitshuffle_filter":NK(U,C);break;default:throw new mh(`Unhandled filter "${w[V]}"`)}return{layerName:y,blockIndex:R,data:U}}).catch(U=>{throw U})}))},He(XR,"MRTDecodingBatch",{omit:["_onCancel","_onComplete"]});var V0={workerUrl:"",workerClass:null,workerParams:void 0};const RS="mapboxgl_preloaded_worker_pool";class Q0{constructor(){this.active={}}acquire(s){if(!this.workers)for(this.workers=[];this.workers.length<Q0.workerCount;)this.workers.push(V0.workerClass!=null?new V0.workerClass:new self.Worker(V0.workerUrl,V0.workerParams));return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],this.workers&&this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[RS]}numActive(){return Object.keys(this.active).length}}let H0;function gw(){return H0||(H0=new Q0),H0}Q0.workerCount=2;let j0,kS,nd,dy,MS,fy=null;function ZR(){return lo()&&self.worker&&self.worker.dracoUrl?self.worker.dracoUrl:kS||dt.DRACO_URL}function YR(){if(lo()&&self.worker&&self.worker.meshoptUrl)return self.worker.meshoptUrl;if(dy)return dy;const d=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]);if(typeof WebAssembly!="object")throw new Error("WebAssembly not supported, cannot instantiate meshoptimizer");return dy=WebAssembly.validate(d)?dt.MESHOPT_SIMD_URL:dt.MESHOPT_URL,dy}const yw={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},JK={5120:"DT_INT8",5121:"DT_UINT8",5122:"DT_INT16",5123:"DT_UINT16",5125:"DT_UINT32",5126:"DT_FLOAT32"},$0={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function JR(d,s,c){const f=c.json.bufferViews.length,y=c.buffers.length;s.bufferView=f,c.json.bufferViews[f]={buffer:y,byteLength:d.byteLength},c.buffers[y]=d}const OS="KHR_draco_mesh_compression";function eq(d,s){const c=d.extensions&&d.extensions[OS];if(!c)return;const f=new nd.Decoder,y=rk(s,c.bufferView),A=new nd.Mesh;if(!f.DecodeArrayToMesh(y,y.byteLength,A))throw new Error("Failed to decode Draco mesh");const _=s.json.accessors[d.indices],C=yw[_.componentType],P=_.count*C.BYTES_PER_ELEMENT,R=nd._malloc(P);C===Uint16Array?f.GetTrianglesUInt16Array(A,P,R):f.GetTrianglesUInt32Array(A,P,R),JR(nd.memory.buffer.slice(R,R+P),_,s),nd._free(R);for(const w of Object.keys(c.attributes)){const S=f.GetAttributeByUniqueId(A,c.attributes[w]),F=s.json.accessors[d.attributes[w]],T=JK[F.componentType],L=F.count*$0[F.type]*yw[F.componentType].BYTES_PER_ELEMENT,U=nd._malloc(L);f.GetAttributeDataArrayForAllPoints(A,S,nd[T],L,U),JR(nd.memory.buffer.slice(U,U+L),F,s),nd._free(U)}f.destroy(),A.destroy(),delete d.extensions[OS]}const _w="EXT_meshopt_compression";function tq(d,s){if(!d.extensions||!d.extensions[_w])return;const c=d.extensions[_w],f=new Uint8Array(s.buffers[c.buffer],c.byteOffset||0,c.byteLength||0),y=new Uint8Array(c.count*c.byteStride);MS.decodeGltfBuffer(y,c.count,c.byteStride,f,c.mode,c.filter),d.buffer=s.buffers.length,d.byteOffset=0,s.buffers[d.buffer]=y.buffer,delete d.extensions[_w]}const ek=1179937895,tk=new TextDecoder("utf8");function nk(d,s){return new URL(d,s).href}function nq(d,s,c,f){return fetch(nk(d.uri,f)).then(y=>y.arrayBuffer()).then(y=>{s.buffers[c]=y})}function rk(d,s){const c=d.json.bufferViews[s];return new Uint8Array(d.buffers[c.buffer],c.byteOffset||0,c.byteLength)}function rq(d,s,c,f){if(d.uri){const y=nk(d.uri,f);return fetch(y).then(A=>A.blob()).then(A=>createImageBitmap(A)).then(A=>{s.images[c]=A})}if(d.bufferView!==void 0){const y=rk(s,d.bufferView),A=new Blob([y],{type:d.mimeType});return createImageBitmap(A).then(_=>{s.images[c]=_})}}function ik(d,s=0,c){const f={json:null,images:[],buffers:[]};if(new Uint32Array(d,s,1)[0]===ek){const w=new Uint32Array(d,s);let S=2;const F=(w[S++]>>2)-3,T=w[S++]>>2;if(S++,f.json=JSON.parse(tk.decode(w.subarray(S,S+T))),S+=T,S<F){const L=w[S++];S++;const U=s+(S<<2);f.buffers[0]=d.slice(U,U+L)}}else f.json=JSON.parse(tk.decode(new Uint8Array(d,s)));const{buffers:y,images:A,meshes:_,extensionsUsed:C,bufferViews:P}=f.json;let R=Promise.resolve();if(y){const w=[];for(let S=0;S<y.length;S++){const F=y[S];F.uri?w.push(nq(F,f,S,c)):f.buffers[S]||(f.buffers[S]=null)}R=Promise.all(w)}return R.then(()=>{const w=[],S=C&&C.includes(OS),F=C&&C.includes(_w);if(S&&w.push(function(){if(!nd)return j0??(j0=function(T){let L,U=null;function V(){L=new Uint8Array(U.buffer)}function $(){throw new Error("Unexpected Draco error.")}const ee={a:{a:$,d:function(ie,K,ce){return L.copyWithin(ie,K,K+ce)},c:function(ie){const K=L.length,ce=Math.max(ie>>>0,Math.ceil(1.2*K)),he=Math.ceil((ce-K)/65536);try{return U.grow(he),V(),!0}catch{return!1}},b:$}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(T,ee):T.then(ie=>ie.arrayBuffer()).then(ie=>WebAssembly.instantiate(ie,ee))).then(ie=>{const{Rb:K,Qb:ce,P:he,T:Be,X:Ne,Ja:Ve,La:Oe,Qa:rt,Va:je,Wa:ct,eb:yt,jb:Ct,f:Et,e:Pt,yb:$t,zb:Lt,Ab:dn,Bb:xn,Db:tn,Gb:Jn}=ie.instance.exports;U=Pt;const Hn=(()=>{let kn=0,Bn=0,br=0,Yn=0;return or=>{br&&(K(Yn),K(kn),Bn+=br,br=kn=0),kn||(Bn+=128,kn=ce(Bn));const Or=or.length+7&-8;let Zr=kn;Or>=Bn&&(br=Or,Zr=Yn=ce(Or));for(let Vr=0;Vr<or.length;Vr++)L[Zr+Vr]=or[Vr];return Zr}})();return V(),Et(),{memory:Pt,_free:K,_malloc:ce,Mesh:class{constructor(){this.ptr=he()}destroy(){Be(this.ptr)}},Decoder:class{constructor(){this.ptr=Ve()}destroy(){Ct(this.ptr)}DecodeArrayToMesh(kn,Bn,br){const Yn=Hn(kn),or=Oe(this.ptr,Yn,Bn,br.ptr);return!!Ne(or)}GetAttributeByUniqueId(kn,Bn){return{ptr:rt(this.ptr,kn.ptr,Bn)}}GetTrianglesUInt16Array(kn,Bn,br){je(this.ptr,kn.ptr,Bn,br)}GetTrianglesUInt32Array(kn,Bn,br){ct(this.ptr,kn.ptr,Bn,br)}GetAttributeDataArrayForAllPoints(kn,Bn,br,Yn,or){yt(this.ptr,kn.ptr,Bn.ptr,br,Yn,or)}},DT_INT8:$t(),DT_UINT8:Lt(),DT_INT16:dn(),DT_UINT16:xn(),DT_UINT32:tn(),DT_FLOAT32:Jn()}})}(fetch(ZR())),j0.then(T=>{nd=T,j0=void 0}))}()),F&&w.push(function(){if(MS)return;const T=function(L){let U;const V=WebAssembly.instantiateStreaming(L,{}).then(ie=>{U=ie.instance,U.exports.__wasm_call_ctors()}),$={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},ee={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:V,supported:!0,decodeGltfBuffer(ie,K,ce,he,Be,Ne){(function(Ve,Oe,rt,je,ct,yt,Ct){const Et=Ve.exports.sbrk,Pt=je+3&-4,$t=Et(Pt*ct),Lt=Et(yt.length),dn=new Uint8Array(Ve.exports.memory.buffer);dn.set(yt,Lt);const xn=Oe($t,je,ct,Lt,yt.length);if(xn===0&&Ct&&Ct($t,Pt,ct),rt.set(dn.subarray($t,$t+je*ct)),Et($t-Et(0)),xn!==0)throw new Error(`Malformed buffer data: ${xn}`)})(U,U.exports[ee[Be]],ie,K,ce,he,U.exports[$[Ne]])}}}(fetch(YR()));return T.ready.then(()=>{MS=T})}()),A)for(let T=0;T<A.length;T++)w.push(rq(A[T],f,T,c));return(w.length?Promise.all(w):Promise.resolve()).then(()=>{if(S&&_)for(const{primitives:T}of _)for(const L of T)eq(L,f);if(F&&_&&P)for(const T of P)tq(T,f);return f})})}function Rm(d,s){const c=d.json.bufferViews[s.bufferView],f=yw[s.componentType];return new f(d.buffers[c.buffer],(s.byteOffset||0)+(c.byteOffset||0),s.count*(c.byteStride&&c.byteStride!==$0[s.type]*f.BYTES_PER_ELEMENT?c.byteStride/f.BYTES_PER_ELEMENT:$0[s.type]))}function DS(d,s,c,f){const y=yw[s.componentType],A=function(w){switch(w){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:return 1}}(y),_=d.json.bufferViews[s.bufferView],C=_.byteStride?_.byteStride/y.BYTES_PER_ELEMENT:$0[s.type],P=c.float32,R=P.length/c.capacity;for(let w=0,S=0;w<s.count*C;w+=C,S+=R)for(let F=0;F<R;F++)P[S+F]=f[w+F]*A;c._trim()}function iq(d,s,c){const f=d.indices,y=d.attributes,A={};A.indexArray=new ea;const _=s.json.accessors[f],C=_.count/3;A.indexArray.reserve(C);const P=Rm(s,_);for(let F=0;F<C;F++)A.indexArray.emplaceBack(P[3*F],P[3*F+1],P[3*F+2]);A.indexArray._trim(),A.vertexArray=new Fu;const R=s.json.accessors[y.POSITION];A.vertexArray.reserve(R.count);const w=Rm(s,R);for(let F=0;F<R.count;F++)A.vertexArray.emplaceBack(w[3*F],w[3*F+1],w[3*F+2]);if(A.vertexArray._trim(),A.aabb=new bo(R.min,R.max),A.centroid=function(F,T){const L=[0,0,0],U=F.length;if(U>0){for(let V=0;V<U;V++){const $=3*F[V];L[0]+=T[$],L[1]+=T[$+1],L[2]+=T[$+2]}L[0]/=U,L[1]/=U,L[2]/=U}return L}(P,w),y.COLOR_0!==void 0){const F=s.json.accessors[y.COLOR_0],T=$0[F.type],L=Rm(s,F);A.colorArray=T===3?new Fu:new Sl,A.colorArray.resize(F.count),DS(s,F,A.colorArray,L)}if(y.NORMAL!==void 0){A.normalArray=new Fu;const F=s.json.accessors[y.NORMAL];A.normalArray.resize(F.count);const T=Rm(s,F);DS(s,F,A.normalArray,T)}if(y.TEXCOORD_0!==void 0&&c.length>0){A.texcoordArray=new Jl;const F=s.json.accessors[y.TEXCOORD_0];A.texcoordArray.resize(F.count);const T=Rm(s,F);DS(s,F,A.texcoordArray,T)}if(y._FEATURE_ID_RGBA4444!==void 0){const F=s.json.accessors[y._FEATURE_ID_RGBA4444];s.json.extensionsUsed&&s.json.extensionsUsed.includes("EXT_meshopt_compression")&&(A.featureData=Rm(s,F))}y._FEATURE_RGBA4444!==void 0&&(A.featureData=new Uint32Array(Rm(s,s.json.accessors[y._FEATURE_RGBA4444]).buffer));const S=d.material;return A.material=function(F,T){const{emissiveFactor:L=[0,0,0],alphaMode:U="OPAQUE",alphaCutoff:V=.5,normalTexture:$,occlusionTexture:ee,emissiveTexture:ie,doubleSided:K}=F,{baseColorFactor:ce=[1,1,1,1],metallicFactor:he=1,roughnessFactor:Be=1,baseColorTexture:Ne,metallicRoughnessTexture:Ve}=F.pbrMetallicRoughness||{},Oe=ee?T[ee.index]:void 0;if(ee&&ee.extensions&&ee.extensions.KHR_texture_transform&&Oe){const rt=ee.extensions.KHR_texture_transform;Oe.offsetScale=[rt.offset[0],rt.offset[1],rt.scale[0],rt.scale[1]]}return{pbrMetallicRoughness:{baseColorFactor:new _i(...ce),metallicFactor:he,roughnessFactor:Be,baseColorTexture:Ne?T[Ne.index]:void 0,metallicRoughnessTexture:Ve?T[Ve.index]:void 0},doubleSided:K,emissiveFactor:L,alphaMode:U,alphaCutoff:V,normalTexture:$?T[$.index]:void 0,occlusionTexture:Oe,emissionTexture:ie?T[ie.index]:void 0,defined:F.defined===void 0}}(S!==void 0?s.json.materials[S]:{defined:!1},c),A}function ok(d,s,c){const{matrix:f,rotation:y,translation:A,scale:_,mesh:C,extras:P,children:R}=d,w={};if(w.matrix=f||De.mat4.fromRotationTranslationScale([],y||[0,0,0,1],A||[0,0,0],_||[1,1,1]),C!==void 0){w.meshes=c[C];const S=w.anchor=[0,0];for(const F of w.meshes){const{min:T,max:L}=F.aabb;S[0]+=T[0]+L[0],S[1]+=T[1]+L[1]}S[0]=Math.floor(S[0]/w.meshes.length/2),S[1]=Math.floor(S[1]/w.meshes.length/2)}if(P&&(P.id&&(w.id=P.id),P.lights&&(w.lights=function(S){if(!S.length)return[];const F=function($){const ee=atob($),ie=new Uint8Array(ee.length);for(let K=0;K<ee.length;K++)ie[K]=ee.codePointAt(K);return ie}(S),T=[],L=F.length/24,U=new Uint16Array(F.buffer),V=new Float32Array(F.buffer);for(let $=0;$<L;$++){const ee=U[2*$*6]/30,ie=U[2*$*6+1]/30,K=U[2*$*6+10]/100,ce=V[6*$+1],he=V[6*$+2],Be=V[6*$+3],Ne=V[6*$+4],Ve=Be-ce,Oe=Ne-he,rt=Math.hypot(Ve,Oe);T.push({pos:[ce+.5*Ve,he+.5*Oe,ie],normal:[Oe/rt,-Ve/rt,0],width:rt,height:ee,depth:K,points:[ce,he,Be,Ne]})}return T}(P.lights))),R){const S=[];for(const F of R)S.push(ok(s.json.nodes[F],s,c));w.children=S}return w}function oq(d){if(d.vertices.length===0||d.indices.length===0)return null;const s=new GB(d.vertices,d.indices,8,256),[c,f]=[s.min.clone(),s.max.clone()];return{vertices:d.vertices,indices:d.indices,grid:s,min:c,max:f}}function sq(d){if(!d.extras||!d.extras.ground)return null;const s=d.extras.ground;if(!s||!Array.isArray(s)||s.length===0)return null;const c=s[0];if(!c||!Array.isArray(c)||c.length===0)return null;const f=[];for(const _ of c){if(!Array.isArray(_)||_.length!==2)continue;const C=_[0],P=_[1];typeof C=="number"&&typeof P=="number"&&f.push(new Fe(C,P))}if(f.length<3)return null;f.length>1&&f[f.length-1].equals(f[0])&&f.pop();let y=0;for(let _=0;_<f.length;_++){const C=f[_],P=f[(_+1)%f.length],R=f[(_+2)%f.length];y+=(C.x-P.x)*(R.y-P.y)-(R.x-P.x)*(C.y-P.y)}y>0&&f.reverse();const A=g0(f.flatMap(_=>[_.x,_.y]),[]);return A.length===0?null:{vertices:f,indices:A}}function aq(d,s){const c=[],f=[];let y=0;const A=[];for(const _ of d){y=c.length;const C=_.vertexArray.float32,P=_.indexArray.uint16;for(let R=0;R<_.vertexArray.length;R++)A[0]=C[3*R+0],A[1]=C[3*R+1],A[2]=C[3*R+2],De.vec3.transformMat4(A,A,s),c.push(new Fe(A[0],A[1]));for(let R=0;R<3*_.indexArray.length;R++)f.push(P[R]+y)}if(f.length%3!=0)return null;for(let _=0;_<f.length;_+=3){const C=c[f[_+0]],P=c[f[_+1]],R=c[f[_+2]];(C.x-P.x)*(R.y-P.y)-(R.x-P.x)*(C.y-P.y)>0&&([f[_+1],f[_+2]]=[f[_+2],f[_+1]])}return{vertices:c,indices:f}}function sk(d){const s=function(P,R){const w=[],S=WebGL2RenderingContext;if(P.json.textures)for(const F of P.json.textures){const T={magFilter:S.LINEAR,minFilter:S.NEAREST,wrapS:S.REPEAT,wrapT:S.REPEAT};F.sampler!==void 0&&Object.assign(T,P.json.samplers[F.sampler]),w.push({image:R[F.source],sampler:T,uploaded:!1})}return w}(d,d.images),c=function(P,R){const w=[];for(const S of P.json.meshes){const F=[];for(const T of S.primitives)F.push(iq(T,P,R));w.push(F)}return w}(d,s),{scenes:f,scene:y,nodes:A}=d.json,_=f?f[y||0].nodes:A,C=[];for(const P of _)C.push(ok(A[P],d,c));return function(P,R,w){const S={},F=new Set;for(let T=0;T<P.length;T++){const L=w[R[T]];if(!L.extras)continue;const U=L.extras["mapbox:footprint:version"],V=L.extras["mapbox:footprint:id"];(U||V)&&F.add(T),U==="1.0.0"&&V&&(S[V]=T)}for(let T=0;T<P.length;T++){if(F.has(T))continue;const L=P[T],U=w[R[T]];if(!U.extras)continue;let V=null;L.id in S&&(V=aq(P[S[L.id]].meshes,L.matrix)),V||(V=sq(U)),V&&(L.footprint=oq(V))}if(F.size>0){const T=Array.from(F.values()).sort((L,U)=>L-U);for(let L=T.length-1;L>=0;L--)P.splice(T[L],1)}}(C,_,d.json.nodes),C}function lq(d){d.heightmap=new Float32Array(4096),d.heightmap.fill(-1);const s=d.vertexArray.float32,c=d.aabb.min[0]-1,f=d.aabb.min[1]-1,y=Lm/(d.aabb.max[0]-c+2),A=Lm/(d.aabb.max[1]-f+2);for(let _=0;_<s.length;_+=3){const C=s[_+2],P=(s[_+0]-c)*y|0,R=(s[_+1]-f)*A|0;C>d.heightmap[R*Lm+P]&&(d.heightmap[R*Lm+P]=C)}}function cq(d,s){const c={};c.indexArray=new ea,c.indexArray.reserve(4*d.length),c.vertexArray=new Fu,c.vertexArray.reserve(10*d.length),c.colorArray=new Sl,c.vertexArray.reserve(10*d.length);let f=0;for(const _ of d){const C=Math.min(10,Math.max(4,1.3*_.height))*s,P=[-_.normal[1],_.normal[0],0],R=Math.min(.29,.1*_.width/_.depth),w=_.width-2*_.depth*s*(R+.01),S=De.vec3.scaleAndAdd([],_.pos,P,w/2),F=De.vec3.scaleAndAdd([],_.pos,P,-w/2),T=[S[0],S[1],S[2]+_.height],L=[F[0],F[1],F[2]+_.height],U=De.vec3.scaleAndAdd([],_.normal,P,R);De.vec3.scale(U,U,C);const V=De.vec3.scaleAndAdd([],_.normal,P,-R);De.vec3.scale(V,V,C),De.vec3.add(U,S,U),De.vec3.add(V,F,V),S[2]+=.1,F[2]+=.1,c.vertexArray.emplaceBack(U[0],U[1],U[2]),c.vertexArray.emplaceBack(V[0],V[1],V[2]),c.vertexArray.emplaceBack(S[0],S[1],S[2]),c.vertexArray.emplaceBack(F[0],F[1],F[2]),c.vertexArray.emplaceBack(T[0],T[1],T[2]),c.vertexArray.emplaceBack(L[0],L[1],L[2]),c.vertexArray.emplaceBack(S[0],S[1],S[2]),c.vertexArray.emplaceBack(F[0],F[1],F[2]),c.vertexArray.emplaceBack(U[0],U[1],U[2]),c.vertexArray.emplaceBack(V[0],V[1],V[2]);const $=w/C/2;c.colorArray.emplaceBack(-$-R,-1,$,.8),c.colorArray.emplaceBack($+R,-1,$,.8),c.colorArray.emplaceBack(-$,0,$,1.3),c.colorArray.emplaceBack($,0,$,1.3),c.colorArray.emplaceBack($+R,-.8,$,.7),c.colorArray.emplaceBack($+R,-.8,$,.7),c.colorArray.emplaceBack(0,0,$,1.3),c.colorArray.emplaceBack(0,0,$,1.3),c.colorArray.emplaceBack($+R,-1.2,$,.8),c.colorArray.emplaceBack($+R,-1.2,$,.8),c.indexArray.emplaceBack(6+f,4+f,8+f),c.indexArray.emplaceBack(7+f,9+f,5+f),c.indexArray.emplaceBack(0+f,1+f,2+f),c.indexArray.emplaceBack(1+f,3+f,2+f),f+=10}const y={defined:!0,emissiveFactor:[0,0,0]},A={};return A.baseColorFactor=_i.white,y.pbrMetallicRoughness=A,c.material=y,c.aabb=new bo([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),c}class ak{constructor(s){this._stringToNumber={},this._numberToString=[];for(let c=0;c<s.length;c++){const f=s[c];this._stringToNumber[f]=c,this._numberToString[c]=f}}encode(s){return this._stringToNumber[s]}decode(s){return this._numberToString[s]}}const uq=["id","tile","layer","source","sourceLayer","state"];class lk{constructor(s,c,f,y,A){this.type="Feature",this._vectorTileFeature=s,this._z=c,this._x=f,this._y=y,this.properties=s.properties,this.id=A}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(s){this._geometry=s}toJSON(){const s={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};for(const c of uq)this[c]!==void 0&&(s[c]=this[c]);return s}}class ck{constructor(s,c){this.tileID=s,this.x=s.canonical.x,this.y=s.canonical.y,this.z=s.canonical.z,this.grid=new Ze(Nn,16,0),this.featureIndexArray=new Bb,this.promoteId=c,this.is3DTile=!1}insert(s,c,f,y,A,_=0,C=0){const P=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,y,A,_);const R=this.grid;for(let w=0;w<c.length;w++){const S=c[w],F=[1/0,1/0,-1/0,-1/0];for(let T=0;T<S.length;T++){const L=S[T];F[0]=Math.min(F[0],L.x),F[1]=Math.min(F[1],L.y),F[2]=Math.max(F[2],L.x),F[3]=Math.max(F[3],L.y)}C!==0&&(F[0]-=C,F[1]-=C,F[2]+=C,F[3]+=C),F[0]<Nn&&F[1]<Nn&&F[2]>=0&&F[3]>=0&&R.insert(P,F[0],F[1],F[2],F[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new ny.VectorTile(new qb(this.rawTileData)).layers,this.sourceLayerCoder=new ak(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const s in this.vtLayers)this.vtFeatures[s]=[]}return this.vtLayers}query(s,c,f,y){this.loadVTLayers();const A=s.params||{},_=Yl(A.filter),C=s.tileResult,P=s.transform,R=C.bufferedTilespaceBounds,w=this.grid.query(R.min.x,R.min.y,R.max.x,R.max.y,(L,U,V,$)=>tu(C.bufferedTilespaceGeometry,L,U,V,$));w.sort(hq);let S=null;P.elevation&&w.length>0&&(S=cy.create(P.elevation,this.tileID));const F={};let T;for(let L=0;L<w.length;L++){const U=w[L];if(U===T)continue;T=U;const V=this.featureIndexArray.get(U);let $=null;if(this.is3DTile){const ee=this.bucketLayerIDs[0][0],ie=c[ee];if(ie.type!=="model")continue;const{queryFeature:K,intersectionZ:ce}=ie.queryIntersectsMatchingFeature(C,V.featureIndex,_,P);K&&this.appendToResult(F,ee,V.featureIndex,K,ce)}else this.loadMatchingFeature(F,V,_,A.layers,A.availableImages,c,f,y,(ee,ie,K,ce=0)=>($||($=Rn(ee,this.tileID.canonical,s.tileTransform)),ie.queryIntersectsFeature(C,ee,K,$,this.z,s.transform,s.pixelPosMatrix,S,ce)))}return F}loadMatchingFeature(s,c,f,y,A,_,C,P,R){const{featureIndex:w,bucketIndex:S,sourceLayerIndex:F,layoutVertexArrayOffset:T}=c,L=this.bucketLayerIDs[S];if(y&&!function(ee,ie){for(let K=0;K<ee.length;K++)if(ie.indexOf(ee[K])>=0)return!0;return!1}(y,L))return;const U=this.sourceLayerCoder.decode(F),V=this.vtLayers[U].feature(w);if(f.needGeometry){const ee=Mn(V,!0);if(!f.filter(new Oi(this.tileID.overscaledZ),ee,this.tileID.canonical))return}else if(!f.filter(new Oi(this.tileID.overscaledZ),V))return;const $=this.getId(V,U);for(let ee=0;ee<L.length;ee++){const ie=L[ee];if(y&&y.indexOf(ie)<0)continue;const K=_[ie];if(!K)continue;let ce={};$!==void 0&&P&&(ce=P.getState(K.sourceLayer||"_geojsonTileLayer",$));const he=!R||R(V,K,ce,T);if(!he)continue;const Be=new lk(V,this.z,this.x,this.y,$),Ne=lr({},C[ie]);Ne.paint=uk(Ne.paint,K.paint,V,ce,A),Ne.layout=uk(Ne.layout,K.layout,V,ce,A),Be.layer=Ne,this.appendToResult(s,ie,w,Be,he)}}appendToResult(s,c,f,y,A){let _=s[c];_===void 0&&(_=s[c]=[]),_.push({featureIndex:f,feature:y,intersectionZ:A})}lookupSymbolFeatures(s,c,f,y,A,_,C,P){const R={};this.loadVTLayers();const w=Yl(A);for(const S of s)this.loadMatchingFeature(R,{bucketIndex:f,sourceLayerIndex:y,featureIndex:S,layoutVertexArrayOffset:0},w,_,C,P,c);return R}loadFeature(s){const{featureIndex:c,sourceLayerIndex:f}=s;this.loadVTLayers();const y=this.sourceLayerCoder.decode(f),A=this.vtFeatures[y];if(A[c])return A[c];const _=this.vtLayers[y].feature(c);return A[c]=_,_}hasLayer(s){for(const c of this.bucketLayerIDs)for(const f of c)if(s===f)return!0;return!1}getId(s,c){let f=s.id;if(this.promoteId){const y=typeof this.promoteId=="string"?this.promoteId:this.promoteId[c];y!=null&&(f=s.properties[y]),typeof f=="boolean"&&(f=Number(f))}return f}}function uk(d,s,c,f,y){return Fi(d,(A,_)=>{const C=s instanceof Ja?s.get(_):null;return C&&C.evaluate?C.evaluate(c,f,y):C})}function hq(d,s){return s-d}He(ck,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});const hk=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class US{static from(s){if(!(s instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[c,f]=new Uint8Array(s,0,2);if(c!==219)throw new Error("Data does not appear to be in a KDBush format.");const y=f>>4;if(y!==1)throw new Error(`Got v${y} data when expected v1.`);const A=hk[15&f];if(!A)throw new Error("Unrecognized array type.");const[_]=new Uint16Array(s,2,1),[C]=new Uint32Array(s,4,1);return new US(C,_,A,s)}constructor(s,c=64,f=Float64Array,y){if(isNaN(s)||s<0)throw new Error(`Unpexpected numItems value: ${s}.`);this.numItems=+s,this.nodeSize=Math.min(Math.max(+c,2),65535),this.ArrayType=f,this.IndexArrayType=s<65536?Uint16Array:Uint32Array;const A=hk.indexOf(this.ArrayType),_=2*s*this.ArrayType.BYTES_PER_ELEMENT,C=s*this.IndexArrayType.BYTES_PER_ELEMENT,P=(8-C%8)%8;if(A<0)throw new Error(`Unexpected typed array class: ${f}.`);y&&y instanceof ArrayBuffer?(this.data=y,this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+C+P,2*s),this._pos=2*s,this._finished=!0):(this.data=new ArrayBuffer(8+_+C+P),this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+C+P,2*s),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+A]),new Uint16Array(this.data,2,1)[0]=c,new Uint32Array(this.data,4,1)[0]=s)}add(s,c){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=s,this.coords[this._pos++]=c,f}finish(){const s=this._pos>>1;if(s!==this.numItems)throw new Error(`Added ${s} items when expected ${this.numItems}.`);return NS(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(s,c,f,y){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:A,coords:_,nodeSize:C}=this,P=[0,A.length-1,0],R=[];for(;P.length;){const w=P.pop()||0,S=P.pop()||0,F=P.pop()||0;if(S-F<=C){for(let V=F;V<=S;V++){const $=_[2*V],ee=_[2*V+1];$>=s&&$<=f&&ee>=c&&ee<=y&&R.push(A[V])}continue}const T=F+S>>1,L=_[2*T],U=_[2*T+1];L>=s&&L<=f&&U>=c&&U<=y&&R.push(A[T]),(w===0?s<=L:c<=U)&&(P.push(F),P.push(T-1),P.push(1-w)),(w===0?f>=L:y>=U)&&(P.push(T+1),P.push(S),P.push(1-w))}return R}within(s,c,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:y,coords:A,nodeSize:_}=this,C=[0,y.length-1,0],P=[],R=f*f;for(;C.length;){const w=C.pop()||0,S=C.pop()||0,F=C.pop()||0;if(S-F<=_){for(let V=F;V<=S;V++)fk(A[2*V],A[2*V+1],s,c)<=R&&P.push(y[V]);continue}const T=F+S>>1,L=A[2*T],U=A[2*T+1];fk(L,U,s,c)<=R&&P.push(y[T]),(w===0?s-f<=L:c-f<=U)&&(C.push(F),C.push(T-1),C.push(1-w)),(w===0?s+f>=L:c+f>=U)&&(C.push(T+1),C.push(S),C.push(1-w))}return P}}function NS(d,s,c,f,y,A){if(y-f<=c)return;const _=f+y>>1;dk(d,s,_,f,y,A),NS(d,s,c,f,_-1,1-A),NS(d,s,c,_+1,y,1-A)}function dk(d,s,c,f,y,A){for(;y>f;){if(y-f>600){const R=y-f+1,w=c-f+1,S=Math.log(R),F=.5*Math.exp(2*S/3),T=.5*Math.sqrt(S*F*(R-F)/R)*(w-R/2<0?-1:1);dk(d,s,c,Math.max(f,Math.floor(c-w*F/R+T)),Math.min(y,Math.floor(c+(R-w)*F/R+T)),A)}const _=s[2*c+A];let C=f,P=y;for(G0(d,s,f,c),s[2*y+A]>_&&G0(d,s,f,y);C<P;){for(G0(d,s,C,P),C++,P--;s[2*C+A]<_;)C++;for(;s[2*P+A]>_;)P--}s[2*f+A]===_?G0(d,s,f,P):(P++,G0(d,s,P,y)),P<=c&&(f=P+1),c<=P&&(y=P-1)}}function G0(d,s,c,f){zS(d,c,f),zS(s,2*c,2*f),zS(s,2*c+1,2*f+1)}function zS(d,s,c){const f=d[s];d[s]=d[c],d[c]=f}function fk(d,s,c,f){const y=d-c,A=s-f;return y*y+A*A}i.$=dl,i.A=class extends fw{},i.B=ll,i.C=_a,i.D=es,i.E=wl,i.F=xm,i.G=ah,i.H=wm,i.I=cS,i.J=VA,i.K=Fd,i.L=H,i.M=Mf,i.N=Wa,i.O=Eo,i.P=Fe,i.Q=Ua,i.R=Ql,i.S=gs,i.T=bS,i.U=Ko,i.V=fw,i.W=HA,i.X=Rf,i.Y=Ff,i.Z=function(d){const s=d.value;let c=[];if(!s)return c;const f=ll(s);return f!=="string"?(c=c.concat([new fw(d.key,s,`string expected, "${f}" found`)]),c):(xR(s,!0)||(c=c.concat([new fw(d.key,s,`invalid url "${s}"`)])),c)},i._=Nt,i.a=function(d){return dt.API_CDN_URL_REGEX.test(d)},i.a$=Fc,i.a0=Ji,i.a1=Tn,i.a2=class{constructor(d){this.specification=d}possiblyEvaluate(d,s){return ns(d.expression.evaluate(s))}interpolate(d,s,c){return{x:$n(d.x,s.x,c),y:$n(d.y,s.y,c),z:$n(d.z,s.z,c),azimuthal:$n(d.azimuthal,s.azimuthal,c),polar:$n(d.polar,s.polar,c)}}},i.a3=Oi,i.a4=D,i.a5=Rt,i.a6=De,i.a7=er,i.a8=Ja,i.a9=ZA,i.aA=vo,i.aB=uR,i.aC=mR,i.aD=cR,i.aE=function(d,s){const c=document.createElement("video");c.muted=!0,c.onloadstart=function(){s(null,c)};for(let f=0;f<d.length;f++){const y=document.createElement("source");sa(d[f])||(c.crossOrigin="Anonymous"),y.src=d[f],c.appendChild(y)}return{cancel:()=>{}}},i.aF=lw,i.aG=function(d){return fetch(d).then(s=>s.arrayBuffer()).then(s=>ik(s,0,d))},i.aH=sk,i.aI=class{constructor(d,s,c,f){this.id=d,this.position=s!=null?new re(s[0],s[1]):new re(0,0),this.orientation=c??[0,0,0],this.nodes=f,this.uploaded=!1,this.aabb=new bo([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(d,s){if(De.mat4.multiply(d.matrix,s,d.matrix),d.meshes)for(const c of d.meshes){const f=bo.applyTransformFast(c.aabb,d.matrix);this.aabb.encapsulate(f)}if(d.children)for(const c of d.children)this._applyTransformations(c,d.matrix)}computeBoundsAndApplyParent(){const d=De.mat4.identity([]);for(const s of this.nodes)this._applyTransformations(s,d)}computeModelMatrix(d,s,c,f,y,A,_=!1){TR(this.matrix,this,d.transform,this.position,s,c,f,y,A,_)}upload(d){if(!this.uploaded){for(const s of this.nodes)BS(s,d);for(const s of this.nodes)Aw(s);this.uploaded=!0}}destroy(){for(const d of this.nodes)SS(d)}},i.aJ=xi,i.aK=L0,i.aL=Xe,i.aM=qe,i.aN=Lu,i.aO=ea,i.aP=pr,i.aQ=zd,i.aR=sw,i.aS=function(){io.isLoading()||io.isLoaded()||Es()!=="deferred"||za()},i.aT=Yl,i.aU=Mn,i.aV=lk,i.aW=Gr,i.aX=tS,i.aY=$B,i.aZ=Rn,i.a_=Lc,i.aa=$n,i.ab=Nn,i.ac=sl,i.ad=class{constructor(d){this.specification=d}possiblyEvaluate(d,s){return function([c,f]){const y=ns([1,c,f]);return{x:y.x,y:y.y,z:y.z}}(d.expression.evaluate(s))}interpolate(d,s,c){return{x:$n(d.x,s.x,c),y:$n(d.y,s.y,c),z:$n(d.z,s.z,c)}}},i.ae=function(d,s,c=0,f=!0){const y=new Fe(c,c),A=d.sub(y),_=s.add(y),C=[A,new Fe(_.x,A.y),_,new Fe(A.x,_.y)];return f&&C.push(A.clone()),C},i.af=function(d,s){const c=[];for(let f=0;f<d.length;f++){const y=ar(f-1,-1,d.length-1),A=ar(f+1,-1,d.length-1),_=d[f],C=d[A],P=d[y].sub(_).unit(),R=C.sub(_).unit(),w=R.angleWithSep(P.x,P.y),S=P.add(R).unit().mult(-1*s/Math.sin(w/2));c.push(_.add(S))}return c},i.ag=WF,i.ah=tu,i.ai=function(d,s,c=0){return De.vec3.fromValues(((s.x-c)*d.scale-d.x)*Nn,(s.y*d.scale-d.y)*Nn,ut(s.z,s.y))},i.aj=Zh,i.ak=pF,i.al=function(d){let s=1/0,c=1/0,f=-1/0,y=-1/0;for(const A of d)s=Math.min(s,A.x),c=Math.min(c,A.y),f=Math.max(f,A.x),y=Math.max(y,A.y);return{min:new Fe(s,c),max:new Fe(f,y)}},i.am=ze,i.an=So,i.ao=wn,i.ap=_n,i.aq=a,i.ar=function(d,s){const c={};for(let f=0;f<s.length;f++){const y=s[f];y in d&&(c[y]=d[y])}return c},i.as=de,i.at=Qe,i.au=class{constructor(d){this.entries={},this.scheduler=d}request(d,s,c,f){const y=this.entries[d]=this.entries[d]||{callbacks:[]};if(y.result){const[A,_]=y.result;return this.scheduler?this.scheduler.add(()=>{f(A,_)},s):f(A,_),()=>{}}return y.callbacks.push(f),y.cancel||(y.cancel=c((A,_)=>{y.result=[A,_];for(const C of y.callbacks)this.scheduler?this.scheduler.add(()=>{C(A,_)},s):C(A,_);setTimeout(()=>delete this.entries[d],3e3)})),()=>{y.result||(y.callbacks=y.callbacks.filter(A=>A!==f),y.callbacks.length||(y.cancel(),delete this.entries[d]))}}},i.av=Md,i.aw=function(d,s,c){const f=JSON.stringify(d.request);return d.data&&(this.deduped.entries[f]={result:[null,d.data]}),this.deduped.request(f,{type:"parseTile",isSymbolTile:d.isSymbolTile,zoom:d.tileZoom},y=>{const A=bc(d.request,(_,C,P,R)=>{_?y(_):C&&y(null,{vectorTile:c?void 0:new ny.VectorTile(new qb(C)),rawData:C,cacheControl:P,expires:R})});return()=>{A.cancel(),y()}},s)},i.ax=function(d){Co++,Co>hi&&(d.getActor().send("enforceCacheSizeLimit",Br),Co=0)},i.ay=zn,i.az=function(d){return d<=1?1:Math.pow(2,Math.floor(Math.log(d)/Math.LN2))},i.b=function(d){return dt.API_FONTS_REGEX.test(d)},i.b$=function(d){const{x:s,y:c}=d.point,{lng:f,lat:y}=d._center;return aL(s,c,d.worldSize,f,y)},i.b0=ru,i.b1=hs,i.b2=g0,i.b3=yS,i.b4=function(d,s){const c=ZA(s.zoom);if(c===0)return Hd(d);const f=kb(d),y=OB(f),A=ze(f.getWest())*s.worldSize,_=ze(f.getEast())*s.worldSize,C=Qe(f.getNorth())*s.worldSize,P=Qe(f.getSouth())*s.worldSize,R=[A,C,0],w=[_,C,0],S=[A,P,0],F=[_,P,0],T=De.mat4.invert([],s.globeMatrix);return De.vec3.transformMat4(R,R,T),De.vec3.transformMat4(w,w,T),De.vec3.transformMat4(S,S,T),De.vec3.transformMat4(F,F,T),y[0]=qf(y[0],S,c),y[1]=qf(y[1],F,c),y[2]=qf(y[2],w,c),y[3]=qf(y[3],R,c),bo.fromPoints(y)},i.b5=Ob,i.b6=p0,i.b7=qf,i.b8=Nf,i.b9=tc,i.bA=ar,i.bB=zt,i.bC=Zo,i.bD=Ue,i.bE=function(d,s,c){d[4*s+0]=c[0],d[4*s+1]=c[1],d[4*s+2]=c[2],d[4*s+3]=c[3]},i.bF=Sm,i.bG=dh,i.bH=h0,i.bI=fl,i.bJ=$f,i.bK=re,i.bL=eR,i.bM=na,i.bN=XA,i.bO=yR,i.bP=Aa,i.bQ=iL,i.bR=function(d,s,c,f,y,A,_,C,P){if(P.name==="globe")return iL(d,s,new Aa(c,f,y),!1);const R=L0({z:c,x:f,y},P);return new bo([(A+R.x/R.scale)*s,s*(R.y/R.scale),_],[(A+R.x2/R.scale)*s,s*(R.y2/R.scale),C])},i.bS=function(d,s,c){let f=0;for(let y=0;y<2;++y)d[y]>0&&(f+=(d[y]-0)*(d[y]-0)),s[y]<0&&(f+=(0-s[y])*(0-s[y]));return f},i.bT=it,i.bU=g,i.bV=function(d){const s=De.mat4.identity(new Float64Array(16));De.mat4.multiply(s,d.pixelMatrix,d.globeMatrix);const c=[0,k,0],f=[0,z,0];return De.vec3.transformMat4(c,c,s),De.vec3.transformMat4(f,f,s),[c[0]>0&&c[0]<=d.width&&c[1]>0&&c[1]<=d.height&&!NB(d,new re(d.center.lat,90)),f[0]>0&&f[0]<=d.width&&f[1]>0&&f[1]<=d.height&&!NB(d,new re(d.center.lat,-90))]},i.bW=function(d,s){const{scale:c}=d.tileTransform,f=c*Nn/(d.tileSize*Math.pow(2,s.zoom-d.tileID.overscaledZ+d.tileID.canonical.z));return De.mat2.scale(new Float32Array(4),s.inverseAdjustmentMatrix,[f,f])},i.bX=hw,i.bY=gR,i.bZ=function(d){const s=gR(d,!0);return De.mat2.invert([],[s[0],s[1],s[4],s[5]])},i.b_=Qd,i.ba=FS,i.bb=qb,i.bc=bc,i.bd=function(d){const s=[];for(const c in d)s.push(d[c]);return s},i.be=function(d,s){const c=[];for(const f in d)f in s||c.push(f);return c},i.bf=Fr,i.bg=["type","source","source-layer","minzoom","maxzoom","filter","layout"],i.bh=Re,i.bi=function(d,s){const{x:c,y:f}=d.point,y=aL(c,f,d.worldSize/d._pixelsPerMercatorPixel,0,0);return De.mat4.multiply(y,y,DB(Hd(s)))},i.bj=ry,i.bk=Mu,i.bl=Kb,i.bm=function(d,s,c,f,y){const A=5*s+2;d.float32[A+0]=c,d.float32[A+1]=f,d.float32[A+2]=y},i.bn=ow,i.bo=UF,i.bp=Qn,i.bq=el,i.br=zL,i.bs=wR,i.bt=$L,i.bu=GL,i.bv=dS,i.bw=$F,i.bx=lS,i.by=US,i.bz=_i,i.c=wt,i.c$=Pl,i.c0=Jt,i.c1=Il,i.c2=u,i.c3=function(d){const s=Math.round((d+45+360)%360/90)%4;return gn[s]},i.c4=45,i.c5=xe,i.c6=Jg,i.c7=function(d,s,c){const f=Math.sqrt(d*d+s*s+c*c),y=f>0?Math.acos(c/f)*rn:0;let A=d!==0||s!==0?Math.atan2(-s,-d)*rn+90:0;return A<0&&(A+=360),[f,A,y]},i.c8=At,i.c9=bo,i.cA=function(d){const s=it-5;d=_n(d,-s,s)/s*90;const c=Math.pow(Math.abs(Math.sin(zt(d))),3);return Math.round(c*(B.length-1))},i.cB=function(d,s,c,f){const y=s.getNorth(),A=s.getSouth(),_=s.getWest(),C=s.getEast(),P=1<<d.z,R=C-_,w=y-A,S=R/x,F=-w/B[c],T=[0,S,0,F,0,0,y,_,0];if(d.z>0){const L=180/f;De.mat3.multiply(T,T,[L/R+1,0,0,0,L/w+1,0,-.5*L/S,.5*L/F,1])}return T[2]=P,T[5]=d.x,T[8]=d.y,T},i.cC=Hd,i.cD=function(d,s,c){const f=De.mat4.identity(new Float64Array(16)),y=(s/(1<<d)-.5)*Math.PI*2;return De.mat4.rotateY(f,c.globeMatrix,y),Float32Array.from(f)},i.cE=class{isDataAvailableAtPoint(d){const s=this._source();if(this.isUsingMockSource()||!s||d.y<0||d.y>1)return!1;const c=s.getSource().maxzoom,f=1<<c,y=Math.floor(d.x),A=Math.floor((d.x-y)*f),_=Math.floor(d.y*f),C=this.findDEMTileFor(new vo(c,y,c,A,_));return!(!C||!C.dem)}getAtPointOrZero(d,s=0){return this.getAtPoint(d,s)||0}getAtPoint(d,s,c=!0){if(this.isUsingMockSource())return null;s==null&&(s=null);const f=this._source();if(!f||d.y<0||d.y>1)return s;const y=f.getSource().maxzoom,A=1<<y,_=Math.floor(d.x),C=d.x-_,P=new vo(y,_,y,Math.floor(C*A),Math.floor(d.y*A)),R=this.findDEMTileFor(P);if(!R||!R.dem)return s;const w=R.dem,S=1<<R.tileID.canonical.z,F=(C*S-R.tileID.canonical.x)*w.dim,T=(d.y*S-R.tileID.canonical.y)*w.dim,L=Math.floor(F),U=Math.floor(T);return(c?this.exaggeration():1)*$n($n(w.get(L,U),w.get(L,U+1),T-U),$n(w.get(L+1,U),w.get(L+1,U+1),T-U),F-L)}getAtTileOffset(d,s,c){const f=1<<d.canonical.z;return this.getAtPointOrZero(new Rt(d.wrap+(d.canonical.x+s/Nn)/f,(d.canonical.y+c/Nn)/f))}getAtTileOffsetFunc(d,s,c,f){return y=>{const A=this.getAtTileOffset(d,y.x,y.y),_=f.upVector(d.canonical,y.x,y.y),C=f.upVectorScale(d.canonical,s,c).metersToTile;return De.vec3.scale(_,_,A*C),_}}getForTilePoints(d,s,c,f){if(this.isUsingMockSource())return!1;const y=cy.create(this,d,f);return!!y&&(s.forEach(A=>{A[2]=this.exaggeration()*y.getElevationAt(A[0],A[1],c)}),!0)}getMinMaxForTile(d){if(this.isUsingMockSource())return null;const s=this.findDEMTileFor(d);if(!s||!s.dem)return null;const c=s.dem.tree,f=s.tileID,y=1<<d.canonical.z-f.canonical.z;let A=d.canonical.x/y-f.canonical.x,_=d.canonical.y/y-f.canonical.y,C=0;for(let P=0;P<d.canonical.z-f.canonical.z&&!c.leaves[C];P++){A*=2,_*=2;const R=2*Math.floor(_)+Math.floor(A);C=c.childOffsets[C]+R,A%=1,_%=1}return{min:this.exaggeration()*c.minimums[C],max:this.exaggeration()*c.maximums[C]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(d,s,c){throw new Error("Pure virtual method called.")}pointCoordinate(d){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(d){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}getMinMaxForVisibleTiles(){const d=this.visibleDemTiles;if(d.length===0)return null;let s=!1,c=Number.MAX_VALUE,f=Number.MIN_VALUE;for(const y of d){const A=this.getMinMaxForTile(y.tileID);A&&(c=Math.min(c,A.min),f=Math.max(f,A.max),s=!0)}return s?{min:c,max:f}:null}},i.cF=vL,i.cG=Kf,i.cH=function(d,s){return[Math.pow(d[0],2.2)*s,Math.pow(d[1],2.2)*s,Math.pow(d[2],2.2)*s]},i.cI=sL,i.cJ=Ye,i.cK=Ce,i.cL=256,i.cM=function(d,s){const c=[0,0,0],f=Ob(Hd(s.canonical));return De.vec3.transformMat4(c,c,f),De.vec3.transformMat4(c,c,d),c},i.cN=d=>({u_camera_to_center_distance:new fl(d),u_extrude_scale:new f0(d),u_device_pixel_ratio:new fl(d),u_matrix:new Sm(d),u_inv_rot_matrix:new Sm(d),u_merc_center:new dh(d),u_tile_id:new h0(d),u_zoom_transition:new fl(d),u_up_dir:new h0(d),u_emissive_strength:new fl(d)}),i.cO=d=>({u_matrix:new Sm(d),u_pixels_to_tile_units:new f0(d),u_device_pixel_ratio:new fl(d),u_units_to_pixels:new dh(d),u_dash_image:new $f(d),u_gradient_image:new $f(d),u_image_height:new fl(d),u_texsize:new dh(d),u_tile_units_to_pixels:new fl(d),u_alpha_discard_threshold:new fl(d),u_trim_offset:new dh(d),u_trim_fade_range:new dh(d),u_trim_color:new Jg(d),u_emissive_strength:new fl(d)}),i.cP=d=>({u_matrix:new Sm(d),u_texsize:new dh(d),u_pixels_to_tile_units:new f0(d),u_device_pixel_ratio:new fl(d),u_image:new $f(d),u_units_to_pixels:new dh(d),u_tile_units_to_pixels:new fl(d),u_alpha_discard_threshold:new fl(d),u_trim_offset:new dh(d)}),i.cQ=Vs,i.cR=RG,i.cS=kG,i.cT=uL,i.cU=(d,s,c,f,y,A)=>{const _=d.transform,C=_.projection.name==="globe";let P;if(A.paint.get("circle-pitch-alignment")==="map")if(C){const w=sL(_.zoom,s.canonical)*_._pixelsPerMercatorPixel;P=Float32Array.from([w,0,0,w])}else P=_.calculatePixelsToTileUnitsMatrix(c);else P=new Float32Array([_.pixelsToGLUnits[0],0,0,_.pixelsToGLUnits[1]]);const R={u_camera_to_center_distance:d.transform.getCameraToCenterDistance(_.projection),u_matrix:d.translatePosMatrix(s.projMatrix,c,A.paint.get("circle-translate"),A.paint.get("circle-translate-anchor")),u_device_pixel_ratio:Vn.devicePixelRatio,u_extrude_scale:P,u_inv_rot_matrix:D$,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:A.paint.get("circle-emissive-strength")};if(C){R.u_inv_rot_matrix=f,R.u_merc_center=y,R.u_tile_id=[s.canonical.x,s.canonical.y,1<<s.canonical.z],R.u_zoom_transition=ZA(_.zoom);const w=y[0]*Nn,S=y[1]*Nn;R.u_up_dir=_.projection.upVector(new Aa(0,0,0),w,S)}return R},i.cV=yF,i.cW=(d,s,c,f,y,A)=>{const _=d.transform;return{u_matrix:gF(d,s,c,f),u_texsize:s.imageAtlasTexture?s.imageAtlasTexture.size:[0,0],u_pixels_to_tile_units:_.calculatePixelsToTileUnitsMatrix(s),u_device_pixel_ratio:y,u_image:0,u_tile_units_to_pixels:mF(s,_),u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]],u_alpha_discard_threshold:0,u_trim_offset:A}},i.cX=(d,s,c,f,y,A,_)=>{const C=d.transform,P=C.calculatePixelsToTileUnitsMatrix(s);return{u_matrix:gF(d,s,c,f),u_pixels_to_tile_units:P,u_device_pixel_ratio:A,u_units_to_pixels:[1/C.pixelsToGLUnits[0],1/C.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:y,u_texsize:_F(c)&&s.lineAtlasTexture?s.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:mF(s,d.transform),u_alpha_discard_threshold:0,u_trim_offset:_,u_trim_fade_range:c.paint.get("line-trim-fade-range"),u_trim_color:c.paint.get("line-trim-color").toRenderColor(c.lut).toArray01(),u_emissive_strength:c.paint.get("line-emissive-strength")}},i.cY=to,i.cZ=m0,i.c_=oF,i.ca=ns,i.cb=function(d){return[Math.pow(d[0],1/2.2),Math.pow(d[1],1/2.2),Math.pow(d[2],1/2.2)]},i.cc=function(d){return d({pluginStatus:si,pluginURL:Ei}),vi.on("pluginStateChange",d),d},i.cd=uy,i.ce=gw,i.cf=oy,i.cg=uS,i.ch=vu,i.ci=zo,i.cj=Er,i.ck=cs,i.cl=Wi,i.cm=function(d){const s=d.indexOf(Pu);return s>=0?d.slice(0,s):d},i.cn=function(d){return d.indexOf(Pu)>=0},i.co=function(d){const s=d.indexOf(Pu);return s>=0?d.slice(s+1):""},i.cp=function(d){const s=[],c=d.id;return c===void 0&&s.push({message:`layers.${c}: missing required property "id"`}),d.render===void 0&&s.push({message:`layers.${c}: missing required method "render"`}),d.renderingMode&&d.renderingMode!=="2d"&&d.renderingMode!=="3d"&&s.push({message:`layers.${c}: property "renderingMode" must be either "2d" or "3d"`}),s},i.cq=function(d,s,c,f){return d.type==="custom"?new hK(d,s):new wK[d.type](d,s,c,f)},i.cr=pi,i.cs=vi,i.ct=vc,i.cu=d0,i.cv=class extends Xh{constructor(d){super(d),this.current=IB}set(d,s,c){if(this.fetchUniformLocation(d,s)){for(let f=0;f<9;f++)if(c[f]!==this.current[f]){this.current=c,this.gl.uniformMatrix3fv(this.location,!1,c);break}}}},i.cw=fn,i.cx=function(d,s,c){const f=ZA(c.zoom),y=d.style.map._antialias,A=s.options.extStandardDerivativesForceOff||d.terrain&&d.terrain.exaggeration()>0;return f===0&&!y&&!A},i.cy=function(d){const s=d.pixelsPerMeter,c=s/Ue(1,d.center.lat),f=De.mat4.identity(new Float64Array(16));return De.mat4.translate(f,f,[d.point.x,d.point.y,0]),De.mat4.scale(f,f,[c,c,s]),Float32Array.from(f)},i.cz=kb,i.d=function(d){return dt.API_TILEJSON_REGEX.test(d)},i.d$=b,i.d0=Gb,i.d1=JA,i.d2=450,i.d3=7,i.d4=uK,i.d5=Bi,i.d6=Nd,i.d7=256,i.d8=DB,i.d9=Fu,i.dA=lL,i.dB=function(d){const s=[0,0,0],c=De.mat4.identity(new Float64Array(16));return De.mat4.multiply(c,d.pixelMatrix,d.globeMatrix),De.vec3.transformMat4(s,s,c),new Fe(s[0],s[1])},i.dC=function(d,s,c=!1){if(si===Kr||si===wr||si===Zi)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ei=Vn.resolveURL(d),si=Kr,Yi=s,Bo(),c||za()},i.dD=Es,i.dE=function(){gw().acquire(RS)},i.dF=function(){const d=H0;d&&(d.isPreloaded()&&d.numActive()===1?(d.release(RS),H0=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},i.dG=Q0,i.dH=function(d){const s=$i();if(!s)return;const c=s.delete(Tr);d&&c.catch(d).then(()=>d())},i.dI=V0,i.dJ=ZR,i.dK=function(d){kS=Vn.resolveURL(d),fy||(fy=new uy(gw(),new wl)),fy.broadcast("setDracoUrl",kS)},i.dL=YR,i.dM=function(d){dy=Vn.resolveURL(d),fy||(fy=new uy(gw(),new wl)),fy.broadcast("setMeshoptUrl",dy)},i.dN=He,i.dO=YA,i.dP=Jh,i.dQ=ak,i.dR=ck,i.dS=hF,i.dT=Fi,i.dU=zF,i.dV=function(d,s,c,f,y,A,_,C,P,R,w){d.createArrays(),d.tilePixelRatio=Nn/(512*d.overscaling),d.compareText={},d.iconsNeedLinear=!1;const S=d.layers[0].layout,F=d.layers[0]._unevaluatedLayout._values,T={};if(d.textSizeData.kind==="composite"){const{minZoom:$,maxZoom:ee}=d.textSizeData;T.compositeTextSizes=[F["text-size"].possiblyEvaluate(new Oi($),C),F["text-size"].possiblyEvaluate(new Oi(ee),C)]}if(d.iconSizeData.kind==="composite"){const{minZoom:$,maxZoom:ee}=d.iconSizeData;T.compositeIconSizes=[F["icon-size"].possiblyEvaluate(new Oi($),C),F["icon-size"].possiblyEvaluate(new Oi(ee),C)]}T.layoutTextSize=F["text-size"].possiblyEvaluate(new Oi(P+1),C),T.layoutIconSize=F["icon-size"].possiblyEvaluate(new Oi(P+1),C),T.textMaxSize=F["text-size"].possiblyEvaluate(new Oi(18),C);const L=S.get("text-rotation-alignment")==="map"&&S.get("symbol-placement")!=="point",U=S.get("text-size");let V=!1;for(const $ of d.features)if($.icon&&$.icon.nameSecondary){V=!0;break}for(const $ of d.features){const ee=S.get("text-font").evaluate($,{},C).join(","),ie=U.evaluate($,{},C),K=T.layoutTextSize.evaluate($,{},C),ce=(T.layoutIconSize.evaluate($,{},C),{horizontal:{},vertical:void 0}),he=$.text;let Be,Ne=[0,0];if(he){const rt=he.toString(),je=S.get("text-letter-spacing").evaluate($,{},C)*el,ct=S.get("text-line-height").evaluate($,{},C)*el,yt=Wt(rt)?je:0,Ct=S.get("text-anchor").evaluate($,{},C),Et=S.get("text-variable-anchor");if(!Et){const xn=S.get("text-radial-offset").evaluate($,{},C);Ne=xn?$F(Ct,[xn*el,hS]):S.get("text-offset").evaluate($,{},C).map(tn=>tn*el)}let Pt=L?"center":S.get("text-justify").evaluate($,{},C);const $t=S.get("symbol-placement")==="point",Lt=$t?S.get("text-max-width").evaluate($,{},C)*el:1/0,dn=xn=>{d.allowVerticalPlacement&&Pn(rt)&&(ce.vertical=aS(he,s,c,y,ee,Lt,ct,Ct,xn,yt,Ne,Mu.vertical,!0,K,ie))};if(!L&&Et){const xn=Pt==="auto"?Et.map(Jn=>dS(Jn)):[Pt];let tn=!1;for(let Jn=0;Jn<xn.length;Jn++){const Hn=xn[Jn];if(!ce.horizontal[Hn])if(tn)ce.horizontal[Hn]=ce.horizontal[0];else{const kn=aS(he,s,c,y,ee,Lt,ct,"center",Hn,yt,Ne,Mu.horizontal,!1,K,ie);kn&&(ce.horizontal[Hn]=kn,tn=kn.positionedLines.length===1)}}dn("left")}else{if(Pt==="auto"&&(Pt=dS(Ct)),$t||S.get("text-writing-mode").indexOf("horizontal")>=0||!Pn(rt)){const xn=aS(he,s,c,y,ee,Lt,ct,Ct,Pt,yt,Ne,Mu.horizontal,!1,K,ie);xn&&(ce.horizontal[Pt]=xn)}dn($t?"left":Pt)}}let Ve=!1;if($.icon&&$.icon.namePrimary){const rt=f[$.icon.namePrimary];rt&&(Be=jG(y[$.icon.namePrimary],$.icon.nameSecondary?y[$.icon.nameSecondary]:void 0,S.get("icon-offset").evaluate($,{},C),S.get("icon-anchor").evaluate($,{},C)),Ve=rt.sdf,d.sdfIcons===void 0?d.sdfIcons=rt.sdf:d.sdfIcons!==rt.sdf&&Jr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(rt.pixelRatio!==d.pixelRatio||S.get("icon-rotate").constantOr(1)!==0)&&(d.iconsNeedLinear=!0))}const Oe=KF(ce.horizontal)||ce.vertical;d.iconsInText||(d.iconsInText=!!Oe&&Oe.iconsInText),(Oe||Be)&&ZG(d,$,ce,Be,f,T,K,0,Ne,Ve,_,C,R,w,V)}A&&d.generateCollisionDebugBuffers(P,d.collisionBoxArray)},i.dW=ny,i.dX=mw,i.dY=Je,i.dZ=OL,i.d_=EF,i.da=Tl,i.db=Hf,i.dc=function(d,s,c,f,y){return _n((d-s)/(c-s)*(y-f)+f,f,y)},i.dd=Xa,i.de=xt,i.df=class{constructor(d,s,c,f){this.context=d,this.format=f,this.size=c,this.texture=d.gl.createTexture();const[y,A,_]=this.size,{gl:C}=d;C.bindTexture(C.TEXTURE_3D,this.texture),d.pixelStoreUnpackFlipY.set(!1),d.pixelStoreUnpack.set(1),d.pixelStoreUnpackPremultiplyAlpha.set(!1),C.texImage3D(C.TEXTURE_3D,0,this.format,y,A,_,0,_S(this.format),vS(this.format),s.data)}bind(d,s){const{context:c}=this,{gl:f}=c;f.bindTexture(f.TEXTURE_3D,this.texture),d!==this.minFilter&&(f.texParameteri(f.TEXTURE_3D,f.TEXTURE_MAG_FILTER,d),f.texParameteri(f.TEXTURE_3D,f.TEXTURE_MIN_FILTER,d),this.minFilter=d),s!==this.wrapS&&(f.texParameteri(f.TEXTURE_3D,f.TEXTURE_WRAP_S,s),f.texParameteri(f.TEXTURE_3D,f.TEXTURE_WRAP_T,s),this.wrapS=s)}destroy(){const{gl:d}=this.context;d.deleteTexture(this.texture),this.texture=null}},i.dg=CS,i.dh=[1,1,1],i.di=cy,i.dj=ly,i.dk=ku,i.dl=class{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[],this._globalClipBounds={min:new Fe(1/0,1/0),max:new Fe(-1/0,-1/0)}}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(d,s=!1){const c=QL(new Fe(0,0),new Fe(Nn,Nn),d),f=[];if(s&&!XB(c,this._globalClipBounds))return f;for(const y of this._activeRegions){if(y.hiddenByOverlap||!XB(c,y))continue;const A=sG(y.min,y.max,d);f.push({min:A.min,max:A.max,sourceId:this._sourceIds[y.priority],footprint:y.footprint,footprintTileId:y.tileId,order:y.order,clipMask:y.clipMask,clipScope:y.clipScope})}return f}setSources(d){this._setSources(d.map(s=>({getSourceId:()=>s.cache.id,getFootprints:()=>{const c=[];for(const f of s.cache.getVisibleCoordinates()){const y=s.cache.getTile(f).buckets[s.layer];y&&y.updateFootprints(f.toUnwrapped(),c)}return c},getOrder:()=>s.order,getClipMask:()=>s.clipMask,getClipScope:()=>s.clipScope})))}_addSource(d){const s=d.getFootprints();if(s.length===0)return;const c=d.getOrder(),f=d.getClipMask(),y=d.getClipScope();for(const A of s){if(!A.footprint)continue;const _=QL(A.footprint.min,A.footprint.max,A.id);this._activeRegions.push({min:_.min,max:_.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:A.id,footprint:A.footprint,order:c,clipMask:f,clipScope:y})}this._sourceIds.push(d.getSourceId())}_computeReplacement(){this._activeRegions.sort((s,c)=>s.priority-c.priority||jb(s.min,c.min)||jb(s.max,c.max)||s.order-c.order||s.clipMask-c.clipMask||function(f,y){const A=(_,C)=>_+C;return f.length-y.length||f.reduce(A,"").localeCompare(y.reduce(A,""))}(s.clipScope,c.clipScope));let d=this._activeRegions.length!==this._prevRegions.length;if(!d){let s=0;for(;!d&&s!==this._activeRegions.length;){const c=this._activeRegions[s],f=this._prevRegions[s];d=c.priority!==f.priority||!VL(c,f)||c.order!==f.order||c.clipMask!==f.clipMask||!Re(c.clipScope,f.clipScope),++s}}if(d){++this._updateTime;for(const c of this._activeRegions)c.order!==Hb&&(this._globalClipBounds.min.x=Math.min(this._globalClipBounds.min.x,c.min.x),this._globalClipBounds.min.y=Math.min(this._globalClipBounds.min.y,c.min.y),this._globalClipBounds.max.x=Math.max(this._globalClipBounds.max.x,c.max.x),this._globalClipBounds.max.y=Math.max(this._globalClipBounds.max.y,c.max.y));const s=c=>{const f=this._activeRegions;if(c>=f.length)return c;const y=f[c].priority;for(;c<f.length&&f[c].priority===y;)++c;return c};if(this._sourceIds.length>1){let c=0,f=s(c);for(;c!==f;){let y=c;const A=c;for(;y!==f;){const _=this._activeRegions[y];_.hiddenByOverlap=!1;for(let C=0;C<A;C++){const P=this._activeRegions[C];if(!P.hiddenByOverlap&&_.order===Hb&&XB(_,P)&&(_.hiddenByOverlap=jL(_.footprint,_.tileId,P.footprint,P.tileId),_.hiddenByOverlap))break}++y}c=f,f=s(c)}}}}_setSources(d){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let s=d.length-1;s>=0;s--)this._addSource(d[s]);this._computeReplacement()}},i.dm=class{constructor(d){this._createGrid(d),this._createPoles(d)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const d of this._poleSegments)d.destroy();for(const d of this._gridSegments)d.withSkirts.destroy(),d.withoutSkirts.destroy()}_fillGridMeshWithLods(d,s){const c=new Lc,f=new ea,y=[],A=d+1+2,_=s[0]+1,C=s[0]+1+(1+s.length),P=(R,w,S)=>{let F=R===A-1?R-2:R===0?R:R-1;return F+=S?24575:0,[F,w]};for(let R=0;R<A;++R)c.emplaceBack(...P(R,0,!0));for(let R=0;R<_;++R)for(let w=0;w<A;++w)c.emplaceBack(...P(w,R,(w===0||w===A-1)&&!0));for(let R=0;R<s.length;++R){const w=s[R];for(let S=0;S<A;++S)c.emplaceBack(...P(S,w,!0))}for(let R=0;R<s.length;++R){const w=f.length,S=s[R]+1+2,F=new ea;for(let U=0;U<S-1;U++){const V=U===S-2,$=V?A*(C-s.length+R-U):A;for(let ee=0;ee<A-1;ee++){const ie=U*A+ee;U===0||V||ee===0||ee===A-2?(F.emplaceBack(ie+1,ie,ie+$),F.emplaceBack(ie+$,ie+$+1,ie+1)):(f.emplaceBack(ie+1,ie,ie+$),f.emplaceBack(ie+$,ie+$+1,ie+1))}}const T=hs.simpleSegment(0,w,c.length,f.length-w);for(let U=0;U<F.uint16.length;U+=3)f.emplaceBack(F.uint16[U],F.uint16[U+1],F.uint16[U+2]);const L=hs.simpleSegment(0,w,c.length,f.length-w);y.push({withoutSkirts:T,withSkirts:L})}return{vertices:c,indices:f,segments:y}}_createGrid(d){const s=this._fillGridMeshWithLods(x,B);this._gridSegments=s.segments,this._gridBuffer=d.createVertexBuffer(s.vertices,ru.members),this._gridIndexBuffer=d.createIndexBuffer(s.indices,!0)}_createPoles(d){const s=new ea;for(let _=0;_<=x;_++)s.emplaceBack(0,_+1,_+2);this._poleIndexBuffer=d.createIndexBuffer(s,!0);const c=new Tl,f=new Tl,y=new Tl,A=new Tl;this._poleSegments=[];for(let _=0,C=0;_<u;_++){const P=360/(1<<_);c.emplaceBack(0,-a,0,.5,0),f.emplaceBack(0,-a,0,.5,1),y.emplaceBack(0,-a,0,.5,.5),A.emplaceBack(0,-a,0,.5,.5);for(let R=0;R<=x;R++){let w=R/x,S=0;const F=$n(0,P,w),[T,L,U]=Q(M$,O$,F,a);c.emplaceBack(T,L,U,w,S),f.emplaceBack(T,L,U,w,1-S);const V=zt(F);w=.5+.5*Math.sin(V),S=.5+.5*Math.cos(V),y.emplaceBack(T,L,U,w,S),A.emplaceBack(T,L,U,w,1-S)}this._poleSegments.push(hs.simpleSegment(C,0,66,64)),C+=66}this._poleNorthVertexBuffer=d.createVertexBuffer(c,kc,!1),this._poleSouthVertexBuffer=d.createVertexBuffer(f,kc,!1),this._texturedPoleNorthVertexBuffer=d.createVertexBuffer(y,kc,!1),this._texturedPoleSouthVertexBuffer=d.createVertexBuffer(A,kc,!1)}getGridBuffers(d,s){return[this._gridBuffer,this._gridIndexBuffer,s?this._gridSegments[d].withSkirts:this._gridSegments[d].withoutSkirts]}getPoleBuffers(d,s){return[s?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,s?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[d]]}},i.dn=Hb,i.dp=Fn,i.dq=function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement},i.dr=Wn,i.ds=pt,i.dt=j,i.du=function([d,s,c]){const f=Math.hypot(d,s,c),y=Math.atan2(d,c),A=.5*Math.PI-Math.acos(-s/f);return new re(Jt(y),Jt(A))},i.dv=xS,i.dw=W,i.dx=function(d){const s=d.navigator?d.navigator.userAgent:null;return!!function(c){if(Pa==null){const f=c.navigator?c.navigator.userAgent:null;Pa=!!c.safari||!(!f||!(/\b(iPad|iPhone|iPod)\b/.test(f)||f.match("Safari")&&!f.match("Chrome")))}return Pa}(d)&&s&&(s.match("Version/15.4")||s.match("Version/15.5")||s.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},i.dy=function(d,s){Br=d,hi=s},i.dz=NB,i.e=dt,i.e0=function(d){let s=0;if(new Uint32Array(d,0,1)[0]!==ek){const c=new Uint32Array(d,0,7),[,,f,y,A,_]=c;s=c.byteLength+y+A+_+A,(f!==d.byteLength||s>=d.byteLength)&&Jr("Invalid b3dm header information.")}return ik(d,s)},i.e1=function(d,s){const c=sk(d);for(const f of c){for(const y of f.meshes)lq(y);f.lights&&(f.lightMeshIndex=f.meshes.length,f.meshes.push(cq(f.lights,s)))}return c},i.e2=pw,i.e3=kR,i.e4=io,i.e5=function(d){jo(),Mr!=null&&Mr.then(s=>{s.keys().then(c=>{for(let f=0;f<c.length-d;f++)s.delete(c[f])})})},i.f=function(d){return d.indexOf("mapbox:")===0},i.g=function(d,s){return vc(lr(d,{method:"GET"}),s)},i.h=ot,i.i=function(d){return dt.API_STYLE_REGEX.test(d)&&!wt(d)},i.j=function(d){return decodeURIComponent(atob(d).split("").map(s=>"%"+("00"+s.charCodeAt(0).toString(16)).slice(-2)).join(""))},i.k=function(d){return btoa(encodeURIComponent(d).replace(/%([0-9A-F]{2})/g,(s,c)=>String.fromCharCode(+("0x"+c))))},i.l=lr,i.m=$o,i.n=function(d,s){return vc(lr(d,{type:"json"}),s)},i.o=go,i.p=function(d,s){return vc(lr(d,{method:"POST"}),s)},i.q=Vn,i.r=Ll,i.s=function(d){try{const s=self[d];return s.setItem("_mapbox_test_",1),s.removeItem("_mapbox_test_"),!0}catch{return!1}},i.t=Hc,i.u=function(){return function d(s){return s?(s^Math.random()*(16>>s/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,d)}()},i.v=function(d){return!!d&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(d)},i.w=Jr,i.x=Hl,i.y=2,i.z=NF}),h(["./shared"],function(i){function b(jt){const we=jt?jt.url.toString():void 0;return we?performance.getEntriesByName(we):[]}function E(jt){if(typeof jt=="number"||typeof jt=="boolean"||typeof jt=="string"||jt==null)return JSON.stringify(jt);if(Array.isArray(jt)){let Ce="[";for(const Ye of jt)Ce+=`${E(Ye)},`;return`${Ce}]`}let we="{";for(const Ce of Object.keys(jt).sort())we+=`${Ce}:${E(jt[Ce])},`;return`${we}}`}function I(jt){let we="";for(const Ce of i.bg)we+=`/${E(jt[Ce])}`;return we}class O{constructor(we){this.keyCache={},this._layers={},this._layerConfigs={},we&&this.replace(we)}replace(we,Ce){this._layerConfigs={},this._layers={},this.update(we,[],Ce)}update(we,Ce,Ye){this._options=Ye;for(const ot of we)this._layerConfigs[ot.id]=ot,(this._layers[ot.id]=i.cq(ot,this.scope,null,this._options)).compileFilter(Ye),this.keyCache[ot.id]&&delete this.keyCache[ot.id];for(const ot of Ce)delete this.keyCache[ot],delete this._layerConfigs[ot],delete this._layers[ot];this.familiesBySource={};const dt=function(ot,wt){const Vt={};for(let Gt=0;Gt<ot.length;Gt++){const nn=wt&&wt[ot[Gt].id]||I(ot[Gt]);wt&&(wt[ot[Gt].id]=nn);let qt=Vt[nn];qt||(qt=Vt[nn]=[]),qt.push(ot[Gt])}const St=[];for(const Gt in Vt)St.push(Vt[Gt]);return St}(i.bd(this._layerConfigs),this.keyCache);for(const ot of dt){const wt=ot.map(En=>this._layers[En.id]),Vt=wt[0];if(Vt.visibility==="none")continue;const St=Vt.source||"";let Gt=this.familiesBySource[St];Gt||(Gt=this.familiesBySource[St]={});const nn=Vt.sourceLayer||"_geojsonTileLayer";let qt=Gt[nn];qt||(qt=Gt[nn]=[]),qt.push(wt)}}}const M=1*i.dP;class G{constructor(we){const Ce={},Ye=[];for(const Vt in we){const St=we[Vt],Gt=Ce[Vt]={};for(const nn in St.glyphs){const qt=St.glyphs[+nn];if(!qt||qt.bitmap.width===0||qt.bitmap.height===0)continue;const En=qt.metrics.localGlyph?M:1,zn={x:0,y:0,w:qt.bitmap.width+2*En,h:qt.bitmap.height+2*En};Ye.push(zn),Gt[nn]=zn}}const{w:dt,h:ot}=i.z(Ye),wt=new i.dO({width:dt||1,height:ot||1});for(const Vt in we){const St=we[Vt];for(const Gt in St.glyphs){const nn=St.glyphs[+Gt];if(!nn||nn.bitmap.width===0||nn.bitmap.height===0)continue;const qt=Ce[Vt][Gt],En=nn.metrics.localGlyph?M:1;i.dO.copy(nn.bitmap,wt,{x:0,y:0},{x:qt.x+En,y:qt.y+En},nn.bitmap)}}this.image=wt,this.positions=Ce}}i.dN(G,"GlyphAtlas");class q{constructor(we){this.tileID=new i.aA(we.tileID.overscaledZ,we.tileID.wrap,we.tileID.canonical.z,we.tileID.canonical.x,we.tileID.canonical.y),this.tileZoom=we.tileZoom,this.uid=we.uid,this.zoom=we.zoom,this.lut=we.lut,this.canonical=we.tileID.canonical,this.pixelRatio=we.pixelRatio,this.tileSize=we.tileSize,this.source=we.source,this.scope=we.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=we.showCollisionBoxes,this.collectResourceTiming=!!we.collectResourceTiming,this.promoteId=we.promoteId,this.isSymbolTile=we.isSymbolTile,this.tileTransform=i.aK(we.tileID.canonical,we.projection),this.projection=we.projection,this.brightness=we.brightness,this.extraShadowCaster=!!we.extraShadowCaster,this.tessellationStep=we.tessellationStep}parse(we,Ce,Ye,dt,ot){this.status="parsing",this.data=we,this.collisionBoxArray=new i.aQ;const wt=new i.dQ(Object.keys(we.layers).sort()),Vt=new i.dR(this.tileID,this.promoteId);Vt.bucketLayerIDs=[];const St={},Gt=new i.dS(256,256),nn={featureIndex:Vt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:Gt,availableImages:Ye,brightness:this.brightness},qt=Ce.familiesBySource[this.source];for(const Br in qt){const hi=we.layers[Br];if(!hi)continue;let mi=!1,Mr=!1,Ci=!1;for(const Co of qt[Br])Co[0].type==="symbol"?mi=!0:Mr=!0,Co[0].is3D()&&Co[0].type!=="model"&&(Ci=!0);if(this.extraShadowCaster&&!Ci||this.isSymbolTile===!0&&!mi||this.isSymbolTile===!1&&!Mr)continue;hi.version===1&&i.w(`Vector tile source "${this.source}" layer "${Br}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const $i=wt.encode(Br),jo=[];for(let Co=0;Co<hi.length;Co++){const $o=hi.feature(Co),Ps=Vt.getId($o,Br);jo.push({feature:$o,id:Ps,index:Co,sourceLayerIndex:$i})}for(const Co of qt[Br]){const $o=Co[0];(!this.extraShadowCaster||$o.is3D()&&$o.type!=="model")&&(this.isSymbolTile!==void 0&&$o.type==="symbol"!==this.isSymbolTile||$o.minzoom&&this.zoom<Math.floor($o.minzoom)||$o.maxzoom&&this.zoom>=$o.maxzoom||$o.visibility!=="none"&&(Z(Co,this.zoom,nn.brightness,Ye),(St[$o.id]=$o.createBucket({index:Vt.bucketLayerIDs.length,layers:Co,zoom:this.zoom,lut:this.lut,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:$i,sourceID:this.source,projection:this.projection.spec,tessellationStep:this.tessellationStep})).populate(jo,nn,this.tileID.canonical,this.tileTransform),Vt.bucketLayerIDs.push(Co.map(Ps=>Ps.id))))}}let En,zn,Vn,gr;Gt.trim();const Er={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},Tr=()=>{if(En)return this.status="done",ot(En);if(this.extraShadowCaster)this.status="done",ot(null,{buckets:i.bd(St).filter(Br=>!Br.isEmpty()),featureIndex:Vt,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:nn.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(zn&&Vn&&gr){const Br=new G(zn),hi=new i.dU(Vn,gr,this.lut);for(const mi in St){const Mr=St[mi];Mr instanceof i.aR?(Z(Mr.layers,this.zoom,nn.brightness,Ye),i.dV(Mr,zn,Br.positions,Vn,hi.iconPositions,this.showCollisionBoxes,Ye,this.tileID.canonical,this.tileZoom,this.projection,this.brightness)):Mr.hasPattern&&(Mr instanceof i.aX||Mr instanceof i.aY||Mr instanceof i.d0)&&(Z(Mr.layers,this.zoom,nn.brightness,Ye),Mr.addFeatures(nn,this.tileID.canonical,hi.patternPositions,Ye,this.tileTransform,this.brightness))}this.status="done",ot(null,{buckets:i.bd(St).filter(mi=>!mi.isEmpty()),featureIndex:Vt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Br.image,lineAtlas:Gt,imageAtlas:hi,brightness:nn.brightness})}};if(!this.extraShadowCaster){const Br=i.dT(nn.glyphDependencies,Mr=>Object.keys(Mr).map(Number));Object.keys(Br).length?dt.send("getGlyphs",{uid:this.uid,stacks:Br,scope:this.scope},(Mr,Ci)=>{En||(En=Mr,zn=Ci,Tr())},void 0,!1,Er):zn={};const hi=Object.keys(nn.iconDependencies);hi.length?dt.send("getImages",{icons:hi,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},(Mr,Ci)=>{En||(En=Mr,Vn=Ci,Tr())},void 0,!1,Er):Vn={};const mi=Object.keys(nn.patternDependencies);mi.length?dt.send("getImages",{icons:mi,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},(Mr,Ci)=>{En||(En=Mr,gr=Ci,Tr())},void 0,!1,Er):gr={}}Tr()}}function Z(jt,we,Ce,Ye){const dt=new i.a3(we,{brightness:Ce});for(const ot of jt)ot.recalculate(dt,Ye)}class Y extends i.E{constructor(we,Ce,Ye,dt,ot,wt){super(),this.actor=we,this.layerIndex=Ce,this.availableImages=Ye,this.loadVectorData=ot||i.aw,this.loading={},this.loaded={},this.deduped=new i.au(we.scheduler),this.isSpriteLoaded=dt,this.scheduler=we.scheduler,this.brightness=wt}loadTile(we,Ce){const Ye=we.uid,dt=we&&we.request,ot=dt&&dt.collectResourceTiming,wt=this.loading[Ye]=new q(we);wt.abort=this.loadVectorData(we,(Vt,St)=>{const Gt=!this.loading[Ye];if(delete this.loading[Ye],Gt||Vt||!St)return wt.status="done",Gt||(this.loaded[Ye]=wt),Ce(Vt);const nn=St.rawData,qt={};St.expires&&(qt.expires=St.expires),St.cacheControl&&(qt.cacheControl=St.cacheControl),wt.vectorTile=St.vectorTile||new i.dW.VectorTile(new i.bb(nn));const En=()=>{wt.parse(wt.vectorTile,this.layerIndex,this.availableImages,this.actor,(zn,Vn)=>{if(zn||!Vn)return Ce(zn);const gr={};if(ot){const Er=b(dt);Er.length>0&&(gr.resourceTiming=JSON.parse(JSON.stringify(Er)))}Ce(null,i.l({rawTileData:nn.slice(0)},Vn,qt,gr))})};this.isSpriteLoaded?En():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(En,{type:"parseTile",isSymbolTile:we.isSymbolTile,zoom:we.tileZoom}):En()}),this.loaded=this.loaded||{},this.loaded[Ye]=wt})}reloadTile(we,Ce){const Ye=this.loaded,dt=we.uid;if(Ye&&Ye[dt]){const ot=Ye[dt];ot.showCollisionBoxes=we.showCollisionBoxes,ot.projection=we.projection,ot.brightness=we.brightness,ot.tileTransform=i.aK(we.tileID.canonical,we.projection),ot.extraShadowCaster=we.extraShadowCaster,ot.lut=we.lut;const wt=(Vt,St)=>{const Gt=ot.reloadCallback;Gt&&(delete ot.reloadCallback,ot.parse(ot.vectorTile,this.layerIndex,this.availableImages,this.actor,Gt)),Ce(Vt,St)};ot.status==="parsing"?ot.reloadCallback=wt:ot.status==="done"&&(ot.vectorTile?ot.parse(ot.vectorTile,this.layerIndex,this.availableImages,this.actor,wt):wt())}else Ce(null,void 0)}abortTile(we,Ce){const Ye=we.uid,dt=this.loading[Ye];dt&&(dt.abort&&dt.abort(),delete this.loading[Ye]),Ce()}removeTile(we,Ce){const Ye=this.loaded,dt=we.uid;Ye&&Ye[dt]&&delete Ye[dt],Ce()}}class te{loadTile(we,Ce){const{uid:Ye,encoding:dt,rawImageData:ot,padding:wt}=we,Vt=ImageBitmap&&ot instanceof ImageBitmap?this.getImageData(ot,wt):ot;Ce(null,new i.dX(Ye,Vt,dt,wt<1))}getImageData(we,Ce){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(we.width,we.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=we.width,this.offscreenCanvas.height=we.height,this.offscreenCanvasContext.drawImage(we,0,0,we.width,we.height);const Ye=this.offscreenCanvasContext.getImageData(-Ce,-Ce,we.width+2*Ce,we.height+2*Ce);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),Ye}}i.ba.setPbf(i.bb);class be{decodeRasterArray({task:we,buffer:Ce},Ye){i.ba.performDecoding(Ce,we).then(dt=>{Ye(null,dt)},dt=>{Ye(dt)})}}const Pe=i.dW.VectorTileFeature.prototype.toGeoJSON;class Se{constructor(we){this._feature=we,this.extent=i.ab,this.type=we.type,this.properties=we.tags,"id"in we&&!isNaN(we.id)&&(this.id=parseInt(we.id,10))}loadGeometry(){if(this._feature.type===1){const we=[];for(const Ce of this._feature.geometry)we.push([new i.P(Ce[0],Ce[1])]);return we}{const we=[];for(const Ce of this._feature.geometry){const Ye=[];for(const dt of Ce)Ye.push(new i.P(dt[0],dt[1]));we.push(Ye)}return we}}toGeoJSON(we,Ce,Ye){return Pe.call(this,we,Ce,Ye)}}class Ie{constructor(we){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=i.ab,this.length=we.length,this._features=we}feature(we){return new Se(this._features[we])}}const Ae=64/4096,ne=128;class ue{constructor(){this.features=new Map}clear(){this.features.clear()}load(we=[],Ce){for(const Ye of we){const dt=Ye.id;if(dt==null)continue;let ot=this.features.get(dt);ot&&this.updateCache(ot,Ce),Ye.geometry?(ot=se(Ye),this.updateCache(ot,Ce),this.features.set(dt,ot)):this.features.delete(dt),this.updateCache(ot,Ce)}}updateCache(we,Ce){for(const{canonical:Ye,uid:dt}of Object.values(Ce)){const{z:ot,x:wt,y:Vt}=Ye;ye(we,Math.pow(2,ot),wt,Vt)&&delete Ce[dt]}}getTile(we,Ce,Ye){const dt=Math.pow(2,we),ot=[];for(const wt of this.features.values())ye(wt,dt,Ce,Ye)&&ot.push(Ot(wt,dt,Ce,Ye));return{features:ot}}getFeatures(){return[...this.features.values()]}}function ye({minX:jt,minY:we,maxX:Ce,maxY:Ye},dt,ot,wt){return jt<(ot+1+Ae)/dt&&we<(wt+1+Ae)/dt&&Ce>(ot-Ae)/dt&&Ye>(wt-Ae)/dt}function se(jt){const{id:we,geometry:Ce,properties:Ye}=jt;if(!Ce)return;if(Ce.type==="GeometryCollection")throw new Error("GeometryCollection not supported in dynamic mode.");const{type:dt,coordinates:ot}=Ce,wt={id:we,type:1,geometry:[],tags:Ye,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},Vt=wt.geometry;if(dt==="Point")le(ot,Vt,wt);else if(dt==="MultiPoint")for(const St of ot)le(St,Vt,wt);else if(dt==="LineString")wt.type=2,ge(ot,Vt,wt);else if(dt==="MultiLineString")wt.type=2,lt(ot,Vt,wt);else if(dt==="Polygon")wt.type=3,lt(ot,Vt,wt,!0);else{if(dt!=="MultiPolygon")throw new Error("Input data is not a valid GeoJSON object.");wt.type=3;for(const St of ot)lt(St,Vt,wt,!0)}return wt}function le([jt,we],Ce,Ye){const dt=i.am(jt);let ot=i.at(we);ot=ot<0?0:ot>1?1:ot,Ce.push(dt,ot),Ye.minX=Math.min(Ye.minX,dt),Ye.minY=Math.min(Ye.minY,ot),Ye.maxX=Math.max(Ye.maxX,dt),Ye.maxY=Math.max(Ye.maxY,ot)}function ge(jt,we,Ce,Ye=!1,dt=!1){const ot=[];for(const wt of jt)le(wt,ot,Ce);we.push(ot),Ye&&function(wt,Vt){let St=0;for(let Gt=0,nn=wt.length,qt=nn-2;Gt<nn;qt=Gt,Gt+=2)St+=(wt[Gt]-wt[qt])*(wt[Gt+1]+wt[qt+1]);if(St>0===Vt)for(let Gt=0,nn=wt.length;Gt<nn/2;Gt+=2){const qt=wt[Gt],En=wt[Gt+1];wt[Gt]=wt[nn-2-Gt],wt[Gt+1]=wt[nn-1-Gt],wt[nn-2-Gt]=qt,wt[nn-1-Gt]=En}}(ot,dt)}function lt(jt,we,Ce,Ye=!1){for(let dt=0;dt<jt.length;dt++)ge(jt[dt],we,Ce,Ye,dt===0)}function Ot(jt,we,Ce,Ye){const{id:dt,type:ot,geometry:wt,tags:Vt}=jt,St=[];if(ot===1)(function(Gt,nn,qt,En,zn){for(let Vn=0;Vn<Gt.length;Vn+=2){const gr=Math.round(i.ab*(Gt[Vn+0]*nn-qt)),Er=Math.round(i.ab*(Gt[Vn+1]*nn-En));zn.push([gr,Er])}})(wt,we,Ce,Ye,St);else for(const Gt of wt)gt(Gt,we,Ce,Ye,St);return{id:dt,type:ot,geometry:St,tags:Vt}}function gt(jt,we,Ce,Ye,dt){const ot=-ne,wt=i.ab+ne;let Vt;for(let St=0;St<jt.length-2;St+=2){let Gt=Math.round(i.ab*(jt[St+0]*we-Ce)),nn=Math.round(i.ab*(jt[St+1]*we-Ye)),qt=Math.round(i.ab*(jt[St+2]*we-Ce)),En=Math.round(i.ab*(jt[St+3]*we-Ye));const zn=qt-Gt,Vn=En-nn;Gt<ot&&qt<ot||(Gt<ot?(nn+=Math.round(Vn*((ot-Gt)/zn)),Gt=ot):qt<ot&&(En=nn+Math.round(Vn*((ot-Gt)/zn)),qt=ot),nn<ot&&En<ot||(nn<ot?(Gt+=Math.round(zn*((ot-nn)/Vn)),nn=ot):En<ot&&(qt=Gt+Math.round(zn*((ot-nn)/Vn)),En=ot),Gt>=wt&&qt>=wt||(Gt>=wt?(nn+=Math.round(Vn*((wt-Gt)/zn)),Gt=wt):qt>=wt&&(En=nn+Math.round(Vn*((wt-Gt)/zn)),qt=wt),nn>=wt&&En>=wt||(nn>=wt?(Gt+=Math.round(zn*((wt-nn)/Vn)),nn=wt):En>=wt&&(qt=Gt+Math.round(zn*((wt-nn)/Vn)),En=wt),Vt&&Gt===Vt[Vt.length-1][0]&&nn===Vt[Vt.length-1][1]||(Vt=[[Gt,nn]],dt.push(Vt)),Vt.push([qt,En])))))}}var Tt,Mt,on,Ut={exports:{}},In=function(){if(on)return Ut.exports;on=1;var jt=i.d_(),we=function(){if(Mt)return Tt;Mt=1;var nn=i.dY(),qt=i.dZ().VectorTileFeature;function En(Vn,gr){this.options=gr||{},this.features=Vn,this.length=Vn.length}function zn(Vn,gr){this.id=typeof Vn.id=="number"?Vn.id:void 0,this.type=Vn.type,this.rawGeometry=Vn.type===1?[Vn.geometry]:Vn.geometry,this.properties=Vn.tags,this.extent=gr||4096}return Tt=En,En.prototype.feature=function(Vn){return new zn(this.features[Vn],this.options.extent)},zn.prototype.loadGeometry=function(){var Vn=this.rawGeometry;this.geometry=[];for(var gr=0;gr<Vn.length;gr++){for(var Er=Vn[gr],Tr=[],Br=0;Br<Er.length;Br++)Tr.push(new nn(Er[Br][0],Er[Br][1]));this.geometry.push(Tr)}return this.geometry},zn.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Vn=this.geometry,gr=1/0,Er=-1/0,Tr=1/0,Br=-1/0,hi=0;hi<Vn.length;hi++)for(var mi=Vn[hi],Mr=0;Mr<mi.length;Mr++){var Ci=mi[Mr];gr=Math.min(gr,Ci.x),Er=Math.max(Er,Ci.x),Tr=Math.min(Tr,Ci.y),Br=Math.max(Br,Ci.y)}return[gr,Tr,Er,Br]},zn.prototype.toGeoJSON=qt.prototype.toGeoJSON,Tt}();function Ce(nn){var qt=new jt;return function(En,zn){for(var Vn in En.layers)zn.writeMessage(3,Ye,En.layers[Vn])}(nn,qt),qt.finish()}function Ye(nn,qt){var En;qt.writeVarintField(15,nn.version||1),qt.writeStringField(1,nn.name||""),qt.writeVarintField(5,nn.extent||4096);var zn={keys:[],values:[],keycache:{},valuecache:{}};for(En=0;En<nn.length;En++)zn.feature=nn.feature(En),qt.writeMessage(2,dt,zn);var Vn=zn.keys;for(En=0;En<Vn.length;En++)qt.writeStringField(3,Vn[En]);var gr=zn.values;for(En=0;En<gr.length;En++)qt.writeMessage(4,Gt,gr[En])}function dt(nn,qt){var En=nn.feature;En.id!==void 0&&qt.writeVarintField(1,En.id),qt.writeMessage(2,ot,nn),qt.writeVarintField(3,En.type),qt.writeMessage(4,St,En)}function ot(nn,qt){var En=nn.feature,zn=nn.keys,Vn=nn.values,gr=nn.keycache,Er=nn.valuecache;for(var Tr in En.properties){var Br=En.properties[Tr],hi=gr[Tr];if(Br!==null){hi===void 0&&(zn.push(Tr),gr[Tr]=hi=zn.length-1),qt.writeVarint(hi);var mi=typeof Br;mi!=="string"&&mi!=="boolean"&&mi!=="number"&&(Br=JSON.stringify(Br));var Mr=mi+":"+Br,Ci=Er[Mr];Ci===void 0&&(Vn.push(Br),Er[Mr]=Ci=Vn.length-1),qt.writeVarint(Ci)}}}function wt(nn,qt){return(qt<<3)+(7&nn)}function Vt(nn){return nn<<1^nn>>31}function St(nn,qt){for(var En=nn.loadGeometry(),zn=nn.type,Vn=0,gr=0,Er=En.length,Tr=0;Tr<Er;Tr++){var Br=En[Tr],hi=1;zn===1&&(hi=Br.length),qt.writeVarint(wt(1,hi));for(var mi=zn===3?Br.length-1:Br.length,Mr=0;Mr<mi;Mr++){Mr===1&&zn!==1&&qt.writeVarint(wt(2,mi-1));var Ci=Br[Mr].x-Vn,$i=Br[Mr].y-gr;qt.writeVarint(Vt(Ci)),qt.writeVarint(Vt($i)),Vn+=Ci,gr+=$i}zn===3&&qt.writeVarint(wt(7,1))}}function Gt(nn,qt){var En=typeof nn;En==="string"?qt.writeStringField(1,nn):En==="boolean"?qt.writeBooleanField(7,nn):En==="number"&&(nn%1!=0?qt.writeDoubleField(3,nn):nn<0?qt.writeSVarintField(6,nn):qt.writeVarintField(5,nn))}return Ut.exports=Ce,Ut.exports.fromVectorTileJs=Ce,Ut.exports.fromGeojsonVt=function(nn,qt){qt=qt||{};var En={};for(var zn in nn)En[zn]=new we(nn[zn].features,qt),En[zn].name=zn,En[zn].version=qt.version,En[zn].extent=qt.extent;return Ce({layers:En})},Ut.exports.GeoJSONWrapper=we,Ut.exports}(),Ee=i.d$(In);const $e={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:jt=>jt},We=Math.fround||(vt=new Float32Array(1),jt=>(vt[0]=+jt,vt[0]));var vt;const _t=3,at=5,Ft=6;class Dt{constructor(we){this.options=Object.assign(Object.create($e),we),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(we){const{log:Ce,minZoom:Ye,maxZoom:dt}=this.options;Ce&&console.time("total time");const ot=`prepare ${we.length} points`;Ce&&console.time(ot),this.points=we;const wt=[];for(let St=0;St<we.length;St++){const Gt=we[St];if(!Gt.geometry)continue;const[nn,qt]=Gt.geometry.coordinates,En=We(jn(nn)),zn=We(Te(qt));wt.push(En,zn,1/0,St,-1,1),this.options.reduce&&wt.push(0)}let Vt=this.trees[dt+1]=this._createTree(wt);Ce&&console.timeEnd(ot);for(let St=dt;St>=Ye;St--){const Gt=+Date.now();Vt=this.trees[St]=this._createTree(this._cluster(Vt,St)),Ce&&console.log("z%d: %d clusters in %dms",St,Vt.numItems,+Date.now()-Gt)}return Ce&&console.timeEnd("total time"),this}getClusters(we,Ce){let Ye=((we[0]+180)%360+360)%360-180;const dt=Math.max(-90,Math.min(90,we[1]));let ot=we[2]===180?180:((we[2]+180)%360+360)%360-180;const wt=Math.max(-90,Math.min(90,we[3]));if(we[2]-we[0]>=360)Ye=-180,ot=180;else if(Ye>ot){const qt=this.getClusters([Ye,dt,180,wt],Ce),En=this.getClusters([-180,dt,ot,wt],Ce);return qt.concat(En)}const Vt=this.trees[this._limitZoom(Ce)],St=Vt.range(jn(Ye),Te(wt),jn(ot),Te(dt)),Gt=Vt.data,nn=[];for(const qt of St){const En=this.stride*qt;nn.push(Gt[En+at]>1?yn(Gt,En,this.clusterProps):this.points[Gt[En+_t]])}return nn}getChildren(we){const Ce=this._getOriginId(we),Ye=this._getOriginZoom(we),dt="No cluster with the specified id.",ot=this.trees[Ye];if(!ot)throw new Error(dt);const wt=ot.data;if(Ce*this.stride>=wt.length)throw new Error(dt);const Vt=this.options.radius/(this.options.extent*Math.pow(2,Ye-1)),St=ot.within(wt[Ce*this.stride],wt[Ce*this.stride+1],Vt),Gt=[];for(const nn of St){const qt=nn*this.stride;wt[qt+4]===we&&Gt.push(wt[qt+at]>1?yn(wt,qt,this.clusterProps):this.points[wt[qt+_t]])}if(Gt.length===0)throw new Error(dt);return Gt}getLeaves(we,Ce,Ye){const dt=[];return this._appendLeaves(dt,we,Ce=Ce||10,Ye=Ye||0,0),dt}getTile(we,Ce,Ye){const dt=this.trees[this._limitZoom(we)],ot=Math.pow(2,we),{extent:wt,radius:Vt}=this.options,St=Vt/wt,Gt=(Ye-St)/ot,nn=(Ye+1+St)/ot,qt={features:[]};return this._addTileFeatures(dt.range((Ce-St)/ot,Gt,(Ce+1+St)/ot,nn),dt.data,Ce,Ye,ot,qt),Ce===0&&this._addTileFeatures(dt.range(1-St/ot,Gt,1,nn),dt.data,ot,Ye,ot,qt),Ce===ot-1&&this._addTileFeatures(dt.range(0,Gt,St/ot,nn),dt.data,-1,Ye,ot,qt),qt.features.length?qt:null}getClusterExpansionZoom(we){let Ce=this._getOriginZoom(we)-1;for(;Ce<=this.options.maxZoom;){const Ye=this.getChildren(we);if(Ce++,Ye.length!==1)break;we=Ye[0].properties.cluster_id}return Ce}_appendLeaves(we,Ce,Ye,dt,ot){const wt=this.getChildren(Ce);for(const Vt of wt){const St=Vt.properties;if(St&&St.cluster?ot+St.point_count<=dt?ot+=St.point_count:ot=this._appendLeaves(we,St.cluster_id,Ye,dt,ot):ot<dt?ot++:we.push(Vt),we.length===Ye)break}return ot}_createTree(we){const Ce=new i.by(we.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Ye=0;Ye<we.length;Ye+=this.stride)Ce.add(we[Ye],we[Ye+1]);return Ce.finish(),Ce.data=we,Ce}_addTileFeatures(we,Ce,Ye,dt,ot,wt){for(const Vt of we){const St=Vt*this.stride,Gt=Ce[St+at]>1;let nn,qt,En;if(Gt)nn=De(Ce,St,this.clusterProps),qt=Ce[St],En=Ce[St+1];else{const gr=this.points[Ce[St+_t]];nn=gr.properties;const[Er,Tr]=gr.geometry.coordinates;qt=jn(Er),En=Te(Tr)}const zn={type:1,geometry:[[Math.round(this.options.extent*(qt*ot-Ye)),Math.round(this.options.extent*(En*ot-dt))]],tags:nn};let Vn;Vn=Gt||this.options.generateId?Ce[St+_t]:this.points[Ce[St+_t]].id,Vn!==void 0&&(zn.id=Vn),wt.features.push(zn)}}_limitZoom(we){return Math.max(this.options.minZoom,Math.min(Math.floor(+we),this.options.maxZoom+1))}_cluster(we,Ce){const{radius:Ye,extent:dt,reduce:ot,minPoints:wt}=this.options,Vt=Ye/(dt*Math.pow(2,Ce)),St=we.data,Gt=[],nn=this.stride;for(let qt=0;qt<St.length;qt+=nn){if(St[qt+2]<=Ce)continue;St[qt+2]=Ce;const En=St[qt],zn=St[qt+1],Vn=we.within(St[qt],St[qt+1],Vt),gr=St[qt+at];let Er=gr;for(const Tr of Vn){const Br=Tr*nn;St[Br+2]>Ce&&(Er+=St[Br+at])}if(Er>gr&&Er>=wt){let Tr,Br=En*gr,hi=zn*gr,mi=-1;const Mr=(qt/nn<<5)+(Ce+1)+this.points.length;for(const Ci of Vn){const $i=Ci*nn;if(St[$i+2]<=Ce)continue;St[$i+2]=Ce;const jo=St[$i+at];Br+=St[$i]*jo,hi+=St[$i+1]*jo,St[$i+4]=Mr,ot&&(Tr||(Tr=this._map(St,qt,!0),mi=this.clusterProps.length,this.clusterProps.push(Tr)),ot(Tr,this._map(St,$i)))}St[qt+4]=Mr,Gt.push(Br/Er,hi/Er,1/0,Mr,-1,Er),ot&&Gt.push(mi)}else{for(let Tr=0;Tr<nn;Tr++)Gt.push(St[qt+Tr]);if(Er>1)for(const Tr of Vn){const Br=Tr*nn;if(!(St[Br+2]<=Ce)){St[Br+2]=Ce;for(let hi=0;hi<nn;hi++)Gt.push(St[Br+hi])}}}}return Gt}_getOriginId(we){return we-this.points.length>>5}_getOriginZoom(we){return(we-this.points.length)%32}_map(we,Ce,Ye){if(we[Ce+at]>1){const wt=this.clusterProps[we[Ce+Ft]];return Ye?Object.assign({},wt):wt}const dt=this.points[we[Ce+_t]].properties,ot=this.options.map(dt);return Ye&&ot===dt?Object.assign({},ot):ot}}function yn(jt,we,Ce){return{type:"Feature",id:jt[we+_t],properties:De(jt,we,Ce),geometry:{type:"Point",coordinates:[(Ye=jt[we],360*(Ye-.5)),Je(jt[we+1])]}};var Ye}function De(jt,we,Ce){const Ye=jt[we+at],dt=Ye>=1e4?`${Math.round(Ye/1e3)}k`:Ye>=1e3?Math.round(Ye/100)/10+"k":Ye,ot=jt[we+Ft],wt=ot===-1?{}:Object.assign({},Ce[ot]);return Object.assign(wt,{cluster:!0,cluster_id:jt[we+_t],point_count:Ye,point_count_abbreviated:dt})}function jn(jt){return jt/360+.5}function Te(jt){const we=Math.sin(jt*Math.PI/180),Ce=.5-.25*Math.log((1+we)/(1-we))/Math.PI;return Ce<0?0:Ce>1?1:Ce}function Je(jt){const we=(180-360*jt)*Math.PI/180;return 360*Math.atan(Math.exp(we))/Math.PI-90}function Fe(jt,we,Ce,Ye){let dt=Ye;const ot=we+(Ce-we>>1);let wt,Vt=Ce-we;const St=jt[we],Gt=jt[we+1],nn=jt[Ce],qt=jt[Ce+1];for(let En=we+3;En<Ce;En+=3){const zn=Re(jt[En],jt[En+1],St,Gt,nn,qt);if(zn>dt)wt=En,dt=zn;else if(zn===dt){const Vn=Math.abs(En-ot);Vn<Vt&&(wt=En,Vt=Vn)}}dt>Ye&&(wt-we>3&&Fe(jt,we,wt,Ye),jt[wt+2]=dt,Ce-wt>3&&Fe(jt,wt,Ce,Ye))}function Re(jt,we,Ce,Ye,dt,ot){let wt=dt-Ce,Vt=ot-Ye;if(wt!==0||Vt!==0){const St=((jt-Ce)*wt+(we-Ye)*Vt)/(wt*wt+Vt*Vt);St>1?(Ce=dt,Ye=ot):St>0&&(Ce+=wt*St,Ye+=Vt*St)}return wt=jt-Ce,Vt=we-Ye,wt*wt+Vt*Vt}function Yt(jt,we,Ce,Ye){const dt={id:jt??null,type:we,geometry:Ce,tags:Ye,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(we==="Point"||we==="MultiPoint"||we==="LineString")rn(dt,Ce);else if(we==="Polygon")rn(dt,Ce[0]);else if(we==="MultiLineString")for(const ot of Ce)rn(dt,ot);else if(we==="MultiPolygon")for(const ot of Ce)rn(dt,ot[0]);return dt}function rn(jt,we){for(let Ce=0;Ce<we.length;Ce+=3)jt.minX=Math.min(jt.minX,we[Ce]),jt.minY=Math.min(jt.minY,we[Ce+1]),jt.maxX=Math.max(jt.maxX,we[Ce]),jt.maxY=Math.max(jt.maxY,we[Ce+1])}function zt(jt,we,Ce,Ye){if(!we.geometry)return;const dt=we.geometry.coordinates;if(dt&&dt.length===0)return;const ot=we.geometry.type,wt=Math.pow(Ce.tolerance/((1<<Ce.maxZoom)*Ce.extent),2);let Vt=[],St=we.id;if(Ce.promoteId?St=we.properties[Ce.promoteId]:Ce.generateId&&(St=Ye||0),ot==="Point")Jt(dt,Vt);else if(ot==="MultiPoint")for(const Gt of dt)Jt(Gt,Vt);else if(ot==="LineString")gn(dt,Vt,wt,!1);else if(ot==="MultiLineString"){if(Ce.lineMetrics){for(const Gt of dt)Vt=[],gn(Gt,Vt,wt,!1),jt.push(Yt(St,"LineString",Vt,we.properties));return}fn(dt,Vt,wt,!1)}else if(ot==="Polygon")fn(dt,Vt,wt,!0);else{if(ot!=="MultiPolygon"){if(ot==="GeometryCollection"){for(const Gt of we.geometry.geometries)zt(jt,{id:St,geometry:Gt,properties:we.properties},Ce,Ye);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Gt of dt){const nn=[];fn(Gt,nn,wt,!0),Vt.push(nn)}}jt.push(Yt(St,ot,Vt,we.properties))}function Jt(jt,we){we.push(Fn(jt[0]),Wn(jt[1]),0)}function gn(jt,we,Ce,Ye){let dt,ot,wt=0;for(let St=0;St<jt.length;St++){const Gt=Fn(jt[St][0]),nn=Wn(jt[St][1]);we.push(Gt,nn,0),St>0&&(wt+=Ye?(dt*nn-Gt*ot)/2:Math.sqrt(Math.pow(Gt-dt,2)+Math.pow(nn-ot,2))),dt=Gt,ot=nn}const Vt=we.length-3;we[2]=1,Fe(we,0,Vt,Ce),we[Vt+2]=1,we.size=Math.abs(wt),we.start=0,we.end=we.size}function fn(jt,we,Ce,Ye){for(let dt=0;dt<jt.length;dt++){const ot=[];gn(jt[dt],ot,Ce,Ye),we.push(ot)}}function Fn(jt){return jt/360+.5}function Wn(jt){const we=Math.sin(jt*Math.PI/180),Ce=.5-.25*Math.log((1+we)/(1-we))/Math.PI;return Ce<0?0:Ce>1?1:Ce}function _n(jt,we,Ce,Ye,dt,ot,wt,Vt){if(Ye/=we,ot>=(Ce/=we)&&wt<Ye)return jt;if(wt<Ce||ot>=Ye)return null;const St=[];for(const Gt of jt){const nn=Gt.geometry;let qt=Gt.type;const En=dt===0?Gt.minX:Gt.minY,zn=dt===0?Gt.maxX:Gt.maxY;if(En>=Ce&&zn<Ye){St.push(Gt);continue}if(zn<Ce||En>=Ye)continue;let Vn=[];if(qt==="Point"||qt==="MultiPoint")er(nn,Vn,Ce,Ye,dt);else if(qt==="LineString")ar(nn,Vn,Ce,Ye,dt,!1,Vt.lineMetrics);else if(qt==="MultiLineString")lr(nn,Vn,Ce,Ye,dt,!1);else if(qt==="Polygon")lr(nn,Vn,Ce,Ye,dt,!0);else if(qt==="MultiPolygon")for(const gr of nn){const Er=[];lr(gr,Er,Ce,Ye,dt,!0),Er.length&&Vn.push(Er)}if(Vn.length){if(Vt.lineMetrics&&qt==="LineString"){for(const gr of Vn)St.push(Yt(Gt.id,qt,gr,Gt.tags));continue}qt!=="LineString"&&qt!=="MultiLineString"||(Vn.length===1?(qt="LineString",Vn=Vn[0]):qt="MultiLineString"),qt!=="Point"&&qt!=="MultiPoint"||(qt=Vn.length===3?"Point":"MultiPoint"),St.push(Yt(Gt.id,qt,Vn,Gt.tags))}}return St.length?St:null}function er(jt,we,Ce,Ye,dt){for(let ot=0;ot<jt.length;ot+=3){const wt=jt[ot+dt];wt>=Ce&&wt<=Ye&&Ir(we,jt[ot],jt[ot+1],jt[ot+2])}}function ar(jt,we,Ce,Ye,dt,ot,wt){let Vt=Fr(jt);const St=dt===0?pr:to;let Gt,nn,qt=jt.start;for(let Er=0;Er<jt.length-3;Er+=3){const Tr=jt[Er],Br=jt[Er+1],hi=jt[Er+2],mi=jt[Er+3],Mr=jt[Er+4],Ci=dt===0?Tr:Br,$i=dt===0?mi:Mr;let jo=!1;wt&&(Gt=Math.sqrt(Math.pow(Tr-mi,2)+Math.pow(Br-Mr,2))),Ci<Ce?$i>Ce&&(nn=St(Vt,Tr,Br,mi,Mr,Ce),wt&&(Vt.start=qt+Gt*nn)):Ci>Ye?$i<Ye&&(nn=St(Vt,Tr,Br,mi,Mr,Ye),wt&&(Vt.start=qt+Gt*nn)):Ir(Vt,Tr,Br,hi),$i<Ce&&Ci>=Ce&&(nn=St(Vt,Tr,Br,mi,Mr,Ce),jo=!0),$i>Ye&&Ci<=Ye&&(nn=St(Vt,Tr,Br,mi,Mr,Ye),jo=!0),!ot&&jo&&(wt&&(Vt.end=qt+Gt*nn),we.push(Vt),Vt=Fr(jt)),wt&&(qt+=Gt)}let En=jt.length-3;const zn=jt[En],Vn=jt[En+1],gr=dt===0?zn:Vn;gr>=Ce&&gr<=Ye&&Ir(Vt,zn,Vn,jt[En+2]),En=Vt.length-3,ot&&En>=3&&(Vt[En]!==Vt[0]||Vt[En+1]!==Vt[1])&&Ir(Vt,Vt[0],Vt[1],Vt[2]),Vt.length&&we.push(Vt)}function Fr(jt){const we=[];return we.size=jt.size,we.start=jt.start,we.end=jt.end,we}function lr(jt,we,Ce,Ye,dt,ot){for(const wt of jt)ar(wt,we,Ce,Ye,dt,ot,!1)}function Ir(jt,we,Ce,Ye){jt.push(we,Ce,Ye)}function pr(jt,we,Ce,Ye,dt,ot){const wt=(ot-we)/(Ye-we);return Ir(jt,ot,Ce+(dt-Ce)*wt,1),wt}function to(jt,we,Ce,Ye,dt,ot){const wt=(ot-Ce)/(dt-Ce);return Ir(jt,we+(Ye-we)*wt,ot,1),wt}function xi(jt,we){const Ce=[];for(let Ye=0;Ye<jt.length;Ye++){const dt=jt[Ye],ot=dt.type;let wt;if(ot==="Point"||ot==="MultiPoint"||ot==="LineString")wt=No(dt.geometry,we);else if(ot==="MultiLineString"||ot==="Polygon"){wt=[];for(const Vt of dt.geometry)wt.push(No(Vt,we))}else if(ot==="MultiPolygon"){wt=[];for(const Vt of dt.geometry){const St=[];for(const Gt of Vt)St.push(No(Gt,we));wt.push(St)}}Ce.push(Yt(dt.id,ot,wt,dt.tags))}return Ce}function No(jt,we){const Ce=[];Ce.size=jt.size,jt.start!==void 0&&(Ce.start=jt.start,Ce.end=jt.end);for(let Ye=0;Ye<jt.length;Ye+=3)Ce.push(jt[Ye]+we,jt[Ye+1],jt[Ye+2]);return Ce}function Fi(jt,we){if(jt.transformed)return jt;const Ce=1<<jt.z,Ye=jt.x,dt=jt.y;for(const ot of jt.features){const wt=ot.geometry,Vt=ot.type;if(ot.geometry=[],Vt===1)for(let St=0;St<wt.length;St+=2)ot.geometry.push(pi(wt[St],wt[St+1],we,Ce,Ye,dt));else for(let St=0;St<wt.length;St++){const Gt=[];for(let nn=0;nn<wt[St].length;nn+=2)Gt.push(pi(wt[St][nn],wt[St][nn+1],we,Ce,Ye,dt));ot.geometry.push(Gt)}}return jt.transformed=!0,jt}function pi(jt,we,Ce,Ye,dt,ot){return[Math.round(Ce*(jt*Ye-dt)),Math.round(Ce*(we*Ye-ot))]}function Wi(jt,we,Ce,Ye,dt){const ot=we===dt.maxZoom?0:dt.tolerance/((1<<we)*dt.extent),wt={features:[],numPoints:0,numSimplified:0,numFeatures:jt.length,source:null,x:Ce,y:Ye,z:we,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Vt of jt)Ti(wt,Vt,ot,dt);return wt}function Ti(jt,we,Ce,Ye){const dt=we.geometry,ot=we.type,wt=[];if(jt.minX=Math.min(jt.minX,we.minX),jt.minY=Math.min(jt.minY,we.minY),jt.maxX=Math.max(jt.maxX,we.maxX),jt.maxY=Math.max(jt.maxY,we.maxY),ot==="Point"||ot==="MultiPoint")for(let Vt=0;Vt<dt.length;Vt+=3)wt.push(dt[Vt],dt[Vt+1]),jt.numPoints++,jt.numSimplified++;else if(ot==="LineString")Jr(wt,dt,jt,Ce,!1,!1);else if(ot==="MultiLineString"||ot==="Polygon")for(let Vt=0;Vt<dt.length;Vt++)Jr(wt,dt[Vt],jt,Ce,ot==="Polygon",Vt===0);else if(ot==="MultiPolygon")for(let Vt=0;Vt<dt.length;Vt++){const St=dt[Vt];for(let Gt=0;Gt<St.length;Gt++)Jr(wt,St[Gt],jt,Ce,!0,Gt===0)}if(wt.length){let Vt=we.tags||null;if(ot==="LineString"&&Ye.lineMetrics){Vt={};for(const Gt in we.tags)Vt[Gt]=we.tags[Gt];Vt.mapbox_clip_start=dt.start/dt.size,Vt.mapbox_clip_end=dt.end/dt.size}const St={geometry:wt,type:ot==="Polygon"||ot==="MultiPolygon"?3:ot==="LineString"||ot==="MultiLineString"?2:1,tags:Vt};we.id!==null&&(St.id=we.id),jt.features.push(St)}}function Jr(jt,we,Ce,Ye,dt,ot){const wt=Ye*Ye;if(Ye>0&&we.size<(dt?wt:Ye))return void(Ce.numPoints+=we.length/3);const Vt=[];for(let St=0;St<we.length;St+=3)(Ye===0||we[St+2]>wt)&&(Ce.numSimplified++,Vt.push(we[St],we[St+1])),Ce.numPoints++;dt&&function(St,Gt){let nn=0;for(let qt=0,En=St.length,zn=En-2;qt<En;zn=qt,qt+=2)nn+=(St[qt]-St[zn])*(St[qt+1]+St[zn+1]);if(nn>0===Gt)for(let qt=0,En=St.length;qt<En/2;qt+=2){const zn=St[qt],Vn=St[qt+1];St[qt]=St[En-2-qt],St[qt+1]=St[En-1-qt],St[En-2-qt]=zn,St[En-1-qt]=Vn}}(Vt,ot),jt.push(Vt)}const Xi={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Ns{constructor(we,Ce){const Ye=(Ce=this.options=function(ot,wt){for(const Vt in wt)ot[Vt]=wt[Vt];return ot}(Object.create(Xi),Ce)).debug;if(Ye&&console.time("preprocess data"),Ce.maxZoom<0||Ce.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ce.promoteId&&Ce.generateId)throw new Error("promoteId and generateId cannot be used together.");let dt=function(ot,wt){const Vt=[];if(ot.type==="FeatureCollection")for(let St=0;St<ot.features.length;St++)zt(Vt,ot.features[St],wt,St);else zt(Vt,ot.type==="Feature"?ot:{geometry:ot},wt);return Vt}(we,Ce);this.tiles={},this.tileCoords=[],Ye&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ce.indexMaxZoom,Ce.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),dt=function(ot,wt){const Vt=wt.buffer/wt.extent;let St=ot;const Gt=_n(ot,1,-1-Vt,Vt,0,-1,2,wt),nn=_n(ot,1,1-Vt,2+Vt,0,-1,2,wt);return(Gt||nn)&&(St=_n(ot,1,-Vt,1+Vt,0,-1,2,wt)||[],Gt&&(St=xi(Gt,1).concat(St)),nn&&(St=St.concat(xi(nn,-1)))),St}(dt,Ce),dt.length&&this.splitTile(dt,0,0,0),Ye&&(dt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(we,Ce,Ye,dt,ot,wt,Vt){const St=[we,Ce,Ye,dt],Gt=this.options,nn=Gt.debug;for(;St.length;){dt=St.pop(),Ye=St.pop(),Ce=St.pop(),we=St.pop();const qt=1<<Ce,En=ns(Ce,Ye,dt);let zn=this.tiles[En];if(!zn&&(nn>1&&console.time("creation"),zn=this.tiles[En]=Wi(we,Ce,Ye,dt,Gt),this.tileCoords.push({z:Ce,x:Ye,y:dt}),nn)){nn>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ce,Ye,dt,zn.numFeatures,zn.numPoints,zn.numSimplified),console.timeEnd("creation"));const jo=`z${Ce}`;this.stats[jo]=(this.stats[jo]||0)+1,this.total++}if(zn.source=we,ot==null){if(Ce===Gt.indexMaxZoom||zn.numPoints<=Gt.indexMaxPoints)continue}else{if(Ce===Gt.maxZoom||Ce===ot)continue;if(ot!=null){const jo=ot-Ce;if(Ye!==wt>>jo||dt!==Vt>>jo)continue}}if(zn.source=null,we.length===0)continue;nn>1&&console.time("clipping");const Vn=.5*Gt.buffer/Gt.extent,gr=.5-Vn,Er=.5+Vn,Tr=1+Vn;let Br=null,hi=null,mi=null,Mr=null,Ci=_n(we,qt,Ye-Vn,Ye+Er,0,zn.minX,zn.maxX,Gt),$i=_n(we,qt,Ye+gr,Ye+Tr,0,zn.minX,zn.maxX,Gt);we=null,Ci&&(Br=_n(Ci,qt,dt-Vn,dt+Er,1,zn.minY,zn.maxY,Gt),hi=_n(Ci,qt,dt+gr,dt+Tr,1,zn.minY,zn.maxY,Gt),Ci=null),$i&&(mi=_n($i,qt,dt-Vn,dt+Er,1,zn.minY,zn.maxY,Gt),Mr=_n($i,qt,dt+gr,dt+Tr,1,zn.minY,zn.maxY,Gt),$i=null),nn>1&&console.timeEnd("clipping"),St.push(Br||[],Ce+1,2*Ye,2*dt),St.push(hi||[],Ce+1,2*Ye,2*dt+1),St.push(mi||[],Ce+1,2*Ye+1,2*dt),St.push(Mr||[],Ce+1,2*Ye+1,2*dt+1)}}getTile(we,Ce,Ye){we=+we,Ce=+Ce,Ye=+Ye;const dt=this.options,{extent:ot,debug:wt}=dt;if(we<0||we>24)return null;const Vt=1<<we,St=ns(we,Ce=Ce+Vt&Vt-1,Ye);if(this.tiles[St])return Fi(this.tiles[St],ot);wt>1&&console.log("drilling down to z%d-%d-%d",we,Ce,Ye);let Gt,nn=we,qt=Ce,En=Ye;for(;!Gt&&nn>0;)nn--,qt>>=1,En>>=1,Gt=this.tiles[ns(nn,qt,En)];return Gt&&Gt.source?(wt>1&&(console.log("found parent tile z%d-%d-%d",nn,qt,En),console.time("drilling down")),this.splitTile(Gt.source,nn,qt,En,we,Ce,Ye),wt>1&&console.timeEnd("drilling down"),this.tiles[St]?Fi(this.tiles[St],ot):null):null}}function ns(jt,we,Ce){return 32*((1<<jt)*Ce+we)+jt}function lo(jt,we){const Ce=jt.tileID.canonical;if(!this._geoJSONIndex)return void we(null,null);const Ye=this._geoJSONIndex.getTile(Ce.z,Ce.x,Ce.y);if(!Ye)return void we(null,null);const dt=new Ie(Ye.features);let ot=Ee(dt);ot.byteOffset===0&&ot.byteLength===ot.buffer.byteLength||(ot=new Uint8Array(ot)),we(null,{vectorTile:dt,rawData:ot.buffer})}class Gr extends Y{constructor(we,Ce,Ye,dt,ot,wt){super(we,Ce,Ye,dt,lo,wt),ot&&(this.loadGeoJSON=ot),this._dynamicIndex=new ue}loadData(we,Ce){const Ye=we&&we.request,dt=Ye&&Ye.collectResourceTiming;this.loadGeoJSON(we,(ot,wt)=>{if(ot||!wt)return Ce(ot);if(typeof wt!="object")return Ce(new Error(`Input data given to '${we.source}' is not a valid GeoJSON object.`));{try{if(we.filter){const St=i.M(we.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(St.result==="error")throw new Error(St.value.map(Gt=>`${Gt.key}: ${Gt.message}`).join(", "));wt.features=wt.features.filter(Gt=>St.value.evaluate({zoom:0},Gt))}we.dynamic?(wt.type==="Feature"&&(wt={type:"FeatureCollection",features:[wt]}),we.append||(this._dynamicIndex.clear(),this.loaded={}),this._dynamicIndex.load(wt.features,this.loaded),we.cluster&&(wt.features=this._dynamicIndex.getFeatures())):this.loaded={},this._geoJSONIndex=we.cluster?new Dt(function({superclusterOptions:St,clusterProperties:Gt}){if(!Gt||!St)return St;const nn={},qt={},En={accumulated:null,zoom:0},zn={properties:null},Vn=Object.keys(Gt);for(const gr of Vn){const[Er,Tr]=Gt[gr],Br=i.M(Tr),hi=i.M(typeof Er=="string"?[Er,["accumulated"],["get",gr]]:Er);nn[gr]=Br.value,qt[gr]=hi.value}return St.map=gr=>{zn.properties=gr;const Er={};for(const Tr of Vn)Er[Tr]=nn[Tr].evaluate(En,zn);return Er},St.reduce=(gr,Er)=>{zn.properties=Er;for(const Tr of Vn)En.accumulated=gr[Tr],gr[Tr]=qt[Tr].evaluate(En,zn)},St}(we)).load(wt.features):we.dynamic?this._dynamicIndex:function(St,Gt){return new Ns(St,Gt)}(wt,we.geojsonVtOptions)}catch(St){return Ce(St)}const Vt={};if(dt){const St=b(Ye);St&&(Vt.resourceTiming={},Vt.resourceTiming[we.source]=JSON.parse(JSON.stringify(St)))}Ce(null,Vt)}})}reloadTile(we,Ce){const Ye=this.loaded;return Ye&&Ye[we.uid]?we.partial?Ce(null,void 0):super.reloadTile(we,Ce):this.loadTile(we,Ce)}loadGeoJSON(we,Ce){if(we.request)i.n(we.request,Ce);else{if(typeof we.data!="string")return Ce(new Error(`Input data given to '${we.source}' is not a valid GeoJSON object.`));try{return Ce(null,JSON.parse(we.data))}catch{return Ce(new Error(`Input data given to '${we.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(we,Ce){try{Ce(null,this._geoJSONIndex.getClusterExpansionZoom(we.clusterId))}catch(Ye){Ce(Ye)}}getClusterChildren(we,Ce){try{Ce(null,this._geoJSONIndex.getChildren(we.clusterId))}catch(Ye){Ce(Ye)}}getClusterLeaves(we,Ce){try{Ce(null,this._geoJSONIndex.getLeaves(we.clusterId,we.limit,we.offset))}catch(Ye){Ce(Ye)}}}class Ni{constructor(we,Ce){this.tileID=new i.aA(we.tileID.overscaledZ,we.tileID.wrap,we.tileID.canonical.z,we.tileID.canonical.x,we.tileID.canonical.y),this.tileZoom=we.tileZoom,this.uid=we.uid,this.zoom=we.zoom,this.canonical=we.tileID.canonical,this.pixelRatio=we.pixelRatio,this.tileSize=we.tileSize,this.source=we.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=we.projection,this.brightness=Ce}parse(we,Ce,Ye,dt){this.status="parsing";const ot=new i.aA(Ye.tileID.overscaledZ,Ye.tileID.wrap,Ye.tileID.canonical.z,Ye.tileID.canonical.x,Ye.tileID.canonical.y),wt={},Vt=Ce.familiesBySource[Ye.source],St=new i.dR(ot,Ye.promoteId);return St.bucketLayerIDs=[],St.is3DTile=!0,i.e0(we).then(Gt=>{if(!Gt)return dt(new Error("Could not parse tile"));const nn=i.e1(Gt,1/i.c8(Ye.tileID.canonical)),qt=Gt.json.extensionsUsed&&Gt.json.extensionsUsed.includes("MAPBOX_mesh_features")||Gt.json.asset.extras&&Gt.json.asset.extras.MAPBOX_mesh_features,En=Gt.json.extensionsUsed&&Gt.json.extensionsUsed.includes("EXT_meshopt_compression"),zn=new i.a3(this.zoom,{brightness:this.brightness});for(const Vn in Vt)for(const gr of Vt[Vn]){const Er=gr[0];St.bucketLayerIDs.push(gr.map(Br=>Br.id)),Er.recalculate(zn,[]);const Tr=new i.e2(nn,ot,qt,En,this.brightness,St);qt||(Tr.needsUpload=!0),wt[Er.fqid]=Tr,Tr.evaluate(Er)}this.status="done",dt(null,{buckets:wt,featureIndex:St})}).catch(Gt=>dt(new Error(Gt.message)))}}class Pa{constructor(we,Ce,Ye,dt,ot,wt){this.actor=we,this.layerIndex=Ce,this.brightness=wt,this.loading={},this.loaded={}}loadTile(we,Ce){const Ye=we.uid,dt=this.loading[Ye]=new Ni(we,this.brightness);i.bc(we.request,(ot,wt)=>{const Vt=!this.loading[Ye];return delete this.loading[Ye],Vt||ot?(dt.status="done",Vt||(this.loaded[Ye]=dt),Ce(ot)):wt&&wt.byteLength!==0?void dt.parse(wt,this.layerIndex,we,(St,Gt)=>{dt.status="done",this.loaded=this.loaded||{},this.loaded[Ye]=dt,St||!Gt?Ce(St):Ce(null,Gt)}):(dt.status="done",this.loaded[Ye]=dt,Ce())})}reloadTile(we,Ce){const Ye=this.loaded,dt=we.uid;if(Ye&&Ye[dt]){const ot=Ye[dt];ot.projection=we.projection,ot.brightness=we.brightness;const wt=(Vt,St)=>{ot.reloadCallback&&(delete ot.reloadCallback,this.loadTile(we,Ce)),Ce(Vt,St)};ot.status==="parsing"?ot.reloadCallback=wt:ot.status==="done"&&this.loadTile(we,Ce)}}abortTile(we,Ce){const Ye=we.uid;this.loading[Ye]&&delete this.loading[Ye],Ce()}removeTile(we,Ce){const Ye=this.loaded,dt=we.uid;Ye&&Ye[dt]&&delete Ye[dt],Ce()}}class Zo{constructor(we){this.self=we,this.actor=new i.e3(we,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=i.bL({name:"mercator"}),this.workerSourceTypes={vector:Y,geojson:Gr,"batched-model":Pa},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Ce,Ye)=>{if(this.workerSourceTypes[Ce])throw new Error(`Worker source with name "${Ce}" already registered.`);this.workerSourceTypes[Ce]=Ye},this.self.registerRTLTextPlugin=Ce=>{if(i.e4.isParsed())throw new Error("RTL text plugin already registered.");i.e4.applyArabicShaping=Ce.applyArabicShaping,i.e4.processBidirectionalText=Ce.processBidirectionalText,i.e4.processStyledBidirectionalText=Ce.processStyledBidirectionalText}}clearCaches(we,Ce,Ye){delete this.layerIndexes[we],delete this.availableImages[we],delete this.workerSources[we],delete this.demWorkerSources[we],delete this.rasterArrayWorkerSource,Ye()}checkIfReady(we,Ce,Ye){Ye()}setReferrer(we,Ce){this.referrer=Ce}spriteLoaded(we,{scope:Ce,isLoaded:Ye}){if(this.isSpriteLoaded[we]||(this.isSpriteLoaded[we]={}),this.isSpriteLoaded[we][Ce]=Ye,this.workerSources[we]&&this.workerSources[we][Ce])for(const dt in this.workerSources[we][Ce]){const ot=this.workerSources[we][Ce][dt];for(const wt in ot){const Vt=ot[wt];Vt instanceof Y&&(Vt.isSpriteLoaded=Ye,Vt.fire(new i.x("isSpriteLoaded")))}}}setImages(we,{scope:Ce,images:Ye},dt){if(this.availableImages[we]||(this.availableImages[we]={}),this.availableImages[we][Ce]=Ye,this.workerSources[we]&&this.workerSources[we][Ce]){for(const ot in this.workerSources[we][Ce]){const wt=this.workerSources[we][Ce][ot];for(const Vt in wt)wt[Vt].availableImages=Ye}dt()}else dt()}setProjection(we,Ce){this.projections[we]=i.bL(Ce)}setBrightness(we,Ce,Ye){this.brightness=Ce,Ye()}setLayers(we,Ce,Ye){this.getLayerIndex(we,Ce.scope).replace(Ce.layers,Ce.options),Ye()}updateLayers(we,Ce,Ye){this.getLayerIndex(we,Ce.scope).update(Ce.layers,Ce.removedIds,Ce.options),Ye()}loadTile(we,Ce,Ye){Ce.projection=this.projections[we]||this.defaultProjection,this.getWorkerSource(we,Ce.type,Ce.source,Ce.scope).loadTile(Ce,Ye)}loadDEMTile(we,Ce,Ye){this.getDEMWorkerSource(we,Ce.source,Ce.scope).loadTile(Ce,Ye)}decodeRasterArray(we,Ce,Ye){this.getRasterArrayWorkerSource().decodeRasterArray(Ce,Ye)}reloadTile(we,Ce,Ye){Ce.projection=this.projections[we]||this.defaultProjection,this.getWorkerSource(we,Ce.type,Ce.source,Ce.scope).reloadTile(Ce,Ye)}abortTile(we,Ce,Ye){this.getWorkerSource(we,Ce.type,Ce.source,Ce.scope).abortTile(Ce,Ye)}removeTile(we,Ce,Ye){this.getWorkerSource(we,Ce.type,Ce.source,Ce.scope).removeTile(Ce,Ye)}removeSource(we,Ce,Ye){if(!(this.workerSources[we]&&this.workerSources[we][Ce.scope]&&this.workerSources[we][Ce.scope][Ce.type]&&this.workerSources[we][Ce.scope][Ce.type][Ce.source]))return;const dt=this.workerSources[we][Ce.scope][Ce.type][Ce.source];delete this.workerSources[we][Ce.scope][Ce.type][Ce.source],dt.removeSource!==void 0?dt.removeSource(Ce,Ye):Ye()}loadWorkerSource(we,Ce,Ye){try{this.self.importScripts(Ce.url),Ye()}catch(dt){Ye(dt.toString())}}syncRTLPluginState(we,Ce,Ye){try{i.e4.setState(Ce);const dt=i.e4.getPluginURL();if(i.e4.isLoaded()&&!i.e4.isParsed()&&dt!=null){this.self.importScripts(dt);const ot=i.e4.isParsed();Ye(ot?void 0:new Error(`RTL Text Plugin failed to import scripts from ${dt}`),ot)}}catch(dt){Ye(dt.toString())}}setDracoUrl(we,Ce){this.dracoUrl=Ce}getAvailableImages(we,Ce){this.availableImages[we]||(this.availableImages[we]={});let Ye=this.availableImages[we][Ce];return Ye||(Ye=[]),Ye}getLayerIndex(we,Ce){this.layerIndexes[we]||(this.layerIndexes[we]={});let Ye=this.layerIndexes[we][Ce];return Ye||(Ye=this.layerIndexes[we][Ce]=new O,Ye.scope=Ce),Ye}getWorkerSource(we,Ce,Ye,dt){return this.workerSources[we]||(this.workerSources[we]={}),this.workerSources[we][dt]||(this.workerSources[we][dt]={}),this.workerSources[we][dt][Ce]||(this.workerSources[we][dt][Ce]={}),this.isSpriteLoaded[we]||(this.isSpriteLoaded[we]={}),this.workerSources[we][dt][Ce][Ye]||(this.workerSources[we][dt][Ce][Ye]=new this.workerSourceTypes[Ce]({send:(ot,wt,Vt,St,Gt,nn)=>{this.actor.send(ot,wt,Vt,we,Gt,nn)},scheduler:this.actor.scheduler},this.getLayerIndex(we,dt),this.getAvailableImages(we,dt),this.isSpriteLoaded[we][dt],void 0,this.brightness)),this.workerSources[we][dt][Ce][Ye]}getDEMWorkerSource(we,Ce,Ye){return this.demWorkerSources[we]||(this.demWorkerSources[we]={}),this.demWorkerSources[we][Ye]||(this.demWorkerSources[we][Ye]={}),this.demWorkerSources[we][Ye][Ce]||(this.demWorkerSources[we][Ye][Ce]=new te),this.demWorkerSources[we][Ye][Ce]}getRasterArrayWorkerSource(){return this.rasterArrayWorkerSource||(this.rasterArrayWorkerSource=new be),this.rasterArrayWorkerSource}enforceCacheSizeLimit(we,Ce){i.e5(Ce)}getWorkerPerformanceMetrics(we,Ce,Ye){Ye(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Zo(self)),Zo}),h(["./shared"],function(i){var b="3.7.0";const E={create:"create",load:"load",fullLoad:"fullLoad"},I={mark(m){performance.mark(m)},measure(m,a,u){performance.measure(m,a,u)}};function O(m){const a=m.name.split("?")[0];return i.a(a)&&a.includes("mapbox-gl.js")?"javascript":i.a(a)&&a.includes("mapbox-gl.css")?"css":i.b(a)?"fontRange":i.c(a)?"sprite":i.i(a)?"style":i.d(a)?"tilejson":"other"}var M,G={},q=function(){if(M)return G;function m(g){return!a(g)}function a(g){return typeof window>"u"||typeof document>"u"?"not a browser":function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var x,B,k=new Blob([""],{type:"text/javascript"}),z=URL.createObjectURL(k);try{B=new Worker(z),x=!0}catch{x=!1}return B&&B.terminate(),URL.revokeObjectURL(z),x}()?function(){var x=document.createElement("canvas");x.width=x.height=1;var B=x.getContext("2d");if(!B)return!1;var k=B.getImageData(0,0,1,1);return k&&k.width===x.width}()?(u[v=g&&g.failIfMajorPerformanceCaveat]===void 0&&(u[v]=function(x){var B,k=function(z){var Q=document.createElement("canvas"),j=Object.create(m.webGLContextAttributes);return j.failIfMajorPerformanceCaveat=z,Q.getContext("webgl2",j)}(x);if(!k)return!1;try{B=k.createShader(k.VERTEX_SHADER)}catch{return!1}return!(!B||k.isContextLost())&&(k.shaderSource(B,"void main() {}"),k.compileShader(B),k.getShaderParameter(B,k.COMPILE_STATUS)===!0)}(v)),u[v]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL2 support"):"insufficient Canvas/getImageData support":"insufficient worker support";var v}M=1,G.supported=m,G.notSupportedReason=a;var u={};return m.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0},G}();function Z(m,a,u){const g=document.createElement(m);return a!=null&&(g.className=a),u&&u.appendChild(g),g}function Y(m,a,u){const g=document.createElementNS("http://www.w3.org/2000/svg",m);for(const v of Object.keys(a))g.setAttributeNS(null,v,String(a[v]));return u&&u.appendChild(g),g}const te=typeof document<"u"?document.documentElement&&document.documentElement.style:null,be=te&&te.userSelect!==void 0?"userSelect":"WebkitUserSelect";let Pe;function Se(){te&&be&&(Pe=te[be],te[be]="none")}function Ie(){te&&be&&(te[be]=Pe)}function Ae(m){m.preventDefault(),m.stopPropagation(),window.removeEventListener("click",Ae,!0)}function ne(){window.addEventListener("click",Ae,!0),window.setTimeout(()=>{window.removeEventListener("click",Ae,!0)},0)}function ue(m,a){const u=m.getBoundingClientRect();return le(m,u,a)}function ye(m,a){const u=m.getBoundingClientRect(),g=[];for(let v=0;v<a.length;v++)g.push(le(m,u,a[v]));return g}function se(m){return window.InstallTrigger!==void 0&&m.button===2&&m.ctrlKey&&window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:m.button}function le(m,a,u){const g=m.offsetWidth===a.width?1:m.offsetWidth/a.width;return new i.P((u.clientX-a.left)*g,(u.clientY-a.top)*g)}const ge="01",lt="NO_ACCESS_TOKEN";class Ot{constructor(a,u,g){this._transformRequestFn=a,this._customAccessToken=u,this._silenceAuthErrors=!!g,this._createSkuToken()}_createSkuToken(){const a=function(){let u="";for(let g=0;g<10;g++)u+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ge,u].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=a.token,this._skuTokenExpiresAt=a.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(a,u){return this._transformRequestFn&&this._transformRequestFn(a,u)||{url:a}}normalizeStyleURL(a,u){if(!i.f(a))return a;const g=Tt(a);return g.params.push(`sdk=js-${b}`),g.path=`/styles/v1${g.path}`,this._makeAPIURL(g,this._customAccessToken||u)}normalizeGlyphsURL(a,u){if(!i.f(a))return a;const g=Tt(a);return g.path=`/fonts/v1${g.path}`,this._makeAPIURL(g,this._customAccessToken||u)}normalizeModelURL(a,u){if(!i.f(a))return a;const g=Tt(a);return g.path=`/models/v1${g.path}`,this._makeAPIURL(g,this._customAccessToken||u)}normalizeSourceURL(a,u,g,v){if(!i.f(a))return a;const x=Tt(a);return x.path=`/v4/${x.authority}.json`,x.params.push("secure"),g&&x.params.push(`language=${g}`),v&&x.params.push(`worldview=${v}`),this._makeAPIURL(x,this._customAccessToken||u)}normalizeSpriteURL(a,u,g,v){const x=Tt(a);return i.f(a)?(x.path=`/styles/v1${x.path}/sprite${u}${g}`,this._makeAPIURL(x,this._customAccessToken||v)):(x.path+=`${u}${g}`,Mt(x))}normalizeTileURL(a,u,g){if(this._isSkuTokenExpired()&&this._createSkuToken(),a&&!i.f(a))return a;const v=Tt(a);v.path=v.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${u||g&&v.authority!=="raster"&&g===512?"@2x":""}${i.m.supported?".webp":"$1"}`),v.authority==="raster"?v.path=`/${i.e.RASTER_URL_PREFIX}${v.path}`:v.authority==="rasterarrays"?v.path=`/${i.e.RASTERARRAYS_URL_PREFIX}${v.path}`:v.authority==="3dtiles"?v.path=`/${i.e.TILES3D_URL_PREFIX}${v.path}`:(v.path=v.path.replace(/^.+\/v4\//,"/"),v.path=`/${i.e.TILE_URL_VERSION}${v.path}`);const x=this._customAccessToken||function(B){for(const k of B){const z=k.match(/^access_token=(.*)$/);if(z)return z[1]}return null}(v.params)||i.e.ACCESS_TOKEN;return i.e.REQUIRE_ACCESS_TOKEN&&x&&this._skuToken&&v.params.push(`sku=${this._skuToken}`),this._makeAPIURL(v,x)}canonicalizeTileURL(a,u){const g=Tt(a);if(!g.path.match(/^(\/v4\/|\/(raster|rasterarrays)\/v1\/)/)||!g.path.match(/\.[\w]+$/))return a;let v="mapbox://";g.path.match(/^\/raster\/v1\//)?v+=`raster/${g.path.replace(`/${i.e.RASTER_URL_PREFIX}/`,"")}`:g.path.match(/^\/rasterarrays\/v1\//)?v+=`rasterarrays/${g.path.replace(`/${i.e.RASTERARRAYS_URL_PREFIX}/`,"")}`:v+=`tiles/${g.path.replace(`/${i.e.TILE_URL_VERSION}/`,"")}`;let x=g.params;return u&&(x=x.filter(B=>!B.match(/^access_token=/))),x.length&&(v+=`?${x.join("&")}`),v}canonicalizeTileset(a,u){const g=!!u&&i.f(u),v=[];for(const x of a.tiles||[])i.h(x)?v.push(this.canonicalizeTileURL(x,g)):v.push(x);return v}_makeAPIURL(a,u){const g="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",v=Tt(i.e.API_URL);if(a.protocol=v.protocol,a.authority=v.authority,a.protocol==="http"){const x=a.params.indexOf("secure");x>=0&&a.params.splice(x,1)}if(v.path!=="/"&&(a.path=`${v.path}${a.path}`),!i.e.REQUIRE_ACCESS_TOKEN)return Mt(a);if(u=u||i.e.ACCESS_TOKEN,!this._silenceAuthErrors){if(!u)throw new Error(`An API access token is required to use Mapbox GL. ${g}`);if(u[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${g}`)}return a.params=a.params.filter(x=>x.indexOf("access_token")===-1),a.params.push(`access_token=${u||""}`),Mt(a)}}const gt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Tt(m){const a=m.match(gt);if(!a)throw new Error("Unable to parse URL object");return{protocol:a[1],authority:a[2],path:a[3]||"/",params:a[4]?a[4].split("&"):[]}}function Mt(m){const a=m.params.length?`?${m.params.join("&")}`:"";return`${m.protocol}://${m.authority}${m.path}${a}`}const on="mapbox.eventData";function Ut(m){if(!m)return null;const a=m.split(".");if(!a||a.length!==3)return null;try{return JSON.parse(i.j(a[1]))}catch{return null}}class In{constructor(a){this.type=a,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(a){const u=Ut(i.e.ACCESS_TOKEN);let g="";return g=u&&u.u?i.k(u.u):i.e.ACCESS_TOKEN||"",a?`${on}.${a}:${g}`:`${on}:${g}`}fetchEventData(){const a=i.s("localStorage"),u=this.getStorageKey(),g=this.getStorageKey("uuid");if(a)try{const v=localStorage.getItem(u);v&&(this.eventData=JSON.parse(v));const x=localStorage.getItem(g);x&&(this.anonId=x)}catch{i.w("Unable to read from LocalStorage")}}saveEventData(){const a=i.s("localStorage"),u=this.getStorageKey(),g=this.getStorageKey("uuid"),v=this.anonId;if(a&&v)try{localStorage.setItem(g,v),Object.keys(this.eventData).length>=1&&localStorage.setItem(u,JSON.stringify(this.eventData))}catch{i.w("Unable to write to LocalStorage")}}processRequests(a){}postEvent(a,u,g,v){if(!i.e.EVENTS_URL)return;const x=Tt(i.e.EVENTS_URL);x.params.push(`access_token=${v||i.e.ACCESS_TOKEN||""}`);const B={event:this.type,created:new Date(a).toISOString()},k=u?i.l(B,u):B,z={url:Mt(x),headers:{"Content-Type":"text/plain"},body:JSON.stringify([k])};this.pendingRequest=i.p(z,Q=>{this.pendingRequest=null,g(Q),this.saveEventData(),this.processRequests(v)})}queueRequest(a,u){this.queue.push(a),this.processRequests(u)}}const Ee=new class extends In{constructor(m){super("appUserTurnstile"),this._customAccessToken=m}postTurnstileEvent(m,a){i.e.EVENTS_URL&&i.e.ACCESS_TOKEN&&Array.isArray(m)&&m.some(u=>i.f(u)||i.h(u))&&this.queueRequest(Date.now(),a)}processRequests(m){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const a=Ut(i.e.ACCESS_TOKEN),u=a?a.u:i.e.ACCESS_TOKEN;let g=u!==this.eventData.tokenU;i.v(this.anonId)||(this.anonId=i.u(),g=!0);const v=this.queue.shift();if(this.eventData.lastSuccess){const x=new Date(this.eventData.lastSuccess),B=new Date(v),k=(v-this.eventData.lastSuccess)/864e5;g=g||k>=1||k<-1||x.getDate()!==B.getDate()}else g=!0;g?this.postEvent(v,{sdkIdentifier:"mapbox-gl-js",sdkVersion:b,skuId:ge,"enabled.telemetry":!1,userId:this.anonId},x=>{x||(this.eventData.lastSuccess=v,this.eventData.tokenU=u)},m):this.processRequests()}},$e=Ee.postTurnstileEvent.bind(Ee),We=new class extends In{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(m,a,u,g){this.skuToken=a,this.errorCb=g,i.e.EVENTS_URL&&(u||i.e.ACCESS_TOKEN?this.queueRequest({id:m,timestamp:Date.now()},u):this.errorCb(new Error(lt)))}processRequests(m){if(this.pendingRequest||this.queue.length===0)return;const{id:a,timestamp:u}=this.queue.shift();a&&this.success[a]||(this.anonId||this.fetchEventData(),i.v(this.anonId)||(this.anonId=i.u()),this.postEvent(u,{sdkIdentifier:"mapbox-gl-js",sdkVersion:b,skuId:ge,skuToken:this.skuToken,userId:this.anonId},g=>{g?this.errorCb(g):a&&(this.success[a]=!0)},m))}remove(){this.errorCb=null}},vt=We.postMapLoadEvent.bind(We),_t=new class extends In{constructor(){super("style.load"),this.eventIdPerMapInstanceMap=new Map,this.mapInstanceIdMap=new WeakMap}getMapInstanceId(m){let a=this.mapInstanceIdMap.get(m);return a||(a=i.u(),this.mapInstanceIdMap.set(m,a)),a}getEventId(m){const a=this.eventIdPerMapInstanceMap.get(m)||0;return this.eventIdPerMapInstanceMap.set(m,a+1),a}postStyleLoadEvent(m,a){const{map:u,style:g,importedStyles:v}=a;if(!i.e.EVENTS_URL||!m&&!i.e.ACCESS_TOKEN)return;const x=this.getMapInstanceId(u),B={mapInstanceId:x,eventId:this.getEventId(x),style:g};v.length&&(B.importedStyles=v),this.queueRequest({timestamp:Date.now(),payload:B},m)}processRequests(m){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:a,payload:u}=this.queue.shift();this.postEvent(a,u,()=>{},m)}},at=_t.postStyleLoadEvent.bind(_t),Ft=new class extends In{constructor(){super("gljs.performance")}postPerformanceEvent(m,a){i.e.EVENTS_URL&&(m||i.e.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:a},m)}processRequests(m){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:a,performanceData:u}=this.queue.shift(),g=function(v){const x=performance.getEntriesByType("resource"),B=performance.getEntriesByType("mark"),k=function(re){const de={};if(re){for(const me in re)if(me!=="other")for(const _e of re[me]){const xe=`${me}ResolveRangeMin`,ze=`${me}ResolveRangeMax`,Qe=`${me}RequestCount`,Ue=`${me}RequestCachedCount`;de[xe]=Math.min(de[xe]||1/0,_e.startTime),de[ze]=Math.max(de[ze]||-1/0,_e.responseEnd);const Xe=qe=>{de[qe]===void 0&&(de[qe]=0),++de[qe]};_e.transferSize!==void 0&&_e.transferSize===0&&Xe(Ue),Xe(Qe)}}return de}(function(re,de){const me={};if(re)for(const _e of re){const xe=de(_e);me[xe]===void 0&&(me[xe]=[]),me[xe].push(_e)}return me}(x,O)),z=window.devicePixelRatio,Q=navigator.connection||navigator.mozConnection||navigator.webkitConnection,j=Q?Q.effectiveType:void 0,W={counters:[],metadata:[],attributes:[]},J=(re,de,me)=>{me!=null&&re.push({name:de,value:me.toString()})};for(const re in k)J(W.counters,re,k[re]);if(v.interactionRange[0]!==1/0&&v.interactionRange[1]!==-1/0&&(J(W.counters,"interactionRangeMin",v.interactionRange[0]),J(W.counters,"interactionRangeMax",v.interactionRange[1])),B)for(const re of Object.keys(E)){const de=E[re],me=B.find(_e=>_e.name===de);me&&J(W.counters,de,me.startTime)}return J(W.counters,"visibilityHidden",v.visibilityHidden),J(W.attributes,"style",function(re){if(re)for(const de of re){const me=de.name.split("?")[0];if(i.i(me)){const _e=me.split("/").slice(-2);if(_e.length===2)return`mapbox://styles/${_e[0]}/${_e[1]}`}}}(x)),J(W.attributes,"terrainEnabled",v.terrainEnabled?"true":"false"),J(W.attributes,"fogEnabled",v.fogEnabled?"true":"false"),J(W.attributes,"projection",v.projection),J(W.attributes,"zoom",v.zoom),J(W.metadata,"devicePixelRatio",z),J(W.metadata,"connectionEffectiveType",j),J(W.metadata,"navigatorUserAgent",navigator.userAgent),J(W.metadata,"screenWidth",window.screen.width),J(W.metadata,"screenHeight",window.screen.height),J(W.metadata,"windowWidth",window.innerWidth),J(W.metadata,"windowHeight",window.innerHeight),J(W.metadata,"mapWidth",v.width/z),J(W.metadata,"mapHeight",v.height/z),J(W.metadata,"webglRenderer",v.renderer),J(W.metadata,"webglVendor",v.vendor),J(W.metadata,"sdkVersion",b),J(W.metadata,"sdkIdentifier","mapbox-gl-js"),W}(u);for(const v of g.metadata);for(const v of g.counters);for(const v of g.attributes);this.postEvent(a,g,()=>{},m)}},Dt=Ft.postPerformanceEvent.bind(Ft),yn=new class extends In{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(m,a,u,g){if(!i.e.API_URL||!i.e.SESSION_PATH)return;const v=Tt(i.e.API_URL+i.e.SESSION_PATH);v.params.push(`sku=${a||""}`),v.params.push(`access_token=${g||i.e.ACCESS_TOKEN||""}`);const x={url:Mt(v),headers:{"Content-Type":"text/plain"}};this.pendingRequest=i.g(x,B=>{this.pendingRequest=null,u(B),this.saveEventData(),this.processRequests(g)})}getSessionAPI(m,a,u,g){this.skuToken=a,this.errorCb=g,i.e.SESSION_PATH&&i.e.API_URL&&(u||i.e.ACCESS_TOKEN?this.queueRequest({id:m,timestamp:Date.now()},u):this.errorCb(new Error(lt)))}processRequests(m){if(this.pendingRequest||this.queue.length===0)return;const{id:a,timestamp:u}=this.queue.shift();a&&this.success[a]||this.getSession(u,this.skuToken,g=>{g?this.errorCb(g):a&&(this.success[a]=!0)},m)}remove(){this.errorCb=null}},De=yn.getSessionAPI.bind(yn),jn=new Set;function Te(m,a){a?jn.add(m):jn.delete(m)}class Je{constructor(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps=new Set,this._updatedImages=new Set}isDirty(){return this._changed}setDirty(){this._changed=!0}getUpdatedSourceCaches(){return this._updatedSourceCaches}updateSourceCache(a,u){this._updatedSourceCaches[a]=u,this.setDirty()}discardSourceCacheUpdate(a){delete this._updatedSourceCaches[a]}updateLayer(a){const u=a.scope;this._updatedLayers[u]=this._updatedLayers[u]||new Set,this._updatedLayers[u].add(a.id),this.setDirty()}removeLayer(a){const u=a.scope;this._removedLayers[u]=this._removedLayers[u]||{},this._updatedLayers[u]=this._updatedLayers[u]||new Set,this._removedLayers[u][a.id]=a,this._updatedLayers[u].delete(a.id),this._updatedPaintProps.delete(a.fqid),this.setDirty()}getRemovedLayer(a){return this._removedLayers[a.scope]?this._removedLayers[a.scope][a.id]:null}discardLayerRemoval(a){this._removedLayers[a.scope]&&delete this._removedLayers[a.scope][a.id]}getLayerUpdatesByScope(){const a={};for(const u in this._updatedLayers)a[u]=a[u]||{},a[u].updatedIds=Array.from(this._updatedLayers[u].values());for(const u in this._removedLayers)a[u]=a[u]||{},a[u].removedIds=Object.keys(this._removedLayers[u]);return a}getUpdatedPaintProperties(){return this._updatedPaintProps}updatePaintProperties(a){this._updatedPaintProps.add(a.fqid),this.setDirty()}getUpdatedImages(){return Array.from(this._updatedImages.values())}updateImage(a){this._updatedImages.add(a),this.setDirty()}resetUpdatedImages(){this._updatedImages.clear()}reset(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps.clear(),this._updatedImages.clear()}}function Fe(m){const{userImage:a}=m;return!!(a&&a.render&&a.render())&&(m.data.replace(new Uint8Array(a.data.buffer)),!0)}class Re extends i.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded={},this.requestors=[],this.patterns={},this.atlasImage={},this.atlasTexture={},this.dirty=!0}createScope(a){this.images[a]={},this.loaded[a]=!1,this.updatedImages[a]={},this.patterns[a]={},this.callbackDispatchedThisFrame[a]={},this.atlasImage[a]=new i.r({width:1,height:1})}isLoaded(){for(const a in this.loaded)if(!this.loaded[a])return!1;return!0}setLoaded(a,u){if(this.loaded[u]!==a&&(this.loaded[u]=a,a)){for(const{ids:g,callback:v}of this.requestors)this._notify(g,u,v);this.requestors=[]}}hasImage(a,u){return!!this.getImage(a,u)}getImage(a,u){return this.images[u][a]}addImage(a,u,g){this._validate(a,g)&&(this.images[u][a]=g)}_validate(a,u){let g=!0;return this._validateStretch(u.stretchX,u.data&&u.data.width)||(this.fire(new i.t(new Error(`Image "${a}" has invalid "stretchX" value`))),g=!1),this._validateStretch(u.stretchY,u.data&&u.data.height)||(this.fire(new i.t(new Error(`Image "${a}" has invalid "stretchY" value`))),g=!1),this._validateContent(u.content,u)||(this.fire(new i.t(new Error(`Image "${a}" has invalid "content" value`))),g=!1),g}_validateStretch(a,u){if(!a)return!0;let g=0;for(const v of a){if(v[0]<g||v[1]<v[0]||u<v[1])return!1;g=v[1]}return!0}_validateContent(a,u){return!(a&&(a.length!==4||a[0]<0||u.data.width<a[0]||a[1]<0||u.data.height<a[1]||a[2]<0||u.data.width<a[2]||a[3]<0||u.data.height<a[3]||a[2]<a[0]||a[3]<a[1]))}updateImage(a,u,g){g.version=this.images[u][a].version+1,this.images[u][a]=g,this.updatedImages[u][a]=!0}removeImage(a,u){const g=this.images[u][a];delete this.images[u][a],delete this.patterns[u][a],g.userImage&&g.userImage.onRemove&&g.userImage.onRemove()}listImages(a){return Object.keys(this.images[a])}getImages(a,u,g){let v=!0;const x=!!this.loaded[u];if(!x)for(const B of a)this.images[u][B]||(v=!1);x||v?this._notify(a,u,g):this.requestors.push({ids:a,scope:u,callback:g})}getUpdatedImages(a){return this.updatedImages[a]}_notify(a,u,g){const v={};for(const x of a){this.images[u][x]||this.fire(new i.x("styleimagemissing",{id:x}));const B=this.images[u][x];B?v[x]={data:B.data.clone(),pixelRatio:B.pixelRatio,sdf:B.sdf,version:B.version,stretchX:B.stretchX,stretchY:B.stretchY,content:B.content,hasRenderCallback:!!(B.userImage&&B.userImage.render)}:i.w(`Image "${x}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}g(null,v)}getPixelSize(a){const{width:u,height:g}=this.atlasImage[a];return{width:u,height:g}}getPattern(a,u,g){const v=this.patterns[u][a],x=this.getImage(a,u);if(!x)return null;if(v&&v.position.version===x.version)return v.position;if(v)v.position.version=x.version;else{const B={w:x.data.width+2*i.y,h:x.data.height+2*i.y,x:0,y:0},k=new i.I(B,x,i.y);this.patterns[u][a]={bin:B,position:k}}return this._updatePatternAtlas(u,g),this.patterns[u][a].position}bind(a,u){const g=a.gl;let v=this.atlasTexture[u];v?this.dirty&&(v.update(this.atlasImage[u]),this.dirty=!1):(v=new i.T(a,this.atlasImage[u],g.RGBA8),this.atlasTexture[u]=v),v.bind(g.LINEAR,g.CLAMP_TO_EDGE)}_updatePatternAtlas(a,u){const g=[];for(const k in this.patterns[a])g.push(this.patterns[a][k].bin);const{w:v,h:x}=i.z(g),B=this.atlasImage[a];B.resize({width:v||1,height:x||1});for(const k in this.patterns[a]){const{bin:z,position:Q}=this.patterns[a][k];let j=Q.padding;const W=z.x+j,J=z.y+j,re=this.images[a][k].data,de=re.width,me=re.height;j=j>1?j-1:j,i.r.copy(re,B,{x:0,y:0},{x:W,y:J},{width:de,height:me},u),i.r.copy(re,B,{x:0,y:me-j},{x:W,y:J-j},{width:de,height:j},u),i.r.copy(re,B,{x:0,y:0},{x:W,y:J+me},{width:de,height:j},u),i.r.copy(re,B,{x:de-j,y:0},{x:W-j,y:J},{width:j,height:me},u),i.r.copy(re,B,{x:0,y:0},{x:W+de,y:J},{width:j,height:me},u),i.r.copy(re,B,{x:de-j,y:me-j},{x:W-j,y:J-j},{width:j,height:j},u),i.r.copy(re,B,{x:0,y:me-j},{x:W+de,y:J-j},{width:j,height:j},u),i.r.copy(re,B,{x:0,y:0},{x:W+de,y:J+me},{width:j,height:j},u),i.r.copy(re,B,{x:de-j,y:0},{x:W-j,y:J+me},{width:j,height:j},u)}this.dirty=!0}beginFrame(){for(const a in this.images)this.callbackDispatchedThisFrame[a]={}}dispatchRenderCallbacks(a,u){for(const g of a){if(this.callbackDispatchedThisFrame[u][g])continue;this.callbackDispatchedThisFrame[u][g]=!0;const v=this.images[u][g];Fe(v)&&this.updateImage(g,u,v)}}}function Yt(m){const a=m.key,u=m.value,g=m.valueSpec||{},v=m.objectElementValidators||{},x=m.style,B=m.styleSpec;let k=[];const z=i.B(u);if(z!=="object")return[new i.V(a,u,`object expected, ${z} found`)];for(const Q in u){const j=Q.split(".")[0];let W;v[j]?W=v[j]:g[j]?W=Jr:v["*"]?W=v["*"]:g["*"]&&(W=Jr),W?k=k.concat(W({key:(a&&`${a}.`)+Q,value:u[Q],valueSpec:g[j]||g["*"],style:x,styleSpec:B,object:u,objectKey:Q},u)):k.push(new i.A(a,u[Q],`unknown property "${Q}"`))}for(const Q in g)v[Q]||g[Q].required&&g[Q].default===void 0&&u[Q]===void 0&&k.push(new i.V(a,u,`missing required property "${Q}"`));return k}function rn(m){const a=m.value,u=m.valueSpec,g=m.style,v=m.styleSpec,x=m.key,B=m.arrayElementValidator||Jr;if(i.B(a)!=="array")return[new i.V(x,a,`array expected, ${i.B(a)} found`)];if(u.length&&a.length!==u.length)return[new i.V(x,a,`array length ${u.length} expected, length ${a.length} found`)];if(u["min-length"]&&a.length<u["min-length"])return[new i.V(x,a,`array length at least ${u["min-length"]} expected, length ${a.length} found`)];let k={type:u.value,values:u.values,minimum:u.minimum,maximum:u.maximum,function:void 0};v.$version<7&&(k.function=u.function),i.B(u.value)==="object"&&(k=u.value);let z=[];for(let Q=0;Q<a.length;Q++)z=z.concat(B({array:a,arrayIndex:Q,value:a[Q],valueSpec:k,style:g,styleSpec:v,key:`${x}[${Q}]`},!0));return z}function zt(m){const a=m.key,u=m.value,g=m.valueSpec;let v=i.B(u);if(v==="number"&&u!=u&&(v="NaN"),v!=="number")return[new i.V(a,u,`number expected, ${v} found`)];if("minimum"in g){let x=g.minimum;if(i.B(g.minimum)==="array"&&(x=g.minimum[m.arrayIndex]),u<x)return[new i.V(a,u,`${u} is less than the minimum value ${x}`)]}if("maximum"in g){let x=g.maximum;if(i.B(g.maximum)==="array"&&(x=g.maximum[m.arrayIndex]),u>x)return[new i.V(a,u,`${u} is greater than the maximum value ${x}`)]}return[]}function Jt(m){const a=m.valueSpec,u=i.D(m.value.type);let g,v,x,B={};const k=u!=="categorical"&&m.value.property===void 0,z=!k,Q=i.B(m.value.stops)==="array"&&i.B(m.value.stops[0])==="array"&&i.B(m.value.stops[0][0])==="object",j=Yt({key:m.key,value:m.value,valueSpec:m.styleSpec.function,style:m.style,styleSpec:m.styleSpec,objectElementValidators:{stops:function(re){if(u==="identity")return[new i.V(re.key,re.value,'identity function may not have a "stops" property')];let de=[];const me=re.value;return de=de.concat(rn({key:re.key,value:me,valueSpec:re.valueSpec,style:re.style,styleSpec:re.styleSpec,arrayElementValidator:W})),i.B(me)==="array"&&me.length===0&&de.push(new i.V(re.key,me,"array must have at least one stop")),de},default:function(re){return Jr({key:re.key,value:re.value,valueSpec:a,style:re.style,styleSpec:re.styleSpec})}}});return u==="identity"&&k&&j.push(new i.V(m.key,m.value,'missing required property "property"')),u==="identity"||m.value.stops||j.push(new i.V(m.key,m.value,'missing required property "stops"')),u==="exponential"&&m.valueSpec.expression&&!i.F(m.valueSpec)&&j.push(new i.V(m.key,m.value,"exponential functions not supported")),m.styleSpec.$version>=8&&(z&&!i.G(m.valueSpec)?j.push(new i.V(m.key,m.value,"property functions not supported")):k&&!i.H(m.valueSpec)&&j.push(new i.V(m.key,m.value,"zoom functions not supported"))),u!=="categorical"&&!Q||m.value.property!==void 0||j.push(new i.V(m.key,m.value,'"property" property is required')),j;function W(re){let de=[];const me=re.value,_e=re.key;if(i.B(me)!=="array")return[new i.V(_e,me,`array expected, ${i.B(me)} found`)];if(me.length!==2)return[new i.V(_e,me,`array length 2 expected, length ${me.length} found`)];if(Q){if(i.B(me[0])!=="object")return[new i.V(_e,me,`object expected, ${i.B(me[0])} found`)];if(me[0].zoom===void 0)return[new i.V(_e,me,"object stop key must have zoom")];if(me[0].value===void 0)return[new i.V(_e,me,"object stop key must have value")];const xe=i.D(me[0].zoom);if(typeof xe!="number")return[new i.V(_e,me[0].zoom,"stop zoom values must be numbers")];if(x&&x>xe)return[new i.V(_e,me[0].zoom,"stop zoom values must appear in ascending order")];xe!==x&&(x=xe,v=void 0,B={}),de=de.concat(Yt({key:`${_e}[0]`,value:me[0],valueSpec:{zoom:{}},style:re.style,styleSpec:re.styleSpec,objectElementValidators:{zoom:zt,value:J}}))}else de=de.concat(J({key:`${_e}[0]`,value:me[0],valueSpec:{},style:re.style,styleSpec:re.styleSpec},me));return i.J(i.K(me[1]))?de.concat([new i.V(`${_e}[1]`,me[1],"expressions are not allowed in function stops.")]):de.concat(Jr({key:`${_e}[1]`,value:me[1],valueSpec:a,style:re.style,styleSpec:re.styleSpec}))}function J(re,de){const me=i.B(re.value),_e=i.D(re.value),xe=re.value!==null?re.value:de;if(g){if(me!==g)return[new i.V(re.key,xe,`${me} stop domain type must match previous stop domain type ${g}`)]}else g=me;if(me!=="number"&&me!=="string"&&me!=="boolean"&&typeof _e!="number"&&typeof _e!="string"&&typeof _e!="boolean")return[new i.V(re.key,xe,"stop domain value must be a number, string, or boolean")];if(me!=="number"&&u!=="categorical"){let ze=`number expected, ${me} found`;return i.G(a)&&u===void 0&&(ze+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new i.V(re.key,xe,ze)]}return u!=="categorical"||me!=="number"||typeof _e=="number"&&isFinite(_e)&&Math.floor(_e)===_e?u!=="categorical"&&me==="number"&&typeof _e=="number"&&typeof v=="number"&&v!==void 0&&_e<v?[new i.V(re.key,xe,"stop domain values must appear in ascending order")]:(v=_e,u==="categorical"&&_e in B?[new i.V(re.key,xe,"stop domain values must be unique")]:(B[_e]=!0,[])):[new i.V(re.key,xe,`integer expected, found ${String(_e)}`)]}}function gn(m){const a=(m.expressionContext==="property"?i.L:i.M)(i.K(m.value),m.valueSpec);if(a.result==="error")return a.value.map(g=>new i.V(`${m.key}${g.key}`,m.value,g.message));const u=a.value.expression||a.value._styleExpression.expression;if(m.expressionContext==="property"&&m.propertyKey==="text-font"&&!u.outputDefined())return[new i.V(m.key,m.value,`Invalid data expression for "${m.propertyKey}". Output values must be contained as literals within the expression.`)];if(m.expressionContext==="property"&&m.propertyType==="layout"&&!i.N(u))return[new i.V(m.key,m.value,'"feature-state" data expressions are not supported with layout properties.')];if(m.expressionContext==="filter")return fn(u,m);if(m.expressionContext&&m.expressionContext.indexOf("cluster")===0){if(!i.O(u,["zoom","feature-state"]))return[new i.V(m.key,m.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(m.expressionContext==="cluster-initial"&&!i.Q(u))return[new i.V(m.key,m.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function fn(m,a){const u=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(a.valueSpec&&a.valueSpec.expression)for(const v of a.valueSpec.expression.parameters)u.delete(v);if(u.size===0)return[];const g=[];return m instanceof i.S&&u.has(m.name)?[new i.V(a.key,a.value,`["${m.name}"] expression is not supported in a filter for a ${a.object.type} layer with id: ${a.object.id}`)]:(m.eachChild(v=>{g.push(...fn(v,a))}),g)}function Fn(m){const a=m.key,u=m.value,g=m.valueSpec,v=[];return Array.isArray(g.values)?g.values.indexOf(i.D(u))===-1&&v.push(new i.V(a,u,`expected one of [${g.values.join(", ")}], ${JSON.stringify(u)} found`)):Object.keys(g.values).indexOf(i.D(u))===-1&&v.push(new i.V(a,u,`expected one of [${Object.keys(g.values).join(", ")}], ${JSON.stringify(u)} found`)),v}function Wn(m){return i.W(i.K(m.value))?gn(i.C({},m,{expressionContext:"filter",valueSpec:m.styleSpec[`filter_${m.layerType||"fill"}`]})):_n(m)}function _n(m){const a=m.value,u=m.key;if(i.B(a)!=="array")return[new i.V(u,a,`array expected, ${i.B(a)} found`)];const g=m.styleSpec;let v,x=[];if(a.length<1)return[new i.V(u,a,"filter array must have at least 1 element")];switch(x=x.concat(Fn({key:`${u}[0]`,value:a[0],valueSpec:g.filter_operator,style:m.style,styleSpec:m.styleSpec})),i.D(a[0])){case"<":case"<=":case">":case">=":a.length>=2&&i.D(a[1])==="$type"&&x.push(new i.V(u,a,`"$type" cannot be use with operator "${a[0]}"`));case"==":case"!=":a.length!==3&&x.push(new i.V(u,a,`filter array for operator "${a[0]}" must have 3 elements`));case"in":case"!in":a.length>=2&&(v=i.B(a[1]),v!=="string"&&x.push(new i.V(`${u}[1]`,a[1],`string expected, ${v} found`)));for(let B=2;B<a.length;B++)v=i.B(a[B]),i.D(a[1])==="$type"?x=x.concat(Fn({key:`${u}[${B}]`,value:a[B],valueSpec:g.geometry_type,style:m.style,styleSpec:m.styleSpec})):v!=="string"&&v!=="number"&&v!=="boolean"&&x.push(new i.V(`${u}[${B}]`,a[B],`string, number, or boolean expected, ${v} found`));break;case"any":case"all":case"none":for(let B=1;B<a.length;B++)x=x.concat(_n({key:`${u}[${B}]`,value:a[B],style:m.style,styleSpec:m.styleSpec}));break;case"has":case"!has":v=i.B(a[1]),a.length!==2?x.push(new i.V(u,a,`filter array for "${a[0]}" operator must have 2 elements`)):v!=="string"&&x.push(new i.V(`${u}[1]`,a[1],`string expected, ${v} found`))}return x}function er(m,a){const u=m.key,g=m.style,v=m.layer,x=m.styleSpec,B=m.value,k=m.objectKey,z=x[`${a}_${m.layerType}`];if(!z)return[];const Q=k.match(/^(.*)-transition$/);if(a==="paint"&&Q&&z[Q[1]]&&z[Q[1]].transition)return Jr({key:u,value:B,valueSpec:x.transition,style:g,styleSpec:x});const j=m.valueSpec||z[k];if(!j)return[new i.A(u,B,`unknown property "${k}"`)];let W;if(i.B(B)==="string"&&i.G(j)&&!j.tokens&&(W=/^{([^}]+)}$/.exec(B))){const re=`\`{ "type": "identity", "property": ${W?JSON.stringify(W[1]):'"_"'} }\``;return[new i.V(u,B,`"${k}" does not support interpolation syntax
Use an identity property function instead: ${re}.`)]}const J=[];if(m.layerType==="symbol")k!=="text-field"||!g||g.glyphs||g.imports||J.push(new i.V(u,B,'use of "text-field" requires a style "glyphs" property')),k==="text-font"&&i.X(i.K(B))&&i.D(B.type)==="identity"&&J.push(new i.V(u,B,'"text-font" does not support identity functions'));else if(m.layerType==="model"&&a==="paint"&&v&&v.layout&&v.layout.hasOwnProperty("model-id")&&i.G(j)&&(i.Y(j)||i.H(j))){const re=i.L(i.K(B),j),de=re.value.expression||re.value._styleExpression.expression;de&&!i.O(de,["measure-light"])&&(k==="model-emissive-strength"&&i.Q(de)&&i.N(de)||J.push(new i.V(u,B,`${k} does not support measure-light expressions when the model layer source is vector tile or GeoJSON.`)))}return J.concat(Jr({key:m.key,value:B,valueSpec:j,style:g,styleSpec:x,expressionContext:"property",propertyType:a,propertyKey:k}))}function ar(m){return er(m,"paint")}function Fr(m){return er(m,"layout")}function lr(m){let a=[];const u=m.value,g=m.key,v=m.style,x=m.styleSpec;u.type||u.ref||a.push(new i.V(g,u,'either "type" or "ref" is required'));let B=i.D(u.type);const k=i.D(u.ref);if(u.id){const z=i.D(u.id);for(let Q=0;Q<m.arrayIndex;Q++){const j=v.layers[Q];i.D(j.id)===z&&a.push(new i.V(g,u.id,`duplicate layer id "${u.id}", previously used at line ${j.id.__line__}`))}}if("ref"in u){let z;["type","source","source-layer","filter","layout"].forEach(Q=>{Q in u&&a.push(new i.V(g,u[Q],`"${Q}" is prohibited for ref layers`))}),v.layers.forEach(Q=>{i.D(Q.id)===k&&(z=Q)}),z?z.ref?a.push(new i.V(g,u.ref,"ref cannot reference another ref layer")):B=i.D(z.type):typeof k=="string"&&a.push(new i.V(g,u.ref,`ref layer "${k}" not found`))}else if(B!=="background"&&B!=="sky"&&B!=="slot")if(u.source){const z=v.sources&&v.sources[u.source],Q=z&&i.D(z.type);z?Q==="vector"&&B==="raster"?a.push(new i.V(g,u.source,`layer "${u.id}" requires a raster source`)):Q==="raster"&&B!=="raster"?a.push(new i.V(g,u.source,`layer "${u.id}" requires a vector source`)):Q!=="vector"||u["source-layer"]?Q==="raster-dem"&&B!=="hillshade"?a.push(new i.V(g,u.source,"raster-dem source can only be used with layer type 'hillshade'.")):Q!=="raster-array"||["raster","raster-particle"].includes(B)?B!=="line"||!u.paint||!u.paint["line-gradient"]&&!u.paint["line-trim-offset"]||Q==="geojson"&&z.lineMetrics?B==="raster-particle"&&Q!=="raster-array"&&a.push(new i.V(g,u.source,`layer "${u.id}" requires a 'raster-array' source.`)):a.push(new i.V(g,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):a.push(new i.V(g,u.source,"raster-array source can only be used with layer type 'raster'.")):a.push(new i.V(g,u,`layer "${u.id}" must specify a "source-layer"`)):a.push(new i.V(g,u.source,`source "${u.source}" not found`))}else a.push(new i.V(g,u,'missing required property "source"'));return a=a.concat(Yt({key:g,value:u,valueSpec:x.layer,style:m.style,styleSpec:m.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Jr({key:`${g}.type`,value:u.type,valueSpec:x.layer.type,style:m.style,styleSpec:m.styleSpec,object:u,objectKey:"type"}),filter:z=>Wn(i.C({layerType:B},z)),layout:z=>Yt({layer:u,key:z.key,value:z.value,valueSpec:{},style:z.style,styleSpec:z.styleSpec,objectElementValidators:{"*":Q=>Fr(i.C({layerType:B},Q))}}),paint:z=>Yt({layer:u,key:z.key,value:z.value,valueSpec:{},style:z.style,styleSpec:z.styleSpec,objectElementValidators:{"*":Q=>ar(i.C({layerType:B,layer:u},Q))}})}})),a}function Ir(m){const a=m.value,u=m.key,g=i.B(a);return g!=="string"?[new i.V(u,a,`string expected, ${g} found`)]:[]}const pr={promoteId:function({key:m,value:a}){if(i.B(a)==="string")return Ir({key:m,value:a});{const u=[];for(const g in a)u.push(...Ir({key:`${m}.${g}`,value:a[g]}));return u}}};function to(m){const a=m.value,u=m.key,g=m.styleSpec,v=m.style;if(!a.type)return[new i.V(u,a,'"type" is required')];const x=i.D(a.type);let B=[];switch(["vector","raster","raster-dem","raster-array"].includes(x)&&(a.url||a.tiles||B.push(new i.A(u,a,'Either "url" or "tiles" is required.'))),x){case"vector":case"raster":case"raster-dem":case"raster-array":return B=B.concat(Yt({key:u,value:a,valueSpec:g[`source_${x.replace("-","_")}`],style:m.style,styleSpec:g,objectElementValidators:pr})),B;case"geojson":if(B=Yt({key:u,value:a,valueSpec:g.source_geojson,style:v,styleSpec:g,objectElementValidators:pr}),a.cluster)for(const k in a.clusterProperties){const[z,Q]=a.clusterProperties[k],j=typeof z=="string"?[z,["accumulated"],["get",k]]:z;B.push(...gn({key:`${u}.${k}.map`,value:Q,expressionContext:"cluster-map"})),B.push(...gn({key:`${u}.${k}.reduce`,value:j,expressionContext:"cluster-reduce"}))}return B;case"video":return Yt({key:u,value:a,valueSpec:g.source_video,style:v,styleSpec:g});case"image":return Yt({key:u,value:a,valueSpec:g.source_image,style:v,styleSpec:g});case"canvas":return[new i.V(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Fn({key:`${u}.type`,value:a.type,valueSpec:{values:xi(g)},style:v,styleSpec:g})}}function xi(m){return m.source.reduce((a,u)=>{const g=m[u];return g.type.type==="enum"&&(a=a.concat(Object.keys(g.type.values))),a},[])}function No(m){const a=m.value,u=m.styleSpec,g=u.light,v=m.style;let x=[];const B=i.B(a);if(a===void 0)return x;if(B!=="object")return x=x.concat([new i.V("light",a,`object expected, ${B} found`)]),x;for(const k in a){const z=k.match(/^(.*)-transition$/);x=x.concat(z&&g[z[1]]&&g[z[1]].transition?Jr({key:k,value:a[k],valueSpec:u.transition,style:v,styleSpec:u}):g[k]?Jr({key:k,value:a[k],valueSpec:g[k],style:v,styleSpec:u}):[new i.V(k,a[k],`unknown property "${k}"`)])}return x}function Fi(m){const a=m.value;let u=[];if(!a)return u;const g=i.B(a);if(g!=="object")return u=u.concat([new i.V("light-3d",a,`object expected, ${g} found`)]),u;const v=m.styleSpec,x=v["light-3d"],B=m.key,k=m.style,z=m.style.lights;for(const W of["type","id"])if(!(W in a))return u=u.concat([new i.V("light-3d",a,`missing property ${W} on light`)]),u;if(a.type&&z)for(let W=0;W<m.arrayIndex;W++){const J=i.D(a.type),re=z[W];i.D(re.type)===J&&u.push(new i.V(B,a.id,`duplicate light type "${a.type}", previously defined at line ${re.id.__line__}`))}const Q=`properties_light_${a.type}`;if(!(Q in v))return u=u.concat([new i.V("light-3d",a,`Invalid light type ${a.type}`)]),u;const j=v[Q];for(const W in a)if(W==="properties"){const J=a[W],re=i.B(J);if(re!=="object")return u=u.concat([new i.V("properties",J,`object expected, ${re} found`)]),u;for(const de in J)u=u.concat(j[de]?Jr({key:de,value:J[de],valueSpec:j[de],style:k,styleSpec:v}):[new i.A(m.key,J[de],`unknown property "${de}"`)])}else{const J=W.match(/^(.*)-transition$/);u=u.concat(J&&x[J[1]]&&x[J[1]].transition?Jr({key:W,value:a[W],valueSpec:v.transition,style:k,styleSpec:v}):x[W]?Jr({key:W,value:a[W],valueSpec:x[W],style:k,styleSpec:v}):[new i.A(W,a[W],`unknown property "${W}"`)])}return u}function pi(m){const a=m.value,u=m.key,g=m.style,v=m.styleSpec,x=v.terrain;let B=[];const k=i.B(a);if(a===void 0||k==="null")return B;if(k!=="object")return B=B.concat([new i.V("terrain",a,`object expected, ${k} found`)]),B;for(const z in a){const Q=z.match(/^(.*)-transition$/);B=B.concat(Q&&x[Q[1]]&&x[Q[1]].transition?Jr({key:z,value:a[z],valueSpec:v.transition,style:g,styleSpec:v}):x[z]?Jr({key:z,value:a[z],valueSpec:x[z],style:g,styleSpec:v}):[new i.A(z,a[z],`unknown property "${z}"`)])}if(a.source){const z=g.sources&&g.sources[a.source],Q=z&&i.D(z.type);z?Q!=="raster-dem"&&B.push(new i.V(u,a.source,`terrain cannot be used with a source of type ${String(Q)}, it only be used with a "raster-dem" source type`)):B.push(new i.V(u,a.source,`source "${a.source}" not found`))}else B.push(new i.V(u,a,'terrain is missing required property "source"'));return B}function Wi(m){const a=m.value,u=m.style,g=m.styleSpec,v=g.fog;let x=[];const B=i.B(a);if(a===void 0)return x;if(B!=="object")return x=x.concat([new i.V("fog",a,`object expected, ${B} found`)]),x;for(const k in a){const z=k.match(/^(.*)-transition$/);x=x.concat(z&&v[z[1]]&&v[z[1]].transition?Jr({key:k,value:a[k],valueSpec:g.transition,style:u,styleSpec:g}):v[k]?Jr({key:k,value:a[k],valueSpec:v[k],style:u,styleSpec:g}):[new i.A(k,a[k],`unknown property "${k}"`)])}return x}const Ti={"*":()=>[],array:rn,boolean:function(m){const a=m.value,u=m.key,g=i.B(a);return g!=="boolean"?[new i.V(u,a,`boolean expected, ${g} found`)]:[]},number:zt,color:function(m){const a=m.key,u=m.value,g=i.B(u);return g!=="string"?[new i.V(a,u,`color expected, ${g} found`)]:i.U.parseCSSColor(u)===null?[new i.V(a,u,`color expected, "${u}" found`)]:[]},enum:Fn,filter:Wn,function:Jt,layer:lr,object:Yt,source:to,model:i.Z,light:No,"light-3d":Fi,terrain:pi,fog:Wi,string:Ir,formatted:function(m){return Ir(m).length===0?[]:gn(m)},resolvedImage:function(m){return Ir(m).length===0?[]:gn(m)},projection:function(m){const a=m.value,u=m.styleSpec,g=u.projection,v=m.style;let x=[];const B=i.B(a);if(B==="object")for(const k in a)x=x.concat(Jr({key:k,value:a[k],valueSpec:g[k],style:v,styleSpec:u}));else B!=="string"&&(x=x.concat([new i.V("projection",a,`object or string expected, ${B} found`)]));return x},import:function(m){const{value:a,styleSpec:u}=m,{data:g,...v}=a;Object.defineProperty(v,"__line__",{value:a.__line__,enumerable:!1});let x=Yt(i.C({},m,{value:v,valueSpec:u.import}));return i.D(v.id)===""&&x.push(new i.V(`${m.key}.id`,v,"import id can't be an empty string")),g&&(x=x.concat(Ns(g,u,{key:`${m.key}.data`}))),x}};function Jr(m,a=!1){const u=m.value,g=m.valueSpec,v=m.styleSpec;if(g.expression&&i.X(i.D(u)))return Jt(m);if(g.expression&&i.J(i.K(u)))return gn(m);if(g.type&&Ti[g.type]){const x=Ti[g.type](m);return a===!0&&x.length>0&&i.B(m.value)==="array"?gn(m):x}return Yt(i.C({},m,{valueSpec:g.type?v[g.type]:g}))}function Xi(m){const a=m.value,u=m.key,g=Ir(m);return g.length||(a.indexOf("{fontstack}")===-1&&g.push(new i.V(u,a,'"glyphs" url must include a "{fontstack}" token')),a.indexOf("{range}")===-1&&g.push(new i.V(u,a,'"glyphs" url must include a "{range}" token'))),g}function Ns(m,a=i._,u={}){return Jr({key:u.key||"",value:m,valueSpec:a.$root,styleSpec:a,style:m,objectElementValidators:{glyphs:Xi,"*":()=>[]}})}function ns(m,a=i._){return ot(Ns(m,a))}const lo=m=>ot(to(m)),Gr=m=>ot(No(m)),Ni=m=>ot(Fi(m)),Pa=m=>ot(pi(m)),Zo=m=>ot(Wi(m)),jt=m=>ot(lr(m)),we=m=>ot(Wn(m)),Ce=m=>ot(ar(m)),Ye=m=>ot(Fr(m)),dt=m=>ot(i.Z(m));function ot(m){return m.slice().sort((a,u)=>a.line&&u.line?a.line-u.line:0)}function wt(m,a){let u=!1;if(a&&a.length)for(const g of a)g instanceof i.A?i.w(g.message):(m.fire(new i.t(new Error(g.message))),u=!0);return u}let Vt;class St extends i.E{constructor(a,u="flat"){super(),this._transitionable=new i.$(Vt||(Vt=new i.a0({anchor:new i.a1(i._.light.anchor),position:new i.a2(i._.light.position),color:new i.a1(i._.light.color),intensity:new i.a1(i._.light.intensity)}))),this.setLight(a,u),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(a,u,g={}){this._validate(Gr,a,g)||(this._transitionable.setTransitionOrValue(a),this.id=u)}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,u,g){return(!g||g.validate!==!1)&&wt(this,a.call(ns,i.l({value:u,style:{glyphs:!0,sprite:!0},styleSpec:i._})))}}const Gt=new i.a0({source:new i.a1(i._.terrain.source),exaggeration:new i.a1(i._.terrain.exaggeration)});let nn=class extends i.E{constructor(m,a,u,g){super(),this.scope=u,this._transitionable=new i.$(Gt,u,g),this._transitionable.setTransitionOrValue(m,g),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=a}get(){return this._transitionable.serialize()}set(m,a){this._transitionable.setTransitionOrValue(m,a)}updateTransitions(m){this._transitioning=this._transitionable.transitioned(m,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(m){this.properties=this._transitioning.possiblyEvaluate(m)}getExaggeration(m){return this._transitioning.possiblyEvaluate(new i.a3(m)).get("exaggeration")}isZoomDependent(){const m=this._transitionable._values.exaggeration;return m!=null&&m.value!=null&&m.value.expression!=null&&m.value.expression instanceof i.a4}};const qt=45,En=65,zn=.05;function Vn(m,a,u,g){const v=i.a7(qt,En,u),[x,B]=gr(m,g);let k=1-Math.min(1,Math.exp((a-x)/(B-x)*-6));return k*=k*k,k=Math.min(1,1.00747*k),k*v*m.alpha}function gr(m,a){const u=.5/Math.tan(.5*a);return[m.range[0]+u,m.range[1]+u]}function Er(m,a,u,g,v){const x=i.a6.vec3.transformMat4([],[a,u,g],v.mercatorFogMatrix);return Vn(m,i.a6.vec3.length(x),v.pitch,v._fov)}function Tr(m,a,u,g,v,x,B){const k=[[u,g,0],[v,g,0],[v,x,0],[u,x,0]];let z=Number.MAX_VALUE,Q=-Number.MAX_VALUE;for(const j of k){const W=i.a6.vec3.transformMat4([],j,a),J=i.a6.vec3.length(W);z=Math.min(z,J),Q=Math.max(Q,J)}return[Vn(m,z,B.pitch,B._fov),Vn(m,Q,B.pitch,B._fov)]}const Br=new i.a0({range:new i.a1(i._.fog.range),color:new i.a1(i._.fog.color),"high-color":new i.a1(i._.fog["high-color"]),"space-color":new i.a1(i._.fog["space-color"]),"horizon-blend":new i.a1(i._.fog["horizon-blend"]),"star-intensity":new i.a1(i._.fog["star-intensity"]),"vertical-range":new i.a1(i._.fog["vertical-range"])});class hi extends i.E{constructor(a,u,g,v){super(),this._transitionable=new i.$(Br,g,new Map(v)),this.set(a,v),this._transitioning=this._transitionable.untransitioned(),this._transform=u,this.properties=new i.a8(Br),this.scope=g}get state(){const a=this._transform,u=a.projection.name==="globe",g=i.a9(a.zoom),v=this.properties.get("range"),x=[.5,3];return{range:u?[i.aa(x[0],v[0],g),i.aa(x[1],v[1],g)]:v,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(a,u,g={}){if(this._validate(Zo,a,g))return;const v=i.l({},a);for(const x of Object.keys(i._.fog))v[x]===void 0&&(v[x]=i._.fog[x].default);this._options=v,this._transitionable.setTransitionOrValue(this._options,u)}getOpacity(a){if(!this._transform.projection.supportsFog)return 0;const u=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:i.a7(qt,En,a))*u.a}getOpacityAtLatLng(a,u){return this._transform.projection.supportsFog?function(g,v,x){const B=i.a5.fromLngLat(v),k=x.elevation?x.elevation.getAtPointOrZero(B):0;return Er(g,B.x,B.y,k,x)}(this.state,a,u):0}getOpacityForTile(a){if(!this._transform.projection.supportsFog)return[1,1];const u=this._transform.calculateFogTileMatrix(a.toUnwrapped());return Tr(this.state,u,0,0,i.ab,i.ab,this._transform)}getOpacityForBounds(a,u,g,v,x){return this._transform.projection.supportsFog?Tr(this.state,a,u,g,v,x,this._transform):[1,1]}getFovAdjustedRange(a){return this._transform.projection.supportsFog?gr(this.state,a):[0,1]}isVisibleOnFrustum(a){if(!this._transform.projection.supportsFog)return!1;const u=[4,5,6,7];for(const g of u){const v=a.points[g];let x;if(v[2]>=0)x=v;else{const B=a.points[g-4];x=i.ac(B,v,B[2]/(B[2]-v[2]))}if(Er(this.state,x[0],x[1],0,this._transform)>=zn)return!0}return!1}updateConfig(a){this._transitionable.setTransitionOrValue(this._options,new Map(a))}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,u,g){return(!g||g.validate!==!1)&&wt(this,a.call(ns,i.l({value:u,style:{glyphs:!0,sprite:!0},styleSpec:i._})))}}class mi extends i.E{constructor(a,u,g,v){super(),this.scope=g,this._options=a,this.properties=new i.a8(u),this._transitionable=new i.$(u,g,new Map(v)),this._transitionable.setTransitionOrValue(a.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(a){this._transitionable.setTransitionOrValue(this._options.properties,new Map(a))}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(a,u){this._options=a,this._transitionable.setTransitionOrValue(a.properties,u)}shadowsEnabled(){return!!this.properties&&this.properties.get("cast-shadows")===!0}}let Mr,Ci;class $i{constructor(a,u,g,v){this.screenBounds=a,this.cameraPoint=u,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=g,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,v)}static createFromScreenPoints(a,u){let g,v;if(a instanceof i.P||typeof a[0]=="number"){const x=i.P.convert(a);g=[x],v=u.isPointAboveHorizon(x)}else{const x=i.P.convert(a[0]),B=i.P.convert(a[1]);g=[x,B],v=i.ae(x,B).every(k=>u.isPointAboveHorizon(k))}return new $i(g,u.getCameraPoint(),v,u)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(a){return i.ae(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],a)}bufferedCameraGeometry(a){const u=this.screenBounds[0],g=this.screenBounds.length===1?this.screenBounds[0].add(new i.P(1,1)):this.screenBounds[1],v=i.ae(u,g,0,!1);return this.cameraPoint.y>g.y&&(this.cameraPoint.x>u.x&&this.cameraPoint.x<g.x?v.splice(3,0,this.cameraPoint):this.cameraPoint.x>=g.x?v[2]=this.cameraPoint:this.cameraPoint.x<=u.x&&(v[3]=this.cameraPoint)),i.af(v,a)}bufferedCameraGeometryGlobe(a){const u=this.screenBounds[0],g=this.screenBounds.length===1?this.screenBounds[0].add(new i.P(1,1)):this.screenBounds[1],v=i.ae(u,g,a),x=this.cameraPoint.clone();switch(3*((x.y>u.y)+(x.y>g.y))+((x.x>u.x)+(x.x>g.x))){case 0:v[0]=x,v[4]=x.clone();break;case 1:v.splice(1,0,x);break;case 2:v[1]=x;break;case 3:v.splice(4,0,x);break;case 5:v.splice(2,0,x);break;case 6:v[3]=x;break;case 7:v.splice(3,0,x);break;case 8:v[2]=x}return v}containsTile(a,u,g,v=0){const x=a.queryPadding/u._pixelsPerMercatorPixel+1,B=g?this._bufferedCameraMercator(x,u):this._bufferedScreenMercator(x,u);let k=a.tileID.wrap+(B.unwrapped?v:0);const z=B.polygon.map(_e=>i.ag(a.tileTransform,_e,k));if(!i.ah(z,0,0,i.ab,i.ab))return;k=a.tileID.wrap+(this.screenGeometryMercator.unwrapped?v:0);const Q=this.screenGeometryMercator.polygon.map(_e=>i.ai(a.tileTransform,_e,k)),j=Q.map(_e=>new i.P(_e[0],_e[1])),W=u.getFreeCameraOptions().position||new i.a5(0,0,0),J=i.ai(a.tileTransform,W,k),re=Q.map(_e=>{const xe=i.a6.vec3.sub(_e,_e,J);return i.a6.vec3.normalize(xe,xe),new i.aj(J,xe)}),de=i.ak(a,1,u.zoom)*u._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:j,tilespaceRays:re,bufferedTilespaceGeometry:z,bufferedTilespaceBounds:(me=i.al(z),me.min.x=i.ap(me.min.x,0,i.ab),me.min.y=i.ap(me.min.y,0,i.ab),me.max.x=i.ap(me.max.x,0,i.ab),me.max.y=i.ap(me.max.y,0,i.ab),me),tile:a,tileID:a.tileID,pixelToTileUnitsFactor:de};var me}_bufferedScreenMercator(a,u){const g=$o(a);if(this._screenRaycastCache[g])return this._screenRaycastCache[g];{let v;return v=u.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(a),u):{polygon:this.bufferedScreenGeometry(a).map(x=>u.pointCoordinate3D(x)),unwrapped:!0},this._screenRaycastCache[g]=v,v}}_bufferedCameraMercator(a,u){const g=$o(a);if(this._cameraRaycastCache[g])return this._cameraRaycastCache[g];{let v;return v=u.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(a),u):{polygon:this.bufferedCameraGeometry(a).map(x=>u.pointCoordinate3D(x)),unwrapped:!0},this._cameraRaycastCache[g]=v,v}}_projectAndResample(a,u){const g=function(x,B){const k=i.a6.mat4.multiply([],B.pixelMatrix,B.globeMatrix),z=[0,-i.aq,0,1],Q=[0,i.aq,0,1],j=[0,0,0,1];i.a6.vec4.transformMat4(z,z,k),i.a6.vec4.transformMat4(Q,Q,k),i.a6.vec4.transformMat4(j,j,k);const W=new i.P(z[0]/z[3],z[1]/z[3]),J=new i.P(Q[0]/Q[3],Q[1]/Q[3]),re=i.an(x,W)&&z[3]<j[3],de=i.an(x,J)&&Q[3]<j[3];if(!re&&!de)return null;const me=function(ut,it,ht){for(let xt=1;xt<ut.length;xt++){const pt=Co(it.pointCoordinate3D(ut[xt-1]).x),At=Co(it.pointCoordinate3D(ut[xt]).x);if(ht<0){if(pt<At)return{idx:xt,t:-pt/(At-1-pt)}}else if(At<pt)return{idx:xt,t:(1-pt)/(At+1-pt)}}return null}(x,B,re?-1:1);if(!me)return null;const{idx:_e,t:xe}=me;let ze=_e>1?jo(x.slice(0,_e),B):[],Qe=_e<x.length?jo(x.slice(_e),B):[];ze=ze.map(ut=>new i.P(Co(ut.x),ut.y)),Qe=Qe.map(ut=>new i.P(Co(ut.x),ut.y));const Ue=[...ze];Ue.length===0&&Ue.push(Qe[Qe.length-1]);const Xe=i.aa(Ue[Ue.length-1].y,(Qe.length===0?ze[0]:Qe[0]).y,xe);let qe;return qe=re?[new i.P(0,Xe),new i.P(0,0),new i.P(1,0),new i.P(1,Xe)]:[new i.P(1,Xe),new i.P(1,1),new i.P(0,1),new i.P(0,Xe)],Ue.push(...qe),Qe.length===0?Ue.push(ze[0]):Ue.push(...Qe),{polygon:Ue.map(ut=>new i.a5(ut.x,ut.y)),unwrapped:!1}}(a,u);if(g)return g;const v=function(x,B){let k=!1,z=-1/0,Q=0;for(let W=0;W<x.length-1;W++)x[W].x>z&&(z=x[W].x,Q=W);for(let W=0;W<x.length-1;W++){const J=(Q+W)%(x.length-1),re=x[J],de=x[J+1];Math.abs(re.x-de.x)>.5&&(re.x<de.x?(re.x+=1,J===0&&(x[x.length-1].x+=1)):(de.x+=1,J+1===x.length-1&&(x[0].x+=1)),k=!0)}const j=i.am(B.center.lng);return k&&j<Math.abs(j-1)&&x.forEach(W=>{W.x-=1}),{polygon:x,unwrapped:k}}(jo(a,u).map(x=>new i.P(Co(x.x),x.y)),u);return{polygon:v.polygon.map(x=>new i.a5(x.x,x.y)),unwrapped:v.unwrapped}}}function jo(m,a){return i.ao(m,u=>{const g=a.pointCoordinate3D(u);u.x=g.x,u.y=g.y},1/256)}function Co(m){return m<0?1+m%1:m%1}function $o(m){return 100*m|0}function Ps(m,a,u,g,v){const x=function(k,z){if(k)return v(k);if(z){if(m.url&&z.tiles&&m.tiles&&delete m.tiles,z.variants){if(!Array.isArray(z.variants))return v(new Error("variants must be an array"));for(const j of z.variants){if(j==null||typeof j!="object"||j.constructor!==Object)return v(new Error("variant must be an object"));if(!Array.isArray(j.capabilities))return v(new Error("capabilities must be an array"));if(j.capabilities.length===1&&j.capabilities[0]==="meshopt"){z=i.l(z,j);break}}}const Q=i.ar(i.l(z,m),["tilejson","tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);z.vector_layers&&(Q.vectorLayers=z.vector_layers,Q.vectorLayerIds=Q.vectorLayers.map(j=>j.id)),z.raster_layers&&(Q.rasterLayers=z.raster_layers,Q.rasterLayerIds=Q.rasterLayers.map(j=>j.id)),Q.tiles=a.canonicalizeTileset(Q,m.url),v(null,Q)}},B=function(k,z,Q){if(!k)return null;if(!z&&!Q)return k;Q=Q||k.worldview_default;const j=Object.values(k.language||{});if(j.length===0)return null;const W=Object.values(k.worldview||{});if(W.length===0)return null;const J=j.every(de=>de===z),re=W.every(de=>de===Q);return J&&re?k:z in(k.language_options||{})||Q in(k.worldview_options||{})?null:k.language_options&&k.worldview_options?k:null}(m.data,u,g);return B?i.q.frame(()=>x(null,B)):m.url?i.n(a.transformRequest(a.normalizeSourceURL(m.url,null,u,g),i.R.Source),x):i.q.frame(()=>{const{data:k,...z}=m;x(null,z)})}class ya{constructor(a,u,g){this.bounds=i.as.convert(this.validateBounds(a)),this.minzoom=u||0,this.maxzoom=g||24}validateBounds(a){return Array.isArray(a)&&a.length===4?[Math.max(-180,a[0]),Math.max(-90,a[1]),Math.min(180,a[2]),Math.min(90,a[3])]:[-180,-90,180,90]}contains(a){const u=Math.pow(2,a.z),g=Math.floor(i.am(this.bounds.getWest())*u),v=Math.floor(i.at(this.bounds.getNorth())*u),x=Math.ceil(i.am(this.bounds.getEast())*u),B=Math.ceil(i.at(this.bounds.getSouth())*u);return a.x>=g&&a.x<x&&a.y>=v&&a.y<B}}class Xu extends i.E{constructor(a,u,g,v){if(super(),this.id=a,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,i.l(this,i.ar(u,["url","scheme","tileSize","promoteId"])),this._options=i.l({type:"vector"},u),this._collectResourceTiming=!!u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v),this._tileWorkers={},this._deduped=new i.au}load(a){this._loaded=!1,this.fire(new i.x("dataloading",{dataType:"source"}));const u=Array.isArray(this.map._language)?this.map._language.join():this.map._language,g=this.map._worldview;this._tileJSONRequest=Ps(this._options,this.map._requestManager,u,g,(v,x)=>{this._tileJSONRequest=null,this._loaded=!0,v?(u&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${u}`),g&&g.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${g}`),this.fire(new i.t(v))):x&&(i.l(this,x),x.bounds&&(this.tileBounds=new ya(x.bounds,this.minzoom,this.maxzoom)),$e(x.tiles,this.map._requestManager._customAccessToken),this.fire(new i.x("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.x("data",{dataType:"source",sourceDataType:"content"}))),a&&a(v)})}loaded(){return this._loaded}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}onAdd(a){this.map=a,this.load()}reload(){this.cancelTileJSONRequest();const a=i.av(this.id,this.scope);this.load(()=>this.map.style.clearSource(a))}setTiles(a){return this._options.tiles=a,this.reload(),this}setUrl(a){return this.url=a,this._options.url=a,this.reload(),this}onRemove(a){this.cancelTileJSONRequest()}serialize(){return i.l({},this._options)}loadTile(a,u){const g=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme)),v=this.map._requestManager.transformRequest(g,i.R.Tile),x=this.map.style?this.map.style.getLut(this.scope):null,B={request:v,data:void 0,uid:a.uid,tileID:a.tileID,tileZoom:a.tileZoom,zoom:a.tileID.overscaledZ,lut:x?{image:x.image.clone()}:null,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:i.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:a.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:a.isExtraShadowCaster,tessellationStep:this.map._tessellationStep};if(B.request.collectResourceTiming=this._collectResourceTiming,a.actor&&a.state!=="expired")a.state==="loading"?a.reloadCallback=u:a.request=a.actor.send("reloadTile",B,k.bind(this));else if(a.actor=this._tileWorkers[g]=this._tileWorkers[g]||this.dispatcher.getActor(),this.dispatcher.ready)a.request=a.actor.send("loadTile",B,k.bind(this),void 0,!0);else{const z=i.aw.call({deduped:this._deduped},B,(Q,j)=>{Q||!j?k.call(this,Q):(B.data={cacheControl:j.cacheControl,expires:j.expires,rawData:j.rawData.slice(0)},a.actor&&a.actor.send("loadTile",B,k.bind(this),void 0,!0))},!0);a.request={cancel:z}}function k(z,Q){return delete a.request,a.aborted?u(null):z&&z.status!==404?u(z):(Q&&Q.resourceTiming&&(a.resourceTiming=Q.resourceTiming),this.map._refreshExpiredTiles&&Q&&a.setExpiryData(Q),a.loadVectorData(Q,this.map.painter),i.ax(this.dispatcher),u(null),void(a.reloadCallback&&(this.loadTile(a,a.reloadCallback),a.reloadCallback=null)))}}abortTile(a){a.request&&(a.request.cancel(),delete a.request),a.actor&&a.actor.send("abortTile",{uid:a.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(a,u){a.actor&&a.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id,scope:this.scope}),a.destroy()}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class yc extends i.E{constructor(a,u,g,v){super(),this.id=a,this.dispatcher=g,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=i.l({type:"raster"},u),i.l(this,i.ar(u,["url","scheme","tileSize"]))}load(a){this._loaded=!1,this.fire(new i.x("dataloading",{dataType:"source"})),this._tileJSONRequest=Ps(this._options,this.map._requestManager,null,null,(u,g)=>{this._tileJSONRequest=null,this._loaded=!0,u?this.fire(new i.t(u)):g&&(i.l(this,g),g.bounds&&(this.tileBounds=new ya(g.bounds,this.minzoom,this.maxzoom)),$e(g.tiles),this.fire(new i.x("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.x("data",{dataType:"source",sourceDataType:"content"}))),a&&a(u)})}loaded(){return this._loaded}onAdd(a){this.map=a,this.load()}reload(){this.cancelTileJSONRequest();const a=i.av(this.id,this.scope);this.load(()=>this.map.style.clearSource(a))}setTiles(a){return this._options.tiles=a,this.reload(),this}setUrl(a){return this.url=a,this._options.url=a,this.reload(),this}onRemove(a){this.cancelTileJSONRequest()}serialize(){return i.l({},this._options)}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}loadTile(a,u){const g=i.q.devicePixelRatio>=2,v=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),g,this.tileSize);a.request=i.o(this.map._requestManager.transformRequest(v,i.R.Tile),(x,B,k,z)=>(delete a.request,a.aborted?(a.state="unloaded",u(null)):x?(a.state="errored",u(x)):B?(this.map._refreshExpiredTiles&&a.setExpiryData({cacheControl:k,expires:z}),a.setTexture(B,this.map.painter),a.state="loaded",i.ax(this.dispatcher),void u(null)):u(null)))}abortTile(a,u){a.request&&(a.request.cancel(),delete a.request),u&&u()}unloadTile(a,u){a.texture&&a.texture instanceof i.T?(a.destroy(!0),a.texture&&a.texture instanceof i.T&&this.map.painter.saveTileTexture(a.texture)):a.destroy(),u&&u()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class _c extends yc{constructor(a,u,g,v){super(a,u,g,v),this.type="raster-array",this.maxzoom=22,this._options=i.l({type:"raster-array"},u)}triggerRepaint(a){const u=this.map.painter._terrain,g=this.map.style.getSourceCache(this.id);u&&u.enabled&&g&&u._clearRenderCacheForTile(g.id,a.tileID),this.map.triggerRepaint()}loadTile(a,u){const g=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize),v=this.map._requestManager.transformRequest(g,i.R.Tile);a.requestParams=v,a.actor||(a.actor=this.dispatcher.getActor()),a.request=a.fetchHeader(void 0,(x,B,k,z)=>{if(delete a.request,a.aborted)return a.state="unloaded",u(null);if(x)return x.code===20?void 0:(a.state="errored",u(x));this.map._refreshExpiredTiles&&a.setExpiryData({cacheControl:k,expires:z}),a.state="empty",u(null)})}unloadTile(a,u){const g=a.texture;g&&g instanceof i.T?(a.destroy(!0),this.map.painter.saveTileTexture(g)):(a.destroy(),a.flushQueues(),a._isHeaderLoaded=!1,delete a._mrt,delete a.textureDescriptor),a.fbo&&(a.fbo.destroy(),delete a.fbo),delete a.request,delete a.requestParams,delete a.neighboringTiles,a.state="unloaded"}prepareTile(a,u,g){a._isHeaderLoaded&&(a.state!=="empty"&&(a.state="reloading"),a.fetchBand(u,g,(v,x)=>{if(v)return a.state="errored",this.fire(new i.t(v)),void this.triggerRepaint(a);x&&(a.setTexture(x,this.map.painter),a.state="loaded",this.triggerRepaint(a))}))}getInitialBand(a){if(!this.rasterLayers)return 0;const u=this.rasterLayers.find(({id:x})=>x===a),g=u&&u.fields,v=g&&g.bands&&g.bands;return v?v[0]:0}getTextureDescriptor(a,u,g){if(!a)return;const v=u.sourceLayer||this.rasterLayerIds&&this.rasterLayerIds[0];if(!v)return;let x=null;u instanceof i.aB?x=u.paint.get("raster-array-band"):u instanceof i.aC&&(x=u.paint.get("raster-particle-array-band"));const B=x||this.getInitialBand(v);if(B!=null)if(a.textureDescriptor){if(!a.updateNeeded(v,B)||g)return Object.assign({},a.textureDescriptor,{texture:a.texture})}else this.prepareTile(a,v,B)}}const Vl={vector:Xu,raster:yc,"raster-dem":class extends yc{constructor(m,a,u,g){super(m,a,u,g),this.type="raster-dem",this.maxzoom=22,this._options=i.l({type:"raster-dem"},a),this.encoding=a.encoding||"mapbox"}loadTile(m,a){const u=this.map._requestManager.normalizeTileURL(m.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function g(v,x){v&&(m.state="errored",a(v)),x&&(m.dem=x,m.dem.onDeserialize(),m.needsHillshadePrepare=!0,m.needsDEMTextureUpload=!0,m.state="loaded",a(null))}m.request=i.o(this.map._requestManager.transformRequest(u,i.R.Tile),(function(v,x,B,k){if(delete m.request,m.aborted)m.state="unloaded",a(null);else if(v)m.state="errored",a(v);else if(x){this.map._refreshExpiredTiles&&m.setExpiryData({cacheControl:B,expires:k});const z=ImageBitmap&&x instanceof ImageBitmap&&i.ay(),Q=1-(x.width-i.az(x.width))/2;Q<1||m.neighboringTiles||(m.neighboringTiles=this._getNeighboringTiles(m.tileID));const j=z?x:i.q.getImageData(x,Q),W={uid:m.uid,coord:m.tileID,source:this.id,scope:this.scope,rawImageData:j,encoding:this.encoding,padding:Q};m.actor&&m.state!=="expired"||(m.actor=this.dispatcher.getActor(),m.actor.send("loadDEMTile",W,g.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(m){const a=m.canonical,u=Math.pow(2,a.z),g=(a.x-1+u)%u,v=a.x===0?m.wrap-1:m.wrap,x=(a.x+1+u)%u,B=a.x+1===u?m.wrap+1:m.wrap,k={};return k[new i.aA(m.overscaledZ,v,a.z,g,a.y).key]={backfilled:!1},k[new i.aA(m.overscaledZ,B,a.z,x,a.y).key]={backfilled:!1},a.y>0&&(k[new i.aA(m.overscaledZ,v,a.z,g,a.y-1).key]={backfilled:!1},k[new i.aA(m.overscaledZ,m.wrap,a.z,a.x,a.y-1).key]={backfilled:!1},k[new i.aA(m.overscaledZ,B,a.z,x,a.y-1).key]={backfilled:!1}),a.y+1<u&&(k[new i.aA(m.overscaledZ,v,a.z,g,a.y+1).key]={backfilled:!1},k[new i.aA(m.overscaledZ,m.wrap,a.z,a.x,a.y+1).key]={backfilled:!1},k[new i.aA(m.overscaledZ,B,a.z,x,a.y+1).key]={backfilled:!1}),k}},"raster-array":_c,geojson:class extends i.E{constructor(m,a,u,g){super(),this.id=m,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=u.getActor(),this.setEventedParent(g),this._data=a.data,this._options=i.l({},a),this._collectResourceTiming=a.collectResourceTiming,a.maxzoom!==void 0&&(this.maxzoom=a.maxzoom),a.minzoom!==void 0&&(this.minzoom=a.minzoom),a.type&&(this.type=a.type),a.attribution&&(this.attribution=a.attribution),this.promoteId=a.promoteId;const v=i.ab/this.tileSize;this.workerOptions=i.l({source:this.id,scope:this.scope,cluster:a.cluster||!1,geojsonVtOptions:{buffer:(a.buffer!==void 0?a.buffer:128)*v,tolerance:(a.tolerance!==void 0?a.tolerance:.375)*v,extent:i.ab,maxZoom:this.maxzoom,lineMetrics:a.lineMetrics||!1,generateId:a.generateId||!1},superclusterOptions:{maxZoom:a.clusterMaxZoom!==void 0?a.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,a.clusterMinPoints||2),extent:i.ab,radius:(a.clusterRadius!==void 0?a.clusterRadius:50)*v,log:!1,generateId:a.generateId||!1},clusterProperties:a.clusterProperties,filter:a.filter,dynamic:a.dynamic},a.workerOptions)}onAdd(m){this.map=m,this.setData(this._data)}setData(m){return this._data=m,this._updateWorkerData(),this}updateData(m){if(!this._options.dynamic)return this.fire(new i.t(new Error("Can't call updateData on a GeoJSON source with dynamic set to false.")));if(typeof m!="string"&&(m.type==="Feature"&&(m={type:"FeatureCollection",features:[m]}),m.type!=="FeatureCollection"))return this.fire(new i.t(new Error("Data to update should be a feature or a feature collection.")));if(this._coalesce&&typeof m!="string"&&typeof this._data!="string"&&this._data.type==="FeatureCollection"){const a=new Map;for(const u of this._data.features)a.set(u.id,u);for(const u of m.features)a.set(u.id,u);this._data.features=[...a.values()]}else this._data=m;return this._updateWorkerData(!0),this}getClusterExpansionZoom(m,a){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:m,source:this.id,scope:this.scope},a),this}getClusterChildren(m,a){return this.actor.send("geojson.getClusterChildren",{clusterId:m,source:this.id,scope:this.scope},a),this}getClusterLeaves(m,a,u,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:m,limit:a,offset:u},g),this}_updateWorkerData(m=!1){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new i.x("dataloading",{dataType:"source"})),this._loaded=!1;const a=i.l({append:m},this.workerOptions);a.scope=this.scope;const u=this._data;typeof u=="string"?(a.request=this.map._requestManager.transformRequest(i.q.resolveURL(u),i.R.Source),a.request.collectResourceTiming=this._collectResourceTiming):a.data=JSON.stringify(u),this._pendingLoad=this.actor.send(`${this.type}.loadData`,a,(g,v)=>{if(this._loaded=!0,this._pendingLoad=null,g)this.fire(new i.t(g));else{const x={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&v&&v.resourceTiming&&v.resourceTiming[this.id]&&(x.resourceTiming=v.resourceTiming[this.id]),m&&(this._partialReload=!0),this.fire(new i.x("data",x)),this._partialReload=!1,this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(m),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(m,a){const u=m.actor?"reloadTile":"loadTile";m.actor=this.actor;const g=this.map.style?this.map.style.getLut(this.scope):null,v=this._partialReload,x={type:this.type,uid:m.uid,tileID:m.tileID,tileZoom:m.tileZoom,zoom:m.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,lut:g?{image:g.image.clone()}:null,scope:this.scope,pixelRatio:i.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0,partial:v};m.request=this.actor.send(u,x,(B,k)=>v&&!k?(m.state="loaded",a(null)):(delete m.request,m.destroy(),m.aborted?a(null):B?a(B):(m.loadVectorData(k,this.map.painter,u==="reloadTile"),a(null))),void 0,u==="loadTile")}abortTile(m){m.request&&(m.request.cancel(),delete m.request),m.aborted=!0}unloadTile(m,a){this.actor.send("removeTile",{uid:m.uid,type:this.type,source:this.id,scope:this.scope}),m.destroy()}onRemove(m){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return i.l({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends i.aD{constructor(m,a,u,g){super(m,a,u,g),this.roundZoom=!0,this.type="video",this.options=a}load(){this._loaded=!1;const m=this.options;this.urls=[];for(const a of m.urls)this.urls.push(this.map._requestManager.transformRequest(a,i.R.Source).url);i.aE(this.urls,(a,u)=>{this._loaded=!0,a?this.fire(new i.t(a)):u&&(this.video=u,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(m){if(this.video){const a=this.video.seekable;m<a.start(0)||m>a.end(0)?this.fire(new i.t(new i.V(`sources.${this.id}`,null,`Playback for this video can be set only between the ${a.start(0)} and ${a.end(0)}-second mark.`))):this.video.currentTime=m}}getVideo(){return this.video}onAdd(m){this.map||(this.map=m,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const m=this.map.painter.context,a=m.gl;this.texture?this.video.paused||(this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE),a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,this.video)):(this.texture=new i.T(m,this.video,a.RGBA8),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(m)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:i.aD,model:class extends i.E{constructor(m,a,u,g){super(),this.id=m,this.type="model",this.models=[],this._loaded=!1,this._options=a}load(){const m=[];for(const a in this._options.models){const u=this._options.models[a],g=i.aG(this.map._requestManager.transformRequest(u.uri,i.R.Model).url).then(v=>{if(!v)return;const x=i.aH(v),B=new i.aI(a,u.position,u.orientation,x);B.computeBoundsAndApplyParent(),this.models.push(B)}).catch(v=>{this.fire(new i.t(new Error(`Could not load model ${a} from ${u.uri}: ${v.message}`)))});m.push(g)}return Promise.allSettled(m).then(()=>{this._loaded=!0,this.fire(new i.x("data",{dataType:"source",sourceDataType:"metadata"}))}).catch(a=>{this.fire(new i.t(new Error(`Could not load models: ${a.message}`)))})}onAdd(m){this.map=m,this.load()}hasTransition(){return!1}loaded(){return this._loaded}getModels(){return this.models}loadTile(m,a){}serialize(){return{type:"model"}}},"batched-model":class extends i.E{constructor(m,a,u,g){super(),this.type="batched-model",this.id=m,this.tileSize=512,this._options=a,this.tiles=this._options.tiles,this.maxzoom=a.maxzoom||19,this.minzoom=a.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=u,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(g)}onAdd(m){this.map=m,this.load()}load(m){this._loaded=!1,this.fire(new i.x("dataloading",{dataType:"source"}));const a=Array.isArray(this.map._language)?this.map._language.join():this.map._language,u=this.map._worldview;this._tileJSONRequest=Ps(this._options,this.map._requestManager,a,u,(g,v)=>{this._tileJSONRequest=null,this._loaded=!0,g?(a&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${a}`),u&&u.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${u}`),this.fire(new i.t(g))):v&&(i.l(this,v),v.bounds&&(this.tileBounds=new ya(v.bounds,this.minzoom,this.maxzoom)),$e(v.tiles,this.map._requestManager._customAccessToken),this.fire(new i.x("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.x("data",{dataType:"source",sourceDataType:"content"}))),m&&m(g)})}hasTransition(){return!1}hasTile(m){return!this.tileBounds||this.tileBounds.contains(m.canonical)}loaded(){return this._loaded}loadTile(m,a){const u=this.map._requestManager.normalizeTileURL(m.tileID.canonical.url(this.tiles,this.scheme)),g={request:this.map._requestManager.transformRequest(u,i.R.Tile),data:void 0,uid:m.uid,tileID:m.tileID,tileZoom:m.tileZoom,zoom:m.tileID.overscaledZ,tileSize:this.tileSize*m.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:m.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0};if(m.actor&&m.state!=="expired")if(m.state==="loading")m.reloadCallback=a;else{if(m.buckets){const x=Object.values(m.buckets);for(const B of x)B.dirty=!0;return void(m.state="loaded")}m.request=m.actor.send("reloadTile",g,v.bind(this))}else m.actor=this.dispatcher.getActor(),m.request=m.actor.send("loadTile",g,v.bind(this),void 0,!0);function v(x,B){return m.aborted?a(null):x&&x.status!==404?a(x):(B&&(B.resourceTiming&&(m.resourceTiming=B.resourceTiming),this.map._refreshExpiredTiles&&m.setExpiryData(B),m.buckets={...m.buckets,...B.buckets},B.featureIndex&&(m.latestFeatureIndex=B.featureIndex)),m.state="loaded",void a(null))}}serialize(){return i.l({},this._options)}},canvas:class extends i.aD{constructor(m,a,u,g){super(m,a,u,g),a.coordinates?Array.isArray(a.coordinates)&&a.coordinates.length===4&&!a.coordinates.some(v=>!Array.isArray(v)||v.length!==2||v.some(x=>typeof x!="number"))||this.fire(new i.t(new i.V(`sources.${m}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new i.t(new i.V(`sources.${m}`,null,'missing required property "coordinates"'))),a.animate&&typeof a.animate!="boolean"&&this.fire(new i.t(new i.V(`sources.${m}`,null,'optional "animate" property must be a boolean value'))),a.canvas?typeof a.canvas=="string"||a.canvas instanceof HTMLCanvasElement||this.fire(new i.t(new i.V(`sources.${m}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new i.t(new i.V(`sources.${m}`,null,'missing required property "canvas"'))),this.options=a,this.animate=a.animate===void 0||a.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new i.t(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(m){this.map=m,this.load(),this.canvas&&this.animate&&this.play()}onRemove(m){this.pause()}prepare(){let m=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,m=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,m=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const a=this.map.painter.context;this.texture?!m&&!this._playing||this.texture instanceof i.aF||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new i.T(a,this.canvas,a.gl.RGBA8,{premultiply:!0}),this._prepareData(a)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const m of[this.canvas.width,this.canvas.height])if(isNaN(m)||m<=0)return!0;return!1}},custom:class extends i.E{constructor(m,a,u,g){super(),this.id=m,this.type="custom",this._dataType="raster",this._dispatcher=u,this._implementation=a,this.setEventedParent(g),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new i.t(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new i.t(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new ya(this._implementation.bounds,this.minzoom,this.maxzoom)),a.update=this._update.bind(this),a.clearTiles=this._clearTiles.bind(this),a.coveringTiles=this._coveringTiles.bind(this),i.l(this,i.ar(a,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return i.ar(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new i.x("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.x("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(m){this.map=m,this._loaded=!1,this.fire(new i.x("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(m),this.load()}onRemove(m){this._implementation.onRemove&&this._implementation.onRemove(m)}hasTile(m){if(this._implementation.hasTile){const{x:a,y:u,z:g}=m.canonical;return this._implementation.hasTile({x:a,y:u,z:g})}return!this.tileBounds||this.tileBounds.contains(m.canonical)}loadTile(m,a){const{x:u,y:g,z:v}=m.tileID.canonical,x=new AbortController;m.request=Promise.resolve(this._implementation.loadTile({x:u,y:g,z:v},{signal:x.signal})).then((function(B){return delete m.request,m.aborted?(m.state="unloaded",a(null)):B===void 0?(m.state="errored",a(null)):B===null?(this.loadTileData(m,{width:this.tileSize,height:this.tileSize,data:null}),m.state="loaded",a(null)):function(k){return k instanceof ImageData||k instanceof HTMLCanvasElement||k instanceof ImageBitmap||k instanceof HTMLImageElement}(B)?(this.loadTileData(m,B),m.state="loaded",void a(null)):(m.state="errored",a(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(B=>{B.code!==20&&(m.state="errored",a(B))}),m.request.cancel=()=>x.abort()}loadTileData(m,a){m.setTexture(a,this.map.painter)}unloadTile(m,a){if(m.texture&&m.texture instanceof i.T?(m.destroy(!0),m.texture&&m.texture instanceof i.T&&this.map.painter.saveTileTexture(m.texture)):m.destroy(),this._implementation.unloadTile){const{x:u,y:g,z:v}=m.tileID.canonical;this._implementation.unloadTile({x:u,y:g,z:v})}a&&a()}abortTile(m,a){m.request&&m.request.cancel&&(m.request.cancel(),delete m.request),a&&a()}hasTransition(){return!1}_coveringTiles(){return this.map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(m=>({x:m.canonical.x,y:m.canonical.y,z:m.canonical.z}))}_clearTiles(){const m=i.av(this.id,this.scope);this.map.style.clearSource(m)}_update(){this.fire(new i.x("data",{dataType:"source",sourceDataType:"content"}))}}},Ql=function(m,a,u,g){const v=new Vl[a.type](m,a,u,g);if(v.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${v.id}`);return i.aJ(["load","abort","unload","serialize","prepare"],v),v};function Go(m,a){const u=i.a6.mat4.identity([]);return i.a6.mat4.scale(u,u,[.5*m.width,.5*-m.height,1]),i.a6.mat4.translate(u,u,[1,-1,0]),i.a6.mat4.multiply(u,u,m.calculateProjMatrix(a.toUnwrapped())),Float32Array.from(u)}function vu(m,a,u,g,v,x,B,k=!1){const z=m.tilesIn(g,B,k);z.sort(bc);const Q=[];for(const W of z)Q.push({wrappedTileID:W.tile.tileID.wrapped().key,queryResults:W.tile.queryRenderedFeatures(a,u,m._state,W,v,x,Go(m.transform,W.tile.tileID),k)});const j=function(W){const J={},re={};for(const de of W){const me=de.queryResults,_e=de.wrappedTileID,xe=re[_e]=re[_e]||{};for(const ze in me){const Qe=me[ze],Ue=xe[ze]=xe[ze]||{},Xe=J[ze]=J[ze]||[];for(const qe of Qe)Ue[qe.featureIndex]||(Ue[qe.featureIndex]=!0,Xe.push(qe))}}return J}(Q);for(const W in j)j[W].forEach(J=>{const re=J.feature,de=re.layer;de&&de.type!=="background"&&de.type!=="sky"&&de.type!=="slot"&&(re.source=de.source,de["source-layer"]&&(re.sourceLayer=de["source-layer"]),re.state=re.id!==void 0?m.getFeatureState(de["source-layer"],re.id):{})});return j}function vc(m,a){const u=m.getRenderableIds().map(x=>m.getTileByID(x)),g=[],v={};for(let x=0;x<u.length;x++){const B=u[x],k=B.tileID.canonical.key;v[k]||(v[k]=!0,B.querySourceFeatures(g,a))}return g}function bc(m,a){const u=m.tileID,g=a.tileID;return u.overscaledZ-g.overscaledZ||u.canonical.y-g.canonical.y||u.wrap-g.wrap||u.canonical.x-g.canonical.x}const sa=32,La=33,ls=new Uint16Array(8184);for(let m=0;m<2046;m++){let a=m+2,u=0,g=0,v=0,x=0,B=0,k=0;for(1&a?v=x=B=sa:u=g=k=sa;(a>>=1)>1;){const Q=u+v>>1,j=g+x>>1;1&a?(v=u,x=g,u=B,g=k):(u=v,g=x,v=B,x=k),B=Q,k=j}const z=4*m;ls[z+0]=u,ls[z+1]=g,ls[z+2]=v,ls[z+3]=x}const Ls=new Uint16Array(2178),go=new Uint8Array(1089),qs=new Uint16Array(1089);function wc(m){return m===0?-.03125:m===32?.03125:0}const Vc={type:2,extent:i.ab,loadGeometry:()=>[[new i.P(0,0),new i.P(i.ab+1,0),new i.P(i.ab+1,i.ab+1),new i.P(0,i.ab+1),new i.P(0,0)]]};class Fa{constructor(a,u,g,v,x){this.tileID=a,this.uid=i.aP(),this.uses=0,this.tileSize=u,this.tileZoom=g,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=x,v&&v.style&&(this._lastUpdatedBrightness=v.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",v&&v.transform&&(this.projection=v.transform.projection)}registerFadeDuration(a){const u=a+this.timeAdded;u<i.q.now()||this.fadeEndTime&&u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=i.aK(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(a,u,g){if(this.unloadVectorData(),this.state="loaded",a){a.featureIndex&&(this.latestFeatureIndex=a.featureIndex,a.rawTileData?(this.latestRawTileData=a.rawTileData,this.latestFeatureIndex.rawTileData=a.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=a.collisionBoxArray,this.buckets=function(v,x){const B={};if(!x)return B;for(const k of v){const z=k.layerIds.map(Q=>x.getLayer(Q)).filter(Boolean);if(z.length!==0){k.layers=z,k.stateDependentLayerIds&&(k.stateDependentLayers=k.stateDependentLayerIds.map(Q=>z.filter(j=>j.id===Q)[0]));for(const Q of z)B[Q.fqid]=k}}return B}(a.buckets,u.style),this.hasSymbolBuckets=!1;for(const v in this.buckets){const x=this.buckets[v];if(x instanceof i.aR){if(this.hasSymbolBuckets=!0,!g)break;x.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const v in this.buckets){const x=this.buckets[v];if(x instanceof i.aR&&x.hasRTLText){this.hasRTLText=!0,i.aS();break}}this.queryPadding=0;for(const v in this.buckets){const x=this.buckets[v],B=u.style.getOwnLayer(v);if(!B)continue;const k=B.queryRadius(x);this.queryPadding=Math.max(this.queryPadding,k)}a.imageAtlas&&(this.imageAtlas=a.imageAtlas),a.glyphAtlasImage&&(this.glyphAtlasImage=a.glyphAtlasImage),a.lineAtlas&&(this.lineAtlas=a.lineAtlas),this._lastUpdatedBrightness=a.brightness}else this.collisionBoxArray=new i.aQ}unloadVectorData(){if(this.hasData()){for(const a in this.buckets)this.buckets[a].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(a){return this.buckets[a.fqid]}upload(a){for(const v in this.buckets){const x=this.buckets[v];x.uploadPending()&&x.upload(a)}const u=a.gl,g=this.imageAtlas;if(g&&!g.uploaded){const v=!!Object.keys(g.patternPositions).length;this.imageAtlasTexture=new i.T(a,g.image,u.RGBA8,{useMipmap:v}),this.imageAtlas.uploaded=!0}this.glyphAtlasImage&&(this.glyphAtlasTexture=new i.T(a,this.glyphAtlasImage,u.R8),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new i.T(a,this.lineAtlas.image,u.R8),this.lineAtlas.uploaded=!0)}prepare(a,u,g){if(this.imageAtlas&&this.imageAtlasTexture&&this.imageAtlas.patchUpdatedImages(a,this.imageAtlasTexture,g),!u||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;const v=u.style.getBrightness();(this._lastUpdatedBrightness||v)&&(this._lastUpdatedBrightness&&v&&Math.abs(this._lastUpdatedBrightness-v)<.001||(this._lastUpdatedBrightness=v,this.updateBuckets(u)))}queryRenderedFeatures(a,u,g,v,x,B,k,z){return this.latestFeatureIndex&&(this.latestFeatureIndex.rawTileData||this.latestFeatureIndex.is3DTile)?this.latestFeatureIndex.query({tileResult:v,pixelPosMatrix:k,transform:B,params:x,tileTransform:this.tileTransform},a,u,g):{}}querySourceFeatures(a,u){const g=this.latestFeatureIndex;if(!g||!g.rawTileData)return;const v=g.loadVTLayers(),x=u?u.sourceLayer:"",B=v._geojsonTileLayer||v[x];if(!B)return;const k=i.aT(u&&u.filter),{z,x:Q,y:j}=this.tileID.canonical,W={z,x:Q,y:j};for(let J=0;J<B.length;J++){const re=B.feature(J);if(k.needGeometry){const _e=i.aU(re,!0);if(!k.filter(new i.a3(this.tileID.overscaledZ),_e,this.tileID.canonical))continue}else if(!k.filter(new i.a3(this.tileID.overscaledZ),re))continue;const de=g.getId(re,x),me=new i.aV(re,z,Q,j,de);me.tile=W,a.push(me)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(a){const u=this.expirationTime;if(a.cacheControl){const g=i.aW(a.cacheControl);g["max-age"]&&(this.expirationTime=Date.now()+1e3*g["max-age"])}else a.expires&&(this.expirationTime=new Date(a.expires).getTime());if(this.expirationTime){const g=Date.now();let v=!1;if(this.expirationTime>g)v=!1;else if(u)if(this.expirationTime<u)v=!0;else{const x=this.expirationTime-u;x?this.expirationTime=g+Math.max(x,3e4):v=!0}else v=!0;v?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(a,u){this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(a).length!==0&&u&&this.updateBuckets(u)}updateBuckets(a){if(!this.latestFeatureIndex)return;const u=this.latestFeatureIndex.loadVTLayers(),g=a.style.listImages(),v=a.style.getBrightness();for(const x in this.buckets){if(!a.style.hasLayer(x))continue;const B=this.buckets[x],k=B.layers[0].sourceLayer||"_geojsonTileLayer",z=u[k],Q=a.style.getOwnSourceCache(B.layers[0].source);let j={};Q&&(j=Q._state.getState(k,void 0)),B.update(j,z,g,this.imageAtlas&&this.imageAtlas.patternPositions||{},v),(B instanceof i.aX||B instanceof i.aY)&&a._terrain&&a._terrain.enabled&&Q&&B.programConfigurations.needsUpload&&a._terrain._clearRenderCacheForTile(Q.id,this.tileID);const W=a&&a.style&&a.style.getOwnLayer(x);W&&(this.queryPadding=Math.max(this.queryPadding,W.queryRadius(B)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<i.q.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(a){this.symbolFadeHoldUntil=i.q.now()+a}setTexture(a,u){const g=u.context,v=g.gl;this.texture=this.texture||u.getTileTexture(a.width),this.texture&&this.texture instanceof i.T?this.texture.update(a):(this.texture=new i.T(g,a,v.RGBA8,{useMipmap:!0}),this.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE))}setDependencies(a,u){const g={};for(const v of u)g[v]=!0;this.dependencies[a]=g}hasDependency(a,u){for(const g of a){const v=this.dependencies[g];if(v){for(const x of u)if(v[x])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(a,u){if(!u||u.name==="mercator"||this._tileDebugBuffer)return;const g=i.aZ(Vc,this.tileID.canonical,this.tileTransform)[0],v=new i.a_,x=new i.a$;for(let B=0;B<g.length;B++){const{x:k,y:z}=g[B];v.emplaceBack(k,z),x.emplaceBack(B)}x.emplaceBack(0),this._tileDebugIndexBuffer=a.createIndexBuffer(x),this._tileDebugBuffer=a.createVertexBuffer(v,i.b0.members),this._tileDebugSegments=i.b1.simpleSegment(0,0,v.length,x.length)}_makeTileBoundsBuffers(a,u){if(this._tileBoundsBuffer||!u||u.name==="mercator")return;const g=i.aZ(Vc,this.tileID.canonical,this.tileTransform)[0];let v,x;if(this.isRaster){const B=function(k,z){const Q=i.aK(k,z),j=Math.pow(2,k.z);for(let _e=0;_e<La;_e++)for(let xe=0;xe<La;xe++){const ze=i.aL((k.x+(xe+wc(xe))/sa)/j),Qe=i.aM((k.y+(_e+wc(_e))/sa)/j),Ue=z.project(ze,Qe),Xe=_e*La+xe;Ls[2*Xe+0]=Math.round((Ue.x*Q.scale-Q.x)*i.ab),Ls[2*Xe+1]=Math.round((Ue.y*Q.scale-Q.y)*i.ab)}go.fill(0),qs.fill(0);for(let _e=2045;_e>=0;_e--){const xe=4*_e,ze=ls[xe+0],Qe=ls[xe+1],Ue=ls[xe+2],Xe=ls[xe+3],qe=ze+Ue>>1,ut=Qe+Xe>>1,it=qe+ut-Qe,ht=ut+ze-qe,xt=Qe*La+ze,pt=Xe*La+Ue,At=ut*La+qe,Rt=Math.hypot((Ls[2*xt+0]+Ls[2*pt+0])/2-Ls[2*At+0],(Ls[2*xt+1]+Ls[2*pt+1])/2-Ls[2*At+1])>=16;go[At]=go[At]||(Rt?1:0),_e<1022&&(go[At]=go[At]||go[(Qe+ht>>1)*La+(ze+it>>1)]||go[(Xe+ht>>1)*La+(Ue+it>>1)])}const W=new i.aN,J=new i.aO;let re=0;function de(_e,xe){const ze=xe*La+_e;return qs[ze]===0&&(W.emplaceBack(Ls[2*ze+0],Ls[2*ze+1],_e*i.ab/sa,xe*i.ab/sa),qs[ze]=++re),qs[ze]-1}function me(_e,xe,ze,Qe,Ue,Xe){const qe=_e+ze>>1,ut=xe+Qe>>1;if(Math.abs(_e-Ue)+Math.abs(xe-Xe)>1&&go[ut*La+qe])me(Ue,Xe,_e,xe,qe,ut),me(ze,Qe,Ue,Xe,qe,ut);else{const it=de(_e,xe),ht=de(ze,Qe),xt=de(Ue,Xe);J.emplaceBack(it,ht,xt)}}return me(0,0,sa,sa,sa,0),me(sa,sa,0,0,0,sa),{vertices:W,indices:J}}(this.tileID.canonical,u);v=B.vertices,x=B.indices}else{v=new i.aN,x=new i.aO;for(const{x:k,y:z}of g)v.emplaceBack(k,z,0,0);const B=i.b2(v.int16,void 0,4);for(let k=0;k<B.length;k+=3)x.emplaceBack(B[k],B[k+1],B[k+2])}this._tileBoundsBuffer=a.createVertexBuffer(v,i.b3.members),this._tileBoundsIndexBuffer=a.createIndexBuffer(x),this._tileBoundsSegments=i.b1.simpleSegment(0,0,v.length,x.length)}_makeGlobeTileDebugBuffers(a,u){const g=u.projection;if(!g||g.name!=="globe"||u.freezeTileCoverage)return;const v=this.tileID.canonical,x=i.b4(v,u),B=i.b5(x),k=i.a9(u.zoom);let z;k>0&&(z=i.a6.mat4.invert(new Float64Array(16),u.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(a,v,u,B,z,k),this._makeGlobeTileDebugTextBuffer(a,v,u,B,z,k)}_globePoint(a,u,g,v,x,B,k){let z=i.b6(a,u,g);if(B){const Q=1<<g.z,j=i.am(v.center.lng),W=i.at(v.center.lat),J=(g.x+.5)/Q-j;let re=0;J>.5?re=-1:J<-.5&&(re=1);let de=(a/i.ab+g.x)/Q+re,me=(u/i.ab+g.y)/Q;de=(de-j)*v._pixelsPerMercatorPixel+j,me=(me-W)*v._pixelsPerMercatorPixel+W;const _e=[de*v.worldSize,me*v.worldSize,0];i.a6.vec3.transformMat4(_e,_e,B),z=i.b7(z,_e,k)}return i.a6.vec3.transformMat4(z,z,x)}_makeGlobeTileDebugBorderBuffer(a,u,g,v,x,B){const k=new i.a_,z=new i.a$,Q=new i.b8,j=(J,re,de,me,_e)=>{const xe=(de-J)/(_e-1),ze=(me-re)/(_e-1),Qe=k.length;for(let Ue=0;Ue<_e;Ue++){const Xe=J+Ue*xe,qe=re+Ue*ze;k.emplaceBack(Xe,qe);const ut=this._globePoint(Xe,qe,u,g,v,x,B);Q.emplaceBack(ut[0],ut[1],ut[2]),z.emplaceBack(Qe+Ue)}},W=i.ab;j(0,0,W,0,16),j(W,0,W,W,16),j(W,W,0,W,16),j(0,W,0,0,16),this._tileDebugIndexBuffer=a.createIndexBuffer(z),this._tileDebugBuffer=a.createVertexBuffer(k,i.b0.members),this._globeTileDebugBorderBuffer=a.createVertexBuffer(Q,i.b9.members),this._tileDebugSegments=i.b1.simpleSegment(0,0,k.length,z.length)}_makeGlobeTileDebugTextBuffer(a,u,g,v,x,B){const k=i.ab/4,z=new i.a_,Q=new i.aO,j=new i.b8,W=25;Q.reserve(32),z.reserve(W),j.reserve(W);const J=(re,de)=>W*re+de;for(let re=0;re<W;re++){const de=re*k;for(let me=0;me<W;me++){const _e=me*k;z.emplaceBack(_e,de);const xe=this._globePoint(_e,de,u,g,v,x,B);j.emplaceBack(xe[0],xe[1],xe[2])}}for(let re=0;re<4;re++)for(let de=0;de<4;de++){const me=J(re,de),_e=J(re,de+1),xe=J(re+1,de),ze=J(re+1,de+1);Q.emplaceBack(me,_e,xe),Q.emplaceBack(xe,_e,ze)}this._tileDebugTextIndexBuffer=a.createIndexBuffer(Q),this._tileDebugTextBuffer=a.createVertexBuffer(z,i.b0.members),this._globeTileDebugTextBuffer=a.createVertexBuffer(j,i.b9.members),this._tileDebugTextSegments=i.b1.simpleSegment(0,0,W,32)}destroy(a=!1){for(const u in this.buckets)this.buckets[u].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&(this.imageAtlasTexture.destroy(),delete this.imageAtlasTexture),this.glyphAtlasTexture&&(this.glyphAtlasTexture.destroy(),delete this.glyphAtlasTexture),this.lineAtlasTexture&&(this.lineAtlasTexture.destroy(),delete this.lineAtlasTexture),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),!a&&this.texture&&this.texture instanceof i.T&&(this.texture.destroy(),delete this.texture),this.hillshadeFBO&&(this.hillshadeFBO.destroy(),delete this.hillshadeFBO),this.dem&&delete this.dem,this.neighboringTiles&&delete this.neighboringTiles,this.demTexture&&(this.demTexture.destroy(),delete this.demTexture),this.rasterParticleState&&(this.rasterParticleState.destroy(),delete this.rasterParticleState),this.latestFeatureIndex=null,this.state="unloaded"}}i.ba.setPbf(i.bb);class co extends Fa{constructor(a,u,g,v,x){super(a,u,g,v,x),this._workQueue=[],this._fetchQueue=[],this._isHeaderLoaded=!1}setTexture(a,u){const g=u.context,v=g.gl;this.texture=this.texture||u.getTileTexture(a.width),this.texture&&this.texture instanceof i.T?this.texture.update(a,{premultiply:!1}):this.texture=new i.T(g,a,v.RGBA8,{premultiply:!1})}flushQueues(){for(;this._workQueue.length;)this._workQueue.pop()();for(;this._fetchQueue.length;)this._fetchQueue.pop()()}fetchHeader(a=16384,u){const g=this._mrt=new i.ba(30),v=Object.assign({},this.requestParams,{headers:{Range:"bytes=0-"+(a-1)}});return this.entireBuffer=null,this.request=i.bc(v,(x,B,k,z)=>{if(x)u(x);else try{const Q=g.getHeaderLength(B);if(Q>a)return void(this.request=this.fetchHeader(Q,u));g.parseHeader(B),this._isHeaderLoaded=!0;let j=0;for(const W of Object.values(g.layers))j=Math.max(j,W.dataIndex[W.dataIndex.length-1].last_byte);B.byteLength>=j&&(this.entireBuffer=B),u(null,this.entireBuffer||B,k,z)}catch(Q){u(Q)}}),this.request}fetchBand(a,u,g){const v=this._mrt;if(!this._isHeaderLoaded||!v)return void g(new Error("Tile header is not ready"));const x=this.actor;if(!x)return void g(new Error("Can't fetch tile band without an actor"));let B;const k=(W,J)=>{B.complete(W,J),W?g(W):(this.updateTextureDescriptor(a,u),g(null,this.textureDescriptor&&this.textureDescriptor.img))},z=(W,J)=>{if(W)return g(W);const re=x.send("decodeRasterArray",{buffer:J,task:B},k,void 0,!0);this._workQueue.push(()=>{re&&re.cancel(),B.cancel()})},Q=v.getLayer(a);if(!Q)return void g(new Error(`Unknown sourceLayer "${a}"`));if(Q.hasDataForBand(u))return this.updateTextureDescriptor(a,u),void g(null,this.textureDescriptor?this.textureDescriptor.img:null);const j=Q.getDataRange([u]);if(B=v.createDecodingTask(j),!B||B.tasks.length)if(this.flushQueues(),this.entireBuffer)z(null,this.entireBuffer.slice(j.firstByte,j.lastByte+1));else{const W=Object.assign({},this.requestParams,{headers:{Range:`bytes=${j.firstByte}-${j.lastByte}`}}),J=i.bc(W,z);this._fetchQueue.push(()=>{J.cancel(),B.cancel()})}else g(null)}updateNeeded(a,u){return(!this.textureDescriptor||this.textureDescriptor.band!==u||this.textureDescriptor.layer!==a)&&this.state!=="errored"}updateTextureDescriptor(a,u){if(!this._mrt)return;const g=this._mrt.getLayer(a);if(!g||!g.hasBand(u)||!g.hasDataForBand(u))return;const{bytes:v,tileSize:x,buffer:B,offset:k,scale:z}=g.getBandView(u),Q=x+2*B,j={data:v,width:Q,height:Q},W=this.texture;W&&W instanceof i.T&&W.update(j,{premultiply:!1}),this.textureDescriptor={layer:a,band:u,img:j,buffer:B,offset:k,tileSize:x,format:g.pixelFormat,mix:[z,256*z,65536*z,16777216*z]}}}class Qc{constructor(a,u){this.max=a,this.onRemove=u,this.reset()}reset(){for(const a in this.data)for(const u of this.data[a])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(a,u,g){const v=a.wrapped().key;this.data[v]===void 0&&(this.data[v]=[]);const x={value:u,timeout:void 0};if(g!==void 0&&(x.timeout=setTimeout(()=>{this.remove(a,x)},g)),this.data[v].push(x),this.order.push(v),this.order.length>this.max){const B=this._getAndRemoveByKey(this.order[0]);B&&this.onRemove(B)}return this}has(a){return a.wrapped().key in this.data}getAndRemove(a){return this.has(a)?this._getAndRemoveByKey(a.wrapped().key):null}_getAndRemoveByKey(a){const u=this.data[a].shift();return u.timeout&&clearTimeout(u.timeout),this.data[a].length===0&&delete this.data[a],this.order.splice(this.order.indexOf(a),1),u.value}getByKey(a){const u=this.data[a];return u?u[0].value:null}get(a){return this.has(a)?this.data[a.wrapped().key][0].value:null}remove(a,u){if(!this.has(a))return this;const g=a.wrapped().key,v=u===void 0?0:this.data[g].indexOf(u),x=this.data[g][v];return this.data[g].splice(v,1),x.timeout&&clearTimeout(x.timeout),this.data[g].length===0&&delete this.data[g],this.onRemove(x.value),this.order.splice(this.order.indexOf(g),1),this}setMaxSize(a){for(this.max=a;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(a){const u=[];for(const g in this.data)for(const v of this.data[g])a(v.value)||u.push(v);for(const g of u)this.remove(g.value.tileID,g)}}class bu{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(a,u,g){const v=String(u);if(this.stateChanges[a]=this.stateChanges[a]||{},this.stateChanges[a][v]=this.stateChanges[a][v]||{},i.l(this.stateChanges[a][v],g),this.deletedStates[a]===null){this.deletedStates[a]={};for(const x in this.state[a])x!==v&&(this.deletedStates[a][x]=null)}else if(this.deletedStates[a]&&this.deletedStates[a][v]===null){this.deletedStates[a][v]={};for(const x in this.state[a][v])g[x]||(this.deletedStates[a][v][x]=null)}else for(const x in g)this.deletedStates[a]&&this.deletedStates[a][v]&&this.deletedStates[a][v][x]===null&&delete this.deletedStates[a][v][x]}removeFeatureState(a,u,g){if(this.deletedStates[a]===null)return;const v=String(u);if(this.deletedStates[a]=this.deletedStates[a]||{},g&&u!==void 0)this.deletedStates[a][v]!==null&&(this.deletedStates[a][v]=this.deletedStates[a][v]||{},this.deletedStates[a][v][g]=null);else if(u!==void 0)if(this.stateChanges[a]&&this.stateChanges[a][v])for(g in this.deletedStates[a][v]={},this.stateChanges[a][v])this.deletedStates[a][v][g]=null;else this.deletedStates[a][v]=null;else this.deletedStates[a]=null}getState(a,u){const g=this.state[a]||{},v=this.stateChanges[a]||{},x=this.deletedStates[a];if(x===null)return{};if(u!==void 0){const k=String(u),z=i.l({},g[k],v[k]);if(x){const Q=x[u];if(Q===null)return{};for(const j in Q)delete z[j]}return z}const B=i.l({},g,v);if(x)for(const k in x)delete B[k];return B}initializeTileState(a,u){a.setFeatureState(this.state,u)}coalesceChanges(a,u){const g={};for(const v in this.stateChanges){this.state[v]=this.state[v]||{};const x={};for(const B in this.stateChanges[v])this.state[v][B]||(this.state[v][B]={}),i.l(this.state[v][B],this.stateChanges[v][B]),x[B]=this.state[v][B];g[v]=x}for(const v in this.deletedStates){this.state[v]=this.state[v]||{};const x={};if(this.deletedStates[v]===null)for(const B in this.state[v])x[B]={},this.state[v][B]={};else for(const B in this.deletedStates[v]){if(this.deletedStates[v][B]===null)this.state[v][B]={};else if(this.state[v][B])for(const k of Object.keys(this.deletedStates[v][B]))delete this.state[v][B][k];x[B]=this.state[v][B]}g[v]=g[v]||{},i.l(g[v],x)}if(this.stateChanges={},this.deletedStates={},Object.keys(g).length!==0)for(const v in a)a[v].setFeatureState(g,u)}}class cs extends i.E{constructor(a,u,g){super(),this.id=a,this._onlySymbols=g,u.on("data",v=>{v.dataType==="source"&&v.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&v.dataType==="source"&&v.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),u.on("error",()=>{this._sourceErrored=!0}),this._source=u,this._tiles={},this._cache=new Qc(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=u.minTileCacheSize,this._maxTileCacheSize=u.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this.tileCoverLift=0,this._coveredTiles={},this._shadowCasterTiles={},this._state=new bu,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="raster-array"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(a){this.map=a,this._minTileCacheSize=this._minTileCacheSize===void 0&&a?a._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&a?a._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const a in this._tiles){const u=this._tiles[a];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(a,u){return a.isSymbolTile=this._onlySymbols,a.isExtraShadowCaster=this._shadowCasterTiles[a.tileID.key],this._source.loadTile(a,u)}_unloadTile(a){if(this._source.unloadTile)return this._source.unloadTile(a)}_abortTile(a){if(this._source.abortTile)return this._source.abortTile(a)}serialize(){return this._source.serialize()}prepare(a){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const g=this._tiles[u];g.upload(a),g.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return i.bd(this._tiles).map(a=>a.tileID).sort(Hl).map(a=>a.key)}getRenderableIds(a,u){const g=[];for(const v in this._tiles)this._isIdRenderable(+v,a,u)&&g.push(this._tiles[v]);return a?g.sort((v,x)=>{const B=v.tileID,k=x.tileID,z=new i.P(B.canonical.x,B.canonical.y)._rotate(this.transform.angle),Q=new i.P(k.canonical.x,k.canonical.y)._rotate(this.transform.angle);return B.overscaledZ-k.overscaledZ||Q.y-z.y||Q.x-z.x}).map(v=>v.tileID.key):g.map(v=>v.tileID).sort(Hl).map(v=>v.key)}hasRenderableParent(a){const u=this.findLoadedParent(a,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(a,u,g){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(u||!this._tiles[a].holdingForFade())&&(g||!this._shadowCasterTiles[a])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const a in this._tiles)this._tiles[a].state!=="errored"&&this._reloadTile(+a,"reloading")}}_reloadTile(a,u){const g=this._tiles[a];g&&(g.state!=="loading"&&(g.state=u),this._loadTile(g,this._tileLoaded.bind(this,g,a,u)))}_tileLoaded(a,u,g,v){if(v)if(a.state="errored",v.status!==404)this._source.fire(new i.t(v,{tile:a}));else{if(this._source.fire(new i.x("data",{dataType:"source",sourceDataType:"error",sourceId:this._source.id,tile:a})),!(a.tileID.key in this._loadedParentTiles))return;if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const x=this.map.painter.terrain;this.update(this.transform,x.getScaledDemTileSize(),!0),x.resetTileLookupCache(this.id)}else this.update(this.transform)}else a.timeAdded=i.q.now(),g==="expired"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(u,a),this._source.type==="raster-dem"&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),this._source.fire(new i.x("data",{dataType:"source",tile:a,coord:a.tileID,sourceCacheId:this.id}))}_backfillDEM(a){const u=this.getRenderableIds();for(let v=0;v<u.length;v++){const x=u[v];if(a.neighboringTiles&&a.neighboringTiles[x]){const B=this.getTileByID(x);g(a,B),g(B,a)}}function g(v,x){if(!v.dem||v.dem.borderReady)return;v.needsHillshadePrepare=!0,v.needsDEMTextureUpload=!0;let B=x.tileID.canonical.x-v.tileID.canonical.x;const k=x.tileID.canonical.y-v.tileID.canonical.y,z=Math.pow(2,v.tileID.canonical.z),Q=x.tileID.key;B===0&&k===0||Math.abs(k)>1||(Math.abs(B)>1&&(Math.abs(B+z)===1?B+=z:Math.abs(B-z)===1&&(B-=z)),x.dem&&v.dem&&(v.dem.backfillBorder(x.dem,B,k),v.neighboringTiles&&v.neighboringTiles[Q]&&(v.neighboringTiles[Q].backfilled=!0)))}}getTile(a){return this.getTileByID(a.key)}getTileByID(a){return this._tiles[a]}_retainLoadedChildren(a,u,g,v){for(const x in this._tiles){let B=this._tiles[x];if(v[x]||!B.hasData()||B.tileID.overscaledZ<=u||B.tileID.overscaledZ>g)continue;let k=B.tileID;for(;B&&B.tileID.overscaledZ>u+1;){const Q=B.tileID.scaledTo(B.tileID.overscaledZ-1);B=this._tiles[Q.key],B&&B.hasData()&&(k=Q)}let z=k;for(;z.overscaledZ>u;)if(z=z.scaledTo(z.overscaledZ-1),a[z.key]){v[k.key]=k;break}}}findLoadedParent(a,u){if(a.key in this._loadedParentTiles){const g=this._loadedParentTiles[a.key];return g&&g.tileID.overscaledZ>=u?g:null}for(let g=a.overscaledZ-1;g>=u;g--){const v=a.scaledTo(g),x=this._getLoadedTile(v);if(x)return x}}_getLoadedTile(a){const u=this._tiles[a.key];return u&&u.hasData()?u:this._cache.getByKey(this._source.reparseOverscaled?a.wrapped().key:a.canonical.key)}updateCacheSize(a,u){u=u||this._source.tileSize;const g=Math.ceil(a.width/u)+1,v=Math.ceil(a.height/u)+1,x=Math.floor(g*v*5),B=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,x):x,k=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,B):B;this._cache.setMaxSize(k)}handleWrapJump(a){const u=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);if(this._prevLng=a,u){const g={};for(const v in this._tiles){const x=this._tiles[v];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+u),g[x.tileID.key]=x}this._tiles=g;for(const v in this._timers)clearTimeout(this._timers[v]),delete this._timers[v];for(const v in this._tiles)this._setTileReloadTimer(+v,this._tiles[v])}}update(a,u,g,v){if(this.transform=a,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!g)return;this.updateCacheSize(a,u),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={};const x=this._source.type==="batched-model";let B;if(this.used||this.usedForTerrain){if(this._source.tileID)B=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(Q=>new i.aA(Q.canonical.z,Q.wrap,Q.canonical.z,Q.canonical.x,Q.canonical.y));else if(this.tileCoverLift!==0){const Q=a.clone();Q.tileCoverLift=this.tileCoverLift,B=Q.coveringTiles({tileSize:u||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!g,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:x}),this._source.minzoom<=1&&a.projection.name==="globe"&&(B.push(new i.aA(1,0,1,0,0)),B.push(new i.aA(1,0,1,1,0)),B.push(new i.aA(1,0,1,0,1)),B.push(new i.aA(1,0,1,1,1)))}else if(B=a.coveringTiles({tileSize:u||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!g,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:x}),this._source.hasTile){const Q=this._source.hasTile.bind(this._source);B=B.filter(j=>Q(j))}}else B=[];if(B.length>0&&this.castsShadows&&v&&this.transform.projection.name!=="globe"&&!this.usedForTerrain&&!Hc(this._source.type)){const Q=a.coveringZoomLevel({tileSize:u||this._source.tileSize,roundZoom:this._source.roundZoom&&!g}),j=Math.min(Q,this._source.maxzoom);if(x){const W=a.extendTileCover(B,j);for(const J of W)B.push(J)}else{const W=a.extendTileCover(B,j,v);for(const J of W)this._shadowCasterTiles[J.key]=!0,B.push(J)}}const k=this._updateRetainedTiles(B);if(Hc(this._source.type)&&B.length!==0){const Q={},j={},W=Object.keys(k);for(const re of W){const de=k[re],me=this._tiles[re];if(!me||me.fadeEndTime&&me.fadeEndTime<=i.q.now())continue;const _e=this.findLoadedParent(de,Math.max(de.overscaledZ-cs.maxOverzooming,this._source.minzoom));_e&&(this._addTile(_e.tileID),Q[_e.tileID.key]=_e.tileID),j[re]=de}const J=B[B.length-1].overscaledZ;for(const re in this._tiles){const de=this._tiles[re];if(k[re]||!de.hasData())continue;let me=de.tileID;for(;me.overscaledZ>J;){me=me.scaledTo(me.overscaledZ-1);const _e=this._tiles[me.key];if(_e&&_e.hasData()&&j[me.key]){k[re]=de.tileID;break}}}for(const re in Q)k[re]||(this._coveredTiles[re]=!0,k[re]=Q[re])}for(const Q in k)this._tiles[Q].clearFadeHold();const z=i.be(this._tiles,k);for(const Q of z){const j=this._tiles[Q];j.hasSymbolBuckets&&!j.holdingForFade()?j.setHoldDuration(this.map._fadeDuration):j.hasSymbolBuckets&&!j.symbolFadeFinished()||this._removeTile(+Q)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(+a)}_updateRetainedTiles(a){const u={};if(a.length===0)return u;const g={},v=a.reduce((Q,j)=>Math.min(Q,j.overscaledZ),1/0),x=a[0].overscaledZ,B=Math.max(x-cs.maxOverzooming,this._source.minzoom),k=Math.max(x+cs.maxUnderzooming,this._source.minzoom),z={};for(const Q of a){const j=this._addTile(Q);u[Q.key]=Q,j.hasData()||v<this._source.maxzoom&&(z[Q.key]=Q)}this._retainLoadedChildren(z,v,k,u);for(const Q of a){let j=this._tiles[Q.key];if(j.hasData())continue;if(Q.canonical.z>=this._source.maxzoom){const J=Q.children(this._source.maxzoom)[0],re=this.getTile(J);if(re&&re.hasData()){u[J.key]=J;continue}}else{const J=Q.children(this._source.maxzoom);if(u[J[0].key]&&u[J[1].key]&&u[J[2].key]&&u[J[3].key])continue}let W=j.wasRequested();for(let J=Q.overscaledZ-1;J>=B;--J){const re=Q.scaledTo(J);if(g[re.key]||(g[re.key]=!0,j=this.getTile(re),!j&&W&&(j=this._addTile(re)),j&&(u[re.key]=re,W=j.wasRequested(),j.hasData())))break}}return u}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const a in this._tiles){const u=[];let g,v=this._tiles[a].tileID;for(;v.overscaledZ>0;){if(v.key in this._loadedParentTiles){g=this._loadedParentTiles[v.key];break}u.push(v.key);const x=v.scaledTo(v.overscaledZ-1);if(g=this._getLoadedTile(x),g)break;v=x}for(const x of u)this._loadedParentTiles[x]=g}}_addTile(a){let u=this._tiles[a.key];if(u)return u.isExtraShadowCaster!==!0||this._shadowCasterTiles[a.key]||this._reloadTile(a.key,"reloading"),u;u=this._cache.getAndRemove(a),u&&(this._setTileReloadTimer(a.key,u),u.tileID=a,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,u)));const g=!!u;if(!g){const v=this.map?this.map.painter:null,x=this._source.tileSize*a.overscaleFactor();u=this._source.type==="raster-array"?new co(a,x,this.transform.tileZoom,v,this._isRaster):new Fa(a,x,this.transform.tileZoom,v,this._isRaster),this._loadTile(u,this._tileLoaded.bind(this,u,a.key,u.state))}return u?(u.uses++,this._tiles[a.key]=u,g||this._source.fire(new i.x("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u):null}_setTileReloadTimer(a,u){a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);const g=u.getExpiryTimeout();g&&(this._timers[a]=setTimeout(()=>{this._reloadTile(a,"expired"),delete this._timers[a]},g))}_removeTile(a){const u=this._tiles[a];u&&(u.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),u.uses>0||(u.hasData()&&u.state!=="reloading"||u.state==="empty"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const a in this._tiles)this._removeTile(+a);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(a,u,g){const v=[],x=this.transform;if(!x)return v;const B=x.projection.name==="globe",k=i.am(x.center.lng);for(const z in this._tiles){const Q=this._tiles[z];if(g&&Q.clearQueryDebugViz(),Q.holdingForFade())continue;let j;if(B){const W=Q.tileID.canonical;if(W.z===0){const J=[Math.abs(i.ap(k,...jc(W,-1))-k),Math.abs(i.ap(k,...jc(W,1))-k)];j=[0,2*J.indexOf(Math.min(...J))-1]}else{const J=[Math.abs(i.ap(k,...jc(W,-1))-k),Math.abs(i.ap(k,...jc(W,0))-k),Math.abs(i.ap(k,...jc(W,1))-k)];j=[J.indexOf(Math.min(...J))-1]}}else j=[0];for(const W of j){const J=a.containsTile(Q,x,u,W);J&&v.push(J)}}return v}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(a){return this._getRenderableCoordinates(a)}_getRenderableCoordinates(a,u){const g=this.getRenderableIds(a,u).map(x=>this._tiles[x].tileID),v=this.transform.projection.name==="globe";for(const x of g)x.projMatrix=this.transform.calculateProjMatrix(x.toUnwrapped()),x.expandedProjMatrix=v?this.transform.calculateProjMatrix(x.toUnwrapped(),!1,!0):x.projMatrix;return g}sortCoordinatesByDistance(a){const u=a.slice(),g=this.transform._camera.position,v=this.transform._camera.forward(),x={};for(const B of u){const k=1/(1<<B.canonical.z);x[B.key]=((B.canonical.x+.5)*k+B.wrap-g[0])*v[0]+((B.canonical.y+.5)*k-g[1])*v[1]-g[2]*v[2]}return u.sort((B,k)=>x[B.key]-x[k.key]),u}hasTransition(){if(this._source.hasTransition())return!0;if(Hc(this._source.type))for(const a in this._tiles){const u=this._tiles[a];if(u.fadeEndTime!==void 0&&u.fadeEndTime>=i.q.now())return!0}return!1}setFeatureState(a,u,g){this._state.updateState(a=a||"_geojsonTileLayer",u,g)}removeFeatureState(a,u,g){this._state.removeFeatureState(a=a||"_geojsonTileLayer",u,g)}getFeatureState(a,u){return this._state.getState(a=a||"_geojsonTileLayer",u)}setDependencies(a,u,g){const v=this._tiles[a];v&&v.setDependencies(u,g)}reloadTilesForDependencies(a,u){for(const g in this._tiles)this._tiles[g].hasDependency(a,u)&&this._reloadTile(+g,"reloading");this._cache.filter(g=>!g.hasDependency(a,u))}_preloadTiles(a,u){if(!this._sourceLoaded){const z=()=>{this._sourceLoaded&&(this._source.off("data",z),this._preloadTiles(a,u))};return void this._source.on("data",z)}const g=new Map,v=Array.isArray(a)?a:[a],x=this.map.painter.terrain,B=this.usedForTerrain&&x?x.getScaledDemTileSize():this._source.tileSize;for(const z of v){const Q=z.coveringTiles({tileSize:B,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const j of Q)g.set(j.key,j);this.usedForTerrain&&z.updateElevation(!1)}const k=Array.from(g.values());i.bf(k,(z,Q)=>{const j=new Fa(z,this._source.tileSize*z.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(j,W=>{this._source.type==="raster-dem"&&j.dem&&this._backfillDEM(j),Q(W,j)})},u)}}function Hl(m,a){const u=Math.abs(2*m.wrap)-+(m.wrap<0),g=Math.abs(2*a.wrap)-+(a.wrap<0);return m.overscaledZ-a.overscaledZ||g-u||a.canonical.y-m.canonical.y||a.canonical.x-m.canonical.x}function Hc(m){return m==="raster"||m==="image"||m==="video"||m==="custom"}function jc(m,a){const u=1<<m.z;return[m.x/u+a,(m.x+1)/u+a]}cs.maxOverzooming=10,cs.maxUnderzooming=3;class bl{constructor(a){this.style=a,this.layersGotHidden=!1,this.layers=[]}processLayersChanged(){this.layers=[];const a=!1,u=!1;for(const g in this.style._mergedLayers){const v=this.style._mergedLayers[g];if(v.type==="fill-extrusion")this.layers.push({layer:v,visible:a,visibilityChanged:u});else if(v.type==="model"){const x=this.style.getLayerSource(v);x&&x.type==="batched-model"&&this.layers.push({layer:v,visible:a,visibilityChanged:u})}}}onNewFrame(a){this.layersGotHidden=!1;for(const u of this.layers){const g=u.layer;let v=!1;g.type==="fill-extrusion"?v=!g.isHidden(a)&&g.paint.get("fill-extrusion-opacity")>0:g.type==="model"&&(v=!g.isHidden(a)&&g.paint.get("model-opacity")>0),this.layersGotHidden=this.layersGotHidden||!v&&u.visible,u.visible=v}}updateZOffset(a,u){this.currentBuildingBuckets=[];for(const v of this.layers){const x=v.layer,B=this.style.getLayerSourceCache(x);let k=1;x.type==="fill-extrusion"&&(k=v.visible?x.paint.get("fill-extrusion-vertical-scale"):0);let z=B?B.getTile(u):null;if(!z&&B&&u.canonical.z>B.getSource().minzoom){let Q=u.scaledTo(Math.min(B.getSource().maxzoom,u.overscaledZ-1));for(;Q.overscaledZ>=B.getSource().minzoom&&(z=B.getTile(Q),!z&&Q.overscaledZ!==0);)Q=Q.scaledTo(Q.overscaledZ-1)}this.currentBuildingBuckets.push({bucket:z?z.getBucket(x):null,tileID:z?z.tileID:u,verticalScale:k})}a.hasAnyZOffset=!1;let g=!1;for(let v=0;v<a.symbolInstances.length;v++){const x=a.symbolInstances.get(v),B=x.zOffset,k=this._getHeightAtTileOffset(u,x.tileAnchorX,x.tileAnchorY);x.zOffset=k!==Number.NEGATIVE_INFINITY?k:B,g||B===x.zOffset||(g=!0),a.hasAnyZOffset||x.zOffset===0||(a.hasAnyZOffset=!0)}g&&(a.zOffsetBuffersNeedUpload=!0,a.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(a,u,g,v){let x=u,B=g;if(a.canonical.z!==v.canonical.z){const k=v.canonical,z=1/(1<<a.canonical.z-k.z);x=(u+a.canonical.x*i.ab)*z-k.x*i.ab|0,B=(g+a.canonical.y*i.ab)*z-k.y*i.ab|0}return{tileX:x,tileY:B}}_getHeightAtTileOffset(a,u,g){let v,x;for(let B=0;B<this.layers.length;++B){if(this.layers[B].layer.type!=="fill-extrusion")continue;const{bucket:k,tileID:z,verticalScale:Q}=this.currentBuildingBuckets[B];if(!k)continue;const{tileX:j,tileY:W}=this._mapCoordToOverlappingTile(a,u,g,z),J=k.getHeightAtTileCoord(j,W);J&&J.height!==void 0&&(J.hidden?v=J.height:x=Math.max(J.height*Q,x||0))}if(x!==void 0)return x;for(let B=0;B<this.layers.length;++B){const k=this.layers[B];if(k.layer.type!=="model"||!k.visible)continue;const{bucket:z,tileID:Q}=this.currentBuildingBuckets[B];if(!z)continue;const{tileX:j,tileY:W}=this._mapCoordToOverlappingTile(a,u,g,Q),J=z.getHeightAtTileCoord(j,W);if(J&&!J.hidden)return J.height===void 0&&v!==void 0?Math.min(J.maxHeight,v)*J.verticalScale:J.height?J.height*J.verticalScale:Number.NEGATIVE_INFINITY}return this.layersGotHidden?0:Number.NEGATIVE_INFINITY}}function wl(m,a){const u={};for(const g in m)g!=="ref"&&(u[g]=m[g]);return i.bg.forEach(g=>{g in a&&(u[g]=a[g])}),u}function $c(m){m=m.slice();const a=Object.create(null);for(let u=0;u<m.length;u++)a[m[u].id]=m[u];for(let u=0;u<m.length;u++)"ref"in m[u]&&(m[u]=wl(m[u],a[m[u].ref]));return m}const ei={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",updateImport:"updateImport"};function Ko(m,a,u){u.push({command:ei.addSource,args:[m,a[m]]})}function _i(m,a,u){a.push({command:ei.removeSource,args:[m]}),u[m]=!0}function Dh(m,a,u,g){_i(m,u,g),Ko(m,a,u)}function $n(m,a,u){let g;for(g in m[u])if(m[u].hasOwnProperty(g)&&g!=="data"&&!i.bh(m[u][g],a[u][g]))return!1;for(g in a[u])if(a[u].hasOwnProperty(g)&&g!=="data"&&!i.bh(m[u][g],a[u][g]))return!1;return!0}function sl(m,a,u,g,v,x){let B;for(B in a=a||{},m=m||{})m.hasOwnProperty(B)&&(i.bh(m[B],a[B])||u.push({command:x,args:[g,B,a[B],v]}));for(B in a)a.hasOwnProperty(B)&&!m.hasOwnProperty(B)&&(i.bh(m[B],a[B])||u.push({command:x,args:[g,B,a[B],v]}))}function xc(m){return m.id}function _a(m,a){return m[a.id]=a,m}class ja{constructor(a,u){this.reset(a,u)}reset(a,u){this.points=a||[],this._distances=[0];for(let g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(a){if(this.points.length===1)return this.points[0];a=i.ap(a,0,1);let u=1,g=this._distances[u];const v=a*this.paddedLength+this.padding;for(;g<v&&u<this._distances.length;)g=this._distances[++u];const x=u-1,B=this._distances[x],k=g-B,z=k>0?(v-B)/k:0;return this.points[x].mult(1-z).add(this.points[u].mult(z))}}class Ra{constructor(a,u,g){const v=this.boxCells=[],x=this.circleCells=[];this.xCellCount=Math.ceil(a/g),this.yCellCount=Math.ceil(u/g);for(let B=0;B<this.xCellCount*this.yCellCount;B++)v.push([]),x.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=a,this.height=u,this.xScale=this.xCellCount/a,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(a,u,g,v,x){this._forEachCell(u,g,v,x,this._insertBoxCell,this.boxUid++),this.boxKeys.push(a),this.bboxes.push(u),this.bboxes.push(g),this.bboxes.push(v),this.bboxes.push(x)}insertCircle(a,u,g,v){this._forEachCell(u-v,g-v,u+v,g+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(a),this.circles.push(u),this.circles.push(g),this.circles.push(v)}_insertBoxCell(a,u,g,v,x,B){this.boxCells[x].push(B)}_insertCircleCell(a,u,g,v,x,B){this.circleCells[x].push(B)}_query(a,u,g,v,x,B){if(g<0||a>this.width||v<0||u>this.height)return!x&&[];const k=[];if(a<=0&&u<=0&&this.width<=g&&this.height<=v){if(x)return!0;for(let z=0;z<this.boxKeys.length;z++)k.push({key:this.boxKeys[z],x1:this.bboxes[4*z],y1:this.bboxes[4*z+1],x2:this.bboxes[4*z+2],y2:this.bboxes[4*z+3]});for(let z=0;z<this.circleKeys.length;z++){const Q=this.circles[3*z],j=this.circles[3*z+1],W=this.circles[3*z+2];k.push({key:this.circleKeys[z],x1:Q-W,y1:j-W,x2:Q+W,y2:j+W})}return B?k.filter(B):k}return this._forEachCell(a,u,g,v,this._queryCell,k,{hitTest:x,seenUids:{box:{},circle:{}}},B),x?k.length>0:k}_queryCircle(a,u,g,v,x){const B=a-g,k=a+g,z=u-g,Q=u+g;if(k<0||B>this.width||Q<0||z>this.height)return!v&&[];const j=[];return this._forEachCell(B,z,k,Q,this._queryCellCircle,j,{hitTest:v,circle:{x:a,y:u,radius:g},seenUids:{box:{},circle:{}}},x),v?j.length>0:j}query(a,u,g,v,x){return this._query(a,u,g,v,!1,x)}hitTest(a,u,g,v,x){return this._query(a,u,g,v,!0,x)}hitTestCircle(a,u,g,v){return this._queryCircle(a,u,g,!0,v)}_queryCell(a,u,g,v,x,B,k,z){const Q=k.seenUids,j=this.boxCells[x];if(j!==null){const J=this.bboxes;for(const re of j)if(!Q.box[re]){Q.box[re]=!0;const de=4*re;if(a<=J[de+2]&&u<=J[de+3]&&g>=J[de+0]&&v>=J[de+1]&&(!z||z(this.boxKeys[re]))){if(k.hitTest)return B.push(!0),!0;B.push({key:this.boxKeys[re],x1:J[de],y1:J[de+1],x2:J[de+2],y2:J[de+3]})}}}const W=this.circleCells[x];if(W!==null){const J=this.circles;for(const re of W)if(!Q.circle[re]){Q.circle[re]=!0;const de=3*re;if(this._circleAndRectCollide(J[de],J[de+1],J[de+2],a,u,g,v)&&(!z||z(this.circleKeys[re]))){if(k.hitTest)return B.push(!0),!0;{const me=J[de],_e=J[de+1],xe=J[de+2];B.push({key:this.circleKeys[re],x1:me-xe,y1:_e-xe,x2:me+xe,y2:_e+xe})}}}}}_queryCellCircle(a,u,g,v,x,B,k,z){const Q=k.circle,j=k.seenUids,W=this.boxCells[x];if(W!==null){const re=this.bboxes;for(const de of W)if(!j.box[de]){j.box[de]=!0;const me=4*de;if(this._circleAndRectCollide(Q.x,Q.y,Q.radius,re[me+0],re[me+1],re[me+2],re[me+3])&&(!z||z(this.boxKeys[de])))return B.push(!0),!0}}const J=this.circleCells[x];if(J!==null){const re=this.circles;for(const de of J)if(!j.circle[de]){j.circle[de]=!0;const me=3*de;if(this._circlesCollide(re[me],re[me+1],re[me+2],Q.x,Q.y,Q.radius)&&(!z||z(this.circleKeys[de])))return B.push(!0),!0}}}_forEachCell(a,u,g,v,x,B,k,z){const Q=this._convertToXCellCoord(a),j=this._convertToYCellCoord(u),W=this._convertToXCellCoord(g),J=this._convertToYCellCoord(v);for(let re=Q;re<=W;re++)for(let de=j;de<=J;de++)if(x.call(this,a,u,g,v,this.xCellCount*de+re,B,k,z))return}_convertToXCellCoord(a){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(a*this.xScale)))}_convertToYCellCoord(a){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(a*this.yScale)))}_circlesCollide(a,u,g,v,x,B){const k=v-a,z=x-u,Q=g+B;return Q*Q>k*k+z*z}_circleAndRectCollide(a,u,g,v,x,B,k){const z=(B-v)/2,Q=Math.abs(a-(v+z));if(Q>z+g)return!1;const j=(k-x)/2,W=Math.abs(u-(x+j));if(W>j+g)return!1;if(Q<=z||W<=j)return!0;const J=Q-z,re=W-j;return J*J+re*re<=g*g}}const aa={unknown:0,flipRequired:1,flipNotRequired:2},tr=Math.tan(85*Math.PI/180);function ti(m,a,u,g,v,x,B){const k=i.a6.mat4.create();if(u)if(x.name==="globe"){const z=i.bi(v,a);i.a6.mat4.multiply(k,k,z)}else{const z=i.a6.mat2.invert([],B);k[0]=z[0],k[1]=z[1],k[4]=z[2],k[5]=z[3],g||i.a6.mat4.rotateZ(k,k,v.angle)}else i.a6.mat4.multiply(k,v.labelPlaneMatrix,m);return k}function ni(m,a,u,g,v,x,B){const k=ti(m,a,u,g,v,x,B);return x.name==="globe"&&u||(k[2]=k[6]=k[10]=k[14]=0),k}function Ws(m,a,u,g,v,x,B){if(u){if(x.name==="globe"){const k=ti(m,a,u,g,v,x,B);return i.a6.mat4.invert(k,k),i.a6.mat4.multiply(k,m,k),k}{const k=i.a6.mat4.clone(m),z=i.a6.mat4.identity([]);return z[0]=B[0],z[1]=B[1],z[4]=B[2],z[5]=B[3],i.a6.mat4.multiply(k,k,z),g||i.a6.mat4.rotateZ(k,k,-v.angle),k}}return v.glCoordMatrix}function Yo(m,a,u,g){const v=[m,a,u,1];u?i.a6.vec4.transformMat4(v,v,g):ka(v,v,g);const x=v[3];return v[0]/=x,v[1]/=x,v[2]/=x,v}function $r(m,a){return Math.min(.5+m/a*.5,1.5)}function al(m,a){const u=m[0]/m[3],g=m[1]/m[3];return u>=-a[0]&&u<=a[0]&&g>=-a[1]&&g<=a[1]}function jl(m,a,u,g,v,x,B,k,z,Q){const j=u.transform,W=g?m.textSizeData:m.iconSizeData,J=i.bj(W,u.transform.zoom),re=j.projection.name==="globe",de=[256/u.width*2+1,256/u.height*2+1],me=g?m.text.dynamicLayoutVertexArray:m.icon.dynamicLayoutVertexArray;me.clear();let _e=null;re&&(_e=g?m.text.globeExtVertexArray:m.icon.globeExtVertexArray);const xe=m.lineVertexArray,ze=g?m.text.placedSymbolArray:m.icon.placedSymbolArray,Qe=u.transform.width/u.transform.height;let Ue,Xe=!1;for(let qe=0;qe<ze.length;qe++){const ut=ze.get(qe),{numGlyphs:it,writingMode:ht}=ut;if(ht!==i.bk.vertical||Xe||Ue===i.bk.horizontal||(Xe=!0),Ue=ht,(ut.hidden||ht===i.bk.vertical)&&!Xe){la(it,me);continue}Xe=!1;const xt=new i.P(ut.tileAnchorX,ut.tileAnchorY);let{x:pt,y:At,z:Rt}=j.projection.projectTilePoint(xt.x,xt.y,Q.canonical);if(z){const[bn,Cn,vr]=z(xt);pt+=bn,At+=Cn,Rt+=vr}const cn=[pt,At,Rt,1];if(i.a6.vec4.transformMat4(cn,cn,a),!al(cn,de)){la(it,me);continue}const wn=cn[3],ln=$r(u.transform.getCameraToCenterDistance(j.projection),wn),Ln=i.bl(W,J,ut),kt=B?Ln/ln:Ln*ln,mn=Yo(pt,At,Rt,v);if(mn[3]<=0){la(it,me);continue}let An={};const Rn=B?null:z,Mn=uo(ut,kt,!1,k,a,v,x,m.glyphOffsetArray,xe,me,_e,mn,xt,An,Qe,Rn,j.projection,Q,B);Xe=Mn.useVertical,Rn&&Mn.needsFlipping&&(An={}),(Mn.notEnoughRoom||Xe||Mn.needsFlipping&&uo(ut,kt,!0,k,a,v,x,m.glyphOffsetArray,xe,me,_e,mn,xt,An,Qe,Rn,j.projection,Q,B).notEnoughRoom)&&la(it,me)}g?(m.text.dynamicLayoutVertexBuffer.updateData(me),_e&&m.text.globeExtVertexBuffer&&m.text.globeExtVertexBuffer.updateData(_e)):(m.icon.dynamicLayoutVertexBuffer.updateData(me),_e&&m.icon.globeExtVertexBuffer&&m.icon.globeExtVertexBuffer.updateData(_e))}function Gi(m,a,u,g,v,x,B,k,z,Q,j,W,J,re,de,me){const{lineStartIndex:_e,glyphStartIndex:xe,segment:ze}=k,Qe=xe+k.numGlyphs,Ue=_e+k.lineLength,Xe=a.getoffsetX(xe),qe=a.getoffsetX(Qe-1),ut=Gl(m*Xe,u,g,v,x,B,ze,_e,Ue,z,Q,j,W,J,!0,re,de,me);if(!ut)return null;const it=Gl(m*qe,u,g,v,x,B,ze,_e,Ue,z,Q,j,W,J,!0,re,de,me);return it?{first:ut,last:it}:null}function Fs(m,a,u,g){return m===i.bk.horizontal&&Math.abs(g)>Math.abs(u)?{useVertical:!0}:m===i.bk.vertical?g>0?{needsFlipping:!0}:null:a!==aa.unknown&&function(v,x){return v===0||Math.abs(x/v)>tr}(u,g)?a===aa.flipRequired?{needsFlipping:!0}:null:u<0?{needsFlipping:!0}:null}function uo(m,a,u,g,v,x,B,k,z,Q,j,W,J,re,de,me,_e,xe,ze){const Qe=a/24,Ue=m.lineOffsetX*Qe,Xe=m.lineOffsetY*Qe,{lineStartIndex:qe,glyphStartIndex:ut,numGlyphs:it,segment:ht,writingMode:xt,flipState:pt}=m,At=qe+m.lineLength,Rt=cn=>{if(j){const[kt,mn,An]=cn.up,Rn=Q.length;i.bm(j,Rn+0,kt,mn,An),i.bm(j,Rn+1,kt,mn,An),i.bm(j,Rn+2,kt,mn,An),i.bm(j,Rn+3,kt,mn,An)}const[wn,ln,Ln]=cn.point;i.bn(Q,wn,ln,Ln,cn.angle)};if(it>1){const cn=Gi(Qe,k,Ue,Xe,u,W,J,m,z,x,re,me,!1,_e,xe,ze);if(!cn)return{notEnoughRoom:!0};if(g&&!u){let[wn,ln,Ln]=cn.first.point,[kt,mn,An]=cn.last.point;[wn,ln]=Yo(wn,ln,Ln,B),[kt,mn]=Yo(kt,mn,An,B);const Rn=Fs(xt,pt,(kt-wn)*de,mn-ln);if(m.flipState=Rn&&Rn.needsFlipping?aa.flipRequired:aa.flipNotRequired,Rn)return Rn}Rt(cn.first);for(let wn=ut+1;wn<ut+it-1;wn++){const ln=Gl(Qe*k.getoffsetX(wn),Ue,Xe,u,W,J,ht,qe,At,z,x,re,me,!1,!1,_e,xe,ze);if(!ln)return Q.length-=4*(wn-ut),{notEnoughRoom:!0};Rt(ln)}Rt(cn.last)}else{if(g&&!u){const wn=Yo(J.x,J.y,0,v),ln=qe+ht+1,Ln=new i.P(z.getx(ln),z.gety(ln)),kt=Yo(Ln.x,Ln.y,0,v),mn=kt[3]>0?kt:$l(J,Ln,wn,1,v,void 0,_e,xe.canonical),An=Fs(xt,pt,(mn[0]-wn[0])*de,mn[1]-wn[1]);if(m.flipState=An&&An.needsFlipping?aa.flipRequired:aa.flipNotRequired,An)return An}const cn=Gl(Qe*k.getoffsetX(ut),Ue,Xe,u,W,J,ht,qe,At,z,x,re,me,!1,!1,_e,xe,ze);if(!cn)return{notEnoughRoom:!0};Rt(cn)}return{}}function Zu(m,a,u,g,v){const{x,y:B,z:k}=g.projectTilePoint(m.x,m.y,a);if(!v)return Yo(x,B,k,u);const[z,Q,j]=v(m);return Yo(x+z,B+Q,k+j,u)}function $l(m,a,u,g,v,x,B,k){const z=Zu(m.sub(a)._unit()._add(m),k,v,B,x);return i.a6.vec3.sub(z,u,z),i.a6.vec3.normalize(z,z),i.a6.vec3.scaleAndAdd(z,u,z,g)}function Gl(m,a,u,g,v,x,B,k,z,Q,j,W,J,re,de,me,_e,xe){const ze=g?m-a:m+a;let Qe=ze>0?1:-1,Ue=0;g&&(Qe*=-1,Ue=Math.PI),Qe<0&&(Ue+=Math.PI);let Xe=k+B+(Qe>0?0:1)|0,qe=v,ut=v,it=0,ht=0;const xt=Math.abs(ze),pt=[],At=[];let Rt=x,cn=Rt;const wn=()=>$l(cn,Rt,ut,xt-it+1,j,J,me,_e.canonical);for(;it+ht<=xt;){if(Xe+=Qe,Xe<k||Xe>=z)return null;if(ut=qe,cn=Rt,pt.push(ut),re&&At.push(cn),Rt=new i.P(Q.getx(Xe),Q.gety(Xe)),qe=W[Xe],!qe){const Cn=Zu(Rt,_e.canonical,j,me,J);qe=Cn[3]>0?W[Xe]=Cn:wn()}it+=ht,ht=i.a6.vec3.distance(ut,qe)}de&&J&&(W[Xe]&&(qe=wn(),ht=i.a6.vec3.distance(ut,qe)),W[Xe]=qe);const ln=(xt-it)/ht,Ln=Rt.sub(cn)._mult(ln)._add(cn),kt=i.a6.vec3.sub([],qe,ut),mn=i.a6.vec3.scaleAndAdd([],ut,kt,ln);let An=[0,0,1],Rn=kt[0],Mn=kt[1];if(xe&&(An=me.upVector(_e.canonical,Ln.x,Ln.y),An[0]!==0||An[1]!==0||An[2]!==1)){const Cn=[An[2],0,-An[0]],vr=i.a6.vec3.cross([],An,Cn);i.a6.vec3.normalize(Cn,Cn),i.a6.vec3.normalize(vr,vr),Rn=i.a6.vec3.dot(kt,Cn),Mn=i.a6.vec3.dot(kt,vr)}if(u){const Cn=i.a6.vec3.cross([],An,kt);i.a6.vec3.normalize(Cn,Cn),i.a6.vec3.scaleAndAdd(mn,mn,Cn,u*Qe)}const bn=Ue+Math.atan2(Mn,Rn);return pt.push(mn),re&&At.push(Ln),{point:mn,angle:bn,path:pt,tilePath:At,up:An}}function la(m,a){const u=a.length,g=u+4*m;a.resize(g),a.float32.fill(-1/0,4*u,4*g)}function ka(m,a,u){const g=a[0],v=a[1];return m[0]=u[0]*g+u[4]*v+u[12],m[1]=u[1]*g+u[5]*v+u[13],m[3]=u[3]*g+u[7]*v+u[15],m}const yo=100;class Rs{constructor(a,u,g=new Ra(a.width+200,a.height+200,25),v=new Ra(a.width+200,a.height+200,25)){this.transform=a,this.grid=g,this.ignoredGrid=v,this.pitchfactor=Math.cos(a._pitch)*a.cameraToCenterDistance,this.screenRightBoundary=a.width+yo,this.screenBottomBoundary=a.height+yo,this.gridRightBoundary=a.width+200,this.gridBottomBoundary=a.height+200,this.fogState=u}placeCollisionBox(a,u,g,v,x,B,k,z){let Q=g.projectedAnchorX,j=g.projectedAnchorY,W=g.projectedAnchorZ;const J=g.elevation,re=g.tileID,de=a.getProjection();if(J&&re){const[qe,ut,it]=de.upVector(re.canonical,g.tileAnchorX,g.tileAnchorY),ht=de.upVectorScale(re.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;Q+=qe*J*ht,j+=ut*J*ht,W+=it*J*ht}const me=this.projectAndGetPerspectiveRatio(k,Q,j,W,g.tileID,de.name==="globe"||!!J||this.transform.pitch>0,de),_e=B*me.perspectiveRatio,xe=(g.x1*u+v.x-g.padding)*_e+me.point.x,ze=(g.y1*u+v.y-g.padding)*_e+me.point.y,Qe=(g.x2*u+v.x+g.padding)*_e+me.point.x,Ue=(g.y2*u+v.y+g.padding)*_e+me.point.y,Xe=me.perspectiveRatio<=.55||me.occluded;return!this.isInsideGrid(xe,ze,Qe,Ue)||!x&&this.grid.hitTest(xe,ze,Qe,Ue,z)||Xe?{box:[],offscreen:!1,occluded:me.occluded}:{box:[xe,ze,Qe,Ue],offscreen:this.isOffscreen(xe,ze,Qe,Ue),occluded:!1}}placeCollisionCircles(a,u,g,v,x,B,k,z,Q,j,W,J,re,de,me){const _e=[],xe=this.transform.elevation,ze=a.getProjection(),Qe=xe?xe.getAtTileOffsetFunc(me,this.transform.center.lat,this.transform.worldSize,ze):null,Ue=new i.P(g.tileAnchorX,g.tileAnchorY);let{x:Xe,y:qe,z:ut}=ze.projectTilePoint(Ue.x,Ue.y,me.canonical);if(Qe){const[Ln,kt,mn]=Qe(Ue);Xe+=Ln,qe+=kt,ut+=mn}const it=ze.name==="globe",ht=this.projectAndGetPerspectiveRatio(k,Xe,qe,ut,me,it||!!xe||this.transform.pitch>0,ze),{perspectiveRatio:xt}=ht,pt=(W?B/xt:B*xt)/i.bq,At=Yo(Xe,qe,ut,z),Rt=ht.signedDistanceFromCamera>0?Gi(pt,x,g.lineOffsetX*pt,g.lineOffsetY*pt,!1,At,Ue,g,v,z,{},xe&&!W?Qe:null,W&&!!xe,ze,me,W):null;let cn=!1,wn=!1,ln=!0;if(Rt&&!ht.occluded){const Ln=.5*re*xt+de,kt=new i.P(-100,-100),mn=new i.P(this.screenRightBoundary,this.screenBottomBoundary),An=new ja,{first:Rn,last:Mn}=Rt,bn=Rn.path.length;let Cn=[];for(let rr=bn-1;rr>=1;rr--)Cn.push(Rn.path[rr]);for(let rr=1;rr<Mn.path.length;rr++)Cn.push(Mn.path[rr]);const vr=2.5*Ln;Q&&(Cn=Cn.map(([rr,Rr,fr],Sr)=>(Qe&&!it&&(fr=Qe(Sr<bn-1?Rn.tilePath[bn-1-Sr]:Mn.tilePath[Sr-bn+2])[2]),Yo(rr,Rr,fr,Q))),Cn.some(rr=>rr[3]<=0)&&(Cn=[]));let Qn=[];if(Cn.length>0){let rr=1/0,Rr=-1/0,fr=1/0,Sr=-1/0;for(const Yr of Cn)rr=Math.min(rr,Yr[0]),fr=Math.min(fr,Yr[1]),Rr=Math.max(Rr,Yr[0]),Sr=Math.max(Sr,Yr[1]);Rr>=kt.x&&rr<=mn.x&&Sr>=kt.y&&fr<=mn.y&&(Qn=[Cn.map(Yr=>new i.P(Yr[0],Yr[1]))],(rr<kt.x||Rr>mn.x||fr<kt.y||Sr>mn.y)&&(Qn=i.bo(Qn,kt.x,kt.y,mn.x,mn.y)))}for(const rr of Qn){An.reset(rr,.25*Ln);let Rr=0;Rr=An.length<=.5*Ln?1:Math.ceil(An.paddedLength/vr)+1;for(let fr=0;fr<Rr;fr++){const Sr=fr/Math.max(Rr-1,1),Yr=An.lerp(Sr),qr=Yr.x+yo,ji=Yr.y+yo;_e.push(qr,ji,Ln,0);const oo=qr-Ln,So=ji-Ln,tu=qr+Ln,Bs=ji+Ln;if(ln=ln&&this.isOffscreen(oo,So,tu,Bs),wn=wn||this.isInsideGrid(oo,So,tu,Bs),!u&&this.grid.hitTestCircle(qr,ji,Ln,J)&&(cn=!0,!j))return{circles:[],offscreen:!1,collisionDetected:cn,occluded:!1}}}}return{circles:!j&&cn||!wn?[]:_e,offscreen:ln,collisionDetected:cn,occluded:ht.occluded}}queryRenderedSymbols(a){if(a.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let g=1/0,v=1/0,x=-1/0,B=-1/0;for(const j of a){const W=new i.P(j.x+yo,j.y+yo);g=Math.min(g,W.x),v=Math.min(v,W.y),x=Math.max(x,W.x),B=Math.max(B,W.y),u.push(W)}const k=this.grid.query(g,v,x,B).concat(this.ignoredGrid.query(g,v,x,B)),z={},Q={};for(const j of k){const W=j.key;if(z[W.bucketInstanceId]===void 0&&(z[W.bucketInstanceId]={}),z[W.bucketInstanceId][W.featureIndex])continue;const J=[new i.P(j.x1,j.y1),new i.P(j.x2,j.y1),new i.P(j.x2,j.y2),new i.P(j.x1,j.y2)];i.bp(u,J)&&(z[W.bucketInstanceId][W.featureIndex]=!0,Q[W.bucketInstanceId]===void 0&&(Q[W.bucketInstanceId]=[]),Q[W.bucketInstanceId].push(W.featureIndex))}return Q}insertCollisionBox(a,u,g,v,x){(u?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:v,collisionGroupID:x},a[0],a[1],a[2],a[3])}insertCollisionCircles(a,u,g,v,x){const B=u?this.ignoredGrid:this.grid,k={bucketInstanceId:g,featureIndex:v,collisionGroupID:x};for(let z=0;z<a.length;z+=4)B.insertCircle(k,a[z],a[z+1],a[z+2])}projectAndGetPerspectiveRatio(a,u,g,v,x,B,k){const z=[u,g,v,1];let Q=!1;v||this.transform.pitch>0?(i.a6.vec4.transformMat4(z,z,a),this.fogState&&x&&k.name!=="globe"&&(Q=function(J,re,de,me,_e,xe){const ze=xe.calculateFogTileMatrix(_e),Qe=[re,de,me];return i.a6.vec3.transformMat4(Qe,Qe,ze),Vn(J,i.a6.vec3.length(Qe),xe.pitch,xe._fov)}(this.fogState,u,g,v,x.toUnwrapped(),this.transform)>.9)):ka(z,z,a);const j=z[3];return{point:new i.P((z[0]/j+1)/2*this.transform.width+yo,(-z[1]/j+1)/2*this.transform.height+yo),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(k)/j*.5,1.5),signedDistanceFromCamera:j,occluded:B&&z[2]>j||Q}}isOffscreen(a,u,g,v){return g<yo||a>=this.screenRightBoundary||v<yo||u>this.screenBottomBoundary}isInsideGrid(a,u,g,v){return g>=0&&a<this.gridRightBoundary&&v>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const a=i.a6.mat4.identity([]);return i.a6.mat4.translate(a,a,[-100,-100,0]),a}}function us(m,a,u){const g=a.createTileMatrix(m,m.worldSize,u.toUnwrapped());return i.a6.mat4.multiply(new Float32Array(16),m.projMatrix,g)}function ca(m,a,u){if(a.projection.name===u.projection.name)return m.projMatrix;const g=u.clone();return g.setProjection(a.projection),us(g,a.getProjection(),m)}function $a(m,a,u){return a.name===u.projection.name?m.projMatrix:us(u,a,m)}class no{constructor(a,u,g,v){this.opacity=a?Math.max(0,Math.min(1,a.opacity+(a.placed?u:-u))):v&&g?1:0,this.placed=g}isHidden(){return this.opacity===0&&!this.placed}}class xs{constructor(a,u,g,v,x,B=!1){this.text=new no(a?a.text:null,u,g,x),this.icon=new no(a?a.icon:null,u,v,x),this.clipped=B}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Xs{constructor(a,u,g,v=!1){this.text=a,this.icon=u,this.skipFade=g,this.clipped=v}}class qo{constructor(){this.invProjMatrix=i.a6.mat4.create(),this.viewportMatrix=i.a6.mat4.create(),this.circles=[]}}class wu{constructor(a,u,g,v,x){this.bucketInstanceId=a,this.featureIndex=u,this.sourceLayerIndex=g,this.bucketIndex=v,this.tileID=x}}class ua{constructor(a){this.crossSourceCollisions=a,this.maxGroupID=0,this.collisionGroups={}}get(a){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[a]){const u=++this.maxGroupID;this.collisionGroups[a]={ID:u,predicate:g=>g.collisionGroupID===u}}return this.collisionGroups[a]}}function Ga(m,a,u,g,v){const{horizontalAlign:x,verticalAlign:B}=i.bx(m),k=-(x-.5)*a,z=-(B-.5)*u,Q=i.bw(m,g);return new i.P(k+Q[0]*v,z+Q[1]*v)}function Ka(m,a,u,g,v){const x=new i.P(m,a);return u&&x._rotate(g?v:-v),x}class ll{constructor(a,u,g,v,x,B){this.transform=a.clone(),this.projection=a.projection.name,this.collisionIndex=new Rs(this.transform,x),this.buildingIndex=B,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=u,this.retainedQueryData={},this.collisionGroups=new ua(g),this.collisionCircleArrays={},this.prevPlacement=v,v&&(v.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(a,u,g,v){const x=g.getBucket(u),B=g.latestFeatureIndex;if(!x||!B||u.fqid!==x.layerIds[0])return;const k=x.layers[0].layout,z=x.layers[0].paint,Q=g.collisionBoxArray,j=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),W=g.tileSize/i.ab,J=g.tileID.toUnwrapped();this.transform.setProjection(x.projection);const re=(de=g.tileID,me=x.getProjection(),_e=this.transform,me.name===this.projection?_e.calculateProjMatrix(de.toUnwrapped()):us(_e,me,de));var de,me,_e;const xe=k.get("text-pitch-alignment")==="map",ze=k.get("text-rotation-alignment")==="map";u.compileFilter();const Qe=u.dynamicFilter(),Ue=u.dynamicFilterNeedsFeature(),Xe=this.transform.calculatePixelsToTileUnitsMatrix(g),qe=ni(re,g.tileID.canonical,xe,ze,this.transform,x.getProjection(),Xe);let ut=null;if(xe){const xt=Ws(re,g.tileID.canonical,xe,ze,this.transform,x.getProjection(),Xe);ut=i.a6.mat4.multiply([],this.transform.labelPlaneMatrix,xt)}let it=null;Qe&&g.latestFeatureIndex&&(it={unwrappedTileID:J,dynamicFilter:Qe,dynamicFilterNeedsFeature:Ue}),this.retainedQueryData[x.bucketInstanceId]=new wu(x.bucketInstanceId,B,x.sourceLayerIndex,x.index,g.tileID);const ht={bucket:x,layout:k,paint:z,posMatrix:re,textLabelPlaneMatrix:qe,labelToScreenMatrix:ut,clippingData:it,scale:j,textPixelRatio:W,holdingForFade:g.holdingForFade(),collisionBoxArray:Q,partiallyEvaluatedTextSize:i.bj(x.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:i.bj(x.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(x.sourceID),latestFeatureIndex:g.latestFeatureIndex};if(v)for(const xt of x.sortKeyRanges){const{sortKey:pt,symbolInstanceStart:At,symbolInstanceEnd:Rt}=xt;a.push({sortKey:pt,symbolInstanceStart:At,symbolInstanceEnd:Rt,parameters:ht})}else a.push({symbolInstanceStart:0,symbolInstanceEnd:x.symbolInstances.length,parameters:ht})}attemptAnchorPlacement(a,u,g,v,x,B,k,z,Q,j,W,J,re,de,me,_e,xe,ze){const{textOffset0:Qe,textOffset1:Ue,crossTileID:Xe}=J,qe=[Qe,Ue],ut=Ga(a,g,v,qe,x),it=this.collisionIndex.placeCollisionBox(de,x,u,Ka(ut.x,ut.y,B,k,this.transform.angle),W,z,Q,j.predicate);if(_e){const ht=de.getSymbolInstanceIconSize(ze,this.transform.zoom,J.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(de,ht,_e,Ka(ut.x,ut.y,B,k,this.transform.angle),W,z,Q,j.predicate).box.length===0)return}if(it.box.length>0){let ht;return this.prevPlacement&&this.prevPlacement.variableOffsets[Xe]&&this.prevPlacement.placements[Xe]&&this.prevPlacement.placements[Xe].text&&(ht=this.prevPlacement.variableOffsets[Xe].anchor),this.variableOffsets[Xe]={textOffset:qe,width:g,height:v,anchor:a,textScale:x,prevAnchor:ht},this.markUsedJustification(de,a,J,me),de.allowVerticalPlacement&&(this.markUsedOrientation(de,me,J),this.placedOrientations[Xe]=me),{shift:ut,placedGlyphBoxes:it}}}placeLayerBucketPart(a,u,g,v){const{bucket:x,layout:B,paint:k,posMatrix:z,textLabelPlaneMatrix:Q,labelToScreenMatrix:j,clippingData:W,textPixelRatio:J,holdingForFade:re,collisionBoxArray:de,partiallyEvaluatedTextSize:me,partiallyEvaluatedIconSize:_e,collisionGroup:xe,latestFeatureIndex:ze}=a.parameters,Qe=B.get("text-optional"),Ue=B.get("icon-optional"),Xe=B.get("text-allow-overlap"),qe=B.get("icon-allow-overlap"),ut=B.get("text-rotation-alignment")==="map",it=B.get("text-pitch-alignment")==="map",ht=B.get("symbol-z-elevate"),xt=k.get("symbol-z-offset"),pt=k.get("symbol-elevation-reference")==="sea";this.transform.setProjection(x.projection);let At=Xe&&(qe||!x.hasIconData()||Ue),Rt=qe&&(Xe||!x.hasTextData()||Qe);const cn=!xt.isConstant();!x.collisionArrays&&de&&x.deserializeCollisionBoxes(de),g&&v&&x.updateCollisionDebugBuffers(this.transform.zoom,de);const wn=(ln,Ln,kt)=>{const{crossTileID:mn,numVerticalGlyphVertices:An}=ln;let Rn=null;if(W&&W.dynamicFilterNeedsFeature||cn){const Xr=this.retainedQueryData[x.bucketInstanceId];Rn=ze.loadFeature({featureIndex:ln.featureIndex,bucketIndex:Xr.bucketIndex,sourceLayerIndex:Xr.sourceLayerIndex,layoutVertexArrayOffset:0})}if(W&&!(0,W.dynamicFilter)({zoom:this.transform.zoom,pitch:this.transform.pitch},Rn,this.retainedQueryData[x.bucketInstanceId].tileID.canonical,new i.P(ln.tileAnchorX,ln.tileAnchorY),this.transform.calculateDistanceTileData(W.unwrappedTileID)))return this.placements[mn]=new Xs(!1,!1,!1,!0),void u.add(mn);const Mn=xt.evaluate(Rn,{});if(u.has(mn))return;if(re)return void(this.placements[mn]=new Xs(!1,!1,!1));let bn=!1,Cn=!1,vr=!0,Qn=!1,rr=!1,Rr=null,fr={box:null,offscreen:null,occluded:null},Sr={box:null,offscreen:null,occluded:null},Yr=null,qr=null,ji=null,oo=0,So=0,tu=0;kt.textFeatureIndex?oo=kt.textFeatureIndex:ln.useRuntimeCollisionCircles&&(oo=ln.featureIndex),kt.verticalTextFeatureIndex&&(So=kt.verticalTextFeatureIndex);const Bs=Xr=>{Xr.tileID=this.retainedQueryData[x.bucketInstanceId].tileID;const Ii=this.transform.elevation;Xr.elevation=pt?Mn:Mn+(Ii?Ii.getAtTileOffset(Xr.tileID,Xr.tileAnchorX,Xr.tileAnchorY):0),Xr.elevation+=ln.zOffset},ci=kt.textBox;if(ci){Bs(ci);const Xr=Qi=>{let ds=i.bk.horizontal;if(x.allowVerticalPlacement&&!Qi&&this.prevPlacement){const Ss=this.prevPlacement.placedOrientations[mn];Ss&&(this.placedOrientations[mn]=Ss,ds=Ss,this.markUsedOrientation(x,ds,ln))}return ds},Ii=(Qi,ds)=>{if(x.allowVerticalPlacement&&An>0&&kt.verticalTextBox){for(const Ss of x.writingModes)if(Ss===i.bk.vertical?(fr=ds(),Sr=fr):fr=Qi(),fr&&fr.box&&fr.box.length)break}else fr=Qi()};if(B.get("text-variable-anchor")){let Qi=B.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[mn]){const bi=this.prevPlacement.variableOffsets[mn];Qi.indexOf(bi.anchor)>0&&(Qi=Qi.filter(ta=>ta!==bi.anchor),Qi.unshift(bi.anchor))}const ds=(bi,ta,Aa)=>{const na=x.getSymbolInstanceTextSize(me,ln,this.transform.zoom,Ln),vo=(bi.x2-bi.x1)*na+2*bi.padding,Il=(bi.y2-bi.y1)*na+2*bi.padding,Pl=ln.hasIconTextFit&&!qe?ta:null;Pl&&Bs(Pl);let nu={box:[],offscreen:!1,occluded:!1};const kc=Xe?2*Qi.length:Qi.length;for(let tc=0;tc<kc;++tc){const ru=this.attemptAnchorPlacement(Qi[tc%Qi.length],bi,vo,Il,na,ut,it,J,z,xe,tc>=Qi.length,ln,Ln,x,Aa,Pl,me,_e);if(ru&&(nu=ru.placedGlyphBoxes,nu&&nu.box&&nu.box.length)){bn=!0,Rr=ru.shift;break}}return nu};Ii(()=>ds(ci,kt.iconBox,i.bk.horizontal),()=>{const bi=kt.verticalTextBox;return bi&&Bs(bi),x.allowVerticalPlacement&&!(fr&&fr.box&&fr.box.length)&&An>0&&bi?ds(bi,kt.verticalIconBox,i.bk.vertical):{box:null,offscreen:null,occluded:null}}),fr&&(bn=fr.box,vr=fr.offscreen,Qn=fr.occluded);const Ss=Xr(!(!fr||!fr.box));if(!bn&&this.prevPlacement){const bi=this.prevPlacement.variableOffsets[mn];bi&&(this.variableOffsets[mn]=bi,this.markUsedJustification(x,bi.anchor,ln,Ss))}}else{const Qi=(ds,Ss)=>{const bi=x.getSymbolInstanceTextSize(me,ln,this.transform.zoom,Ln),ta=this.collisionIndex.placeCollisionBox(x,bi,ds,new i.P(0,0),Xe,J,z,xe.predicate);return ta&&ta.box&&ta.box.length&&(this.markUsedOrientation(x,Ss,ln),this.placedOrientations[mn]=Ss),ta};Ii(()=>Qi(ci,i.bk.horizontal),()=>{const ds=kt.verticalTextBox;return x.allowVerticalPlacement&&An>0&&ds?(Bs(ds),Qi(ds,i.bk.vertical)):{box:null,offscreen:null,occluded:null}}),Xr(!!(fr&&fr.box&&fr.box.length))}}if(Yr=fr,bn=Yr&&Yr.box&&Yr.box.length>0,vr=Yr&&Yr.offscreen,Qn=Yr&&Yr.occluded,ln.useRuntimeCollisionCircles){const Xr=x.text.placedSymbolArray.get(ln.centerJustifiedTextSymbolIndex>=0?ln.centerJustifiedTextSymbolIndex:ln.verticalPlacedTextSymbolIndex),Ii=i.bl(x.textSizeData,me,Xr),Qi=B.get("text-padding");qr=this.collisionIndex.placeCollisionCircles(x,Xe,Xr,x.lineVertexArray,x.glyphOffsetArray,Ii,z,Q,j,g,it,xe.predicate,ln.collisionCircleDiameter*Ii/i.bq,Qi,this.retainedQueryData[x.bucketInstanceId].tileID),bn=Xe||qr.circles.length>0&&!qr.collisionDetected,vr=vr&&qr.offscreen,Qn=qr.occluded}if(kt.iconFeatureIndex&&(tu=kt.iconFeatureIndex),kt.iconBox){const Xr=Ii=>{Bs(Ii);const Qi=ln.hasIconTextFit&&Rr?Ka(Rr.x,Rr.y,ut,it,this.transform.angle):new i.P(0,0),ds=x.getSymbolInstanceIconSize(_e,this.transform.zoom,ln.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(x,ds,Ii,Qi,qe,J,z,xe.predicate)};Sr&&Sr.box&&Sr.box.length&&kt.verticalIconBox?(ji=Xr(kt.verticalIconBox),Cn=ji.box.length>0):(ji=Xr(kt.iconBox),Cn=ji.box.length>0),vr=vr&&ji.offscreen,rr=ji.occluded}const eo=Qe||ln.numHorizontalGlyphVertices===0&&An===0,Xo=Ue||ln.numIconVertices===0;if(eo||Xo?Xo?eo||(Cn=Cn&&bn):bn=Cn&&bn:Cn=bn=Cn&&bn,bn&&Yr&&Yr.box&&this.collisionIndex.insertCollisionBox(Yr.box,B.get("text-ignore-placement"),x.bucketInstanceId,Sr&&Sr.box&&So?So:oo,xe.ID),Cn&&ji&&this.collisionIndex.insertCollisionBox(ji.box,B.get("icon-ignore-placement"),x.bucketInstanceId,tu,xe.ID),qr&&(bn&&this.collisionIndex.insertCollisionCircles(qr.circles,B.get("text-ignore-placement"),x.bucketInstanceId,oo,xe.ID),g)){const Xr=x.bucketInstanceId;let Ii=this.collisionCircleArrays[Xr];Ii===void 0&&(Ii=this.collisionCircleArrays[Xr]=new qo);for(let Qi=0;Qi<qr.circles.length;Qi+=4)Ii.circles.push(qr.circles[Qi+0]),Ii.circles.push(qr.circles[Qi+1]),Ii.circles.push(qr.circles[Qi+2]),Ii.circles.push(qr.collisionDetected?1:0)}const Ki=x.projection.name!=="globe";At=At&&(Ki||!Qn),Rt=Rt&&(Ki||!rr),this.placements[mn]=new Xs(bn||At,Cn||Rt,vr||x.justReloaded),u.add(mn)};if(ht&&this.buildingIndex&&(this.buildingIndex.updateZOffset(x,this.retainedQueryData[x.bucketInstanceId].tileID),x.updateZOffset()),x.sortFeaturesByY){const ln=x.getSortedSymbolIndexes(this.transform.angle);for(let Ln=ln.length-1;Ln>=0;--Ln){const kt=ln[Ln];wn(x.symbolInstances.get(kt),kt,x.collisionArrays[kt])}x.hasAnyZOffset&&i.w(`${x.layerIds[0]} layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y`)}else if(x.hasAnyZOffset){const ln=x.getSortedIndexesByZOffset();for(let Ln=0;Ln<ln.length;++Ln){const kt=ln[Ln];wn(x.symbolInstances.get(kt),kt,x.collisionArrays[kt])}}else for(let ln=a.symbolInstanceStart;ln<a.symbolInstanceEnd;ln++)wn(x.symbolInstances.get(ln),ln,x.collisionArrays[ln]);if(g&&x.bucketInstanceId in this.collisionCircleArrays){const ln=this.collisionCircleArrays[x.bucketInstanceId];i.a6.mat4.invert(ln.invProjMatrix,z),ln.viewportMatrix=this.collisionIndex.getViewportMatrix()}x.justReloaded=!1}markUsedJustification(a,u,g,v){const{leftJustifiedTextSymbolIndex:x,centerJustifiedTextSymbolIndex:B,rightJustifiedTextSymbolIndex:k,verticalPlacedTextSymbolIndex:z,crossTileID:Q}=g,j=i.bv(u),W=v===i.bk.vertical?z:j==="left"?x:j==="center"?B:j==="right"?k:-1;x>=0&&(a.text.placedSymbolArray.get(x).crossTileID=W>=0&&x!==W?0:Q),B>=0&&(a.text.placedSymbolArray.get(B).crossTileID=W>=0&&B!==W?0:Q),k>=0&&(a.text.placedSymbolArray.get(k).crossTileID=W>=0&&k!==W?0:Q),z>=0&&(a.text.placedSymbolArray.get(z).crossTileID=W>=0&&z!==W?0:Q)}markUsedOrientation(a,u,g){const v=u===i.bk.horizontal||u===i.bk.horizontalOnly?u:0,x=u===i.bk.vertical?u:0,{leftJustifiedTextSymbolIndex:B,centerJustifiedTextSymbolIndex:k,rightJustifiedTextSymbolIndex:z,verticalPlacedTextSymbolIndex:Q}=g,j=a.text.placedSymbolArray;B>=0&&(j.get(B).placedOrientation=v),k>=0&&(j.get(k).placedOrientation=v),z>=0&&(j.get(z).placedOrientation=v),Q>=0&&(j.get(Q).placedOrientation=x)}commit(a){this.commitTime=a,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let g=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const v=u?u.symbolFadeChange(a):1,x=u?u.opacities:{},B=u?u.variableOffsets:{},k=u?u.placedOrientations:{};for(const z in this.placements){const Q=this.placements[z],j=x[z];j?(this.opacities[z]=new xs(j,v,Q.text,Q.icon,null,Q.clipped),g=g||Q.text!==j.text.placed||Q.icon!==j.icon.placed):(this.opacities[z]=new xs(null,v,Q.text,Q.icon,Q.skipFade,Q.clipped),g=g||Q.text||Q.icon)}for(const z in x){const Q=x[z];if(!this.opacities[z]){const j=new xs(Q,v,!1,!1);j.isHidden()||(this.opacities[z]=j,g=g||Q.text.placed||Q.icon.placed)}}for(const z in B)this.variableOffsets[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.variableOffsets[z]=B[z]);for(const z in k)this.placedOrientations[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.placedOrientations[z]=k[z]);g?this.lastPlacementChangeTime=a:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:a)}updateLayerOpacities(a,u,g,v){const x=new Set;for(const B of u){const k=B.getBucket(a);k&&B.latestFeatureIndex&&a.fqid===k.layerIds[0]&&(this.updateBucketOpacities(k,x,B,B.collisionBoxArray,g,v,B.tileID,a.scope),k.layers[0].layout.get("symbol-z-elevate")&&this.buildingIndex&&(this.buildingIndex.updateZOffset(k,B.tileID),k.updateZOffset()))}}updateBucketOpacities(a,u,g,v,x,B,k,z){a.hasTextData()&&a.text.opacityVertexArray.clear(),a.hasIconData()&&a.icon.opacityVertexArray.clear(),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexArray.clear(),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexArray.clear();const Q=a.layers[0].layout,j=a.layers[0].paint,W=!!a.layers[0].dynamicFilter(),J=new xs(null,0,!1,!1,!0),re=Q.get("text-allow-overlap"),de=Q.get("icon-allow-overlap"),me=Q.get("text-variable-anchor"),_e=Q.get("text-rotation-alignment")==="map",xe=Q.get("text-pitch-alignment")==="map",ze=j.get("symbol-z-offset"),Qe=j.get("symbol-elevation-reference")==="sea",Ue=!ze.isConstant(),Xe=new xs(null,0,re&&(de||!a.hasIconData()||Q.get("icon-optional")),de&&(re||!a.hasTextData()||Q.get("text-optional")),!0);!a.collisionArrays&&v&&(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData())&&a.deserializeCollisionBoxes(v);const qe=(it,ht,xt)=>{for(let pt=0;pt<ht/4;pt++)it.opacityVertexArray.emplaceBack(xt)};let ut=0;B&&a.updateReplacement(k,B);for(let it=0;it<a.symbolInstances.length;it++){const ht=a.symbolInstances.get(it),{numHorizontalGlyphVertices:xt,numVerticalGlyphVertices:pt,crossTileID:At,numIconVertices:Rt,tileAnchorX:cn,tileAnchorY:wn}=ht;let ln=null;if(ht&&Ue){const Qn=this.retainedQueryData[a.bucketInstanceId];ln=g.latestFeatureIndex.loadFeature({featureIndex:ht.featureIndex,bucketIndex:Qn.bucketIndex,sourceLayerIndex:Qn.sourceLayerIndex,layoutVertexArrayOffset:0})}const Ln=ze.evaluate(ln,{}),kt=u.has(At);let mn=this.opacities[At];kt?mn=J:mn||(mn=Xe,this.opacities[At]=mn),u.add(At);const An=xt>0||pt>0,Rn=Rt>0,Mn=this.placedOrientations[At],bn=Mn===i.bk.vertical,Cn=Mn===i.bk.horizontal||Mn===i.bk.horizontalOnly;!An&&!Rn||mn.isHidden()||ut++;let vr=!1;if((An||Rn)&&B)for(const Qn of a.activeReplacements){if(i.br(Qn,x,i.bs.Symbol,z)||Qn.min.x>cn||cn>Qn.max.x||Qn.min.y>wn||wn>Qn.max.y)continue;const rr=i.bt(cn,wn,k.canonical,Qn.footprintTileId.canonical);if(vr=i.bu(rr,Qn.footprint),vr)break}if(An){const Qn=vr?ke:X(mn.text);qe(a.text,xt,bn?ke:Qn),qe(a.text,pt,Cn?ke:Qn);const rr=mn.text.isHidden(),{leftJustifiedTextSymbolIndex:Rr,centerJustifiedTextSymbolIndex:fr,rightJustifiedTextSymbolIndex:Sr,verticalPlacedTextSymbolIndex:Yr}=ht,qr=a.text.placedSymbolArray,ji=rr||bn?1:0;Rr>=0&&(qr.get(Rr).hidden=ji),fr>=0&&(qr.get(fr).hidden=ji),Sr>=0&&(qr.get(Sr).hidden=ji),Yr>=0&&(qr.get(Yr).hidden=rr||Cn?1:0);const oo=this.variableOffsets[At];oo&&this.markUsedJustification(a,oo.anchor,ht,Mn);const So=this.placedOrientations[At];So&&(this.markUsedJustification(a,"left",ht,So),this.markUsedOrientation(a,So,ht))}if(Rn){const Qn=vr?ke:X(mn.icon),{placedIconSymbolIndex:rr,verticalPlacedIconSymbolIndex:Rr}=ht,fr=a.icon.placedSymbolArray,Sr=mn.icon.isHidden()?1:0;rr>=0&&(qe(a.icon,Rt,bn?ke:Qn),fr.get(rr).hidden=Sr),Rr>=0&&(qe(a.icon,ht.numVerticalIconVertices,Cn?ke:Qn),fr.get(Rr).hidden=Sr)}if(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData()){const Qn=a.collisionArrays[it];if(Qn){let rr=new i.P(0,0),Rr=!0;if(Qn.textBox||Qn.verticalTextBox){if(me){const Sr=this.variableOffsets[At];Sr?(rr=Ga(Sr.anchor,Sr.width,Sr.height,Sr.textOffset,Sr.textScale),_e&&rr._rotate(xe?this.transform.angle:-this.transform.angle)):Rr=!1}W&&(Rr=!mn.clipped),Qn.textBox&&Kl(a.textCollisionBox.collisionVertexArray,mn.text.placed,!Rr||bn,Ln,Qe,rr.x,rr.y),Qn.verticalTextBox&&Kl(a.textCollisionBox.collisionVertexArray,mn.text.placed,!Rr||Cn,Ln,Qe,rr.x,rr.y)}const fr=Rr&&!!(!Cn&&Qn.verticalIconBox);Qn.iconBox&&Kl(a.iconCollisionBox.collisionVertexArray,mn.icon.placed,fr,Ln,Qe,ht.hasIconTextFit?rr.x:0,ht.hasIconTextFit?rr.y:0),Qn.verticalIconBox&&Kl(a.iconCollisionBox.collisionVertexArray,mn.icon.placed,!fr,Ln,Qe,ht.hasIconTextFit?rr.x:0,ht.hasIconTextFit?rr.y:0)}}}if(a.fullyClipped=ut===0,a.sortFeatures(this.transform.angle),this.retainedQueryData[a.bucketInstanceId]&&(this.retainedQueryData[a.bucketInstanceId].featureSortOrder=a.featureSortOrder),a.hasTextData()&&a.text.opacityVertexBuffer&&a.text.opacityVertexBuffer.updateData(a.text.opacityVertexArray),a.hasIconData()&&a.icon.opacityVertexBuffer&&a.icon.opacityVertexBuffer.updateData(a.icon.opacityVertexArray),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexBuffer&&a.iconCollisionBox.collisionVertexBuffer.updateData(a.iconCollisionBox.collisionVertexArray),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexBuffer&&a.textCollisionBox.collisionVertexBuffer.updateData(a.textCollisionBox.collisionVertexArray),a.bucketInstanceId in this.collisionCircleArrays){const it=this.collisionCircleArrays[a.bucketInstanceId];a.placementInvProjMatrix=it.invProjMatrix,a.placementViewportMatrix=it.viewportMatrix,a.collisionCircleArray=it.circles,delete this.collisionCircleArrays[a.bucketInstanceId]}}symbolFadeChange(a){return this.fadeDuration===0?1:(a-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(a){return Math.max(0,(this.transform.zoom-a)/1.5)}hasTransitions(a){return this.stale||a-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(a,u){const g=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*g>a}setStale(){this.stale=!0}}function Kl(m,a,u,g,v,x,B){m.emplaceBack(a?1:0,u?1:0,x||0,B||0,g,v?1:0),m.emplaceBack(a?1:0,u?1:0,x||0,B||0,g,v?1:0),m.emplaceBack(a?1:0,u?1:0,x||0,B||0,g,v?1:0),m.emplaceBack(a?1:0,u?1:0,x||0,B||0,g,v?1:0)}const Ma=Math.pow(2,25),xd=Math.pow(2,24),ql=Math.pow(2,17),gs=Math.pow(2,16),Yu=Math.pow(2,9),Zs=Math.pow(2,8),xu=Math.pow(2,1);function X(m){if(m.opacity===0&&!m.placed)return 0;if(m.opacity===1&&m.placed)return 4294967295;const a=m.placed?1:0,u=Math.floor(127*m.opacity);return u*Ma+a*xd+u*ql+a*gs+u*Yu+a*Zs+u*xu+a}const ke=0;class Bt{constructor(a){this._sortAcrossTiles=a.layout.get("symbol-z-order")!=="viewport-y"&&a.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(a,u,g,v,x){const B=this._bucketParts;for(;this._currentTileIndex<a.length;)if(u.getBucketParts(B,v,a[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,x())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,B.sort((k,z)=>k.sortKey-z.sortKey));this._currentPartIndex<B.length;){const k=B[this._currentPartIndex];if(u.placeLayerBucketPart(k,this._seenCrossTileIDs,g,k.symbolInstanceStart===0),this._currentPartIndex++,x())return!0}return!1}}class Ht{constructor(a,u,g,v,x,B,k,z,Q){this.placement=new ll(a,x,B,k,z,Q),this._currentPlacementIndex=u.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=v,this._done=!1}isDone(){return this._done}continuePlacement(a,u,g,v){const x=i.q.now(),B=()=>{const k=i.q.now()-x;return!this._forceFullPlacement&&k>2};for(;this._currentPlacementIndex>=0;){const k=u[a[this._currentPlacementIndex]],z=this.placement.collisionIndex.transform.zoom;if(k.type==="symbol"&&(!k.minzoom||k.minzoom<=z)&&(!k.maxzoom||k.maxzoom>z)){const Q=k,j=Q.layout.get("symbol-z-elevate"),W=Q.layout.get("symbol-sort-key").constantOr(1)!==void 0,J=Q.layout.get("symbol-z-order"),re=J==="viewport-y"||J==="auto"&&!(J!=="viewport-y"&&W),de=Q.layout.get("text-allow-overlap")||Q.layout.get("icon-allow-overlap")||Q.layout.get("text-ignore-placement")||Q.layout.get("icon-ignore-placement"),me=re&&de,_e=this._inProgressLayer=this._inProgressLayer||new Bt(Q),xe=i.av(k.source,k.scope);if(_e.continuePlacement(j||me?v[xe]:g[xe],this.placement,this._showCollisionBoxes,k,B))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(a){return this.placement.commit(a),this.placement}}const sn=512/i.ab/2;class Dn{constructor(a,u,g){this.tileID=a,this.bucketInstanceId=g,this.index=new i.by(u.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const v=a.canonical.x*i.ab,x=a.canonical.y*i.ab;for(let B=0;B<u.length;B++){const{key:k,crossTileID:z,tileAnchorX:Q,tileAnchorY:j}=u.get(B),W=Math.floor((v+Q)*sn),J=Math.floor((x+j)*sn);this.index.add(W,J),this.keys.push(k),this.crossTileIDs.push(z)}this.index.finish()}findMatches(a,u,g){const v=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z),x=sn/Math.pow(2,u.canonical.z-this.tileID.canonical.z),B=u.canonical.x*i.ab,k=u.canonical.y*i.ab;for(let z=0;z<a.length;z++){const Q=a.get(z);if(Q.crossTileID)continue;const{key:j,tileAnchorX:W,tileAnchorY:J}=Q,re=Math.floor((B+W)*x),de=Math.floor((k+J)*x),me=this.index.range(re-v,de-v,re+v,de+v);for(const _e of me){const xe=this.crossTileIDs[_e];if(this.keys[_e]===j&&!g.has(xe)){g.add(xe),Q.crossTileID=xe;break}}}}}class Zn{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class xr{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(a){const u=Math.round((a-this.lng)/360);if(u!==0)for(const g in this.indexes){const v=this.indexes[g],x={};for(const B in v){const k=v[B];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+u),x[k.tileID.key]=k}this.indexes[g]=x}this.lng=a}addBucket(a,u,g){if(this.indexes[a.overscaledZ]&&this.indexes[a.overscaledZ][a.key]){if(this.indexes[a.overscaledZ][a.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(a.overscaledZ,this.indexes[a.overscaledZ][a.key])}for(let x=0;x<u.symbolInstances.length;x++)u.symbolInstances.get(x).crossTileID=0;this.usedCrossTileIDs[a.overscaledZ]||(this.usedCrossTileIDs[a.overscaledZ]=new Set);const v=this.usedCrossTileIDs[a.overscaledZ];for(const x in this.indexes){const B=this.indexes[x];if(Number(x)>a.overscaledZ)for(const k in B){const z=B[k];z.tileID.isChildOf(a)&&z.findMatches(u.symbolInstances,a,v)}else{const k=B[a.scaledTo(Number(x)).key];k&&k.findMatches(u.symbolInstances,a,v)}}for(let x=0;x<u.symbolInstances.length;x++){const B=u.symbolInstances.get(x);B.crossTileID||(B.crossTileID=g.generate(),v.add(B.crossTileID))}return this.indexes[a.overscaledZ]===void 0&&(this.indexes[a.overscaledZ]={}),this.indexes[a.overscaledZ][a.key]=new Dn(a,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(a,u){for(const g of u.crossTileIDs)this.usedCrossTileIDs[a].delete(g)}removeStaleBuckets(a){let u=!1;for(const g in this.indexes){const v=this.indexes[g];for(const x in v)a[v[x].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,v[x]),delete v[x],u=!0)}return u}}class N{constructor(){this.layerIndexes={},this.crossTileIDs=new Zn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(a,u,g,v){let x=this.layerIndexes[a.fqid];x===void 0&&(x=this.layerIndexes[a.fqid]=new xr);let B=!1;const k={};v.name!=="globe"&&x.handleWrapJump(g);for(const z of u){const Q=z.getBucket(a);Q&&a.fqid===Q.layerIds[0]&&(Q.bucketInstanceId||(Q.bucketInstanceId=++this.maxBucketInstanceId),x.addBucket(z.tileID,Q,this.crossTileIDs)&&(B=!0),k[Q.bucketInstanceId]=!0)}return x.removeStaleBuckets(k)&&(B=!0),B}pruneUnusedLayers(a){const u={};a.forEach(g=>{u[g]=!0});for(const g in this.layerIndexes)u[g]||delete this.layerIndexes[g]}}const ae=771;class fe{constructor(a,u,g,v){this.blendFunction=a,this.blendColor=u,this.mask=g,this.blendEquation=v}}fe.Replace=[1,0,1,0],fe.disabled=new fe(fe.Replace,i.bz.transparent,[!1,!1,!1,!1]),fe.unblended=new fe(fe.Replace,i.bz.transparent,[!0,!0,!0,!0]),fe.alphaBlended=new fe([1,ae,1,ae],i.bz.transparent,[!0,!0,!0,!0]),fe.alphaBlendedNonPremultiplied=new fe([770,ae,770,ae],i.bz.transparent,[!0,!0,!0,!0]),fe.multiply=new fe([774,0,774,0],i.bz.transparent,[!0,!0,!0,!0]);class Le{constructor(a,u,g){this.func=a,this.mask=u,this.range=g}}Le.ReadOnly=!1,Le.ReadWrite=!0,Le.disabled=new Le(519,Le.ReadOnly,[0,1]);const an=7680;class Qt{constructor(a,u,g,v,x,B){this.test=a,this.ref=u,this.mask=g,this.fail=v,this.depthFail=x,this.pass=B}}Qt.disabled=new Qt({func:519,mask:0},0,0,an,an,an);const nr=1029,di=2305;class ir{constructor(a,u,g){this.enable=a,this.mode=u,this.frontFace=g}}function Ai(m,a){const u=i.bC(m,3);i.a6.mat4.fromQuat(m,a),i.bE(m,3,u)}function ro(m,a){const u=i.a6.quat.identity([]);return i.a6.quat.rotateZ(u,u,-a),i.a6.quat.rotateX(u,u,-m),u}function ko(m,a){const u=[m[0],m[1],0],g=[a[0],a[1],0];if(i.a6.vec3.length(u)>=1e-15){const B=i.a6.vec3.normalize([],u);i.a6.vec3.scale(g,B,i.a6.vec3.dot(g,B)),a[0]=g[0],a[1]=g[1]}const v=i.a6.vec3.cross([],a,m);if(i.a6.vec3.len(v)<1e-15)return null;const x=Math.atan2(-v[1],v[0]);return ro(Math.atan2(Math.sqrt(m[0]*m[0]+m[1]*m[1]),-m[2]),x)}ir.disabled=new ir(!1,nr,di),ir.backCCW=new ir(!0,nr,di),ir.backCW=new ir(!0,nr,2304),ir.frontCW=new ir(!0,1028,2304),ir.frontCCW=new ir(!0,1028,di);class ha{constructor(a,u){this.position=a,this.orientation=u}get position(){return this._position}set position(a){if(a){const u=a instanceof i.a5?a:new i.a5(a[0],a[1],a[2]);this._renderWorldCopies&&(u.x=i.bA(u.x,0,1)),this._position=u}else this._position=null}lookAtPoint(a,u){if(this.orientation=null,!this.position)return;const g=this.position,v=this._elevation?this._elevation.getAtPointOrZero(i.a5.fromLngLat(a)):0,x=i.a5.fromLngLat(a,v),B=[x.x-g.x,x.y-g.y,x.z-g.z];u||(u=[0,0,1]),u[2]=Math.abs(u[2]),this.orientation=ko(B,u)}setPitchBearing(a,u){this.orientation=ro(i.bB(a),i.bB(-u))}}class ys{constructor(a,u){this._transform=i.a6.mat4.identity([]),this.orientation=u,this.position=a}get mercatorPosition(){const a=this.position;return new i.a5(a[0],a[1],a[2])}get position(){const a=i.bC(this._transform,3);return[a[0],a[1],a[2]]}set position(a){var u;a&&i.bE(this._transform,3,[(u=a)[0],u[1],u[2],1])}get orientation(){return this._orientation}set orientation(a){this._orientation=a||i.a6.quat.identity([]),a&&Ai(this._transform,this._orientation)}getPitchBearing(){const a=this.forward(),u=this.right();return{bearing:Math.atan2(-u[1],u[0]),pitch:Math.atan2(Math.sqrt(a[0]*a[0]+a[1]*a[1]),-a[2])}}setPitchBearing(a,u){this._orientation=ro(a,u),Ai(this._transform,this._orientation)}forward(){const a=i.bC(this._transform,2);return[-a[0],-a[1],-a[2]]}up(){const a=i.bC(this._transform,1);return[-a[0],-a[1],-a[2]]}right(){const a=i.bC(this._transform,0);return[a[0],a[1],a[2]]}getCameraToWorld(a,u){const g=new Float64Array(16);return i.a6.mat4.invert(g,this.getWorldToCamera(a,u)),g}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(a,u,g){const v=this.position;i.a6.vec3.scale(v,v,-a);const x=new Float64Array(16);return i.a6.mat4.fromScaling(x,[g,g,g]),i.a6.mat4.translate(x,x,v),x[10]*=u,x}getWorldToCamera(a,u){const g=new Float64Array(16),v=new Float64Array(4),x=this.position;return i.a6.quat.conjugate(v,this._orientation),i.a6.vec3.scale(x,x,-a),i.a6.mat4.fromQuat(g,v),i.a6.mat4.translate(g,g,x),g[1]*=-1,g[5]*=-1,g[9]*=-1,g[13]*=-1,g[8]*=u,g[9]*=u,g[10]*=u,g[11]*=u,g}getCameraToClipPerspective(a,u,g,v){const x=new Float64Array(16);return i.a6.mat4.perspective(x,a,u,g,v),x}getCameraToClipOrthographic(a,u,g,v,x,B){const k=new Float64Array(16);return i.a6.mat4.ortho(k,a,u,g,v,x,B),k}getDistanceToElevation(a,u=!1){const g=a===0?0:i.bD(a,u?i.aM(this.position[1]):this.position[1]),v=this.forward();return(g-this.position[2])/v[2]}clone(){return new ys([...this.position],[...this.orientation])}}const Jo={BaseColor:5,MetallicRoughness:6,Normal:7,Occlusion:8,Emission:9,LUT:10,ShadowMap0:11};class xl{constructor(a=0,u=0,g=0,v=0){if(isNaN(a)||a<0||isNaN(u)||u<0||isNaN(g)||g<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=a,this.bottom=u,this.left=g,this.right=v}interpolate(a,u,g){return u.top!=null&&a.top!=null&&(this.top=i.aa(a.top,u.top,g)),u.bottom!=null&&a.bottom!=null&&(this.bottom=i.aa(a.bottom,u.bottom,g)),u.left!=null&&a.left!=null&&(this.left=i.aa(a.left,u.left,g)),u.right!=null&&a.right!=null&&(this.right=i.aa(a.right,u.right,g)),this}getCenter(a,u){const g=i.ap((this.left+a-this.right)/2,0,a),v=i.ap((this.top+u-this.bottom)/2,0,u);return new i.P(g,v)}equals(a){return this.top===a.top&&this.bottom===a.bottom&&this.left===a.left&&this.right===a.right}clone(){return new xl(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Gc=(m,a,u)=>(1-u)*m+u*a,Kc=m=>m*m*m*m*m;class Cu{constructor(a,u,g,v,x,B,k){this.tileSize=512,this._renderWorldCopies=x===void 0||x,this._minZoom=a||0,this._maxZoom=u||22,this._minPitch=g??0,this._maxPitch=v??60,this.setProjection(B),this.setMaxBounds(k),this.width=0,this.height=0,this._center=new i.bK(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new xl,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._expandedProjMatrixCache={},this._distanceTileDataCache={},this._camera=new ys,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._tileCoverLift=0,this.freezeTileCoverage=!1,this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1}clone(){const a=new Cu(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return a._elevation=this._elevation,a._centerAltitude=this._centerAltitude,a._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,a.tileSize=this.tileSize,a.mercatorFromTransition=this.mercatorFromTransition,a.width=this.width,a.height=this.height,a.cameraElevationReference=this.cameraElevationReference,a._center=this._center,a._setZoom(this.zoom),a._seaLevelZoom=this._seaLevelZoom,a.angle=this.angle,a._fov=this._fov,a._pitch=this._pitch,a._nearZ=this._nearZ,a._farZ=this._farZ,a._averageElevation=this._averageElevation,a._orthographicProjectionAtLowPitch=this._orthographicProjectionAtLowPitch,a._unmodified=this._unmodified,a._edgeInsets=this._edgeInsets.clone(),a._camera=this._camera.clone(),a._calcMatrices(),a.freezeTileCoverage=this.freezeTileCoverage,a.frustumCorners=this.frustumCorners,a}get isOrthographic(){return this.projection.name!=="globe"&&this._orthographicProjectionAtLowPitch&&this.pitch<15}get elevation(){return this._elevation}set elevation(a){this._elevation!==a&&(this._elevation=a,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return this.projection.name!=="globe"&&!this.isOrthographic}updateElevation(a,u=!1){const g=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||g)&&this._updateCameraOnTerrain(),(a||g)&&this._constrainCamera(u),this._calcMatrices()}getProjection(){return i.ar(this.projection,["name","center","parallels"])}setProjection(a){this.projectionOptions=a||{name:"mercator"};const u=this.projection?this.getProjection():void 0;this.projection=i.bL(this.projectionOptions);const g=this.getProjection(),v=!i.bh(u,g);return v&&this._calcMatrices(),this.mercatorFromTransition=!1,v}setOrthographicProjectionAtLowPitch(a){return this._orthographicProjectionAtLowPitch!==a&&(this._orthographicProjectionAtLowPitch=a,this._calcMatrices(),!0)}setMercatorFromTransition(){const a=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=i.bL({name:"mercator"});const u=a!==this.projection.name;return u&&this._calcMatrices(),u}get minZoom(){return this._minZoom}set minZoom(a){this._minZoom!==a&&(this._minZoom=a,this.zoom=Math.max(this.zoom,a))}get maxZoom(){return this._maxZoom}set maxZoom(a){this._maxZoom!==a&&(this._maxZoom=a,this.zoom=Math.min(this.zoom,a))}get minPitch(){return this._minPitch}set minPitch(a){this._minPitch!==a&&(this._minPitch=a,this.pitch=Math.max(this.pitch,a))}get maxPitch(){return this._maxPitch}set maxPitch(a){this._maxPitch!==a&&(this._maxPitch=a,this.pitch=Math.min(this.pitch,a))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(a){a===void 0?a=!0:a===null&&(a=!1),this._renderWorldCopies=a}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const a=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(a))}get cameraWorldSize(){const a=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(a))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return i.bD(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new i.P(this.width,this.height)}get bearing(){return i.bA(this.rotation,-180,180)}set bearing(a){this.rotation=a}get rotation(){return-this.angle/Math.PI*180}set rotation(a){const u=-a*Math.PI/180;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=i.a6.mat2.create(),i.a6.mat2.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(a){const u=i.ap(a,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const a=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/a)}set fov(a){a=Math.max(.01,Math.min(60,a)),this._fov!==a&&(this._unmodified=!1,this._fov=i.bB(a),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(a){this._averageElevation=a,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(a){const u=Math.min(Math.max(a,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._setZoom(u),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(a){this._zoom=a,this.scale=this.zoomScale(a),this.tileZoom=Math.floor(a),this.zoomFraction=a-this.tileZoom}get tileCoverLift(){return this._tileCoverLift}set tileCoverLift(a){this._tileCoverLift!==a&&(this._tileCoverLift=a)}_updateCameraOnTerrain(){const a=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,u=this.elevation&&a===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||a===Number.NEGATIVE_INFINITY&&(!u||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const g=this._elevation;u||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&g.exaggeration()&&this._centerAltitudeValidForExaggeration!==g.exaggeration()?(this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*g.exaggeration(),this._centerAltitudeValidForExaggeration=g.exaggeration()):(this._centerAltitude=a||0,this._centerAltitudeValidForExaggeration=g.exaggeration()),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const a=this._elevation,u=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],g=this.horizonLineFromTop();let v=0,x=0;for(let B=0;B<u.length;B++){const k=new i.P(u[B][0]*this.width,g+u[B][1]*(this.height-g)),z=a.pointCoordinate(k);if(!z)continue;const Q=1/Math.hypot(z[0]-this._camera.position[0],z[1]-this._camera.position[1]);v+=z[3]*Q,x+=Q}return x===0?NaN:v/x}get center(){return this._center}set center(a){a.lat===this._center.lat&&a.lng===this._center.lng||(this._unmodified=!1,this._center=a,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const a=this._seaLevelZoom,u=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),g=this.pixelsPerMeter/this.worldSize*u,v=this._mercatorZfromZoom(a),x=this._mercatorZfromZoom(this._maxZoom),B=Math.max(v-g,x);this._setZoom(this._zoomFromMercatorZ(B))}get padding(){return this._edgeInsets.toJSON()}set padding(a){this._edgeInsets.equals(a)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,a,1),this._calcMatrices())}computeZoomRelativeTo(a){const u=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,a.toAltitude()));let g;g=a.z<this._camera.position[2]?[u.x,u.y,u.z]:[a.x,a.y,a.z];const v=i.a6.vec3.length(i.a6.vec3.sub([],this._camera.position,g));return i.ap(this._zoomFromMercatorZ(v),this._minZoom,this._maxZoom)}setFreeCameraOptions(a){if(!this.height||!a.position&&!a.orientation)return;this._updateCameraState();let u=!1;if(a.orientation&&!i.a6.quat.exactEquals(a.orientation,this._camera.orientation)&&(u=this._setCameraOrientation(a.orientation)),a.position){const g=[a.position.x,a.position.y,a.position.z];i.a6.vec3.exactEquals(g,this._camera.position)||(this._setCameraPosition(g),u=!0)}u&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const a=this._camera.position,u=new ha;return u.position=new i.a5(a[0],a[1],a[2]),u.orientation=this._camera.orientation,u._elevation=this.elevation,u._renderWorldCopies=this.renderWorldCopies,u}_setCameraOrientation(a){if(!i.a6.quat.length(a))return!1;i.a6.quat.normalize(a,a);const u=i.a6.vec3.transformQuat([],[0,0,-1],a),g=i.a6.vec3.transformQuat([],[0,-1,0],a);if(g[2]<0)return!1;const v=ko(u,g);return!!v&&(this._camera.orientation=v,!0)}_setCameraPosition(a){const u=this.zoomScale(this.minZoom)*this.tileSize,g=this.zoomScale(this.maxZoom)*this.tileSize,v=this.cameraToCenterDistance;a[2]=i.ap(a[2],v/g,v/u),this._camera.position=a}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(a){return this._edgeInsets.equals(a)}interpolatePadding(a,u,g){this._unmodified=!1,this._edgeInsets.interpolate(a,u,g),this._constrain(),this._calcMatrices()}coveringZoomLevel(a){const u=(a.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/a.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(a){const u=[new i.bM(0,a)];if(this.renderWorldCopies){const g=this.pointCoordinate(new i.P(0,0)),v=this.pointCoordinate(new i.P(this.width,0)),x=this.pointCoordinate(new i.P(this.width,this.height)),B=this.pointCoordinate(new i.P(0,this.height)),k=Math.floor(Math.min(g.x,v.x,x.x,B.x)),z=Math.floor(Math.max(g.x,v.x,x.x,B.x)),Q=1;for(let j=k-Q;j<=z+Q;j++)j!==0&&u.push(new i.bM(j,a))}return u}isLODDisabled(a){return(!a||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCover(a,u,g){let v=[];const x=g!==void 0,B=!x;if(B&&this.zoom<u||x&&g[0]===0&&g[1]===0)return v;const k=new Set,z=(j,W,J,re,de)=>{const me=i.c1(W,j,J,re,de);k.has(me)||(v.push(new i.aA(j,W,J,re,de)),k.add(me))};for(let j=0;j<a.length;j++){const W=a[j];if(B&&W.canonical.z!==u)continue;const J=W.canonical,re=W.overscaledZ,de=W.wrap,me=1<<J.z,_e=J.x+1<me,xe=J.x>0,ze=J.y+1<me,Qe=J.y>0,Ue=W.wrap-(xe?0:1),Xe=W.wrap+(_e?0:1),qe=xe?J.x-1:me-1,ut=_e?J.x+1:0;if(x)g[0]<0?(z(re,Xe,J.z,ut,J.y),g[1]<0&&ze&&(z(re,de,J.z,J.x,J.y+1),z(re,Xe,J.z,ut,J.y+1)),g[1]>0&&Qe&&(z(re,de,J.z,J.x,J.y-1),z(re,Xe,J.z,ut,J.y-1))):g[0]>0?(z(re,Ue,J.z,qe,J.y),g[1]<0&&ze&&(z(re,de,J.z,J.x,J.y+1),z(re,Ue,J.z,qe,J.y+1)),g[1]>0&&Qe&&(z(re,de,J.z,J.x,J.y-1),z(re,Ue,J.z,qe,J.y-1))):g[1]<0&&ze?z(re,de,J.z,J.x,J.y+1):Qe&&z(re,de,J.z,J.x,J.y-1);else{const it=W.visibleQuadrants;1&it&&(z(re,Ue,J.z,qe,J.y),Qe&&(z(re,de,J.z,J.x,J.y-1),z(re,Ue,J.z,qe,J.y-1))),2&it&&(z(re,Xe,J.z,ut,J.y),Qe&&(z(re,de,J.z,J.x,J.y-1),z(re,Xe,J.z,ut,J.y-1))),4&it&&(z(re,Ue,J.z,qe,J.y),ze&&(z(re,de,J.z,J.x,J.y+1),z(re,Ue,J.z,qe,J.y+1))),8&it&&(z(re,Xe,J.z,ut,J.y),ze&&(z(re,de,J.z,J.x,J.y+1),z(re,Xe,J.z,ut,J.y+1)))}}const Q=[];for(const j of v)v.some(W=>j.isChildOf(W))||Q.push(j);if(v=Q.filter(j=>!a.some(W=>!!(j.overscaledZ<u&&W.isChildOf(j))||j.equals(W)||j.isChildOf(W))),B){const j=1<<u,W=this.projection.name==="globe"?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),J=[j*W.x,j*W.y],re=4,de=re*re;v=v.filter(me=>{const _e=me.canonical.x+.5-J[0],xe=me.canonical.y+.5-J[1];return _e*_e+xe*xe<de})}return v}coveringTiles(a){let u=this.coveringZoomLevel(a);const g=u,v=this.elevation&&this.elevation.exaggeration(),x=v&&!a.isTerrainDEM,B=this.projection.name==="mercator";if(a.minzoom!==void 0&&u<a.minzoom)return[];a.maxzoom!==void 0&&u>a.maxzoom&&(u=a.maxzoom);const k=this.locationCoordinate(this.center),z=this.center.lat,Q=1<<u,j=[Q*k.x,Q*k.y,0],W=this.projection.name==="globe",J=!W,re=i.bN.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,u,J),de=W?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),me=Q*i.bD(1,this.center.lat),_e=this._camera.position[2]/i.bD(1,this.center.lat),xe=[Q*de.x,Q*de.y,_e*(J?1:me)],ze=W||v,Qe=this.cameraToCenterDistance/a.tileSize*(a.roundZoom?1:.502),Ue=this.isLODDisabled(!0)?u:0;let Xe;if(this._elevation&&a.isTerrainDEM)Xe=1e4*this._elevation.exaggeration();else if(this._elevation){const kt=this._elevation.getMinMaxForVisibleTiles();Xe=kt?kt.max:this._centerAltitude}else Xe=this._centerAltitude;const qe=a.isTerrainDEM?-Xe:this._elevation?this._elevation.getMinElevationBelowMSL():0,ut=this.projection.isReprojectedInTileSpace?i.bO(this):1,it=kt=>{const An=new i.a5(kt.x+25e-6,kt.y,kt.z),Rn=new i.a5(kt.x,kt.y+25e-6,kt.z),Mn=kt.toLngLat(),bn=An.toLngLat(),Cn=Rn.toLngLat(),vr=this.locationCoordinate(Mn),Qn=this.locationCoordinate(bn),rr=this.locationCoordinate(Cn),Rr=Math.hypot(Qn.x-vr.x,Qn.y-vr.y),fr=Math.hypot(rr.x-vr.x,rr.y-vr.y);return Math.sqrt(Rr*fr)*ut/25e-6},ht=kt=>{const mn=Xe,An=qe;return{aabb:i.bR(this,Q,0,0,0,kt,An,mn,this.projection),zoom:0,x:0,y:0,minZ:An,maxZ:mn,wrap:kt,fullyVisible:!1}},xt=[];let pt=[];const At=u,Rt=a.reparseOverscaled?g:u,cn=(_e-this._centerAltitude)*me,wn=kt=>{if(!this._elevation||!kt.tileID||!B)return;const mn=this._elevation.getMinMaxForTile(kt.tileID),An=kt.aabb;mn?(An.min[2]=mn.min,An.max[2]=mn.max,An.center[2]=(An.min[2]+An.max[2])/2):(kt.shouldSplit=Ln(kt),kt.shouldSplit||(An.min[2]=An.max[2]=An.center[2]=this._centerAltitude))},ln=(kt,mn)=>{if(.707*mn<kt)return 1;const An=mn/kt;return An/(1.4144271570014144+(Math.pow(1.1,An-1.4144271570014144+1)-1)/(1.1-1)-1)},Ln=kt=>{if(kt.zoom<Ue)return!0;if(kt.zoom===At)return!1;if(kt.shouldSplit!=null)return kt.shouldSplit;const mn=kt.aabb.distanceX(xe),An=kt.aabb.distanceY(xe);let Rn=cn,Mn=1;if(W){Rn=kt.aabb.distanceZ(xe);const fr=Math.pow(2,kt.zoom),Sr=i.aM((kt.y+1)/fr),Yr=i.aM(kt.y/fr),qr=Math.min(Math.max(z,Sr),Yr),ji=i.c5(qr)/i.c5(z);if(Mn=qr===z?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,ji/this._mercatorScaleRatio),this.zoom<=i.c2&&kt.zoom===At-1&&ji>=.9)return!0}else if(x&&(Rn=kt.aabb.distanceZ(xe)*me),this.projection.isReprojectedInTileSpace&&g<=5){const fr=Math.pow(2,kt.zoom),Sr=it(new i.a5((kt.x+.5)/fr,(kt.y+.5)/fr));Mn=Sr>.85?1:Sr}if(!B){const fr=Math.sqrt(mn*mn+An*An+Rn*Rn);let Sr=(1<<At-kt.zoom)*Qe*Mn;return Sr*=ln(Math.max(Rn,cn),fr),fr<Sr}let bn=Number.MAX_VALUE,Cn=0;const vr=kt.aabb.getCorners(),Qn=[];for(const fr of vr){i.a6.vec3.sub(Qn,fr,xe),W||(x?Qn[2]*=me:Qn[2]=cn);const Sr=i.a6.vec3.dot(Qn,this._camera.forward());Sr<bn&&(bn=Sr,Cn=Math.abs(Qn[2]))}let rr=(1<<At-kt.zoom)*Qe*Mn;if(rr*=ln(Math.max(Cn,cn),bn),bn<rr)return!0;const Rr=kt.aabb.closestPoint(j);return Rr[0]===j[0]&&Rr[1]===j[1]};if(this.renderWorldCopies)for(let kt=1;kt<=3;kt++)xt.push(ht(-kt)),xt.push(ht(kt));for(xt.push(ht(0));xt.length>0;){const kt=xt.pop(),mn=kt.x,An=kt.y;let Rn=kt.fullyVisible;const Mn=()=>this.projection.name==="globe"&&(kt.y===0||kt.y===(1<<kt.zoom)-1);if(!Rn){let bn=ze?kt.aabb.intersects(re):kt.aabb.intersectsFlat(re);if(bn===0&&Mn()){const Cn=new i.bP(kt.zoom,mn,An);bn=i.bQ(this,Q,Cn,!0).intersects(re)}if(bn===0)continue;Rn=bn===2}if(kt.zoom!==At&&Ln(kt))for(let bn=0;bn<4;bn++){const Cn=(mn<<1)+bn%2,vr=(An<<1)+(bn>>1),Qn={aabb:B?kt.aabb.quadrant(bn):i.bR(this,Q,kt.zoom+1,Cn,vr,kt.wrap,kt.minZ,kt.maxZ,this.projection),zoom:kt.zoom+1,x:Cn,y:vr,wrap:kt.wrap,fullyVisible:Rn,tileID:void 0,shouldSplit:void 0,minZ:kt.minZ,maxZ:kt.maxZ};x&&!W&&(Qn.tileID=new i.aA(kt.zoom+1===At?Rt:kt.zoom+1,kt.wrap,kt.zoom+1,Cn,vr),wn(Qn)),xt.push(Qn)}else{const bn=kt.zoom===At?Rt:kt.zoom;if(a.minzoom&&a.minzoom>bn)continue;let Cn=0;if(!Rn){let Rr=ze?kt.aabb.intersectsPrecise(re):kt.aabb.intersectsPreciseFlat(re);if(Rr===0&&Mn()){const fr=new i.bP(kt.zoom,mn,An);Rr=i.bQ(this,Q,fr,!0).intersectsPrecise(re)}if(Rr===0)continue;if(a.calculateQuadrantVisibility)if(re.containsPoint(kt.aabb.center))Cn=15;else for(let fr=0;fr<4;fr++)kt.aabb.quadrant(fr).intersects(re)!==0&&(Cn|=1<<fr)}const vr=j[0]-(.5+mn+(kt.wrap<<kt.zoom))*(1<<u-kt.zoom),Qn=j[1]-.5-An,rr=kt.tileID?kt.tileID:new i.aA(bn,kt.wrap,kt.zoom,mn,An);a.calculateQuadrantVisibility&&(rr.visibleQuadrants=Cn),pt.push({tileID:rr,distanceSq:vr*vr+Qn*Qn})}}if(this.fogCullDistSq){const kt=this.fogCullDistSq,mn=this.horizonLineFromTop();pt=pt.filter(An=>{const Rn=[0,0,0,1],Mn=[i.ab,i.ab,0,1],bn=this.calculateFogTileMatrix(An.tileID.toUnwrapped());i.a6.vec4.transformMat4(Rn,Rn,bn),i.a6.vec4.transformMat4(Mn,Mn,bn);const Cn=i.a6.vec4.min([],Rn,Mn),vr=i.a6.vec4.max([],Rn,Mn),Qn=i.bS(Cn,vr);if(Qn===0)return!0;let rr=!1;const Rr=this._elevation;if(Rr&&Qn>kt&&mn!==0){const fr=this.calculateProjMatrix(An.tileID.toUnwrapped());let Sr;a.isTerrainDEM||(Sr=Rr.getMinMaxForTile(An.tileID)),Sr||(Sr={min:qe,max:Xe});const Yr=i.c3(this.rotation),qr=[Yr[0]*i.ab,Yr[1]*i.ab,Sr.max];i.a6.vec3.transformMat4(qr,qr,fr),rr=(1-qr[1])*this.height*.5<mn}return Qn<kt||rr})}return pt.sort((kt,mn)=>kt.distanceSq-mn.distanceSq).map(kt=>kt.tileID)}resize(a,u){this.width=a,this.height=u,this.pixelsToGLUnits=[2/a,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(a){return Math.pow(2,a)}scaleZoom(a){return Math.log(a)/Math.LN2}project(a){const u=i.ap(a.lat,-i.bT,i.bT),g=this.projection.project(a.lng,u);return new i.P(g.x*this.worldSize,g.y*this.worldSize)}unproject(a){return this.projection.unproject(a.x/this.worldSize,a.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/i.bD(1,this.center.lat)/this.worldSize}setLocationAtPoint(a,u){let g,v;const x=this.centerPoint;if(this.projection.name==="globe"){const k=this.worldSize;g=(u.x-x.x)/k,v=(u.y-x.y)/k}else{const k=this.pointCoordinate(u),z=this.pointCoordinate(x);g=k.x-z.x,v=k.y-z.y}const B=this.locationCoordinate(a);this.setLocation(new i.a5(B.x-g,B.y-v))}setLocation(a){this.center=this.coordinateLocation(a),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(a){return this.projection.locationPoint(this,a)}locationPoint3D(a){return this.projection.locationPoint(this,a,!0)}pointLocation(a){return this.coordinateLocation(this.pointCoordinate(a))}pointLocation3D(a){return this.coordinateLocation(this.pointCoordinate3D(a))}locationCoordinate(a,u){const g=u?i.bD(u,a.lat):void 0,v=this.projection.project(a.lng,a.lat);return new i.a5(v.x,v.y,g)}coordinateLocation(a){return this.projection.unproject(a.x,a.y)}pointRayIntersection(a,u){const g=u??this._centerAltitude,v=[a.x,a.y,0,1],x=[a.x,a.y,1,1];i.a6.vec4.transformMat4(v,v,this.pixelMatrixInverse),i.a6.vec4.transformMat4(x,x,this.pixelMatrixInverse);const B=x[3];i.a6.vec4.scale(v,v,1/v[3]),i.a6.vec4.scale(x,x,1/B);const k=v[2],z=x[2];return{p0:v,p1:x,t:k===z?0:(g-k)/(z-k)}}screenPointToMercatorRay(a){const u=[a.x,a.y,0,1],g=[a.x,a.y,1,1];return i.a6.vec4.transformMat4(u,u,this.pixelMatrixInverse),i.a6.vec4.transformMat4(g,g,this.pixelMatrixInverse),i.a6.vec4.scale(u,u,1/u[3]),i.a6.vec4.scale(g,g,1/g[3]),u[2]=i.bD(u[2],this._center.lat)*this.worldSize,g[2]=i.bD(g[2],this._center.lat)*this.worldSize,i.a6.vec4.scale(u,u,1/this.worldSize),i.a6.vec4.scale(g,g,1/this.worldSize),new i.aj([u[0],u[1],u[2]],i.a6.vec3.normalize([],i.a6.vec3.sub([],g,u)))}rayIntersectionCoordinate(a){const{p0:u,p1:g,t:v}=a,x=i.bD(u[2],this._center.lat),B=i.bD(g[2],this._center.lat);return new i.a5(i.aa(u[0],g[0],v)/this.worldSize,i.aa(u[1],g[1],v)/this.worldSize,i.aa(x,B,v))}pointCoordinate(a,u=this._centerAltitude){return this.projection.pointCoordinate(this,a.x,a.y,u)}pointCoordinate3D(a){if(!this.elevation)return this.pointCoordinate(a);let u=this.projection.pointCoordinate3D(this,a.x,a.y);if(u)return new i.a5(u[0],u[1],u[2]);let g=0,v=this.horizonLineFromTop();if(a.y>v)return this.pointCoordinate(a);const x=.02*v,B=a.clone();for(let k=0;k<10&&v-g>x;k++){B.y=i.aa(g,v,.66);const z=this.projection.pointCoordinate3D(this,B.x,B.y);z?(v=B.y,u=z):g=B.y}return u?new i.a5(u[0],u[1],u[2]):this.pointCoordinate(a)}isPointAboveHorizon(a){return this.projection.isPointAboveHorizon(this,a)}isPointOnSurface(a){if(a.y<0||a.y>this.height||a.x<0||a.x>this.width)return!1;if(this.elevation||this.zoom>=i.bU)return!this.isPointAboveHorizon(a);const u=this.pointCoordinate(a);return u.y>=0&&u.y<=1}_coordinatePoint(a,u){const g=u&&this.elevation?this.elevation.getAtPointOrZero(a,this._centerAltitude):this._centerAltitude,v=[a.x*this.worldSize,a.y*this.worldSize,g+a.toAltitude(),1];return i.a6.vec4.transformMat4(v,v,this.pixelMatrix),v[3]>0?new i.P(v[0]/v[3],v[1]/v[3]):new i.P(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:a,left:u}=this._edgeInsets,g=this.height-this._edgeInsets.bottom,v=this.width-this._edgeInsets.right,x=this.pointLocation3D(new i.P(u,a)),B=this.pointLocation3D(new i.P(v,a)),k=this.pointLocation3D(new i.P(v,g)),z=this.pointLocation3D(new i.P(u,g));let Q=Math.min(x.lng,B.lng,k.lng,z.lng),j=Math.max(x.lng,B.lng,k.lng,z.lng),W=Math.min(x.lat,B.lat,k.lat,z.lat),J=Math.max(x.lat,B.lat,k.lat,z.lat);const re=Math.pow(2,-this.zoom)/16*270,de=this.projection.name==="globe"?1:4,me=(_e,xe,ze,Qe,Ue)=>{const Xe=(_e+ze)/2,qe=(xe+Qe)/2,ut=new i.P(Xe,qe),{lng:it,lat:ht}=this.pointLocation3D(ut),xt=Math.max(0,Q-it,W-ht,it-j,ht-J);Q=Math.min(Q,it),j=Math.max(j,it),W=Math.min(W,ht),J=Math.max(J,ht),(Ue<de||xt>re)&&(me(_e,xe,Xe,qe,Ue+1),me(Xe,qe,ze,Qe,Ue+1))};if(me(u,a,v,a,1),me(v,a,v,g,1),me(v,g,u,g,1),me(u,g,u,a,1),this.projection.name==="globe"){const[_e,xe]=i.bV(this);_e?(J=90,j=180,Q=-180):xe&&(W=-90,j=180,Q=-180)}return new i.as(new i.bK(Q,W),new i.bK(j,J))}_getBoundsRectangular(a,u){const{top:g,left:v}=this._edgeInsets,x=this.height-this._edgeInsets.bottom,B=this.width-this._edgeInsets.right,k=new i.P(v,g),z=new i.P(B,g),Q=new i.P(B,x),j=new i.P(v,x);let W=this.pointCoordinate(k,a),J=this.pointCoordinate(z,a);const re=this.pointCoordinate(Q,u),de=this.pointCoordinate(j,u),me=(_e,xe)=>(xe.y-_e.y)/(xe.x-_e.x);return W.y>1&&J.y>=0?W=new i.a5((1-de.y)/me(de,W)+de.x,1):W.y<0&&J.y<=1&&(W=new i.a5(-de.y/me(de,W)+de.x,0)),J.y>1&&W.y>=0?J=new i.a5((1-re.y)/me(re,J)+re.x,1):J.y<0&&W.y<=1&&(J=new i.a5(-re.y/me(re,J)+re.x,0)),new i.as().extend(this.coordinateLocation(W)).extend(this.coordinateLocation(J)).extend(this.coordinateLocation(de)).extend(this.coordinateLocation(re))}_getBoundsRectangularTerrain(){const a=this.elevation;if(!a.visibleDemTiles.length||a.isUsingMockSource())return this._getBoundsRectangular(0,0);const u=a.visibleDemTiles.reduce((g,v)=>{if(v.dem){const x=v.dem.tree;g.min=Math.min(g.min,x.minimums[0]),g.max=Math.max(g.max,x.maximums[0])}return g},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(u.min*a.exaggeration(),u.max*a.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(a=!0){const u=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,g=this.height/2-u*(1-this._horizonShift);return a?Math.max(0,g):g}getMaxBounds(){return this.maxBounds}setMaxBounds(a){this.maxBounds=a,this.minLat=-i.bT,this.maxLat=i.bT,this.minLng=-180,this.maxLng=180,a&&(this.minLat=a.getSouth(),this.maxLat=a.getNorth(),this.minLng=a.getWest(),this.maxLng=a.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=i.am(this.minLng)*this.tileSize,this.worldMaxX=i.am(this.maxLng)*this.tileSize,this.worldMinY=i.at(this.maxLat)*this.tileSize,this.worldMaxY=i.at(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(a,u){return this.projection.createTileMatrix(this,u,a)}calculateDistanceTileData(a){const u=a.key,g=this._distanceTileDataCache;if(g[u])return g[u];const v=a.canonical,x=1/this.height,B=this.cameraWorldSize,k=B/this.zoomScale(v.z),z=(v.x+Math.pow(2,v.z)*a.wrap)*k,Q=v.y*k,j=this.point;j.x*=B/this.worldSize,j.y*=B/this.worldSize;const W=this.angle,J=Math.sin(-W),re=-Math.cos(-W);return g[u]={bearing:[J,re],center:[(j.x-z)*x,(j.y-Q)*x],scale:k/i.ab*x},g[u]}calculateFogTileMatrix(a){const u=a.key,g=this._fogTileMatrixCache;if(g[u])return g[u];const v=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,a);return i.a6.mat4.multiply(v,this.worldToFogMatrix,v),g[u]=new Float32Array(v),g[u]}calculateProjMatrix(a,u=!1,g=!1){const v=a.key;let x;if(x=g?this._expandedProjMatrixCache:u?this._alignedProjMatrixCache:this._projMatrixCache,x[v])return x[v];const B=this.calculatePosMatrix(a,this.worldSize);let k;return k=this.projection.isReprojectedInTileSpace?this.mercatorMatrix:g?this.expandedFarZProjMatrix:u?this.alignedProjMatrix:this.projMatrix,i.a6.mat4.multiply(B,k,B),x[v]=new Float32Array(B),x[v]}calculatePixelsToTileUnitsMatrix(a){const u=a.tileID.key,g=this._pixelsToTileUnitsCache;if(g[u])return g[u];const v=i.bW(a,this);return g[u]=v,g[u]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const a=1/this.worldSize,u=i.a6.mat4.fromScaling([],[a,a,a]);return i.a6.mat4.multiply(u,u,this.globeMatrix),u}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const a=this._elevation;this._updateCameraState();const u=i.bD(1,this._center.lat)*this.worldSize,g=this._computeCameraPosition(u),v=this._camera.forward(),x=i.bD(1,this._center.lat);g[2]/=x,v[2]/=x,i.a6.vec3.normalize(v,v);const B=a.raycast(g,v,a.exaggeration());if(B){const k=i.a6.vec3.scaleAndAdd([],g,v,B),z=new i.a5(k[0],k[1],i.bD(k[2],i.aM(k[1]))),Q=(z.z+i.a6.vec3.length([z.x-g[0],z.y-g[1],z.z-g[2]*x]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(Q),this._centerAltitude=z.toAltitude(),this._center=this.coordinateLocation(z),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(a=!1){if(!this._elevation)return;const u=this._elevation,g=i.bD(1,this._center.lat)*this.worldSize,v=this._computeCameraPosition(g),x=u.getAtPointOrZero(new i.a5(...v)),B=this.pixelsPerMeter/this.worldSize*x,k=this._minimumHeightOverTerrain(),z=v[2]-B;if(z<=k)if(z<0||a){const Q=this.locationCoordinate(this._center,this._centerAltitude),j=[v[0],v[1],Q.z-v[2]],W=i.a6.vec3.length(j);j[2]-=(k-z)/this._pixelsPerMercatorPixel;const J=i.a6.vec3.length(j);if(J===0)return;i.a6.vec3.scale(j,j,W/J*this._pixelsPerMercatorPixel),this._camera.position=[v[0],v[1],Q.z*this._pixelsPerMercatorPixel-j[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const a=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||a){const J=this.center;return J.lat=i.ap(J.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!a)&&(J.lng=i.ap(J.lng,this.minLng,this.maxLng)),this.center=J,void(this._constraining=!1)}const u=this._unmodified,{x:g,y:v}=this.point;let x=0,B=g,k=v;const z=this.width/2,Q=this.height/2,j=this.worldMinY*this.scale,W=this.worldMaxY*this.scale;if(v-Q<j&&(k=j+Q),v+Q>W&&(k=W-Q),W-j<this.height&&(x=Math.max(x,this.height/(W-j)),k=(W+j)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const J=this.worldMinX*this.scale,re=this.worldMaxX*this.scale,de=this.worldSize/2-(J+re)/2;B=(g+de+this.worldSize)%this.worldSize-de,B-z<J&&(B=J+z),B+z>re&&(B=re-z),re-J<this.width&&(x=Math.max(x,this.width/(re-J)),B=(re+J)/2)}B===g&&k===v||(this.center=this.unproject(new i.P(B,k))),x&&(this.zoom+=this.scaleZoom(x)),this._constrainCamera(),this._unmodified=u,this._constraining=!1}_minZoomForBounds(){let a=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(a=Math.max(a,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),a}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const a=this.centerOffset,u=this.projection.name==="globe",g=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=i.bD(1,this.center.lat)/i.bD(1,i.c4));const v=i.bX(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,v),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const x=this.projection.zAxisUnit==="meters"?g:1,B=this._camera.getWorldToCamera(this.worldSize,x);let k;const z=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if(z[8]=2*-a.x/this.width,z[9]=2*a.y/this.height,this.isOrthographic){let ht=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),xt=ht*this.aspect,pt=-xt,At=-ht;xt-=a.x,pt-=a.x,ht+=a.y,At+=a.y,k=this._camera.getCameraToClipOrthographic(pt,xt,At,ht,this._nearZ,this._farZ),((Rt,cn,wn,ln)=>{for(let Ln=0;Ln<16;Ln++)Rt[Ln]=Gc(cn[Ln],wn[Ln],ln)})(k,k,z,Kc(this.pitch>=15?1:this.pitch/15))}else k=z;const Q=i.a6.mat4.mul([],z,B);let j=i.a6.mat4.mul([],k,B);if(this.projection.isReprojectedInTileSpace){const ht=this.locationCoordinate(this.center),xt=i.a6.mat4.identity([]);i.a6.mat4.translate(xt,xt,[ht.x*this.worldSize,ht.y*this.worldSize,0]),i.a6.mat4.multiply(xt,xt,i.bY(this)),i.a6.mat4.translate(xt,xt,[-ht.x*this.worldSize,-ht.y*this.worldSize,0]),i.a6.mat4.multiply(j,j,xt),i.a6.mat4.multiply(Q,Q,xt),this.inverseAdjustmentMatrix=i.bZ(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];if(this.mercatorMatrix=i.a6.mat4.scale([],j,[this.worldSize,this.worldSize,this.worldSize/x,1]),this.projMatrix=j,this.invProjMatrix=i.a6.mat4.invert(new Float64Array(16),this.projMatrix),u){const ht=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,1/0);ht[8]=2*-a.x/this.width,ht[9]=2*a.y/this.height,this.expandedFarZProjMatrix=i.a6.mat4.mul([],ht,B)}else this.expandedFarZProjMatrix=this.projMatrix;const W=i.a6.mat4.invert([],k);this.frustumCorners=i.b_.fromInvProjectionMatrix(W,this.horizonLineFromTop(),this.height),this.cameraFrustum=i.bN.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!u);const J=new Float32Array(16);i.a6.mat4.identity(J),i.a6.mat4.scale(J,J,[1,-1,1]),i.a6.mat4.rotateX(J,J,this._pitch),i.a6.mat4.rotateZ(J,J,this.angle);const re=i.a6.mat4.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=i.a6.mat4.clone(re);const de=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;re[8]=2*-a.x/this.width,re[9]=2*(a.y+de)/this.height,this.skyboxMatrix=i.a6.mat4.multiply(J,re,J);const me=this.point,_e=me.x,xe=me.y,ze=this.width%2/2,Qe=this.height%2/2,Ue=Math.cos(this.angle),Xe=Math.sin(this.angle),qe=_e-Math.round(_e)+Ue*ze+Xe*Qe,ut=xe-Math.round(xe)+Ue*Qe+Xe*ze,it=new Float64Array(j);if(i.a6.mat4.translate(it,it,[qe>.5?qe-1:qe,ut>.5?ut-1:ut,0]),this.alignedProjMatrix=it,j=i.a6.mat4.create(),i.a6.mat4.scale(j,j,[this.width/2,-this.height/2,1]),i.a6.mat4.translate(j,j,[1,-1,0]),this.labelPlaneMatrix=j,j=i.a6.mat4.create(),i.a6.mat4.scale(j,j,[1,-1,1]),i.a6.mat4.translate(j,j,[-1,-1,0]),i.a6.mat4.scale(j,j,[2/this.width,2/this.height,1]),this.glCoordMatrix=j,this.pixelMatrix=i.a6.mat4.multiply(new Float64Array(16),this.labelPlaneMatrix,Q),this._calcFogMatrices(),this._distanceTileDataCache={},j=i.a6.mat4.invert(new Float64Array(16),this.pixelMatrix),!j)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=j,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=i.b$(this);const ht=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=i.a6.vec3.transformMat4(ht,ht,B),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=j;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={},this._expandedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const a=this.cameraWorldSizeForFog,u=this.cameraPixelsPerMeter,g=this._camera.position,v=1/this.height/this._pixelsPerMercatorPixel,x=[a,a,u];i.a6.vec3.scale(x,x,v),i.a6.vec3.scale(g,g,-1),i.a6.vec3.multiply(g,g,x);const B=i.a6.mat4.create();i.a6.mat4.translate(B,B,g),i.a6.mat4.scale(B,B,x),this.mercatorFogMatrix=B,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(a,u,v)}_computeCameraPosition(a){const u=(a=a||this.pixelsPerMeter)/this.pixelsPerMeter,g=this._camera.forward(),v=this.point,x=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*u-a/this.worldSize*this._centerAltitude;return[v.x/this.worldSize-g[0]*x,v.y/this.worldSize-g[1]*x,a/this.worldSize*this._centerAltitude-g[2]*x]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(a){const u=this._maxCameraBoundsDistance()*Math.cos(this._pitch),g=this._camera.position[2],v=a[2];let x=1;this.projection.wrap&&(this.center=this.center.wrap()),v>0&&(x=Math.min((u-g)/v,1)),this._camera.position=i.a6.vec3.scaleAndAdd([],this._camera.position,a,x),this._updateStateFromCamera()}_updateStateFromCamera(){const a=this._camera.position,u=this._camera.forward(),{pitch:g,bearing:v}=this._camera.getPitchBearing(),x=i.bD(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,B=this._mercatorZfromZoom(this._maxZoom)*Math.cos(i.bB(this._maxPitch)),k=Math.max((a[2]-x)/Math.cos(g),B),z=this._zoomFromMercatorZ(k);i.a6.vec3.scaleAndAdd(a,a,u,k),this._pitch=i.ap(g,i.bB(this.minPitch),i.bB(this.maxPitch)),this.angle=i.bA(v,-Math.PI,Math.PI),this._setZoom(i.ap(z,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new i.a5(a[0],a[1],a[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(a){return Math.pow(2,a)*this.tileSize}_mercatorZfromZoom(a){return this.cameraToCenterDistance/this._worldSizeFromZoom(a)}_minimumHeightOverTerrain(){const a=Math.min(this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom,this._maxZoom)+4;return this._mercatorZfromZoom(a)}_zoomFromMercatorZ(a){return this.scaleZoom(this.cameraToCenterDistance/(a*this.tileSize))}zoomFromMercatorZAdjusted(a){let u=0,g=i.bU,v=0,x=1/0;for(;g-u>1e-6&&g>u;){const B=u+.5*(g-u),k=this.tileSize*Math.pow(2,B),z=this.getCameraToCenterDistance(this.projection,B,k),Q=this.scaleZoom(z/(a*this.tileSize)),j=Math.abs(B-Q);j<x&&(x=j,v=B),B<Q?u=B:g=B}return v}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(i.w("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(a,u){const g=Math.min(a.x,u.x),v=Math.max(a.x,u.x),x=Math.min(a.y,u.y),B=Math.max(a.y,u.y);if(x<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const k=[new i.P(g,x),new i.P(v,B),new i.P(g,B),new i.P(v,x)],z=this.renderWorldCopies?-3:0,Q=this.renderWorldCopies?4:1;for(const j of k){const W=this.pointRayIntersection(j);if(W.t<0)return!0;const J=this.rayIntersectionCoordinate(W);if(J.x<z||J.y<0||J.x>Q||J.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+i.c0(this.fovAboveCenter)>88||this.anyCornerOffEdge(new i.P(0,0),new i.P(this.width,this.height))}zoomDeltaToMovement(a,u){const g=i.a6.vec3.length(i.a6.vec3.sub([],this._camera.position,a)),v=this._zoomFromMercatorZ(g)+u;return g-this._mercatorZfromZoom(v)}getCameraPoint(){if(this.projection.name==="globe"){const a=function([u,g,v],x){const B=[u,g,v,1];i.a6.vec4.transformMat4(B,B,x);const k=B[3]=Math.max(B[3],1e-6);return B[0]/=k,B[1]/=k,B[2]/=k,B}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new i.P(a[0],a[1])}{const a=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new i.P(0,a))}}getCameraToCenterDistance(a,u=this.zoom,g=this.worldSize){const v=i.bX(a,u,this.width,this.height,1024),x=a.pixelSpaceConversion(this.center.lat,g,v);let B=.5/Math.tan(.5*this._fov)*this.height*x;return this.isOrthographic&&(B=Gc(1,B,Kc(this.pitch>=15?1:this.pitch/15))),B}getWorldToCameraMatrix(){const a=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&i.a6.mat4.multiply(a,a,this.globeMatrix),a}getFrustum(a){return i.bN.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,a,this.projection.zAxisUnit==="meters")}}const rs=(m,a)=>{if(a>0&&m.terrain&&i.w("Cutoff is currently disabled on terrain"),a<=0||m.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,1]}};const u=m.transform,g=Math.max(Math.abs(u._zoom-(m.minCutoffZoom-1)),1),v=u.isLODDisabled(!1)?i.a7(60,45,u.pitch):i.a7(30,15,u.pitch),x=u._farZ-u._nearZ,B=a*u.height,k=((1-(z=v))*u.cameraToCenterDistance+z*(u._farZ+B))*g;var z;return{shouldRenderCutoff:v<1,uniformValues:{u_cutoff_params:[u._nearZ,u._farZ,(k-u._nearZ)/x,(k-B-u._nearZ)/x]}}},ho={cascadeCount:2,normalOffset:3,shadowMapResolution:2048};class Ju{constructor(a,u){this.aabb=a,this.lastCascade=u}}class Nn{add(a,u){const g=this.receivers[a.key];g!==void 0?(g.aabb.min[0]=Math.min(g.aabb.min[0],u.min[0]),g.aabb.min[1]=Math.min(g.aabb.min[1],u.min[1]),g.aabb.min[2]=Math.min(g.aabb.min[2],u.min[2]),g.aabb.max[0]=Math.max(g.aabb.max[0],u.max[0]),g.aabb.max[1]=Math.max(g.aabb.max[1],u.max[1]),g.aabb.max[2]=Math.max(g.aabb.max[2],u.max[2])):this.receivers[a.key]=new Ju(u,null)}clear(){this.receivers={}}get(a){return this.receivers[a.key]}computeRequiredCascades(a,u,g){const v=i.c9.fromPoints(a.points);let x=0;for(const B in this.receivers){const k=this.receivers[B];if(!k||!v.intersectsAabb(k.aabb))continue;k.aabb.min=v.closestPoint(k.aabb.min),k.aabb.max=v.closestPoint(k.aabb.max);const z=k.aabb.getCorners();for(let Q=0;Q<g.length;Q++){let j=!0;for(const W of z){const J=[W[0]*u,W[1]*u,W[2]];if(i.a6.vec3.transformMat4(J,J,g[Q].matrix),J[0]<-1||J[0]>1||J[1]<-1||J[1]>1){j=!1;break}}if(k.lastCascade=Q,x=Math.max(x,Q),j)break}}return x+1}}class Cd{constructor(a){this.painter=a,this._enabled=!1,this._shadowLayerCount=0,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new Nn,this._depthMode=new Le(a.context.gl.LEQUAL,Le.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this._forceDisable=!1,this.useNormalOffset=!1,a.tp.registerParameter(this,["Shadows"],"_forceDisable",{label:"forceDisable"},()=>{this.painter.style.map.triggerRepaint()}),a.tp.registerParameter(ho,["Shadows"],"cascadeCount",{min:1,max:2,step:1}),a.tp.registerParameter(ho,["Shadows"],"normalOffset",{min:0,max:10,step:.05}),a.tp.registerParameter(ho,["Shadows"],"shadowMapResolution",{min:32,max:2048,step:32}),a.tp.registerBinding(this,["Shadows"],"_numCascadesToRender",{readonly:!0,label:"numCascadesToRender"})}destroy(){for(const a of this._cascades)a.texture.destroy(),a.framebuffer.destroy();this._cascades=[]}updateShadowParameters(a,u){const g=this.painter;if(this._enabled=!1,this._shadowLayerCount=0,this._receivers.clear(),!u||!u.properties)return;const v=u.properties.get("shadow-intensity");if(!u.shadowsEnabled()||v<=0||(this._shadowLayerCount=g.style.order.reduce((de,me)=>{const _e=g.style._mergedLayers[me];return de+(_e.hasShadowPass()&&!_e.isHidden(a.zoom)?1:0)},0),this._enabled=this._shadowLayerCount>0,!this.enabled))return;const x=g.context,B=ho.shadowMapResolution,k=ho.shadowMapResolution;if(this._cascades.length===0||ho.shadowMapResolution!==this._cascades[0].texture.size[0]){this._cascades=[];for(let de=0;de<ho.cascadeCount;++de){const me=g._shadowMapDebug,_e=x.gl,xe=x.createFramebuffer(B,k,me,"texture"),ze=new i.T(x,{width:B,height:k,data:null},_e.DEPTH_COMPONENT16);if(xe.depthAttachment.set(ze.texture),me){const Qe=new i.T(x,{width:B,height:k,data:null},_e.RGBA8);xe.colorAttachment.set(Qe.texture)}this._cascades.push({framebuffer:xe,texture:ze,matrix:[],far:0,boundingSphereRadius:0,frustum:new i.bN,scale:0})}}this.shadowDirection=Ed(u);let z=0;if(a.elevation){const de=a.elevation,me=[1e4,-1e4];de.visibleDemTiles.filter(_e=>_e.dem).forEach(_e=>{const xe=_e.dem.tree;me[0]=Math.min(me[0],xe.minimums[0]),me[1]=Math.max(me[1],xe.maximums[0])}),me[0]!==1e4&&(z=(me[1]-me[0])*de.exaggeration())}const Q=1.5*a.cameraToCenterDistance,j=3*Q,W=new Float64Array(16);for(let de=0;de<this._cascades.length;++de){const me=this._cascades[de];let _e=a.height/50,xe=1;ho.cascadeCount===1?xe=j:de===0?xe=Q:(_e=Q,xe=j);const[ze,Qe]=Uh(a,this.shadowDirection,_e,xe,ho.shadowMapResolution,z);me.scale=a.scale,me.matrix=ze,me.boundingSphereRadius=Qe,i.a6.mat4.invert(W,me.matrix),me.frustum=i.bN.fromInvProjectionMatrix(W,1,0,!0),me.far=xe}const J=this._cascades.length-1;this._uniformValues.u_fade_range=[.75*this._cascades[J].far,this._cascades[J].far],this._uniformValues.u_shadow_intensity=v,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=1/ho.shadowMapResolution,this._uniformValues.u_shadow_map_resolution=ho.shadowMapResolution,this._uniformValues.u_shadowmap_0=Jo.ShadowMap0,this._uniformValues.u_shadowmap_1=Jo.ShadowMap0+1,this._groundShadowTiles=g.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});const re=g.transform.elevation;for(const de of this._groundShadowTiles){let me={min:0,max:0};if(re){const _e=re.getMinMaxForTile(de);_e&&(me=_e)}this.addShadowReceiver(de.toUnwrapped(),me.min,me.max)}}get enabled(){return this._enabled&&!this._forceDisable}set enabled(a){this._enabled=a}drawShadowPass(a,u){if(!this.enabled)return;const g=this.painter,v=g.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(g.transform.getFrustum(0),g.transform.worldSize,this._cascades),v.viewport.set([0,0,ho.shadowMapResolution,ho.shadowMapResolution]);for(let x=0;x<this._numCascadesToRender;++x){g.currentShadowCascade=x,v.bindFramebuffer.set(this._cascades[x].framebuffer.framebuffer),v.clear({color:i.bz.white,depth:1});for(const B of a.order){const k=a._mergedLayers[B];if(!k.hasShadowPass()||k.isHidden(g.transform.zoom))continue;const z=a.getLayerSourceCache(k),Q=z?u[z.id]:void 0;(k.type==="model"||Q&&Q.length)&&g.renderLayer(g,z,k,Q)}}g.currentShadowCascade=0}drawGroundShadows(){if(!this.enabled)return;const a=this.painter,u=a.style,g=a.context,v=u.directionalLight,x=u.ambientLight;if(!v||!x)return;const B=[],k=rs(a,a.longestCutoffRange);k.shouldRenderCutoff&&B.push("RENDER_CUTOFF");const z=eh(u,v,x),Q=new Le(g.gl.LEQUAL,Le.ReadOnly,a.depthRangeFor3D);for(const j of this._groundShadowTiles){const W=j.toUnwrapped(),J=a.isTileAffectedByFog(j),re=a.getOrCreateProgram("groundShadow",{defines:B,overrideFog:J});this.setupShadows(W,re),a.uploadCommonUniforms(g,re,W,null,k);const de={u_matrix:a.transform.calculateProjMatrix(W),u_ground_shadow_factor:z};re.draw(a,g.gl.TRIANGLES,Q,Qt.disabled,fe.multiply,ir.disabled,de,"ground_shadow",a.tileExtentBuffer,a.quadTriangleIndexBuffer,a.tileExtentSegments,{},a.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?fe.unblended:fe.disabled}getShadowPassDepthMode(){return this._depthMode}getShadowCastingLayerCount(){return this._shadowLayerCount}calculateShadowPassMatrixFromTile(a){const u=this.painter.transform,g=u.calculatePosMatrix(a,u.worldSize);return i.a6.mat4.multiply(g,this._cascades[this.painter.currentShadowCascade].matrix,g),Float32Array.from(g)}calculateShadowPassMatrixFromMatrix(a){return i.a6.mat4.multiply(a,this._cascades[this.painter.currentShadowCascade].matrix,a),Float32Array.from(a)}setupShadows(a,u,g,v=0){if(!this.enabled)return;const x=this.painter.transform,B=this.painter.context,k=B.gl,z=this._uniformValues,Q=new Float64Array(16),j=x.calculatePosMatrix(a,x.worldSize);for(let W=0;W<this._cascades.length;W++)i.a6.mat4.multiply(Q,this._cascades[W].matrix,j),z[W===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(Q),B.activeTexture.set(k.TEXTURE0+Jo.ShadowMap0+W),this._cascades[W].texture.bind(k.NEAREST,k.CLAMP_TO_EDGE);if(this.useNormalOffset=!!g,this.useNormalOffset){const W=i.c8(a.canonical),J=2/x.tileSize*i.ab/ho.shadowMapResolution,re=J*this._cascades[0].boundingSphereRadius,de=J*this._cascades[this._cascades.length-1].boundingSphereRadius,me=(g==="vector-tile"?1:3)/Math.pow(2,v-a.canonical.z-(1-x.zoom+Math.floor(x.zoom)));z.u_shadow_normal_offset=[W,re*me,de*me],z.u_shadow_bias=[6e-5,.0012,.012]}else z.u_shadow_bias=[36e-5,.0012,.012];u.setShadowUniformValues(B,z)}setupShadowsFromMatrix(a,u,g=!1){if(!this.enabled)return;const v=this.painter.context,x=v.gl,B=this._uniformValues,k=new Float64Array(16);for(let z=0;z<ho.cascadeCount;z++)i.a6.mat4.multiply(k,this._cascades[z].matrix,a),B[z===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(k),v.activeTexture.set(x.TEXTURE0+Jo.ShadowMap0+z),this._cascades[z].texture.bind(x.NEAREST,x.CLAMP_TO_EDGE);if(this.useNormalOffset=g,g){const z=ho.normalOffset;B.u_shadow_normal_offset=[1,z,z],B.u_shadow_bias=[6e-5,.0012,.012]}else B.u_shadow_bias=[36e-5,.0012,.012];u.setShadowUniformValues(v,B)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(a,u,g,v){if(v[2]>=0)return{};const x=function(z,Q,j){const W=j/(1<<z.canonical.z);return new i.c9([z.canonical.x*W+z.wrap*j,z.canonical.y*W+z.wrap*j,0],[(z.canonical.x+1)*W+z.wrap*j,(z.canonical.y+1)*W+z.wrap*j,Q])}(a,u,g).getCorners(),B=u/-v[2];v[0]<0?(i.a6.vec3.add(x[0],x[0],[v[0]*B,0,0]),i.a6.vec3.add(x[3],x[3],[v[0]*B,0,0])):v[0]>0&&(i.a6.vec3.add(x[1],x[1],[v[0]*B,0,0]),i.a6.vec3.add(x[2],x[2],[v[0]*B,0,0])),v[1]<0?(i.a6.vec3.add(x[0],x[0],[0,v[1]*B,0]),i.a6.vec3.add(x[1],x[1],[0,v[1]*B,0])):v[1]>0&&(i.a6.vec3.add(x[2],x[2],[0,v[1]*B,0]),i.a6.vec3.add(x[3],x[3],[0,v[1]*B,0]));const k={};return k.vertices=x,k.planes=[Ys(x[1],x[0],x[4]),Ys(x[2],x[1],x[5]),Ys(x[3],x[2],x[6]),Ys(x[0],x[3],x[7])],k}addShadowReceiver(a,u,g){this._receivers.add(a,i.c9.fromTileIdAndHeight(a,u,g))}getMaxCascadeForTile(a){const u=this._receivers.get(a);return u&&u.lastCascade?u.lastCascade:0}}function Ys(m,a,u){const g=i.a6.vec3.sub([],u,a),v=i.a6.vec3.sub([],m,a),x=i.a6.vec3.cross([],g,v),B=i.a6.vec3.length(x);return B===0?[0,0,1,0]:(i.a6.vec3.scale(x,x,1/B),[x[0],x[1],x[2],-i.a6.vec3.dot(x,a)])}function Ed(m){const a=m.properties.get("direction"),u=i.c7(a.x,a.y,a.z);u[2]=i.ap(u[2],0,75);const g=i.ca([u[0],u[1],u[2]]);return i.a6.vec3.fromValues(g.x,g.y,g.z)}function eh(m,a,u){const g=a.properties.get("color"),v=a.properties.get("intensity"),x=a.properties.get("direction"),B=[x.x,x.y,x.z],k=u.properties.get("color"),z=u.properties.get("intensity"),Q=Math.max(i.a6.vec3.dot([0,0,1],B),0),j=[0,0,0];i.a6.vec3.scale(j,k.toRenderColor(m.getLut(a.scope)).toArray01Linear().slice(0,3),z);const W=[0,0,0];return i.a6.vec3.scale(W,g.toRenderColor(m.getLut(u.scope)).toArray01Linear().slice(0,3),Q*v),i.cb([j[0]>0?j[0]/(j[0]+W[0]):0,j[1]>0?j[1]/(j[1]+W[1]):0,j[2]>0?j[2]/(j[2]+W[2]):0])}function Uh(m,a,u,g,v,x){const B=m.zoom,k=m.scale,z=m.worldSize,Q=1/z,j=m.aspect,W=Math.sqrt(1+j*j)*Math.tan(.5*m.fovX),J=W*W,re=g-u,de=g+u;let me,_e;J>re/de?(me=g,_e=g*W):(me=.5*de*(1+J),_e=.5*Math.sqrt(re*re+2*(g*g+u*u)*J+de*de*J*J));const xe=m.projection.pixelsPerMeter(m.center.lat,z),ze=m._camera.getCameraToWorldMercator(),Qe=[0,0,-me*Q];i.a6.vec3.transformMat4(Qe,Qe,ze);let Ue=_e*Q;const Xe=m._edgeInsets;if(!(Xe.left===0&&Xe.top===0&&Xe.right===0&&Xe.bottom===0||Xe.left===Xe.right&&Xe.top===Xe.bottom)){const Rn=m._camera.getWorldToCamera(m.worldSize,m.projection.zAxisUnit==="meters"?xe:1),Mn=m._camera.getCameraToClipPerspective(m._fov,m.width/m.height,u,g);Mn[8]=2*-m.centerOffset.x/m.width,Mn[9]=2*m.centerOffset.y/m.height;const bn=new Float64Array(16);i.a6.mat4.mul(bn,Mn,Rn);const Cn=new Float64Array(16);i.a6.mat4.invert(Cn,bn);const vr=i.bN.fromInvProjectionMatrix(Cn,z,B,!0);for(const Qn of vr.points){const rr=((qe=Qn)[0]/=k,qe[1]/=k,qe[2]=i.bD(qe[2],m._center.lat),qe);Ue=Math.max(Ue,i.a6.vec3.len(i.a6.vec3.subtract([],Qe,rr)))}}var qe;Ue*=v/(v-1);const ut=Math.acos(a[2]),it=Math.atan2(-a[0],-a[1]),ht=new ys;ht.position=Qe,ht.setPitchBearing(ut,it);const xt=ht.getWorldToCamera(z,xe),pt=Ue*z,At=Math.min(m._mercatorZfromZoom(17)*z*-2,-2*pt),Rt=ht.getCameraToClipOrthographic(-pt,pt,-pt,pt,At,(pt+x*xe)/a[2]),cn=new Float64Array(16);i.a6.mat4.multiply(cn,Rt,xt);const wn=i.a6.vec3.fromValues(Math.floor(1e6*Qe[0])/1e6*z,Math.floor(1e6*Qe[1])/1e6*z,0),ln=.5*v,Ln=[0,0,0];i.a6.vec3.transformMat4(Ln,wn,cn),i.a6.vec3.scale(Ln,Ln,ln);const kt=[Math.floor(Ln[0]),Math.floor(Ln[1]),Math.floor(Ln[2])],mn=[0,0,0];i.a6.vec3.sub(mn,Ln,kt),i.a6.vec3.scale(mn,mn,-1/ln);const An=new Float64Array(16);return i.a6.mat4.identity(An),i.a6.mat4.translate(An,An,mn),i.a6.mat4.multiply(cn,An,cn),[cn,pt]}class zs extends i.E{constructor(a){super(),this.requestManager=a,this.models={"":{}},this.numModelsLoading={}}loadModel(a,u){return i.aG(this.requestManager.transformRequest(u,i.R.Model).url).then(g=>{if(!g)return;const v=i.aH(g),x=new i.aI(a,void 0,void 0,v);return x.computeBoundsAndApplyParent(),x}).catch(g=>{if(g&&g.status===404)return null;this.fire(new i.t(new Error(`Could not load model ${a} from ${u}: ${g.message}`)))})}load(a,u){this.models[u]||(this.models[u]={});const g=Object.keys(a);this.numModelsLoading[u]=(this.numModelsLoading[u]||0)+g.length;const v=[];for(const x of g)v.push(this.loadModel(x,a[x]));Promise.allSettled(v).then(x=>{for(let B=0;B<x.length;B++){const{status:k,value:z}=x[B];k==="fulfilled"&&z&&(this.models[u][g[B]]={model:z,numReferences:1})}this.numModelsLoading[u]-=g.length,this.fire(new i.x("data",{dataType:"style"}))}).catch(x=>{this.fire(new i.t(new Error(`Could not load models: ${x.message}`)))})}isLoaded(){for(const a in this.numModelsLoading)if(this.numModelsLoading[a]>0)return!1;return!0}hasModel(a,u){return!!this.getModel(a,u)}getModel(a,u){return this.models[u]||(this.models[u]={}),this.models[u][a]?this.models[u][a].model:void 0}addModel(a,u,g){this.models[g]||(this.models[g]={}),this.hasModel(a,g)&&this.models[g][a].numReferences++,this.load({[a]:this.requestManager.normalizeModelURL(u)},g)}addModels(a,u){this.models[u]||(this.models[u]={});const g={};for(const v in a)this.models[u][v]={},g[v]=this.requestManager.normalizeModelURL(a[v]);this.load(g,u)}addModelsFromBucket(a,u){this.models[u]||(this.models[u]={});const g={};for(const v of a)this.hasModel(v,u)?this.models[u][v].numReferences++:g[v]=this.requestManager.normalizeModelURL(v);this.load(g,u)}removeModel(a,u){if(this.models[u]&&this.models[u][a]&&(this.models[u][a].numReferences--,this.models[u][a].numReferences===0)){const g=this.models[u][a].model;delete this.models[u][a],g.destroy()}}listModels(a){return this.models[a]||(this.models[a]={}),Object.keys(this.models[a])}upload(a,u){this.models[u]||(this.models[u]={});for(const g in this.models[u])this.models[u][g].model&&this.models[u][g].model.upload(a.context)}}const th=new i.a0({data:new i.a1(i._.colorTheme.data)}),Oa=(m,a)=>wt(m,a&&a.filter(u=>u.identifier!=="source.canvas")),Nh=i.ar(ei,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection","setCamera","addImport","removeImport","updateImport"]),Cl=i.ar(ei,["setCenter","setZoom","setBearing","setPitch"]),nh={version:8,layers:[],sources:{}},qa={duration:300,delay:0};class Wo extends i.E{constructor(a,u={}){super(),this.map=a,this.scope=u.scope||"",this.globalId=null,this.fragments=[],this.importDepth=u.importDepth||0,this.importsCache=u.importsCache||new Map,this.resolvedImports=u.resolvedImports||new Set,this.transition=i.l({},qa),this._buildingIndex=new bl(this),this.crossTileSymbolIndex=new N,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._clipLayerPresent=!1,this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._changes=u.styleChanges||new Je,this.dispatcher=u.dispatcher?u.dispatcher:new i.cd(i.ce(),this),u.imageManager?this.imageManager=u.imageManager:(this.imageManager=new Re,this.imageManager.setEventedParent(this)),this.imageManager.createScope(this.scope),this.glyphManager=u.glyphManager?u.glyphManager:new i.cf(a._requestManager,u.localFontFamily?i.cg.all:u.localIdeographFontFamily?i.cg.ideographs:i.cg.none,u.localFontFamily||u.localIdeographFontFamily),u.modelManager?this.modelManager=u.modelManager:(this.modelManager=new zs(a._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._order=[],this._markersNeedUpdate=!1,this._styleColorTheme={lut:null,lutLoading:!1,lutLoadingCorrelationID:0,colorTheme:null},this._styleColorThemeForScope={},this.options=u.configOptions?u.configOptions:new Map,this._configDependentLayers=u.configDependentLayers?u.configDependentLayers:new Set,this._config=u.config,this._initialConfig=u.initialConfig,this.dispatcher.broadcast("setReferrer",i.ch());const g=this;this._rtlTextPluginCallback=Wo.registerForPluginStateChange(v=>{g.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:v.pluginStatus,pluginURL:v.pluginURL},(x,B)=>{if(i.ci(x),B&&B.every(k=>k))for(const k in g._sourceCaches){const z=g._sourceCaches[k],Q=z.getSource().type;Q!=="vector"&&Q!=="geojson"||z.reload()}})}),this.on("data",v=>{if(v.dataType!=="source"||v.sourceDataType!=="metadata")return;const x=this.getOwnSource(v.sourceId);if(x&&x.vectorLayerIds)for(const B in this._layers){const k=this._layers[B];k.source===x.id&&this._validateLayer(k)}})}load(a){return a?(typeof a=="string"?this.loadURL(a):this.loadJSON(a),this):this}_getGlobalId(a){if(!a)return null;if(typeof a=="string"){if(i.f(a))return a;const u=i.cj(a);if(!u.startsWith("http"))try{return new URL(u,location.href).toString()}catch{return u}return u}return`json://${i.ck(JSON.stringify(a))}`}_diffStyle(a,u,g){this.globalId=this._getGlobalId(a);const v=(x,B)=>{try{B(null,this.setState(x,g))}catch(k){B(k,!1)}};if(typeof a=="string"){const x=this.map._requestManager.normalizeStyleURL(a),B=this.map._requestManager.transformRequest(x,i.R.Style);i.n(B,(k,z)=>{k?this.fire(new i.t(k)):z&&v(z,u)})}else typeof a=="object"&&v(a,u)}loadURL(a,u={}){this.fire(new i.x("dataloading",{dataType:"style"}));const g=typeof u.validate=="boolean"?u.validate:!i.f(a);this.globalId=this._getGlobalId(a),a=this.map._requestManager.normalizeStyleURL(a,u.accessToken),this.resolvedImports.add(a);const v=this.importsCache.get(a);if(v)return this._load(v,g);const x=this.map._requestManager.transformRequest(a,i.R.Style);this._request=i.n(x,(B,k)=>{if(this._request=null,B)this.fire(new i.t(B));else if(k)return this.importsCache.set(a,k),this._load(k,g)})}loadJSON(a,u={}){this.fire(new i.x("dataloading",{dataType:"style"})),this.globalId=this._getGlobalId(a),this._request=i.q.frame(()=>{this._request=null,this._load(a,u.validate!==!1)})}loadEmpty(){this.fire(new i.x("dataloading",{dataType:"style"})),this._load(nh,!1)}_loadImports(a,u,g){if(this.importDepth>=4)return i.w("Style doesn't support nesting deeper than 5"),Promise.resolve();const v=[];for(const x of a){const B=this._createFragmentStyle(x),k=new Promise(j=>{B.once("style.import.load",j),B.once("error",j)}).then(()=>this.mergeAll());if(v.push(k),this.resolvedImports.has(x.url)){B.loadEmpty();continue}const z=x.data||this.importsCache.get(x.url);z?(B.loadJSON(z,{validate:u}),this._isInternalStyle(z)&&(B.globalId=null)):x.url?B.loadURL(x.url,{validate:u}):B.loadEmpty();const Q={style:B,id:x.id,config:x.config};if(g){const j=this.fragments.findIndex(({id:W})=>W===g);this.fragments=this.fragments.slice(0,j).concat(Q).concat(this.fragments.slice(j))}else this.fragments.push(Q)}return Promise.allSettled(v)}getImportGlobalIds(a=this,u=new Set){for(const g of a.fragments)g.style.globalId&&u.add(g.style.globalId),this.getImportGlobalIds(g.style,u);return[...u.values()]}_createFragmentStyle(a){const u=this.scope?i.av(a.id,this.scope):a.id;let g;const v=this._initialConfig&&this._initialConfig[u];(a.config||v)&&(g=i.l({},a.config,v));const x=new Wo(this.map,{scope:u,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager,config:g,configOptions:this.options,configDependentLayers:this._configDependentLayers});return x.setEventedParent(this.map,{style:x}),x}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.updateConfigDependencies(),this.map._triggerCameraUpdate(this.camera),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),this._shouldPrecompile=this.map._precompilePrograms&&this.isRootStyle()}_isInternalStyle(a){return this.isRootStyle()&&(a.fragment||!!a.schema&&a.fragment!==!1)}_load(a,u){const g=a.schema;if(this._isInternalStyle(a)){const B=i.l({},nh,{imports:[{id:"basemap",data:a,url:""}]});return void this._load(B,u)}if(this.updateConfig(this._config,g),u&&Oa(this,ns(a)))return;this._loaded=!0,this.stylesheet=i.cl(a);const v=()=>{for(const Q in a.sources)this.addSource(Q,a.sources[Q],{validate:!1,isInitialLoad:!0});a.sprite?this._loadSprite(a.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),this.glyphManager.setURL(a.glyphs,this.scope);const B=$c(this.stylesheet.layers);if(this._order=B.map(Q=>Q.id),this.stylesheet.light&&i.w("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights)if(this.stylesheet.lights.length===1&&this.stylesheet.lights[0].type==="flat"){const Q=this.stylesheet.lights[0];this.light=new St(Q.properties,Q.id)}else this.setLights(this.stylesheet.lights);this.light||(this.light=new St(this.stylesheet.light)),this._layers={},this._serializedLayers={};for(const Q of B){const j=i.cq(Q,this.scope,this._styleColorTheme.lut,this.options);j.configDependencies.size!==0&&this._configDependentLayers.add(j.fqid),j.setEventedParent(this,{layer:{id:j.id}}),this._layers[j.id]=j,this._serializedLayers[j.id]=j.serialize();const W=this.getOwnLayerSourceCache(j),J=!!this.directionalLight&&this.directionalLight.shadowsEnabled();W&&j.canCastShadows()&&J&&(W.castsShadows=!0)}this.stylesheet.models&&this.modelManager.addModels(this.stylesheet.models,this.scope);const k=this.stylesheet.terrain;k&&(this.checkCanvasFingerprintNoise(),this.disableElevatedTerrain||this.terrainSetForDrapingOnly()||this._createTerrain(k,1)),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.fire(new i.x("data",{dataType:"style"}));const z=this.isRootStyle();a.imports?this._loadImports(a.imports,u).then(()=>{this._reloadImports(),this.fire(new i.x(z?"style.load":"style.import.load"))}):(this._reloadImports(),this.fire(new i.x(z?"style.load":"style.import.load")))},x=this.stylesheet["color-theme"];if(this._styleColorTheme.colorTheme=x,x){const B=this._evaluateColorThemeData(x);this._loadColorTheme(B).then(()=>{v()}).catch(k=>{i.w(`Couldn't load color theme from the stylesheet: ${k}`),v()})}else this._styleColorTheme.lut=null,v()}isRootStyle(){return this.importDepth===0}mergeAll(){let a,u,g,v,x,B,k,z;const Q={};this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(j=>{if(j.stylesheet){if(j.light!=null&&(a=j.light),j.stylesheet.lights)for(const W of j.stylesheet.lights)W.type==="ambient"&&j.ambientLight!=null&&(u=j.ambientLight),W.type==="directional"&&j.directionalLight!=null&&(g=j.directionalLight);v=this._prioritizeTerrain(v,j.terrain,j.stylesheet.terrain),j.stylesheet.fog&&j.fog!=null&&(x=j.fog),j.stylesheet.camera!=null&&(z=j.stylesheet.camera),j.stylesheet.projection!=null&&(B=j.stylesheet.projection),j.stylesheet.transition!=null&&(k=j.stylesheet.transition),Q[j.scope]=j._styleColorTheme}}),this.light=a,this.ambientLight=u,this.directionalLight=g,this.fog=x,this._styleColorThemeForScope=Q,v===null?delete this.terrain:this.terrain=v,this.camera=z||{"camera-projection":"perspective"},this.projection=B||{name:"mercator"},this.transition=i.l({},qa,k),this.mergeSources(),this.mergeLayers()}forEachFragmentStyle(a){const u=g=>{for(const v of g.fragments)u(v.style);a(g)};u(this)}_prioritizeTerrain(a,u,g){const v=a&&a.drapeRenderMode===0;return g===null?u&&u.drapeRenderMode===0?u:v?a:null:u!=null&&(!a||v||u&&u.drapeRenderMode===1)?u:a}mergeTerrain(){let a;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(u=>{a=this._prioritizeTerrain(a,u.terrain,u.stylesheet.terrain)}),a===null?delete this.terrain:this.terrain=a}mergeProjection(){let a;this.forEachFragmentStyle(u=>{u.stylesheet.projection!=null&&(a=u.stylesheet.projection)}),this.projection=a||{name:"mercator"}}mergeSources(){const a={},u={},g={};this.forEachFragmentStyle(v=>{for(const x in v._sourceCaches){const B=i.av(x,v.scope);a[B]=v._sourceCaches[x]}for(const x in v._otherSourceCaches){const B=i.av(x,v.scope);u[B]=v._otherSourceCaches[x]}for(const x in v._symbolSourceCaches){const B=i.av(x,v.scope);g[B]=v._symbolSourceCaches[x]}}),this._mergedSourceCaches=a,this._mergedOtherSourceCaches=u,this._mergedSymbolSourceCaches=g}mergeLayers(){const a={},u=[],g={};this._mergedSlots=[],this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this.forEachFragmentStyle(x=>{for(const B of x._order){const k=x._layers[B];if(k.type==="slot"){const z=i.cm(B);if(a[z])continue;a[z]=[]}k.slot&&a[k.slot]?a[k.slot].push(k):u.push(k)}}),this._mergedOrder=[];const v=(x=[])=>{for(const B of x)if(B.type==="slot"){const k=i.cm(B.id);a[k]&&v(a[k]),this._mergedSlots.push(k)}else{const k=i.av(B.id,B.scope);this._mergedOrder.push(k),g[k]=B,B.is3D()&&(this._has3DLayers=!0),B.type==="circle"&&(this._hasCircleLayers=!0),B.type==="symbol"&&(this._hasSymbolLayers=!0),B.type==="clip"&&(this._clipLayerPresent=!0)}};v(u),this._mergedOrder.sort((x,B)=>{const k=g[x],z=g[B];return k.hasInitialOcclusionOpacityProperties?z.is3D()?1:0:k.is3D()&&z.hasInitialOcclusionOpacityProperties?-1:0}),this._mergedLayers=g,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged()}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}getCamera(){return this.stylesheet.camera}setCamera(a){return this.stylesheet.camera=i.l({},this.stylesheet.camera,a),this.camera=this.stylesheet.camera,this}_evaluateColorThemeData(a){return a.data?function(u,g,v){const x=i.l({},g);for(const k of Object.keys(i._.colorTheme))x[k]===void 0&&(x[k]=i._.colorTheme[k].default);const B=new i.$(th,u,new Map(v));return B.setTransitionOrValue(x,v),B.untransitioned().possiblyEvaluate(new i.a3(0))}(this.scope,a,this.options).get("data"):null}_loadColorTheme(a){this._styleColorTheme.lutLoading=!0,this._styleColorTheme.lutLoadingCorrelationID+=1;const u=this._styleColorTheme.lutLoadingCorrelationID;return new Promise((g,v)=>{const x="data:image/png;base64,";if(!a||a.length===0)return this._styleColorTheme.lut=null,this._styleColorTheme.lutLoading=!1,void g();let B=a;B.startsWith(x)||(B=x+B);const k="mapbox-reserved-lut",z=new Image;z.src=B,z.onerror=()=>{this._styleColorTheme.lutLoading=!1,v(new Error("Failed to load image data"))},z.onload=()=>{if(this._styleColorTheme.lutLoadingCorrelationID!==u)return void g();this._styleColorTheme.lutLoading=!1;const{width:Q,height:j,data:W}=i.q.getImageData(z);if(j>32)return void v(new Error("The height of the image must be less than or equal to 32 pixels."));if(Q!==j*j)return void v(new Error("The width of the image must be equal to the height squared."));this.getImage(k)&&this.removeImage(k),this.addImage(k,{data:new i.r({width:Q,height:j},W),pixelRatio:1,sdf:!1,version:0});const J=this.imageManager.getImage(k,this.scope);J?(this._styleColorTheme.lut={image:J.data,data:a},g()):v(new Error("Missing LUT image."))}})}getLut(a){const u=this._styleColorThemeForScope[a];return u?u.lut:null}setProjection(a){a?this.stylesheet.projection=a:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?(this.getTerrain()||this.stylesheet.terrain)&&!this.disableElevatedTerrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null,0))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(a){this._spriteRequest=function(u,g,v){let x,B,k;const z=i.q.devicePixelRatio>1?"@2x":"";let Q=i.n(g.transformRequest(g.normalizeSpriteURL(u,z,".json"),i.R.SpriteJSON),(J,re)=>{Q=null,k||(k=J,x=re,W())}),j=i.o(g.transformRequest(g.normalizeSpriteURL(u,z,".png"),i.R.SpriteImage),(J,re)=>{j=null,k||(k=J,B=re,W())});function W(){if(k)v(k);else if(x&&B){const J=i.q.getImageData(B),re={};for(const de in x){const{width:me,height:_e,x:xe,y:ze,sdf:Qe,pixelRatio:Ue,stretchX:Xe,stretchY:qe,content:ut}=x[de],it=new i.r({width:me,height:_e});i.r.copy(J,it,{x:xe,y:ze},{x:0,y:0},{width:me,height:_e},null),re[de]={data:it,pixelRatio:Ue,sdf:Qe,stretchX:Xe,stretchY:qe,content:ut}}v(null,re)}}return{cancel(){Q&&(Q.cancel(),Q=null),j&&(j.cancel(),j=null)}}}(a,this.map._requestManager,(u,g)=>{if(this._spriteRequest=null,u)this.fire(new i.t(u));else if(g)for(const v in g)this.imageManager.addImage(v,this.scope,g[v]);this.imageManager.setLoaded(!0,this.scope),this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new i.x("data",{dataType:"style"}))})}_validateLayer(a){const u=this.getOwnSource(a.source);if(!u)return;const g=a.sourceLayer;g&&(u.type==="geojson"||u.vectorLayerIds&&u.vectorLayerIds.indexOf(g)===-1)&&this.fire(new i.t(new Error(`Source layer "${g}" does not exist on source "${u.id}" as specified by style layer "${a.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._changes.getUpdatedSourceCaches()).length)return!1;for(const a in this._sourceCaches)if(!this._sourceCaches[a].loaded())return!1;if(!this.imageManager.isLoaded()||!this.modelManager.isLoaded()||this._styleColorTheme.lutLoading)return!1;for(const{style:a}of this.fragments)if(!a.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map((a,u)=>{const g=this.fragments[u];return g&&g.style&&(a.data=g.style.serialize()),a})}_serializeSources(){const a={};for(const u in this._sourceCaches){const g=this._sourceCaches[u].getSource();a[g.id]||(a[g.id]=g.serialize())}return a}_serializeLayers(a){const u=[];for(const g of a){const v=this._layers[g];v&&v.type!=="custom"&&u.push(v.serialize())}return u}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasTransitions(){if(this.hasLightTransitions()||this.hasFogTransition())return!0;for(const a in this._sourceCaches)if(this._sourceCaches[a].hasTransition())return!0;for(const a in this._layers)if(this._layers[a].hasTransition())return!0;return!1}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}isLayerDraped(a){return!!this.terrain&&a.isDraped(this.getLayerSourceCache(a))}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}_checkLayer(a){const u=this.getOwnLayer(a);if(u)return u;this.fire(new i.t(new Error(`The layer '${a}' does not exist in the map's style.`)))}_checkSource(a){const u=this.getOwnSource(a);if(u)return u;this.fire(new i.t(new Error(`The source '${a}' does not exist in the map's style.`)))}precompilePrograms(a,u){const g=this.map.painter;if(g)for(let v=a.minzoom||0;v<(a.maxzoom||25.5);v++){const x=a.getProgramIds();if(x)for(const B of x){const k=a.getDefaultProgramParams(B,u.zoom,this._styleColorTheme.lut);k&&(g.style=this,this.fog&&(g._fogVisible=!0,k.overrideFog=!0,g.getOrCreateProgram(B,k)),g._fogVisible=!1,k.overrideFog=!1,g.getOrCreateProgram(B,k),(this.stylesheet.terrain||this.stylesheet.projection&&this.stylesheet.projection.name==="globe")&&(k.overrideRtt=!0,g.getOrCreateProgram(B,k)))}}}update(a){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(a),this.directionalLight&&this.directionalLight.recalculate(a);const u=this.calculateLightsBrightness();a.brightness=u||0,u!==this._brightness&&(this._brightness=u,this.dispatcher.broadcast("setBrightness",u));const g=this._changes.isDirty();let v=!1;if(this._changes.isDirty()){const B=this._changes.getLayerUpdatesByScope();for(const k in B){const{updatedIds:z,removedIds:Q}=B[k];(z||Q)&&(this._updateWorkerLayers(k,z,Q),v=!0)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(a),this.light&&this.light.updateTransitions(a),this.ambientLight&&this.ambientLight.updateTransitions(a),this.directionalLight&&this.directionalLight.updateTransitions(a),this.fog&&this.fog.updateTransitions(a),this._changes.reset()}const x={};for(const B in this._mergedSourceCaches){const k=this._mergedSourceCaches[B];x[B]=k.used,k.used=!1,k.tileCoverLift=0}for(const B of this._mergedOrder){const k=this._mergedLayers[B];if(k.recalculate(a,this._availableImages),!k.isHidden(a.zoom)){const z=this.getLayerSourceCache(k);z&&(z.used=!0,z.tileCoverLift=Math.max(z.tileCoverLift,k.tileCoverLift()))}!this._precompileDone&&this._shouldPrecompile&&("requestIdleCallback"in window?requestIdleCallback(()=>{this.precompilePrograms(k,a)}):this.precompilePrograms(k,a))}this._shouldPrecompile&&(this._precompileDone=!0),this.terrain&&v&&this.mergeLayers();for(const B in x){const k=this._mergedSourceCaches[B];x[B]!==k.used&&k.getSource().fire(new i.x("data",{sourceDataType:"visibility",dataType:"source",sourceId:k.getSource().id}))}this.light&&this.light.recalculate(a),this.terrain&&this.terrain.recalculate(a),this.fog&&this.fog.recalculate(a),this.z=a.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),g&&this.fire(new i.x("data",{dataType:"style"}))}_updateTilesForChangedImages(){const a=this._changes.getUpdatedImages();if(a.length){for(const u in this._sourceCaches)this._sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],a);this._changes.resetUpdatedImages()}}_updateWorkerLayers(a,u,g){const v=this.getFragmentStyle(a);v&&this.dispatcher.broadcast("updateLayers",{layers:u?v._serializeLayers(u):[],scope:a,removedIds:g||[],options:v.options})}setState(a,u){if(this._checkLoaded(),Oa(this,ns(a)))return!1;(a=i.cl(a)).layers=$c(a.layers);const g=function(B,k){if(!B)return[{command:ei.setStyle,args:[k]}];let z=[];try{if(!i.bh(B.version,k.version))return[{command:ei.setStyle,args:[k]}];if(i.bh(B.center,k.center)||z.push({command:ei.setCenter,args:[k.center]}),i.bh(B.zoom,k.zoom)||z.push({command:ei.setZoom,args:[k.zoom]}),i.bh(B.bearing,k.bearing)||z.push({command:ei.setBearing,args:[k.bearing]}),i.bh(B.pitch,k.pitch)||z.push({command:ei.setPitch,args:[k.pitch]}),i.bh(B.sprite,k.sprite)||z.push({command:ei.setSprite,args:[k.sprite]}),i.bh(B.glyphs,k.glyphs)||z.push({command:ei.setGlyphs,args:[k.glyphs]}),i.bh(B.imports,k.imports)||function(re=[],de=[],me){de=de||[];const _e=(re=re||[]).map(xc),xe=de.map(xc),ze=re.reduce(_a,{}),Qe=de.reduce(_a,{}),Ue=_e.slice();let Xe,qe,ut,it;for(Xe=0,qe=0;Xe<_e.length;Xe++)ut=_e[Xe],Qe.hasOwnProperty(ut)?qe++:(me.push({command:ei.removeImport,args:[ut]}),Ue.splice(Ue.indexOf(ut,qe),1));for(Xe=0,qe=0;Xe<xe.length;Xe++)ut=xe[xe.length-1-Xe],Ue[Ue.length-1-Xe]!==ut&&(ze.hasOwnProperty(ut)?(me.push({command:ei.removeImport,args:[ut]}),Ue.splice(Ue.lastIndexOf(ut,Ue.length-qe),1)):qe++,it=Ue[Ue.length-Xe],me.push({command:ei.addImport,args:[Qe[ut],it]}),Ue.splice(Ue.length-Xe,0,ut));for(const ht of de){const xt=ze[ht.id];xt&&!i.bh(xt,ht)&&me.push({command:ei.updateImport,args:[ht.id,ht]})}}(B.imports,k.imports,z),i.bh(B.transition,k.transition)||z.push({command:ei.setTransition,args:[k.transition]}),i.bh(B.light,k.light)||z.push({command:ei.setLight,args:[k.light]}),i.bh(B.fog,k.fog)||z.push({command:ei.setFog,args:[k.fog]}),i.bh(B.projection,k.projection)||z.push({command:ei.setProjection,args:[k.projection]}),i.bh(B.lights,k.lights)||z.push({command:ei.setLights,args:[k.lights]}),i.bh(B.camera,k.camera)||z.push({command:ei.setCamera,args:[k.camera]}),!i.bh(B["color-theme"],k["color-theme"]))return[{command:ei.setStyle,args:[k]}];const Q={},j=[];(function(re,de,me,_e){let xe;for(xe in de=de||{},re=re||{})re.hasOwnProperty(xe)&&(de.hasOwnProperty(xe)||_i(xe,me,_e));for(xe in de){if(!de.hasOwnProperty(xe))continue;const ze=de[xe];re.hasOwnProperty(xe)?i.bh(re[xe],ze)||(re[xe].type==="geojson"&&ze.type==="geojson"&&$n(re,de,xe)?me.push({command:ei.setGeoJSONSourceData,args:[xe,ze.data]}):Dh(xe,de,me,_e)):Ko(xe,de,me)}})(B.sources,k.sources,j,Q);const W=[];B.layers&&B.layers.forEach(re=>{re.source&&Q[re.source]?z.push({command:ei.removeLayer,args:[re.id]}):W.push(re)});let J=B.terrain;J&&Q[J.source]&&(z.push({command:ei.setTerrain,args:[void 0]}),J=void 0),z=z.concat(j),i.bh(J,k.terrain)||z.push({command:ei.setTerrain,args:[k.terrain]}),function(re,de,me){de=de||[];const _e=(re=re||[]).map(xc),xe=de.map(xc),ze=re.reduce(_a,{}),Qe=de.reduce(_a,{}),Ue=_e.slice(),Xe=Object.create(null);let qe,ut,it,ht,xt,pt,At;for(qe=0,ut=0;qe<_e.length;qe++)it=_e[qe],Qe.hasOwnProperty(it)?ut++:(me.push({command:ei.removeLayer,args:[it]}),Ue.splice(Ue.indexOf(it,ut),1));for(qe=0,ut=0;qe<xe.length;qe++)it=xe[xe.length-1-qe],Ue[Ue.length-1-qe]!==it&&(ze.hasOwnProperty(it)?(me.push({command:ei.removeLayer,args:[it]}),Ue.splice(Ue.lastIndexOf(it,Ue.length-ut),1)):ut++,pt=Ue[Ue.length-qe],me.push({command:ei.addLayer,args:[Qe[it],pt]}),Ue.splice(Ue.length-qe,0,it),Xe[it]=!0);for(qe=0;qe<xe.length;qe++)if(it=xe[qe],ht=ze[it],xt=Qe[it],!Xe[it]&&!i.bh(ht,xt))if(i.bh(ht.source,xt.source)&&i.bh(ht["source-layer"],xt["source-layer"])&&i.bh(ht.type,xt.type)){for(At in sl(ht.layout,xt.layout,me,it,null,ei.setLayoutProperty),sl(ht.paint,xt.paint,me,it,null,ei.setPaintProperty),i.bh(ht.slot,xt.slot)||me.push({command:ei.setSlot,args:[it,xt.slot]}),i.bh(ht.filter,xt.filter)||me.push({command:ei.setFilter,args:[it,xt.filter]}),i.bh(ht.minzoom,xt.minzoom)&&i.bh(ht.maxzoom,xt.maxzoom)||me.push({command:ei.setLayerZoomRange,args:[it,xt.minzoom,xt.maxzoom]}),ht)ht.hasOwnProperty(At)&&At!=="layout"&&At!=="paint"&&At!=="filter"&&At!=="metadata"&&At!=="minzoom"&&At!=="maxzoom"&&At!=="slot"&&(At.indexOf("paint.")===0?sl(ht[At],xt[At],me,it,At.slice(6),ei.setPaintProperty):i.bh(ht[At],xt[At])||me.push({command:ei.setLayerProperty,args:[it,At,xt[At]]}));for(At in xt)xt.hasOwnProperty(At)&&!ht.hasOwnProperty(At)&&At!=="layout"&&At!=="paint"&&At!=="filter"&&At!=="metadata"&&At!=="minzoom"&&At!=="maxzoom"&&At!=="slot"&&(At.indexOf("paint.")===0?sl(ht[At],xt[At],me,it,At.slice(6),ei.setPaintProperty):i.bh(ht[At],xt[At])||me.push({command:ei.setLayerProperty,args:[it,At,xt[At]]}))}else me.push({command:ei.removeLayer,args:[it]}),pt=Ue[Ue.lastIndexOf(it)+1],me.push({command:ei.addLayer,args:[xt,pt]})}(W,k.layers,z)}catch(Q){console.warn("Unable to compute style diff:",Q),z=[{command:ei.setStyle,args:[k]}]}return z}(this.serialize(),a).filter(B=>!(B.command in Cl));if(g.length===0)return!1;const v=g.filter(B=>!(B.command in Nh));if(v.length>0)throw new Error(`Unimplemented: ${v.map(B=>B.command).join(", ")}.`);const x=[];return g.forEach(B=>{x.push(this[B.command].apply(this,B.args))}),u&&Promise.all(x).then(u),this.stylesheet=a,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}addImage(a,u){return this.getImage(a)?this.fire(new i.t(new Error("An image with this name already exists."))):(this.imageManager.addImage(a,this.scope,u),this._afterImageUpdated(a),this)}updateImage(a,u){this.imageManager.updateImage(a,this.scope,u)}getImage(a){return this.imageManager.getImage(a,this.scope)}removeImage(a){return this.getImage(a)?(this.imageManager.removeImage(a,this.scope),this._afterImageUpdated(a),this):this.fire(new i.t(new Error("No image with this name exists.")))}_afterImageUpdated(a){this._availableImages=this.imageManager.listImages(this.scope),this._changes.updateImage(a),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.fire(new i.x("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addModel(a,u,g={}){return this._checkLoaded(),this._validate(dt,`models.${a}`,u,null,g)||(this.modelManager.addModel(a,u,this.scope),this._changes.setDirty()),this}hasModel(a){return this.modelManager.hasModel(a,this.scope)}removeModel(a){return this.hasModel(a)?(this.modelManager.removeModel(a,this.scope),this):this.fire(new i.t(new Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.scope)}addSource(a,u,g={}){if(this._checkLoaded(),this.getOwnSource(a)!==void 0)throw new Error(`There is already a source with ID "${a}".`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(lo,`sources.${a}`,u,null,g))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const v=Ql(a,u,this.dispatcher,this);v.scope=this.scope,v.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(v.id),source:v.serialize(),sourceId:v.id}));const x=B=>{const k=(B?"symbol:":"other:")+v.id,z=i.av(k,this.scope),Q=this._sourceCaches[k]=new cs(z,v,B);(B?this._symbolSourceCaches:this._otherSourceCaches)[v.id]=Q,Q.onAdd(this.map)};x(!1),u.type!=="vector"&&u.type!=="geojson"||x(!0),v.onAdd&&v.onAdd(this.map),g.isInitialLoad||(this.mergeSources(),this._changes.setDirty())}removeSource(a){this._checkLoaded();const u=this.getOwnSource(a);if(!u)throw new Error("There is no source with this ID");for(const v in this._layers)if(this._layers[v].source===a)return this.fire(new i.t(new Error(`Source "${a}" cannot be removed while layer "${v}" is using it.`)));if(this.terrain&&this.terrain.scope===this.scope&&this.terrain.get().source===a)return this.fire(new i.t(new Error(`Source "${a}" cannot be removed while terrain is using it.`)));const g=this.getOwnSourceCaches(a);for(const v of g){const x=i.cm(v.id);delete this._sourceCaches[x],this._changes.discardSourceCacheUpdate(v.id),v.fire(new i.x("data",{sourceDataType:"metadata",dataType:"source",sourceId:v.getSource().id})),v.setEventedParent(null),v.clearTiles()}return delete this._otherSourceCaches[a],delete this._symbolSourceCaches[a],this.mergeSources(),u.setEventedParent(null),u.onRemove&&u.onRemove(this.map),this._changes.setDirty(),this}setGeoJSONSourceData(a,u){this._checkLoaded(),this.getOwnSource(a).setData(u),this._changes.setDirty()}getOwnSource(a){const u=this.getOwnSourceCache(a);return u&&u.getSource()}getOwnSources(){const a=[];for(const u in this._otherSourceCaches){const g=this.getOwnSourceCache(u);g&&a.push(g.getSource())}return a}areTilesLoaded(){const a=this._mergedSourceCaches;for(const u in a){const g=a[u]._tiles;for(const v in g){const x=g[v];if(x.state!=="loaded"&&x.state!=="errored")return!1}}return!0}setLights(a){if(this._checkLoaded(),!a)return delete this.ambientLight,void delete this.directionalLight;const u=this._getTransitionParameters();for(const v of a){if(this._validate(Ni,"lights",v))return;switch(v.type){case"ambient":if(this.ambientLight){const x=this.ambientLight;x.set(v),x.updateTransitions(u)}else this.ambientLight=new mi(v,Mr||(Mr=new i.a0({color:new i.a1(i._.properties_light_ambient.color),intensity:new i.a1(i._.properties_light_ambient.intensity)})),this.scope,this.options);break;case"directional":if(this.directionalLight){const x=this.directionalLight;x.set(v),x.updateTransitions(u)}else this.directionalLight=new mi(v,Ci||(Ci=new i.a0({direction:new i.ad(i._.properties_light_directional.direction),color:new i.a1(i._.properties_light_directional.color),intensity:new i.a1(i._.properties_light_directional.intensity),"cast-shadows":new i.a1(i._.properties_light_directional["cast-shadows"]),"shadow-intensity":new i.a1(i._.properties_light_directional["shadow-intensity"])})),this.scope,this.options)}}const g=new i.a3(this.z||0,u);this.ambientLight&&this.ambientLight.recalculate(g),this.directionalLight&&this.directionalLight.recalculate(g),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){const a=this.directionalLight,u=this.ambientLight;if(!a||!u)return;const g=W=>.2126*(W[0]<=.03928?W[0]/12.92:Math.pow((W[0]+.055)/1.055,2.4))+.7152*(W[1]<=.03928?W[1]/12.92:Math.pow((W[1]+.055)/1.055,2.4))+.0722*(W[2]<=.03928?W[2]/12.92:Math.pow((W[2]+.055)/1.055,2.4)),v=a.properties.get("color").toRenderColor(null).toArray01(),x=a.properties.get("intensity"),B=a.properties.get("direction"),k=1-i.c7(B.x,B.y,B.z)[2]/90,z=g(v)*x*k,Q=u.properties.get("color").toRenderColor(null).toArray01(),j=u.properties.get("intensity");return(z+g(Q)*j)/2}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;const a=[];return this.directionalLight&&a.push(this.directionalLight.get()),this.ambientLight&&a.push(this.ambientLight.get()),a}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(a){if(!a)return this;if(i.cn(a)){const u=i.co(a),g=this.fragments.find(({id:x})=>x===u);if(!g)throw new Error(`Style import not found: ${a}`);const v=i.cm(a);return g.style.getFragmentStyle(v)}{const u=this.fragments.find(({id:g})=>g===a);if(!u)throw new Error(`Style import not found: ${a}`);return u.style}}getConfigProperty(a,u){const g=this.getFragmentStyle(a);if(!g)return null;const v=i.av(u,g.scope),x=g.options.get(v),B=x?x.value||x.default:null;return B?B.serialize():null}setConfigProperty(a,u,g){const v=this.getFragmentStyle(a);if(!v)return;const x=v.stylesheet.schema;if(!x||!x[u])return;const B=i.M(g);if(B.result!=="success")return void Oa(this,B.value);const k=B.value.expression,z=i.av(u,v.scope),Q=v.options.get(z);if(!Q)return;let j;const{minValue:W,maxValue:J,stepValue:re,type:de,values:me}=x[u],_e=i.M(x[u].default);_e.result==="success"&&(j=_e.value.expression),j?(this.options.set(z,{...Q,value:k,default:j,minValue:W,maxValue:J,stepValue:re,type:de,values:me}),this.updateConfigDependencies(u)):this.fire(new i.t(new Error(`No schema defined for the config option "${u}" in the "${a}" fragment.`)))}getConfig(a){const u=this.getFragmentStyle(a);if(!u)return null;const g=u.stylesheet.schema;if(!g)return null;const v={};for(const x in g){const B=i.av(x,u.scope),k=u.options.get(B),z=k?k.value||k.default:null;v[x]=z?z.serialize():null}return v}setConfig(a,u){const g=this.getFragmentStyle(a);g&&(g.updateConfig(u,g.stylesheet.schema),this.updateConfigDependencies())}getSchema(a){const u=this.getFragmentStyle(a);return u?u.stylesheet.schema:null}setSchema(a,u){const g=this.getFragmentStyle(a);g&&(g.stylesheet.schema=u,g.updateConfig(g._config,u),this.updateConfigDependencies())}updateConfig(a,u){if(this._config=a,a||u)if(u)for(const g in u){let v,x;const B=i.M(u[g].default);if(B.result==="success"&&(v=B.value.expression),a&&a[g]!==void 0){const J=i.M(a[g]);J.result==="success"&&(x=J.value.expression)}const{minValue:k,maxValue:z,stepValue:Q,type:j,values:W}=u[g];if(v){const J=i.av(g,this.scope);this.options.set(J,{default:v,value:x,minValue:k,maxValue:z,stepValue:Q,type:j,values:W})}else this.fire(new i.t(new Error(`No schema defined for config option "${g}".`)))}else this.fire(new i.t(new Error("Attempting to set config for a style without schema.")))}updateConfigDependencies(a){for(const u of this._configDependentLayers){const g=this.getLayer(u);if(g){if(a&&!g.configDependencies.has(a))continue;g.possiblyEvaluateVisibility(),this._updateLayer(g)}}this.ambientLight&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.updateConfig(this.options),this.fog&&this.fog.updateConfig(this.options),this.forEachFragmentStyle(u=>{if(u._styleColorTheme.colorTheme){const g=u._evaluateColorThemeData(u._styleColorTheme.colorTheme);(!u._styleColorTheme.lut&&g!==""||u._styleColorTheme.lut&&g!==u._styleColorTheme.lut.data)&&u.setColorTheme(u._styleColorTheme.colorTheme)}}),this._changes.setDirty()}addLayer(a,u,g={}){this._checkLoaded();const v=a.id;if(this._layers[v])return void this.fire(new i.t(new Error(`Layer with id "${v}" already exists on this map`)));let x;if(a.type==="custom"){if(Oa(this,i.cp(a)))return;x=i.cq(a,this.scope,this._styleColorTheme.lut,this.options)}else{if(typeof a.source=="object"&&(this.addSource(v,a.source),a=i.cl(a),a=i.l(a,{source:v})),this._validate(jt,`layers.${v}`,a,{arrayIndex:-1},g))return;x=i.cq(a,this.scope,this._styleColorTheme.lut,this.options),this._validateLayer(x),x.setEventedParent(this,{layer:{id:v}}),this._serializedLayers[x.id]=x.serialize()}x.configDependencies.size!==0&&this._configDependentLayers.add(x.fqid);let B=this._order.length;if(u){const j=this._order.indexOf(u);if(j===-1)return void this.fire(new i.t(new Error(`Layer with id "${u}" does not exist on this map.`)));x.slot===this._layers[u].slot?B=j:i.w(`Layer with id "${u}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(B,0,v),this._layerOrderChanged=!0,this._layers[v]=x;const k=this.getOwnLayerSourceCache(x),z=!!this.directionalLight&&this.directionalLight.shadowsEnabled();k&&x.canCastShadows()&&z&&(k.castsShadows=!0);const Q=this._changes.getRemovedLayer(x);if(Q&&x.source&&k&&x.type!=="custom"){this._changes.discardLayerRemoval(x);const j=i.av(x.source,x.scope);Q.type!==x.type?this._changes.updateSourceCache(j,"clear"):(this._changes.updateSourceCache(j,"reload"),k.pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map),x.scope=this.scope,this.mergeLayers()}moveLayer(a,u){this._checkLoaded();const g=this._checkLayer(a);if(!g||a===u)return;const v=this._order.indexOf(a);this._order.splice(v,1);let x=this._order.length;if(u){const B=this._order.indexOf(u);if(B===-1)return void this.fire(new i.t(new Error(`Layer with id "${u}" does not exist on this map.`)));g.slot===this._layers[u].slot?x=B:i.w(`Layer with id "${u}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(x,0,a),this._changes.setDirty(),this._layerOrderChanged=!0,this.mergeLayers()}removeLayer(a){this._checkLoaded();const u=this._checkLayer(a);if(!u)return;u.setEventedParent(null);const g=this._order.indexOf(a);this._order.splice(g,1),delete this._layers[a],delete this._serializedLayers[a],this._changes.setDirty(),this._layerOrderChanged=!0,this._configDependentLayers.delete(u.fqid),this._changes.removeLayer(u);const v=this.getOwnLayerSourceCache(u);if(v&&v.castsShadows){let x=!1;for(const B in this._layers)if(this._layers[B].source===u.source&&this._layers[B].canCastShadows()){x=!0;break}v.castsShadows=x}u.onRemove&&u.onRemove(this.map),this.mergeLayers()}getOwnLayer(a){return this._layers[a]}hasLayer(a){return a in this._mergedLayers}hasLayerType(a){for(const u in this._layers)if(this._layers[u].type===a)return!0;return!1}setLayerZoomRange(a,u,g){this._checkLoaded();const v=this._checkLayer(a);v&&(v.minzoom===u&&v.maxzoom===g||(u!=null&&(v.minzoom=u),g!=null&&(v.maxzoom=g),this._updateLayer(v)))}getSlots(){return this._checkLoaded(),this._mergedSlots}setSlot(a,u){this._checkLoaded();const g=this._checkLayer(a);g&&g.slot!==u&&(g.slot=u,this._updateLayer(g))}setFilter(a,u,g={}){this._checkLoaded();const v=this._checkLayer(a);if(v&&!i.bh(v.filter,u))return u==null?(v.filter=void 0,void this._updateLayer(v)):void(this._validate(we,`layers.${v.id}.filter`,u,{layerType:v.type},g)||(v.filter=i.cl(u),this._updateLayer(v)))}getFilter(a){const u=this._checkLayer(a);if(u)return i.cl(u.filter)}setLayoutProperty(a,u,g,v={}){this._checkLoaded();const x=this._checkLayer(a);if(x&&!i.bh(x.getLayoutProperty(u),g)){if(g!=null&&(!v||v.validate!==!1)&&Oa(x,Ye.call(ns,{key:`layers.${a}.layout.${u}`,layerType:x.type,objectKey:u,value:g,styleSpec:i._,style:{glyphs:!0,sprite:!0}})))return;x.setLayoutProperty(u,g),x.configDependencies.size!==0&&this._configDependentLayers.add(x.fqid),this._updateLayer(x)}}getLayoutProperty(a,u){const g=this._checkLayer(a);if(g)return g.getLayoutProperty(u)}setPaintProperty(a,u,g,v={}){this._checkLoaded();const x=this._checkLayer(a);if(!x||i.bh(x.getPaintProperty(u),g)||g!=null&&(!v||v.validate!==!1)&&Oa(x,Ce.call(ns,{key:`layers.${a}.paint.${u}`,layerType:x.type,objectKey:u,value:g,styleSpec:i._})))return;const B=x.setPaintProperty(u,g);x.configDependencies.size!==0&&this._configDependentLayers.add(x.fqid),B&&this._updateLayer(x),this._changes.updatePaintProperties(x)}getPaintProperty(a,u){const g=this._checkLayer(a);if(g)return g.getPaintProperty(u)}setFeatureState(a,u){this._checkLoaded();const g=a.source,v=a.sourceLayer,x=this._checkSource(g);if(!x)return;const B=x.type;if(B==="geojson"&&v)return void this.fire(new i.t(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(B==="vector"&&!v)return void this.fire(new i.t(new Error("The sourceLayer parameter must be provided for vector source types.")));a.id===void 0&&this.fire(new i.t(new Error("The feature id parameter must be provided.")));const k=this.getOwnSourceCaches(g);for(const z of k)z.setFeatureState(v,a.id,u)}removeFeatureState(a,u){this._checkLoaded();const g=a.source,v=this._checkSource(g);if(!v)return;const x=v.type,B=x==="vector"?a.sourceLayer:void 0;if(x==="vector"&&!B)return void this.fire(new i.t(new Error("The sourceLayer parameter must be provided for vector source types.")));if(u&&typeof a.id!="string"&&typeof a.id!="number")return void this.fire(new i.t(new Error("A feature id is required to remove its specific state property.")));const k=this.getOwnSourceCaches(g);for(const z of k)z.removeFeatureState(B,a.id,u)}getFeatureState(a){this._checkLoaded();const u=a.source,g=a.sourceLayer,v=this._checkSource(u);if(v){if(v.type!=="vector"||g)return a.id===void 0&&this.fire(new i.t(new Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(u)[0].getFeatureState(g,a.id);this.fire(new i.t(new Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(a){return this.stylesheet.transition=i.l({},this.stylesheet.transition,a),this.transition=this.stylesheet.transition,this}getTransition(){return i.l({},this.stylesheet.transition)}serialize(){this._checkLoaded();const a=this.getTerrain(),u=a&&this.terrain&&this.terrain.scope===this.scope?a:this.stylesheet.terrain;return i.cr({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,fragment:this.stylesheet.fragment,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:u,fog:this.stylesheet.fog,center:this.stylesheet.center,"color-theme":this.stylesheet["color-theme"],zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},g=>g!==void 0)}_updateLayer(a){this._changes.updateLayer(a);const u=this.getLayerSourceCache(a),g=i.av(a.source,a.scope),v=this._changes.getUpdatedSourceCaches();a.source&&!v[g]&&u&&u.getSource().type!=="raster"&&(this._changes.updateSourceCache(g,"reload"),u.pause()),a.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(a){const u=k=>this._mergedLayers[k].is3D(),g=this.order,v={},x=[];for(let k=g.length-1;k>=0;k--){const z=g[k];if(u(z)){v[z]=k;for(const Q of a){const j=Q[z];if(j)for(const W of j)x.push(W)}}}x.sort((k,z)=>z.intersectionZ-k.intersectionZ);const B=[];for(let k=g.length-1;k>=0;k--){const z=g[k];if(u(z))for(let Q=x.length-1;Q>=0;Q--){const j=x[Q].feature;if(j.layer&&v[j.layer.id]<k)break;B.push(j),x.pop()}else for(const Q of a){const j=Q[z];if(j)for(const W of j)B.push(W.feature)}}return B}queryRenderedFeatures(a,u,g){u&&u.filter&&this._validate(we,"queryRenderedFeatures.filter",u.filter,null,u),u.scope=this.scope,u.availableImages=this._availableImages,u.serializedLayers=this._serializedLayers;const v={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new i.t(new Error("parameters.layers must be an Array."))),[];for(const Q of u.layers){const j=this._mergedLayers[Q];if(!j)return this.fire(new i.t(new Error(`The layer '${Q}' does not exist in the map's style and cannot be queried for features.`))),[];v[j.source]=!0}}const x=[],B=u.serializedLayers||{},k=u&&u.layers?u.layers.some(Q=>{const j=this.getLayer(Q);return j&&j.is3D()}):this.has3DLayers(),z=$i.createFromScreenPoints(a,g);for(const Q in this._mergedSourceCaches){const j=this._mergedSourceCaches[Q].getSource();if(!j||j.scope!==u.scope)continue;const W=this._mergedSourceCaches[Q].getSource().id;u.layers&&!v[W]||x.push(vu(this._mergedSourceCaches[Q],this._mergedLayers,B,z,u,g,k,!!this.map._showQueryGeometry))}return this.placement&&x.push(function(Q,j,W,J,re,de,me){const _e={},xe=de.queryRenderedSymbols(J),ze=[];for(const Qe of Object.keys(xe).map(Number))ze.push(me[Qe]);ze.sort(bc);for(const Qe of ze){const Ue=Qe.featureIndex.lookupSymbolFeatures(xe[Qe.bucketInstanceId],j,Qe.bucketIndex,Qe.sourceLayerIndex,re.filter,re.layers,re.availableImages,Q);for(const Xe in Ue){const qe=_e[Xe]=_e[Xe]||[],ut=Ue[Xe];ut.sort((it,ht)=>{const xt=Qe.featureSortOrder;if(xt){const pt=xt.indexOf(it.featureIndex);return xt.indexOf(ht.featureIndex)-pt}return ht.featureIndex-it.featureIndex});for(const it of ut)qe.push(it)}}for(const Qe in _e)_e[Qe].forEach(Ue=>{const Xe=Ue.feature,qe=W(Q[Qe]);if(!qe)return;const ut=qe.getFeatureState(Xe.layer["source-layer"],Xe.id);Xe.source=Xe.layer.source,Xe.layer["source-layer"]&&(Xe.sourceLayer=Xe.layer["source-layer"]),Xe.state=ut});return _e}(this._mergedLayers,B,this.getLayerSourceCache.bind(this),z.screenGeometry,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(x)}querySourceFeatures(a,u){u&&u.filter&&this._validate(we,"querySourceFeatures.filter",u.filter,null,u);const g=this.getOwnSourceCaches(a);let v=[];for(const x of g)v=v.concat(vc(x,u));return v}addSourceType(a,u,g){return Wo.getSourceType(a)?g(new Error(`A source type called "${a}" already exists.`)):(Wo.setSourceType(a,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:a,url:u.workerSourceURL},g):g(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(a,u,g={}){this._checkLoaded();const v=this.light.getLight();let x=!1;for(const k in a)if(!i.bh(a[k],v[k])){x=!0;break}if(!x)return;const B=this._getTransitionParameters();this.light.setLight(a,u,g),this.light.updateTransitions(B)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}checkCanvasFingerprintNoise(){this.disableElevatedTerrain===void 0&&(this.disableElevatedTerrain=i.q.hasCanvasFingerprintNoise(),this.disableElevatedTerrain&&i.w("Terrain and hillshade are disabled because of Canvas2D limitations when fingerprinting protection is enabled (e.g. in private browsing mode)."))}setTerrain(a,u=1){if(this._checkLoaded(),!a)return this.terrainSetForDrapingOnly()||(delete this.terrain,this.map.transform.projection.requiresDraping&&this.setTerrainForDraping()),u===0&&delete this.terrain,a===null?this.stylesheet.terrain=null:delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);this.checkCanvasFingerprintNoise();let g=a;const v=a.source==null;if(u===1){if(this.disableElevatedTerrain)return;if(typeof g.source=="object"){const k="terrain-dem-src";this.addSource(k,g.source),g=i.cl(g),g=i.l(g,{source:k})}const x=i.l({},g),B={};if(this.terrain&&v){x.source=this.terrain.get().source;const k=this.terrain?this.getFragmentStyle(this.terrain.scope):null;k&&(B.style=k.serialize())}if(this._validate(Pa,"terrain",x,B))return}if(!this.terrain||this.terrain.scope!==this.scope&&!v||this.terrain&&u!==this.terrain.drapeRenderMode){if(!g)return;this._createTerrain(g,u),this.fire(new i.x("data",{dataType:"style"}))}else{const x=this.terrain,B=x.get();for(const k of Object.keys(i._.terrain))!g.hasOwnProperty(k)&&i._.terrain[k].default&&(g[k]=i._.terrain[k].default);for(const k in a)if(!i.bh(a[k],B[k])){x.set(a,this.options),this.stylesheet.terrain=a;const z=this._getTransitionParameters({duration:0});x.updateTransitions(z),this.fire(new i.x("data",{dataType:"style"}));break}}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(a){const u=this.fog=new hi(a,this.map.transform,this.scope,this.options);this.stylesheet.fog=u.get();const g=this._getTransitionParameters({duration:0});u.updateTransitions(g)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const a of this.map._markers)a._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(a){if(this._checkLoaded(),!a)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const u=this.fog;if(!i.bh(u.get(),a)){u.set(a,this.options),this.stylesheet.fog=u.get();const g=this._getTransitionParameters({duration:0});u.updateTransitions(g)}}else this._createFog(a);this._markersNeedUpdate=!0}setColorTheme(a){this._checkLoaded();const u=()=>{for(const v in this._layers)this._layers[v].lut=this._styleColorTheme.lut;for(const v in this._sourceCaches)this._sourceCaches[v].clearTiles()};if(this._styleColorTheme.colorTheme=a,!a)return this._styleColorTheme.lut=null,void u();const g=this._evaluateColorThemeData(a);this._loadColorTheme(g).then(()=>{this.fire(new i.x("colorthemeset")),u()}).catch(v=>{i.w(`Couldn't set color theme: ${v}`)})}_getTransitionParameters(a){return{now:i.q.now(),transition:i.l(this.transition,a)}}updateDrapeFirstLayers(){if(!this.terrain)return;const a=[],u=[];for(const g of this._mergedOrder)this.isLayerDraped(this._mergedLayers[g])?a.push(g):u.push(g);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...a),this._drapedFirstOrder.push(...u)}_createTerrain(a,u){const g=this.terrain=new nn(a,u,this.scope,this.options);u===1&&(this.stylesheet.terrain=a),this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();const v=this._getTransitionParameters({duration:0});g.updateTransitions(v)}_force3DLayerUpdate(){for(const a in this._layers){const u=this._layers[a];u.type==="fill-extrusion"&&this._updateLayer(u)}}_forceSymbolLayerUpdate(){for(const a in this._layers){const u=this._layers[a];u.type==="symbol"&&this._updateLayer(u)}}_validate(a,u,g,v,x={}){if(x&&x.validate===!1)return!1;const B=i.l({},this.serialize());return Oa(this,a.call(ns,i.l({key:u,style:B,value:g,styleSpec:i._},v)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),i.cs.off("pluginStateChange",this._rtlTextPluginCallback);for(const a in this._mergedLayers)this._mergedLayers[a].setEventedParent(null);for(const a in this._mergedSourceCaches)this._mergedSourceCaches[a].clearTiles(),this._mergedSourceCaches[a].setEventedParent(null);this.setEventedParent(null),delete this.fog,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.modelManager.setEventedParent(null),this.dispatcher.remove())}clearSource(a){const u=this.getSourceCaches(a);for(const g of u)g.clearTiles()}clearSources(){for(const a in this._mergedSourceCaches)this._mergedSourceCaches[a].clearTiles()}reloadSource(a){const u=this.getSourceCaches(a);for(const g of u)g.resume(),g.reload()}reloadSources(){for(const a of this.getSources())a.reload&&a.reload()}updateSources(a){let u;this.directionalLight&&(u=Ed(this.directionalLight));for(const g in this._mergedSourceCaches)this._mergedSourceCaches[g].update(a,void 0,void 0,u)}_generateCollisionBoxes(){for(const a in this._sourceCaches){const u=this._sourceCaches[a];u.resume(),u.reload()}}_updatePlacement(a,u,g,v,x,B,k=!1){let z=!1,Q=!1;const j={},W={};for(const J of this._mergedOrder){const re=this._mergedLayers[J];if(re.type!=="symbol")continue;const de=i.av(re.source,re.scope);let me=j[de];if(!me){const xe=this.getLayerSourceCache(re);if(!xe)continue;const ze=xe.getRenderableIds(!0).map(Qe=>xe.getTileByID(Qe));W[de]=ze.slice(),me=j[de]=ze.sort((Qe,Ue)=>Ue.tileID.overscaledZ-Qe.tileID.overscaledZ||(Qe.tileID.isLessThan(Ue.tileID)?-1:1))}const _e=this.crossTileSymbolIndex.addLayer(re,me,u.center.lng,u.projection);z=z||_e}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder),k=k||this._layerOrderChanged||v===0,this._layerOrderChanged&&this.fire(new i.x("neworder")),(k||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(i.q.now(),u.zoom))&&(this.pauseablePlacement=new Ht(u,this._mergedOrder,k,g,v,x,this.placement,this.fog&&u.projection.supportsFog?this.fog.state:null,this._buildingIndex),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,j,W),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(i.q.now()),Q=!0),z&&this.pauseablePlacement.placement.setStale()),Q||z){this._buildingIndex.onNewFrame(u.zoom);for(let J=0;J<this._mergedOrder.length;J++){const re=this._mergedLayers[this._mergedOrder[J]];if(re.type!=="symbol")continue;const de=this.isLayerClipped(re);this.placement.updateLayerOpacities(re,j[i.av(re.source,re.scope)],J,de?B:null)}}return{needsRerender:!this.pauseablePlacement.isDone()||this.placement.hasTransitions(i.q.now())}}_releaseSymbolFadeTiles(){for(const a in this._sourceCaches)this._sourceCaches[a].releaseSymbolFadeTiles()}addImport(a,u){this._checkLoaded();const g=this.stylesheet.imports=this.stylesheet.imports||[];if(g.findIndex(({id:x})=>x===a.id)!==-1)return void this.fire(new i.t(new Error(`Import with id '${a.id}' already exists in the map's style.`)));if(!u)return g.push(a),this._loadImports([a],!0);const v=g.findIndex(({id:x})=>x===u);return v===-1&&this.fire(new i.t(new Error(`Import with id "${u}" does not exist on this map.`))),this.stylesheet.imports=g.slice(0,v).concat(a).concat(g.slice(v)),this._loadImports([a],!0,u)}updateImport(a,u){this._checkLoaded();const g=this.stylesheet.imports||[],v=this.getImportIndex(a);return v===-1?this:typeof u=="string"?(this.setImportUrl(a,u),this):(u.url&&u.url!==g[v].url&&this.setImportUrl(a,u.url),i.bh(u.config,g[v].config)||this.setImportConfig(a,u.config),i.bh(u.data,g[v].data)||this.setImportData(a,u.data),this)}moveImport(a,u){this._checkLoaded();let g=this.stylesheet.imports||[];const v=this.getImportIndex(a);if(v===-1)return this;const x=this.getImportIndex(u);if(x===-1)return this;const B=g[v],k=this.fragments[v];return g=g.filter(({id:z})=>z!==a),this.fragments=this.fragments.filter(({id:z})=>z!==a),this.stylesheet.imports=g.slice(0,x).concat(B).concat(g.slice(x)),this.fragments=this.fragments.slice(0,x).concat(k).concat(this.fragments.slice(x)),this.mergeLayers(),this}setImportUrl(a,u){this._checkLoaded();const g=this.stylesheet.imports||[],v=this.getImportIndex(a);if(v===-1)return this;g[v].url=u;const x=this.fragments[v];return x.style=this._createFragmentStyle(g[v]),x.style.on("style.import.load",()=>this.mergeAll()),x.style.loadURL(u),this}setImportData(a,u){this._checkLoaded();const g=this.getImportIndex(a),v=this.stylesheet.imports||[];return g===-1?this:u?(this.fragments[g].style.setState(u),this._reloadImports(),this):(delete v[g].data,this.setImportUrl(a,v[g].url))}setImportConfig(a,u){this._checkLoaded();const g=this.getImportIndex(a),v=this.stylesheet.imports||[];if(g===-1)return this;u?v[g].config=u:delete v[g].config;const x=this.fragments[g],B=x.style.stylesheet&&x.style.stylesheet.schema;return x.config=u,x.style.updateConfig(u,B),this.updateConfigDependencies(),this}removeImport(a){this._checkLoaded();const u=this.stylesheet.imports||[],g=this.getImportIndex(a);g!==-1&&(u.splice(g,1),this.fragments[g].style._remove(),this.fragments.splice(g,1),this._reloadImports())}getImportIndex(a){const u=(this.stylesheet.imports||[]).findIndex(g=>g.id===a);return u===-1&&this.fire(new i.t(new Error(`Import '${a}' does not exist in the map's style and cannot be updated.`))),u}getLayer(a){return this._mergedLayers[a]}getSources(){const a=[];for(const u in this._mergedOtherSourceCaches){const g=this._mergedOtherSourceCaches[u];g&&a.push(g.getSource())}return a}getSource(a,u){const g=this.getSourceCache(a,u);return g&&g.getSource()}getLayerSource(a){const u=this.getLayerSourceCache(a);return u&&u.getSource()}getSourceCache(a,u){const g=i.av(a,u);return this._mergedOtherSourceCaches[g]}getLayerSourceCache(a){const u=i.av(a.source,a.scope);return a.type==="symbol"?this._mergedSymbolSourceCaches[u]:this._mergedOtherSourceCaches[u]}getSourceCaches(a){if(a==null)return Object.values(this._mergedSourceCaches);const u=[];return this._mergedOtherSourceCaches[a]&&u.push(this._mergedOtherSourceCaches[a]),this._mergedSymbolSourceCaches[a]&&u.push(this._mergedSymbolSourceCaches[a]),u}updateSourceCaches(){const a=this._changes.getUpdatedSourceCaches();for(const u in a){const g=a[u];g==="reload"?this.reloadSource(u):g==="clear"&&this.clearSource(u)}}updateLayers(a){const u=this._changes.getUpdatedPaintProperties();for(const g of u){const v=this.getLayer(g);v&&v.updateTransitions(a)}}getImages(a,u,g){this.imageManager.getImages(u.icons,u.scope,g),this._updateTilesForChangedImages();const v=x=>{x&&x.setDependencies(u.tileID.key,u.type,u.icons)};v(this._otherSourceCaches[u.source]),v(this._symbolSourceCaches[u.source])}getGlyphs(a,u,g){this.glyphManager.getGlyphs(u.stacks,u.scope,g)}getResource(a,u,g){return i.ct(u,g)}getOwnSourceCache(a){return this._otherSourceCaches[a]}getOwnLayerSourceCache(a){return a.type==="symbol"?this._symbolSourceCaches[a.source]:this._otherSourceCaches[a.source]}getOwnSourceCaches(a){const u=[];return this._otherSourceCaches[a]&&u.push(this._otherSourceCaches[a]),this._symbolSourceCaches[a]&&u.push(this._symbolSourceCaches[a]),u}_isSourceCacheLoaded(a){const u=this.getOwnSourceCaches(a);return u.length===0?(this.fire(new i.t(new Error(`There is no source with ID '${a}'`))),!1):u.every(g=>g.loaded())}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}isLayerClipped(a,u){if(!this._clipLayerPresent&&a.type!=="fill-extrusion")return!1;const g=a.type==="fill-extrusion"&&a.sourceLayer==="building";if(a.is3D()){if(g||u&&u.type==="batched-model"||a.type==="model")return!0}else if(a.type==="symbol")return!0;return!1}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.fragments.forEach(a=>{a.style._remove()}),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Wo.getSourceType=function(m){return Vl[m]},Wo.setSourceType=function(m,a){Vl[m]=a},Wo.registerForPluginStateChange=i.cc;var Eu=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#ifdef RENDER_CUTOFF
float cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}
#endif`,Cc=`
out vec4 glFragColor;highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#ifdef INDICATOR_CUTOUT
uniform vec2 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;
#endif
vec4 applyCutout(vec4 color) {
#ifdef INDICATOR_CUTOUT
float holeMinOpacity=u_indicator_cutout_params.x;float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);
#else
return color;
#endif
}
#ifdef DEBUG_WIREFRAME
#define HANDLE_WIREFRAME_DEBUG \\
glFragColor=vec4(0.7,0.0,0.0,0.7); \\
gl_FragDepth=gl_FragCoord.z-0.0001;
#else
#define HANDLE_WIREFRAME_DEBUG
#endif
#ifdef RENDER_CUTOFF
uniform highp vec4 u_cutoff_params;in float v_cutoff_opacity;
#endif
vec4 textureLodCustom(sampler2D image,highp vec2 pos,highp vec2 lod_coord) {highp vec2 size=vec2(textureSize(image,0));highp vec2 dx=dFdx(lod_coord.xy*size);highp vec2 dy=dFdy(lod_coord.xy*size);highp float delta_max_sqr=max(dot(dx,dx),dot(dy,dy));highp float lod=0.5*log2(delta_max_sqr);return textureLod(image,pos,lod);}vec4 applyLUT(highp sampler3D lut,vec4 col) {vec3 size=vec3(textureSize(lut,0));vec3 uvw=(col.rbg*float(size-1.0)+0.5)/size;return vec4(texture(lut,uvw).rgb,col.a);}vec3 applyLUT(highp sampler3D lut,vec3 col) {return applyLUT(lut,vec4(col,1.0)).rgb;}`,Ec=`
#define EXTENT 8192.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const vec2 units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (units_to_pixels*pos+offset)/pattern_size;}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {return get_pattern_pos(pixel_coord_upper,pixel_coord_lower,pattern_size,vec2(tile_units_to_pixels),pos);}float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(PI/4.0+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}
#ifdef RENDER_CUTOFF
uniform vec4 u_cutoff_params;out float v_cutoff_opacity;
#endif
const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}`,Bu="in highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;out highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",qc=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(dd,0)).r;float bl=texture(u_dem,pos+vec2(0,dd)).r;float br=texture(u_dem,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem_prev,pos).r;float tr=texture(u_dem_prev,pos+vec2(dd,0)).r;float bl=texture(u_dem_prev,pos+vec2(0,dd)).r;float br=texture(u_dem_prev,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
vec4 fourSample(vec2 pos,vec2 off) {float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }
#endif
#ifdef DEPTH_OCCLUSION
uniform highp sampler2D u_depth;uniform highp vec2 u_depth_size_inv;uniform highp vec2 u_depth_range_unpack;uniform highp float u_occluder_half_size;uniform highp float u_occlusion_depth_offset;
#ifdef DEPTH_D24
float unpack_depth(float depth) {return depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}vec4 unpack_depth4(vec4 depth) {return depth*u_depth_range_unpack.x+vec4(u_depth_range_unpack.y);}
#else
highp float unpack_depth_rgba(vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;
#ifdef DEPTH_D24
float depth=unpack_depth(texture(u_depth,(coord.xy+1.0)*0.5).r);
#else
float depth=unpack_depth_rgba(texture(u_depth,(coord.xy+1.0)*0.5));
#endif
return coord.z+u_occlusion_depth_offset > depth;}highp vec4 getCornerDepths(vec2 coord) {highp vec3 df=vec3(u_occluder_half_size*u_depth_size_inv,0.0);highp vec2 uv=0.5*coord.xy+0.5;
#ifdef DEPTH_D24
highp vec4 depth=vec4(
texture(u_depth,uv-df.xz).r,texture(u_depth,uv+df.xz).r,texture(u_depth,uv-df.zy).r,texture(u_depth,uv+df.zy).r
);depth=unpack_depth4(depth);
#else
highp vec4 depth=vec4(
unpack_depth_rgba(texture(u_depth,uv-df.xz)),unpack_depth_rgba(texture(u_depth,uv+df.xz)),unpack_depth_rgba(texture(u_depth,uv-df.zy)),unpack_depth_rgba(texture(u_depth,uv+df.zy))
);
#endif
return depth;}highp float occlusionFadeMultiSample(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec2 uv=0.5*coord.xy+0.5;int NX=3;int NY=4;highp vec2 df=u_occluder_half_size*u_depth_size_inv;highp vec2 oneStep=2.0*u_occluder_half_size*u_depth_size_inv/vec2(NX-1,NY-1);highp float res=0.0;for (int y=0; y < NY;++y) {for (int x=0; x < NX;++x) {
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)));
#endif
res+=1.0-clamp(300.0*(coord.z+u_occlusion_depth_offset-depth),0.0,1.0);}}res=clamp(2.0*res/float(NX*NY)-0.5,0.0,1.0);return res;}highp float occlusionFade(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec4 depth=getCornerDepths(coord.xy);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z+u_occlusion_depth_offset)-depth),0.0,1.0));}
#else
bool isOccluded(vec4 frag) { return false; }highp float occlusionFade(vec4 frag) { return 1.0; }highp float occlusionFadeMultiSample(vec4 frag) { return 1.0; }
#endif//DEPTH_OCCLUSION`,Cs=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;out vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Bd=`highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}
#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;in vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos,float opacity_limit) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,min(opacity,opacity_limit));}vec3 fog_apply(vec3 color,vec3 pos) {return fog_apply(color,pos,1.0);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {
#ifdef FOG_DITHERING
vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);
#else
return color;
#endif
}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,Da=`#ifdef RASTER_ARRAY
uniform sampler2D u_image0;uniform sampler2D u_image1;const vec4 NODATA=vec4(1);ivec4 _raTexLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}vec2 _raTexLinearMix(highp vec2 fxy,highp vec4 colorMix,highp float colorOffset,highp vec4 t00,highp vec4 t10,highp vec4 t01,highp vec4 t11) {vec2 c00=t00==NODATA ? vec2(0) : vec2(colorOffset+dot(t00,colorMix),1);vec2 c10=t10==NODATA ? vec2(0) : vec2(colorOffset+dot(t10,colorMix),1);vec2 c01=t01==NODATA ? vec2(0) : vec2(colorOffset+dot(t01,colorMix),1);vec2 c11=t11==NODATA ? vec2(0) : vec2(colorOffset+dot(t11,colorMix),1);return mix(mix(c01,c11,fxy.x),mix(c00,c10,fxy.x),fxy.y);}vec2 raTexture2D_image0_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image0,c.yz,0),texelFetch(u_image0,c.xz,0),texelFetch(u_image0,c.yw,0),texelFetch(u_image0,c.xw,0)
);}vec2 raTexture2D_image1_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image1,c.yz,0),texelFetch(u_image1,c.xz,0),texelFetch(u_image1,c.yw,0),texelFetch(u_image1,c.xw,0)
);}vec2 raTexture2D_image0_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image0,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}vec2 raTexture2D_image1_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image1,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}
#endif`,cl=`#ifdef RASTER_ARRAY
uniform sampler2D u_velocity;uniform mediump vec2 u_velocity_res;uniform mediump float u_max_speed;const vec4 NO_DATA=vec4(1);const vec2 INVALID_VELOCITY=vec2(-1);uniform highp vec2 u_uv_offset;uniform highp float u_data_offset;uniform highp vec2 u_data_scale;ivec4 rasterArrayLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}highp vec2 lookup_velocity(highp vec2 uv) {uv=u_uv_offset.x+u_uv_offset.y*uv;highp vec2 fxy;ivec4 c=rasterArrayLinearCoord(uv,u_velocity_res,fxy);highp vec4 tl=texelFetch(u_velocity,c.yz,0);highp vec4 tr=texelFetch(u_velocity,c.xz,0);highp vec4 bl=texelFetch(u_velocity,c.yw,0);highp vec4 br=texelFetch(u_velocity,c.xw,0);if (tl==NO_DATA) {return INVALID_VELOCITY;}if (tr==NO_DATA) {return INVALID_VELOCITY;}if (bl==NO_DATA) {return INVALID_VELOCITY;}if (br==NO_DATA) {return INVALID_VELOCITY;}highp vec4 t=mix(mix(bl,br,fxy.x),mix(tl,tr,fxy.x),fxy.y);highp vec2 velocity=u_data_offset+vec2(dot(t.rg,u_data_scale),dot(t.ba,u_data_scale));velocity.y=-velocity.y;velocity/=max(u_max_speed,length(velocity));return velocity;}
#endif
uniform highp float u_particle_pos_scale;uniform highp vec2 u_particle_pos_offset;highp vec4 pack_pos_to_rgba(highp vec2 p) {highp vec2 v=(p+u_particle_pos_offset)/u_particle_pos_scale;highp vec4 r=vec4(v.x,fract(v.x*255.0),v.y,fract(v.y*255.0));return vec4(r.x-r.y/255.0,r.y,r.z-r.w/255.0,r.w);}highp vec2 unpack_pos_from_rgba(highp vec4 v) {v=floor(v*255.0+0.5)/255.0;highp vec2 p=vec2(v.x+(v.y/255.0),v.z+(v.w/255.0));return u_particle_pos_scale*p-u_particle_pos_offset;}`,zh=`#ifdef RENDER_SHADOWS
uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {vec3 transformed_normal=vec3(-normal.xy,normal.z);float NDotL=dot(normalize(transformed_normal),u_shadow_direction);float dotScale=min(1.0-NDotL,1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}
#endif//RENDER_SHADOWS`,rh=`#ifdef RENDER_SHADOWS
#ifdef DEPTH_TEXTURE
uniform highp sampler2D u_shadowmap_0;uniform highp sampler2D u_shadowmap_1;
#else
uniform sampler2D u_shadowmap_0;uniform sampler2D u_shadowmap_1;
#endif
uniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;highp float shadow_sample_1(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_1,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_1,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}highp float shadow_sample_0(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_0,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_0,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}float shadow_occlusion_1(highp vec4 pos,highp float bias) {highp vec2 uv=pos.xy;return shadow_sample_1(uv,pos.z-bias);}float shadow_occlusion_0(highp vec4 pos,highp float bias) {highp float compare0=pos.z-bias;
#ifdef NATIVE
highp vec2 uv=pos.xy;highp vec4 samples=textureGather(u_shadowmap_0,uv,0);lowp vec4 stepSamples=step(samples,vec4(compare0));
#else
highp vec2 uv00=pos.xy-vec2(0.5*u_shadow_texel_size);highp vec2 uv10=uv00+vec2(u_shadow_texel_size,0.0);highp vec2 uv01=uv00+vec2(0.0,u_shadow_texel_size);highp vec2 uv11=uv01+vec2(u_shadow_texel_size,0.0);lowp vec4 stepSamples=vec4(
shadow_sample_0(uv01,compare0),shadow_sample_0(uv11,compare0),shadow_sample_0(uv10,compare0),shadow_sample_0(uv00,compare0)
);
#endif
vec2 f=fract(pos.xy*u_shadow_map_resolution-vec2(0.5));lowp vec2 lerpx=mix(stepSamples.wx,stepSamples.zy,f.xx);return mix(lerpx.x,lerpx.y,f.y);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {
#ifdef SHADOWS_SINGLE_CASCADE
light_view_pos0.xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);
#else
light_view_pos0.xyz/=light_view_pos0.w;light_view_pos1.xyz/=light_view_pos1.w;vec4 uv=vec4(light_view_pos0.xy,light_view_pos1.xy);vec4 abs_bounds=abs(uv);if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}light_view_pos1.xyz=light_view_pos1.xyz*0.5+0.5;float occlusion1=shadow_occlusion_1(light_view_pos1,bias);return mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth));
#endif
}highp float calculate_shadow_bias(float NDotL) {
#ifdef NORMAL_OFFSET
return 0.5*u_shadow_bias.x;
#else
return 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));
#endif
}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_opacity(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,float shadow_opacity) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias)*shadow_opacity;return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}
#endif`;const ih=[];ul(Eu,ih),ul(Ec,ih),ul(Cc,ih);const Bc={"_prelude_fog.vertex.glsl":Cs,"_prelude_terrain.vertex.glsl":qc,"_prelude_shadow.vertex.glsl":zh,"_prelude_fog.fragment.glsl":Bd,"_prelude_shadow.fragment.glsl":rh,"_prelude_lighting.glsl":`
#ifdef LIGHTING_3D_MODE
uniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 linearProduct(vec3 srgbIn,vec3 k) {return srgbIn*pow(k,vec3(1./2.2));}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}
#endif//LIGHTING_3D_MODE`,"_prelude_raster_array.glsl":Da,"_prelude_raster_particle.glsl":cl},Wl={};ri("",qc),ri(Bd,Cs),ri(rh,zh),ri(Da,""),ri(cl,"");const Xl=ri(Cc,Ec),Wc=Eu;var El={background:ri(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
in vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_lighting.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform mediump vec4 u_color;out vec4 v_color;uniform float u_emissive_strength;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:ri(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;in highp vec2 v_pos;void main() {highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=textureLodCustom(u_image,pos,v_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec2 u_pattern_units_to_pixels;in vec2 a_pos;out highp vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_pattern_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:ri(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float blur_positive=blur < 0.0 ? 0.0 : 1.0;lowp float antialiasblur=v_data.z;float extrude_length=length(extrude)+antialiasblur*(1.0-blur_positive);float antialiased_blur=-max(abs(blur),antialiasblur);float opacity_t=smoothstep((1.0-blur_positive)*antialiased_blur,blur_positive*antialiased_blur,extrude_length-1.0)-smoothstep(0.0,antialiasblur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
glFragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:ri("void main() {glFragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:ri(`#include "_prelude_fog.fragment.glsl"
uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);glFragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {glFragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:ri(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));glFragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(0.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,"in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:ri("in float v_placed;in float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);glFragColor =mix(red,blue,step(0.5,v_placed))*0.5;glFragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`#include "_prelude_terrain.vertex.glsl"
in vec3 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;in vec2 a_elevation_from_sea;in float a_size_scale;in vec2 a_padding;in float a_auto_z_offset;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;out float v_placed;out float v_notUsed;void main() {float feature_elevation=a_elevation_from_sea.x+a_auto_z_offset;float terrain_elevation=(a_elevation_from_sea.y==1.0 ? 0.0 : elevation(a_anchor_pos));vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*(feature_elevation+terrain_elevation),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:ri("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);glFragColor=color*alpha*opacity_t;}",`in vec2 a_pos_2f;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:ri("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);glFragColor=mix(u_color,overlay_color,overlay_color.a);}",`#include "_prelude_terrain.vertex.glsl"
in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;
#endif
out vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:ri(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:ri(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in highp vec2 v_pos;uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
uniform mat4 u_matrix;uniform vec2 u_world;out highp vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:ri(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_emissive_strength;in highp vec2 v_pos;in highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
out highp vec2 v_pos;out highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:ri(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;in highp vec2 v_pos;uniform float u_emissive_strength;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
out highp vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:ri(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in vec4 v_flat;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;
#endif
uniform lowp float u_opacity;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec2 v_ao;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
in vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
in highp vec3 v_normal;
#endif
uniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
in float v_flood_radius;in float v_has_floodlight;
#endif
in float v_height;
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float emissive_strength
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
vec3 normal=normalize(v_normal);
#endif
float z;vec4 color=v_color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);
#ifdef LIGHTING_3D_MODE
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#else
color=mix(v_color,v_roof_color,z);
#endif
#endif
float h=max(0.0,v_height);float ao_shade=1.0;
#ifdef FAUX_AO
float intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
color.rgb*=mix(ao_shade,1.0,v_has_floodlight);
#else
color.rgb*=ao_shade;
#endif
#else
color.rgb*=ao_shade;
#endif
#endif
#ifdef LIGHTING_3D_MODE
float flood_radiance=0.0;
#ifdef FLOOD_LIGHT
flood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;
#endif
#ifdef RENDER_SHADOWS
#ifdef FLOOD_LIGHT
float ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);
#else
float shadowed_lighting_factor;
#ifdef RENDER_CUTOFF
shadowed_lighting_factor=shadowed_light_factor_normal_opacity(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,v_cutoff_opacity);if (v_cutoff_opacity==0.0) {discard;}
#else
shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);
#endif
color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#endif
#else
color.rgb=apply_lighting(color.rgb,normal);
#ifdef FLOOD_LIGHT
color.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);
#endif
#endif
color.rgb=mix(color.rgb,v_flat.rgb,emissive_strength);color*=u_opacity;
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;uniform float u_width_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
uniform highp float u_vertical_scale;out vec4 v_color;out vec4 v_flat;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
out vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
out highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec2 v_ao;
#endif
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
out float v_flood_radius;out float v_has_floodlight;
#endif
out float v_height;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define highp float flood_light_wall_radius
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize highp float flood_light_wall_radius
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp float emissive_strength
base*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
v_normal=normal;
#endif
base=max(0.0,base);float attr_height=height;height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele=0.0;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float cutoff=1.0;vec3 scaled_pos=pos;
#ifdef RENDER_CUTOFF
vec3 centroid_random=vec3(centroid_pos.xy,centroid_pos.x+centroid_pos.y+1.0);vec3 ground_pos=centroid_pos.x==0.0 ? pos.xyz : (centroid_random/8.0);vec4 ground=u_matrix*vec4(ground_pos.xy,ele,1.0);cutoff=cutoff_opacity(u_cutoff_params,ground.z);if (centroid_pos.y !=0.0 && centroid_pos.x !=0.0) {vec3 g=floor(ground_pos);vec3 mod_=centroid_random-g*8.0;float seed=min(1.0,0.1*(min(3.5,max(mod_.x+mod_.y,0.2*attr_height))*0.35+mod_.z));if (cutoff < 0.8-seed) {cutoff=0.0;}}float cutoff_scale=cutoff;v_cutoff_opacity=cutoff;scaled_pos.z=mix(c_ele,h,cutoff_scale);
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (cutoff==0.0 && centroid_pos.x !=0.0) || (color.a==0.0));
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);scaled_pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;scaled_pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
gl_Position=mix(u_matrix*vec4(scaled_pos,1),AWAY,hidden);h=h-ele;v_height=h;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifndef LIGHTING_3D_MODE
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#endif
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
float is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;
#endif
v_color=vec4(color.rgb,1.0);v_flat=vec4(linearProduct(color.rgb,vec3(calculate_NdotL(normal))),1.0);
#else
v_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionDepth:ri(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_width_scale;uniform float u_vertical_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp vec4 color
out highp float v_depth;void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp vec4 color
base*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base);pos=vec3(pos_nx.xy,h);
#else
pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}`),fillExtrusionPattern:ri(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
in vec3 v_normal;
#endif
in highp vec2 v_pos;in vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_width_scale;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
out highp vec2 v_pos;out vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
out vec3 v_normal;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
#pragma mapbox: define highp float line_width
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
#pragma mapbox: initialize highp float line_width
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);p.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;p.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_normal=normal;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),groundShadow:ri(`#include "_prelude_shadow.fragment.glsl"
precision highp float;uniform vec3 u_ground_shadow_factor;in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#ifdef FOG
in float v_fog_opacity;
#endif
void main() {float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);
#ifdef RENDER_CUTOFF
shadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w));
#endif
#ifdef FOG
shadow=mix(shadow,vec3(1.0),v_fog_opacity);
#endif
#ifdef INDICATOR_CUTOUT
shadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0)).r);
#endif
glFragColor=vec4(shadow,1.0);}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;in vec2 a_pos;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;
#ifdef FOG
out float v_fog_opacity;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);
#ifdef FOG
v_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);
#endif
}`),fillExtrusionGroundEffect:ri(`uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;
#ifdef SDF_SUBPASS
in highp vec2 v_pos;in highp vec4 v_line_segment;in highp float v_flood_light_radius_tile;in highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}
#ifdef FOG
in highp float v_fog;
#endif
#endif
void main() {
#ifdef CLEAR_SUBPASS
vec4 color=vec4(1.0);
#ifdef CLEAR_FROM_TEXTURE
color=texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size));
#endif
glFragColor=color;
#else
#ifdef SDF_SUBPASS
highp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;
#ifdef FOG
fog=v_fog;
#endif
#ifdef RENDER_CUTOFF
fog*=v_cutoff_opacity;
#endif
glFragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));
#else
vec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);
#ifdef OVERDRAW_INSPECTOR
color=vec4(1.0);
#endif
glFragColor=color;
#endif
HANDLE_WIREFRAME_DEBUG;
#endif
}`,`#include "_prelude_fog.vertex.glsl"
in highp vec4 a_pos_end;in highp float a_angular_offset_factor;in highp float a_hidden_by_landmark;
#ifdef SDF_SUBPASS
out highp vec2 v_pos;out highp vec4 v_line_segment;out highp float v_flood_light_radius_tile;out highp vec2 v_ao;
#ifdef FOG
out highp float v_fog;
#endif
#endif
uniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp float u_dynamic_offset;uniform highp vec2 u_ao;
#pragma mapbox: define highp float flood_light_ground_radius
const float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {
#pragma mapbox: initialize highp float flood_light_ground_radius
vec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;fl_ground_radius=abs(flood_light_ground_radius);float direction=flood_light_ground_radius < 0.0 ?-1.0 : 1.0;float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=direction*angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(u_dynamic_offset,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=direction*perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;
#ifdef SDF_SUBPASS
v_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);
#ifdef FOG
v_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);
#endif
#endif
float hidden_by_landmark=0.0;
#ifdef HAS_CENTROID
hidden_by_landmark=a_hidden_by_landmark;
#endif
float isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),hillshadePrepare:ri(`precision highp float;uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;float getElevation(vec2 coord) {return texture(u_image,coord).r/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));glFragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ri(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);glFragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
glFragColor=apply_lighting_with_emission_ground(glFragColor,u_emissive_strength);
#endif
#ifdef FOG
glFragColor=fog_dither(fog_apply_premultiplied(glFragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:ri(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;in vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture(u_dash_image,v_tex).r;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trim_alpha=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);out_color=mix(out_color,u_trim_color,transition_factor);trim_alpha=out_color.a;}
#endif
if (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}
#ifdef RENDER_LINE_BORDER
float edgeBlur=(border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color.rgb=mix(border_color.rgb*border_color.a*trim_alpha,out_color.rgb,smoothAlpha);}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define EXTRUDE_SCALE 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
in float a_z_offset;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
in highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
in float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;out vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);
#ifdef ELEVATED_ROADS
gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset+0.01*step(0.01,a_z_offset),1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 halfCellProgress=normal.yx*32.0;float ele0=elevation(pos);float ele_line=max(ele0,max(elevation(pos+halfCellProgress),elevation(pos-halfCellProgress)));float ele1=elevation(pos+offsetTile);float ele2=elevation(pos-offsetTile);float ele_max=max(ele_line,0.5*(ele1+ele2));float ele=ele_max-ele0+ele1+a_z_offset ;gl_Position=u_matrix*vec4(pos+offsetTile,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*0.1*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:ri(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform highp float u_device_pixel_ratio;uniform highp float u_alpha_discard_threshold;uniform highp vec2 u_texsize;uniform highp float u_tile_units_to_pixels;uniform highp vec2 u_trim_offset;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in highp float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec4 v_uv;
#endif
#ifdef LINE_JOIN_NONE
in vec2 v_pattern_data;
#endif
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;float pattern_size=display_size.x/u_tile_units_to_pixels;float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);highp float pattern_x=v_linesofar/pattern_size*aspect;highp float x=mod(pattern_x,1.0);highp float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;highp vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));highp vec2 lod_pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(pattern_x,y));vec4 color=textureLodCustom(u_image,pos,lod_pos);
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {color=vec4(0,0,0,0);}}
#endif
#ifdef LINE_JOIN_NONE
float pattern_len=pattern_size/aspect;float segment_phase=pattern_len-mod(v_linesofar-v_pattern_data.x+pattern_len,pattern_len);float visible_start=segment_phase-step(pattern_len*0.5,segment_phase)*pattern_len;float visible_end=floor((v_pattern_data.y-segment_phase)/pattern_len)*pattern_len+segment_phase;visible_end+=step(pattern_len*0.5,v_pattern_data.y-visible_end)*pattern_len;if (v_pattern_data.x < visible_start || v_pattern_data.x >=visible_end) {color=vec4(0.0);}
#endif
#ifdef LIGHTING_3D_MODE
color=apply_lighting_ground(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=(alpha*opacity);if (u_alpha_discard_threshold !=0.0) {if (color.a < u_alpha_discard_threshold) {discard;}}
#ifdef INDICATOR_CUTOUT
color=applyCutout(color);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
in float a_z_offset;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec4 a_packed;
#endif
in highp float a_linesofar;
#ifdef LINE_JOIN_NONE
in highp vec3 a_pattern_data;out vec2 v_pattern_data;
#endif
uniform mat4 u_matrix;uniform float u_tile_units_to_pixels;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out highp float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
out highp vec4 v_uv;
#endif
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
#pragma mapbox: define mediump float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define mediump float floorwidth
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
void main() {
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
#pragma mapbox: initialize mediump float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize mediump float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);vec2 dist=outset*a_extrude*scale;float u=0.5*a_direction;float t=1.0-abs(u);vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);
#ifdef ELEVATED_ROADS
gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset+0.01*step(0.01,a_z_offset),1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 halfCellProgress=normal.yx*32.0;float ele0=elevation(pos);float ele_line=max(ele0,max(elevation(pos+halfCellProgress),elevation(pos-halfCellProgress)));float ele1=elevation(pos+offsetTile);float ele2=elevation(pos-offsetTile);float ele_max=max(ele_line,0.5*(ele1+ele2));float ele=ele_max-ele0+ele1+a_z_offset ;gl_Position=u_matrix*vec4(pos+offsetTile,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*0.1*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
float a_uv_x=a_packed[0];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef LINE_JOIN_NONE
v_width=floorwidth+ANTIALIASING;mediump float pixels_to_tile_units=1.0/u_tile_units_to_pixels;mediump float pixel_ratio_inverse=1.0/pixel_ratio;mediump float aspect=v_width/((pattern.w-pattern.y)*pixel_ratio_inverse);highp float subt_multiple=(pattern.z-pattern.x)*pixel_ratio_inverse*pixels_to_tile_units*aspect*32.0;highp float subt=floor(a_pattern_data.z/subt_multiple)*subt_multiple;float offset_sign=(fract(a_pattern_data.x)-0.5)*4.0;float line_progress_offset=offset_sign*v_width*0.5*pixels_to_tile_units;v_linesofar=(a_pattern_data.z-subt)+a_linesofar+line_progress_offset;v_pattern_data=vec2(a_pattern_data.x+line_progress_offset,a_pattern_data.y);
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:ri(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_raster_array.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;uniform highp float u_zoom_transition;in vec2 v_pos0;in vec2 v_pos1;in float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
in float v_split_fade;
#endif
uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;uniform float u_emissive_strength;
#ifndef RASTER_ARRAY
uniform sampler2D u_image0;uniform sampler2D u_image1;
#endif
#ifdef RASTER_COLOR
uniform sampler2D u_color_ramp;uniform highp vec4 u_colorization_mix;uniform highp float u_colorization_offset;uniform vec2 u_texture_res;
#endif
void main() {vec4 color0,color1,color;vec2 value;
#ifdef RASTER_COLOR
#ifdef RASTER_ARRAY
#ifdef RASTER_ARRAY_LINEAR
value=mix(
raTexture2D_image0_linear(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_linear(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#else
value=mix(
raTexture2D_image0_nearest(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_nearest(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#endif
if (value.y > 0.0) value.x/=value.y;
#else
color=mix(texture(u_image0,v_pos0),texture(u_image1,v_pos1),u_fade_t);value=vec2(u_colorization_offset+dot(color.rgb,u_colorization_mix.rgb),color.a);
#endif
color=texture(u_color_ramp,vec2(value.x,0.5));if (color.a > 0.0) color.rgb/=color.a;color.a*=value.y;
#else
color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);
#endif
color.a*=u_opacity;
#ifdef GLOBE_POLES
color.a*=1.0-smoothstep(0.0,0.05,u_zoom_transition);
#endif
vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),u_emissive_strength).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef PROJECTION_GLOBE_VIEW
glFragColor*=mix(1.0,1.0-smoothstep(0.0,0.05,u_zoom_transition),smoothstep(0.8,0.9,v_split_fade));
#endif
#ifdef RENDER_CUTOFF
glFragColor=glFragColor*cutoff_opacity(u_cutoff_params,v_depth);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;uniform vec2 u_texture_offset;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;in vec2 a_texture_pos;
#endif
out vec2 v_pos0;out vec2 v_pos1;out float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
out float v_split_fade;
#endif
void main() {vec2 uv;
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;gl_Position=u_matrix*u_globe_matrix*vec4(globe_pos   ,1.0);uv=a_uv;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);
#endif
#else
float w=1.0+dot(a_texture_pos,u_perspective_transform);uv=a_texture_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);    
v_split_fade=0.0;if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;float opposite_merc_center=mod(u_merc_center.x+0.5,1.0);float dist_from_poles=(abs(mercatorY-0.5)*2.0);float range=0.1;v_split_fade=abs(opposite_merc_center-mercatorX);v_split_fade=clamp(1.0-v_split_fade,0.0,1.0);v_split_fade=max(smoothstep(1.0-range,1.0,dist_from_poles),max(smoothstep(1.0-range,1.0,v_split_fade),smoothstep(1.0-range,1.0,1.0-v_split_fade)));}float tiles=u_grid_matrix[0][2];if (tiles > 0.0) {float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvY=mercatorY*tiles-idy;float uvX=mercatorX*tiles-idx;uv=vec2(uvX,uvY);}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;v_pos0=u_texture_offset.x+u_texture_offset.y*v_pos0;v_pos1=u_texture_offset.x+u_texture_offset.y*v_pos1;
#ifdef RENDER_CUTOFF
v_depth=gl_Position.z;
#endif
}`),rasterParticle:ri(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;in vec2 v_pos0;in vec2 v_pos1;uniform sampler2D u_image0;uniform sampler2D u_image1;void main() {vec4 color0,color1,color;color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 out_color=color.rgb;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),0.0).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {float w=1.0;vec2 uv;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvX=mercatorX*tiles-idx;float uvY=mercatorY*tiles-idy;uv=vec2(uvX,uvY);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
uv=a_texture_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),rasterParticleDraw:ri("uniform sampler2D u_color_ramp;in float v_particle_speed;void main() {glFragColor=texture(u_color_ramp,vec2(v_particle_speed,0.5));}",`#include "_prelude_raster_particle.glsl"
in float a_index;uniform sampler2D u_particle_texture;uniform float u_particle_texture_side_len;uniform vec2 u_tile_offset;out float v_particle_speed;void main() {ivec2 pixel_coord=ivec2(
mod(a_index,u_particle_texture_side_len),a_index/u_particle_texture_side_len);vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);vec2 pos=unpack_pos_from_rgba(pixel)+u_tile_offset;vec2 tex_coord=fract(pos);vec2 velocity=lookup_velocity(tex_coord);if (velocity==INVALID_VELOCITY) {gl_Position=AWAY;v_particle_speed=0.0;} else {gl_Position=vec4(2.0*pos-1.0,0,1);v_particle_speed=length(velocity);}gl_PointSize=1.0;}`),rasterParticleTexture:ri("uniform sampler2D u_texture;uniform float u_opacity;in vec2 v_tex_pos;void main() {vec4 color=texture(u_texture,v_tex_pos);glFragColor=vec4(floor(255.0*color*u_opacity)/255.0);}","in vec2 a_pos;out vec2 v_tex_pos;void main() {vec2 uv=0.5*a_pos+vec2(0.5);v_tex_pos=uv;gl_Position=vec4(a_pos,0.0,1.0);}"),rasterParticleUpdate:ri(`#include "_prelude_raster_particle.glsl"
uniform sampler2D u_particle_texture;uniform mediump float u_particle_texture_side_len;uniform mediump float u_speed_factor;uniform highp float u_reset_rate;uniform highp float u_rand_seed;in highp vec2 v_tex_coord;vec2 linearstep(vec2 edge0,vec2 edge1,vec2 x) {return  clamp((x-edge0)/(edge1-edge0),vec2(0),vec2(1));}const highp vec3 rand_constants=vec3(12.9898,78.233,4375.85453);highp float rand(const highp vec2 co) {highp float t=dot(rand_constants.xy,co);return fract(sin(t)*(rand_constants.z+t));}void main() {ivec2 pixel_coord=ivec2(v_tex_coord*u_particle_texture_side_len);highp vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);highp vec2 pos=unpack_pos_from_rgba(pixel);highp vec2 velocity=lookup_velocity(clamp(pos,0.0,1.0));highp vec2 dp=velocity==INVALID_VELOCITY ? vec2(0) : velocity*u_speed_factor;pos=pos+dp;highp vec2 seed=(pos+v_tex_coord)*u_rand_seed;highp vec2 random_pos=vec2(rand(seed+1.3),rand(seed+2.1));highp vec2 persist_rate=pow(
linearstep(vec2(-u_particle_pos_offset),vec2(0),pos)*linearstep(vec2(1.0+u_particle_pos_offset),vec2(1),pos),vec2(4)
);highp vec2 per_frame_persist=pow(persist_rate,abs(dp)/u_particle_pos_offset);highp float drop_rate=1.0-per_frame_persist.x*per_frame_persist.y;drop_rate=any(greaterThanEqual(abs(pos-0.5),vec2(0.5+u_particle_pos_offset))) ? 1.0 : drop_rate;highp float drop=step(1.0-drop_rate-u_reset_rate,rand(seed));highp vec2 next_pos=mix(pos,random_pos,drop);glFragColor=pack_pos_to_rgba(next_pos);}`,"in vec2 a_pos;out vec2 v_tex_coord;void main() {v_tex_coord=0.5*(a_pos+vec2(1.0));gl_Position=vec4(a_pos,0.0,1.0);}"),symbol:ri(`#include "_prelude_lighting.glsl"
#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;
#ifdef ICON_TRANSITION
uniform float u_icon_transition;
#endif
#ifdef COLOR_ADJUSTMENT
uniform mat4 u_color_adj_mat;
#endif
in vec2 v_tex_a;
#ifdef ICON_TRANSITION
in vec2 v_tex_b;
#endif
in float v_draw_halo;in vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
in float is_sdf;in vec2 v_tex_a_icon;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec4 out_color;float fade_opacity=v_gamma_scale_size_fade_opacity[2];
#ifdef RENDER_TEXT_AND_SYMBOL
if (is_sdf==ICON) {vec2 tex_icon=v_tex_a_icon;lowp float alpha=opacity*fade_opacity;glFragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
return;}
#endif
#ifdef RENDER_SDF
float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_gamma_scale_size_fade_opacity.x;float size=v_gamma_scale_size_fade_opacity.y;float fontScale=u_is_text ? size/24.0 : size;out_color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {out_color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,v_tex_a).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);out_color*=alpha;
#else
#ifdef ICON_TRANSITION
vec4 a=texture(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b);
#else
out_color=texture(u_texture,v_tex_a);
#endif
#ifdef COLOR_ADJUSTMENT
out_color=u_color_adj_mat*out_color;
#endif
#endif
out_color*=opacity*fade_opacity;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_auto_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
#ifdef ICON_TRANSITION
in vec2 a_texb;
#endif
#ifdef OCCLUSION_QUERIES
in float a_occlusion_query_opacity;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_elevation_from_sea;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out vec2 v_tex_a;
#ifdef ICON_TRANSITION
out vec2 v_tex_b;
#endif
out float v_draw_halo;out vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
out float is_sdf;out vec2 v_tex_a_icon;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
#pragma mapbox: define lowp float occlusion_opacity
#pragma mapbox: define lowp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
#pragma mapbox: initialize lowp float occlusion_opacity
#pragma mapbox: initialize lowp float z_offset
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=u_elevation_from_sea ? z_offset : z_offset+elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_auto_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;vec3 world_pos_globe;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos_globe=a_globe_anchor+h;world_pos=mix_globe_mercator(world_pos_globe,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;vec2 a;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);vec4 projected_point_globe=u_matrix*vec4(world_pos_globe,1);a=projected_point_globe.xy/projected_point_globe.w;
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);a=projected_point.xy/projected_point.w;
#endif
vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
#ifdef Z_OFFSET
z+=u_pitch_with_map ? a_auto_z_offset+(u_elevation_from_sea ? z_offset : z_offset) : 0.0;
#else
z+=u_pitch_with_map ? (u_elevation_from_sea ? z_offset : z_offset) : 0.0;
#endif
float occlusion_fade=globe_occlusion_fade;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float out_fade_opacity=interpolated_fade_opacity*projection_transition_fade;
#ifdef DEPTH_OCCLUSION
float depth_occlusion=occlusionFadeMultiSample(projected_point);float depth_occlusion_multplier=mix(occlusion_opacity,1.0,depth_occlusion);out_fade_opacity*=depth_occlusion_multplier;
#endif
#ifdef OCCLUSION_QUERIES
float occludedFadeMultiplier=mix(occlusion_opacity,1.0,a_occlusion_query_opacity);out_fade_opacity*=occludedFadeMultiplier;
#endif
float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_gamma_scale_size_fade_opacity=vec3(gamma_scale,size,out_fade_opacity);v_tex_a=a_tex/u_texsize;
#ifdef RENDER_TEXT_AND_SYMBOL
is_sdf=a_size[0]-2.0*a_size_min;v_tex_a_icon=a_tex/u_texsize_icon;
#endif
#ifdef ICON_TRANSITION
v_tex_b=a_texb/u_texsize;
#endif
}`),terrainRaster:ri(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;in vec2 v_pos0;
#ifdef FOG
in float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#endif
uniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture(u_image0,v_pos0);vec4 color;
#ifdef LIGHTING_3D_MODE
const vec3 normal=vec3(0.0,0.0,1.0);
#ifdef RENDER_SHADOWS
float cutoffOpacity=1.0;
#ifdef RENDER_CUTOFF
cutoffOpacity=cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w);
#endif
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
vec3 unlit_base=image_color.rgb*(1.0-image_color.a);vec3 emissive_base=image_color.rgb*image_color.a;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;
#else
float lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));
#endif
#else
float lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color.rgb=mix(color.rgb,image_color.rgb,image_color.a);color.a=1.0;
#endif
#endif
#else
color=image_color;
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_skirt_height;in vec2 a_pos;out vec2 v_pos0;
#ifdef FOG
out float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);
#endif
}`),terrainDepth:ri("precision highp float;in float v_depth;void main() {glFragColor=pack_depth(v_depth);}",`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;out float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}`),skybox:ri(`#include "_prelude_fog.fragment.glsl"
in lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=texture(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);glFragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,Bu),skyboxGradient:ri(`#include "_prelude_fog.fragment.glsl"
in highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,Bu),skyboxCapture:ri(`
in highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;precision highp float;
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;glFragColor=vec4(color,1.0);}`,"in highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;out highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:ri(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;uniform float u_far_z_cutoff;in vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
raster=apply_lighting_with_emission_ground(raster,raster.a);color=vec4(raster.rgb*antialias,antialias);
#else
raster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color=apply_lighting_with_emission_ground(color,color.a);color.a=1.0;
#else
color=apply_lighting_ground(color);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=1.0-step(u_far_z_cutoff,1.0/gl_FragCoord.w);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;
#endif
out vec2 v_pos0;void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:ri(`#include "_prelude_fog.fragment.glsl"
uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;in highp vec3 v_ray_dir;in highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {
#ifdef ALPHA_PASS
glFragColor=vec4(0,0,0,0);return;
#else
#ifdef NATIVE
glFragColor=vec4(1,1,1,1);
#else
glFragColor=vec4(0,0,0,1);
#endif
return;
#endif
}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;
#ifdef ALPHA_PASS
float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);glFragColor=vec4(1.0,1.0,1.0,a);
#else
vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;
#ifndef NATIVE
c=dither(c,gl_FragCoord.xy+u_temporal_offset);
#endif
glFragColor=vec4(c*t,t);
#endif
}`,`in vec3 a_pos;in vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;out highp vec3 v_ray_dir;out highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`),model:ri(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_opacity;uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;in highp vec4 v_position_height;in lowp vec4 v_color_mix;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
#ifdef OCCLUSION_TEXTURE_TRANSFORM
uniform vec4 u_occlusionTextureTransform;
#endif
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#ifdef HAS_ATTRIBUTE_a_pbr
in lowp vec4 v_roughness_metallic_emissive_alpha;in mediump vec4 v_height_based_emission_params;
#endif
#ifdef HAS_TEXTURE_u_baseColorTexture
uniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;
#endif
#ifdef HAS_TEXTURE_u_metallicRoughnessTexture
uniform sampler2D u_metallicRoughnessTexture;
#endif
#ifdef HAS_TEXTURE_u_occlusionTexture
uniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;
#endif
#ifdef HAS_TEXTURE_u_normalTexture
uniform sampler2D u_normalTexture;
#endif
#ifdef HAS_TEXTURE_u_emissionTexture
uniform sampler2D u_emissionTexture;
#endif
#ifdef APPLY_LUT_ON_GPU
uniform highp sampler3D u_lutTexture;
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
in highp float v_depth;uniform highp sampler2D u_depthTexture;uniform highp vec2 u_inv_depth_size;uniform highp vec2 u_depth_range_unpack;
#ifdef DEPTH_D24
highp float unpack_depth(highp float depth) {return  depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}
#else
highp float unpack_depth_rgba(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded() {highp vec2 coord=gl_FragCoord.xy*u_inv_depth_size;
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depthTexture,coord).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depthTexture,coord));
#endif
return v_depth > depth+0.0005;}
#endif
#define saturate(_x) clamp(_x,0.,1.)
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)
{
#ifdef LIGHTING_3D_MODE
vec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));
#endif
return apply_lighting(albedo,transformed_normal,lighting_factor);
#else
vec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;
#endif
}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;
#ifdef HAS_ATTRIBUTE_a_color_3f
albedo*=vec4(color_3f,1.0);
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#else
#ifdef HAS_ATTRIBUTE_a_color_4f
albedo*=color_4f;
#endif
#endif
#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)
vec4 texColor=texture(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}
#ifdef UNPREMULT_TEXTURE_IN_SHADER
if(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;
#endif
if(u_baseTextureIsAlpha) {if (texColor.r < 0.5) {discard;}} else {texColor.rgb=sRGBToLinear(texColor.rgb);albedo*=texColor;}
#endif
vec4 color=vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);
#ifdef APPLY_LUT_ON_GPU
color=applyLUT(u_lutTexture,color);
#endif
return color;}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {
#ifdef HAS_TEXTURE_u_normalTexture
highp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;
#else
return mat3(1.0);
#endif
}highp vec3 getNormal(){highp vec3 n;
#ifdef HAS_ATTRIBUTE_a_normal_3f
n=normalize(normal_3f);
#else
highp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));n=normalize(cross(fdx,fdy))*-1.0;
#endif
#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
vec3 nMap=texture( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);
#endif
return n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;
#ifdef HAS_ATTRIBUTE_a_pbr
mat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;
#endif
#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) 
vec4 mrSample=texture(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;
#endif
const float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)
{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)
{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)
{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)
{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)
{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)
{
#ifdef LIGHTING_3D_MODE
return mat.diffuseColor;
#else
return mat.diffuseColor/PI;
#endif
}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)
{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)
{vec3 env_light=vec3(0.65,0.65,0.65);
#ifdef LIGHTING_3D_MODE
float ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;
#endif
vec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)
{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=NdotL;
#endif
vec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;
#if !defined(LIGHTING_3D_MODE)
const vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);
#endif
color*=intensityFactor;return color;}void main() {
#ifdef TERRAIN_FRAGMENT_OCCLUSION
if (isOccluded()) {discard;}
#endif
vec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;
#ifdef LIGHTING_3D_MODE
lightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;
#endif
vec4 finalColor;
#ifdef DIFFUSE_SHADED
vec3 N=getNormal();vec3 baseColor=getBaseColor().rgb;vec3 diffuse=getDiffuseShadedColor(baseColor,N,lightDir,lightColor);
#ifdef HAS_TEXTURE_u_occlusionTexture
float ao=(texture(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;
#endif
finalColor=vec4(mix(diffuse,baseColor,u_emissive_strength),1.0)*u_opacity;
#else
Material mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);float ao=1.0;
#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
#ifdef OCCLUSION_TEXTURE_TRANSFORM
vec2 uv=uv_2f.xy*u_occlusionTextureTransform.zw+u_occlusionTextureTransform.xy;
#else
vec2 uv=uv_2f;
#endif
ao=(texture(u_occlusionTexture,uv).x-1.0)*u_aoIntensity+1.0;color*=ao;
#endif
vec4 emissive=u_emissiveFactor;
#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
emissive.rgb*=sRGBToLinear(texture(u_emissionTexture,uv_2f).rgb);
#endif
#ifdef APPLY_LUT_ON_GPU
float emissiveFactorLength=max(length(u_emissiveFactor.rgb),0.001);emissive.rgb=sRGBToLinear(applyLUT(u_lutTexture,linearTosRGB(emissive.rgb/emissiveFactorLength).rbg))*emissiveFactorLength;
#endif
color+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;
#ifdef HAS_ATTRIBUTE_a_pbr
float resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);vec3 color_mix=v_color_mix.rgb;
#ifdef APPLY_LUT_ON_GPU
color_mix=applyLUT(u_lutTexture,color_mix);
#endif
color=mix(color,color_mix,min(1.0,resEmission));
#ifdef HAS_ATTRIBUTE_a_color_4f
float distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);
#endif
#endif
vec3 unlitColor=mat.baseColor.rgb*ao+emissive.rgb;color=mix(color,unlitColor,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);
#endif
#ifdef FOG
finalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));
#endif
#ifdef RENDER_CUTOFF
finalColor*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
finalColor=applyCutout(finalColor);
#endif
glFragColor=finalColor;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr
#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength
uniform mat4 u_matrix;uniform mat4 u_node_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_normal_matrix;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
out vec4 v_position_height;out lowp vec4 v_color_mix;
#ifdef TERRAIN_FRAGMENT_OCCLUSION
out highp float v_depth;
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
out lowp vec4 v_roughness_metallic_emissive_alpha;out mediump vec4 v_height_based_emission_params;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute-custom highp vec4 pbr
#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength
highp mat4 normal_matrix;
#ifdef INSTANCED_ARRAYS
normal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
normal_matrix=u_normal_matrix;
#endif
vec3 local_pos;mat3 rs;
#ifdef MODEL_POSITION_ON_GPU
vec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float hidden=float(pos_a.x > EXTENT);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=mix(u_matrix*pos,AWAY,hidden);pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;
#else
local_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);
#endif
v_position_height.w=a_pos_3f.z;
#ifdef HAS_ATTRIBUTE_a_pbr
vec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;
#endif
#ifdef FOG
v_fog_pos=fog_position(local_pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
float x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);
#else
normal_3f=vec3(normal_matrix*vec4(normal_3f,0));
#endif
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#ifdef HAS_ATTRIBUTE_a_color_4f
v_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);
#endif
#endif
#ifdef RENDER_SHADOWS
vec4 shadow_pos=u_node_matrix*vec4(local_pos,1.0);
#ifdef NORMAL_OFFSET
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
vec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#else
vec3 offset=shadow_normal_offset_model(normal_3f);shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#endif
#endif
#endif
v_pos_light_view_0=u_light_matrix_0*shadow_pos;v_pos_light_view_1=u_light_matrix_1*shadow_pos;v_depth_shadows=gl_Position.w;
#endif
}`),modelDepth:ri(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;
#ifdef MODEL_POSITION_ON_GPU
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_instance;
#endif
uniform highp mat4 u_node_matrix;
#endif
void main() {
#ifdef MODEL_POSITION_ON_GPU
highp mat4 instance;
#ifdef INSTANCED_ARRAYS
instance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
instance=u_instance;
#endif
vec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float hidden=float(pos_a.x > EXTENT);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=mix(u_matrix*pos,AWAY,hidden);
#else
gl_Position=u_matrix*vec4(a_pos_3f,1);
#endif
v_depth=gl_Position.z/gl_Position.w;}`),stars:ri(`in highp vec2 v_uv;in mediump float v_intensity;float shapeCircle(in vec2 uv)
{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;glFragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}`,`
in vec3 a_pos_3f;in vec2 a_uv;in float a_size_scale;in float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;out highp vec2 v_uv;out mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}`),occlusion:ri("uniform vec4 u_color;void main() {glFragColor=u_color;}",`#include "_prelude_terrain.vertex.glsl"
in highp vec2 a_offset_xy;uniform highp vec3 u_anchorPos;uniform mat4 u_matrix;uniform vec2 u_screenSizePx;uniform vec2 u_occluderSizePx;void main() {vec3 world_pos=u_anchorPos;
#ifdef TERRAIN
float e=elevation(world_pos.xy);world_pos.z+=e;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1.0);projected_point.xy+=projected_point.w*a_offset_xy*0.5*u_occluderSizePx/u_screenSizePx;gl_Position=projected_point;}`)};function ul(m,a){const u=m.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let g of u)if(g=g.trim(),g[0]==="#"&&g.includes("if")&&!g.includes("endif")){g=g.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const v=g.split(" ");for(const x of v)a.includes(x)||a.push(x)}}function ri(m,a){const u=/#include\s+"([^"]+)"/g,g=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g;let v=a.match(/(attribute(\S*)|(^\s*|;)in) (highp |mediump |lowp )?([\w]+) ([\w]+)/gm);v&&(v=v.map(Q=>{const j=Q.split(" ");return j[j.length-1]}),v=[...new Set(v)]);const x={},B=[],k=[];if(m=m.replace(u,(Q,j)=>(k.push(j),"")),(a=a.replace(u,(Q,j)=>(B.push(j),""))).includes("flat out"))return void console.error('The usage of "flat" qualifier is disallowed, see: https://bugs.webkit.org/show_bug.cgi?id=268071');let z=[...ih];ul(m,z),ul(a,z);for(const Q of[...B,...k])Bc[Q]||console.error(`Undefined include: ${Q}`),Wl[Q]||(Wl[Q]=[],ul(Bc[Q],Wl[Q])),z=[...z,...Wl[Q]];return{fragmentSource:m=m.replace(g,(Q,j,W,J,re)=>(x[re]=!0,j==="define"?`
#ifndef HAS_UNIFORM_u_${re}
in ${W} ${J} ${re};
#else
uniform ${W} ${J} u_${re};
#endif
`:j==="initialize"?`
#ifdef HAS_UNIFORM_u_${re}
    ${W} ${J} ${re} = u_${re};
#endif
`:j==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${re}
    in ${W} ${J} ${re};
#endif
`:j==="initialize-attribute"?"":void 0)),vertexSource:a=a.replace(g,(Q,j,W,J,re)=>{const de=J==="float"?"vec2":J,me=re.match(/color/)?"color":de;return j==="define-attribute-vertex-shader-only"?`
#ifdef HAS_ATTRIBUTE_a_${re}
in ${W} ${J} a_${re};
#endif
`:x[re]?j==="define"?`
#ifndef HAS_UNIFORM_u_${re}
uniform lowp float u_${re}_t;
in ${W} ${de} a_${re};
out ${W} ${J} ${re};
#else
uniform ${W} ${J} u_${re};
#endif
`:j==="initialize"?me==="vec4"?`
#ifndef HAS_UNIFORM_u_${re}
    ${re} = a_${re};
#else
    ${W} ${J} ${re} = u_${re};
#endif
`:`
#ifndef HAS_UNIFORM_u_${re}
    ${re} = unpack_mix_${me}(a_${re}, u_${re}_t);
#else
    ${W} ${J} ${re} = u_${re};
#endif
`:j==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${re}
    in ${W} ${J} a_${re};
    out ${W} ${J} ${re};
#endif
`:j==="initialize-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${re}
    ${re} = a_${re};
#endif
`:void 0:j==="define"?`
#ifndef HAS_UNIFORM_u_${re}
uniform lowp float u_${re}_t;
in ${W} ${de} a_${re};
#else
uniform ${W} ${J} u_${re};
#endif
`:j==="define-instanced"?me==="mat4"?`
#ifdef INSTANCED_ARRAYS
in vec4 a_${re}0;
in vec4 a_${re}1;
in vec4 a_${re}2;
in vec4 a_${re}3;
#else
uniform ${W} ${J} u_${re};
#endif
`:`
#ifdef INSTANCED_ARRAYS
in ${W} ${de} a_${re};
#else
uniform ${W} ${J} u_${re};
#endif
`:j==="initialize-attribute-custom"?`
#ifdef HAS_ATTRIBUTE_a_${re}
    ${W} ${J} ${re} = a_${re};
#endif
`:me==="vec4"?`
#ifndef HAS_UNIFORM_u_${re}
    ${W} ${J} ${re} = a_${re};
#else
    ${W} ${J} ${re} = u_${re};
#endif
`:`
#ifndef HAS_UNIFORM_u_${re}
    ${W} ${J} ${re} = unpack_mix_${me}(a_${re}, u_${re}_t);
#else
    ${W} ${J} ${re} = u_${re};
#endif
`}),staticAttributes:v,usedDefines:z,vertexIncludes:B,fragmentIncludes:k}}class Xc{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(a,u,g,v,x,B,k,z){this.context=a;let Q=this.boundPaintVertexBuffers.length!==v.length;for(let W=0;!Q&&W<v.length;W++)this.boundPaintVertexBuffers[W]!==v[W]&&(Q=!0);let j=this.boundDynamicVertexBuffers.length!==k.length;for(let W=0;!j&&W<k.length;W++)this.boundDynamicVertexBuffers[W]!==k[W]&&(j=!0);if(!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==g||Q||j||this.boundIndexBuffer!==x||this.boundVertexOffset!==B)this.freshBind(u,g,v,x,B,k,z);else{a.bindVertexArrayOES.set(this.vao);for(const W of k)W&&(W.bind(),z&&W.instanceCount&&W.setVertexAttribDivisor(a.gl,u,z));x&&x.dynamicDraw&&x.bind()}}freshBind(a,u,g,v,x,B,k){const z=a.numAttributes,Q=this.context,j=Q.gl;this.vao&&this.destroy(),this.vao=Q.gl.createVertexArray(),Q.bindVertexArrayOES.set(this.vao),this.boundProgram=a,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=v,this.boundVertexOffset=x,this.boundDynamicVertexBuffers=B,u.enableAttributes(j,a),u.bind(),u.setVertexAttribPointers(j,a,x);for(const W of g)W.enableAttributes(j,a),W.bind(),W.setVertexAttribPointers(j,a,x);for(const W of B)W&&(W.enableAttributes(j,a),W.bind(),W.setVertexAttribPointers(j,a,x),k&&W.instanceCount&&W.setVertexAttribDivisor(j,a,k));v&&v.bind(),Q.currentNumAttributes=z}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function Ua(m,a){const u=Math.pow(2,a.canonical.z),g=a.canonical.y;return[new i.a5(0,g/u).toLngLat().lat,new i.a5(0,(g+1)/u).toLngLat().lat]}function Wa(m,a,u,g,v,x,B){const k=m.context,z=k.gl,Q=u.hillshadeFBO;if(!Q)return;m.prepareDrawTile();const j=m.isTileAffectedByFog(a),W=m.getOrCreateProgram("hillshade",{overrideFog:j});k.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,Q.colorAttachment.get());const J=((_e,xe,ze,Qe)=>{const Ue=ze.paint.get("hillshade-shadow-color"),Xe=ze.paint.get("hillshade-highlight-color"),qe=ze.paint.get("hillshade-accent-color"),ut=ze.paint.get("hillshade-emissive-strength");let it=i.bB(ze.paint.get("hillshade-illumination-direction"));if(ze.paint.get("hillshade-illumination-anchor")==="viewport")it-=_e.transform.angle;else if(_e.style&&_e.style.enable3dLights()&&_e.style.directionalLight){const xt=_e.style.directionalLight.properties.get("direction"),pt=i.c7(xt.x,xt.y,xt.z);it=i.bB(pt[1])}const ht=!_e.options.moving;return{u_matrix:Qe||_e.transform.calculateProjMatrix(xe.tileID.toUnwrapped(),ht),u_image:0,u_latrange:Ua(0,xe.tileID),u_light:[ze.paint.get("hillshade-exaggeration"),it],u_shadow:Ue.toRenderColor(ze.lut),u_highlight:Xe.toRenderColor(ze.lut),u_emissive_strength:ut,u_accent:qe.toRenderColor(ze.lut)}})(m,u,g,m.terrain?a.projMatrix:null);m.uploadCommonUniforms(k,W,a.toUnwrapped());const{tileBoundsBuffer:re,tileBoundsIndexBuffer:de,tileBoundsSegments:me}=m.getTileBoundsBuffers(u);W.draw(m,z.TRIANGLES,v,x,B,ir.disabled,J,g.id,re,de,me)}function Mo(m,a,u){if(!a.needsDEMTextureUpload)return;const g=m.context,v=g.gl;g.pixelStoreUnpackPremultiplyAlpha.set(!1),a.demTexture=a.demTexture||m.getTileTexture(u.stride);const x=u.getPixels();a.demTexture?a.demTexture.update(x,{premultiply:!1}):a.demTexture=new i.T(g,x,v.R32F,{premultiply:!1}),a.needsDEMTextureUpload=!1}function Eo(m,a,u){const g=m.context,v=g.gl;if(!a.dem)return;const x=a.dem;if(g.activeTexture.set(v.TEXTURE1),Mo(m,a,x),!a.demTexture)return;a.demTexture.bind(v.NEAREST,v.CLAMP_TO_EDGE);const B=x.dim;g.activeTexture.set(v.TEXTURE0);let k=a.hillshadeFBO;if(!k){const J=new i.T(g,{width:B,height:B,data:null},v.RGBA8);J.bind(v.LINEAR,v.CLAMP_TO_EDGE),k=a.hillshadeFBO=g.createFramebuffer(B,B,!0,"renderbuffer"),k.colorAttachment.set(J.texture)}g.bindFramebuffer.set(k.framebuffer),g.viewport.set([0,0,B,B]);const{tileBoundsBuffer:z,tileBoundsIndexBuffer:Q,tileBoundsSegments:j}=m.getMercatorTileBoundsBuffers(),W=[];m.linearFloatFilteringSupported()&&W.push("TERRAIN_DEM_FLOAT_FORMAT"),m.getOrCreateProgram("hillshadePrepare",{defines:W}).draw(m,v.TRIANGLES,Le.disabled,Qt.disabled,fe.unblended,ir.disabled,((J,re)=>{const de=re.stride,me=i.a6.mat4.create();return i.a6.mat4.ortho(me,0,i.ab,-i.ab,0,0,1),i.a6.mat4.translate(me,me,[0,-i.ab,0]),{u_matrix:me,u_image:1,u_dimension:[de,de],u_zoom:J.overscaledZ}})(a.tileID,x),u.id,z,Q,j),a.needsHillshadePrepare=!1}class Wr{constructor(a){this.gl=a.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(a){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ks extends Wr{getDefault(){return i.bz.transparent}set(a){const u=this.current;(a.r!==u.r||a.g!==u.g||a.b!==u.b||a.a!==u.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class Zc extends Wr{getDefault(){return 1}set(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)}}class Vh extends Wr{getDefault(){return 0}set(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)}}class Su extends Wr{getDefault(){return[!0,!0,!0,!0]}set(a){const u=this.current;(a[0]!==u[0]||a[1]!==u[1]||a[2]!==u[2]||a[3]!==u[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class oh extends Wr{getDefault(){return!0}set(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)}}class TA extends Wr{getDefault(){return 255}set(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)}}class xf extends Wr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(a){const u=this.current;(a.func!==u.func||a.ref!==u.ref||a.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)}}class hl extends Wr{getDefault(){const a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]}set(a){const u=this.current;(a[0]!==u[0]||a[1]!==u[1]||a[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)}}class va extends Wr{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;a?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=a,this.dirty=!1}}class Cf extends Wr{getDefault(){return[0,1]}set(a){const u=this.current;(a[0]!==u[0]||a[1]!==u[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)}}class IA extends Wr{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;a?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=a,this.dirty=!1}}class Ng extends Wr{getDefault(){return this.gl.LESS}set(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)}}class PA extends Wr{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;a?u.enable(u.BLEND):u.disable(u.BLEND),this.current=a,this.dirty=!1}}class Sd extends Wr{getDefault(){const a=this.gl;return[a.ONE,a.ZERO,a.ONE,a.ZERO]}set(a){const u=this.current;(a[0]!==u[0]||a[1]!==u[1]||a[2]!==u[2]||a[3]!==u[3]||this.dirty)&&(this.gl.blendFuncSeparate(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class Ef extends Wr{getDefault(){return i.bz.transparent}set(a){const u=this.current;(a.r!==u.r||a.g!==u.g||a.b!==u.b||a.a!==u.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class LA extends Wr{getDefault(){return this.gl.FUNC_ADD}set(a){(a!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(a,a),this.current=a,this.dirty=!1)}}class Bf extends Wr{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;a?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=a,this.dirty=!1}}class FA extends Wr{getDefault(){return this.gl.BACK}set(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)}}class Sf extends Wr{getDefault(){return this.gl.CCW}set(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)}}let ym=class extends Wr{getDefault(){return null}set(m){(m!==this.current||this.dirty)&&(this.gl.useProgram(m),this.current=m,this.dirty=!1)}};class Tf extends Wr{getDefault(){return this.gl.TEXTURE0}set(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)}}class If extends Wr{getDefault(){const a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]}set(a){const u=this.current;(a[0]!==u[0]||a[1]!==u[1]||a[2]!==u[2]||a[3]!==u[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class _m extends Wr{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,a),this.current=a,this.dirty=!1}}class Bl extends Wr{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class vm extends Wr{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,a),this.current=a,this.dirty=!1}}class RA extends Wr{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class kA extends Wr{getDefault(){return null}set(a){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class bm extends Wr{getDefault(){return null}set(a){this.gl&&(a!==this.current||this.dirty)&&(this.gl.bindVertexArray(a),this.current=a,this.dirty=!1)}}class Pf extends Wr{getDefault(){return 4}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}}class Td extends Wr{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}}class Qh extends Wr{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}}class Lf extends Wr{constructor(a,u){super(a),this.context=a,this.parent=u}getDefault(){return null}}class MA extends Lf{setDirty(){this.dirty=!0}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}}class OA extends Lf{attachment(){return this.gl.DEPTH_ATTACHMENT}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,this.attachment(),u.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class zg extends Lf{attachment(){return this.gl.DEPTH_ATTACHMENT}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,this.attachment(),u.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}}class Id extends OA{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}const o0=(m,a,u)=>({u_matrix:m,u_image0:0,u_skirt_height:a,u_ground_shadow_factor:u}),Vg=(m,a,u,g,v,x,B,k,z,Q,j,W,J,re,de,me)=>({u_proj_matrix:Float32Array.from(m),u_globe_matrix:a,u_normalize_matrix:Float32Array.from(g),u_merc_matrix:u,u_zoom_transition:v,u_merc_center:x,u_image0:0,u_frustum_tl:B,u_frustum_tr:k,u_frustum_br:z,u_frustum_bl:Q,u_globe_pos:j,u_globe_radius:W,u_viewport:J,u_grid_matrix:me?Float32Array.from(me):new Float32Array(9),u_skirt_height:re,u_far_z_cutoff:de});function Tu(m,a){return m!=null&&a!=null&&!(!m.hasData()||!a.hasData())&&m.demTexture!=null&&a.demTexture!=null&&m.tileID.key!==a.tileID.key}const Na=new class{constructor(){this.operations={}}newMorphing(m,a,u,g,v){if(m in this.operations){const x=this.operations[m];x.to.tileID.key!==u.tileID.key&&(x.queued=u)}else this.operations[m]={startTime:g,phase:0,duration:v,from:a,to:u,queued:null}}getMorphValuesForProxy(m){if(!(m in this.operations))return null;const a=this.operations[m];return{from:a.from,to:a.to,phase:a.phase}}update(m){for(const a in this.operations){const u=this.operations[a];for(u.phase=(m-u.startTime)/u.duration;u.phase>=1||!this._validOp(u);)if(!this._nextOp(u,m)){delete this.operations[a];break}}}_nextOp(m,a){return!!m.queued&&(m.from=m.to,m.to=m.queued,m.queued=null,m.phase=0,m.startTime=a,!0)}_validOp(m){return m.from.hasData()&&m.to.hasData()}},Yc={0:null,1:"TERRAIN_VERTEX_MORPHING"};function Qg(m,a,u){if(a===0)return 0;const g=a<1&&u===514?.25/a:1;return 6*Math.pow(1.5,22-m)*Math.max(a,1)*g}function DA(m,a){const u=1<<m.z;return!a&&(m.x===0||m.x===u-1)||m.y===0||m.y===u-1}const Zl=m=>({u_matrix:m});function Xa(m,a,u,g,v){if(v>0){const x=i.q.now(),B=(x-m.timeAdded)/v,k=a?(x-a.timeAdded)/v:-1,z=u.getSource(),Q=g.coveringZoomLevel({tileSize:z.tileSize,roundZoom:z.roundZoom}),j=!a||Math.abs(a.tileID.overscaledZ-Q)>Math.abs(m.tileID.overscaledZ-Q),W=j&&m.refreshedUponExpiration?1:i.ap(j?B:1-k,0,1);return m.refreshedUponExpiration&&B>=1&&(m.refreshedUponExpiration=!1),a?{opacity:1,mix:1-W}:{opacity:W,mix:0}}return{opacity:1,mix:0}}class Pd extends cs{constructor(a){const u={type:"raster-dem",maxzoom:a.transform.maxZoom},g=new i.cd(i.ce(),null),v=Ql("mock-dem",u,g,a.style);super("mock-dem",v,!1),v.setEventedParent(this),this._sourceLoaded=!0}_loadTile(a,u){a.state="loaded",u(null)}}class Hg extends cs{constructor(a){const u=Ql("proxy",{type:"geojson",maxzoom:a.transform.maxZoom},new i.cd(i.ce(),null),a.style);super("proxy",u,!1),u.setEventedParent(this),this.map=this.getSource().map=a,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(a,u,g){if(a.freezeTileCoverage)return;this.transform=a;const v=a.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((x,B)=>{if(x[B.key]="",!this._tiles[B.key]){const k=new Fa(B,this._source.tileSize*B.overscaleFactor(),a.tileZoom);k.state="loaded",this._tiles[B.key]=k}return x},{});for(const x in this._tiles)x in v||(this.freeFBO(x),this._tiles[x].unloadVectorData(),delete this._tiles[x])}freeFBO(a){const u=this.proxyCachedFBO[a];if(u!==void 0){const g=Object.values(u);this.renderCachePool.push(...g),delete this.proxyCachedFBO[a]}}deallocRenderCache(){this.renderCache.forEach(a=>a.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class UA extends i.aA{constructor(a,u,g){super(a.overscaledZ,a.wrap,a.canonical.z,a.canonical.x,a.canonical.y),this.proxyTileKey=u,this.projMatrix=g}}class NA extends i.cE{constructor(a,u){super(),this._debugParams={sortTilesHiZFirst:!0,disableRenderCache:!1},a.tp.registerParameter(this._debugParams,["Terrain"],"sortTilesHiZFirst",{},()=>{this._style.map.triggerRepaint()}),a.tp.registerParameter(this._debugParams,["Terrain"],"disableRenderCache",{},()=>{this._style.map.triggerRepaint()}),a.tp.registerButton(["Terrain"],"Invalidate Render Cache",()=>{this.invalidateRenderCache=!0,this._style.map.triggerRepaint()}),this.painter=a,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[g,v,x]=function(z){const Q=new i.a_,j=new i.aO,W=131;Q.reserve(17161),j.reserve(33800);const J=i.ab/128,re=i.ab+J/2,de=re+J;for(let _e=-J;_e<de;_e+=J)for(let xe=-J;xe<de;xe+=J){const ze=xe<0||xe>re||_e<0||_e>re?24575:0,Qe=i.ap(Math.round(xe),0,i.ab),Ue=i.ap(Math.round(_e),0,i.ab);Q.emplaceBack(Qe+ze,Ue)}const me=(_e,xe)=>{const ze=xe*W+_e;j.emplaceBack(ze+1,ze,ze+W),j.emplaceBack(ze+W,ze+W+1,ze+1)};for(let _e=1;_e<129;_e++)for(let xe=1;xe<129;xe++)me(xe,_e);return[0,129].forEach(_e=>{for(let xe=0;xe<130;xe++)me(xe,_e),me(_e,xe)}),[Q,j,32768]}(),B=a.context;this.gridBuffer=B.createVertexBuffer(g,i.b0.members),this.gridIndexBuffer=B.createIndexBuffer(v),this.gridSegments=i.b1.simpleSegment(0,0,g.length,v.length),this.gridNoSkirtSegments=i.b1.simpleSegment(0,0,g.length,x),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Hg(u.map),this.orthoMatrix=i.a6.mat4.create(),i.a6.mat4.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,i.ab,0,i.ab,0,1);const k=B.gl;this._overlapStencilMode=new Qt({func:k.GEQUAL,mask:255},0,255,k.KEEP,k.KEEP,k.REPLACE),this._previousZoom=a.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=u,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Pd(u.map),this._pendingGroundEffectLayers=[]}set style(a){a.on("data",this._onStyleDataEvent.bind(this)),this._style=a,this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(a,u,g){if(a&&a.terrain){this._style!==a&&(this.style=a,this._evaluationZoom=void 0);const v=a.terrain.properties,x=a.terrain.drapeRenderMode===0,B=a.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=i.q.now();const k=a.terrain&&a.terrain.scope,z=v.get("source"),Q=x?this._mockSourceCache:a.getSourceCache(z,k);if(!Q)return void i.w(`Couldn't find terrain source "${z}".`);if(this.sourceCache=Q,this._exaggeration=B?this.calculateExaggeration(u):v.get("exaggeration"),!u.projection.requiresDraping&&B&&this._exaggeration===0)return void this._disable();this.enabled=!0;const j=()=>{this.sourceCache.used&&i.w(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const W=this.getScaledDemTileSize();this.sourceCache.update(u,W,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,j(),this._initializing=!0),j(),u.updateElevation(!0,g),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(u),this._emptyDEMTextureDirty=!0,this._previousZoom=u.zoom}else this._disable()}calculateExaggeration(a){const u=this._previousCameraAltitude,g=a.getFreeCameraOptions().position.z/a.pixelsPerMeter*a.worldSize;this._previousCameraAltitude=g;const v=u!=null?g-u:Number.MAX_VALUE;if(Math.abs(v)<2)return this._exaggeration;const x=a.zoom,B=this._style.terrain;if(!this._previousUpdateTimestamp)return B.getExaggeration(x);let k=x-this._previousZoom;const z=this._previousUpdateTimestamp;let Q=x;this._evaluationZoom!=null&&(Q=this._evaluationZoom,Math.abs(x-Q)>.5&&(k=.5*(x-Q+k)),k*v<0&&(Q+=k)),this._evaluationZoom=Q;const j=B.getExaggeration(Q),W=j===B.getExaggeration(Math.max(0,Q-.1));if(W&&Math.abs(j-this._exaggeration)<.01)return j;let J=Math.min(.1,.00375*(this._updateTimestamp-z));return(W||j<.1||Math.abs(k)<1e-4)&&(J=Math.min(.2,4*J)),i.aa(this._exaggeration,j,J)}resetTileLookupCache(a){this._findCoveringTileCache[a]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(a){a.coord&&a.dataType==="source"?this._clearRenderCacheForTile(a.sourceCacheId,a.coord):a.dataType==="style"&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._emptyDEMTextureDirty=!0,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const a in this._style._mergedSourceCaches)this._style._mergedSourceCaches[a].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach(a=>a.fb.destroy()),this.pool=[],this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this.enabled?this._exaggeration:0}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const a=2*this.proxySourceCache.getSource().tileSize;return[a,a]}set useVertexMorphing(a){this._useVertexMorphing=a}updateTileBinding(a){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const u=this.proxySourceCache,g=this.painter.transform;this._initializing&&(this._initializing=g._centerAltitude===0&&this.getAtPointOrZero(i.a5.fromLngLat(g.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const v=this.proxyCoords=u.getIds().map(z=>{const Q=u.getTileByID(z).tileID;return Q.projMatrix=g.calculateProjMatrix(Q.toUnwrapped()),Q});(function(z,Q){const j=Q.transform.pointCoordinate(Q.transform.getCameraPoint()),W=new i.P(j.x,j.y);z.sort((J,re)=>{if(re.overscaledZ-J.overscaledZ)return re.overscaledZ-J.overscaledZ;const de=new i.P(J.canonical.x+(1<<J.canonical.z)*J.wrap,J.canonical.y),me=new i.P(re.canonical.x+(1<<re.canonical.z)*re.wrap,re.canonical.y),_e=W.mult(1<<J.canonical.z);return _e.x-=.5,_e.y-=.5,_e.distSqr(de)-_e.distSqr(me)})})(v,this.painter);const x=this.proxyToSource||{};this.proxyToSource={},v.forEach(z=>{this.proxyToSource[z.key]={}}),this.terrainTileForTile={};const B=this._style._mergedSourceCaches;for(const z in B){const Q=B[z];if(!Q.used||(Q!==this.sourceCache&&this.resetTileLookupCache(Q.id),this._setupProxiedCoordsForOrtho(Q,a[z],x),Q.usedForTerrain))continue;const j=a[z];Q.getSource().reparseOverscaled&&this._assignTerrainTiles(j)}this.proxiedCoords[u.id]=v.map(z=>new UA(z,z.key,this.orthoMatrix)),this._assignTerrainTiles(v),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(x),this.renderingToTexture=!1;const k={};this._visibleDemTiles=[];for(const z of this.proxyCoords){const Q=this.terrainTileForTile[z.key];if(!Q)continue;const j=Q.tileID.key;j in k||(this._visibleDemTiles.push(Q),k[j]=j)}}_assignTerrainTiles(a){this._initializing||a.forEach(u=>{if(this.terrainTileForTile[u.key])return;const g=this._findTileCoveringTileID(u,this.sourceCache);g&&(this.terrainTileForTile[u.key]=g)})}_prepareDEMTextures(){const a=this.painter.context,u=a.gl;for(const g in this.terrainTileForTile){const v=this.terrainTileForTile[g],x=v.dem;!x||v.demTexture&&!v.needsDEMTextureUpload||(a.activeTexture.set(u.TEXTURE1),Mo(this.painter,v,x))}}_prepareDemTileUniforms(a,u,g,v){if(!u||u.demTexture==null)return!1;const x=a.tileID.canonical,B=Math.pow(2,u.tileID.canonical.z-x.z),k=v||"";return g[`u_dem_tl${k}`]=[x.x*B%1,x.y*B%1],g[`u_dem_scale${k}`]=B,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){if(!this.enabled)return 0;let a=0;const u=this._visibleDemTiles.reduce((g,v)=>{if(!v.dem)return g;const x=v.dem.tree.minimums[0];return x>0&&a++,g+x},0);return a?u/a:0}_updateEmptyDEMTexture(){const a=this.painter.context,u=a.gl;a.activeTexture.set(u.TEXTURE2);const g=this._getLoadedAreaMinimum(),v=new i.cF({width:1,height:1},new Float32Array([g]));this._emptyDEMTextureDirty=!1;let x=this._emptyDEMTexture;return x?x.update(v,{premultiply:!1}):x=this._emptyDEMTexture=new i.T(a,v,u.R32F,{premultiply:!1}),x}setupElevationDraw(a,u,g){const v=this.painter.context,x=v.gl,B={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0};B.u_exaggeration=this.exaggeration();let k=null,z=null,Q=1;if(g&&g.morphing&&this._useVertexMorphing){const re=g.morphing.srcDemTile,de=g.morphing.dstDemTile;Q=g.morphing.phase,re&&de&&(this._prepareDemTileUniforms(a,re,B,"_prev")&&(z=re),this._prepareDemTileUniforms(a,de,B)&&(k=de))}const j=re=>re&&re.demTexture&&this.painter.linearFloatFilteringSupported()?x.LINEAR:x.NEAREST;let W=null;var J;if(this.enabled?z&&k?(W=k.demTexture,v.activeTexture.set(x.TEXTURE4),z.demTexture.bind(j(z),x.CLAMP_TO_EDGE),B.u_dem_lerp=Q):(k=this.terrainTileForTile[a.tileID.key],W=this._prepareDemTileUniforms(a,k,B)?k.demTexture:this.emptyDEMTexture):W=this.emptyDEMTexture,v.activeTexture.set(x.TEXTURE2),W&&(B.u_dem_size=(J=W).size[0]===1?1:J.size[0]-2,W.bind(j(k),x.CLAMP_TO_EDGE)),this.painter.setupDepthForOcclusion(g&&g.useDepthForOcclusion,u,B),g&&g.useMeterToDem&&k){const re=(1<<k.tileID.canonical.z)*i.bD(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;B.u_meter_to_dem=re}if(g&&g.labelPlaneMatrixInv&&(B.u_label_plane_matrix_inv=g.labelPlaneMatrixInv),u.setTerrainUniformValues(v,B),this.painter.transform.projection.name==="globe"){const re=this.globeUniformValues(this.painter.transform,a.tileID.canonical,g&&g.useDenormalizedUpVectorScale);u.setGlobeUniformValues(v,re)}}globeUniformValues(a,u,g){const v=a.projection;return{u_tile_tl_up:v.upVector(u,0,0),u_tile_tr_up:v.upVector(u,i.ab,0),u_tile_br_up:v.upVector(u,i.ab,i.ab),u_tile_bl_up:v.upVector(u,0,i.ab),u_tile_up_scale:g?i.cG(1):v.upVectorScale(u,a.center.lat,a.worldSize).metersToTile}}renderToBackBuffer(a){const u=this.painter,g=this.painter.context;a.length!==0&&(g.bindFramebuffer.set(null),g.viewport.set([0,0,u.width,u.height]),u.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(v,x,B,k,z){if(v.transform.projection.name==="globe")(function(Q,j,W,J,re){const de=Q.context,me=de.gl;let _e,xe;const ze=Q.transform,Qe=i.cx(Q,de,ze),Ue=(Rt,cn)=>{if(xe===cn)return;const wn=[Yc[cn],"PROJECTION_GLOBE_VIEW"];Qe&&wn.push("CUSTOM_ANTIALIASING");const ln=Q.isTileAffectedByFog(Rt);_e=Q.getOrCreateProgram("globeRaster",{defines:wn,overrideFog:ln}),xe=cn},Xe=Q.colorModeForRenderPass(),qe=new Le(me.LEQUAL,Le.ReadWrite,Q.depthRangeFor3D);Na.update(re);const ut=i.cy(ze),it=[i.am(ze.center.lng),i.at(ze.center.lat)],ht=Q.globeSharedBuffers,xt=[ze.width*i.q.devicePixelRatio,ze.height*i.q.devicePixelRatio],pt=Float32Array.from(ze.globeMatrix),At={useDenormalizedUpVectorScale:!0};{const Rt=Q.transform,cn=Qg(Rt.zoom,j.exaggeration(),j.sourceCache._source.tileSize);xe=-1;const wn=me.TRIANGLES;for(const ln of J){const Ln=W.getTile(ln),kt=Qt.disabled,mn=j.prevTerrainTileForTile[ln.key],An=j.terrainTileForTile[ln.key];Tu(mn,An)&&Na.newMorphing(ln.key,mn,An,re,250),de.activeTexture.set(me.TEXTURE0),Ln.texture&&Ln.texture.bind(me.LINEAR,me.CLAMP_TO_EDGE);const Rn=Na.getMorphValuesForProxy(ln.key),Mn=Rn?1:0;Rn&&i.C(At,{morphing:{srcDemTile:Rn.from,dstDemTile:Rn.to,phase:i.cw(Rn.phase)}});const bn=i.cz(ln.canonical),Cn=i.cA(bn.getCenter().lat),vr=i.cB(ln.canonical,bn,Cn,Rt.worldSize/Rt._pixelsPerMercatorPixel),Qn=i.b5(i.cC(ln.canonical)),rr=Vg(Rt.expandedFarZProjMatrix,pt,ut,Qn,i.a9(Rt.zoom),it,Rt.frustumCorners.TL,Rt.frustumCorners.TR,Rt.frustumCorners.BR,Rt.frustumCorners.BL,Rt.globeCenterInViewSpace,Rt.globeRadius,xt,cn,Rt._farZ,vr);if(Ue(ln,Mn),_e&&(j.setupElevationDraw(Ln,_e,At),Q.uploadCommonUniforms(de,_e,ln.toUnwrapped()),ht)){const[Rr,fr,Sr]=ht.getGridBuffers(Cn,cn!==0);_e.draw(Q,wn,qe,kt,Xe,ir.backCCW,rr,"globe_raster",Rr,fr,Sr)}}}if(ht&&(Q.renderDefaultNorthPole||Q.renderDefaultSouthPole)){const Rt=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];Qe&&Rt.push("CUSTOM_ANTIALIASING"),_e=Q.getOrCreateProgram("globeRaster",{defines:Rt});for(const cn of J){const{x:wn,y:ln,z:Ln}=cn.canonical,kt=ln===0,mn=ln===(1<<Ln)-1,[An,Rn,Mn,bn]=ht.getPoleBuffers(Ln,!1);if(bn&&(kt||mn)){const Cn=W.getTile(cn);de.activeTexture.set(me.TEXTURE0),Cn.texture&&Cn.texture.bind(me.LINEAR,me.CLAMP_TO_EDGE);let vr=i.cD(Ln,wn,ze);const Qn=i.b5(i.cC(cn.canonical)),rr=(Rr,fr)=>Rr.draw(Q,me.TRIANGLES,qe,Qt.disabled,Xe,ir.disabled,Vg(ze.expandedFarZProjMatrix,vr,vr,Qn,0,it,ze.frustumCorners.TL,ze.frustumCorners.TR,ze.frustumCorners.BR,ze.frustumCorners.BL,ze.globeCenterInViewSpace,ze.globeRadius,xt,0,ze._farZ),"globe_pole_raster",fr,Mn,bn);j.setupElevationDraw(Cn,_e,At),Q.uploadCommonUniforms(de,_e,cn.toUnwrapped()),kt&&Q.renderDefaultNorthPole&&rr(_e,An),mn&&Q.renderDefaultSouthPole&&(vr=i.a6.mat4.scale(i.a6.mat4.create(),vr,[1,-1,1]),rr(_e,Rn))}}}})(v,x,B,k,z);else{const Q=v.context,j=Q.gl;let W,J;const re=v.shadowRenderer,de=rs(v,v.longestCutoffRange),me=Xe=>{if(J===Xe)return;const qe=[];qe.push(Yc[Xe]),de.shouldRenderCutoff&&qe.push("RENDER_CUTOFF"),W=v.getOrCreateProgram("terrainRaster",{defines:qe}),J=Xe},_e=v.colorModeForRenderPass(),xe=new Le(j.LEQUAL,Le.ReadWrite,v.depthRangeFor3D);Na.update(z);const ze=v.transform,Qe=Qg(ze.zoom,x.exaggeration(),x.sourceCache._source.tileSize);let Ue=[0,0,0];if(re){const Xe=v.style.directionalLight,qe=v.style.ambientLight;Xe&&qe&&(Ue=eh(v.style,Xe,qe))}{J=-1;const Xe=j.TRIANGLES,[qe,ut]=[x.gridIndexBuffer,x.gridSegments];for(const it of k){const ht=B.getTile(it),xt=Qt.disabled,pt=x.prevTerrainTileForTile[it.key],At=x.terrainTileForTile[it.key];Tu(pt,At)&&Na.newMorphing(it.key,pt,At,z,250),Q.activeTexture.set(j.TEXTURE0),ht.texture&&ht.texture.bind(j.LINEAR,j.CLAMP_TO_EDGE);const Rt=Na.getMorphValuesForProxy(it.key),cn=Rt?1:0;let wn;Rt&&(wn={morphing:{srcDemTile:Rt.from,dstDemTile:Rt.to,phase:i.cw(Rt.phase)}});const ln=o0(it.projMatrix,DA(it.canonical,ze.renderWorldCopies)?Qe/10:Qe,Ue);if(me(cn),!W)continue;x.setupElevationDraw(ht,W,wn);const Ln=it.toUnwrapped();re&&re.setupShadows(Ln,W),v.uploadCommonUniforms(Q,W,Ln,null,de),W.draw(v,Xe,xe,xt,_e,ir.backCCW,ln,"terrain_raster",x.gridBuffer,qe,ut)}}}}(u,this,this.proxySourceCache,a,this._updateTimestamp),this.renderingToTexture=!0,u.gpuTimingDeferredRenderEnd(),a.splice(0,a.length))}renderBatch(a){if(this._drapedRenderBatches.length===0)return a+1;this.renderingToTexture=!0;const u=this.painter,g=this.painter.context,v=this.proxySourceCache,x=this.proxiedCoords[v.id],B=this._drapedRenderBatches.shift(),k=u.style.order,z=[];let Q=0;for(const j of x){const W=v.getTileByID(j.proxyTileKey),J=v.proxyCachedFBO[j.key]?v.proxyCachedFBO[j.key][a]:void 0,re=J!==void 0?v.renderCache[J]:this.pool[Q++],de=J!==void 0;if(W.texture=re.tex,de&&!re.dirty){z.push(W.tileID);continue}let me;g.bindFramebuffer.set(re.fb.framebuffer),this.renderedToTile=!1,re.dirty&&(g.clear({color:i.bz.transparent,stencil:0}),re.dirty=!1);for(let _e=B.start;_e<=B.end;++_e){const xe=u.style._mergedLayers[k[_e]];if(xe.isHidden(u.transform.zoom))continue;const ze=u.style.getLayerSourceCache(xe),Qe=ze?this.proxyToSource[j.key][ze.id]:[j];if(!Qe)continue;const Ue=Qe;g.viewport.set([0,0,re.fb.width,re.fb.height]),me!==(ze?ze.id:null)&&(this._setupStencil(re,Qe,xe,ze),me=ze?ze.id:null),u.renderLayer(u,ze,xe,Ue)}if(this._drapedRenderBatches.length===0)for(const _e of this._pendingGroundEffectLayers){const xe=u.style._mergedLayers[k[_e]];if(xe.isHidden(u.transform.zoom))continue;const ze=u.style.getLayerSourceCache(xe),Qe=ze?this.proxyToSource[j.key][ze.id]:[j];if(!Qe)continue;const Ue=Qe;g.viewport.set([0,0,re.fb.width,re.fb.height]),me!==(ze?ze.id:null)&&(this._setupStencil(re,Qe,xe,ze),me=ze?ze.id:null),u.renderLayer(u,ze,xe,Ue)}this.renderedToTile?(re.dirty=!0,z.push(W.tileID)):de||--Q,Q===5&&(Q=0,this.renderToBackBuffer(z))}return this.renderToBackBuffer(z),this.renderingToTexture=!1,g.bindFramebuffer.set(null),g.viewport.set([0,0,u.width,u.height]),B.end+1}postRender(){}isLayerOrderingCorrect(a){const u=a.order.length;let g=-1,v=u;for(let x=0;x<u;++x)this._style.isLayerDraped(a._mergedLayers[a.order[x]])?g=Math.max(g,x):v=Math.min(v,x);return v>g}getMinElevationBelowMSL(){let a=0;return this._visibleDemTiles.filter(u=>u.dem).forEach(u=>{a=Math.min(a,u.dem.tree.minimums[0])}),a===0?a:(a-30)*this._exaggeration}raycast(a,u,g){if(!this._visibleDemTiles)return null;const v=this._visibleDemTiles.filter(x=>x.dem).map(x=>{const B=x.tileID,k=1<<B.overscaledZ,{x:z,y:Q}=B.canonical,j=z/k,W=(z+1)/k,J=Q/k,re=(Q+1)/k;return{minx:j,miny:J,maxx:W,maxy:re,t:x.dem.tree.raycastRoot(j,J,W,re,a,u,g),tile:x}});v.sort((x,B)=>(x.t!==null?x.t:Number.MAX_VALUE)-(B.t!==null?B.t:Number.MAX_VALUE));for(const x of v){if(x.t==null)return null;const B=x.tile.dem.tree.raycast(x.minx,x.miny,x.maxx,x.maxy,a,u,g);if(B!=null)return B}return null}_createFBO(){const a=this.painter.context,u=a.gl,g=this.drapeBufferSize;a.activeTexture.set(u.TEXTURE0);const v=new i.T(a,{width:g[0],height:g[1],data:null},u.RGBA8);v.bind(u.LINEAR,u.CLAMP_TO_EDGE);const x=a.createFramebuffer(g[0],g[1],!0,null);return x.colorAttachment.set(v.texture),x.depthAttachment=new Id(a,x.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=a.createRenderbuffer(a.gl.DEPTH_STENCIL,g[0],g[1]),this._stencilRef=0,x.depthAttachment.set(this._sharedDepthStencil),a.clear({stencil:0})):x.depthAttachment.set(this._sharedDepthStencil),a.extTextureFilterAnisotropic&&u.texParameterf(u.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax),{fb:x,tex:v,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._debugParams.disableRenderCache||this._style.hasLightTransitions())return!0;for(const a in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[a].hasTransition())return!0;return this._style.order.some(a=>{const u=this._style._mergedLayers[a],g=u.isHidden(this.painter.transform.zoom);return u.type==="hillshade"||u.type==="custom"?!g&&u.shouldRedrape():!g&&u.hasTransition()})}_clearLineLayersFromRenderCache(){let a=!1;for(const g of this._style.getSources())if(g instanceof Xu){a=!0;break}if(!a)return;const u={};for(let g=0;g<this._style.order.length;++g){const v=this._style._mergedLayers[this._style.order[g]],x=this._style.getLayerSourceCache(v);if(x&&!u[x.id]&&!v.isHidden(this.painter.transform.zoom)&&v.type==="line"&&v.widthExpression()instanceof i.a4){u[x.id]=!0;for(const B of this.proxyCoords){const k=this.proxyToSource[B.key][x.id];if(k)for(const z of k)this._clearRenderCacheForTile(x.id,z)}}}}_clearRasterLayersFromRenderCache(){let a=!1;for(const g in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[g]._source instanceof yc){a=!0;break}if(!a)return;const u={};for(let g=0;g<this._style.order.length;++g){const v=this._style._mergedLayers[this._style.order[g]],x=this._style.getLayerSourceCache(v);if(!x||u[x.id]||v.isHidden(this.painter.transform.zoom)||v.type!=="raster")continue;const B=v.paint.get("raster-fade-duration");for(const k of this.proxyCoords){const z=this.proxyToSource[k.key][x.id];if(z)for(const Q of z){const j=Xa(x.getTile(Q),x.findLoadedParent(Q,0),x,this.painter.transform,B);(j.opacity!==1||j.mix!==0)&&this._clearRenderCacheForTile(x.id,Q)}}}}_setupDrapedRenderBatches(){const a=this._style.order,u=a.length;if(u===0)return;const g=[];this._pendingGroundEffectLayers=[];let v,x=0,B=this._style._mergedLayers[a[x]];for(;!this._style.isLayerDraped(B)&&B.isHidden(this.painter.transform.zoom)&&++x<u;)B=this._style._mergedLayers[a[x]];for(;x<u;++x){const k=this._style._mergedLayers[a[x]];k.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(k)?v===void 0&&(v=x):(k.type==="fill-extrusion"&&this._pendingGroundEffectLayers.push(x),v!==void 0&&(g.push({start:v,end:x-1}),v=void 0)))}if(v!==void 0&&g.push({start:v,end:x-1}),g.length!==0){const k=g[g.length-1];this._pendingGroundEffectLayers.every(z=>z>k.end)||i.w("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=g}_setupRenderCache(a){const u=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,u.renderCache.length>u.renderCachePool.length){const B=Object.values(u.proxyCachedFBO);u.proxyCachedFBO={};for(let k=0;k<B.length;++k){const z=Object.values(B[k]);u.renderCachePool.push(...z)}}return}this._clearRasterLayersFromRenderCache();const g=this.proxyCoords,v=this._tilesDirty;for(let B=g.length-1;B>=0;B--){const k=g[B];if(u.getTileByID(k.key),u.proxyCachedFBO[k.key]!==void 0){const z=a[k.key],Q=this.proxyToSource[k.key];let j=0;for(const W in Q){const J=Q[W],re=z[W];if(!re||re.length!==J.length||J.some((de,me)=>de!==re[me]||v[W]&&v[W].hasOwnProperty(de.key))){j=-1;break}++j}for(const W in u.proxyCachedFBO[k.key])u.renderCache[u.proxyCachedFBO[k.key][W]].dirty=j<0||j!==Object.values(z).length}}const x=[...this._drapedRenderBatches];x.sort((B,k)=>k.end-k.start-(B.end-B.start));for(const B of x)for(const k of g){if(u.proxyCachedFBO[k.key])continue;let z=u.renderCachePool.pop();z===void 0&&u.renderCache.length<50&&(z=u.renderCache.length,u.renderCache.push(this._createFBO())),z!==void 0&&(u.proxyCachedFBO[k.key]={},u.proxyCachedFBO[k.key][B.start]=z,u.renderCache[z].dirty=!0)}this._tilesDirty={}}_setupStencil(a,u,g,v){if(!v||!this._sourceTilesOverlap[v.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const x=this.painter.context,B=x.gl;if(u.length<=1)return void(this._overlapStencilType=!1);let k;if(g.isTileClipped())k=u.length,this._overlapStencilMode.test={func:B.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(u[0].overscaledZ>u[u.length-1].overscaledZ))return void(this._overlapStencilType=!1);k=1,this._overlapStencilMode.test={func:B.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+k>255&&(x.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=k,this._overlapStencilMode.ref=this._stencilRef,g.isTileClipped()&&this._renderTileClippingMasks(u,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(a){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[a.key]),this._overlapStencilMode):Qt.disabled}_renderTileClippingMasks(a,u){const g=this.painter,v=this.painter.context,x=v.gl;g._tileClippingMaskIDs={},v.setColorMode(fe.disabled),v.setDepthMode(Le.disabled);const B=g.getOrCreateProgram("clippingMask");for(const k of a){const z=g._tileClippingMaskIDs[k.key]=--u;B.draw(g,x.TRIANGLES,Le.disabled,new Qt({func:x.ALWAYS,mask:0},z,255,x.KEEP,x.KEEP,x.REPLACE),fe.disabled,ir.disabled,Zl(k.projMatrix),"$clipping",g.tileExtentBuffer,g.quadTriangleIndexBuffer,g.tileExtentSegments)}}pointCoordinate(a){const u=this.painter.transform;if(a.x<0||a.x>u.width||a.y<0||a.y>u.height)return null;const g=[a.x,a.y,1,1];i.a6.vec4.transformMat4(g,g,u.pixelMatrixInverse),i.a6.vec4.scale(g,g,1/g[3]),g[0]/=u.worldSize,g[1]/=u.worldSize;const v=u._camera.position,x=i.bD(1,u.center.lat),B=[v[0],v[1],v[2]/x,0],k=i.a6.vec3.subtract([],g.slice(0,3),B);i.a6.vec3.normalize(k,k);const z=this.raycast(B,k,this._exaggeration);return z!==null&&z?(i.a6.vec3.scaleAndAdd(B,B,k,z),B[3]=B[2],B[2]*=x,B):null}_setupProxiedCoordsForOrtho(a,u,g){if(a.getSource()instanceof i.aD)return this._setupProxiedCoordsForImageSource(a,u,g);this._findCoveringTileCache[a.id]=this._findCoveringTileCache[a.id]||{};const v=this.proxiedCoords[a.id]=[],x=this.proxyCoords;for(let z=0;z<x.length;z++){const Q=x[z],j=this._findTileCoveringTileID(Q,a);if(j){const W=this._createProxiedId(Q,j,g[Q.key]&&g[Q.key][a.id]);v.push(W),this.proxyToSource[Q.key][a.id]=[W]}}let B=!1;const k=new Set;for(let z=0;z<u.length;z++){const Q=a.getTile(u[z]);if(!Q||!Q.hasData())continue;const j=this._findTileCoveringTileID(Q.tileID,this.proxySourceCache);if(j&&j.tileID.canonical.z!==Q.tileID.canonical.z){const W=this.proxyToSource[j.tileID.key][a.id],J=this._createProxiedId(j.tileID,Q,g[j.tileID.key]&&g[j.tileID.key][a.id]);W?W.splice(W.length-1,0,J):this.proxyToSource[j.tileID.key][a.id]=[J];const re=this.proxyToSource[j.tileID.key][a.id];k.has(re)||k.add(re),v.push(J),B=!0}}if(this._sourceTilesOverlap[a.id]=B,B&&this._debugParams.sortTilesHiZFirst)for(const z of k)z.sort((Q,j)=>j.overscaledZ-Q.overscaledZ)}_setupProxiedCoordsForImageSource(a,u,g){if(!a.getSource().loaded())return;const v=this.proxiedCoords[a.id]=[],x=this.proxyCoords,B=a.getSource(),k=B.tileID;if(!k)return;const z=new i.P(k.x,k.y)._div(1<<k.z),Q=B.coordinates.map(i.a5.fromLngLat).reduce((W,J)=>(W.min.x=Math.min(W.min.x,J.x-z.x),W.min.y=Math.min(W.min.y,J.y-z.y),W.max.x=Math.max(W.max.x,J.x-z.x),W.max.y=Math.max(W.max.y,J.y-z.y),W),{min:new i.P(Number.MAX_VALUE,Number.MAX_VALUE),max:new i.P(-Number.MAX_VALUE,-Number.MAX_VALUE)}),j=(W,J)=>{const re=W.wrap+W.canonical.x/(1<<W.canonical.z),de=W.canonical.y/(1<<W.canonical.z),me=i.ab/(1<<W.canonical.z),_e=J.wrap+J.canonical.x/(1<<J.canonical.z),xe=J.canonical.y/(1<<J.canonical.z);return re+me<_e+Q.min.x||re>_e+Q.max.x||de+me<xe+Q.min.y||de>xe+Q.max.y};for(let W=0;W<x.length;W++){const J=x[W];for(let re=0;re<u.length;re++){const de=a.getTile(u[re]);if(!de||!de.hasData()||j(J,de.tileID))continue;const me=this._createProxiedId(J,de,g[J.key]&&g[J.key][a.id]),_e=this.proxyToSource[J.key][a.id];_e?_e.push(me):this.proxyToSource[J.key][a.id]=[me],v.push(me)}}}_createProxiedId(a,u,g){let v=this.orthoMatrix;if(g){const x=g.find(B=>B.key===u.tileID.key);if(x)return x}if(u.tileID.key!==a.key){const x=a.canonical.z-u.tileID.canonical.z;let B,k,z;v=i.a6.mat4.create();const Q=u.tileID.wrap-a.wrap<<a.overscaledZ;x>0?(B=i.ab>>x,k=B*((u.tileID.canonical.x<<x)-a.canonical.x+Q),z=B*((u.tileID.canonical.y<<x)-a.canonical.y)):(B=i.ab<<-x,k=i.ab*(u.tileID.canonical.x-(a.canonical.x+Q<<-x)),z=i.ab*(u.tileID.canonical.y-(a.canonical.y<<-x))),i.a6.mat4.ortho(v,0,B,0,B,0,1),i.a6.mat4.translate(v,v,[k,z,0])}return new UA(u.tileID,a.key,v)}_findTileCoveringTileID(a,u){let g=u.getTile(a);if(g&&g.hasData())return g;const v=this._findCoveringTileCache[u.id],x=v[a.key];if(g=x?u.getTileByID(x):null,g&&g.hasData()||x===null)return g;let B=g?g.tileID:a,k=B.overscaledZ;const z=u.getSource().minzoom,Q=[];if(!x){const W=u.getSource().maxzoom;if(a.canonical.z>=W){const J=a.canonical.z-W;u.getSource().reparseOverscaled?(k=Math.max(a.canonical.z+2,u.transform.tileZoom),B=new i.aA(k,a.wrap,W,a.canonical.x>>J,a.canonical.y>>J)):J!==0&&(k=W,B=new i.aA(k,a.wrap,W,a.canonical.x>>J,a.canonical.y>>J))}B.key!==a.key&&(Q.push(B.key),g=u.getTile(B))}const j=W=>{Q.forEach(J=>{v[J]=W}),Q.length=0};for(k-=1;k>=z&&(!g||!g.hasData());k--){g&&j(g.tileID.key);const W=B.calculateScaledKey(k);if(g=u.getTileByID(W),g&&g.hasData())break;const J=v[W];if(J===null)break;J===void 0?Q.push(W):g=u.getTileByID(J)}return j(g?g.tileID.key:null),g&&g.hasData()?g:null}findDEMTileFor(a){return this.enabled?this._findTileCoveringTileID(a,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(a,u){let g=this._tilesDirty[a];g||(g=this._tilesDirty[a]={}),g[u.key]=!0}}function zA(m,a,u){const g=function(k,z,Q){const j=i.a6.vec3.dot(z,k),W=i.a6.vec3.dot(Q,[.2126,.7152,.0722]),J=(de,me,_e)=>(1-_e)*de+_e*me,re=J(1-.3*Math.min(W,1),1,Math.min(j+1,1));return J(.92,1,Math.asin(i.ap(z[2],-1,1))/Math.PI+.5)*re}(m,[0,0,1],a),v=[0,0,0];i.a6.vec3.scale(v,u.slice(0,3),g);const x=[0,0,0];i.a6.vec3.scale(x,a.slice(0,3),m[2]);const B=[0,0,0];return i.a6.vec3.add(B,v,x),i.cb(B)}const sh=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],jg=["stars","fillExtrusion","fillExtrusionGroundEffect","model","symbol"];class Sc{static cacheKey(a,u,g,v){let x=`${u}${v?v.cacheKey:""}`;for(const B of g)a.usedDefines.includes(B)&&(x+=`/${B}`);return x}constructor(a,u,g,v,x,B){const k=a.gl;this.program=k.createProgram(),this.configuration=v,this.name=u,this.fixedDefines=[...B];const z=v?v.getBinderAttributes():[],Q=(g.staticAttributes||[]).concat(z);let j=v?v.defines():[];j=j.concat(B.map(_e=>`#define ${_e}`));const W=`#version 300 es
`;let J=W+j.concat("precision mediump float;",Wc,Xl.fragmentSource).join(`
`);for(const _e of g.fragmentIncludes)J+=`
${Bc[_e]}`;J+=`
${g.fragmentSource}`;let re=W+j.concat("precision highp float;",Wc,Xl.vertexSource).join(`
`);for(const _e of g.vertexIncludes)re+=`
${Bc[_e]}`;re+=`
${g.vertexSource}`;const de=k.createShader(k.FRAGMENT_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);k.shaderSource(de,J),k.compileShader(de),k.attachShader(this.program,de);const me=k.createShader(k.VERTEX_SHADER);if(k.isContextLost())this.failedToCreate=!0;else{k.shaderSource(me,re),k.compileShader(me),k.attachShader(this.program,me),this.attributes={},this.numAttributes=Q.length;for(let _e=0;_e<this.numAttributes;_e++)if(Q[_e]){const xe=Q[_e].startsWith("a_")?Q[_e]:`a_${Q[_e]}`;k.bindAttribLocation(this.program,_e,xe),this.attributes[xe]=_e}k.linkProgram(this.program),k.deleteShader(me),k.deleteShader(de),this.fixedUniforms=x(a),this.binderUniforms=v?v.getUniforms(a):[],(B.includes("TERRAIN")||u.indexOf("symbol")!==-1||u.indexOf("circle")!==-1)&&(this.terrainUniforms=(_e=>({u_dem:new i.bJ(_e),u_dem_prev:new i.bJ(_e),u_dem_tl:new i.bG(_e),u_dem_scale:new i.bI(_e),u_dem_tl_prev:new i.bG(_e),u_dem_scale_prev:new i.bI(_e),u_dem_size:new i.bI(_e),u_dem_lerp:new i.bI(_e),u_exaggeration:new i.bI(_e),u_depth:new i.bJ(_e),u_depth_size_inv:new i.bG(_e),u_depth_range_unpack:new i.bG(_e),u_occluder_half_size:new i.bI(_e),u_occlusion_depth_offset:new i.bI(_e),u_meter_to_dem:new i.bI(_e),u_label_plane_matrix_inv:new i.bF(_e)}))(a)),B.includes("GLOBE")&&(this.globeUniforms=(_e=>({u_tile_tl_up:new i.bH(_e),u_tile_tr_up:new i.bH(_e),u_tile_br_up:new i.bH(_e),u_tile_bl_up:new i.bH(_e),u_tile_up_scale:new i.bI(_e)}))(a)),B.includes("FOG")&&(this.fogUniforms=(_e=>({u_fog_matrix:new i.bF(_e),u_fog_range:new i.bG(_e),u_fog_color:new i.c6(_e),u_fog_horizon_blend:new i.bI(_e),u_fog_vertical_limit:new i.bG(_e),u_fog_temporal_offset:new i.bI(_e),u_frustum_tl:new i.bH(_e),u_frustum_tr:new i.bH(_e),u_frustum_br:new i.bH(_e),u_frustum_bl:new i.bH(_e),u_globe_pos:new i.bH(_e),u_globe_radius:new i.bI(_e),u_globe_transition:new i.bI(_e),u_is_globe:new i.bJ(_e),u_viewport:new i.bG(_e)}))(a)),B.includes("RENDER_CUTOFF")&&(this.cutoffUniforms=(_e=>({u_cutoff_params:new i.c6(_e)}))(a)),B.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms=(_e=>({u_lighting_ambient_color:new i.bH(_e),u_lighting_directional_dir:new i.bH(_e),u_lighting_directional_color:new i.bH(_e),u_ground_radiance:new i.bH(_e)}))(a)),B.includes("RENDER_SHADOWS")&&(this.shadowUniforms=(_e=>({u_light_matrix_0:new i.bF(_e),u_light_matrix_1:new i.bF(_e),u_fade_range:new i.bG(_e),u_shadow_normal_offset:new i.bH(_e),u_shadow_intensity:new i.bI(_e),u_shadow_texel_size:new i.bI(_e),u_shadow_map_resolution:new i.bI(_e),u_shadow_direction:new i.bH(_e),u_shadow_bias:new i.bH(_e),u_shadowmap_0:new i.bJ(_e),u_shadowmap_1:new i.bJ(_e)}))(a))}}setTerrainUniformValues(a,u){if(!this.terrainUniforms)return;const g=this.terrainUniforms;if(!this.failedToCreate){a.program.set(this.program);for(const v in u)g[v]&&g[v].set(this.program,v,u[v])}}setGlobeUniformValues(a,u){if(!this.globeUniforms)return;const g=this.globeUniforms;if(!this.failedToCreate){a.program.set(this.program);for(const v in u)g[v]&&g[v].set(this.program,v,u[v])}}setFogUniformValues(a,u){if(!this.fogUniforms)return;const g=this.fogUniforms;if(!this.failedToCreate){a.program.set(this.program);for(const v in u)g[v].set(this.program,v,u[v])}}setCutoffUniformValues(a,u){if(!this.cutoffUniforms)return;const g=this.cutoffUniforms;if(!this.failedToCreate){a.program.set(this.program);for(const v in u)g[v].set(this.program,v,u[v])}}setLightsUniformValues(a,u){if(!this.lightsUniforms)return;const g=this.lightsUniforms;if(!this.failedToCreate){a.program.set(this.program);for(const v in u)g[v].set(this.program,v,u[v])}}setShadowUniformValues(a,u){if(this.failedToCreate||!this.shadowUniforms)return;const g=this.shadowUniforms;a.program.set(this.program);for(const v in u)g[v].set(this.program,v,u[v])}_drawDebugWireframe(a,u,g,v,x,B,k,z,Q,j){const W=a.options.wireframe;if(W.terrain===!1&&W.layers2D===!1&&W.layers3D===!1)return;const J=a.context;if(!(!(!W.terrain||this.name!=="terrainRaster"&&this.name!=="globeRaster")||!(!W.layers2D||a._terrain&&a._terrain.renderingToTexture||!sh.includes(this.name))||!(!W.layers3D||!jg.includes(this.name))))return;const re=J.gl,de=a.wireframeDebugCache.getLinesFromTrianglesBuffer(a.frameCounter,x,J);if(!de)return;const me=[...this.fixedDefines];me.push("DEBUG_WIREFRAME");const _e=a.getOrCreateProgram(this.name,{config:this.configuration,defines:me});J.program.set(_e.program);const xe=(Ue,Xe,qe)=>{if(Xe[Ue]&&qe[Ue])for(const ut in Xe[Ue])qe[Ue][ut]&&qe[Ue][ut].set(qe.program,ut,Xe[Ue][ut].current)};Q&&Q.setUniforms(_e.program,J,_e.binderUniforms,k,{zoom:z}),xe("fixedUniforms",this,_e),xe("terrainUniforms",this,_e),xe("globeUniforms",this,_e),xe("fogUniforms",this,_e),xe("lightsUniforms",this,_e),xe("shadowUniforms",this,_e),de.bind(),J.setColorMode(new fe([re.ONE,re.ONE_MINUS_SRC_ALPHA,re.ZERO,re.ONE],i.bz.transparent,[!0,!0,!0,!1])),J.setDepthMode(new Le(u.func===re.LESS?re.LEQUAL:u.func,Le.ReadOnly,u.range)),J.setStencilMode(Qt.disabled);const ze=3*B.primitiveLength*2,Qe=3*B.primitiveOffset*2*2;j&&j>1?re.drawElementsInstanced(re.LINES,ze,re.UNSIGNED_SHORT,Qe,j):re.drawElements(re.LINES,ze,re.UNSIGNED_SHORT,Qe),x.bind(),J.program.set(this.program),J.setDepthMode(u),J.setStencilMode(g),J.setColorMode(v)}draw(a,u,g,v,x,B,k,z,Q,j,W,J,re,de,me,_e){const xe=a.context,ze=xe.gl;if(this.failedToCreate)return;xe.program.set(this.program),xe.setDepthMode(g),xe.setStencilMode(v),xe.setColorMode(x),xe.setCullFace(B);for(const Xe of Object.keys(this.fixedUniforms))this.fixedUniforms[Xe].set(this.program,Xe,k[Xe]);de&&de.setUniforms(this.program,xe,this.binderUniforms,J,{zoom:re});const Qe={[ze.POINTS]:1,[ze.LINES]:2,[ze.TRIANGLES]:3,[ze.LINE_STRIP]:1}[u],Ue=_e&&_e>0?1:void 0;for(const Xe of W.get()){const qe=Xe.vaos||(Xe.vaos={});(qe[z]||(qe[z]=new Xc)).bind(xe,this,Q,de?de.getPaintVertexBuffers():[],j,Xe.vertexOffset,me||[],Ue),_e&&_e>1?ze.drawElementsInstanced(u,Xe.primitiveLength*Qe,ze.UNSIGNED_SHORT,Xe.primitiveOffset*Qe*2,_e):j?ze.drawElements(u,Xe.primitiveLength*Qe,ze.UNSIGNED_SHORT,Xe.primitiveOffset*Qe*2):ze.drawArrays(u,Xe.vertexOffset,Xe.vertexLength),u===ze.TRIANGLES&&j&&this._drawDebugWireframe(a,g,v,x,j,Xe,J,re,de,_e)}}}function Ld(m,a){const u=Math.pow(2,a.tileID.overscaledZ),g=a.tileSize*Math.pow(2,m.transform.tileZoom)/u,v=g*(a.tileID.canonical.x+a.tileID.wrap*u),x=g*a.tileID.canonical.y;return{u_image:0,u_texsize:a.imageAtlasTexture?a.imageAtlasTexture.size:[0,0],u_tile_units_to_pixels:1/i.ak(a,1,m.transform.tileZoom),u_pixel_coord_upper:[v>>16,x>>16],u_pixel_coord_lower:[65535&v,65535&x]}}const ah=i.a6.mat4.create(),Ff=(m,a,u,g,v,x,B,k,z,Q,j,W,J,re,de,me)=>{const _e=a.style.light,xe=_e.properties.get("position"),ze=[xe.x,xe.y,xe.z],Qe=i.a6.mat3.create();_e.properties.get("anchor")==="viewport"&&(i.a6.mat3.fromRotation(Qe,-a.transform.angle),i.a6.vec3.transformMat3(ze,ze,Qe));const Ue=_e.properties.get("color"),Xe=a.transform,qe={u_matrix:m,u_lightpos:ze,u_lightintensity:_e.properties.get("intensity"),u_lightcolor:[Ue.r,Ue.g,Ue.b],u_vertical_gradient:+u,u_opacity:g,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:ah,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:v,u_edge_radius:x,u_width_scale:B,u_flood_light_color:J,u_vertical_scale:re,u_flood_light_intensity:de,u_ground_shadow_factor:me};return Xe.projection.name==="globe"&&(qe.u_tile_id=[k.canonical.x,k.canonical.y,1<<k.canonical.z],qe.u_zoom_transition=Q,qe.u_inv_rot_matrix=W,qe.u_merc_center=j,qe.u_up_dir=Xe.projection.upVector(new i.bP(0,0,0),j[0]*i.ab,j[1]*i.ab),qe.u_height_lift=z),qe},wm=(m,a,u,g)=>({u_matrix:m,u_edge_radius:a,u_width_scale:u,u_vertical_scale:g}),xm=(m,a,u,g,v,x,B,k,z,Q,j,W,J,re,de)=>{const me=Ff(m,a,u,g,v,x,B,k,Q,j,W,J,re,de,1,[0,0,0]),_e={u_height_factor:-Math.pow(2,k.overscaledZ)/z.tileSize/8};return i.l(me,Ld(a,z),_e)},Rf=(m,a)=>({u_matrix:m,u_emissive_strength:a}),$g=(m,a,u,g)=>i.l(Rf(m,a),Ld(u,g)),Gg=(m,a,u)=>({u_matrix:m,u_world:u,u_emissive_strength:a}),kf=(m,a,u,g,v)=>i.l($g(m,a,u,g),{u_world:v}),s0=(m,a,u,g)=>{const v=i.ab/u.tileSize;return{u_matrix:m,u_camera_to_center_distance:a.getCameraToCenterDistance(g),u_extrude_scale:[a.pixelsToGLUnits[0]/v,a.pixelsToGLUnits[1]/v]}},Kg=(m,a,u=1)=>({u_matrix:m,u_color:a.toRenderColor(null),u_overlay:0,u_overlay_scale:u}),qg=i.a6.mat4.create(),Wg=(m,a,u,g,v,x,B)=>{const k=m.transform,z=k.projection.name==="globe",Q=z?i.cI(k.zoom,a.canonical)*k._pixelsPerMercatorPixel:i.ak(u,1,x),j={u_matrix:a.projMatrix,u_extrude_scale:Q,u_intensity:B,u_inv_rot_matrix:qg,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(z){j.u_inv_rot_matrix=g,j.u_merc_center=v,j.u_tile_id=[a.canonical.x,a.canonical.y,1<<a.canonical.z],j.u_zoom_transition=i.a9(k.zoom);const W=v[0]*i.ab,J=v[1]*i.ab;j.u_up_dir=k.projection.upVector(new i.bP(0,0,0),W,J)}return j};function Hh(m,[a,u,g,v],[x,B]){if(x===B)return[0,0,0,0];const k=255*(m-1)/(m*(B-x));return[a*k,u*k,g*k,v*k]}function VA(m,a,[u,g]){return u===g?0:.5/m+(a-u)*(m-1)/(m*(g-u))}const Mf=(m,a,u,g,v,x,B,k,z,Q,j,W,J,re,de,me,_e,xe,ze,Qe,Ue)=>({u_matrix:m,u_normalize_matrix:a,u_globe_matrix:u,u_merc_matrix:g,u_grid_matrix:v,u_tl_parent:x,u_scale_parent:Q,u_fade_t:j.mix,u_opacity:j.opacity*W.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:W.paint.get("raster-brightness-min"),u_brightness_high:W.paint.get("raster-brightness-max"),u_saturation_factor:i.cJ(W.paint.get("raster-saturation")),u_contrast_factor:i.cK(W.paint.get("raster-contrast")),u_spin_weights:QA(W.paint.get("raster-hue-rotate")),u_perspective_transform:J,u_raster_elevation:re,u_zoom_transition:B,u_merc_center:k,u_cutoff_params:z,u_colorization_mix:Hh(i.cL,me,xe),u_colorization_offset:VA(i.cL,_e,xe),u_color_ramp:de,u_texture_offset:[Qe/(ze+2*Qe),ze/(ze+2*Qe)],u_texture_res:[ze+2*Qe,ze+2*Qe],u_emissive_strength:Ue});function QA(m){m*=Math.PI/180;const a=Math.sin(m),u=Math.cos(m);return[(2*u+1)/3,(-Math.sqrt(3)*a-u+1)/3,(Math.sqrt(3)*a-u+1)/3]}const D=.05,H=(m,a,u,g,v,x,B,k,z,Q,j,W)=>({u_matrix:m,u_normalize_matrix:a,u_globe_matrix:u,u_merc_matrix:g,u_grid_matrix:v,u_tl_parent:x,u_scale_parent:Q,u_fade_t:j.mix,u_opacity:j.opacity,u_image0:0,u_image1:1,u_raster_elevation:W,u_zoom_transition:B,u_merc_center:k,u_cutoff_params:z}),oe=(m,a,u,g,v,x,B,k,z,Q)=>({u_particle_texture:m,u_particle_texture_side_len:a,u_tile_offset:u,u_velocity:g,u_color_ramp:x,u_velocity_res:v,u_max_speed:B,u_uv_offset:k,u_data_scale:[255*z[0],255*z[1]],u_data_offset:Q,u_particle_pos_scale:1.1,u_particle_pos_offset:[D,D]}),pe=(m,a,u,g,v,x,B,k,z,Q)=>({u_particle_texture:m,u_particle_texture_side_len:a,u_velocity:u,u_velocity_res:g,u_max_speed:v,u_speed_factor:x,u_reset_rate:B,u_rand_seed:Math.random(),u_uv_offset:k,u_data_scale:[255*z[0],255*z[1]],u_data_offset:Q,u_particle_pos_scale:1.1,u_particle_pos_offset:[D,D]}),Me=i.a6.mat4.create(),Ge=(m,a,u,g,v,x,B,k,z,Q,j,W,J,re,de,me,_e,xe,ze,Qe,Ue)=>{const Xe=v.transform,qe={u_is_size_zoom_constant:+(m==="constant"||m==="source"),u_is_size_feature_constant:+(m==="constant"||m==="camera"),u_size_t:a?a.uSizeT:0,u_size:a?a.uSize:0,u_camera_to_center_distance:Xe.getCameraToCenterDistance(ze),u_rotate_symbol:+u,u_aspect_ratio:Xe.width/Xe.height,u_fade_change:v.options.fadeDuration?v.symbolFadeChange:1,u_matrix:x,u_label_plane_matrix:B,u_coord_matrix:k,u_is_text:+Q,u_elevation_from_sea:z?1:0,u_pitch_with_map:+g,u_texsize:j,u_texsize_icon:W,u_texture:0,u_texture_icon:1,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Me,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Me,u_up_vector:[0,-1,0],u_color_adj_mat:Qe,u_icon_transition:Ue||0,u_gamma_scale:g?v.transform.getCameraToCenterDistance(ze)*Math.cos(v.terrain?0:v.transform._pitch):1,u_device_pixel_ratio:i.q.devicePixelRatio,u_is_halo:+J};return ze.name==="globe"&&(qe.u_tile_id=[re.canonical.x,re.canonical.y,1<<re.canonical.z],qe.u_zoom_transition=de,qe.u_inv_rot_matrix=_e,qe.u_merc_center=me,qe.u_camera_forward=Xe._camera.forward(),qe.u_ecef_origin=i.cM(Xe.globeMatrix,re.toUnwrapped()),qe.u_tile_matrix=Float32Array.from(Xe.globeMatrix),qe.u_up_vector=xe),qe},Ke=(m,a,u,g)=>({u_matrix:m,u_emissive_strength:a,u_opacity:u,u_color:g}),Ze=(m,a,u,g,v,x,B,k,z)=>i.l(function(Q,j,W,J,re,de){const{width:me,height:_e}=J.imageManager.getPixelSize(j),xe=Math.pow(2,de.tileID.overscaledZ),ze=de.tileSize*Math.pow(2,J.transform.tileZoom)/xe,Qe=ze*(de.tileID.canonical.x+de.tileID.wrap*xe),Ue=ze*de.tileID.canonical.y;return{u_image:0,u_pattern_tl:W.tl,u_pattern_br:W.br,u_texsize:[me,_e],u_pattern_size:W.displaySize,u_pattern_units_to_pixels:re?[J.transform.width,-1*J.transform.height]:[1/i.ak(de,1,J.transform.tileZoom),1/i.ak(de,1,J.transform.tileZoom)],u_pixel_coord_upper:[Qe>>16,Ue>>16],u_pixel_coord_lower:[65535&Qe,65535&Ue]}}(0,x,B,g,k,z),{u_matrix:m,u_emissive_strength:a,u_opacity:u}),nt=new Float32Array(i.a6.mat4.identity([])),He=(m,a,u,g,v,x,B,k,z,Q,j,W,J,re=[0,0,0],de)=>{const me=v.style.light,_e=me.properties.get("position"),xe=[-_e.x,-_e.y,_e.z],ze=i.a6.mat3.create();me.properties.get("anchor")==="viewport"&&(i.a6.mat3.fromRotation(ze,-v.transform.angle),i.a6.vec3.transformMat3(xe,xe,ze));const Qe=j.alphaMode==="MASK",Ue=me.properties.get("color").toRenderColor(null),Xe=J.paint.get("model-ambient-occlusion-intensity"),qe=J.paint.get("model-color").constantOr(i.bz.white).toRenderColor(null),ut=J.paint.get("model-color-mix-intensity").constantOr(0);return{u_matrix:m,u_lighting_matrix:a,u_normal_matrix:u,u_node_matrix:g||nt,u_lightpos:xe,u_lightintensity:me.properties.get("intensity"),u_lightcolor:[Ue.r,Ue.g,Ue.b],u_camera_pos:re,u_opacity:x,u_baseTextureIsAlpha:0,u_alphaMask:+Qe,u_alphaCutoff:j.alphaCutoff,u_baseColorFactor:[B.r,B.g,B.b,B.a],u_emissiveFactor:[k[0],k[1],k[2],1],u_metallicFactor:z,u_roughnessFactor:Q,u_baseColorTexture:Jo.BaseColor,u_metallicRoughnessTexture:Jo.MetallicRoughness,u_normalTexture:Jo.Normal,u_occlusionTexture:Jo.Occlusion,u_emissionTexture:Jo.Emission,u_lutTexture:Jo.LUT,u_color_mix:[qe.r,qe.g,qe.b,ut],u_aoIntensity:Xe,u_emissive_strength:W,u_occlusionTextureTransform:de||[0,0,0,0]}},Kt=(m,a=nt,u=nt)=>({u_matrix:m,u_instance:a,u_node_matrix:u}),vn={fillExtrusion:m=>({u_matrix:new i.bF(m),u_lightpos:new i.bH(m),u_lightintensity:new i.bI(m),u_lightcolor:new i.bH(m),u_vertical_gradient:new i.bI(m),u_opacity:new i.bI(m),u_edge_radius:new i.bI(m),u_width_scale:new i.bI(m),u_ao:new i.bG(m),u_tile_id:new i.bH(m),u_zoom_transition:new i.bI(m),u_inv_rot_matrix:new i.bF(m),u_merc_center:new i.bG(m),u_up_dir:new i.bH(m),u_height_lift:new i.bI(m),u_flood_light_color:new i.bH(m),u_vertical_scale:new i.bI(m),u_flood_light_intensity:new i.bI(m),u_ground_shadow_factor:new i.bH(m)}),fillExtrusionDepth:m=>({u_matrix:new i.bF(m),u_edge_radius:new i.bI(m),u_width_scale:new i.bI(m),u_vertical_scale:new i.bI(m)}),fillExtrusionPattern:m=>({u_matrix:new i.bF(m),u_lightpos:new i.bH(m),u_lightintensity:new i.bI(m),u_lightcolor:new i.bH(m),u_vertical_gradient:new i.bI(m),u_height_factor:new i.bI(m),u_edge_radius:new i.bI(m),u_width_scale:new i.bI(m),u_ao:new i.bG(m),u_tile_id:new i.bH(m),u_zoom_transition:new i.bI(m),u_inv_rot_matrix:new i.bF(m),u_merc_center:new i.bG(m),u_up_dir:new i.bH(m),u_height_lift:new i.bI(m),u_image:new i.bJ(m),u_texsize:new i.bG(m),u_pixel_coord_upper:new i.bG(m),u_pixel_coord_lower:new i.bG(m),u_tile_units_to_pixels:new i.bI(m),u_opacity:new i.bI(m)}),fillExtrusionGroundEffect:m=>({u_matrix:new i.bF(m),u_opacity:new i.bI(m),u_ao_pass:new i.bI(m),u_meter_to_tile:new i.bI(m),u_ao:new i.bG(m),u_flood_light_intensity:new i.bI(m),u_flood_light_color:new i.bH(m),u_attenuation:new i.bI(m),u_edge_radius:new i.bI(m),u_fb:new i.bJ(m),u_fb_size:new i.bI(m),u_dynamic_offset:new i.bI(m)}),fill:m=>({u_matrix:new i.bF(m),u_emissive_strength:new i.bI(m)}),fillPattern:m=>({u_matrix:new i.bF(m),u_emissive_strength:new i.bI(m),u_image:new i.bJ(m),u_texsize:new i.bG(m),u_pixel_coord_upper:new i.bG(m),u_pixel_coord_lower:new i.bG(m),u_tile_units_to_pixels:new i.bI(m)}),fillOutline:m=>({u_matrix:new i.bF(m),u_emissive_strength:new i.bI(m),u_world:new i.bG(m)}),fillOutlinePattern:m=>({u_matrix:new i.bF(m),u_emissive_strength:new i.bI(m),u_world:new i.bG(m),u_image:new i.bJ(m),u_texsize:new i.bG(m),u_pixel_coord_upper:new i.bG(m),u_pixel_coord_lower:new i.bG(m),u_tile_units_to_pixels:new i.bI(m)}),circle:i.cN,collisionBox:m=>({u_matrix:new i.bF(m),u_camera_to_center_distance:new i.bI(m),u_extrude_scale:new i.bG(m)}),collisionCircle:m=>({u_matrix:new i.bF(m),u_inv_matrix:new i.bF(m),u_camera_to_center_distance:new i.bI(m),u_viewport_size:new i.bG(m)}),debug:m=>({u_color:new i.cu(m),u_matrix:new i.bF(m),u_overlay:new i.bJ(m),u_overlay_scale:new i.bI(m)}),clippingMask:m=>({u_matrix:new i.bF(m)}),heatmap:m=>({u_extrude_scale:new i.bI(m),u_intensity:new i.bI(m),u_matrix:new i.bF(m),u_inv_rot_matrix:new i.bF(m),u_merc_center:new i.bG(m),u_tile_id:new i.bH(m),u_zoom_transition:new i.bI(m),u_up_dir:new i.bH(m)}),heatmapTexture:m=>({u_image:new i.bJ(m),u_color_ramp:new i.bJ(m),u_opacity:new i.bI(m)}),hillshade:m=>({u_matrix:new i.bF(m),u_image:new i.bJ(m),u_latrange:new i.bG(m),u_light:new i.bG(m),u_shadow:new i.cu(m),u_highlight:new i.cu(m),u_emissive_strength:new i.bI(m),u_accent:new i.cu(m)}),hillshadePrepare:m=>({u_matrix:new i.bF(m),u_image:new i.bJ(m),u_dimension:new i.bG(m),u_zoom:new i.bI(m)}),line:i.cO,linePattern:i.cP,raster:m=>({u_matrix:new i.bF(m),u_normalize_matrix:new i.bF(m),u_globe_matrix:new i.bF(m),u_merc_matrix:new i.bF(m),u_grid_matrix:new i.cv(m),u_tl_parent:new i.bG(m),u_scale_parent:new i.bI(m),u_fade_t:new i.bI(m),u_opacity:new i.bI(m),u_image0:new i.bJ(m),u_image1:new i.bJ(m),u_brightness_low:new i.bI(m),u_brightness_high:new i.bI(m),u_saturation_factor:new i.bI(m),u_contrast_factor:new i.bI(m),u_spin_weights:new i.bH(m),u_perspective_transform:new i.bG(m),u_raster_elevation:new i.bI(m),u_zoom_transition:new i.bI(m),u_merc_center:new i.bG(m),u_cutoff_params:new i.c6(m),u_colorization_mix:new i.c6(m),u_colorization_offset:new i.bI(m),u_color_ramp:new i.bJ(m),u_texture_offset:new i.bG(m),u_texture_res:new i.bG(m),u_emissive_strength:new i.bI(m)}),rasterParticle:m=>({u_matrix:new i.bF(m),u_normalize_matrix:new i.bF(m),u_globe_matrix:new i.bF(m),u_merc_matrix:new i.bF(m),u_grid_matrix:new i.cv(m),u_tl_parent:new i.bG(m),u_scale_parent:new i.bI(m),u_fade_t:new i.bI(m),u_opacity:new i.bI(m),u_image0:new i.bJ(m),u_image1:new i.bJ(m),u_raster_elevation:new i.bI(m),u_zoom_transition:new i.bI(m),u_merc_center:new i.bG(m),u_cutoff_params:new i.c6(m)}),rasterParticleTexture:m=>({u_texture:new i.bJ(m),u_opacity:new i.bI(m)}),rasterParticleDraw:m=>({u_particle_texture:new i.bJ(m),u_particle_texture_side_len:new i.bI(m),u_tile_offset:new i.bG(m),u_velocity:new i.bJ(m),u_color_ramp:new i.bJ(m),u_velocity_res:new i.bG(m),u_max_speed:new i.bI(m),u_uv_offset:new i.bG(m),u_data_scale:new i.bG(m),u_data_offset:new i.bI(m),u_particle_pos_scale:new i.bI(m),u_particle_pos_offset:new i.bG(m)}),rasterParticleUpdate:m=>({u_particle_texture:new i.bJ(m),u_particle_texture_side_len:new i.bI(m),u_velocity:new i.bJ(m),u_velocity_res:new i.bG(m),u_max_speed:new i.bI(m),u_speed_factor:new i.bI(m),u_reset_rate:new i.bI(m),u_rand_seed:new i.bI(m),u_uv_offset:new i.bG(m),u_data_scale:new i.bG(m),u_data_offset:new i.bI(m),u_particle_pos_scale:new i.bI(m),u_particle_pos_offset:new i.bG(m)}),symbol:m=>({u_is_size_zoom_constant:new i.bJ(m),u_is_size_feature_constant:new i.bJ(m),u_size_t:new i.bI(m),u_size:new i.bI(m),u_camera_to_center_distance:new i.bI(m),u_rotate_symbol:new i.bJ(m),u_aspect_ratio:new i.bI(m),u_fade_change:new i.bI(m),u_matrix:new i.bF(m),u_label_plane_matrix:new i.bF(m),u_coord_matrix:new i.bF(m),u_is_text:new i.bJ(m),u_elevation_from_sea:new i.bJ(m),u_pitch_with_map:new i.bJ(m),u_texsize:new i.bG(m),u_texsize_icon:new i.bG(m),u_texture:new i.bJ(m),u_texture_icon:new i.bJ(m),u_gamma_scale:new i.bI(m),u_device_pixel_ratio:new i.bI(m),u_tile_id:new i.bH(m),u_zoom_transition:new i.bI(m),u_inv_rot_matrix:new i.bF(m),u_merc_center:new i.bG(m),u_camera_forward:new i.bH(m),u_tile_matrix:new i.bF(m),u_up_vector:new i.bH(m),u_ecef_origin:new i.bH(m),u_is_halo:new i.bJ(m),u_icon_transition:new i.bI(m),u_color_adj_mat:new i.bF(m)}),background:m=>({u_matrix:new i.bF(m),u_emissive_strength:new i.bI(m),u_opacity:new i.bI(m),u_color:new i.cu(m)}),backgroundPattern:m=>({u_matrix:new i.bF(m),u_emissive_strength:new i.bI(m),u_opacity:new i.bI(m),u_image:new i.bJ(m),u_pattern_tl:new i.bG(m),u_pattern_br:new i.bG(m),u_texsize:new i.bG(m),u_pattern_size:new i.bG(m),u_pixel_coord_upper:new i.bG(m),u_pixel_coord_lower:new i.bG(m),u_pattern_units_to_pixels:new i.bG(m)}),terrainRaster:m=>({u_matrix:new i.bF(m),u_image0:new i.bJ(m),u_skirt_height:new i.bI(m),u_ground_shadow_factor:new i.bH(m)}),skybox:m=>({u_matrix:new i.bF(m),u_sun_direction:new i.bH(m),u_cubemap:new i.bJ(m),u_opacity:new i.bI(m),u_temporal_offset:new i.bI(m)}),skyboxGradient:m=>({u_matrix:new i.bF(m),u_color_ramp:new i.bJ(m),u_center_direction:new i.bH(m),u_radius:new i.bI(m),u_opacity:new i.bI(m),u_temporal_offset:new i.bI(m)}),skyboxCapture:m=>({u_matrix_3f:new i.cv(m),u_sun_direction:new i.bH(m),u_sun_intensity:new i.bI(m),u_color_tint_r:new i.c6(m),u_color_tint_m:new i.c6(m),u_luminance:new i.bI(m)}),globeRaster:m=>({u_proj_matrix:new i.bF(m),u_globe_matrix:new i.bF(m),u_normalize_matrix:new i.bF(m),u_merc_matrix:new i.bF(m),u_zoom_transition:new i.bI(m),u_merc_center:new i.bG(m),u_image0:new i.bJ(m),u_grid_matrix:new i.cv(m),u_skirt_height:new i.bI(m),u_far_z_cutoff:new i.bI(m),u_frustum_tl:new i.bH(m),u_frustum_tr:new i.bH(m),u_frustum_br:new i.bH(m),u_frustum_bl:new i.bH(m),u_globe_pos:new i.bH(m),u_globe_radius:new i.bI(m),u_viewport:new i.bG(m)}),globeAtmosphere:m=>({u_frustum_tl:new i.bH(m),u_frustum_tr:new i.bH(m),u_frustum_br:new i.bH(m),u_frustum_bl:new i.bH(m),u_horizon:new i.bI(m),u_transition:new i.bI(m),u_fadeout_range:new i.bI(m),u_color:new i.c6(m),u_high_color:new i.c6(m),u_space_color:new i.c6(m),u_temporal_offset:new i.bI(m),u_horizon_angle:new i.bI(m)}),model:m=>({u_matrix:new i.bF(m),u_lighting_matrix:new i.bF(m),u_normal_matrix:new i.bF(m),u_node_matrix:new i.bF(m),u_lightpos:new i.bH(m),u_lightintensity:new i.bI(m),u_lightcolor:new i.bH(m),u_camera_pos:new i.bH(m),u_opacity:new i.bI(m),u_baseColorFactor:new i.c6(m),u_emissiveFactor:new i.c6(m),u_metallicFactor:new i.bI(m),u_roughnessFactor:new i.bI(m),u_baseTextureIsAlpha:new i.bJ(m),u_alphaMask:new i.bJ(m),u_alphaCutoff:new i.bI(m),u_baseColorTexture:new i.bJ(m),u_metallicRoughnessTexture:new i.bJ(m),u_normalTexture:new i.bJ(m),u_occlusionTexture:new i.bJ(m),u_emissionTexture:new i.bJ(m),u_lutTexture:new i.bJ(m),u_color_mix:new i.c6(m),u_aoIntensity:new i.bI(m),u_emissive_strength:new i.bI(m),u_occlusionTextureTransform:new i.c6(m)}),modelDepth:m=>({u_matrix:new i.bF(m),u_instance:new i.bF(m),u_node_matrix:new i.bF(m)}),groundShadow:m=>({u_matrix:new i.bF(m),u_ground_shadow_factor:new i.bH(m)}),stars:m=>({u_matrix:new i.bF(m),u_up:new i.bH(m),u_right:new i.bH(m),u_intensity_multiplier:new i.bI(m)}),occlusion:m=>({u_matrix:new i.bF(m),u_anchorPos:new i.bH(m),u_screenSizePx:new i.bG(m),u_occluderSizePx:new i.bG(m),u_color:new i.c6(m)})};class pn{constructor(a,u,g,v){this.id=pn.uniqueIdxCounter,pn.uniqueIdxCounter++,this.context=a;const x=a.gl;this.buffer=x.createBuffer(),this.dynamicDraw=!!g,this.context.unbindVAO(),a.bindElementBuffer.set(this.buffer),x.bufferData(x.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||v||u.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(a){this.id=pn.uniqueIdxCounter,pn.uniqueIdxCounter++;const u=this.context.gl;this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,a.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}pn.uniqueIdxCounter=0;const un={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Zt{constructor(a,u,g,v,x,B){this.length=u.length,this.attributes=g,this.itemSize=u.bytesPerElement,this.dynamicDraw=v,this.instanceCount=B,this.context=a;const k=a.gl;this.buffer=k.createBuffer(),a.bindVertexBuffer.set(this.buffer),k.bufferData(k.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?k.DYNAMIC_DRAW:k.STATIC_DRAW),this.dynamicDraw||x||u.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(a){const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,a.arrayBuffer)}enableAttributes(a,u){for(let g=0;g<this.attributes.length;g++){const v=u.attributes[this.attributes[g].name];v!==void 0&&a.enableVertexAttribArray(v)}}setVertexAttribPointers(a,u,g){for(let v=0;v<this.attributes.length;v++){const x=this.attributes[v],B=u.attributes[x.name];B!==void 0&&a.vertexAttribPointer(B,x.components,a[un[x.type]],!1,this.itemSize,x.offset+this.itemSize*(g||0))}}setVertexAttribDivisor(a,u,g){for(let v=0;v<this.attributes.length;v++){const x=u.attributes[this.attributes[v].name];x!==void 0&&this.instanceCount&&this.instanceCount>0&&a.vertexAttribDivisor(x,g)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Pn{constructor(a,u,g,v,x){this.context=a,this.width=u,this.height=g;const B=this.framebuffer=a.gl.createFramebuffer();v&&(this.colorAttachment=new MA(a,B)),x&&(this.depthAttachmentType=x,this.depthAttachment=x==="renderbuffer"?new OA(a,B):new zg(a,B))}destroy(){const a=this.context.gl;if(this.colorAttachment){const u=this.colorAttachment.get();u&&a.deleteTexture(u)}if(this.depthAttachment&&this.depthAttachmentType)if(this.depthAttachmentType==="renderbuffer"){const u=this.depthAttachment.get();u&&a.deleteRenderbuffer(u)}else{const u=this.depthAttachment.get();u&&a.deleteTexture(u)}a.deleteFramebuffer(this.framebuffer)}}class Wt{constructor(a,u){this.gl=a,this.clearColor=new ks(this),this.clearDepth=new Zc(this),this.clearStencil=new Vh(this),this.colorMask=new Su(this),this.depthMask=new oh(this),this.stencilMask=new TA(this),this.stencilFunc=new xf(this),this.stencilOp=new hl(this),this.stencilTest=new va(this),this.depthRange=new Cf(this),this.depthTest=new IA(this),this.depthFunc=new Ng(this),this.blend=new PA(this),this.blendFunc=new Sd(this),this.blendColor=new Ef(this),this.blendEquation=new LA(this),this.cullFace=new Bf(this),this.cullFaceSide=new FA(this),this.frontFace=new Sf(this),this.program=new ym(this),this.activeTexture=new Tf(this),this.viewport=new If(this),this.bindFramebuffer=new _m(this),this.bindRenderbuffer=new Bl(this),this.bindTexture=new vm(this),this.bindVertexBuffer=new RA(this),this.bindElementBuffer=new kA(this),this.bindVertexArrayOES=new bm(this),this.pixelStoreUnpack=new Pf(this),this.pixelStoreUnpackPremultiplyAlpha=new Td(this),this.pixelStoreUnpackFlipY=new Qh(this),this.options=u?{...u}:{},this.options.extTextureFilterAnisotropicForceOff||(this.extTextureFilterAnisotropic=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=a.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),this.extDebugRendererInfo=a.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=a.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=a.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.options.extTextureFloatLinearForceOff||(this.extTextureFloatLinear=a.getExtension("OES_texture_float_linear")),this.extRenderToTextureHalfFloat=a.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=a.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),this.maxPointSize=a.getParameter(a.ALIASED_POINT_SIZE_RANGE)[1]}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(a,u,g){return new pn(this,a,u,g)}createVertexBuffer(a,u,g,v,x){return new Zt(this,a,u,g,v,x)}createRenderbuffer(a,u,g){const v=this.gl,x=v.createRenderbuffer();return this.bindRenderbuffer.set(x),v.renderbufferStorage(v.RENDERBUFFER,a,u,g),this.bindRenderbuffer.set(null),x}createFramebuffer(a,u,g,v){return new Pn(this,a,u,g,v)}clear({color:a,depth:u,stencil:g,colorMask:v}){const x=this.gl;let B=0;a&&(B|=x.COLOR_BUFFER_BIT,this.clearColor.set(a),this.colorMask.set(v||[!0,!0,!0,!0])),u!==void 0&&(B|=x.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),g!==void 0&&(B|=x.STENCIL_BUFFER_BIT,this.clearStencil.set(g),this.stencilMask.set(255)),x.clear(B)}setCullFace(a){a.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(a.mode),this.frontFace.set(a.frontFace))}setDepthMode(a){a.func!==this.gl.ALWAYS||a.mask?(this.depthTest.set(!0),this.depthFunc.set(a.func),this.depthMask.set(a.mask),this.depthRange.set(a.range)):this.depthTest.set(!1)}setStencilMode(a){a.test.func!==this.gl.ALWAYS||a.mask?(this.stencilTest.set(!0),this.stencilMask.set(a.mask),this.stencilOp.set([a.fail,a.depthFail,a.pass]),this.stencilFunc.set({func:a.test.func,ref:a.ref,mask:a.test.mask})):this.stencilTest.set(!1)}setColorMode(a){i.bh(a.blendFunction,fe.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(a.blendFunction),this.blendColor.set(a.blendColor),a.blendEquation?this.blendEquation.set(a.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(a.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}let en;function Gn(m,a,u,g,v,x,B){const k=m.context,z=k.gl,Q=m.transform,j=m.getOrCreateProgram("collisionBox"),W=[];let J=0,re=0;for(let Ue=0;Ue<g.length;Ue++){const Xe=g[Ue],qe=a.getTile(Xe),ut=qe.getBucket(u);if(!ut)continue;const it=ca(Xe,ut,Q);let ht=it;v[0]===0&&v[1]===0||(ht=m.translatePosMatrix(it,qe,v,x));const xt=B?ut.textCollisionBox:ut.iconCollisionBox,pt=ut.collisionCircleArray;if(pt.length>0){const At=i.a6.mat4.create(),Rt=ht;i.a6.mat4.mul(At,ut.placementInvProjMatrix,Q.glCoordMatrix),i.a6.mat4.mul(At,At,ut.placementViewportMatrix),W.push({circleArray:pt,circleOffset:re,transform:Rt,invTransform:At,projection:ut.getProjection()}),J+=pt.length/4,re=J}xt&&(m.terrain&&m.terrain.setupElevationDraw(qe,j),j.draw(m,z.LINES,Le.disabled,Qt.disabled,m.colorModeForRenderPass(),ir.disabled,s0(ht,Q,qe,ut.getProjection()),u.id,xt.layoutVertexBuffer,xt.indexBuffer,xt.segments,null,Q.zoom,null,[xt.collisionVertexBuffer,xt.collisionVertexBufferExt]))}if(!B||!W.length)return;const de=m.getOrCreateProgram("collisionCircle"),me=new i.cQ;me.resize(4*J),me._trim();let _e=0;for(const Ue of W)for(let Xe=0;Xe<Ue.circleArray.length/4;Xe++){const qe=4*Xe,ut=Ue.circleArray[qe+0],it=Ue.circleArray[qe+1],ht=Ue.circleArray[qe+2],xt=Ue.circleArray[qe+3];me.emplace(_e++,ut,it,ht,xt,0),me.emplace(_e++,ut,it,ht,xt,1),me.emplace(_e++,ut,it,ht,xt,2),me.emplace(_e++,ut,it,ht,xt,3)}(!en||en.length<2*J)&&(en=function(Ue){const Xe=2*Ue,qe=new i.aO;qe.resize(Xe),qe._trim();for(let ut=0;ut<Xe;ut++){const it=6*ut;qe.uint16[it+0]=4*ut+0,qe.uint16[it+1]=4*ut+1,qe.uint16[it+2]=4*ut+2,qe.uint16[it+3]=4*ut+2,qe.uint16[it+4]=4*ut+3,qe.uint16[it+5]=4*ut+0}return qe}(J));const xe=k.createIndexBuffer(en,!0),ze=k.createVertexBuffer(me,i.cR.members,!0);for(const Ue of W){const Xe={u_matrix:Ue.transform,u_inv_matrix:Ue.invTransform,u_camera_to_center_distance:(Qe=Q).getCameraToCenterDistance(Ue.projection),u_viewport_size:[Qe.width,Qe.height]};de.draw(m,z.TRIANGLES,Le.disabled,Qt.disabled,m.colorModeForRenderPass(),ir.disabled,Xe,u.id,ze,xe,i.b1.simpleSegment(0,2*Ue.circleOffset,Ue.circleArray.length,Ue.circleArray.length/2),null,Q.zoom)}var Qe;ze.destroy(),xe.destroy()}const Xn=i.a6.mat4.create();function qn(m){const a=m._camera.getWorldToCamera(m.worldSize,1),u=i.a6.mat4.multiply([],a,m.globeMatrix);i.a6.mat4.invert(u,u);const g=[0,0,0],v=[0,1,0,0];return i.a6.vec4.transformMat4(v,v,u),g[0]=v[0],g[1]=v[1],g[2]=v[2],i.a6.vec3.normalize(g,g),g}function Pr({width:m,height:a,anchor:u,textOffset:g,textScale:v},x){const{horizontalAlign:B,verticalAlign:k}=i.bx(u),z=-(B-.5)*m,Q=-(k-.5)*a,j=i.bw(u,g);return new i.P((z/v+j[0])*x,(Q/v+j[1])*x)}function Cr(m,a,u,g,v,x,B,k,z,Q,j){const W=m.text.placedSymbolArray,J=m.text.dynamicLayoutVertexArray,re=m.icon.dynamicLayoutVertexArray,de={},me=m.getProjection(),_e=$a(k,me,x),xe=x.elevation,ze=me.upVectorScale(k.canonical,x.center.lat,x.worldSize).metersToTile;J.clear();for(let Qe=0;Qe<W.length;Qe++){const Ue=W.get(Qe),{tileAnchorX:Xe,tileAnchorY:qe,numGlyphs:ut}=Ue,it=Ue.hidden||!Ue.crossTileID||m.allowVerticalPlacement&&!Ue.placedOrientation?null:g[Ue.crossTileID];if(it){let ht=0,xt=0,pt=0;if(xe){const An=xe?xe.getAtTileOffset(k,Xe,qe):0,[Rn,Mn,bn]=me.upVector(k.canonical,Xe,qe);ht=An*Rn*ze,xt=An*Mn*ze,pt=An*bn*ze}let[At,Rt,cn,wn]=Yo(Ue.projectedAnchorX+ht,Ue.projectedAnchorY+xt,Ue.projectedAnchorZ+pt,u?_e:B);const ln=$r(x.getCameraToCenterDistance(me),wn);let Ln=v.evaluateSizeForFeature(m.textSizeData,Q,Ue)*ln/i.bq;u&&(Ln*=m.tilePixelRatio/z);const kt=Pr(it,Ln);u?({x:At,y:Rt,z:cn}=me.projectTilePoint(Xe+kt.x,qe+kt.y,k.canonical),[At,Rt,cn]=Yo(At+ht,Rt+xt,cn+pt,B)):(a&&kt._rotate(-x.angle),At+=kt.x,Rt+=kt.y,cn=0);const mn=m.allowVerticalPlacement&&Ue.placedOrientation===i.bk.vertical?Math.PI/2:0;for(let An=0;An<ut;An++)i.bn(J,At,Rt,cn,mn);j&&Ue.associatedIconIndex>=0&&(de[Ue.associatedIconIndex]={x:At,y:Rt,z:cn,angle:mn})}else la(ut,J)}if(j){re.clear();const Qe=m.icon.placedSymbolArray;for(let Ue=0;Ue<Qe.length;Ue++){const Xe=Qe.get(Ue),{numGlyphs:qe}=Xe,ut=de[Ue];if(Xe.hidden||!ut)la(qe,re);else{const{x:it,y:ht,z:xt,angle:pt}=ut;for(let At=0;At<qe;At++)i.bn(re,it,ht,xt,pt)}}m.icon.dynamicLayoutVertexBuffer.updateData(re)}m.text.dynamicLayoutVertexBuffer.updateData(J)}function Kr(m,a,u,g,v,x,B={}){const k=u.paint.get("icon-translate"),z=u.paint.get("text-translate"),Q=u.paint.get("icon-translate-anchor"),j=u.paint.get("text-translate-anchor"),W=u.layout.get("icon-rotation-alignment"),J=u.layout.get("text-rotation-alignment"),re=u.layout.get("icon-pitch-alignment"),de=u.layout.get("text-pitch-alignment"),me=u.layout.get("icon-keep-upright"),_e=u.layout.get("text-keep-upright"),xe=u.paint.get("icon-color-saturation"),ze=u.paint.get("icon-color-contrast"),Qe=u.paint.get("icon-color-brightness-min"),Ue=u.paint.get("icon-color-brightness-max"),Xe=u.paint.get("symbol-elevation-reference")==="sea",qe=u.paint.get("text-occlusion-opacity").constantOr(0),ut=m.context,it=ut.gl,ht=m.transform,xt=W==="map",pt=J==="map",At=re==="map",Rt=de==="map",cn=u.layout.get("symbol-sort-key").constantOr(1)!==void 0;let wn=!1;const ln=m.depthModeForSublayer(0,Le.ReadOnly),Ln=[i.am(ht.center.lng),i.at(ht.center.lat)],kt=u.layout.get("text-variable-anchor"),mn=ht.projection.name==="globe",An=[],Rn=[0,-1,0];for(const Mn of g){const bn=a.getTile(Mn),Cn=bn.getBucket(u);if(!Cn||Cn.projection.name==="mercator"&&mn||Cn.fullyClipped)continue;const vr=Cn.projection.name==="globe",Qn=vr?i.a9(ht.zoom):0,rr=$a(Mn,Cn.getProjection(),ht),Rr=ht.calculatePixelsToTileUnitsMatrix(bn),fr=kt&&Cn.hasTextData(),Sr=Cn.hasIconTextFit()&&fr&&Cn.hasIconData(),Yr=Cn.getProjection().createInversionMatrix(ht,Mn.canonical),qr=Ki=>{ht.depthOcclusionForSymbolsAndCircles&&(u.hasInitialOcclusionOpacityProperties||m.terrain)&&(Ki.push("DEPTH_D24"),Ki.push("DEPTH_OCCLUSION"))},ji=()=>{const Ki=xt&&u.layout.get("symbol-placement")!=="point",Xr=[];qr(Xr);const Ii=Ki||Sr,Qi=u.paint.get("icon-image-cross-fade").constantOr(0);m.terrainRenderModeElevated()&&At&&Xr.push("PITCH_WITH_MAP_TERRAIN"),vr&&(Xr.push("PROJECTION_GLOBE_VIEW"),Ii&&Xr.push("PROJECTED_POS_ON_VIEWPORT")),Qi>0&&Xr.push("ICON_TRANSITION"),Cn.icon.zOffsetVertexBuffer&&Xr.push("Z_OFFSET"),xe===0&&ze===0&&Qe===0&&Ue===1||Xr.push("COLOR_ADJUSTMENT"),Cn.sdfIcons&&Xr.push("RENDER_SDF");const ds=Cn.icon.programConfigurations.get(u.id),Ss=m.getOrCreateProgram("symbol",{config:ds,defines:Xr}),bi=bn.imageAtlasTexture?bn.imageAtlasTexture.size:[0,0],ta=Cn.iconSizeData,Aa=i.bj(ta,ht.zoom),na=At||ht.pitch!==0,vo=ti(rr,bn.tileID.canonical,At,xt,ht,Cn.getProjection(),Rr),Il=Ws(rr,bn.tileID.canonical,At,xt,ht,Cn.getProjection(),Rr),Pl=m.translatePosMatrix(Il,bn,k,Q,!0),nu=m.translatePosMatrix(rr,bn,k,Q),kc=Ii?Xn:vo,tc=xt&&!At&&!Ki;let ru=Rn;!mn&&!ht.mercatorFromTransition||xt||(ru=qn(ht));const Zh=vr?ru:Rn,Qd=u.getColorAdjustmentMatrix(xe,ze,Qe,Ue),ph=Ge(ta.kind,Aa,tc,At,m,nu,kc,Pl,Xe,!1,bi,[0,0],!0,Mn,Qn,Ln,Yr,Zh,Cn.getProjection(),Qd,Qi),qA=bn.imageAtlasTexture?bn.imageAtlasTexture:null,WA=u.layout.get("icon-size").constantOr(0)!==1||Cn.iconsNeedLinear,ey=Cn.sdfIcons||m.options.rotating||m.options.zooming||WA||na?it.LINEAR:it.NEAREST,XA=Cn.sdfIcons&&u.paint.get("icon-halo-width").constantOr(1)!==0,bo=m.terrain&&At&&Ki?i.a6.mat4.invert(i.a6.mat4.create(),vo):Xn;if(Ki&&Cn.icon){const Kf=ht.elevation,kB=Kf?Kf.getAtTileOffsetFunc(Mn,ht.center.lat,ht.worldSize,Cn.getProjection()):null,Rb=ni(rr,bn.tileID.canonical,At,xt,ht,Cn.getProjection(),Rr);jl(Cn,rr,m,!1,Rb,Il,At,me,kB,Mn)}return{program:Ss,buffers:Cn.icon,uniformValues:ph,atlasTexture:qA,atlasTextureIcon:null,atlasInterpolation:ey,atlasInterpolationIcon:null,isSDF:Cn.sdfIcons,hasHalo:XA,tile:bn,labelPlaneMatrixInv:bo}},oo=()=>{const Ki=pt&&u.layout.get("symbol-placement")!=="point",Xr=[],Ii=Ki||kt||Sr;m.terrainRenderModeElevated()&&Rt&&Xr.push("PITCH_WITH_MAP_TERRAIN"),vr&&(Xr.push("PROJECTION_GLOBE_VIEW"),Ii&&Xr.push("PROJECTED_POS_ON_VIEWPORT")),Cn.text.zOffsetVertexBuffer&&Xr.push("Z_OFFSET"),Cn.iconsInText&&Xr.push("RENDER_TEXT_AND_SYMBOL"),Xr.push("RENDER_SDF"),qr(Xr);const Qi=Cn.text.programConfigurations.get(u.id),ds=m.getOrCreateProgram("symbol",{config:Qi,defines:Xr});let Ss,bi=[0,0],ta=null;const Aa=Cn.textSizeData;Cn.iconsInText&&(bi=bn.imageAtlasTexture?bn.imageAtlasTexture.size:[0,0],ta=bn.imageAtlasTexture?bn.imageAtlasTexture:null,Ss=Rt||ht.pitch!==0||m.options.rotating||m.options.zooming||Aa.kind==="composite"||Aa.kind==="camera"?it.LINEAR:it.NEAREST);const na=bn.glyphAtlasTexture?bn.glyphAtlasTexture.size:[0,0],vo=i.bj(Aa,ht.zoom),Il=ti(rr,bn.tileID.canonical,Rt,pt,ht,Cn.getProjection(),Rr),Pl=Ws(rr,bn.tileID.canonical,Rt,pt,ht,Cn.getProjection(),Rr),nu=m.translatePosMatrix(Pl,bn,z,j,!0),kc=m.translatePosMatrix(rr,bn,z,j),tc=Ii?Xn:Il,ru=pt&&!Rt&&!Ki;let Zh=Rn;!mn&&!ht.mercatorFromTransition||pt||(Zh=qn(ht));const Qd=Ge(Aa.kind,vo,ru,Rt,m,kc,tc,nu,Xe,!0,na,bi,!0,Mn,Qn,Ln,Yr,vr?Zh:Rn,Cn.getProjection(),qe),ph=bn.glyphAtlasTexture?bn.glyphAtlasTexture:null,qA=it.LINEAR,WA=u.paint.get("text-halo-width").constantOr(1)!==0,ey=m.terrain&&Rt&&Ki?i.a6.mat4.invert(i.a6.mat4.create(),Il):Xn;if(Ki&&Cn.text){const XA=ht.elevation,bo=XA?XA.getAtTileOffsetFunc(Mn,ht.center.lat,ht.worldSize,Cn.getProjection()):null,Kf=ni(rr,bn.tileID.canonical,Rt,pt,ht,Cn.getProjection(),Rr);jl(Cn,rr,m,!0,Kf,Pl,Rt,_e,bo,Mn)}return{program:ds,buffers:Cn.text,uniformValues:Qd,atlasTexture:ph,atlasTextureIcon:ta,atlasInterpolation:qA,atlasInterpolationIcon:Ss,isSDF:!0,hasHalo:WA,tile:bn,labelPlaneMatrixInv:ey}},So=Cn.icon.segments.get().length,tu=Cn.text.segments.get().length,Bs=So&&!B.onlyText?ji():null,ci=tu&&!B.onlyIcons?oo():null,eo=u.paint.get("icon-opacity").constantOr(1),Xo=u.paint.get("text-opacity").constantOr(1);if(cn&&Cn.canOverlap){wn=!0;const Ki=eo&&!B.onlyText?Cn.icon.segments.get():[],Xr=Xo&&!B.onlyIcons?Cn.text.segments.get():[];for(const Ii of Ki)An.push({segments:new i.b1([Ii]),sortKey:Ii.sortKey,state:Bs});for(const Ii of Xr)An.push({segments:new i.b1([Ii]),sortKey:Ii.sortKey,state:ci})}else B.onlyText||An.push({segments:eo?Cn.icon.segments:new i.b1([]),sortKey:0,state:Bs}),B.onlyIcons||An.push({segments:Xo?Cn.text.segments:new i.b1([]),sortKey:0,state:ci})}wn&&An.sort((Mn,bn)=>Mn.sortKey-bn.sortKey);for(const Mn of An){const bn=Mn.state;if(bn)if(m.terrain?m.terrain.setupElevationDraw(bn.tile,bn.program,{useDepthForOcclusion:ht.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:bn.labelPlaneMatrixInv}):m.setupDepthForOcclusion(ht.depthOcclusionForSymbolsAndCircles,bn.program),ut.activeTexture.set(it.TEXTURE0),bn.atlasTexture&&bn.atlasTexture.bind(bn.atlasInterpolation,it.CLAMP_TO_EDGE,!0),bn.atlasTextureIcon&&(ut.activeTexture.set(it.TEXTURE1),bn.atlasTextureIcon&&bn.atlasTextureIcon.bind(bn.atlasInterpolationIcon,it.CLAMP_TO_EDGE,!0)),m.uploadCommonLightUniforms(m.context,bn.program),bn.hasHalo){const Cn=bn.uniformValues;Cn.u_is_halo=1,wr(bn.buffers,Mn.segments,u,m,bn.program,ln,v,x,Cn,2),Cn.u_is_halo=0}else{if(bn.isSDF){const Cn=bn.uniformValues;bn.hasHalo&&(Cn.u_is_halo=1,wr(bn.buffers,Mn.segments,u,m,bn.program,ln,v,x,Cn,1)),Cn.u_is_halo=0}wr(bn.buffers,Mn.segments,u,m,bn.program,ln,v,x,bn.uniformValues,1)}}}function wr(m,a,u,g,v,x,B,k,z,Q){const j=[m.dynamicLayoutVertexBuffer,m.opacityVertexBuffer,m.iconTransitioningVertexBuffer,m.globeExtVertexBuffer,m.zOffsetVertexBuffer];v.draw(g,g.context.gl.TRIANGLES,x,B,k,ir.disabled,z,u.id,m.layoutVertexBuffer,m.indexBuffer,a,u.paint,g.transform.zoom,m.programConfigurations.get(u.id),j,Q)}function Zi(m,a,u,g,v,x,B){const k=m.context.gl,z=u.paint.get("fill-pattern"),Q=u.is3D(),j=Q?m.stencilModeFor3D():Qt.disabled,W=z&&z.constantOr(1);let J,re,de,me,_e;B?(re=W&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",J=k.LINES):(re=W?"fillPattern":"fill",J=k.TRIANGLES);for(const xe of g){const ze=a.getTile(xe);if(W&&!ze.patternsLoaded())continue;const Qe=ze.getBucket(u);if(!Qe)continue;m.prepareDrawTile();const Ue=Qe.programConfigurations.get(u.id),Xe=m.isTileAffectedByFog(xe),qe=m.getOrCreateProgram(re,{config:Ue,overrideFog:Xe});W&&(m.context.activeTexture.set(k.TEXTURE0),ze.imageAtlasTexture&&ze.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),Ue.updatePaintBuffers());const ut=z.constantOr(null);if(ut&&ze.imageAtlas){const xt=ze.imageAtlas.patternPositions[ut.toString()];xt&&Ue.setConstantPatternPositions(xt)}const it=m.translatePosMatrix(xe.projMatrix,ze,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor")),ht=u.paint.get("fill-emissive-strength");if(B){me=Qe.indexBuffer2,_e=Qe.segments2;const xt=m.terrain&&m.terrain.renderingToTexture?m.terrain.drapeBufferSize:[k.drawingBufferWidth,k.drawingBufferHeight];de=re==="fillOutlinePattern"&&W?kf(it,ht,m,ze,xt):Gg(it,ht,xt)}else me=Qe.indexBuffer,_e=Qe.segments,de=W?$g(it,ht,m,ze):Rf(it,ht);m.uploadCommonUniforms(m.context,qe,xe.toUnwrapped()),qe.draw(m,J,v,Q?j:m.stencilModeForClipping(xe),x,ir.disabled,de,u.id,Qe.layoutVertexBuffer,me,_e,u.paint,m.transform.zoom,Ue,void 0)}}function Yi(m,a,u,g,v,x,B,k){u.resetLayerRenderingStats(m);const z=m.context,Q=z.gl,j=m.transform,W=u.paint.get("fill-extrusion-pattern"),J=W.constantOr(1),re=u.paint.get("fill-extrusion-opacity"),de=m.style.enable3dLights(),me=u.paint.get(de&&!J?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),_e=[u.paint.get("fill-extrusion-ambient-occlusion-intensity"),me],xe=u.layout.get("fill-extrusion-edge-radius"),ze=xe>0&&!u.paint.get("fill-extrusion-rounded-roof"),Qe=ze?0:xe,Ue=j.projection.name==="globe"?i.c_():0,Xe=j.projection.name==="globe",qe=Xe?i.a9(j.zoom):0,ut=[i.am(j.center.lng),i.at(j.center.lat)],it=u.paint.get("fill-extrusion-flood-light-color").toRenderColor(u.lut).toArray01().slice(0,3),ht=u.paint.get("fill-extrusion-flood-light-intensity"),xt=u.paint.get("fill-extrusion-vertical-scale"),pt=u.paint.get("fill-extrusion-line-width").constantOr(1)!==0,At=rs(m,u.paint.get("fill-extrusion-cutoff-fade-range")),Rt=[];let cn;Xe&&Rt.push("PROJECTION_GLOBE_VIEW"),_e[0]>0&&Rt.push("FAUX_AO"),ze&&Rt.push("ZERO_ROOF_RADIUS"),k&&Rt.push("HAS_CENTROID"),ht>0&&Rt.push("FLOOD_LIGHT"),At.shouldRenderCutoff&&Rt.push("RENDER_CUTOFF"),pt&&Rt.push("RENDER_WALL_MODE");const wn=m.renderPass==="shadow",ln=m.shadowRenderer,Ln=wn&&!!ln;m.shadowRenderer&&(m.shadowRenderer.useNormalOffset=!0);let kt=[0,0,0];if(ln){const Rn=m.style.directionalLight,Mn=m.style.ambientLight;Rn&&Mn&&(kt=eh(m.style,Rn,Mn)),cn=Rt.concat(["SHADOWS_SINGLE_CASCADE"])}const mn=Ln?"fillExtrusionDepth":J?"fillExtrusionPattern":"fillExtrusion",An=u.getLayerRenderingStats();for(const Rn of g){const Mn=a.getTile(Rn),bn=Mn.getBucket(u);if(!bn||bn.projection.name!==j.projection.name)continue;let Cn=!1;ln&&(Cn=ln.getMaxCascadeForTile(Rn.toUnwrapped())===0);const vr=m.isTileAffectedByFog(Rn),Qn=bn.programConfigurations.get(u.id),rr=m.getOrCreateProgram(mn,{config:Qn,defines:Cn?cn:Rt,overrideFog:vr});if(m.terrain&&m.terrain.setupElevationDraw(Mn,rr,{useMeterToDem:!0}),!bn.centroidVertexBuffer){const oo=rr.attributes.a_centroid_pos;oo!==void 0&&Q.vertexAttrib2f(oo,0,0)}!wn&&ln&&ln.setupShadows(Mn.tileID.toUnwrapped(),rr,"vector-tile",Mn.tileID.overscaledZ),J&&(m.context.activeTexture.set(Q.TEXTURE0),Mn.imageAtlasTexture&&Mn.imageAtlasTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),Qn.updatePaintBuffers());const Rr=W.constantOr(null);if(Rr&&Mn.imageAtlas){const oo=Mn.imageAtlas.patternPositions[Rr.toString()];oo&&Qn.setConstantPatternPositions(oo)}const fr=u.paint.get("fill-extrusion-vertical-gradient"),Sr=1/bn.tileToMeter;let Yr;if(wn&&ln){if(Es(Mn.tileID,bn,m))continue;const oo=ln.calculateShadowPassMatrixFromTile(Mn.tileID.toUnwrapped());Yr=wm(oo,Qe,Sr,xt)}else{const oo=m.translatePosMatrix(Rn.expandedProjMatrix,Mn,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),So=j.projection.createInversionMatrix(j,Rn.canonical);Yr=J?xm(oo,m,fr,re,_e,Qe,Sr,Rn,Mn,Ue,qe,ut,So,it,xt):Ff(oo,m,fr,re,_e,Qe,Sr,Rn,Ue,qe,ut,So,it,xt,ht,kt)}m.uploadCommonUniforms(z,rr,Rn.toUnwrapped(),null,At);let qr=bn.segments;if(j.projection.name==="mercator"&&!wn&&(qr=bn.getVisibleSegments(Mn.tileID,m.terrain,m.transform.getFrustum(0)),!qr.get().length))continue;if(An)if(wn)for(const oo of qr.get())An.numRenderedVerticesInShadowPass+=oo.primitiveLength;else for(const oo of qr.get())An.numRenderedVerticesInTransparentPass+=oo.primitiveLength;const ji=[];(m.terrain||k)&&ji.push(bn.centroidVertexBuffer),Xe&&ji.push(bn.layoutVertexExtBuffer),pt&&ji.push(bn.wallVertexBuffer),rr.draw(m,z.gl.TRIANGLES,v,x,B,ir.backCCW,Yr,u.id,bn.layoutVertexBuffer,bn.indexBuffer,qr,u.paint,m.transform.zoom,Qn,ji)}m.shadowRenderer&&(m.shadowRenderer.useNormalOffset=!1)}function si(m,a,u,g,v,x,B,k,z,Q,j,W,J,re,de,me,_e,xe,ze){const Qe=m.context,Ue=Qe.gl,Xe=m.transform,qe=m.transform.zoom,ut=[],it=rs(m,u.paint.get("fill-extrusion-cutoff-fade-range"));Q==="clear"?(ut.push("CLEAR_SUBPASS"),ze&&(ut.push("CLEAR_FROM_TEXTURE"),Qe.activeTexture.set(Ue.TEXTURE0),ze.bind(Ue.LINEAR,Ue.CLAMP_TO_EDGE))):Q==="sdf"&&ut.push("SDF_SUBPASS"),_e&&ut.push("HAS_CENTROID"),it.shouldRenderCutoff&&ut.push("RENDER_CUTOFF");const ht=u.layout.get("fill-extrusion-edge-radius"),xt=(pt,At,Rt,cn,wn)=>{const ln=At.programConfigurations.get(u.id),Ln=m.isTileAffectedByFog(pt),kt=m.getOrCreateProgram("fillExtrusionGroundEffect",{config:ln,defines:ut,overrideFog:Ln}),mn=((Rn,Mn,bn,Cn,vr,Qn,rr,Rr,fr,Sr,Yr)=>({u_matrix:Mn,u_opacity:bn,u_ao_pass:Cn?1:0,u_meter_to_tile:vr,u_ao:Qn,u_flood_light_intensity:rr,u_flood_light_color:Rr,u_attenuation:fr,u_edge_radius:Sr,u_fb:0,u_fb_size:Yr,u_dynamic_offset:1}))(0,cn,j,z,wn,[W,J*wn],re,de,me,qe>=17?0:ht*wn,ze?ze.size[0]:0),An=[];_e&&An.push(At.hiddenByLandmarkVertexBuffer),m.uploadCommonUniforms(Qe,kt,pt.toUnwrapped(),null,it),kt.draw(m,Qe.gl.TRIANGLES,v,x,B,k,mn,u.id,At.vertexBuffer,At.indexBuffer,Rt,u.paint,qe,ln,An)};for(const pt of g){const At=a.getTile(pt),Rt=At.getBucket(u);if(!Rt||Rt.projection.name!==Xe.projection.name||!Rt.groundEffect||Rt.groundEffect&&!Rt.groundEffect.hasData())continue;const cn=Rt.groundEffect,wn=1/Rt.tileToMeter;{const ln=m.translatePosMatrix(pt.projMatrix,At,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),Ln=cn.getDefaultSegment();xt(pt,cn,Ln,ln,wn)}if(xe)for(let ln=0;ln<4;ln++){const Ln=i.c$[ln](pt),kt=a.getTile(Ln);if(!kt)continue;const mn=kt.getBucket(u);if(!mn||mn.projection.name!==Xe.projection.name||!mn.groundEffect||mn.groundEffect&&!mn.groundEffect.hasData())continue;const An=mn.groundEffect;let Rn,Mn;ln===0?(Rn=[-i.ab,0,0],Mn=1):ln===1?(Rn=[i.ab,0,0],Mn=0):ln===2?(Rn=[0,-i.ab,0],Mn=3):(Rn=[0,i.ab,0],Mn=2);const bn=An.regionSegments[Mn];if(!bn)continue;const Cn=new Float32Array(16);i.a6.mat4.translate(Cn,pt.projMatrix,Rn),xt(pt,An,bn,m.translatePosMatrix(Cn,At,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),wn)}}}function Ei(m,a,u,g,v,x,B){g.centroidVertexArray.length===0&&g.createCentroidsBuffer();const k=x?x.findDEMTileFor(u):null;if(!(k&&k.dem||B))return;const z=xe=>new i.P(Math.ceil((xe+i.d2)*i.d3),0),Q=xe=>{const ze=a.getSource().minzoom,Qe=Xe=>{const qe=a.getTileByID(Xe);if(qe&&qe.hasData())return qe.getBucket(v)},Ue=[0,-1,1];for(const Xe of Ue){if(xe.overscaledZ+Xe<ze)continue;const qe=Qe(xe.calculateScaledKey(xe.overscaledZ+Xe));if(qe)return qe}},j=[0,0,0],W=(xe,ze)=>(j[0]=Math.min(xe.min.y,ze.min.y),j[1]=Math.max(xe.max.y,ze.max.y),j[2]=i.ab-ze.min.x>xe.max.x?ze.min.x-i.ab:xe.max.x,j),J=(xe,ze)=>(j[0]=Math.min(xe.min.x,ze.min.x),j[1]=Math.max(xe.max.x,ze.max.x),j[2]=i.ab-ze.min.y>xe.max.y?ze.min.y-i.ab:xe.max.y,j),re=[(xe,ze)=>W(xe,ze),(xe,ze)=>W(ze,xe),(xe,ze)=>J(xe,ze),(xe,ze)=>J(ze,xe)],de=(xe,ze,Qe,Ue,Xe,qe,ut)=>{if(!x)return 0;const it=[[qe?Qe:xe,qe?xe:Qe,0],[qe?Qe:ze,qe?ze:Qe,0]],ht=ut<0?i.ab+ut:ut,xt=[qe?ht:(xe+ze)/2,qe?(xe+ze)/2:ht,0];return Qe===0&&ut<0||Qe!==0&&ut>0?x.getForTilePoints(Xe,[xt],!0,Ue):it.push(xt),x.getForTilePoints(u,it,!0,k),Math.max(it[0][2],it[1][2],xt[2])/x.exaggeration()};for(let xe=0;xe<4;xe++){const ze=g.borderFeatureIndices[xe];if(ze.length===0)continue;const Qe=i.c$[xe](u),Ue=Q(Qe);if(!(Ue&&Ue instanceof i.d0)||g.borderDoneWithNeighborZ[xe]===Ue.canonical.z)continue;Ue.centroidVertexArray.length===0&&Ue.createCentroidsBuffer();const Xe=x?x.findDEMTileFor(Qe):null;if(!(Xe&&Xe.dem||B))continue;const qe=(xe<2?1:5)-xe,ut=Ue.borderDoneWithNeighborZ[qe]!==g.canonical.z,it=Ue.borderFeatureIndices[qe];let ht=0;if(g.canonical.z!==Ue.canonical.z){for(const xt of ze)g.showCentroid(g.featuresOnBorder[xt]);if(ut)for(const xt of it)Ue.showCentroid(Ue.featuresOnBorder[xt]);g.borderDoneWithNeighborZ[xe]=Ue.canonical.z,Ue.borderDoneWithNeighborZ[qe]=g.canonical.z}for(const xt of ze){const pt=g.featuresOnBorder[xt],At=g.centroidData[pt.centroidDataIndex],Rt=pt.borders[xe];let cn;for(;ht<it.length;){cn=Ue.featuresOnBorder[it[ht]];const wn=cn.borders[qe];if(wn[1]>Rt[0]+3||wn[0]>Rt[0]-3)break;Ue.showCentroid(cn),ht++}if(cn&&ht<it.length){const wn=ht;let ln=0;for(;!(cn.borders[qe][0]>Rt[1]-3)&&(ln++,++ht!==it.length);)cn=Ue.featuresOnBorder[it[ht]];cn=Ue.featuresOnBorder[it[wn]];let Ln=!1;if(ln>=1){const An=cn.borders[qe];Math.abs(Rt[0]-An[0])<3&&Math.abs(Rt[1]-An[1])<3&&(ln=1,Ln=!0,ht=wn+1)}else if(ln===0){g.showCentroid(pt);continue}const kt=Ue.centroidData[cn.centroidDataIndex];B&&Ln&&(((me=At).flags|(_e=kt).flags)&i.d1?(me.flags|=i.d1,_e.flags|=i.d1):(me.flags&=~i.d1,_e.flags&=~i.d1));const mn=pt.intersectsCount()>1||cn.intersectsCount()>1;if(ln>1)ht=wn,At.centroidXY=kt.centroidXY=new i.P(0,0);else if(Xe&&Xe.dem&&!mn){const An=re[xe](At,kt),Rn=xe%2?i.ab-1:0,Mn=de(An[0],Math.min(i.ab-1,An[1]),Rn,Xe,Qe,xe<2,An[2]);At.centroidXY=kt.centroidXY=z(Mn)}else mn?At.centroidXY=kt.centroidXY=new i.P(0,0):(At.centroidXY=g.encodeBorderCentroid(pt),kt.centroidXY=Ue.encodeBorderCentroid(cn));g.writeCentroidToBuffer(At),Ue.writeCentroidToBuffer(kt)}else g.showCentroid(pt)}g.borderDoneWithNeighborZ[xe]=Ue.canonical.z,Ue.borderDoneWithNeighborZ[qe]=g.canonical.z}var me,_e;(g.needsCentroidUpdate||!g.centroidVertexBuffer&&g.centroidVertexArray.length!==0)&&g.uploadCentroid(m)}const zo=[1,0,0],Bo=[0,1,0],vi=[0,0,1];function Es(m,a,u){const g=u.transform,v=u.shadowRenderer;if(!v)return!0;const x=m.toUnwrapped(),B=g.tileSize*v._cascades[u.currentShadowCascade].scale;let k=a.maxHeight;if(g.elevation){const me=g.elevation.getMinMaxForTile(m);me&&(k+=me.max)}const z=[...v.shadowDirection];z[2]=-z[2];const Q=v.computeSimplifiedTileShadowVolume(x,k,B,z);if(!Q)return!1;const j=[zo,Bo,vi,z,[z[0],0,z[2]],[0,z[1],z[2]]],W=g.projection.name==="globe",J=g.scaleZoom(B),re=i.bN.fromInvProjectionMatrix(g.invProjMatrix,g.worldSize,J,!W),de=v.getCurrentCascadeFrustum();return re.intersectsPrecise(Q.vertices,Q.planes,j)===0||de.intersectsPrecise(Q.vertices,Q.planes,j)===0}function za(m){return[m[0]*i.d4,m[1]*i.d4,m[2]*i.d4,0]}function io(m,a,u,g,v,x,B,k,z){const Q=g.getSource(),j=u.globeSharedBuffers;if(!j)return;let W,J,re;if(a&&(W=g.getTile(a)),Q instanceof i.aD?(J=Q.texture,re=i.cD(0,0,u.transform)):W&&a&&(J=W.texture,re=i.cD(a.canonical.z,a.canonical.x,u.transform)),!J||!re)return;m||(re=i.a6.mat4.scale(i.a6.mat4.create(),re,[1,-1,1]));const de=u.context,me=de.gl,_e=v.paint.get("raster-resampling")==="nearest"?me.NEAREST:me.LINEAR,xe=u.colorModeForDrapableLayerRenderPass(x),ze=B.defines;ze.push("GLOBE_POLES");const Qe=new Le(me.LEQUAL,Le.ReadWrite,u.depthRangeFor3D),Ue=Float32Array.from(u.transform.expandedFarZProjMatrix),Xe=Float32Array.from(i.b5(i.cC(new i.bP(0,0,0))));u.terrain&&u.terrain.prepareDrawTile(),de.activeTexture.set(me.TEXTURE0),J.bind(_e,me.CLAMP_TO_EDGE),de.activeTexture.set(me.TEXTURE1),J.bind(_e,me.CLAMP_TO_EDGE),J.useMipmap&&de.extTextureFilterAnisotropic&&u.transform.pitch>20&&me.texParameterf(me.TEXTURE_2D,de.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,de.extTextureFilterAnisotropicMax);const[qe,ut,it,ht]=a?j.getPoleBuffers(a.canonical.z,!1):j.getPoleBuffers(0,!0),xt=v.paint.get("raster-elevation");let pt;m?(pt=qe,u.renderDefaultNorthPole=xt!==0):(pt=ut,u.renderDefaultSouthPole=xt!==0);const At=za(B.mix),Rt=((wn,ln,Ln,kt,mn,An,Rn,Mn,bn,Cn,vr,Qn,rr)=>Mf(wn,ln,Ln,new Float32Array(16),new Float32Array(9),[0,0],kt,[0,0],[0,0,0,0],1,{opacity:1,mix:0},An,[0,0],Mn,2,Cn,vr,Qn,1,0,rr))(Ue,Xe,re,i.a9(u.transform.zoom),0,v,0,xt,0,At,B.offset,B.range,x),cn=u.getOrCreateProgram("raster",{defines:ze});u.uploadCommonUniforms(de,cn,null),cn.draw(u,me.TRIANGLES,Qe,z,xe,k,Rt,v.id,pt,it,ht)}function Oi(m){const a=m._nearZ,u=m.projection.farthestPixelDistance(m),g=u-a,v=.2*m.height,x=a+v;return[a,u,(x-v-a)/g,(x-a)/g]}function fo(m,a,u,g){if(m)return a instanceof _c&&m instanceof co?a.getTextureDescriptor(m,u,!0):{texture:m.texture,mix:za(g.mix),offset:g.offset,buffer:0,tileSize:1}}var Za=i.d5([{name:"a_index",type:"Int16",components:1}]);class dl{constructor(a,u,g,v){const x={width:g[0],height:g[1],data:null},B=a.gl;this.targetColorTexture=new i.T(a,x,B.RGBA8,{useMipmap:!1}),this.backgroundColorTexture=new i.T(a,x,B.RGBA8,{useMipmap:!1}),this.context=a,this.updateParticleTexture(u,v),this.lastInvalidatedAt=0}updateParticleTexture(a,u){if(this.particleTextureDimension===u.width)return;(this.particleTexture0||this.particleTexture1||this.particleIndexBuffer||this.particleSegment)&&(this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleIndexBuffer.destroy(),this.particleSegment.destroy());const g=this.context.gl,v=u.width*u.height;this.particleTexture0=new i.T(this.context,u,g.RGBA8,{premultiply:!1,useMipmap:!1}),this.particleTexture1=new i.T(this.context,u,g.RGBA8,{premultiply:!1,useMipmap:!1});const x=new i.d6;x.reserve(v);for(let B=0;B<v;B++)x.emplaceBack(B);this.particleIndexBuffer=this.context.createVertexBuffer(x,Za.members,!0),this.particleSegment=i.b1.simpleSegment(0,0,this.particleIndexBuffer.length,0),this.particleTextureDimension=u.width}update(a){return!(this.lastInvalidatedAt<a&&(this.lastInvalidatedAt=i.q.now(),1))}destroy(){this.targetColorTexture.destroy(),this.backgroundColorTexture.destroy(),this.particleIndexBuffer.destroy(),this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleSegment.destroy()}}function Js(m,a,u){if(!m)return null;const g=a.getTextureDescriptor(m,u,!0);if(!g)return null;let{texture:v,mix:x,offset:B,tileSize:k,buffer:z,format:Q}=g;if(!v||!Q)return null;let j=!1;return Q==="uint32"&&(j=!0,x[3]=0,x=Hh(i.d7,x,[0,u.paint.get("raster-particle-max-speed")]),B=VA(i.d7,B,[0,u.paint.get("raster-particle-max-speed")])),{texture:v,textureOffset:[z/(k+2*z),k/(k+2*z)],tileSize:k,scalarData:j,scale:x,offset:B,defines:["RASTER_ARRAY",{uint8:"DATA_FORMAT_UINT8",uint16:"DATA_FORMAT_UINT16",uint32:"DATA_FORMAT_UINT32"}[Q]]}}function da(m){const a=m._nearZ,u=m.projection.farthestPixelDistance(m),g=u-a,v=.2*m.height,x=a+v;return[a,u,(x-v-a)/g,(x-a)/g]}const Ya=new i.bz(1,0,0,1),ba=new i.bz(0,1,0,1),Ja=new i.bz(0,0,1,1),Tn=new i.bz(1,0,1,1),dr=new i.bz(0,1,1,1);function wa(m,a,u,g,v,x,B){const k=m.context,z=m.transform,Q=k.gl,j=z.projection.name==="globe",W=j?["PROJECTION_GLOBE_VIEW"]:[];let J=i.a6.mat4.clone(u.projMatrix);if(j&&i.a9(z.zoom)>0){const At=i.b4(u.canonical,z),Rt=i.d8(At);J=i.a6.mat4.multiply(new Float32Array(16),z.globeMatrix,Rt),i.a6.mat4.multiply(J,z.projMatrix,J)}const re=i.a6.mat4.create();re[12]+=2*v/(i.q.devicePixelRatio*z.width),re[13]+=2*x/(i.q.devicePixelRatio*z.height),i.a6.mat4.multiply(J,re,J);const de=m.getOrCreateProgram("debug",{defines:W}),me=a.getTileByID(u.key);m.terrain&&m.terrain.setupElevationDraw(me,de);const _e=Le.disabled,xe=Qt.disabled,ze=m.colorModeForRenderPass(),Qe="$debug";k.activeTexture.set(Q.TEXTURE0),m.emptyTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),j?me._makeGlobeTileDebugBuffers(m.context,z):me._makeDebugTileBoundsBuffers(m.context,z.projection);const Ue=me._tileDebugBuffer||m.debugBuffer,Xe=me._tileDebugIndexBuffer||m.debugIndexBuffer,qe=me._tileDebugSegments||m.debugSegments;if(de.draw(m,Q.LINE_STRIP,_e,xe,ze,ir.disabled,Kg(J,g),Qe,Ue,Xe,qe,null,null,null,[me._globeTileDebugBorderBuffer]),B){const At=me.latestRawTileData,Rt=Math.floor((At&&At.byteLength||0)/1024);let cn=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(cn+=` => ${u.overscaledZ}`),cn+=` ${me.state}`,cn+=` ${Rt}kb`,function(wn,ln){wn.initDebugOverlayCanvas();const Ln=wn.debugOverlayCanvas,kt=wn.context.gl,mn=wn.debugOverlayCanvas.getContext("2d");mn.clearRect(0,0,Ln.width,Ln.height),mn.shadowColor="white",mn.shadowBlur=2,mn.lineWidth=1.5,mn.strokeStyle="white",mn.textBaseline="top",mn.font="bold 36px Open Sans, sans-serif",mn.fillText(ln,5,5),mn.strokeText(ln,5,5),wn.debugOverlayTexture.update(Ln),wn.debugOverlayTexture.bind(kt.LINEAR,kt.CLAMP_TO_EDGE)}(m,cn)}const ut=a.getTile(u).tileSize,it=512/Math.min(ut,512)*(u.overscaledZ/z.zoom)*.5,ht=me._tileDebugTextBuffer||m.debugBuffer,xt=me._tileDebugTextIndexBuffer||m.quadTriangleIndexBuffer,pt=me._tileDebugTextSegments||m.debugSegments;de.draw(m,Q.TRIANGLES,_e,xe,fe.alphaBlended,ir.disabled,Kg(J,i.bz.transparent,it),Qe,ht,xt,pt,null,null,null,[me._globeTileDebugTextBuffer])}function Ji(m,a,u,g){es(m,0,a+u/2,m.transform.width,u,g)}function Nt(m,a,u,g){es(m,a-u/2,0,u,m.transform.height,g)}function es(m,a,u,g,v,x){const B=m.context,k=B.gl;k.enable(k.SCISSOR_TEST),k.scissor(a*i.q.devicePixelRatio,u*i.q.devicePixelRatio,g*i.q.devicePixelRatio,v*i.q.devicePixelRatio),B.clear({color:x}),k.disable(k.SCISSOR_TEST)}const Fd=i.d5([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:HA}=Fd;function Yl(m,a,u,g){m.emplaceBack(a,u,g)}class Rd{constructor(a){this.vertexArray=new i.d9,this.indices=new i.aO,Yl(this.vertexArray,-1,-1,1),Yl(this.vertexArray,1,-1,1),Yl(this.vertexArray,-1,1,1),Yl(this.vertexArray,1,1,1),Yl(this.vertexArray,-1,-1,-1),Yl(this.vertexArray,1,-1,-1),Yl(this.vertexArray,-1,1,-1),Yl(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=a.createVertexBuffer(this.vertexArray,HA),this.indexBuffer=a.createIndexBuffer(this.indices),this.segment=i.b1.simpleSegment(0,0,36,12)}}function Tc(m,a,u,g,v,x){const B=m.context.gl,k=a.paint.get("sky-atmosphere-color"),z=a.paint.get("sky-atmosphere-halo-color"),Q=a.paint.get("sky-atmosphere-sun-intensity"),j=((W,J,re,de,me)=>({u_matrix_3f:W,u_sun_direction:J,u_sun_intensity:re,u_color_tint_r:[de.r,de.g,de.b,de.a],u_color_tint_m:[me.r,me.g,me.b,me.a],u_luminance:5e-5}))(i.a6.mat3.fromMat4(i.a6.mat3.create(),g),v,Q,k,z);B.framebufferTexture2D(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,B.TEXTURE_CUBE_MAP_POSITIVE_X+x,a.skyboxTexture,0),u.draw(m,B.TRIANGLES,Le.disabled,Qt.disabled,fe.unblended,ir.frontCW,j,"skyboxCapture",a.skyboxGeometry.vertexBuffer,a.skyboxGeometry.indexBuffer,a.skyboxGeometry.segment)}const Iu=i.d5([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Ic{constructor(a){const u=new i.da;u.emplaceBack(-1,1,1,0,0),u.emplaceBack(1,1,1,1,0),u.emplaceBack(1,-1,1,1,1),u.emplaceBack(-1,-1,1,0,1);const g=new i.aO;g.emplaceBack(0,1,2),g.emplaceBack(2,3,0),this.vertexBuffer=a.createVertexBuffer(u,Iu.members),this.indexBuffer=a.createIndexBuffer(g),this.segments=i.b1.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const kd=i.d5([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class jh{constructor(){this.starsCount=16e3,this.sizeMultiplier=.15,this.sizeRange=100,this.intensityRange=200}}class Of{constructor(a){this.colorModeAlphaBlendedWriteRGB=new fe([1,ae,1,ae],i.bz.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new fe([1,0,1,0],i.bz.transparent,[!1,!1,!1,!0]),this.params=new jh,this.updateNeeded=!0,a.tp.registerParameter(this.params,["Stars"],"starsCount",{min:100,max:16e3,step:1},()=>{this.updateNeeded=!0}),a.tp.registerParameter(this.params,["Stars"],"sizeMultiplier",{min:.01,max:2,step:.01}),a.tp.registerParameter(this.params,["Stars"],"sizeRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0}),a.tp.registerParameter(this.params,["Stars"],"intensityRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0})}update(a){const u=a.context;if(!this.atmosphereBuffer||this.updateNeeded){this.updateNeeded=!1,this.atmosphereBuffer=new Ic(u);const g=this.params.sizeRange,v=this.params.intensityRange,x=function(j){const W=i.dd(30),J=[];for(let re=0;re<j;++re){const de=2*Math.PI*W(),me=Math.acos(1-2*W())-.5*Math.PI;J.push(i.a6.vec3.fromValues(Math.cos(me)*Math.cos(de),Math.cos(me)*Math.sin(de),Math.sin(me)))}return J}(this.params.starsCount),B=i.dd(300),k=new i.db,z=new i.aO;let Q=0;for(let j=0;j<x.length;++j){const W=i.a6.vec3.scale([],x[j],200),J=Math.max(0,1+.01*g*(1*B()-.5)),re=Math.max(0,1+.01*v*(1*B()-.5));k.emplaceBack(W[0],W[1],W[2],-1,-1,J,re),k.emplaceBack(W[0],W[1],W[2],1,-1,J,re),k.emplaceBack(W[0],W[1],W[2],1,1,J,re),k.emplaceBack(W[0],W[1],W[2],-1,1,J,re),z.emplaceBack(Q+0,Q+1,Q+2),z.emplaceBack(Q+0,Q+2,Q+3),Q+=4}this.starsVx=u.createVertexBuffer(k,kd.members),this.starsIdx=u.createIndexBuffer(z),this.starsSegments=i.b1.simpleSegment(0,0,k.length,z.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(a,u){const g=a.context,v=g.gl,x=a.transform,B=new Le(v.LEQUAL,Le.ReadOnly,[0,1]),k=i.a9(x.zoom),z=a.style.getLut(u.scope),Q=u.properties.get("color").toRenderColor(z).toArray01(),j=u.properties.get("high-color").toRenderColor(z).toArray01(),W=u.properties.get("space-color").toRenderColor(z).toArray01PremultipliedAlpha(),J=5e-4,re=i.dc(u.properties.get("horizon-blend"),0,1,J,.25),de=i.cx(a,g,x)&&re===J?x.worldSize/(2*Math.PI*1.025)-1:x.globeRadius,me=a.frameCounter/1e3%1,_e=i.a6.vec3.length(x.globeCenterInViewSpace),xe=Math.sqrt(Math.pow(_e,2)-Math.pow(de,2)),ze=Math.acos(xe/_e),Qe=Ue=>{const Xe=x.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];Ue&&Xe.push("ALPHA_PASS");const qe=a.getOrCreateProgram("globeAtmosphere",{defines:Xe}),ut=((ht,xt,pt,At,Rt,cn,wn,ln,Ln,kt,mn,An)=>({u_frustum_tl:ht,u_frustum_tr:xt,u_frustum_br:pt,u_frustum_bl:At,u_horizon:Rt,u_transition:cn,u_fadeout_range:wn,u_color:ln,u_high_color:Ln,u_space_color:kt,u_temporal_offset:mn,u_horizon_angle:An}))(x.frustumCorners.TL,x.frustumCorners.TR,x.frustumCorners.BR,x.frustumCorners.BL,x.frustumCorners.horizon,k,re,Q,j,W,me,ze);a.uploadCommonUniforms(g,qe);const it=this.atmosphereBuffer;it&&qe.draw(a,v.TRIANGLES,B,Qt.disabled,Ue?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,ir.backCW,ut,Ue?"atmosphere_glow_alpha":"atmosphere_glow",it.vertexBuffer,it.indexBuffer,it.segments)};Qe(!1),Qe(!0)}drawStars(a,u){const g=i.ap(u.properties.get("star-intensity"),0,1);if(g===0)return;const v=a.context,x=v.gl,B=a.transform,k=a.getOrCreateProgram("stars"),z=i.a6.quat.identity([]);i.a6.quat.rotateX(z,z,-B._pitch),i.a6.quat.rotateZ(z,z,-B.angle),i.a6.quat.rotateX(z,z,i.bB(B._center.lat)),i.a6.quat.rotateY(z,z,-i.bB(B._center.lng));const Q=i.a6.mat4.fromQuat(new Float32Array(16),z),j=i.a6.mat4.multiply([],B.starsProjMatrix,Q),W=i.a6.mat3.fromMat4([],Q),J=i.a6.mat3.invert([],W),re=[0,1,0];i.a6.vec3.transformMat3(re,re,J),i.a6.vec3.scale(re,re,this.params.sizeMultiplier);const de=[1,0,0];i.a6.vec3.transformMat3(de,de,J),i.a6.vec3.scale(de,de,this.params.sizeMultiplier);const me=(_e=re,xe=de,ze=g,{u_matrix:Float32Array.from(j),u_up:_e,u_right:xe,u_intensity_multiplier:ze});var _e,xe,ze;a.uploadCommonUniforms(v,k),this.starsVx&&this.starsIdx&&k.draw(a,x.TRIANGLES,Le.disabled,Qt.disabled,this.colorModeAlphaBlendedWriteRGB,ir.disabled,me,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}function $h(m,a){const u=[...m],g=a.cameraWorldSizeForFog/a.worldSize,v=i.a6.mat4.identity([]);return i.a6.mat4.scale(v,v,[g,g,1]),i.a6.mat4.multiply(u,v,u),i.a6.mat4.multiply(u,a.worldToFogMatrix,u),u}function Df(m,a,u,g,v){const x=u.material,B=g.context,{baseColorTexture:k,metallicRoughnessTexture:z}=x.pbrMetallicRoughness,{normalTexture:Q,occlusionTexture:j,emissionTexture:W}=x;function J(re,de,me){if(re&&(m.push(de),B.activeTexture.set(B.gl.TEXTURE0+me),re.gfxTexture)){const{minFilter:_e,magFilter:xe,wrapS:ze,wrapT:Qe}=re.sampler;re.gfxTexture.bindExtraParam(_e,xe,ze,Qe)}}J(k,"HAS_TEXTURE_u_baseColorTexture",Jo.BaseColor),J(z,"HAS_TEXTURE_u_metallicRoughnessTexture",Jo.MetallicRoughness),J(Q,"HAS_TEXTURE_u_normalTexture",Jo.Normal),J(j,"HAS_TEXTURE_u_occlusionTexture",Jo.Occlusion),J(W,"HAS_TEXTURE_u_emissionTexture",Jo.Emission),v&&(v.texture||(v.texture=new i.df(g.context,v.image,[v.image.height,v.image.height,v.image.height],B.gl.RGBA8)),B.activeTexture.set(B.gl.TEXTURE0+Jo.LUT),v.texture&&v.texture.bind(B.gl.LINEAR,B.gl.CLAMP_TO_EDGE),m.push("APPLY_LUT_ON_GPU")),u.texcoordBuffer&&(m.push("HAS_ATTRIBUTE_a_uv_2f"),a.push(u.texcoordBuffer)),u.colorBuffer&&(m.push(u.colorBuffer.itemSize===12?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),a.push(u.colorBuffer)),u.normalBuffer&&(m.push("HAS_ATTRIBUTE_a_normal_3f"),a.push(u.normalBuffer)),u.pbrBuffer&&(m.push("HAS_ATTRIBUTE_a_pbr"),m.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),a.push(u.pbrBuffer)),x.alphaMode!=="OPAQUE"&&x.alphaMode!=="MASK"||m.push("UNPREMULT_TEXTURE_IN_SHADER"),x.defined||m.push("DIFFUSE_SHADED"),m.push("USE_STANDARD_DERIVATIVES")}function lh(m,a,u,g,v,x){const B=u.paint.get("model-opacity"),k=a.context,z=new Le(a.context.gl.LEQUAL,Le.ReadWrite,a.depthRangeFor3D),Q=a.transform,j=m.mesh,W=j.material,J=W.pbrMetallicRoughness,re=a.style.fog;let de;de=a.transform.projection.zAxisUnit==="pixels"?[...m.nodeModelMatrix]:i.a6.mat4.multiply([],g.zScaleMatrix,m.nodeModelMatrix),i.a6.mat4.multiply(de,g.negCameraPosMatrix,de);const me=i.a6.mat4.invert([],de);i.a6.mat4.transpose(me,me);const _e=u.paint.get("model-emissive-strength").constantOr(0),xe=He(new Float32Array(m.worldViewProjection),new Float32Array(de),new Float32Array(me),null,a,B,J.baseColorFactor.toRenderColor(null),W.emissiveFactor,J.metallicFactor,J.roughnessFactor,W,_e,u),ze={defines:[]},Qe=[];Df(ze.defines,Qe,j,a,u.lut);const Ue=a.shadowRenderer;Ue&&(Ue.useNormalOffset=!1);let Xe=null;if(re){const it=$h(m.nodeModelMatrix,a.transform);if(Xe=new Float32Array(it),Q.projection.name!=="globe"){const ht=j.aabb.min,xt=j.aabb.max,[pt,At]=re.getOpacityForBounds(it,ht[0],ht[1],xt[0],xt[1]);ze.overrideFog=pt>=zn||At>=zn}}const qe=rs(a,u.paint.get("model-cutoff-fade-range"));qe.shouldRenderCutoff&&ze.defines.push("RENDER_CUTOFF");const ut=a.getOrCreateProgram("model",ze);a.uploadCommonUniforms(k,ut,null,Xe,qe),a.renderPass!=="shadow"&&Ue&&Ue.setupShadowsFromMatrix(m.nodeModelMatrix,ut),ut.draw(a,k.gl.TRIANGLES,z,v,x,j.material.doubleSided?ir.disabled:ir.backCCW,xe,u.id,j.vertexBuffer,j.indexBuffer,j.segments,u.paint,a.transform.zoom,void 0,Qe)}function Gh(m,a,u,g,v,x,B){let k;k=m.projection.name==="globe"?i.dg(u,m):[...u],i.a6.mat4.multiply(k,k,a.matrix);const z=i.a6.mat4.multiply([],g,k);if(a.meshes)for(const Q of a.meshes){if(Q.material.alphaMode!=="BLEND"){B.push({mesh:Q,depth:0,modelIndex:v,worldViewProjection:z,nodeModelMatrix:k});continue}const j=i.a6.vec3.transformMat4([],Q.centroid,z);j[2]>0&&x.push({mesh:Q,depth:j[2],modelIndex:v,worldViewProjection:z,nodeModelMatrix:k})}if(a.children)for(const Q of a.children)Gh(m,Q,u,g,v,x,B)}function Pu(m,a,u,g){const v=u.shadowRenderer;if(!v)return;const x=v.getShadowPassDepthMode(),B=v.getShadowPassColorMode(),k=v.calculateShadowPassMatrixFromMatrix(a),z=Kt(k);u.getOrCreateProgram("modelDepth",{defines:u._shadowMapDebug?[]:["DEPTH_TEXTURE"]}).draw(u,u.context.gl.TRIANGLES,x,Qt.disabled,B,ir.backCCW,z,g.id,m.vertexBuffer,m.indexBuffer,m.segments,g.paint,u.transform.zoom,void 0,void 0)}function Md(m,a,u){const g=a.updateZoomBasedPaintProperties(),v=function(x,B,k){let z,Q,j,W=x.terrain?x.terrain.exaggeration():0;if(x.terrain&&W>0){const J=x.terrain,re=J.findDEMTileFor(k);re&&re.dem?z=i.di.create(J,k,re):W=0}if(W===0&&(B.terrainElevationMin=0,B.terrainElevationMax=0),W===B.validForExaggeration&&(W===0||z&&z._demTile&&z._demTile.tileID===B.validForDEMTile.id&&z._dem._timestamp===B.validForDEMTile.timestamp))return!1;for(const J in B.instancesPerModel){const re=B.instancesPerModel[J];for(let de=0;de<re.instancedDataArray.length;++de){const me=(z?W*z.getElevationAt(0|re.instancedDataArray.float32[16*de],0|re.instancedDataArray.float32[16*de+1],!0,!0):0)+re.instancesEvaluatedElevation[de];re.instancedDataArray.float32[16*de+6]=me,Q=Q?Math.min(B.terrainElevationMin,me):me,j=j?Math.max(B.terrainElevationMax,me):me}}return B.terrainElevationMin=Q||0,B.terrainElevationMax=j||0,B.validForExaggeration=W,B.validForDEMTile=z&&z._demTile?{id:z._demTile.tileID,timestamp:z._dem._timestamp}:{id:void 0,timestamp:0},!0}(m,a,u);(g||v)&&(a.uploaded=!1,a.upload(m.context))}const Pc={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new i.c9([0,0,0],[i.ab,i.ab,0])};function a0(m,a){const u=1<<m.canonical.z,g=a.getFreeCameraOptions().position,v=a.elevation,x=m.canonical.x/u,B=(m.canonical.x+1)/u,k=m.canonical.y/u,z=(m.canonical.y+1)/u;let Q=a._centerAltitude;if(v){const re=v.getMinMaxForTile(m);re&&re.max>Q&&(Q=re.max)}const j=i.ap(g.x,x,B)-g.x,W=i.ap(g.y,k,z)-g.y,J=i.bD(Q,a.center.lat)-g.z;return a._zoomFromMercatorZ(Math.sqrt(j*j+W*W+J*J))}function fa(m,a,u,g,v,x,B){const k=m.context,z=m.renderPass==="shadow",Q=m.shadowRenderer,j=z&&Q?Q.getShadowPassDepthMode():new Le(k.gl.LEQUAL,Le.ReadWrite,m.depthRangeFor3D),W=m.isTileAffectedByFog(x);if(u.meshes)for(const J of u.meshes){const re=["MODEL_POSITION_ON_GPU"],de=[];let me,_e,xe;g.instancedDataArray.length>20&&re.push("INSTANCED_ARRAYS");const ze=rs(m,a.paint.get("model-cutoff-fade-range"));if(ze.shouldRenderCutoff&&re.push("RENDER_CUTOFF"),z&&Q)me=m.getOrCreateProgram("modelDepth",{defines:re}),_e=Kt(B.shadowTileMatrix,B.shadowTileMatrix,Float32Array.from(u.matrix)),xe=Q.getShadowPassColorMode();else{Df(re,de,J,m,a.lut),me=m.getOrCreateProgram("model",{defines:re,overrideFog:W});const Ue=J.material,Xe=Ue.pbrMetallicRoughness,qe=a.paint.get("model-opacity"),ut=a.paint.get("model-emissive-strength").constantOr(0);_e=He(x.expandedProjMatrix,Float32Array.from(u.matrix),new Float32Array(16),null,m,qe,Xe.baseColorFactor.toRenderColor(null),Ue.emissiveFactor,Xe.metallicFactor,Xe.roughnessFactor,Ue,ut,a,v),Q&&(B.shadowUniformsInitialized?me.setShadowUniformValues(k,Q.getShadowUniformValues()):(Q.setupShadows(x.toUnwrapped(),me,"model-tile",x.overscaledZ),B.shadowUniformsInitialized=!0)),xe=ze.shouldRenderCutoff||qe<1||Ue.alphaMode!=="OPAQUE"?fe.alphaBlended:fe.unblended}m.uploadCommonUniforms(k,me,x.toUnwrapped(),null,ze);const Qe=J.material.doubleSided?ir.disabled:ir.backCCW;if(g.instancedDataArray.length>20)de.push(g.instancedDataBuffer),me.draw(m,k.gl.TRIANGLES,j,Qt.disabled,xe,Qe,_e,a.id,J.vertexBuffer,J.indexBuffer,J.segments,a.paint,m.transform.zoom,void 0,de,g.instancedDataArray.length);else{const Ue=z?"u_instance":"u_normal_matrix";for(let Xe=0;Xe<g.instancedDataArray.length;++Xe)_e[Ue]=new Float32Array(g.instancedDataArray.arrayBuffer,64*Xe,16),me.draw(m,k.gl.TRIANGLES,j,Qt.disabled,xe,Qe,_e,a.id,J.vertexBuffer,J.indexBuffer,J.segments,a.paint,m.transform.zoom,void 0,de)}}if(u.children)for(const J of u.children)fa(m,a,J,g,v,x,B)}const ch=[1,-1,1];function Uf(m,a,u,g){if(!u.modelManager)return!0;const v=u.modelManager;if(!u.shadowRenderer)return!0;const x=u.shadowRenderer,B=a.aabb;let k=!0,z=m.maxHeight;if(z===0){let j=0;for(const W in m.instancesPerModel){const J=v.getModel(W,g);J?j=Math.max(j,Math.max(Math.max(J.aabb.max[0],J.aabb.max[1]),J.aabb.max[2])):k=!1}z=m.maxScale*j*1.41+m.maxVerticalOffset,k&&(m.maxHeight=z)}B.max[2]=z,B.min[2]+=m.terrainElevationMin,B.max[2]+=m.terrainElevationMax,i.a6.vec3.transformMat4(B.min,B.min,a.tileMatrix),i.a6.vec3.transformMat4(B.max,B.max,a.tileMatrix);const Q=B.intersects(x.getCurrentCascadeFrustum());return u.currentShadowCascade===0&&(m.isInsideFirstShadowMapFrustum=Q===2),Q===0}function _o(m,a){const u=m.uniformValues.u_cutoff_params[0],g=m.uniformValues.u_cutoff_params[1],v=m.uniformValues.u_cutoff_params[2],x=m.uniformValues.u_cutoff_params[3];return g===u||x===v?1:i.ap(((a-u)/(g-u)-v)/(x-v),0,1)}function Bi(m,a,u,g){if(a.pitch<20)return 1;const v=a.getWorldToCameraMatrix();i.a6.mat4.multiply(v,v,m);const x=i.a6.vec4.fromValues(u.min[0],u.min[1],u.min[2],1);let B=i.a6.vec4.transformMat4(i.a6.vec4.create(),x,v),k=B,z=B;x[1]=u.max[1],B=i.a6.vec4.transformMat4(i.a6.vec4.create(),x,v),k=B[1]<k[1]?B:k,z=B[1]>z[1]?B:z,x[0]=u.max[0],B=i.a6.vec4.transformMat4(i.a6.vec4.create(),x,v),k=B[1]<k[1]?B:k,z=B[1]>z[1]?B:z,x[1]=u.min[1],B=i.a6.vec4.transformMat4(i.a6.vec4.create(),x,v),k=B[1]<k[1]?B:k,z=B[1]>z[1]?B:z;const Q=i.ap(g[0],0,1),j=100*a.pixelsPerMeter*i.ap(g[1],0,1),W=i.ap(g[2],0,1),J=i.a6.vec4.lerp(i.a6.vec4.create(),k,z,Q),re=Math.tan(.5*a.fovX),de=-J[2]*re;if(j===0)return J[1]<-Math.abs(de)?W:1;const me=(-Math.abs(de)-J[1])/j,_e=(ze,Qe,Ue)=>(1-Ue)*ze+Ue*Qe,xe=i.ap(_e(1,W,me),W,1);return _e(1,xe,i.ap((a.pitch-20)/20,0,1))}class Cm{}class Lc{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(a,u,g){{const W=this._storage.get(u.id);if(W)return W.lastUsedFrameIdx=a,W.buf}const v=g.gl,x=v.getBufferParameter(v.ELEMENT_ARRAY_BUFFER,v.BUFFER_SIZE),B=new ArrayBuffer(x),k=new Int16Array(B);v.getBufferSubData(v.ELEMENT_ARRAY_BUFFER,0,new Int16Array(B));const z=new i.dk;for(let W=0;W<x/2;W+=3){const J=k[W],re=k[W+1],de=k[W+2];z.emplaceBack(J,re),z.emplaceBack(re,de),z.emplaceBack(de,J)}const Q=g.bindVertexArrayOES.current,j=new Cm;return j.buf=new pn(g,z),j.lastUsedFrameIdx=a,this._storage.set(u.id,j),g.bindVertexArrayOES.set(Q),j.buf}update(a){for(const[u,g]of this._storage)a-g.lastUsedFrameIdx>30&&(g.buf.destroy(),this._storage.delete(u))}destroy(){for(const[a,u]of this._storage)u.buf.destroy(),this._storage.delete(a)}}class Nf{constructor(a){this.occluderSize=30,this.depthOffset=-1e-4,a.registerParameter(this,["Occlusion"],"occluderSize",{min:1,max:100,step:1}),a.registerParameter(this,["Occlusion"],"depthOffset",{min:-.05,max:0,step:1e-5})}}const Lu={symbol:function(m,a,u,g,v){if(m.renderPass!=="translucent")return;const x=Qt.disabled,B=m.colorModeForRenderPass();u.layout.get("text-variable-anchor")&&function(Q,j,W,J,re,de,me){const _e=j.transform,xe=re==="map",ze=de==="map";for(const Qe of Q){const Ue=J.getTile(Qe),Xe=Ue.getBucket(W);if(!Xe||!Xe.text||!Xe.text.segments.get().length)continue;const qe=i.bj(Xe.textSizeData,_e.zoom),ut=$a(Qe,Xe.getProjection(),_e),it=_e.calculatePixelsToTileUnitsMatrix(Ue),ht=ti(ut,Ue.tileID.canonical,ze,xe,_e,Xe.getProjection(),it),xt=Xe.hasIconTextFit()&&Xe.hasIconData();if(qe){const pt=Math.pow(2,_e.zoom-Ue.tileID.overscaledZ);Cr(Xe,xe,ze,me,i.cS,_e,ht,Qe,pt,qe,xt)}}}(g,m,u,a,u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),v);const k=u.paint.get("icon-opacity").constantOr(1)!==0,z=u.paint.get("text-opacity").constantOr(1)!==0;u.layout.get("symbol-sort-key").constantOr(1)!==void 0&&(k||z)?Kr(m,a,u,g,x,B):(k&&Kr(m,a,u,g,x,B,{onlyIcons:!0}),z&&Kr(m,a,u,g,x,B,{onlyText:!0})),a.map.showCollisionBoxes&&(Gn(m,a,u,g,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),!0),Gn(m,a,u,g,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),!1))},circle:function(m,a,u,g){if(m.renderPass!=="translucent")return;const v=u.paint.get("circle-opacity"),x=u.paint.get("circle-stroke-width"),B=u.paint.get("circle-stroke-opacity"),k=u.layout.get("circle-sort-key").constantOr(1)!==void 0,z=u.paint.get("circle-emissive-strength");if(v.constantOr(1)===0&&(x.constantOr(1)===0||B.constantOr(1)===0))return;const Q=m.context,j=Q.gl,W=m.transform,J=m.depthModeForSublayer(0,Le.ReadOnly),re=Qt.disabled,de=m.colorModeForDrapableLayerRenderPass(z),me=W.projection.name==="globe",_e=[i.am(W.center.lng),i.at(W.center.lat)],xe=[];for(let Qe=0;Qe<g.length;Qe++){const Ue=g[Qe],Xe=a.getTile(Ue),qe=Xe.getBucket(u);if(!qe||qe.projection.name!==W.projection.name)continue;const ut=qe.programConfigurations.get(u.id),it=i.cT(u),ht=m.isTileAffectedByFog(Ue);me&&it.push("PROJECTION_GLOBE_VIEW"),it.push("DEPTH_D24"),m.terrain&&W.depthOcclusionForSymbolsAndCircles&&it.push("DEPTH_OCCLUSION");const xt=m.getOrCreateProgram("circle",{config:ut,defines:it,overrideFog:ht}),pt=qe.layoutVertexBuffer,At=qe.globeExtVertexBuffer,Rt=qe.indexBuffer,cn=W.projection.createInversionMatrix(W,Ue.canonical),wn={programConfiguration:ut,program:xt,layoutVertexBuffer:pt,globeExtVertexBuffer:At,indexBuffer:Rt,uniformValues:i.cU(m,Ue,Xe,cn,_e,u),tile:Xe};if(k){const ln=qe.segments.get();for(const Ln of ln)xe.push({segments:new i.b1([Ln]),sortKey:Ln.sortKey,state:wn})}else xe.push({segments:qe.segments,sortKey:0,state:wn})}k&&xe.sort((Qe,Ue)=>Qe.sortKey-Ue.sortKey);const ze={useDepthForOcclusion:W.depthOcclusionForSymbolsAndCircles};for(const Qe of xe){const{programConfiguration:Ue,program:Xe,layoutVertexBuffer:qe,globeExtVertexBuffer:ut,indexBuffer:it,uniformValues:ht,tile:xt}=Qe.state,pt=Qe.segments;m.terrain&&m.terrain.setupElevationDraw(xt,Xe,ze),m.uploadCommonUniforms(Q,Xe,xt.tileID.toUnwrapped()),Xe.draw(m,j.TRIANGLES,J,re,de,ir.disabled,ht,u.id,qe,it,pt,u.paint,W.zoom,Ue,[ut])}},heatmap:function(m,a,u,g){if(u.paint.get("heatmap-opacity")!==0)if(m.renderPass==="offscreen"){const v=m.context,x=v.gl,B=Qt.disabled,k=new fe([x.ONE,x.ONE,x.ONE,x.ONE],i.bz.transparent,[!0,!0,!0,!0]);(function(re,de,me,_e){const xe=re.gl,ze=de.width*_e,Qe=de.height*_e;re.activeTexture.set(xe.TEXTURE1),re.viewport.set([0,0,ze,Qe]);let Ue=me.heatmapFbo;if(!Ue||Ue&&(Ue.width!==ze||Ue.height!==Qe)){Ue&&Ue.destroy();const Xe=xe.createTexture();xe.bindTexture(xe.TEXTURE_2D,Xe),xe.texParameteri(xe.TEXTURE_2D,xe.TEXTURE_WRAP_S,xe.CLAMP_TO_EDGE),xe.texParameteri(xe.TEXTURE_2D,xe.TEXTURE_WRAP_T,xe.CLAMP_TO_EDGE),xe.texParameteri(xe.TEXTURE_2D,xe.TEXTURE_MIN_FILTER,xe.LINEAR),xe.texParameteri(xe.TEXTURE_2D,xe.TEXTURE_MAG_FILTER,xe.LINEAR),Ue=me.heatmapFbo=re.createFramebuffer(ze,Qe,!0,null),function(qe,ut,it,ht,xt,pt){const At=qe.gl;At.texImage2D(At.TEXTURE_2D,0,qe.extRenderToTextureHalfFloat?At.RGBA16F:At.RGBA,xt,pt,0,At.RGBA,qe.extRenderToTextureHalfFloat?At.HALF_FLOAT:At.UNSIGNED_BYTE,null),ht.colorAttachment.set(it)}(re,0,Xe,Ue,ze,Qe)}else xe.bindTexture(xe.TEXTURE_2D,Ue.colorAttachment.get()),re.bindFramebuffer.set(Ue.framebuffer)})(v,m,u,m.transform.projection.name==="globe"?.5:.25),v.clear({color:i.bz.transparent});const z=m.transform,Q=z.projection.name==="globe",j=Q?["PROJECTION_GLOBE_VIEW"]:[],W=Q?ir.frontCCW:ir.disabled,J=[i.am(z.center.lng),i.at(z.center.lat)];for(let re=0;re<g.length;re++){const de=g[re];if(a.hasRenderableParent(de))continue;const me=a.getTile(de),_e=me.getBucket(u);if(!_e||_e.projection.name!==z.projection.name)continue;const xe=m.isTileAffectedByFog(de),ze=_e.programConfigurations.get(u.id),Qe=m.getOrCreateProgram("heatmap",{config:ze,defines:j,overrideFog:xe}),{zoom:Ue}=m.transform;m.terrain&&m.terrain.setupElevationDraw(me,Qe),m.uploadCommonUniforms(v,Qe,de.toUnwrapped());const Xe=z.projection.createInversionMatrix(z,de.canonical);Qe.draw(m,x.TRIANGLES,Le.disabled,B,k,W,Wg(m,de,me,Xe,J,Ue,u.paint.get("heatmap-intensity")),u.id,_e.layoutVertexBuffer,_e.indexBuffer,_e.segments,u.paint,m.transform.zoom,ze,Q?[_e.globeExtVertexBuffer]:null)}v.viewport.set([0,0,m.width,m.height])}else m.renderPass==="translucent"&&(m.context.setColorMode(m.colorModeForRenderPass()),function(v,x){const B=v.context,k=B.gl,z=x.heatmapFbo;if(!z)return;B.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,z.colorAttachment.get()),B.activeTexture.set(k.TEXTURE1);let Q=x.colorRampTexture;Q||(Q=x.colorRampTexture=new i.T(B,x.colorRamp,k.RGBA8)),Q.bind(k.LINEAR,k.CLAMP_TO_EDGE),v.getOrCreateProgram("heatmapTexture").draw(v,k.TRIANGLES,Le.disabled,Qt.disabled,v.colorModeForRenderPass(),ir.disabled,((j,W,J,re)=>({u_image:0,u_color_ramp:1,u_opacity:W.paint.get("heatmap-opacity")}))(0,x),x.id,v.viewportBuffer,v.quadTriangleIndexBuffer,v.viewportSegments,x.paint,v.transform.zoom)}(m,u))},line:function(m,a,u,g){if(m.renderPass!=="translucent")return;const v=u.paint.get("line-opacity"),x=u.paint.get("line-width");if(v.constantOr(1)===0||x.constantOr(1)===0)return;const B=u.paint.get("line-emissive-strength"),k=u.paint.get("line-occlusion-opacity"),z=m.context,Q=z.gl,j=u.layout.get("line-z-offset"),W=!j.isConstant()||!!j.constantOr(0),J=W?new Le(m.depthOcclusion?Q.GREATER:Q.LEQUAL,Le.ReadOnly,m.depthRangeFor3D):m.depthModeForSublayer(0,Le.ReadOnly),re=m.colorModeForDrapableLayerRenderPass(B),de=m.terrain&&m.terrain.renderingToTexture,me=de?1:i.q.devicePixelRatio,_e=u.paint.get("line-dasharray"),xe=_e.constantOr(1),ze=u.layout.get("line-cap"),Qe=_e.constantOr(null),Ue=ze.constantOr(null),Xe=u.paint.get("line-pattern"),qe=Xe.constantOr(1),ut=Xe.constantOr(null),it=u.paint.get("line-opacity").constantOr(1);let ht=!qe&&it!==1||m.depthOcclusion&&k>0&&k<1;const xt=u.paint.get("line-gradient"),pt=qe?"linePattern":"line",At=i.cV(u);let Rt;if(de&&m.terrain&&m.terrain.clipOrMaskOverlapStencilType()&&(ht=!1),k!==0&&m.depthOcclusion){const wn=u.paint._values["line-opacity"];wn&&wn.value&&wn.value.kind==="constant"?Rt=wn.value:i.w(`Occlusion opacity for layer ${u.id} is supported only when line-opacity isn't data-driven.`)}if(W&&(m.forceTerrainMode=!0),!W&&k!==0&&m.terrain&&!de)return void i.w(`Occlusion opacity for layer ${u.id} is supported on terrain only if the layer has non-zero line-z-offset.`);const cn=ht&&W?m.stencilModeFor3D():Qt.disabled;for(const wn of g){const ln=a.getTile(wn);if(qe&&!ln.patternsLoaded())continue;const Ln=ln.getBucket(u);if(!Ln)continue;m.prepareDrawTile();const kt=Ln.programConfigurations.get(u.id),mn=m.isTileAffectedByFog(wn),An=m.getOrCreateProgram(pt,{config:kt,defines:W?[...At,"ELEVATED"]:At,overrideFog:mn});if(ut&&ln.imageAtlas){const Qn=ln.imageAtlas.patternPositions[ut.toString()];Qn&&kt.setConstantPatternPositions(Qn)}if(!qe&&Qe&&Ue&&ln.lineAtlas){const Qn=ln.lineAtlas.getDash(Qe,Ue);Qn&&kt.setConstantPatternPositions(Qn)}let[Rn,Mn]=u.paint.get("line-trim-offset");(Ue==="round"||Ue==="square")&&Rn!==Mn&&(Rn===0&&(Rn-=1),Mn===1&&(Mn+=1));const bn=de?wn.projMatrix:null,Cn=qe?i.cW(m,ln,u,bn,me,[Rn,Mn]):i.cX(m,ln,u,bn,Ln.lineClipsArray.length,me,[Rn,Mn]);if(xt){const Qn=Ln.gradients[u.id];let rr=Qn.texture;if(u.gradientVersion!==Qn.version){let Rr=256;if(u.stepInterpolant){const fr=a.getSource().maxzoom,Sr=wn.canonical.z===fr?Math.ceil(1<<m.transform.maxZoom-wn.canonical.z):1;Rr=i.ap(i.cY(Ln.maxLineLength/i.ab*1024*Sr),256,z.maxTextureSize)}Qn.gradient=i.cZ({expression:u.gradientExpression(),evaluationKey:"lineProgress",resolution:Rr,image:Qn.gradient||void 0,clips:Ln.lineClipsArray}),Qn.texture?Qn.texture.update(Qn.gradient):Qn.texture=new i.T(z,Qn.gradient,Q.RGBA8),Qn.version=u.gradientVersion,rr=Qn.texture}z.activeTexture.set(Q.TEXTURE1),rr.bind(u.stepInterpolant?Q.NEAREST:Q.LINEAR,Q.CLAMP_TO_EDGE)}xe&&(z.activeTexture.set(Q.TEXTURE0),ln.lineAtlasTexture&&ln.lineAtlasTexture.bind(Q.LINEAR,Q.REPEAT),kt.updatePaintBuffers()),qe&&(z.activeTexture.set(Q.TEXTURE0),ln.imageAtlasTexture&&ln.imageAtlasTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),kt.updatePaintBuffers()),W&&m.terrain.setupElevationDraw(ln,An),m.uploadCommonUniforms(z,An,wn.toUnwrapped());const vr=Qn=>{Rt!=null&&(Rt.value=it*k),An.draw(m,Q.TRIANGLES,J,Qn,re,ir.disabled,Cn,u.id,Ln.layoutVertexBuffer,Ln.indexBuffer,Ln.segments,u.paint,m.transform.zoom,kt,[Ln.layoutVertexBuffer2,Ln.patternVertexBuffer,Ln.zOffsetVertexBuffer]),Rt!=null&&(Rt.value=it)};if(ht&&!W){const Qn=m.stencilModeForClipping(wn).ref;Qn===0&&de&&z.clear({stencil:0});const rr={func:Q.EQUAL,mask:255};Cn.u_alpha_discard_threshold=.8,vr(new Qt(rr,Qn,255,Q.KEEP,Q.KEEP,Q.INVERT)),Cn.u_alpha_discard_threshold=0,vr(new Qt(rr,Qn,255,Q.KEEP,Q.KEEP,Q.KEEP))}else ht&&W&&(Cn.u_alpha_discard_threshold=.001),vr(W?cn:m.stencilModeForClipping(wn))}ht&&(m.resetStencilClippingMasks(),de&&z.clear({stencil:0})),k===0||m.depthOcclusion||de||m.layersWithOcclusionOpacity.push(m.currentLayer),W&&(m.forceTerrainMode=!1)},fill:function(m,a,u,g){const v=u.paint.get("fill-color"),x=u.paint.get("fill-opacity"),B=u.is3D(),k=new Le(m.context.gl.LEQUAL,Le.ReadWrite,m.depthRangeFor3D);if(x.constantOr(1)===0)return;const z=u.paint.get("fill-emissive-strength"),Q=m.colorModeForDrapableLayerRenderPass(z),j=u.paint.get("fill-pattern"),W=m.opaquePassEnabledForLayer()&&!j.constantOr(1)&&v.constantOr(i.bz.transparent).a===1&&x.constantOr(0)===1?"opaque":"translucent";if(m.renderPass===W){const J=B?k:m.depthModeForSublayer(1,m.renderPass==="opaque"?Le.ReadWrite:Le.ReadOnly);Zi(m,a,u,g,J,Q,!1)}if(!B&&m.renderPass==="translucent"&&u.paint.get("fill-antialias")){const J=B?k:m.depthModeForSublayer(u.getPaintProperty("fill-outline-color")?2:0,Le.ReadOnly);Zi(m,a,u,g,J,Q,!0)}},"fill-extrusion":function(m,a,u,g){const v=u.paint.get("fill-extrusion-opacity"),x=m.context,B=x.gl,k=m.terrain,z=k&&k.renderingToTexture;if(v===0)return;const Q=m.conflationActive&&m.style.isLayerClipped(u,a.getSource()),j=m.style.order.indexOf(u.fqid);if(Q&&function(W,J,re,de,me){for(const _e of de){const xe=J.getTile(_e).getBucket(re);xe&&(xe.updateReplacement(_e,W.replacementSource,me),xe.uploadCentroid(W.context))}}(m,a,u,g,j),k||Q)for(const W of g){const J=a.getTile(W).getBucket(u);J&&Ei(m.context,a,W,J,u,k,Q)}if(m.renderPass==="shadow"&&m.shadowRenderer){const W=m.shadowRenderer;if(k&&v<.65&&u._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof i.a4)return;const J=W.getShadowPassDepthMode(),re=W.getShadowPassColorMode();Yi(m,a,u,g,J,Qt.disabled,re,Q)}else if(m.renderPass==="translucent"){const W=!u.paint.get("fill-extrusion-pattern").constantOr(1),J=u.paint.get("fill-extrusion-color").constantOr(i.bz.white);if(!z&&J.a!==0){const re=new Le(m.context.gl.LEQUAL,Le.ReadWrite,m.depthRangeFor3D);v===1&&W?Yi(m,a,u,g,re,Qt.disabled,fe.unblended,Q):(Yi(m,a,u,g,re,Qt.disabled,fe.disabled,Q),Yi(m,a,u,g,re,m.stencilModeFor3D(),m.colorModeForRenderPass(),Q),m.resetStencilClippingMasks())}if(m.style.enable3dLights()&&W&&(!k&&m.transform.projection.name!=="globe"||z)){const re=u.paint.get("fill-extrusion-opacity"),de=u.paint.get("fill-extrusion-ambient-occlusion-intensity"),me=u.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),_e=u.paint.get("fill-extrusion-flood-light-intensity"),xe=u.paint.get("fill-extrusion-flood-light-color").toRenderColor(u.lut).toArray01().slice(0,3),ze=de>0&&me>0,Qe=_e>0,Ue=(qe,ut,it)=>(1-it)*qe+it*ut,Xe=qe=>{const ut=m.depthModeForSublayer(1,Le.ReadOnly,B.LEQUAL,!0),it=u.paint.get(qe?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),ht=Ue(.1,3,it),xt=m._showOverdrawInspector;if(!xt){const pt=new Qt({func:B.ALWAYS,mask:255},255,255,B.KEEP,B.KEEP,B.REPLACE),At=new fe([B.ONE,B.ONE,B.ONE,B.ONE],i.bz.transparent,[!1,!1,!1,!0],B.MIN);si(m,a,u,g,ut,pt,At,ir.disabled,qe,"sdf",re,de,me,_e,xe,ht,Q,!1)}{const pt=xt?Qt.disabled:new Qt({func:B.EQUAL,mask:255},255,255,B.KEEP,B.DECR,B.DECR),At=xt?m.colorModeForRenderPass():new fe([B.ONE_MINUS_DST_ALPHA,B.DST_ALPHA,B.ONE,B.ONE],i.bz.transparent,[!0,!0,!0,!0]);si(m,a,u,g,ut,pt,At,ir.disabled,qe,"color",re,de,me,_e,xe,ht,Q,!1)}};if(z){const qe=(ut,it,ht)=>{const xt=m.depthModeForSublayer(1,Le.ReadOnly,B.LEQUAL,!1),pt=u.paint.get(ut?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),At=Ue(.1,3,pt);{const Rt=new fe([B.ONE,B.ONE,B.ONE,B.ONE],i.bz.transparent,[!1,!1,!1,!0]);si(m,a,u,g,xt,Qt.disabled,Rt,ir.disabled,ut,"clear",re,de,me,_e,xe,At,Q,it)}{const Rt=new Qt({func:B.ALWAYS,mask:255},255,255,B.KEEP,B.KEEP,B.REPLACE),cn=new fe([B.ONE,B.ONE,B.ONE,B.ONE],i.bz.transparent,[!1,!1,!1,!0],B.MIN);si(m,a,u,g,xt,Rt,cn,ir.disabled,ut,"sdf",re,de,me,_e,xe,At,Q,it)}{const Rt=ut?B.ZERO:B.ONE_MINUS_DST_ALPHA,cn=new Qt({func:B.EQUAL,mask:255},255,255,B.KEEP,B.DECR,B.DECR),wn=new fe([Rt,B.DST_ALPHA,B.ONE_MINUS_DST_ALPHA,B.ZERO],i.bz.transparent,[!0,!0,!0,!0]);si(m,a,u,g,xt,cn,wn,ir.disabled,ut,"color",re,de,me,_e,xe,At,Q,it)}{const Rt=new fe([B.ONE,B.ONE,B.ONE,ut?B.ZERO:B.ONE],i.bz.transparent,[!1,!1,!1,!0],ut?B.FUNC_ADD:B.MAX);si(m,a,u,g,xt,Qt.disabled,Rt,ir.disabled,ut,"clear",re,de,me,_e,xe,At,Q,it,ht)}};if(ze||Qe){let ut;if(m.prepareDrawTile(),k){const it=k.drapeBufferSize[0],ht=k.drapeBufferSize[1];ut=k.framebufferCopyTexture,ut&&(!ut||ut.size[0]===it&&ut.size[1]===ht)||(ut&&ut.destroy(),ut=k.framebufferCopyTexture=new i.T(x,new i.r({width:it,height:ht}),B.RGBA8)),ut.bind(B.LINEAR,B.CLAMP_TO_EDGE),B.copyTexImage2D(B.TEXTURE_2D,0,B.RGBA,0,0,it,ht,0)}ze&&qe(!0,!1,ut),Qe&&qe(!1,!0,ut)}}else ze&&Xe(!0),Qe&&Xe(!1),(ze||Qe)&&m.resetStencilClippingMasks()}}},hillshade:function(m,a,u,g){if(m.renderPass!=="offscreen"&&m.renderPass!=="translucent"||m.style.disableElevatedTerrain)return;const v=m.context,x=m.terrain&&m.terrain.renderingToTexture,[B,k]=m.renderPass!=="translucent"||x?[{},g]:m.stencilConfigForOverlap(g);for(const z of k){const Q=a.getTile(z);if(Q.needsHillshadePrepare&&m.renderPass==="offscreen")Eo(m,Q,u);else if(m.renderPass==="translucent"){const j=m.depthModeForSublayer(0,Le.ReadOnly),W=u.paint.get("hillshade-emissive-strength"),J=m.colorModeForDrapableLayerRenderPass(W),re=x&&m.terrain?m.terrain.stencilModeForRTTOverlap(z):B[z.overscaledZ];Wa(m,z,Q,u,j,re,J)}}v.viewport.set([0,0,m.width,m.height]),m.resetStencilClippingMasks()},raster:function(m,a,u,g,v,x){if(m.renderPass!=="translucent"||u.paint.get("raster-opacity")===0)return;const B=m.transform.projection.name==="globe",k=u.paint.get("raster-elevation")!==0,z=k&&B;if(m.renderElevatedRasterBackface&&!z)return;const Q=m.context,j=Q.gl,W=a.getSource(),J=function(qe,ut,it,ht){const xt=ut.paint.get("raster-color"),pt=qe.type==="raster-array",At=[],Rt=ut.paint.get("raster-resampling"),cn=ut.paint.get("raster-color-mix");let wn=ut.paint.get("raster-color-range");const ln=[cn[0],cn[1],cn[2],0],Ln=cn[3];let kt=Rt==="nearest"?ht.NEAREST:ht.LINEAR;if(pt&&(At.push("RASTER_ARRAY"),xt||At.push("RASTER_COLOR"),Rt==="linear"&&At.push("RASTER_ARRAY_LINEAR"),kt=ht.NEAREST,!wn&&qe.rasterLayers)){const mn=qe.rasterLayers.find(({id:An})=>An===ut.sourceLayer);mn&&mn.fields&&mn.fields.range&&(wn=mn.fields.range)}if(wn=wn||[0,1],xt){At.push("RASTER_COLOR"),it.activeTexture.set(ht.TEXTURE2),ut.updateColorRamp(wn);let mn=ut.colorRampTexture;mn||(mn=ut.colorRampTexture=new i.T(it,ut.colorRamp,ht.RGBA8)),mn.bind(ht.LINEAR,ht.CLAMP_TO_EDGE)}return{mix:ln,range:wn,offset:Ln,defines:At,resampling:kt}}(W,u,Q,j);if(W instanceof i.aD&&!g.length&&!B)return;const re=u.paint.get("raster-emissive-strength"),de=m.colorModeForDrapableLayerRenderPass(re),me=m.terrain&&m.terrain.renderingToTexture,_e=!m.options.moving,xe=u.paint.get("raster-resampling")==="nearest"?j.NEAREST:j.LINEAR;if(W instanceof i.aD&&!g.length&&(W.onNorthPole||W.onSouthPole)){const qe=k?m.stencilModeFor3D():Qt.disabled;return void io(!!W.onNorthPole,null,m,a,u,re,J,ir.disabled,qe)}if(!g.length)return;const[ze,Qe]=W instanceof i.aD||me?[{},g]:m.stencilConfigForOverlap(g),Ue=Qe[Qe.length-1].overscaledZ;z&&J.defines.push("PROJECTION_GLOBE_VIEW"),k&&J.defines.push("RENDER_CUTOFF");const Xe=(qe,ut,it)=>{for(const ht of qe){const xt=ht.toUnwrapped(),pt=a.getTile(ht);if(me&&(!pt||!pt.hasData()))continue;Q.activeTexture.set(j.TEXTURE0);const At=fo(pt,W,u,J);if(!At||!At.texture)continue;const{texture:Rt,mix:cn,offset:wn,tileSize:ln,buffer:Ln}=At;let kt,mn;me?(kt=Le.disabled,mn=ht.projMatrix):k?(kt=new Le(j.LEQUAL,Le.ReadWrite,m.depthRangeFor3D),mn=B?Float32Array.from(m.transform.expandedFarZProjMatrix):m.transform.calculateProjMatrix(xt,_e)):(kt=m.depthModeForSublayer(ht.overscaledZ-Ue,u.paint.get("raster-opacity")===1?Le.ReadWrite:Le.ReadOnly,j.LESS),mn=m.transform.calculateProjMatrix(xt,_e));const An=m.terrain&&me?m.terrain.stencilModeForRTTOverlap(ht):ze[ht.overscaledZ],Rn=x?0:u.paint.get("raster-fade-duration");pt.registerFadeDuration(Rn);const Mn=a.findLoadedParent(ht,0),bn=Xa(pt,Mn,a,m.transform,Rn);let Cn,vr;m.terrain&&m.terrain.prepareDrawTile(),Q.activeTexture.set(j.TEXTURE0),Rt.bind(xe,j.CLAMP_TO_EDGE),Q.activeTexture.set(j.TEXTURE1),Mn?(Mn.texture&&Mn.texture.bind(xe,j.CLAMP_TO_EDGE),Cn=Math.pow(2,Mn.tileID.overscaledZ-pt.tileID.overscaledZ),vr=[pt.tileID.canonical.x*Cn%1,pt.tileID.canonical.y*Cn%1]):Rt.bind(xe,j.CLAMP_TO_EDGE),Rt.useMipmap&&Q.extTextureFilterAnisotropic&&m.transform.pitch>20&&j.texParameterf(j.TEXTURE_2D,Q.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Q.extTextureFilterAnisotropicMax);const Qn=m.transform;let rr;const Rr=k?Oi(Qn):[0,0,0,0];let fr,Sr,Yr,qr,ji,oo=0;if(z&&W instanceof i.aD&&W.coordinates.length>3)fr=Float32Array.from(i.b5(i.cC(new i.bP(0,0,0)))),Sr=Float32Array.from(Qn.globeMatrix),Yr=Float32Array.from(i.cy(Qn)),qr=[i.am(Qn.center.lng),i.at(Qn.center.lat)],rr=W.elevatedGlobePerspectiveTransform,ji=W.elevatedGlobeGridMatrix||new Float32Array(9);else if(z){const ci=i.cz(ht.canonical);oo=i.cA(ci.getCenter().lat),fr=Float32Array.from(i.b5(i.cC(ht.canonical))),Sr=Float32Array.from(Qn.globeMatrix),Yr=Float32Array.from(i.cy(Qn)),qr=[i.am(Qn.center.lng),i.at(Qn.center.lat)],rr=[0,0],ji=Float32Array.from(i.cB(ht.canonical,ci,oo,Qn.worldSize/Qn._pixelsPerMercatorPixel))}else rr=W instanceof i.aD?W.perspectiveTransform:[0,0],fr=new Float32Array(16),Sr=new Float32Array(9),Yr=new Float32Array(16),qr=[0,0],ji=new Float32Array(9);const So=Mf(mn,fr,Sr,Yr,ji,vr||[0,0],i.a9(m.transform.zoom),qr,Rr,Cn||1,bn,u,rr,k?u.paint.get("raster-elevation"):0,2,cn,wn,J.range,ln,Ln,re),tu=m.isTileAffectedByFog(ht),Bs=m.getOrCreateProgram("raster",{defines:J.defines,overrideFog:tu});if(m.uploadCommonUniforms(Q,Bs,xt),W instanceof i.aD){const ci=W.elevatedGlobeVertexBuffer,eo=W.elevatedGlobeIndexBuffer;if(me||!B)W.boundsBuffer&&W.boundsSegments&&Bs.draw(m,j.TRIANGLES,kt,Qt.disabled,de,ir.disabled,So,u.id,W.boundsBuffer,m.quadTriangleIndexBuffer,W.boundsSegments);else if(ci&&eo){const Xo=Qn.zoom<=i.c2?W.elevatedGlobeSegments:W.getSegmentsForLongitude(Qn.center.lng);Xo&&Bs.draw(m,j.TRIANGLES,kt,Qt.disabled,de,ut,So,u.id,ci,eo,Xo)}}else if(z){kt=new Le(j.LEQUAL,Le.ReadOnly,m.depthRangeFor3D);const ci=m.globeSharedBuffers;if(ci){const[eo,Xo,Ki]=ci.getGridBuffers(oo,!1);Bs.draw(m,j.TRIANGLES,kt,it||An,m.colorModeForRenderPass(),ut,So,u.id,eo,Xo,Ki)}}else{const{tileBoundsBuffer:ci,tileBoundsIndexBuffer:eo,tileBoundsSegments:Xo}=m.getTileBoundsBuffers(pt);Bs.draw(m,j.TRIANGLES,kt,An,de,ir.disabled,So,u.id,ci,eo,Xo)}}if(!(W instanceof i.aD)&&z)for(const ht of qe){const xt=ht.canonical.y===(1<<ht.canonical.z)-1;ht.canonical.y===0&&io(!0,ht,m,a,u,re,J,ut,it||Qt.disabled),xt&&io(!1,ht,m,a,u,re,J,ut===ir.frontCW?ir.backCW:ir.frontCW,it||Qt.disabled)}};z?Xe(Qe,m.renderElevatedRasterBackface?ir.backCW:ir.frontCW,m.stencilModeFor3D()):Xe(Qe,ir.disabled,void 0),m.resetStencilClippingMasks()},"raster-particle":function(m,a,u,g,v,x){m.renderPass==="offscreen"&&function(B,k,z,Q){if(!Q.length)return;const j=B.context,W=j.gl,J=k.getSource();if(!(J instanceof _c))return;const re=Math.ceil(Math.sqrt(z.paint.get("raster-particle-count")));let de=z.particlePositionRGBAImage;if(!de||de.width!==re){const Qe=function(Ue){const Xe=Ue*Ue,qe=new Uint8Array(4*Xe),ut=function(ht){return ht|=0,ht=Math.imul(2747636419^ht,2654435769),ht=Math.imul(ht^ht>>>16,2654435769),((ht=Math.imul(ht^ht>>>16,2654435769))>>>0)/4294967296},it=1/1.1;for(let ht=0;ht<Xe;ht++){const xt=it*(ut(2*ht+0)+D),pt=it*(ut(2*ht+1)+D),At=255*xt%1,Rt=255*pt%1,cn=At,wn=pt-Rt/255,ln=Rt;qe[4*ht+0]=255*(xt-At/255),qe[4*ht+1]=255*cn,qe[4*ht+2]=255*wn,qe[4*ht+3]=255*ln}return qe}(re);de=z.particlePositionRGBAImage=new i.r({width:re,height:re},Qe)}let me=z.particleFramebuffer;me?me.width!==re&&(me.destroy(),me=z.particleFramebuffer=j.createFramebuffer(re,re,!0,null)):me=z.particleFramebuffer=j.createFramebuffer(re,re,!0,null);const _e=[];for(const Qe of Q){const Ue=k.getTile(Qe);if(!(Ue instanceof co))continue;const Xe=Js(Ue,J,z);if(!Xe)continue;const qe=[Ue.tileSize,Ue.tileSize];let ut=z.tileFramebuffer;ut||(ut=z.tileFramebuffer=j.createFramebuffer(qe[0],qe[1],!0,null));let it=Ue.rasterParticleState;it||(it=Ue.rasterParticleState=new dl(j,Qe,qe,de));const ht=it.update(z.lastInvalidatedAt);it.particleTextureDimension!==re&&it.updateParticleTexture(Qe,de);const xt=it.targetColorTexture;it.targetColorTexture=it.backgroundColorTexture,it.backgroundColorTexture=xt;const pt=it.particleTexture0;it.particleTexture0=it.particleTexture1,it.particleTexture1=pt,_e.push([Qe,Xe,it,ht])}if(_e.length===0)return;const xe=i.q.now(),ze=z.previousDrawTimestamp?.001*(xe-z.previousDrawTimestamp):.0167;if(z.previousDrawTimestamp=xe,z.hasColorMap()){j.activeTexture.set(W.TEXTURE0+2);let Qe=z.colorRampTexture;Qe||(Qe=z.colorRampTexture=new i.T(j,z.colorRamp,W.RGBA8)),Qe.bind(W.LINEAR,W.CLAMP_TO_EDGE)}j.bindFramebuffer.set(z.tileFramebuffer.framebuffer),function(Qe,Ue,Xe){const qe=Qe.context,ut=qe.gl,it=Ue.tileFramebuffer;qe.activeTexture.set(ut.TEXTURE0);const ht={u_texture:0,u_opacity:1.05*(pt=Ue.paint.get("raster-particle-fade-opacity-factor"))/(pt+.05)},xt=Qe.getOrCreateProgram("rasterParticleTexture",{defines:[],overrideFog:!1});var pt;for(const At of Xe){const[,,Rt,cn]=At;it.colorAttachment.set(Rt.targetColorTexture.texture),qe.viewport.set([0,0,it.width,it.height]),qe.clear({color:i.bz.transparent}),cn&&(Rt.backgroundColorTexture.bind(ut.NEAREST,ut.CLAMP_TO_EDGE),xt.draw(Qe,ut.TRIANGLES,Le.disabled,Qt.disabled,fe.alphaBlended,ir.disabled,ht,Ue.id,Qe.viewportBuffer,Qe.quadTriangleIndexBuffer,Qe.viewportSegments))}}(B,z,_e),function(Qe,Ue,Xe,qe){const ut=Qe.context,it=ut.gl,ht=Xe.tileFramebuffer,xt=Qe.transform.projection.name==="globe",pt=Xe.paint.get("raster-particle-max-speed");for(const At of qe){const[Rt,cn,wn]=At;ut.activeTexture.set(it.TEXTURE0+0),cn.texture.bind(it.LINEAR,it.CLAMP_TO_EDGE),ht.colorAttachment.set(wn.targetColorTexture.texture);const ln=Qe.getOrCreateProgram("rasterParticleDraw",{defines:cn.defines,overrideFog:!1});ut.activeTexture.set(it.TEXTURE0+1);const Ln=cn.scalarData?[]:[0,1,2,3].map(An=>i.c$[An](Rt));Ln.push(Rt);const kt=Rt.canonical.x,mn=Rt.canonical.y;for(const An of Ln){const Rn=Ue.getTile(xt?An.wrapped():An);if(!Rn)continue;const Mn=Rn.rasterParticleState;if(!Mn)continue;const bn=An.canonical.x+(1<<An.canonical.z)*(An.wrap-Rt.wrap),Cn=An.canonical.y;Mn.particleTexture0.bind(it.NEAREST,it.CLAMP_TO_EDGE);const vr=oe(1,Mn.particleTexture0.size[0],[bn-kt,Cn-mn],0,cn.texture.size,2,pt,cn.textureOffset,cn.scale,cn.offset);ln.draw(Qe,it.POINTS,Le.disabled,Qt.disabled,fe.alphaBlended,ir.disabled,vr,Xe.id,Mn.particleIndexBuffer,void 0,Mn.particleSegment)}}}(B,k,z,_e),j.bindFramebuffer.set(z.particleFramebuffer.framebuffer),function(Qe,Ue,Xe,qe){const ut=Qe.context,it=ut.gl,ht=Ue.paint.get("raster-particle-max-speed"),xt=qe*Ue.paint.get("raster-particle-speed-factor")*.15,pt=function(Rt){return Math.pow(Rt,6)}(.01+1*Ue.paint.get("raster-particle-reset-rate-factor")),At=Ue.particleFramebuffer;ut.viewport.set([0,0,At.width,At.height]);for(const Rt of Xe){const[,cn,wn]=Rt;ut.activeTexture.set(it.TEXTURE0+0),cn.texture.bind(it.LINEAR,it.CLAMP_TO_EDGE),ut.activeTexture.set(it.TEXTURE0+1);const ln=wn.particleTexture0;ln.bind(it.NEAREST,it.CLAMP_TO_EDGE);const Ln=pe(1,ln.size[0],0,cn.texture.size,ht,xt,pt,cn.textureOffset,cn.scale,cn.offset);At.colorAttachment.set(wn.particleTexture1.texture),ut.clear({color:i.bz.transparent}),Qe.getOrCreateProgram("rasterParticleUpdate",{defines:cn.defines}).draw(Qe,it.TRIANGLES,Le.disabled,Qt.disabled,fe.unblended,ir.disabled,Ln,Ue.id,Qe.viewportBuffer,Qe.quadTriangleIndexBuffer,Qe.viewportSegments)}}(B,z,_e,ze)}(m,a,u,g),m.renderPass==="translucent"&&(function(B,k,z,Q,j){const W=B.context,J=W.gl,re=k.getSource().tileSize,de=5*(1-i.a7(i.bU,i.bU+1,B.transform.zoom))*re+z.paint.get("raster-particle-elevation"),me=!B.options.moving,_e=B.transform.projection.name==="globe";if(!Q.length)return;const[xe,ze]=B.stencilConfigForOverlap(Q),Qe=[];_e&&Qe.push("PROJECTION_GLOBE_VIEW");const Ue=B.stencilModeFor3D();for(const Xe of ze){const qe=Xe.toUnwrapped(),ut=k.getTile(Xe);if(!ut.rasterParticleState)continue;const it=ut.rasterParticleState,ht=100;ut.registerFadeDuration(ht);const xt=k.findLoadedParent(Xe,0),pt=Xa(ut,xt,k,B.transform,ht);let At,Rt;B.terrain&&B.terrain.prepareDrawTile(),W.activeTexture.set(J.TEXTURE0),it.targetColorTexture.bind(J.LINEAR,J.CLAMP_TO_EDGE),W.activeTexture.set(J.TEXTURE1),xt&&xt.rasterParticleState?(xt.rasterParticleState.targetColorTexture.bind(J.LINEAR,J.CLAMP_TO_EDGE),At=Math.pow(2,xt.tileID.overscaledZ-ut.tileID.overscaledZ),Rt=[ut.tileID.canonical.x*At%1,ut.tileID.canonical.y*At%1]):it.targetColorTexture.bind(J.LINEAR,J.CLAMP_TO_EDGE);const cn=_e?Float32Array.from(B.transform.expandedFarZProjMatrix):B.transform.calculateProjMatrix(qe,me),wn=B.transform,ln=da(wn),Ln=i.cz(Xe.canonical),kt=i.cA(Ln.getCenter().lat);let mn,An,Rn,Mn,bn;_e?(mn=Float32Array.from(i.b5(i.cC(Xe.canonical))),An=Float32Array.from(wn.globeMatrix),Rn=Float32Array.from(i.cy(wn)),Mn=[i.am(wn.center.lng),i.at(wn.center.lat)],bn=Float32Array.from(i.cB(Xe.canonical,Ln,kt,wn.worldSize/wn._pixelsPerMercatorPixel))):(mn=new Float32Array(16),An=new Float32Array(9),Rn=new Float32Array(16),Mn=[0,0],bn=new Float32Array(9));const Cn=H(cn,mn,An,Rn,bn,Rt||[0,0],i.a9(B.transform.zoom),Mn,ln,At||1,pt,de),vr=B.isTileAffectedByFog(Xe),Qn=B.getOrCreateProgram("rasterParticle",{defines:Qe,overrideFog:vr});if(B.uploadCommonUniforms(W,Qn,qe),_e){const rr=new Le(J.LEQUAL,Le.ReadOnly,B.depthRangeFor3D),Rr=0,fr=B.globeSharedBuffers;if(fr){const[Sr,Yr,qr]=fr.getGridBuffers(kt,Rr!==0);Qn.draw(B,J.TRIANGLES,rr,Ue,fe.alphaBlended,B.renderElevatedRasterBackface?ir.frontCCW:ir.backCCW,Cn,z.id,Sr,Yr,qr)}}else{const rr=B.depthModeForSublayer(0,Le.ReadOnly),Rr=xe[Xe.overscaledZ],{tileBoundsBuffer:fr,tileBoundsIndexBuffer:Sr,tileBoundsSegments:Yr}=B.getTileBoundsBuffers(ut);Qn.draw(B,J.TRIANGLES,rr,Rr,fe.alphaBlended,ir.disabled,Cn,z.id,fr,Sr,Yr)}}B.resetStencilClippingMasks()}(m,a,u,g),m.style.map.triggerRepaint())},background:function(m,a,u,g){const v=u.paint.get("background-color"),x=u.paint.get("background-opacity"),B=u.paint.get("background-emissive-strength"),k=u.paint.get("background-pitch-alignment")==="viewport";if(x===0)return;const z=m.context,Q=z.gl,j=m.transform,W=j.tileSize,J=u.paint.get("background-pattern");let re;if(J!==void 0&&(J===null||(re=m.imageManager.getPattern(J.toString(),u.scope,m.style.getLut(u.scope)),!re)))return;const de=!J&&v.a===1&&x===1&&m.opaquePassEnabledForLayer()?"opaque":"translucent";if(m.renderPass!==de)return;const me=Qt.disabled,_e=m.depthModeForSublayer(0,de==="opaque"?Le.ReadWrite:Le.ReadOnly),xe=m.colorModeForDrapableLayerRenderPass(B),ze=J?"backgroundPattern":"background";let Qe,Ue=g;if(Ue||(Qe=m.getBackgroundTiles(),Ue=Object.values(Qe).map(Xe=>Xe.tileID)),J&&(z.activeTexture.set(Q.TEXTURE0),m.imageManager.bind(m.context,u.scope)),k){const Xe=m.getOrCreateProgram(ze,{overrideFog:!1,overrideRtt:!0}),qe=new Float32Array(i.a6.mat4.identity([])),ut=new i.aA(0,0,0,0,0),it=J?Ze(qe,B,x,m,0,u.scope,re,k,{tileID:ut,tileSize:W}):Ke(qe,B,x,v.toRenderColor(u.lut));Xe.draw(m,Q.TRIANGLES,_e,me,xe,ir.disabled,it,u.id,m.viewportBuffer,m.quadTriangleIndexBuffer,m.viewportSegments)}else for(const Xe of Ue){const qe=m.isTileAffectedByFog(Xe),ut=m.getOrCreateProgram(ze,{overrideFog:qe}),it=Xe.toUnwrapped(),ht=g?Xe.projMatrix:m.transform.calculateProjMatrix(it);m.prepareDrawTile();const xt=a?a.getTile(Xe):Qe?Qe[Xe.key]:new Fa(Xe,W,j.zoom,m),pt=J?Ze(ht,B,x,m,0,u.scope,re,k,{tileID:Xe,tileSize:W}):Ke(ht,B,x,v.toRenderColor(u.lut));m.uploadCommonUniforms(z,ut,it);const{tileBoundsBuffer:At,tileBoundsIndexBuffer:Rt,tileBoundsSegments:cn}=m.getTileBoundsBuffers(xt);ut.draw(m,Q.TRIANGLES,_e,me,xe,ir.disabled,pt,u.id,At,Rt,cn)}},sky:function(m,a,u){const g=m._atmosphere?i.a9(m.transform.zoom):1,v=u.paint.get("sky-opacity")*g;if(v===0)return;const x=m.context,B=u.paint.get("sky-type"),k=new Le(x.gl.LEQUAL,Le.ReadOnly,[0,1]),z=m.frameCounter/1e3%1;B==="atmosphere"?m.renderPass==="offscreen"?u.needsSkyboxCapture(m)&&(function(Q,j,W,J){const re=Q.context,de=re.gl;let me=j.skyboxFbo;if(!me){me=j.skyboxFbo=re.createFramebuffer(32,32,!0,null),j.skyboxGeometry=new Rd(re),j.skyboxTexture=re.gl.createTexture(),de.bindTexture(de.TEXTURE_CUBE_MAP,j.skyboxTexture),de.texParameteri(de.TEXTURE_CUBE_MAP,de.TEXTURE_WRAP_S,de.CLAMP_TO_EDGE),de.texParameteri(de.TEXTURE_CUBE_MAP,de.TEXTURE_WRAP_T,de.CLAMP_TO_EDGE),de.texParameteri(de.TEXTURE_CUBE_MAP,de.TEXTURE_MIN_FILTER,de.LINEAR),de.texParameteri(de.TEXTURE_CUBE_MAP,de.TEXTURE_MAG_FILTER,de.LINEAR);for(let Qe=0;Qe<6;++Qe)de.texImage2D(de.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,0,de.RGBA,32,32,0,de.RGBA,de.UNSIGNED_BYTE,null)}re.bindFramebuffer.set(me.framebuffer),re.viewport.set([0,0,32,32]);const _e=j.getCenter(Q,!0),xe=Q.getOrCreateProgram("skyboxCapture"),ze=new Float64Array(16);i.a6.mat4.identity(ze),i.a6.mat4.rotateY(ze,ze,.5*-Math.PI),Tc(Q,j,xe,ze,_e,0),i.a6.mat4.identity(ze),i.a6.mat4.rotateY(ze,ze,.5*Math.PI),Tc(Q,j,xe,ze,_e,1),i.a6.mat4.identity(ze),i.a6.mat4.rotateX(ze,ze,.5*-Math.PI),Tc(Q,j,xe,ze,_e,2),i.a6.mat4.identity(ze),i.a6.mat4.rotateX(ze,ze,.5*Math.PI),Tc(Q,j,xe,ze,_e,3),i.a6.mat4.identity(ze),Tc(Q,j,xe,ze,_e,4),i.a6.mat4.identity(ze),i.a6.mat4.rotateY(ze,ze,Math.PI),Tc(Q,j,xe,ze,_e,5),re.viewport.set([0,0,Q.width,Q.height])}(m,u),u.markSkyboxValid(m)):m.renderPass==="sky"&&function(Q,j,W,J,re){const de=Q.context,me=de.gl,_e=Q.transform,xe=Q.getOrCreateProgram("skybox");de.activeTexture.set(me.TEXTURE0),me.bindTexture(me.TEXTURE_CUBE_MAP,j.skyboxTexture);const ze=((Qe,Ue,Xe,qe,ut)=>({u_matrix:Qe,u_sun_direction:Ue,u_cubemap:0,u_opacity:qe,u_temporal_offset:ut}))(_e.skyboxMatrix,j.getCenter(Q,!1),0,J,re);Q.uploadCommonUniforms(de,xe),xe.draw(Q,me.TRIANGLES,W,Qt.disabled,Q.colorModeForRenderPass(),ir.backCW,ze,"skybox",j.skyboxGeometry.vertexBuffer,j.skyboxGeometry.indexBuffer,j.skyboxGeometry.segment)}(m,u,k,v,z):B==="gradient"&&m.renderPass==="sky"&&function(Q,j,W,J,re){const de=Q.context,me=de.gl,_e=Q.transform,xe=Q.getOrCreateProgram("skyboxGradient");j.skyboxGeometry||(j.skyboxGeometry=new Rd(de)),de.activeTexture.set(me.TEXTURE0);let ze=j.colorRampTexture;ze||(ze=j.colorRampTexture=new i.T(de,j.colorRamp,me.RGBA8)),ze.bind(me.LINEAR,me.CLAMP_TO_EDGE);const Qe=((Ue,Xe,qe,ut,it)=>({u_matrix:Ue,u_color_ramp:0,u_center_direction:Xe,u_radius:i.bB(qe),u_opacity:ut,u_temporal_offset:it}))(_e.skyboxMatrix,j.getCenter(Q,!1),j.paint.get("sky-gradient-radius"),J,re);Q.uploadCommonUniforms(de,xe),xe.draw(Q,me.TRIANGLES,W,Qt.disabled,Q.colorModeForRenderPass(),ir.backCW,Qe,"skyboxGradient",j.skyboxGeometry.vertexBuffer,j.skyboxGeometry.indexBuffer,j.skyboxGeometry.segment)}(m,u,k,v,z)},debug:function(m,a,u,g,v,x){for(let B=0;B<u.length;B++)if(v){const Q=new i.bz(g.r*.8,g.g*.8,g.b*.8,1);wa(m,a,u[B],g,-1,-1,x),wa(m,a,u[B],g,-1,1,x),wa(m,a,u[B],g,1,1,x),wa(m,a,u[B],g,1,-1,x),wa(m,a,u[B],Q,0,0,x)}else wa(m,a,u[B],g,0,0,x)},custom:function(m,a,u,g){const v=m.context,x=u.implementation;if(!m.transform.projection.unsupportedLayers||!m.transform.projection.unsupportedLayers.includes("custom")||m.terrain&&(m.terrain.renderingToTexture||m.renderPass==="offscreen")&&u.isDraped(a)){if(m.renderPass==="offscreen"){const B=x.prerender;if(B){if(m.setCustomLayerDefaults(),v.setColorMode(m.colorModeForRenderPass()),m.transform.projection.name==="globe"){const k=m.transform.pointMerc;B.call(x,v.gl,m.transform.customLayerMatrix(),m.transform.getProjection(),m.transform.globeToMercatorMatrix(),i.a9(m.transform.zoom),[k.x,k.y],m.transform.pixelsPerMeterRatio)}else B.call(x,v.gl,m.transform.customLayerMatrix());v.setDirty(),m.setBaseState()}}else if(m.renderPass==="translucent"){if(m.terrain&&m.terrain.renderingToTexture){const k=x.renderToTile;if(k){const z=g[0].canonical,Q=new i.a5(z.x+g[0].wrap*(1<<z.z),z.y,z.z);v.setDepthMode(Le.disabled),v.setStencilMode(Qt.disabled),v.setColorMode(m.colorModeForRenderPass()),m.setCustomLayerDefaults(),k.call(x,v.gl,Q),v.setDirty(),m.setBaseState()}return}m.setCustomLayerDefaults(),v.setColorMode(m.colorModeForRenderPass()),v.setStencilMode(Qt.disabled);const B=x.renderingMode==="3d"?new Le(m.context.gl.LEQUAL,Le.ReadWrite,m.depthRangeFor3D):m.depthModeForSublayer(0,Le.ReadOnly);if(v.setDepthMode(B),m.transform.projection.name==="globe"){const k=m.transform.pointMerc;x.render(v.gl,m.transform.customLayerMatrix(),m.transform.getProjection(),m.transform.globeToMercatorMatrix(),i.a9(m.transform.zoom),[k.x,k.y],m.transform.pixelsPerMeterRatio)}else x.render(v.gl,m.transform.customLayerMatrix());v.setDirty(),m.setBaseState(),v.bindFramebuffer.set(null)}}else i.w("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(m,a,u,g){if(m.renderPass==="opaque")return;const v=u.paint.get("model-opacity");if(v===0)return;const x=u.paint.get("model-cast-shadows");if(m.renderPass==="shadow"&&(!x||m.terrain&&v<.65&&u._transitionablePaint._values["model-opacity"].value.expression instanceof i.a4))return;const B=m.shadowRenderer,k=u.paint.get("model-receive-shadows");B&&(B.useNormalOffset=!0,k||(B.enabled=!1));const z=()=>{B&&(B.useNormalOffset=!0,k||(B.enabled=!0))},Q=a.getSource();if(m.renderPass==="light-beam"&&Q.type!=="batched-model")return;if(Q.type==="vector"||Q.type==="geojson")return function(xe,ze,Qe,Ue,Xe){const qe=xe.transform;if(qe.projection.name!=="mercator")return void i.w(`Drawing 3D models for ${qe.projection.name} projection is not yet implemented`);const ut=qe.getFreeCameraOptions().position;if(!xe.modelManager)return;const it=xe.modelManager;Qe.modelManager=it;const ht=xe.shadowRenderer;if(!Qe._unevaluatedLayout._values.hasOwnProperty("model-id"))return;const xt=Qe._unevaluatedLayout._values["model-id"],pt={...Qe.layout.get("model-id").parameters},At=xe.style.order.indexOf(Qe.fqid);for(const Rt of Ue){const cn=ze.getTile(Rt).getBucket(Qe);if(!cn||cn.projection.name!==qe.projection.name)continue;const wn=cn.getModelUris();wn&&!cn.modelsRequested&&(it.addModelsFromBucket(wn,Xe),cn.modelsRequested=!0);const ln=a0(Rt,qe);pt.zoom=ln;const Ln=xt.possiblyEvaluate(pt);if(Md(xe,cn,Rt),Pc.shadowUniformsInitialized=!1,Pc.useSingleShadowCascade=!!ht&&ht.getMaxCascadeForTile(Rt.toUnwrapped())===0,xe.renderPass==="shadow"&&ht){if(xe.currentShadowCascade===1&&cn.isInsideFirstShadowMapFrustum)continue;const An=qe.calculatePosMatrix(Rt.toUnwrapped(),qe.worldSize);if(Pc.tileMatrix.set(An),Pc.shadowTileMatrix=Float32Array.from(ht.calculateShadowPassMatrixFromMatrix(An)),Pc.aabb.min.fill(0),Pc.aabb.max[0]=Pc.aabb.max[1]=i.ab,Pc.aabb.max[2]=0,Uf(cn,Pc,xe,Qe.scope))continue}const kt=1<<Rt.canonical.z,mn=[((ut.x-Rt.wrap)*kt-Rt.canonical.x)*i.ab,(ut.y*kt-Rt.canonical.y)*i.ab,ut.z*kt*i.ab];xe.conflationActive&&Object.keys(cn.instancesPerModel).length>0&&xe.style.isLayerClipped(Qe,ze.getSource())&&cn.updateReplacement(Rt,xe.replacementSource,At,Xe)&&(cn.uploaded=!1,cn.upload(xe.context));for(let An in cn.instancesPerModel){const Rn=cn.instancesPerModel[An];Rn.features.length>0&&(An=Ln.evaluate(Rn.features[0].feature,{}));const Mn=it.getModel(An,Xe);if(Mn&&Mn.uploaded)for(const bn of Mn.nodes)fa(xe,Qe,bn,Rn,mn,Rt,Pc)}}}(m,a,u,g,Q.type==="vector"?u.scope:""),void z();if(!Q.loaded())return;if(Q.type==="batched-model")return function(xe,ze,Qe,Ue){Qe.resetLayerRenderingStats(xe);const Xe=xe.context,qe=xe.transform,ut=xe.style.fog,it=xe.shadowRenderer;if(qe.projection.name!=="mercator")return void i.w(`Drawing 3D landmark models for ${qe.projection.name} projection is not yet implemented`);const ht=xe.transform.getFreeCameraOptions().position,xt=i.a6.vec3.scale([],[ht.x,ht.y,ht.z],xe.transform.worldSize),pt=i.a6.vec3.negate([],xt),At=i.a6.mat4.identity([]),Rt=i.de(qe.center.lat,qe.zoom),cn=i.a6.mat4.fromScaling([],[1,1,1/Rt]);i.a6.mat4.translate(At,At,pt);const wn=Qe.paint.get("model-opacity"),ln=new Le(Xe.gl.LEQUAL,Le.ReadWrite,xe.depthRangeFor3D),Ln=new Le(Xe.gl.LEQUAL,Le.ReadOnly,xe.depthRangeFor3D),kt=new i.c9([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),mn=xe.renderPass==="shadow",An=mn&&it?it.getCurrentCascadeFrustum():qe.getFrustum(qe.scaleZoom(qe.worldSize)),Rn=Qe.paint.get("model-front-cutoff"),Mn=Rn[2]<1,bn=rs(xe,Qe.paint.get("model-cutoff-fade-range")),Cn=Qe.getLayerRenderingStats();(function(vr,Qn,rr,Rr){const fr=vr.terrain?vr.terrain.exaggeration():0,Sr=vr.transform.zoom;for(const Yr of Rr){const qr=Qn.getTile(Yr).getBucket(rr);qr&&(vr.conflationActive&&qr.updateReplacement(Yr,vr.replacementSource),qr.evaluateScale(vr,rr),vr.terrain&&fr>0&&qr.elevationUpdate(vr.terrain,fr,Yr,rr.source),qr.needsReEvaluation(vr,Sr,rr)&&qr.evaluate(rr))}})(xe,ze,Qe,Ue),function(){let vr,Qn,rr;Mn?(vr=Ue.length-1,Qn=-1,rr=-1):(vr=0,Qn=Ue.length,rr=1);const Rr=new Float64Array(16),fr=i.a6.vec3.create(),Sr=new i.P(0,0);for(let Yr=vr;Yr!==Qn;Yr+=rr){const qr=Ue[Yr],ji=ze.getTile(qr).getBucket(Qe);if(!ji||!ji.uploaded)continue;let oo=!1;it&&(oo=it.getMaxCascadeForTile(qr.toUnwrapped())===0);const So=qe.calculatePosMatrix(qr.toUnwrapped(),qe.worldSize),tu=ji.modelTraits;!mn&&Mn&&(i.a6.mat4.invert(Rr,So),i.a6.vec3.transformMat4(fr,xt,Rr),Sr.x=fr[0],Sr.y=fr[1]);const Bs=[];for(const ci of ji.getNodesInfo()){if(ci.hiddenByReplacement||!ci.node.meshes)continue;const eo=ci.node;let Xo=0;xe.terrain&&eo.elevation&&(Xo=eo.elevation*xe.terrain.exaggeration());const Ki=(()=>{const vo=ci.aabb;return kt.min=[...vo.min],kt.max=[...vo.max],kt.min[2]+=Xo,kt.max[2]+=Xo,i.a6.vec3.transformMat4(kt.min,kt.min,So),i.a6.vec3.transformMat4(kt.max,kt.max,So),kt})(),Xr=ci.evaluatedScale;if(Xr[0]<=1&&Xr[1]<=1&&Xr[2]<=1&&Ki.intersects(An)===0)continue;if(!mn&&Mn){const vo=.16666666666666666;ci.cameraCollisionOpacity=xt[0]>Ki.min[0]&&xt[0]<Ki.max[0]&&xt[1]>Ki.min[1]&&xt[1]<Ki.max[1]&&xt[2]*Rt<Ki.max[2]&&eo.footprint&&i.bu(Sr,eo.footprint)?Math.max(ci.cameraCollisionOpacity-vo,0):Math.min(1,ci.cameraCollisionOpacity+vo)}const Ii=[...So],Qi=eo.anchor?eo.anchor[0]:0,ds=eo.anchor?eo.anchor[1]:0;i.a6.mat4.translate(Ii,Ii,[Qi*(Xr[0]-1),ds*(Xr[1]-1),Xo]),i.a6.vec3.exactEquals(Xr,i.dh)||i.a6.mat4.scale(Ii,Ii,Xr);const Ss=i.a6.mat4.multiply([],Ii,eo.matrix),bi=i.a6.mat4.multiply([],qe.expandedFarZProjMatrix,Ss),ta=i.a6.mat4.multiply([],qe.expandedFarZProjMatrix,Ii),Aa=i.a6.vec4.transformMat4([],[Qi,ds,Xo,1],bi)[2];eo.hidden=!1;let na=wn;mn||(Mn&&(na*=ci.cameraCollisionOpacity,na*=Bi(Ii,qe,ci.aabb,Rn)),na*=_o(bn,Aa)),na!==0?Bs.push({nodeInfo:ci,depth:Aa,opacity:na,wvpForNode:bi,wvpForTile:ta,nodeModelMatrix:Ss,tileModelMatrix:Ii}):eo.hidden=!0}mn||Bs.sort((ci,eo)=>!Mn||ci.opacity===1&&eo.opacity===1?ci.depth<eo.depth?-1:1:ci.opacity===1?-1:eo.opacity===1?1:ci.depth>eo.depth?-1:1);for(const ci of Bs){const eo=ci.nodeInfo,Xo=eo.node;let Ki=i.a6.mat4.multiply([],cn,ci.tileModelMatrix);i.a6.mat4.multiply(Ki,At,Ki);const Xr=i.a6.mat4.invert([],Ki);i.a6.mat4.transpose(Xr,Xr),i.a6.mat4.scale(Xr,Xr,ch),Ki=i.a6.mat4.multiply(Ki,Ki,Xo.matrix);const Ii=xe.renderPass==="light-beam",Qi=tu&i.dj.HasMapboxMeshFeatures,ds=Qi?0:eo.evaluatedRMEA[0][2];for(let Ss=0;Ss<Xo.meshes.length;++Ss){const bi=Xo.meshes[Ss],ta=Ss===Xo.lightMeshIndex;let Aa=ci.wvpForNode;if(ta){if(!Ii&&!xe.terrain&&xe.shadowRenderer){xe.currentLayer<xe.firstLightBeamLayer&&(xe.firstLightBeamLayer=xe.currentLayer);continue}Aa=ci.wvpForTile}else if(Ii)continue;const na={defines:[]},vo=[];if(Df(na.defines,vo,bi,xe,Qe.lut),Qi||na.defines.push("DIFFUSE_SHADED"),oo&&na.defines.push("SHADOWS_SINGLE_CASCADE"),Cn&&(mn?Cn.numRenderedVerticesInShadowPass+=bi.vertexArray.length:Cn.numRenderedVerticesInTransparentPass+=bi.vertexArray.length),mn){Pu(bi,ci.nodeModelMatrix,xe,Qe);continue}let Il=null;if(ut){const Zh=$h(ci.nodeModelMatrix,xe.transform);if(Il=new Float32Array(Zh),qe.projection.name!=="globe"){const Qd=bi.aabb.min,ph=bi.aabb.max,[qA,WA]=ut.getOpacityForBounds(Zh,Qd[0],Qd[1],ph[0],ph[1]);na.overrideFog=qA>=zn||WA>=zn}}const Pl=bi.material;let nu;Pl.occlusionTexture&&Pl.occlusionTexture.offsetScale&&(nu=Pl.occlusionTexture.offsetScale,na.defines.push("OCCLUSION_TEXTURE_TRANSFORM")),!mn&&it&&(it.useNormalOffset=!!bi.normalBuffer);const kc=xe.getOrCreateProgram("model",na);!mn&&it&&it.setupShadowsFromMatrix(ci.tileModelMatrix,kc,it.useNormalOffset),xe.uploadCommonUniforms(Xe,kc,null,Il);const tc=Pl.pbrMetallicRoughness;tc.metallicFactor=.9,tc.roughnessFactor=.5;const ru=He(new Float32Array(Aa),new Float32Array(Ki),new Float32Array(Xr),new Float32Array(Xo.matrix),xe,ci.opacity,tc.baseColorFactor.toRenderColor(null),Pl.emissiveFactor,tc.metallicFactor,tc.roughnessFactor,Pl,ds,Qe,[0,0,0],nu);!ta&&(eo.hasTranslucentParts||ci.opacity<1)&&kc.draw(xe,Xe.gl.TRIANGLES,ln,Qt.disabled,fe.disabled,ir.backCCW,ru,Qe.id,bi.vertexBuffer,bi.indexBuffer,bi.segments,Qe.paint,xe.transform.zoom,void 0,vo),kc.draw(xe,Xe.gl.TRIANGLES,ta?Ln:ln,Qt.disabled,ta||ci.opacity<1||eo.hasTranslucentParts?fe.alphaBlended:fe.unblended,ir.backCCW,ru,Qe.id,bi.vertexBuffer,bi.indexBuffer,bi.segments,Qe.paint,xe.transform.zoom,void 0,vo)}}}}()}(m,a,u,g),void z();if(Q.type!=="model")return;const j=Q.getModels(),W=[],J=m.transform.getFreeCameraOptions().position,re=i.a6.vec3.scale([],[J.x,J.y,J.z],m.transform.worldSize);i.a6.vec3.negate(re,re);const de=[],me=[];let _e=0;for(const xe of j){const ze=u.paint.get("model-rotation").constantOr(null),Qe=u.paint.get("model-scale").constantOr(null),Ue=u.paint.get("model-translation").constantOr(null);xe.computeModelMatrix(m,ze,Qe,Ue,!0,!0,!1);const Xe=i.a6.mat4.identity([]),qe=i.de(xe.position.lat,m.transform.zoom),ut=i.a6.mat4.fromScaling([],[1,1,1/qe]);i.a6.mat4.translate(Xe,Xe,re),W.push({zScaleMatrix:ut,negCameraPosMatrix:Xe});for(const it of xe.nodes)Gh(m.transform,it,xe.matrix,m.transform.expandedFarZProjMatrix,_e,de,me);_e++}if(de.sort((xe,ze)=>ze.depth-xe.depth),m.renderPass!=="shadow"){if(v===1)for(const xe of me)lh(xe,m,u,W[xe.modelIndex],Qt.disabled,m.colorModeForRenderPass());else{for(const xe of me)lh(xe,m,u,W[xe.modelIndex],Qt.disabled,fe.disabled);for(const xe of me)lh(xe,m,u,W[xe.modelIndex],m.stencilModeFor3D(),m.colorModeForRenderPass());m.resetStencilClippingMasks()}for(const xe of de)lh(xe,m,u,W[xe.modelIndex],Qt.disabled,m.colorModeForRenderPass());z()}else{for(const xe of me)Pu(xe.mesh,xe.nodeModelMatrix,m,u);for(const xe of de)Pu(xe.mesh,xe.nodeModelMatrix,m,u);z()}}},Kh={model:function(m,a,u){const g=a.getSource();if(!g.loaded())return;if(g.type==="vector"||g.type==="geojson")return void(u.modelManager&&u.modelManager.upload(u,g.type==="vector"?m.scope:""));if(g.type==="batched-model"||g.type!=="model")return;const v=g.getModels();for(const x of v)x.upload(u.context)},raster:function(m,a,u){const g=a.getSource();if(!(g instanceof _c&&g.loaded()))return;const v=m.sourceLayer||g.rasterLayerIds&&g.rasterLayerIds[0];if(!v)return;const x=m.paint.get("raster-array-band")||g.getInitialBand(v);if(x==null)return;const B=a.getIds().map(k=>a.getTileByID(k));for(const k of B)k.updateNeeded(v,x)&&g.prepareTile(k,v,x)},"raster-particle":function(m,a,u){const g=a.getSource();if(!(g instanceof _c&&g.loaded()))return;const v=m.sourceLayer||g.rasterLayerIds&&g.rasterLayerIds[0];if(!v)return;const x=m.paint.get("raster-particle-array-band")||g.getInitialBand(v);if(x==null)return;const B=a.getIds().map(k=>a.getTileByID(k));for(const k of B)k.updateNeeded(v,x)&&g.prepareTile(k,v,x)}};class zf{constructor(a,u,g,v){this.context=new Wt(a,u),this.transform=g,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.tp=v,this._timeStamp=i.q.now(),this._averageFPS=0,this._fpsHistory=[],this._dt=0,this._debugParams={showTerrainProxyTiles:!1,fpsWindow:30,continousRedraw:!1,enabledLayers:{}};const x=["fill","line","symbol","circle","heatmap","fill-extrusion","raster","raster-particle","hillshade","model","background","sky"];for(const k of x)this._debugParams.enabledLayers[k]=!0;v.registerParameter(this._debugParams,["Terrain"],"showTerrainProxyTiles",{},()=>{this.style.map.triggerRepaint()}),v.registerParameter(this._debugParams,["FPS"],"fpsWindow",{min:1,max:100,step:1}),v.registerBinding(this._debugParams,["FPS"],"continousRedraw",{readonly:!0,label:"continuous redraw"}),v.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"value"}),v.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"graph",view:"graph",min:0,max:200});for(const k of x)v.registerParameter(this._debugParams.enabledLayers,["Debug","Layers"],k);this.occlusionParams=new Nf(v),this.setup(),this.numSublayers=cs.maxUnderzooming+cs.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new i.dl,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new Cd(this),this._wireframeDebugCache=new Lc,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0,this.layersWithOcclusionOpacity=[];const B=new i.r({width:1,height:1},Uint8Array.of(0,0,0,0));this.emptyDepthTexture=new i.T(this.context,B,a.RGBA8),this._clippingActiveLastFrame=!1}updateTerrain(a,u){const g=!!a&&!!a.terrain&&this.transform.projection.supportsTerrain;if(!(g||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new NA(this,a));const v=this._terrain;this.transform.elevation=g?v:null,v.update(a,this.transform,u),this.transform.elevation&&!v.enabled&&(this.transform.elevation=null)}_updateFog(a){const u=a.fog;if(!u||this.transform.projection.name==="globe"||u.getOpacity(this.transform.pitch)<1||u.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[g,v]=u.getFovAdjustedRange(this.transform._fov);if(g>v)return void(this.transform.fogCullDistSq=null);const x=g+.78*(v-g);this.transform.fogCullDistSq=x*x}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled||this._forceTerrainMode?this._terrain:null}get forceTerrainMode(){return this._forceTerrainMode}set forceTerrainMode(a){a&&!this._terrain&&(this._terrain=new NA(this,this.style)),this._forceTerrainMode=a}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(a,u){if(this.width=a*i.q.devicePixelRatio,this.height=u*i.q.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style.order)this.style._mergedLayers[g].resize()}setup(){const a=this.context,u=new i.a_;u.emplaceBack(0,0),u.emplaceBack(i.ab,0),u.emplaceBack(0,i.ab),u.emplaceBack(i.ab,i.ab),this.tileExtentBuffer=a.createVertexBuffer(u,i.b0.members),this.tileExtentSegments=i.b1.simpleSegment(0,0,4,2);const g=new i.a_;g.emplaceBack(0,0),g.emplaceBack(i.ab,0),g.emplaceBack(0,i.ab),g.emplaceBack(i.ab,i.ab),this.debugBuffer=a.createVertexBuffer(g,i.b0.members),this.debugSegments=i.b1.simpleSegment(0,0,4,5);const v=new i.a_;v.emplaceBack(-1,-1),v.emplaceBack(1,-1),v.emplaceBack(-1,1),v.emplaceBack(1,1),this.viewportBuffer=a.createVertexBuffer(v,i.b0.members),this.viewportSegments=i.b1.simpleSegment(0,0,4,2);const x=new i.aN;x.emplaceBack(0,0,0,0),x.emplaceBack(i.ab,0,i.ab,0),x.emplaceBack(0,i.ab,0,i.ab),x.emplaceBack(i.ab,i.ab,i.ab,i.ab),this.mercatorBoundsBuffer=a.createVertexBuffer(x,i.b3.members),this.mercatorBoundsSegments=i.b1.simpleSegment(0,0,4,2);const B=new i.aO;B.emplaceBack(0,1,2),B.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=a.createIndexBuffer(B);const k=new i.a$;for(const Q of[0,1,3,2,0])k.emplaceBack(Q);this.debugIndexBuffer=a.createIndexBuffer(k),this.emptyTexture=new i.T(a,new i.r({width:1,height:1},Uint8Array.of(0,0,0,0)),a.gl.RGBA8),this.identityMat=i.a6.mat4.create();const z=this.context.gl;this.stencilClearMode=new Qt({func:z.ALWAYS,mask:0},0,255,z.ZERO,z.ZERO,z.ZERO),this.loadTimeStamps.push(performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(a){return a._makeTileBoundsBuffers(this.context,this.transform.projection),a._tileBoundsBuffer?{tileBoundsBuffer:a._tileBoundsBuffer,tileBoundsIndexBuffer:a._tileBoundsIndexBuffer,tileBoundsSegments:a._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const a=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,a.TRIANGLES,Le.disabled,this.stencilClearMode,fe.disabled,ir.disabled,Zl(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(a,u,g){if(!u||this.currentStencilSource===u.id||!a.isTileClipped()||!g||g.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let k=!1;for(const z of g)if(this._tileClippingMaskIDs[z.key]===void 0){k=!0;break}if(!k)return}this.currentStencilSource=u.id;const v=this.context,x=v.gl;this.nextStencilID+g.length>256&&this.clearStencil(),v.setColorMode(fe.disabled),v.setDepthMode(Le.disabled);const B=this.getOrCreateProgram("clippingMask");this._tileClippingMaskIDs={};for(const k of g){const z=u.getTile(k),Q=this._tileClippingMaskIDs[k.key]=this.nextStencilID++,{tileBoundsBuffer:j,tileBoundsIndexBuffer:W,tileBoundsSegments:J}=this.getTileBoundsBuffers(z);B.draw(this,x.TRIANGLES,Le.disabled,new Qt({func:x.ALWAYS,mask:0},Q,255,x.KEEP,x.KEEP,x.REPLACE),fe.disabled,ir.disabled,Zl(k.projMatrix),"$clipping",j,W,J)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const a=this.nextStencilID++,u=this.context.gl;return new Qt({func:u.NOTEQUAL,mask:255},a,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(a){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(a);const u=this.context.gl;return new Qt({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[a.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(a){const u=this.context.gl,g=a.sort((B,k)=>k.overscaledZ-B.overscaledZ),v=g[g.length-1].overscaledZ,x=g[0].overscaledZ-v+1;if(x>1){this.currentStencilSource=void 0,this.nextStencilID+x>256&&this.clearStencil();const B={};for(let k=0;k<x;k++)B[k+v]=new Qt({func:u.GEQUAL,mask:255},k+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=x,[B,g]}return[{[v]:Qt.disabled},g]}colorModeForRenderPass(){const a=this.context.gl;return this._showOverdrawInspector?new fe([a.CONSTANT_COLOR,a.ONE,a.CONSTANT_COLOR,a.ONE],new i.bz(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?fe.unblended:fe.alphaBlended}colorModeForDrapableLayerRenderPass(a){const u=this.context.gl;return this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture&&this.renderPass==="translucent"?new fe([u.ONE,u.ONE_MINUS_SRC_ALPHA,u.CONSTANT_ALPHA,u.ONE_MINUS_SRC_ALPHA],new i.bz(0,0,0,a===void 0?0:a),[!0,!0,!0,!0]):this.colorModeForRenderPass()}depthModeForSublayer(a,u,g,v=!1){if(this.depthOcclusion)return new Le(this.context.gl.GREATER,Le.ReadOnly,this.depthRangeFor3D);if(!this.opaquePassEnabledForLayer()&&!v)return Le.disabled;const x=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon;return new Le(g||this.context.gl.LEQUAL,u,[x,x])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}blitDepth(){const a=this.context.gl,u=Math.ceil(this.width),g=Math.ceil(this.height),v=this.context.bindFramebuffer.get(),x=a.getParameter(a.TEXTURE_BINDING_2D);this.depthFBO&&this.depthFBO.width===u&&this.depthFBO.height===g||(this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),u!==0&&g!==0&&(this.depthFBO=new Pn(this.context,u,g,!1,"texture"),this.depthTexture=new i.T(this.context,{width:u,height:g,data:null},a.DEPTH24_STENCIL8),this.depthFBO.depthAttachment.set(this.depthTexture.texture))),this.context.bindFramebuffer.set(v),a.bindTexture(a.TEXTURE_2D,x),this.depthFBO&&(a.bindFramebuffer(a.READ_FRAMEBUFFER,null),a.bindFramebuffer(a.DRAW_FRAMEBUFFER,this.depthFBO.framebuffer),a.blitFramebuffer(0,0,u,g,0,0,u,g,a.DEPTH_BUFFER_BIT,a.NEAREST),a.bindFramebuffer(a.FRAMEBUFFER,this.context.bindFramebuffer.current))}updateAverageFPS(){this._fpsHistory.push(this._dt===0?0:1e3/this._dt),this._fpsHistory.length>this._debugParams.fpsWindow&&this._fpsHistory.splice(0,this._fpsHistory.length-this._debugParams.fpsWindow),this._averageFPS=Math.round(this._fpsHistory.reduce((a,u)=>a+u/this._fpsHistory.length,0))}render(a,u){const g=i.q.now();this._dt=g-this._timeStamp,this._timeStamp=g,this._wireframeDebugCache.update(this.frameCounter),this._debugParams.continousRedraw=a.map.repaint,this.style=a,this.options=u;const v=this.style._mergedLayers,x=this.style.order.filter(pt=>{const At=v[pt];return!(At.type in this._debugParams.enabledLayers)||this._debugParams.enabledLayers[At.type]});let B=!1,k=!1;for(const pt of x){const At=v[pt];At.type==="circle"&&(B=!0),At.type==="symbol"&&(At.hasInitialOcclusionOpacityProperties?k=!0:B=!0)}const z=x.map(pt=>v[pt]),Q=this.style._mergedSourceCaches;this.imageManager=a.imageManager,this.modelManager=a.modelManager,this.symbolFadeChange=a.placement.symbolFadeChange(i.q.now()),this.imageManager.beginFrame();let j=0,W=!1;for(const pt in Q){const At=Q[pt];At.used&&(At.prepare(this.context),At.getSource().usedInConflation&&++j)}let J=!1;for(const pt of z)pt.isHidden(this.transform.zoom)||(pt.type==="clip"&&(J=!0),this.prepareLayer(pt));const re={},de={},me={},_e={},xe={};for(const pt in Q){const At=Q[pt];re[pt]=At.getVisibleCoordinates(),de[pt]=re[pt].slice().reverse(),me[pt]=At.getVisibleCoordinates(!0).reverse(),_e[pt]=At.getShadowCasterCoordinates(),xe[pt]=At.sortCoordinatesByDistance(re[pt])}const ze=pt=>{const At=this.style.getLayerSourceCache(pt);return At&&At.used?At.getSource():null};if(j||J||this._clippingActiveLastFrame){const pt=[],At=[];let Rt=0;for(const cn of z)this.isSourceForClippingOrConflation(cn,ze(cn))&&(pt.push(cn),At.push(Rt)),Rt++;if(pt&&(J||pt.length>1)||this._clippingActiveLastFrame){J=!1;const cn=[];for(let wn=0;wn<pt.length;wn++){const ln=pt[wn],Ln=At[wn],kt=this.style.getLayerSourceCache(ln);if(!kt||!kt.used||!kt.getSource().usedInConflation&&ln.type!=="clip")continue;let mn=i.dn,An=i.bs.None;const Rn=[];let Mn=!0;if(ln.type==="clip"){mn=Ln;for(const bn of ln.layout.get("clip-layer-types"))An|=bn==="model"?i.bs.Model:bn==="symbol"?i.bs.Symbol:i.bs.FillExtrusion;for(const bn of ln.layout.get("clip-layer-scope"))Rn.push(bn);ln.isHidden(this.transform.zoom)?Mn=!1:J=!0}Mn&&cn.push({layer:ln.fqid,cache:kt,order:mn,clipMask:An,clipScope:Rn})}this.replacementSource.setSources(cn),W=!0}}this._clippingActiveLastFrame=J,W||this.replacementSource.clear(),this.conflationActive=W,this.minCutoffZoom=0,this.longestCutoffRange=0,this.opaquePassCutoff=1/0,this._lastOcclusionLayer=-1,this.layersWithOcclusionOpacity=[];for(let pt=0;pt<z.length;pt++){const At=z[pt],Rt=At.cutoffRange();if(this.longestCutoffRange=Math.max(Rt,this.longestCutoffRange),Rt>0){const cn=ze(At);cn&&(this.minCutoffZoom=Math.max(cn.minzoom,this.minCutoffZoom)),At.minzoom&&(this.minCutoffZoom=Math.max(At.minzoom,this.minCutoffZoom))}At.is3D()&&(this.opaquePassCutoff===1/0&&(this.opaquePassCutoff=pt),this._lastOcclusionLayer=pt)}const Qe=this.style&&this.style.fog;Qe?(this._fogVisible=Qe.getOpacity(this.transform.pitch)!==0,this._fogVisible&&this.transform.projection.name!=="globe"&&(this._fogVisible=Qe.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding(me),this.opaquePassCutoff=0);const Ue=this._shadowRenderer;if(Ue){Ue.updateShadowParameters(this.transform,this.style.directionalLight);for(const pt in Q)for(const At of re[pt]){let Rt={min:0,max:0};this.terrain&&(Rt=this.terrain.getMinMaxForTile(At)||Rt),Ue.addShadowReceiver(At.toUnwrapped(),Rt.min,Rt.max)}}if(this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new i.dm(this.context)),this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new Of(this)),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),!jn.has(this.context.gl))return;this.renderPass="offscreen";for(const pt of z){const At=a.getLayerSourceCache(pt);if(!pt.hasOffscreenPass()||pt.isHidden(this.transform.zoom))continue;const Rt=At?de[At.id]:void 0;(pt.type==="custom"||pt.type==="raster"||pt.type==="raster-particle"||pt.isSky()||Rt&&Rt.length)&&this.renderLayer(this,At,pt,Rt)}this.depthRangeFor3D=[0,1-(z.length+2)*this.numSublayers*this.depthEpsilon],this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,_e)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);const Xe=this.transform.projection.name==="globe"||this.transform.isHorizonVisible(),qe=(()=>{if(u.showOverdrawInspector)return i.bz.black;const pt=this.style.fog;if(pt&&this.transform.projection.supportsFog){const At=this.style.getLut(pt.scope);if(!Xe){const Rt=pt.properties.get("color").toRenderColor(At).toArray01();return new i.bz(...Rt)}if(Xe){const Rt=pt.properties.get("space-color").toRenderColor(At).toArray01();return new i.bz(...Rt)}}return i.bz.transparent})();if(this.context.clear({color:qe,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&Xe&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=x.length-1;this.currentLayer>=0;this.currentLayer--){const pt=z[this.currentLayer],At=a.getLayerSourceCache(pt);if(pt.isSky())continue;const Rt=At?(pt.is3D()?xe:de)[At.id]:void 0;this._renderTileClippingMasks(pt,At,Rt),this.renderLayer(this,At,pt,Rt)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&Xe&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||i.a9(this.transform.zoom)>0)&&(this.transform.projection.name==="globe"||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<x.length;this.currentLayer++){const pt=z[this.currentLayer],At=a.getLayerSourceCache(pt);pt.isSky()&&this.renderLayer(this,At,pt,At?de[At.id]:void 0)}function ut(pt,At){let Rt;return At&&(Rt=(pt.type==="symbol"?me:pt.is3D()?xe:de)[At.id]),Rt}if(this.renderPass="translucent",this.transform.projection.name==="globe"){for(this.renderElevatedRasterBackface=!0,this.currentLayer=0;this.currentLayer<x.length;){const pt=z[this.currentLayer];if(pt.type==="raster"||pt.type==="raster-particle"){const At=a.getLayerSourceCache(pt);this.renderLayer(this,At,pt,ut(pt,At))}++this.currentLayer}this.renderElevatedRasterBackface=!1}this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;let it=0;Ue&&(it=Ue.getShadowCastingLayerCount());let ht=!1,xt=-1;for(let pt=0;pt<x.length;++pt){const At=z[pt];At.isHidden(this.transform.zoom)||At.is3D()&&(xt=pt)}for(k&&xt===-1&&(B=!0);this.currentLayer<x.length;){const pt=z[this.currentLayer],At=a.getLayerSourceCache(pt);if(pt.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(pt)){if(pt.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer),this._lastOcclusionLayer=Math.max(this.currentLayer,this._lastOcclusionLayer)}else{if(B&&!ht&&this.terrain&&!this.transform.isOrthographic&&(ht=!0,this.blitDepth()),k&&xt!==-1&&this.currentLayer===xt+1&&!this.transform.isOrthographic&&this.blitDepth(),pt.is3D()||this.terrain||this._renderTileClippingMasks(pt,At,At?re[At.id]:void 0),this.renderLayer(this,At,pt,ut(pt,At)),!this.terrain&&Ue&&it>0&&pt.hasShadowPass()&&--it==0&&(Ue.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer)){const Rt=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=Rt;this.currentLayer++){const cn=z[this.currentLayer];if(!cn.hasLightBeamPass())continue;const wn=a.getLayerSourceCache(cn);this.renderLayer(this,wn,cn,wn?de[wn.id]:void 0)}this.currentLayer=Rt,this.renderPass="translucent"}if(this.currentLayer>=this._lastOcclusionLayer&&this.layersWithOcclusionOpacity.length>0){const Rt=this.currentLayer;this.depthOcclusion=!0;for(const cn of this.layersWithOcclusionOpacity){this.currentLayer=cn;const wn=z[this.currentLayer],ln=a.getLayerSourceCache(wn),Ln=ln?de[ln.id]:void 0;wn.is3D()||this.terrain||this._renderTileClippingMasks(wn,ln,ln?re[ln.id]:void 0),this.renderLayer(this,ln,wn,Ln)}this.depthOcclusion=!1,this.currentLayer=Rt,this.renderPass="translucent",this.layersWithOcclusionOpacity=[]}++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let pt=null;z.forEach(At=>{const Rt=a.getLayerSourceCache(At);Rt&&!At.isHidden(this.transform.zoom)&&Rt.getVisibleCoordinates().length&&(!pt||pt.getSource().maxzoom<Rt.getSource().maxzoom)&&(pt=Rt)}),pt&&this.options.showTileBoundaries&&Lu.debug(this,pt,pt.getVisibleCoordinates(),i.bz.red,!1,this.options.showParseStatus)}this.terrain&&this._debugParams.showTerrainProxyTiles&&Lu.debug(this,this.terrain.proxySourceCache,this.terrain.proxyCoords,new i.bz(1,.8,.1,1),!0,this.options.showParseStatus),this.options.showPadding&&function(pt){const At=pt.transform.padding;Ji(pt,pt.transform.height-(At.top||0),3,Ya),Ji(pt,At.bottom||0,3,ba),Nt(pt,At.left||0,3,Ja),Nt(pt,pt.transform.width-(At.right||0),3,Tn);const Rt=pt.transform.centerPoint;(function(cn,wn,ln,Ln){es(cn,wn-1,ln-10,2,20,Ln),es(cn,wn-10,ln-1,20,2,Ln)})(pt,Rt.x,pt.transform.height-Rt.y,dr)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(performance.now()),this.saveCanvasCopy()),W||(this.conflationActive=!1)}prepareLayer(a){this.gpuTimingStart(a);const{unsupportedLayers:u}=this.transform.projection,g=!u||!u.includes(a.type);if(Kh[a.type]&&(g||this.terrain&&a.type==="custom")){const v=this.style.getLayerSourceCache(a);Kh[a.type](a,v,this)}this.gpuTimingEnd()}renderLayer(a,u,g,v){g.isHidden(this.transform.zoom)||(g.type==="background"||g.type==="sky"||g.type==="custom"||g.type==="model"||g.type==="raster"||g.type==="raster-particle"||v&&v.length)&&(this.id=g.id,this.gpuTimingStart(g),a.transform.projection.unsupportedLayers&&a.transform.projection.unsupportedLayers.includes(g.type)&&(!a.terrain||g.type!=="custom")||g.type==="clip"||Lu[g.type](a,u,g,v,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(a){if(!this.options.gpuTiming)return;const u=this.context.extTimerQuery,g=this.context.gl;let v=this.gpuTimers[a.id];v||(v=this.gpuTimers[a.id]={calls:0,cpuTime:0,query:g.createQuery()}),v.calls++,g.beginQuery(u.TIME_ELAPSED_EXT,v.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const a=this.context.extTimerQuery,u=this.context.gl,g=u.createQuery();this.deferredRenderGpuTimeQueries.push(g),u.beginQuery(a.TIME_ELAPSED_EXT,g)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){const a=this.gpuTimers;return this.gpuTimers={},a}collectDeferredRenderGpuQueries(){const a=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],a}queryGpuTimers(a){const u={};for(const g in a){const v=a[g],x=this.context.extTimerQuery,B=x.getQueryParameter(v.query,this.context.gl.QUERY_RESULT)/1e6;x.deleteQueryEXT(v.query),u[g]=B}return u}queryGpuTimeDeferredRender(a){if(!this.options.gpuTimingDeferredRender)return 0;const u=this.context.extTimerQuery,g=this.context.gl;let v=0;for(const x of a)v+=u.getQueryParameter(x,g.QUERY_RESULT)/1e6,u.deleteQueryEXT(x);return v}translatePosMatrix(a,u,g,v,x){if(!g[0]&&!g[1])return a;const B=x?v==="map"?this.transform.angle:0:v==="viewport"?-this.transform.angle:0;if(B){const Q=Math.sin(B),j=Math.cos(B);g=[g[0]*j-g[1]*Q,g[0]*Q+g[1]*j]}const k=[x?g[0]:i.ak(u,g[0],this.transform.zoom),x?g[1]:i.ak(u,g[1],this.transform.zoom),0],z=new Float32Array(16);return i.a6.mat4.translate(z,a,k),z}saveTileTexture(a){const u=a.size[0],g=this._tileTextures[u];g?g.push(a):this._tileTextures[u]=[a]}getTileTexture(a){const u=this._tileTextures[a];return u&&u.length>0?u.pop():null}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture||this.forceTerrainMode}linearFloatFilteringSupported(){return this.context.extTextureFloatLinear!=null}currentGlobalDefines(a,u,g){const v=g===void 0?this.terrain&&this.terrain.renderingToTexture:g,x=[];return this.style&&this.style.enable3dLights()&&(a==="globeRaster"||a==="terrainRaster"?(x.push("LIGHTING_3D_MODE"),x.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):v||x.push("LIGHTING_3D_MODE")),this.renderPass==="shadow"?this._shadowMapDebug||x.push("DEPTH_TEXTURE"):this.shadowRenderer&&(this.shadowRenderer.useNormalOffset?x.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"):x.push("RENDER_SHADOWS","DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(x.push("TERRAIN"),this.linearFloatFilteringSupported()&&x.push("TERRAIN_DEM_FLOAT_FORMAT")),this.transform.projection.name==="globe"&&x.push("GLOBE"),!this._fogVisible||v||u!==void 0&&!u||x.push("FOG","FOG_DITHERING"),v&&x.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&x.push("OVERDRAW_INSPECTOR"),x}getOrCreateProgram(a,u){this.cache=this.cache||{};const g=u&&u.defines||[],v=u&&u.config,x=this.currentGlobalDefines(a,u&&u.overrideFog,u&&u.overrideRtt).concat(g),B=Sc.cacheKey(El[a],a,x,v);return this.cache[B]||(this.cache[B]=new Sc(this.context,a,El[a],v,vn[a],x)),this.cache[B]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const a=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(a.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new i.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA8))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy(),this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),this.emptyDepthTexture&&this.emptyDepthTexture.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(a,u){if(this.style.enable3dLights()){const g=this.style.directionalLight,v=this.style.ambientLight;if(g&&v){const x=((B,k,z)=>{const Q=B.properties.get("direction"),j=B.properties.get("color").toRenderColor(z.getLut(B.scope)).toArray01(),W=B.properties.get("intensity"),J=k.properties.get("color").toRenderColor(z.getLut(k.scope)).toArray01(),re=k.properties.get("intensity"),de=[Q.x,Q.y,Q.z],me=i.cH(J,re),_e=i.cH(j,W);return{u_lighting_ambient_color:me,u_lighting_directional_dir:de,u_lighting_directional_color:_e,u_ground_radiance:zA(de,_e,me)}})(g,v,this.style);u.setLightsUniformValues(a,x)}}}uploadCommonUniforms(a,u,g,v,x){if(this.uploadCommonLightUniforms(a,u),this.terrain&&this.terrain.renderingToTexture)return;const B=this.style.fog;if(B){const k=B.getOpacity(this.transform.pitch),z=((Q,j,W,J,re,de,me,_e,xe,ze,Qe,Ue)=>{const Xe=Q.transform,qe=j.properties.get("color").toRenderColor(Q.style.getLut(j.scope)).toArray01();qe[3]=J;const ut=Q.frameCounter/1e3%1,[it,ht]=j.properties.get("vertical-range");return{u_fog_matrix:W?Xe.calculateFogTileMatrix(W):Ue||Q.identityMat,u_fog_range:j.getFovAdjustedRange(Xe._fov),u_fog_color:qe,u_fog_horizon_blend:j.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(it,ht),ht],u_fog_temporal_offset:ut,u_frustum_tl:re,u_frustum_tr:de,u_frustum_br:me,u_frustum_bl:_e,u_globe_pos:xe,u_globe_radius:ze,u_viewport:Qe,u_globe_transition:i.a9(Xe.zoom),u_is_globe:+(Xe.projection.name==="globe")}})(this,B,g,k,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*i.q.devicePixelRatio,this.transform.height*i.q.devicePixelRatio],v);u.setFogUniformValues(a,z)}x&&u.setCutoffUniformValues(a,x.uniformValues)}setTileLoadedFlag(a){this.tileLoaded=a}saveCanvasCopy(){const a=this.canvasCopy();a&&(this.frameCopies.push(a),this.tileLoaded=!1)}canvasCopy(){const a=this.context.gl,u=a.createTexture();return a.bindTexture(a.TEXTURE_2D,u),a.copyTexImage2D(a.TEXTURE_2D,0,a.RGBA,0,0,a.drawingBufferWidth,a.drawingBufferHeight,0),u}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const a=this.style&&this.style.fog;return!!a&&a.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const a=this._backgroundTiles,u=this._backgroundTiles={},g=this.transform.coveringTiles({tileSize:512});for(const v of g)u[v.key]=a[v.key]||new Fa(v,512,this.transform.tileZoom,this);return u}clearBackgroundTiles(){this._backgroundTiles={}}isSourceForClippingOrConflation(a,u){return!(!a.is3D()||a.type!=="clip"&&(a.minzoom&&a.minzoom>this.transform.zoom||(this.style._clipLayerPresent||a.sourceLayer!=="building")&&(!u||u.type!=="batched-model")))}isTileAffectedByFog(a){if(!this.style||!this.style.fog)return!1;if(this.transform.projection.name==="globe")return!0;let u=this._cachedTileFogOpacities[a.key];return u||(this._cachedTileFogOpacities[a.key]=u=this.style.fog.getOpacityForTile(a)),u[0]>=zn||u[1]>=zn}setupDepthForOcclusion(a,u,g){const v=this.context,x=v.gl,B=!!g;var k;g||(g={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0}),v.activeTexture.set(x.TEXTURE3),a&&this.depthFBO&&this.depthTexture?(this.depthTexture.bind(x.NEAREST,x.CLAMP_TO_EDGE),g.u_depth_size_inv=[1/this.depthFBO.width,1/this.depthFBO.height],g.u_depth_range_unpack=[2/((k=this.depthRangeFor3D)[1]-k[0]),-1-2*k[0]/(k[1]-k[0])],g.u_occluder_half_size=.5*this.occlusionParams.occluderSize,g.u_occlusion_depth_offset=this.occlusionParams.depthOffset):this.emptyDepthTexture.bind(x.NEAREST,x.CLAMP_TO_EDGE),v.activeTexture.set(x.TEXTURE0),B||u.setTerrainUniformValues(v,g)}}function Sl(m,a){let u=!1,g=null;const v=()=>{g=null,u&&(m(),g=setTimeout(v,a),u=!1)};return()=>(u=!0,g||v(),g)}class Fu{constructor(a){this._hashName=a&&encodeURIComponent(a),i.aJ(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Sl(this._updateHashUnthrottled.bind(this),300)}addTo(a){return this._map=a,window.addEventListener("hashchange",this._onHashChange,!1),a.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const a=this._map;if(!a)return"";const u=Ru(a);if(this._hashName){const g=this._hashName;let v=!1;const x=location.hash.slice(1).split("&").map(B=>{const k=B.split("=")[0];return k===g?(v=!0,`${k}=${u}`):B}).filter(B=>B);return v||x.push(`${g}=${u}`),`#${x.join("&")}`}return`#${u}`}_getCurrentHash(){const a=location.hash.replace("#","");if(this._hashName){let u;return a.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(u=g)}),(u&&u[1]||"").split("/")}return a.split("/")}_onHashChange(){const a=this._map;if(!a)return!1;const u=this._getCurrentHash();if(u.length>=3&&!u.some(g=>isNaN(g))){const g=a.dragRotate.isEnabled()&&a.touchZoomRotate.isEnabled()?+(u[3]||0):a.getBearing();return a.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:g,pitch:+(u[4]||0)}),!0}return!1}_updateHashUnthrottled(){history.replaceState(history.state,"",location.href.replace(/(#.+)?$/,this.getHashString()))}}function Ru(m,a){const u=m.getCenter(),g=Math.round(100*m.getZoom())/100,v=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),x=Math.pow(10,v),B=Math.round(u.lng*x)/x,k=Math.round(u.lat*x)/x,z=m.getBearing(),Q=m.getPitch();let j=a?`/${B}/${k}/${g}`:`${g}/${k}/${B}`;return(z||Q)&&(j+="/"+Math.round(10*z)/10),Q&&(j+=`/${Math.round(Q)}`),j}const Jc={linearity:.3,easing:i.dp(0,0,.3,1)},Vf=i.l({deceleration:2500,maxSpeed:1400},Jc),Qf=i.l({deceleration:20,maxSpeed:1400},Jc),eu=i.l({deceleration:1e3,maxSpeed:360},Jc),jA=i.l({deceleration:1e3,maxSpeed:90},Jc);class ku{constructor(a){this._map=a,this.clear()}clear(){this._inertiaBuffer=[]}record(a){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:i.q.now(),settings:a})}_drainInertiaBuffer(){const a=this._inertiaBuffer,u=i.q.now();for(;a.length>0&&u-a[0].time>160;)a.shift()}_onMoveEnd(a){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const u={zoom:0,bearing:0,pitch:0,pan:new i.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:x}of this._inertiaBuffer)u.zoom+=x.zoomDelta||0,u.bearing+=x.bearingDelta||0,u.pitch+=x.pitchDelta||0,x.panDelta&&u.pan._add(x.panDelta),x.around&&(u.around=x.around),x.pinchAround&&(u.pinchAround=x.pinchAround);const g=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(u.pan.mag()){const x=uh(u.pan.mag(),g,i.l({},Vf,a||{}));v.offset=u.pan.mult(x.amount/u.pan.mag()),v.center=this._map.transform.center,Od(v,x)}if(u.zoom){const x=uh(u.zoom,g,Qf);v.zoom=this._map.transform.zoom+x.amount,Od(v,x)}if(u.bearing){const x=uh(u.bearing,g,eu);v.bearing=this._map.transform.bearing+i.ap(x.amount,-179,179),Od(v,x)}if(u.pitch){const x=uh(u.pitch,g,jA);v.pitch=this._map.transform.pitch+x.amount,Od(v,x)}if(v.zoom||v.bearing){const x=u.pinchAround===void 0?u.around:u.pinchAround;v.around=x?this._map.unproject(x):this._map.getCenter()}return this.clear(),v.noMoveStart=!0,v}}function Od(m,a){(!m.duration||m.duration<a.duration)&&(m.duration=a.duration,m.easing=a.easing)}function uh(m,a,u){const{maxSpeed:g,linearity:v,deceleration:x}=u,B=i.ap(m*v/(a/1e3),-g,g),k=Math.abs(B)/(x*v);return{easing:u.easing,duration:1e3*k,amount:B*(k/2)}}class Vs extends i.x{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,u,g,v={}){const x=ue(u.getCanvasContainer(),g),B=u.unproject(x);super(a,i.l({point:x,lngLat:B,originalEvent:g},v)),this._defaultPrevented=!1,this.target=u}}class Dd extends i.x{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,u,g){const v=a==="touchend"?g.changedTouches:g.touches,x=ye(u.getCanvasContainer(),v),B=x.map(z=>u.unproject(z)),k=x.reduce((z,Q,j,W)=>z.add(Q.div(W.length)),new i.P(0,0));super(a,{points:x,point:k,lngLats:B,lngLat:u.unproject(k),originalEvent:g}),this._defaultPrevented=!1}}class ea extends i.x{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,u){super("wheel",{originalEvent:u}),this._defaultPrevented=!1}}class Em{constructor(a,u){this._map=a,this._clickTolerance=u.clickTolerance}reset(){this._mousedownPos=void 0}wheel(a){return this._firePreventable(new ea(this._map,a))}mousedown(a,u){return this._mousedownPos=u,this._firePreventable(new Vs(a.type,this._map,a))}mouseup(a){this._map.fire(new Vs(a.type,this._map,a))}preclick(a){const u=i.l({},a);u.type="preclick",this._map.fire(new Vs(u.type,this._map,u))}click(a,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||(this.preclick(a),this._map.fire(new Vs(a.type,this._map,a)))}dblclick(a){return this._firePreventable(new Vs(a.type,this._map,a))}mouseover(a){this._map.fire(new Vs(a.type,this._map,a))}mouseout(a){this._map.fire(new Vs(a.type,this._map,a))}touchstart(a){return this._firePreventable(new Dd(a.type,this._map,a))}touchmove(a){this._map.fire(new Dd(a.type,this._map,a))}touchend(a){this._map.fire(new Dd(a.type,this._map,a))}touchcancel(a){this._map.fire(new Dd(a.type,this._map,a))}_firePreventable(a){if(this._map.fire(a),a.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class $A{constructor(a){this._map=a}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(a){this._map.fire(new Vs(a.type,this._map,a))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Vs("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(a){this._delayContextMenu?this._contextMenuEvent=a:this._map.fire(new Vs(a.type,this._map,a)),this._map.listens("contextmenu")&&a.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ud{constructor(a,u){this._map=a,this._el=a.getCanvasContainer(),this._container=a.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(a,u){this.isEnabled()&&a.shiftKey&&a.button===0&&(Se(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(a,u){if(!this._active)return;const g=u,v=this._startPos,x=this._lastPos;if(!v||!x||x.equals(g)||!this._box&&g.dist(v)<this._clickTolerance)return;this._lastPos=g,this._box||(this._box=Z("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",a));const B=Math.min(v.x,g.x),k=Math.max(v.x,g.x),z=Math.min(v.y,g.y),Q=Math.max(v.y,g.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${B}px,${z}px)`,this._box.style.width=k-B+"px",this._box.style.height=Q-z+"px")})}mouseupWindow(a,u){if(!this._active)return;const g=this._startPos,v=u;if(g&&a.button===0){if(this.reset(),ne(),g.x!==v.x||g.y!==v.y)return this._map.fire(new i.x("boxzoomend",{originalEvent:a})),{cameraAnimation:x=>x.fitScreenCoordinates(g,v,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",a)}}keydown(a){this._active&&a.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",a))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),Ie(),delete this._startPos,delete this._lastPos}_fireEvent(a,u){return this._map.fire(new i.x(a,{originalEvent:u}))}}function Tl(m,a){const u={};for(let g=0;g<m.length;g++)u[m[g].identifier]=a[g];return u}class Hf{constructor(a){this.reset(),this.numTouches=a.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(a,u,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=a.timeStamp),g.length===this.numTouches&&(this.centroid=function(v){const x=new i.P(0,0);for(const B of v)x._add(B);return x.div(v.length)}(u),this.touches=Tl(g,u)))}touchmove(a,u,g){if(this.aborted||!this.centroid)return;const v=Tl(g,u);for(const x in this.touches){const B=v[x];(!B||B.dist(this.touches[x])>30)&&(this.aborted=!0)}}touchend(a,u,g){if((!this.centroid||a.timeStamp-this.startTime>500)&&(this.aborted=!0),g.length===0){const v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class hh{constructor(a){this.singleTap=new Hf(a),this.numTaps=a.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(a,u,g){this.singleTap.touchstart(a,u,g)}touchmove(a,u,g){this.singleTap.touchmove(a,u,g)}touchend(a,u,g){const v=this.singleTap.touchend(a,u,g);if(v){const x=a.timeStamp-this.lastTime<500,B=!this.lastTap||this.lastTap.dist(v)<30;if(x&&B||this.reset(),this.count++,this.lastTime=a.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class Fc{constructor(){this._zoomIn=new hh({numTouches:1,numTaps:2}),this._zoomOut=new hh({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(a,u,g){this._zoomIn.touchstart(a,u,g),this._zoomOut.touchstart(a,u,g)}touchmove(a,u,g){this._zoomIn.touchmove(a,u,g),this._zoomOut.touchmove(a,u,g)}touchend(a,u,g){const v=this._zoomIn.touchend(a,u,g),x=this._zoomOut.touchend(a,u,g);return v?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:B=>B.easeTo({duration:300,zoom:B.getZoom()+1,around:B.unproject(v)},{originalEvent:a})}):x?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:B=>B.easeTo({duration:300,zoom:B.getZoom()-1,around:B.unproject(x)},{originalEvent:a})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Jl={0:1,2:2};class ec{constructor(a){this.reset(),this._clickTolerance=a.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(a,u){return!1}_move(a,u){return{}}mousedown(a,u){if(this._lastPoint)return;const g=se(a);this._correctButton(a,g)&&(this._lastPoint=u,this._eventButton=g)}mousemoveWindow(a,u){const g=this._lastPoint;if(g){if(a.preventDefault(),this._eventButton!=null&&function(v,x){const B=Jl[x];return v.buttons===void 0||(v.buttons&B)!==B}(a,this._eventButton))this.reset();else if(this._moved||!(u.dist(g)<this._clickTolerance))return this._moved=!0,this._lastPoint=u,this._move(g,u)}}mouseupWindow(a){this._lastPoint&&se(a)===this._eventButton&&(this._moved&&ne(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class qh extends ec{mousedown(a,u){super.mousedown(a,u),this._lastPoint&&(this._active=!0)}_correctButton(a,u){return u===0&&!a.ctrlKey}_move(a,u){return{around:u,panDelta:u.sub(a)}}}class Nd extends ec{_correctButton(a,u){return u===0&&a.ctrlKey||u===2}_move(a,u){const g=.8*(u.x-a.x);if(g)return this._active=!0,{bearingDelta:g}}contextmenu(a){a.preventDefault()}}class jf extends ec{_correctButton(a,u){return u===0&&a.ctrlKey||u===2}_move(a,u){const g=-.5*(u.y-a.y);if(g)return this._active=!0,{pitchDelta:g}}contextmenu(a){a.preventDefault()}}class Xg{constructor(a,u){this._map=a,this._el=a.getCanvasContainer(),this._minTouches=1,this._clickTolerance=u.clickTolerance||1,this.reset(),i.aJ(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new i.P(0,0)}touchstart(a,u,g){return this._calculateTransform(a,u,g)}touchmove(a,u,g){if(this._active&&!(g.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(g.length===1&&!i.dq())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return a.cancelable&&a.preventDefault(),this._calculateTransform(a,u,g)}}touchend(a,u,g){this._calculateTransform(a,u,g),this._active&&g.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(a,u,g){g.length>0&&(this._active=!0);const v=Tl(g,u),x=new i.P(0,0),B=new i.P(0,0);let k=0;for(const Q in v){const j=v[Q],W=this._touches[Q];W&&(x._add(j),B._add(j.sub(W)),k++,v[Q]=j)}if(this._touches=v,k<this._minTouches||!B.mag())return;const z=B.div(k);return this._sum._add(z),this._sum.mag()<this._clickTolerance?void 0:{around:x.div(k),panDelta:z}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=Z("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.removeAttribute("role")},500)}}class zd{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(a){}_move(a,u,g){return{}}touchstart(a,u,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([u[0],u[1]]))}touchmove(a,u,g){const v=this._firstTwoTouches;if(!v)return;a.preventDefault();const[x,B]=v,k=Wh(g,u,x),z=Wh(g,u,B);if(!k||!z)return;const Q=this._aroundCenter?null:k.add(z).div(2);return this._move([k,z],Q,a)}touchend(a,u,g){if(!this._firstTwoTouches)return;const[v,x]=this._firstTwoTouches,B=Wh(g,u,v),k=Wh(g,u,x);B&&k||(this._active&&ne(),this.reset())}touchcancel(){this.reset()}enable(a){this._enabled=!0,this._aroundCenter=!!a&&a.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Wh(m,a,u){for(let g=0;g<m.length;g++)if(m[g].identifier===u)return a[g]}function l0(m,a){return Math.log(m/a)/Math.LN2}class xb extends zd{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(a){this._startDistance=this._distance=a[0].dist(a[1])}_move(a,u){const g=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(l0(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:l0(this._distance,g),pinchAround:u}}}function c0(m,a){return 180*m.angleWith(a)/Math.PI}class Cb extends zd{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])}_move(a,u){const g=this._vector;if(this._vector=a[0].sub(a[1]),g&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:c0(this._vector,g),pinchAround:u}}_isBelowThreshold(a){this._minDiameter=Math.min(this._minDiameter,a.mag());const u=25/(Math.PI*this._minDiameter)*360,g=this._startVector;if(!g)return!1;const v=c0(a,g);return Math.abs(v)<u}}function Zg(m){return Math.abs(m.y)>Math.abs(m.x)}class Eb extends zd{constructor(a){super(),this._map=a}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(a){this._lastPoints=a,Zg(a[0].sub(a[1]))&&(this._valid=!1)}_move(a,u,g){const v=this._lastPoints;if(!v)return;const x=a[0].sub(v[0]),B=a[1].sub(v[1]);return this._map._cooperativeGestures&&!i.dq()&&g.touches.length<3||(this._valid=this.gestureBeginsVertically(x,B,g.timeStamp),!this._valid)?void 0:(this._lastPoints=a,this._active=!0,{pitchDelta:(x.y+B.y)/2*-.5})}gestureBeginsVertically(a,u,g){if(this._valid!==void 0)return this._valid;const v=a.mag()>=2,x=u.mag()>=2;if(!v&&!x)return;if(!v||!x)return this._firstMove==null&&(this._firstMove=g),g-this._firstMove<100&&void 0;const B=a.y>0==u.y>0;return Zg(a)&&Zg(u)&&B}}const Bb={panStep:100,bearingStep:15,pitchStep:10};class Sb{constructor(){const a=Bb;this._panStep=a.panStep,this._bearingStep=a.bearingStep,this._pitchStep=a.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(a){if(a.altKey||a.ctrlKey||a.metaKey)return;let u=0,g=0,v=0,x=0,B=0;switch(a.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:a.shiftKey?g=-1:(a.preventDefault(),x=-1);break;case 39:a.shiftKey?g=1:(a.preventDefault(),x=1);break;case 38:a.shiftKey?v=1:(a.preventDefault(),B=-1);break;case 40:a.shiftKey?v=-1:(a.preventDefault(),B=1);break;default:return}return this._rotationDisabled&&(g=0,v=0),{cameraAnimation:k=>{const z=k.getZoom();k.easeTo({duration:300,easeId:"keyboardHandler",easing:Tb,zoom:u?Math.round(z)+u*(a.shiftKey?2:1):z,bearing:k.getBearing()+g*this._bearingStep,pitch:k.getPitch()+v*this._pitchStep,offset:[-x*this._panStep,-B*this._panStep],center:k.getCenter()},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Tb(m){return m*(2-m)}const u0=4.000244140625,EB=1/450;class BB{constructor(a,u){this._map=a,this._el=a.getCanvasContainer(),this._handler=u,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=EB,i.aJ(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(a){this._defaultZoomRate=a}setWheelZoomRate(a){this._wheelZoomRate=a}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(a){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!a&&a.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(a){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(a.ctrlKey||a.metaKey||this.isZooming()||i.dq()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let u=a.deltaMode===WheelEvent.DOM_DELTA_LINE?40*a.deltaY:a.deltaY;const g=i.q.now(),v=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,u!==0&&u%u0==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=u,this._timeout=window.setTimeout(this._onTimeout,40,a)):this._type||(this._type=Math.abs(v*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),a.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=a,this._delta-=u,this._active||this._start(a)),a.preventDefault()}_onTimeout(a){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(a)}_start(a){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=ue(this._el,a);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:u,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const a=this._map.transform;this._type==="wheel"&&a.projection.wrap&&(a._center.lng>=180||a._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const u=()=>a._terrainEnabled()&&this._aroundCoord?a.computeZoomRelativeTo(this._aroundCoord):a.zoom;if(this._delta!==0){const Q=this._type==="wheel"&&Math.abs(this._delta)>u0?this._wheelZoomRate:this._defaultZoomRate;let j=2/(1+Math.exp(-Math.abs(this._delta*Q)));this._delta<0&&j!==0&&(j=1/j);const W=u(),J=Math.pow(2,W),re=typeof this._targetZoom=="number"?a.zoomScale(this._targetZoom):J;this._targetZoom=Math.min(a.maxZoom,Math.max(a.minZoom,a.scaleZoom(re*j))),this._type==="wheel"&&(this._startZoom=W,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}const g=typeof this._targetZoom=="number"?this._targetZoom:u(),v=this._startZoom,x=this._easing;let B,k=!1;if(this._type==="wheel"&&v&&x){const Q=Math.min((i.q.now()-this._lastWheelEventTime)/200,1),j=x(Q);B=i.aa(v,g,j),Q<1?this._frameId||(this._frameId=!0):k=!0}else B=g,k=!0;this._active=!0,k&&(this._active=!1,this._finishTimeout=window.setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200));let z=B-u();return z*this._lastDelta<0&&(z=0),{noInertia:!0,needsRenderFrame:!k,zoomDelta:z,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(a){let u=i.dr;if(this._prevEase){const g=this._prevEase,v=(i.q.now()-g.start)/g.duration,x=g.easing(v+.01)-g.easing(v),B=.27/Math.sqrt(x*x+1e-4)*.01,k=Math.sqrt(.0729-B*B);u=i.dp(B,k,.25,1)}return this._prevEase={start:i.q.now(),duration:a,easing:u},u}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=Z("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.removeAttribute("role")},200)}}class hs{constructor(a,u){this._clickZoom=a,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ib{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(a,u){return a.preventDefault(),{cameraAnimation:g=>{g.easeTo({duration:300,zoom:g.getZoom()+(a.shiftKey?-1:1),around:g.unproject(u)},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class SB{constructor(){this._tap=new hh({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(a,u,g){this._swipePoint||(this._tapTime&&a.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?g.length>0&&(this._swipePoint=u[0],this._swipeTouch=g[0].identifier):this._tap.touchstart(a,u,g))}touchmove(a,u,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;const v=u[0],x=v.y-this._swipePoint.y;return this._swipePoint=v,a.preventDefault(),this._active=!0,{zoomDelta:x/128}}}else this._tap.touchmove(a,u,g)}touchend(a,u,g){this._tapTime?this._swipePoint&&g.length===0&&this.reset():this._tap.touchend(a,u,g)&&(this._tapTime=a.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class TB{constructor(a,u,g){this._el=a,this._mousePan=u,this._touchPan=g}enable(a){this._inertiaOptions=a||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Bm{constructor(a,u,g){this._pitchWithRotate=a.pitchWithRotate,this._mouseRotate=u,this._mousePitch=g}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Pb{constructor(a,u,g,v){this._el=a,this._touchZoom=u,this._touchRotate=g,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(a){this._touchZoom.enable(a),this._rotationDisabled||this._touchRotate.enable(a),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const GA=m=>m.zoom||m.drag||m.pitch||m.rotate;class Yg extends i.x{}class Xh{constructor(){this.constants=[1,1,.01],this.radius=0}setup(a,u){const g=i.a6.vec3.sub([],u,a);this.radius=i.a6.vec3.length(g[2]<0?i.a6.vec3.div([],g,this.constants):[g[0],g[1],0])}projectRay(a){i.a6.vec3.div(a,a,this.constants),i.a6.vec3.normalize(a,a),i.a6.vec3.mul(a,a,this.constants);const u=i.a6.vec3.scale([],a,this.radius);if(u[2]>0){const g=i.a6.vec3.scale([],[0,0,1],i.a6.vec3.dot(u,[0,0,1])),v=i.a6.vec3.scale([],i.a6.vec3.normalize([],[u[0],u[1],0]),this.radius),x=i.a6.vec3.add([],u,i.a6.vec3.scale([],i.a6.vec3.sub([],i.a6.vec3.add([],v,g),u),2));u[0]=x[0],u[1]=x[1]}return u}}function $f(m){return m.panDelta&&m.panDelta.mag()||m.zoomDelta||m.bearingDelta||m.pitchDelta}class fl{constructor(a,u){this._map=a,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ku(a),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Xh,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(u),i.aJ(["handleEvent","handleWindowEvent"],this);const g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[window,"blur",void 0]];for(const[v,x,B]of this._listeners){const k=v===document?this.handleWindowEvent:this.handleEvent;v.addEventListener(x,k,B)}}destroy(){for(const[a,u,g]of this._listeners){const v=a===document?this.handleWindowEvent:this.handleEvent;a.removeEventListener(u,v,g)}}_addDefaultHandlers(a){const u=this._map,g=u.getCanvasContainer();this._add("mapEvent",new Em(u,a));const v=u.boxZoom=new Ud(u,a);this._add("boxZoom",v);const x=new Fc,B=new Ib;u.doubleClickZoom=new hs(B,x),this._add("tapZoom",x),this._add("clickZoom",B);const k=new SB;this._add("tapDragZoom",k);const z=u.touchPitch=new Eb(u);this._add("touchPitch",z);const Q=new Nd(a),j=new jf(a);u.dragRotate=new Bm(a,Q,j),this._add("mouseRotate",Q,["mousePitch"]),this._add("mousePitch",j,["mouseRotate"]);const W=new qh(a),J=new Xg(u,a);u.dragPan=new TB(g,W,J),this._add("mousePan",W),this._add("touchPan",J,["touchZoom","touchRotate"]);const re=new Cb,de=new xb;u.touchZoomRotate=new Pb(g,de,re,k),this._add("touchRotate",re,["touchPan","touchZoom"]),this._add("touchZoom",de,["touchPan","touchRotate"]),this._add("blockableMapEvent",new $A(u));const me=u.scrollZoom=new BB(u,this);this._add("scrollZoom",me,["mousePan"]);const _e=u.keyboard=new Sb;this._add("keyboard",_e);for(const xe of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])a.interactive&&a[xe]&&u[xe].enable(a[xe])}_add(a,u,g){this._handlers.push({handlerName:a,handler:u,allowed:g}),this._handlersById[a]=u}stop(a){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},a),this._changes=[],this._originalZoom=void 0}}isActive(){for(const{handler:a}of this._handlers)if(a.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!GA(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(a,u,g){for(const v in a)if(v!==g&&(!u||u.indexOf(v)<0))return!0;return!1}handleWindowEvent(a){this.handleEvent(a,`${a.type}Window`)}_getMapTouches(a){const u=[];for(const g of a)this._el.contains(g.target)&&u.push(g);return u}handleEvent(a,u){this._updatingCamera=!0;const g=a.type==="renderFrame",v=g?void 0:a,x={needsRenderFrame:!1},B={},k={},z=a.touches?this._getMapTouches(a.touches):void 0,Q=z?ye(this._el,z):g?void 0:ue(this._el,a);for(const{handlerName:J,handler:re,allowed:de}of this._handlers){if(!re.isEnabled())continue;let me;this._blockedByActive(k,de,J)?re.reset():re[u||a.type]&&(me=re[u||a.type](a,Q,z),this.mergeHandlerResult(x,B,me,J,v),me&&me.needsRenderFrame&&this._triggerRenderFrame()),(me||re.isActive())&&(k[J]=re)}const j={};for(const J in this._previousActiveHandlers)k[J]||(j[J]=v);this._previousActiveHandlers=k,(Object.keys(j).length||$f(x))&&(this._changes.push([x,B,j]),this._triggerRenderFrame()),(Object.keys(k).length||$f(x))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:W}=x;W&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],W(this._map))}mergeHandlerResult(a,u,g,v,x){if(!g)return;i.l(a,g);const B={handlerName:v,originalEvent:g.originalEvent||x};g.zoomDelta!==void 0&&(u.zoom=B),g.panDelta!==void 0&&(u.drag=B),g.pitchDelta!==void 0&&(u.pitch=B),g.bearingDelta!==void 0&&(u.rotate=B)}_applyChanges(){const a={},u={},g={};for(const[v,x,B]of this._changes)v.panDelta&&(a.panDelta=(a.panDelta||new i.P(0,0))._add(v.panDelta)),v.zoomDelta&&(a.zoomDelta=(a.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(a.bearingDelta=(a.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(a.pitchDelta=(a.pitchDelta||0)+v.pitchDelta),v.around!==void 0&&(a.around=v.around),v.aroundCoord!==void 0&&(a.aroundCoord=v.aroundCoord),v.pinchAround!==void 0&&(a.pinchAround=v.pinchAround),v.noInertia&&(a.noInertia=v.noInertia),i.l(u,x),i.l(g,B);this._updateMapTransform(a,u,g),this._changes=[]}_updateMapTransform(a,u,g){const v=this._map,x=v.transform,B=ze=>[ze.x,ze.y,ze.z];if((ze=>{const Qe=this._eventsInProgress.drag;return Qe&&!this._handlersById[Qe.handlerName].isActive()})()&&!$f(a)){const ze=x.zoom;x.cameraElevationReference="sea",this._originalZoom!=null&&x._orthographicProjectionAtLowPitch&&x.projection.name!=="globe"&&x.pitch===0?(x.cameraElevationReference="ground",x.zoom=this._originalZoom):(x.recenterOnTerrain(),x.cameraElevationReference="ground"),ze!==x.zoom&&this._map._update(!0)}if(x._isCameraConstrained&&v._stop(!0),!$f(a))return void this._fireEvents(u,g,!0);let{panDelta:k,zoomDelta:z,bearingDelta:Q,pitchDelta:j,around:W,aroundCoord:J,pinchAround:re}=a;x._isCameraConstrained&&(z>0&&(z=0),x._isCameraConstrained=!1),re!==void 0&&(W=re),(z||(ze=>u[ze]&&!this._eventsInProgress[ze])("drag"))&&W&&(this._dragOrigin=B(x.pointCoordinate3D(W)),this._originalZoom=x.zoom,this._trackingEllipsoid.setup(x._camera.position,this._dragOrigin)),x.cameraElevationReference="sea",v._stop(!0),W=W||v.transform.centerPoint,Q&&(x.bearing+=Q),j&&(x.pitch+=j),x._updateCameraState();const de=[0,0,0];if(k)if(x.projection.name==="mercator"){const ze=this._trackingEllipsoid.projectRay(x.screenPointToMercatorRay(W).dir),Qe=this._trackingEllipsoid.projectRay(x.screenPointToMercatorRay(W.sub(k)).dir);de[0]=Qe[0]-ze[0],de[1]=Qe[1]-ze[1]}else{const ze=x.pointCoordinate(W);if(x.projection.name==="globe"){k=k.rotate(-x.angle);const Qe=x._pixelsPerMercatorPixel/x.worldSize;de[0]=-k.x*i.ds(i.aM(ze.y))*Qe,de[1]=-k.y*i.ds(x.center.lat)*Qe}else{const Qe=x.pointCoordinate(W.sub(k));ze&&Qe&&(de[0]=Qe.x-ze.x,de[1]=Qe.y-ze.y)}}const me=x.zoom,_e=[0,0,0];if(z){const ze=B(J||x.pointCoordinate3D(W)),Qe={dir:i.a6.vec3.normalize([],i.a6.vec3.sub([],ze,x._camera.position))};if(Qe.dir[2]<0){const Ue=x.zoomDeltaToMovement(ze,z);i.a6.vec3.scale(_e,Qe.dir,Ue)}}const xe=i.a6.vec3.add(de,de,_e);x._translateCameraConstrained(xe),z&&Math.abs(x.zoom-me)>1e-4&&x.recenterOnTerrain(),x.cameraElevationReference="ground",this._map._update(),a.noInertia||this._inertia.record(a),this._fireEvents(u,g,!0)}_fireEvents(a,u,g){const v=GA(this._eventsInProgress),x=GA(a),B={};for(const j in a){const{originalEvent:W}=a[j];this._eventsInProgress[j]||(B[`${j}start`]=W),this._eventsInProgress[j]=a[j]}!v&&x&&this._fireEvent("movestart",x.originalEvent);for(const j in B)this._fireEvent(j,B[j]);x&&this._fireEvent("move",x.originalEvent);for(const j in a){const{originalEvent:W}=a[j];this._fireEvent(j,W)}const k={};let z;for(const j in this._eventsInProgress){const{handlerName:W,originalEvent:J}=this._eventsInProgress[j];this._handlersById[W].isActive()||(delete this._eventsInProgress[j],z=u[W]||J,k[`${j}end`]=z)}for(const j in k)this._fireEvent(j,k[j]);const Q=GA(this._eventsInProgress);if(g&&(v||x)&&!Q){this._updatingCamera=!0;const j=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),W=J=>J!==0&&-this._bearingSnap<J&&J<this._bearingSnap;j?(W(j.bearing||this._map.getBearing())&&(j.bearing=0),this._map.easeTo(j,{originalEvent:z})):(this._map.fire(new i.x("moveend",{originalEvent:z})),W(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(a,u){this._map.fire(new i.x(a,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(a=>{this._frameId=void 0,this.handleEvent(new Yg("renderFrame",{timeStamp:a})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const dh="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class h0 extends i.E{constructor(a,u){super(),this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=u.bearingSnap,this._respectPrefersReducedMotion=u.respectPrefersReducedMotion!==!1,i.aJ(["_renderFrameCallback"],this)}getCenter(){return new i.bK(this.transform.center.lng,this.transform.center.lat)}setCenter(a,u){return this.jumpTo({center:a},u)}panBy(a,u,g){return a=i.P.convert(a).mult(-1),this.panTo(this.transform.center,i.l({offset:a},u),g)}panTo(a,u,g){return this.easeTo(i.l({center:a},u),g)}getZoom(){return this.transform.zoom}setZoom(a,u){return this.jumpTo({zoom:a},u),this}zoomTo(a,u,g){return this.easeTo(i.l({zoom:a},u),g)}zoomIn(a,u){return this.zoomTo(this.getZoom()+1,a,u),this}zoomOut(a,u){return this.zoomTo(this.getZoom()-1,a,u),this}getBearing(){return this.transform.bearing}setBearing(a,u){return this.jumpTo({bearing:a},u),this}getPadding(){return this.transform.padding}setPadding(a,u){return this.jumpTo({padding:a},u),this}rotateTo(a,u,g){return this.easeTo(i.l({bearing:a},u),g)}resetNorth(a,u){return this.rotateTo(0,i.l({duration:1e3},a),u),this}resetNorthPitch(a,u){return this.easeTo(i.l({bearing:0,pitch:0,duration:1e3},a),u),this}snapToNorth(a,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,u):this}getPitch(){return this.transform.pitch}setPitch(a,u){return this.jumpTo({pitch:a},u),this}cameraForBounds(a,u){a=i.as.convert(a);const g=u&&u.bearing||0,v=u&&u.pitch||0,x=a.getNorthWest(),B=a.getSouthEast();return this._cameraForBounds(this.transform,x,B,g,v,u)}_extendPadding(a){const u={top:0,right:0,bottom:0,left:0};return a==null?i.l({},u,this.transform.padding):typeof a=="number"?{top:a,bottom:a,right:a,left:a}:i.l({},u,a)}_extendCameraOptions(a){return(a=i.l({offset:[0,0],maxZoom:this.transform.maxZoom},a)).padding=this._extendPadding(a.padding),a}_minimumAABBFrustumDistance(a,u){const g=u.max[0]-u.min[0],v=u.max[1]-u.min[1];return g/v>a.aspect?g/(2*Math.tan(.5*a.fovX)*a.aspect):v/(2*Math.tan(.5*a.fovY)*a.aspect)}_cameraForBoundsOnGlobe(a,u,g,v,x,B){const k=a.clone(),z=this._extendCameraOptions(B);k.bearing=v,k.pitch=x;const Q=i.bK.convert(u),j=i.bK.convert(g),W=.5*(Q.lat+j.lat),J=.5*(Q.lng+j.lng),re=i.dt(W,J),de=i.a6.vec3.normalize([],re),me=i.a6.vec3.normalize([],i.a6.vec3.cross([],de,[0,1,0])),_e=i.a6.vec3.cross([],me,de),xe=[me[0],me[1],me[2],0,_e[0],_e[1],_e[2],0,de[0],de[1],de[2],0,0,0,0,1],ze=[re,i.dt(Q.lat,Q.lng),i.dt(j.lat,Q.lng),i.dt(j.lat,j.lng),i.dt(Q.lat,j.lng),i.dt(W,Q.lng),i.dt(W,j.lng),i.dt(Q.lat,J),i.dt(j.lat,J)];let Qe=i.c9.fromPoints(ze.map(An=>[i.a6.vec3.dot(me,An),i.a6.vec3.dot(_e,An),i.a6.vec3.dot(de,An)]));const Ue=i.a6.vec3.transformMat4([],Qe.center,xe);i.a6.vec3.squaredLength(Ue)===0&&i.a6.vec3.set(Ue,0,0,1),i.a6.vec3.normalize(Ue,Ue),i.a6.vec3.scale(Ue,Ue,i.aq),k.center=i.du(Ue);const Xe=k.getWorldToCameraMatrix(),qe=i.a6.mat4.invert(new Float64Array(16),Xe);Qe=i.c9.applyTransform(Qe,i.a6.mat4.multiply([],Xe,xe));const ut=this._extendAABB(Qe,k,z,v);if(!ut)return void i.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");Qe=ut,i.a6.vec3.transformMat4(Ue,Ue,Xe);const it=.5*(Qe.max[2]-Qe.min[2]),ht=this._minimumAABBFrustumDistance(k,Qe),xt=i.a6.vec3.scale([],[0,0,1],it),pt=i.a6.vec3.add(xt,Ue,xt),At=ht+(k.pitch===0?0:i.a6.vec3.distance(Ue,pt)),Rt=k.globeCenterInViewSpace,cn=i.a6.vec3.sub([],Ue,[Rt[0],Rt[1],Rt[2]]);i.a6.vec3.normalize(cn,cn),i.a6.vec3.scale(cn,cn,At);const wn=i.a6.vec3.add([],Ue,cn);i.a6.vec3.transformMat4(wn,wn,qe);const ln=i.dw/i.aq,Ln=i.a6.vec3.length(wn),kt=i.bD(Math.max(Ln*ln-i.dw,Number.EPSILON),0),mn=Math.min(k.zoomFromMercatorZAdjusted(kt),z.maxZoom);return mn>.5*(i.c2+i.bU)?(k.setProjection({name:"mercator"}),k.zoom=mn,this._cameraForBounds(k,u,g,v,x,B)):{center:k.center,zoom:mn,bearing:v,pitch:x}}_extendAABB(a,u,g,v){const x=.5*((g.padding.left||0)+(g.padding.right||0)),B=.5*((g.padding.top||0)+(g.padding.bottom||0)),k=B,z=x,Q=x,j=B,W=u.width-(z+Q),J=u.height-(k+j),re=i.a6.vec3.sub([],a.max,a.min),de=Math.min(W/re[0],J/re[1]),me=Math.min(u.scaleZoom(u.scale*de),g.maxZoom);if(isNaN(me))return null;const _e=u.scale/u.zoomScale(me),xe=new i.c9([a.min[0]-z*_e,a.min[1]-j*_e,a.min[2]],[a.max[0]+Q*_e,a.max[1]+k*_e,a.max[2]]),ze=(typeof g.offset.x=="number"&&typeof g.offset.y=="number"?new i.P(g.offset.x,g.offset.y):i.P.convert(g.offset)).rotate(-i.bB(v));return xe.center[0]-=ze.x*_e,xe.center[1]+=ze.y*_e,xe}queryTerrainElevation(a,u){const g=this.transform.elevation;return g?(u=i.l({},{exaggerated:!0},u),g.getAtPoint(i.a5.fromLngLat(a),null,u.exaggerated)):null}_cameraForBounds(a,u,g,v,x,B){if(a.projection.name==="globe")return this._cameraForBoundsOnGlobe(a,u,g,v,x,B);const k=a.clone(),z=this._extendCameraOptions(B);k.bearing=v,k.pitch=x;const Q=i.bK.convert(u),j=i.bK.convert(g),W=new i.bK(Q.lng,j.lat),J=new i.bK(j.lng,Q.lat),re=k.project(Q),de=k.project(j),me=this.queryTerrainElevation(Q),_e=this.queryTerrainElevation(j),xe=this.queryTerrainElevation(W),ze=this.queryTerrainElevation(J),Qe=[[re.x,re.y,Math.min(me||0,_e||0,xe||0,ze||0)],[de.x,de.y,Math.max(me||0,_e||0,xe||0,ze||0)]];let Ue=i.c9.fromPoints(Qe);const Xe=k.getWorldToCameraMatrix(),qe=i.a6.mat4.invert(new Float64Array(16),Xe);Ue=i.c9.applyTransform(Ue,Xe);const ut=this._extendAABB(Ue,k,z,v);if(!ut)return void i.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");Ue=ut;const it=.5*i.a6.vec3.sub([],Ue.max,Ue.min)[2],ht=this._minimumAABBFrustumDistance(k,Ue),xt=[0,0,1,0];i.a6.vec4.transformMat4(xt,xt,Xe),i.a6.vec4.normalize(xt,xt);const pt=i.a6.vec3.scale([],xt,ht+it),At=i.a6.vec3.add([],Ue.center,pt);i.a6.vec3.transformMat4(Ue.center,Ue.center,qe),i.a6.vec3.transformMat4(At,At,qe);const Rt=k.unproject(new i.P(Ue.center[0],Ue.center[1])),cn=i.dv(k.projection,Rt),wn=Math.pow(2,cn),ln=Math.min(k._zoomFromMercatorZ(At[2]*k.pixelsPerMeter*wn/k.worldSize),z.maxZoom);return k.mercatorFromTransition&&ln<.5*(i.c2+i.bU)?(k.setProjection({name:"globe"}),k.zoom=ln,this._cameraForBounds(k,u,g,v,x,B)):{center:Rt,zoom:ln,bearing:v,pitch:x}}fitBounds(a,u,g){const v=this.cameraForBounds(a,u);return this._fitInternal(v,u,g)}fitScreenCoordinates(a,u,g,v,x){const B=i.P.convert(a),k=i.P.convert(u),z=new i.P(Math.min(B.x,k.x),Math.min(B.y,k.y)),Q=new i.P(Math.max(B.x,k.x),Math.max(B.y,k.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(B,k))return this;const j=this.transform.pointLocation3D(z),W=this.transform.pointLocation3D(Q),J=this.transform.pointLocation3D(new i.P(z.x,Q.y)),re=this.transform.pointLocation3D(new i.P(Q.x,z.y)),de=[Math.min(j.lng,W.lng,J.lng,re.lng),Math.min(j.lat,W.lat,J.lat,re.lat)],me=[Math.max(j.lng,W.lng,J.lng,re.lng),Math.max(j.lat,W.lat,J.lat,re.lat)],_e=v&&v.pitch?v.pitch:this.getPitch(),xe=this._cameraForBounds(this.transform,de,me,g,_e,v);return this._fitInternal(xe,v,x)}_fitInternal(a,u,g){return a?(u=i.l(a,u)).linear?this.easeTo(u,g):this.flyTo(u,g):this}jumpTo(a,u){this.stop();const g=a.preloadOnly?this.transform.clone():this.transform;let v=!1,x=!1,B=!1;"zoom"in a&&g.zoom!==+a.zoom&&(v=!0,g.zoom=+a.zoom),a.center!==void 0&&(g.center=i.bK.convert(a.center)),"bearing"in a&&g.bearing!==+a.bearing&&(x=!0,g.bearing=+a.bearing),"pitch"in a&&g.pitch!==+a.pitch&&(B=!0,g.pitch=+a.pitch);const k=typeof a.padding=="number"?this._extendPadding(a.padding):a.padding;if(a.padding!=null&&!g.isPaddingEqual(k))if(a.retainPadding===!1){const z=g.clone();z.padding=k,g.setLocationAtPoint(g.center,z.centerPoint)}else g.padding=k;return a.preloadOnly?(this._preloadTiles(g),this):(this.fire(new i.x("movestart",u)).fire(new i.x("move",u)),v&&this.fire(new i.x("zoomstart",u)).fire(new i.x("zoom",u)).fire(new i.x("zoomend",u)),x&&this.fire(new i.x("rotatestart",u)).fire(new i.x("rotate",u)).fire(new i.x("rotateend",u)),B&&this.fire(new i.x("pitchstart",u)).fire(new i.x("pitch",u)).fire(new i.x("pitchend",u)),this.fire(new i.x("moveend",u)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||i.w(dh),this.transform.getFreeCameraOptions()}setFreeCameraOptions(a,u){const g=this.transform;if(!g.projection.supportsFreeCamera)return i.w(dh),this;this.stop();const v=g.zoom,x=g.pitch,B=g.bearing;g.setFreeCameraOptions(a);const k=v!==g.zoom,z=x!==g.pitch,Q=B!==g.bearing;return this.fire(new i.x("movestart",u)).fire(new i.x("move",u)),k&&this.fire(new i.x("zoomstart",u)).fire(new i.x("zoom",u)).fire(new i.x("zoomend",u)),Q&&this.fire(new i.x("rotatestart",u)).fire(new i.x("rotate",u)).fire(new i.x("rotateend",u)),z&&this.fire(new i.x("pitchstart",u)).fire(new i.x("pitch",u)).fire(new i.x("pitchend",u)),this.fire(new i.x("moveend",u)),this}easeTo(a,u){this._stop(!1,a.easeId),((a=i.l({offset:[0,0],duration:500,easing:i.dr},a)).animate===!1||this._prefersReducedMotion(a))&&(a.duration=0);const g=this.transform,v=this.getZoom(),x=this.getBearing(),B=this.getPitch(),k=this.getPadding(),z="zoom"in a?+a.zoom:v,Q="bearing"in a?this._normalizeBearing(a.bearing,x):x,j="pitch"in a?+a.pitch:B,W=this._extendPadding(a.padding),J=i.P.convert(a.offset);let re,de,me;if(g.projection.name==="globe"){const xt=i.a5.fromLngLat(g.center),pt=J.rotate(-g.angle);xt.x+=pt.x/g.worldSize,xt.y+=pt.y/g.worldSize;const At=xt.toLngLat(),Rt=i.bK.convert(a.center||At);this._normalizeCenter(Rt),re=g.centerPoint.add(pt),de=new i.P(xt.x,xt.y).mult(g.worldSize),me=new i.P(i.am(Rt.lng),i.at(Rt.lat)).mult(g.worldSize).sub(de)}else{re=g.centerPoint.add(J);const xt=g.pointLocation(re),pt=i.bK.convert(a.center||xt);this._normalizeCenter(pt),de=g.project(xt),me=g.project(pt).sub(de)}const _e=g.zoomScale(z-v);let xe,ze;a.around&&(xe=i.bK.convert(a.around),ze=g.locationPoint(xe));const Qe=this._zooming||z!==v,Ue=this._rotating||x!==Q,Xe=this._pitching||j!==B,qe=!g.isPaddingEqual(W),ut=a.retainPadding===!1?g.clone():g,it=xt=>pt=>{if(Qe&&(xt.zoom=i.aa(v,z,pt)),Ue&&(xt.bearing=i.aa(x,Q,pt)),Xe&&(xt.pitch=i.aa(B,j,pt)),qe&&(ut.interpolatePadding(k,W,pt),re=ut.centerPoint.add(J)),xe)xt.setLocationAtPoint(xe,ze);else{const At=xt.zoomScale(xt.zoom-v),Rt=z>v?Math.min(2,_e):Math.max(.5,_e),cn=Math.pow(Rt,1-pt),wn=xt.unproject(de.add(me.mult(pt*cn)).mult(At));xt.setLocationAtPoint(xt.renderWorldCopies?wn.wrap():wn,re)}return a.preloadOnly||this._fireMoveEvents(u),xt};if(a.preloadOnly){const xt=this._emulate(it,a.duration,g);return this._preloadTiles(xt),this}const ht={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=Qe,this._rotating=Ue,this._pitching=Xe,this._padding=qe,this._easeId=a.easeId,this._prepareEase(u,a.noMoveStart,ht),this._ease(it(g),xt=>{g.cameraElevationReference==="sea"&&g.recenterOnTerrain(),this._afterEase(u,xt)},a),this}_prepareEase(a,u,g={}){this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&this.transform.pitch===0&&this.transform.projection.name!=="globe"&&(this.transform.cameraElevationReference="ground"),u||g.moving||this.fire(new i.x("movestart",a)),this._zooming&&!g.zooming&&this.fire(new i.x("zoomstart",a)),this._rotating&&!g.rotating&&this.fire(new i.x("rotatestart",a)),this._pitching&&!g.pitching&&this.fire(new i.x("pitchstart",a))}_fireMoveEvents(a){this.fire(new i.x("move",a)),this._zooming&&this.fire(new i.x("zoom",a)),this._rotating&&this.fire(new i.x("rotate",a)),this._pitching&&this.fire(new i.x("pitch",a))}_afterEase(a,u){if(this._easeId&&u&&this._easeId===u)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const g=this._zooming,v=this._rotating,x=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,g&&this.fire(new i.x("zoomend",a)),v&&this.fire(new i.x("rotateend",a)),x&&this.fire(new i.x("pitchend",a)),this.fire(new i.x("moveend",a))}flyTo(a,u){if(this._prefersReducedMotion(a)){const An=i.ar(a,["center","zoom","bearing","pitch","around","padding","retainPadding"]);return this.jumpTo(An,u)}this.stop(),a=i.l({offset:[0,0],speed:1.2,curve:1.42,easing:i.dr},a);const g=this.transform,v=this.getZoom(),x=this.getBearing(),B=this.getPitch(),k=this.getPadding(),z="zoom"in a?i.ap(+a.zoom,g.minZoom,g.maxZoom):v,Q="bearing"in a?this._normalizeBearing(a.bearing,x):x,j="pitch"in a?+a.pitch:B,W=this._extendPadding(a.padding),J=g.zoomScale(z-v),re=i.P.convert(a.offset);let de=g.centerPoint.add(re);const me=g.pointLocation(de),_e=i.bK.convert(a.center||me);this._normalizeCenter(_e);const xe=g.project(me),ze=g.project(_e).sub(xe);let Qe=a.curve;const Ue=Math.max(g.width,g.height),Xe=Ue/J,qe=ze.mag();if("minZoom"in a){const An=i.ap(Math.min(a.minZoom,v,z),g.minZoom,g.maxZoom),Rn=Ue/g.zoomScale(An-v);Qe=Math.sqrt(Rn/qe*2)}const ut=Qe*Qe;function it(An){const Rn=(Xe*Xe-Ue*Ue+(An?-1:1)*ut*ut*qe*qe)/(2*(An?Xe:Ue)*ut*qe);return Math.log(Math.sqrt(Rn*Rn+1)-Rn)}function ht(An){return(Math.exp(An)-Math.exp(-An))/2}function xt(An){return(Math.exp(An)+Math.exp(-An))/2}const pt=it(0);let At=function(An){return xt(pt)/xt(pt+Qe*An)},Rt=function(An){return Ue*((xt(pt)*(ht(Rn=pt+Qe*An)/xt(Rn))-ht(pt))/ut)/qe;var Rn},cn=(it(1)-pt)/Qe;if(Math.abs(qe)<1e-6||!isFinite(cn)){if(Math.abs(Ue-Xe)<1e-6)return this.easeTo(a,u);const An=Xe<Ue?-1:1;cn=Math.abs(Math.log(Xe/Ue))/Qe,Rt=function(){return 0},At=function(Rn){return Math.exp(An*Qe*Rn)}}a.duration="duration"in a?+a.duration:1e3*cn/("screenSpeed"in a?+a.screenSpeed/Qe:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0);const wn=x!==Q,ln=j!==B,Ln=!g.isPaddingEqual(W),kt=a.retainPadding===!1?g.clone():g,mn=An=>Rn=>{const Mn=Rn*cn,bn=1/At(Mn);An.zoom=Rn===1?z:v+An.scaleZoom(bn),wn&&(An.bearing=i.aa(x,Q,Rn)),ln&&(An.pitch=i.aa(B,j,Rn)),Ln&&(kt.interpolatePadding(k,W,Rn),de=kt.centerPoint.add(re));const Cn=Rn===1?_e:An.unproject(xe.add(ze.mult(Rt(Mn))).mult(bn));return An.setLocationAtPoint(An.renderWorldCopies?Cn.wrap():Cn,de),An._updateCameraOnTerrain(),a.preloadOnly||this._fireMoveEvents(u),An};if(a.preloadOnly){const An=this._emulate(mn,a.duration,g);return this._preloadTiles(An),this}return this._zooming=!0,this._rotating=wn,this._pitching=ln,this._padding=Ln,this._prepareEase(u,!1),this._ease(mn(g),()=>this._afterEase(u),a),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_requestRenderFrame(a){}_cancelRenderFrame(a){}_stop(a,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const g=this._onEaseEnd;this._onEaseEnd=void 0,g.call(this,u)}if(!a){const g=this.handlers;g&&g.stop(!1)}return this}_ease(a,u,g){g.animate===!1||g.duration===0?(a(1),u()):(this._easeStart=i.q.now(),this._easeOptions=g,this._onEaseFrame=a,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const a=Math.min((i.q.now()-this._easeStart)/this._easeOptions.duration,1),u=this._onEaseFrame;u&&u(this._easeOptions.easing(a)),a<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(a,u){a=i.bA(a,-180,180);const g=Math.abs(a-u);return Math.abs(a-360-u)<g&&(a-=360),Math.abs(a+360-u)<g&&(a+=360),a}_normalizeCenter(a){const u=this.transform;if(u.maxBounds||u.projection.name!=="globe"&&!u.renderWorldCopies)return;const g=a.lng-u.center.lng;a.lng+=g>180?-360:g<-180?360:0}_prefersReducedMotion(a){return this._respectPrefersReducedMotion&&i.q.prefersReducedMotion&&!(a&&a.essential)}_emulate(a,u,g){const v=Math.ceil(15*u/1e3),x=[],B=a(g.clone());for(let k=0;k<=v;k++){const z=B(k/v);x.push(z.clone())}return x}_preloadTiles(a,u){}}class Jg{constructor(a={}){this.options=a,i.aJ(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(a){const u=this.options&&this.options.compact,g=a._getUIString("AttributionControl.ToggleAttribution");this._map=a,this._container=Z("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=Z("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._compactButton.setAttribute("aria-label",g);const v=Z("span","mapboxgl-ctrl-icon",this._compactButton);return v.setAttribute("aria-hidden","true"),v.setAttribute("title",g),this._innerContainer=Z("div","mapboxgl-ctrl-attrib-inner",this._container),u&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),u===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let a=this._editLink;a||(a=this._editLink=this._container.querySelector(".mapbox-improve-map"));const u=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||i.e.ACCESS_TOKEN}];if(a){const g=u.reduce((v,x,B)=>(x.value&&(v+=`${x.key}=${x.value}${B<u.length-1?"&":""}`),v),"?");a.href=`${i.e.FEEDBACK_URL}/${g}#${Ru(this._map,!0)}`,a.rel="noopener nofollow"}}_updateData(a){!a||a.sourceDataType!=="metadata"&&a.sourceDataType!=="visibility"&&a.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let a=[];if(this._map.style.stylesheet){const v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}const u=this._map.style._mergedSourceCaches;for(const v in u){const x=u[v];if(x.used){const B=x.getSource();B.attribution&&a.indexOf(B.attribution)<0&&a.push(B.attribution)}}a.sort((v,x)=>v.length-x.length),a=a.filter((v,x)=>{for(let B=x+1;B<a.length;B++)if(a[B].indexOf(v)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?a=[...this.options.customAttribution,...a]:a.unshift(this.options.customAttribution));const g=a.join(" | ");g!==this._attribHTML&&(this._attribHTML=g,a.length?(this._innerContainer.innerHTML=g,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class d0{constructor(){i.aJ(["_updateLogo","_updateCompact"],this)}onAdd(a){this._map=a,this._container=Z("div","mapboxgl-ctrl");const u=Z("a","mapboxgl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://www.mapbox.com/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(a){a&&a.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const a=this._map.style._sourceCaches;if(Object.entries(a).length===0)return!0;for(const u in a){const g=a[u].getSource();if(g.hasOwnProperty("mapbox_logo")&&!g.mapbox_logo)return!1}return!0}_updateCompact(){const a=this._container.children;if(a.length){const u=a[0];this._map.getCanvasContainer().offsetWidth<250?u.classList.add("mapboxgl-compact"):u.classList.remove("mapboxgl-compact")}}}class Lb{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(a){const u=++this._id;return this._queue.push({callback:a,id:u,cancelled:!1}),u}remove(a){const u=this._currentlyRunning,g=u?this._queue.concat(u):this._queue;for(const v of g)if(v.id===a)return void(v.cancelled=!0)}run(a=0){const u=this._currentlyRunning=this._queue;this._queue=[];for(const g of u)if(!g.cancelled&&(g.callback(a),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}class Sm{constructor(a){this.jumpTo(a)}getValue(a){if(a<=this._startTime)return this._start;if(a>=this._endTime)return this._end;const u=i.cw((a-this._startTime)/(this._endTime-this._startTime));return this._start*(1-u)+this._end*u}isEasing(a){return a>=this._startTime&&a<=this._endTime}jumpTo(a){this._startTime=-1/0,this._endTime=-1/0,this._start=a,this._end=a}easeTo(a,u,g){this._start=this.getValue(u),this._end=a,this._startTime=u,this._endTime=u+g}}const IB={"AttributionControl.ToggleAttribution":"Toggle attribution","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox homepage","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use ⌘ + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"};class PB{registerParameter(){}registerButton(){}registerBinding(){}refreshUI(){}}class f0{constructor(a){this.map=a,this.interactionsByType=new Map,this.typeById=new Map,this.filters=new Map,this.handleType=this.handleType.bind(this)}add(a,u){if(this.typeById.has(a))throw new Error(`Interaction id "${a}" already exists.`);const{type:g,filter:v}=u;if(v){const B=i.M(v,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(B.result==="error")throw new Error(B.value.map(k=>`${k.key}: ${k.message}`).join(", "));this.filters.set(a,B.value)}const x=this.interactionsByType.get(g)||new Map;x.size===0&&(this.map.on(g,this.handleType),this.interactionsByType.set(g,x)),x.set(a,u),this.typeById.set(a,g)}remove(a){const u=this.typeById.get(a);if(!u)return;this.typeById.delete(a),this.filters.delete(a);const g=this.interactionsByType.get(u);g&&(g.delete(a),g.size===0&&this.map.off(u,this.handleType))}handleType(a){const u=a.features||this.map.queryRenderedFeatures(a.point);if(!u)return;const g=this.interactionsByType.get(a.type),v={zoom:0};for(const[x,B]of g){const k=this.filters.get(x),{handler:z,layers:Q}=B;for(const j of u)if((!Q||Q.includes(j.layer.id))&&(!k||k.evaluate(v,j))&&z({id:x,feature:j,interaction:B})!==!1)break}}}const A0={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1,precompilePrograms:!0},Tm={showCompass:!0,showZoom:!0,visualizePitch:!1};class KA{constructor(a,u,g=!1){this._clickTolerance=10,this.element=u,this.mouseRotate=new Nd({clickTolerance:a.dragRotate._mouseRotate._clickTolerance}),this.map=a,g&&(this.mousePitch=new jf({clickTolerance:a.dragRotate._mousePitch._clickTolerance})),i.aJ(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),u.addEventListener("mousedown",this.mousedown),u.addEventListener("touchstart",this.touchstart,{passive:!1}),u.addEventListener("touchmove",this.touchmove),u.addEventListener("touchend",this.touchend),u.addEventListener("touchcancel",this.reset)}down(a,u){this.mouseRotate.mousedown(a,u),this.mousePitch&&this.mousePitch.mousedown(a,u),Se()}move(a,u){const g=this.map,v=this.mouseRotate.mousemoveWindow(a,u),x=v&&v.bearingDelta;if(x&&g.setBearing(g.getBearing()+x),this.mousePitch){const B=this.mousePitch.mousemoveWindow(a,u),k=B&&B.pitchDelta;k&&g.setPitch(g.getPitch()+k)}}off(){const a=this.element;a.removeEventListener("mousedown",this.mousedown),a.removeEventListener("touchstart",this.touchstart,{passive:!1}),a.removeEventListener("touchmove",this.touchmove),a.removeEventListener("touchend",this.touchend),a.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){Ie(),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)}mousedown(a){this.down(i.l({},a,{ctrlKey:!0,preventDefault:()=>a.preventDefault()}),ue(this.element,a)),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)}mousemove(a){this.move(a,ue(this.element,a))}mouseup(a){this.mouseRotate.mouseupWindow(a),this.mousePitch&&this.mousePitch.mouseupWindow(a),this.offTemp()}touchstart(a){a.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=ye(this.element,a.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>a.preventDefault()},this._startPos))}touchmove(a){a.targetTouches.length!==1?this.reset():(this._lastPos=ye(this.element,a.targetTouches)[0],this.move({preventDefault:()=>a.preventDefault()},this._lastPos))}touchend(a){a.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function fh(m,a,u){if(m=new i.bK(m.lng,m.lat),a){const g=new i.bK(m.lng-360,m.lat),v=new i.bK(m.lng+360,m.lat),x=360*Math.ceil(Math.abs(m.lng-u.center.lng)/360),B=u.locationPoint(m).distSqr(a),k=a.x<0||a.y<0||a.x>u.width||a.y>u.height;u.locationPoint(g).distSqr(a)<B&&(k||Math.abs(g.lng-u.center.lng)<x)?m=g:u.locationPoint(v).distSqr(a)<B&&(k||Math.abs(v.lng-u.center.lng)<x)&&(m=v)}for(;Math.abs(m.lng-u.center.lng)>180;){const g=u.locationPoint(m);if(g.x>=0&&g.y>=0&&g.x<=u.width&&g.y<=u.height)break;m.lng>u.center.lng?m.lng-=360:m.lng+=360}return m}const Rc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Ah extends i.E{constructor(a,u){if(super(),(a instanceof HTMLElement||u)&&(a=i.l({element:a},u)),i.aJ(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&a.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=a&&a.occludedOpacity||.2,a&&a.element)this._element=a.element,this._offset=i.P.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=Z("div");const x=41,B=27,k=Y("svg",{display:"block",height:x*this._scale+"px",width:B*this._scale+"px",viewBox:`0 0 ${B} ${x}`},this._element),z=Y("radialGradient",{id:"shadowGradient"},Y("defs",{},k));Y("stop",{offset:"10%","stop-opacity":.4},z),Y("stop",{offset:"100%","stop-opacity":.05},z),Y("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},k),Y("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},k),Y("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},k),Y("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},k),this._offset=i.P.convert(a&&a.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",x=>{x.preventDefault()}),this._element.addEventListener("mousedown",x=>{x.preventDefault()});const g=this._element.classList;for(const x in Rc)g.remove(`mapboxgl-marker-anchor-${x}`);g.add(`mapboxgl-marker-anchor-${this._anchor}`);const v=a&&a.className?a.className.trim().split(/\s+/):[];g.add(...v),this._popup=null}addTo(a){return a===this._map||(this.remove(),this._map=a,a.getCanvasContainer().appendChild(this._element),a.on("move",this._updateMoving),a.on("moveend",this._update),a.on("remove",this._clearFadeTimer),a._addMarker(this),this.setDraggable(this._draggable),this._update(),a.on("click",this._onMapClick)),this}remove(){const a=this._map;return a&&(a.off("click",this._onMapClick),a.off("move",this._updateMoving),a.off("moveend",this._update),a.off("mousedown",this._addDragHandler),a.off("touchstart",this._addDragHandler),a.off("mouseup",this._onUp),a.off("touchend",this._onUp),a.off("mousemove",this._onMove),a.off("touchmove",this._onMove),a.off("remove",this._clearFadeTimer),a._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(a){return this._lngLat=i.bK.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){const v=Math.sqrt(Math.pow(13.5,2)/2);a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(38.1-13.5+v)],"bottom-right":[-v,-1*(38.1-13.5+v)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=a,a._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(a){const u=a.code,g=a.charCode||a.keyCode;u!=="Space"&&u!=="Enter"&&g!==32&&g!==13||this.togglePopup()}_onMapClick(a){const u=a.originalEvent.target,g=this._element;this._popup&&(u===g||g.contains(u))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const a=this._popup;return a?(a.isOpen()?(a.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(a.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const a=this._map,u=this._pos;if(!a||!u)return!1;const g=a.unproject(u),v=a.getFreeCameraOptions();if(!v.position)return!1;const x=v.position.toLngLat();return x.distanceTo(g)<.9*x.distanceTo(this._lngLat)}_evaluateOpacity(){const a=this._map;if(!a)return;const u=this._pos;if(!u||u.x<0||u.x>a.transform.width||u.y<0||u.y>a.transform.height)return void this._clearFadeTimer();const g=a.unproject(u);let v;a._showingGlobe()&&i.dz(a.transform,this._lngLat)?v=0:(v=1-a._queryFogOpacity(g),a.transform._terrainEnabled()&&a.getTerrain()&&this._behindTerrain()&&(v*=this._occludedOpacity)),this._element.style.opacity=`${v}`,this._element.style.pointerEvents=v>0?"auto":"none",this._popup&&this._popup._setOpacity(v),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const a=this._pos;if(!a||!this._map)return;const u=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${a.x}px,${a.y}px)
            ${Rc[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${u.x}px,${u.y}px)
        `}_calculateXYTransform(){const a=this._pos,u=this._map,g=this.getPitchAlignment();if(!u||!a||g!=="map")return"";if(!u._showingGlobe()){const z=u.getPitch();return z?`rotateX(${z}deg)`:""}const v=i.c0(i.dA(u.transform,this._lngLat)),x=a.sub(i.dB(u.transform)),B=Math.abs(x.x)+Math.abs(x.y);if(B===0)return"";const k=v/B;return`rotateX(${-x.y*k}deg) rotateY(${x.x*k}deg)`}_calculateZTransform(){const a=this._pos,u=this._map;if(!u||!a)return"";let g=0;const v=this.getRotationAlignment();if(v==="map")if(u._showingGlobe()){const x=u.project(new i.bK(this._lngLat.lng,this._lngLat.lat+.001)),B=u.project(new i.bK(this._lngLat.lng,this._lngLat.lat-.001)).sub(x);g=i.c0(Math.atan2(B.y,B.x))-90}else g=-u.getBearing();else if(v==="horizon"){const x=i.a7(4,6,u.getZoom()),B=i.dB(u.transform);B.y+=x*u.transform.height;const k=a.sub(B),z=i.c0(Math.atan2(k.y,k.x));g=(z>90?z-270:z+90)*(1-x)}return g+=this._rotation,g?`rotateZ(${g}deg)`:""}_update(a){cancelAnimationFrame(this._updateFrameId);const u=this._map;u&&(u.transform.renderWorldCopies&&(this._lngLat=fh(this._lngLat,this._pos,u.transform)),this._pos=u.project(this._lngLat),a===!0?this._updateFrameId=requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),u._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(u._showingGlobe()||u.getTerrain()||u.getFog())&&!this._fadeTimer&&(this._fadeTimer=window.setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(a){return this._offset=i.P.convert(a),this._update(),this}addClassName(a){return this._element.classList.add(a),this}removeClassName(a){return this._element.classList.remove(a),this}toggleClassName(a){return this._element.classList.toggle(a)}_onMove(a){const u=this._map;if(!u)return;const g=this._pointerdownPos,v=this._positionDelta;if(g&&v){if(!this._isDragging){const x=this._clickTolerance||u._clickTolerance;if(a.point.dist(g)<x)return;this._isDragging=!0}this._pos=a.point.sub(v),this._lngLat=u.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new i.x("dragstart"))),this.fire(new i.x("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const a=this._map;a&&(a.off("mousemove",this._onMove),a.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new i.x("dragend")),this._state="inactive"}_addDragHandler(a){const u=this._map,g=this._pos;u&&g&&this._element.contains(a.originalEvent.target)&&(a.preventDefault(),this._positionDelta=a.point.sub(g),this._pointerdownPos=a.point,this._state="pending",u.on("mousemove",this._onMove),u.on("touchmove",this._onMove),u.once("mouseup",this._onUp),u.once("touchend",this._onUp))}setDraggable(a){this._draggable=!!a;const u=this._map;return u&&(a?(u.on("mousedown",this._addDragHandler),u.on("touchstart",this._addDragHandler)):(u.off("mousedown",this._addDragHandler),u.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(a){return this._rotation=a||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(a){return this._rotationAlignment=a||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(a){return this._pitchAlignment=a||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(a){return this._occludedOpacity=a||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Gf={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Vd={maxWidth:100,unit:"metric"},LB={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},FB={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},RB=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Fb(m=new i.P(0,0),a="bottom"){if(typeof m=="number"){const u=Math.round(Math.sqrt(.5*Math.pow(m,2)));switch(a){case"top":return new i.P(0,m);case"top-left":return new i.P(u,u);case"top-right":return new i.P(-u,u);case"bottom":return new i.P(0,-m);case"bottom-left":return new i.P(u,-u);case"bottom-right":return new i.P(-u,-u);case"left":return new i.P(m,0);case"right":return new i.P(-m,0)}return new i.P(0,0)}return m instanceof i.P||Array.isArray(m)?i.P.convert(m):i.P.convert(m[a]||[0,0])}return{version:b,supported:q.supported,setRTLTextPlugin:i.dC,getRTLTextPluginStatus:i.dD,Map:class extends h0{constructor(m){I.mark(E.create);const a=m;if((m=i.l({},A0,m)).minZoom!=null&&m.maxZoom!=null&&m.minZoom>m.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(m.minPitch!=null&&m.maxPitch!=null&&m.minPitch>m.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(m.minPitch!=null&&m.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(m.maxPitch!=null&&m.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(m.antialias&&i.dx(window)&&(m.antialias=!1,i.w("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Cu(m.minZoom,m.maxZoom,m.minPitch,m.maxPitch,m.renderWorldCopies),m),this._repaint=!!m.repaint,this._interactive=m.interactive,this._minTileCacheSize=m.minTileCacheSize,this._maxTileCacheSize=m.maxTileCacheSize,this._failIfMajorPerformanceCaveat=m.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=m.preserveDrawingBuffer,this._antialias=m.antialias,this._trackResize=m.trackResize,this._bearingSnap=m.bearingSnap,this._refreshExpiredTiles=m.refreshExpiredTiles,this._fadeDuration=m.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=m.crossSourceCollisions,this._collectResourceTiming=m.collectResourceTiming,this._language=this._parseLanguage(m.language),this._worldview=m.worldview,this._renderTaskQueue=new Lb,this._domRenderTaskQueue=new Lb,this._controls=[],this._markers=[],this._popups=[],this._mapId=i.aP(),this._locale=i.l({},IB,m.locale),this._clickTolerance=m.clickTolerance,this._cooperativeGestures=m.cooperativeGestures,this._performanceMetricsCollection=m.performanceMetricsCollection,this._tessellationStep=m.tessellationStep,this._containerWidth=0,this._containerHeight=0,this._showParseStatus=!0,this._precompilePrograms=m.precompilePrograms,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Sm(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._frameId=0,this._requestManager=new Ot(m.transformRequest,m.accessToken,m.testMode),this._silenceAuthErrors=!!m.testMode,this._contextCreateOptions=m.contextCreateOptions?{...m.contextCreateOptions}:{},typeof m.container=="string"){const u=document.getElementById(m.container);if(!u)throw new Error(`Container '${m.container.toString()}' not found.`);this._container=u}else{if(!(m.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=m.container}if(this._container.childNodes.length>0&&i.w("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),m.maxBounds&&this.setMaxBounds(m.maxBounds),i.aJ(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._tp||(this._tp=new PB),this._tp.registerParameter(this,["Debug"],"showOverdrawInspector"),this._tp.registerParameter(this,["Debug"],"showTileBoundaries"),this._tp.registerParameter(this,["Debug"],"showParseStatus"),this._tp.registerParameter(this,["Debug"],"repaint"),this._tp.registerParameter(this,["Debug"],"showTileAABBs"),this._tp.registerParameter(this,["Debug"],"showPadding"),this._tp.registerParameter(this,["Debug"],"showCollisionBoxes",{noSave:!0}),this._tp.registerParameter(this.transform,["Debug"],"freezeTileCoverage",{noSave:!0},()=>{this._update()}),this._tp.registerParameter(this,["Debug","Wireframe"],"showTerrainWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers2DWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers3DWireframe"),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");if(this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this._fullscreenchangeEvent="onfullscreenchange"in document?"fullscreenchange":"webkitfullscreenchange",window.addEventListener("online",this._onWindowOnline,!1),window.addEventListener("resize",this._onWindowResize,!1),window.addEventListener("orientationchange",this._onWindowResize,!1),window.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.addEventListener("visibilitychange",this._onVisibilityChange,!1),this.handlers=new fl(this,m),this._localFontFamily=m.localFontFamily,this._localIdeographFontFamily=m.localIdeographFontFamily,(m.style||!m.testMode)&&this.setStyle(m.style||i.e.DEFAULT_STYLE,{config:m.config,localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),m.projection&&this.setProjection(m.projection),m.hash&&(this._hash=new Fu(typeof m.hash=="string"&&m.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){a.center==null&&a.zoom==null||(this.transform._unmodified=!1),this.jumpTo({center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch});const u=m.bounds;u&&(this.resize(),this.fitBounds(u,i.l({},m.fitBoundsOptions,{duration:0})))}this.resize(),m.attributionControl&&this.addControl(new Jg({customAttribution:m.customAttribution})),this._logoControl=new d0,this.addControl(this._logoControl,m.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this._postStyleLoadEvent()}),this.on("data",u=>{this._update(u.dataType==="style"),this.fire(new i.x(`${u.dataType}data`,u))}),this.on("dataloading",u=>{this.fire(new i.x(`${u.dataType}dataloading`,u))}),this._interactions=new f0(this)}_getMapId(){return this._mapId}addControl(m,a){if(a===void 0&&(a=m.getDefaultPosition?m.getDefaultPosition():"top-right"),!m||!m.onAdd)return this.fire(new i.t(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=m.onAdd(this);this._controls.push(m);const g=this._controlPositions[a];return a.indexOf("bottom")!==-1?g.insertBefore(u,g.firstChild):g.appendChild(u),this}removeControl(m){if(!m||!m.onRemove)return this.fire(new i.t(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const a=this._controls.indexOf(m);return a>-1&&this._controls.splice(a,1),m.onRemove(this),this}hasControl(m){return this._controls.indexOf(m)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(m){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const a=!this._moving;return a&&this.fire(new i.x("movestart",m)).fire(new i.x("move",m)),this.fire(new i.x("resize",m)),a&&this.fire(new i.x("moveend",m)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(m){return this.transform.setMaxBounds(i.as.convert(m)),this._update()}setMinZoom(m){if((m=m??-2)>=-2&&m<=this.transform.maxZoom)return this.transform.minZoom=m,this._update(),this.getZoom()<m?this.setZoom(m):this.fire(new i.x("zoomstart")).fire(new i.x("zoom")).fire(new i.x("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(m){if((m=m??22)>=this.transform.minZoom)return this.transform.maxZoom=m,this._update(),this.getZoom()>m?this.setZoom(m):this.fire(new i.x("zoomstart")).fire(new i.x("zoom")).fire(new i.x("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(m){if((m=m??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(m>=0&&m<=this.transform.maxPitch)return this.transform.minPitch=m,this._update(),this.getPitch()<m?this.setPitch(m):this.fire(new i.x("pitchstart")).fire(new i.x("pitch")).fire(new i.x("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(m){if((m=m??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(m>=this.transform.minPitch)return this.transform.maxPitch=m,this._update(),this.getPitch()>m?this.setPitch(m):this.fire(new i.x("pitchstart")).fire(new i.x("pitch")).fire(new i.x("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(m){return this.transform.renderWorldCopies=m,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(m){return m==="auto"?navigator.language:Array.isArray(m)?m.length===0?void 0:m.map(a=>a==="auto"?navigator.language:a):m}setLanguage(m){const a=this._parseLanguage(m);if(!this.style||a===this._language)return this;this._language=a,this.style.reloadSources();for(const u of this._controls)u._setLanguage&&u._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(m){return this.style&&m!==this._worldview?(this._worldview=m,this.style.reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(m){return this._lazyInitEmptyStyle(),m?typeof m=="string"&&(m={name:m}):m=null,this._useExplicitProjection=!!m,this._prioritizeAndUpdateProjection(m,this.style.projection)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const m=this.transform,a=m.projection.name;let u;a==="globe"&&m.zoom>=i.bU?(m.setMercatorFromTransition(),u=!0):a==="mercator"&&m.zoom<i.bU&&(m.setProjection({name:"globe"}),u=!0),u&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(m,a){return this._updateProjection(m||a||{name:"mercator"})}_updateProjection(m){let a;return a=m.name==="globe"&&this.transform.zoom>=i.bU?this.transform.setMercatorFromTransition():this.transform.setProjection(m),this.style.applyProjectionUpdate(),a&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(m){return this.transform.locationPoint3D(i.bK.convert(m))}unproject(m){return this.transform.pointLocation3D(i.P.convert(m))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(m,a,u){if(m==="mouseenter"||m==="mouseover"){let g=!1;const v=B=>{const k=a.filter(Q=>this.getLayer(Q)),z=k.length?this.queryRenderedFeatures(B.point,{layers:k}):[];z.length?g||(g=!0,u.call(this,new Vs(m,this,B.originalEvent,{features:z}))):g=!1},x=()=>{g=!1};return{layers:new Set(a),listener:u,delegates:{mousemove:v,mouseout:x}}}if(m==="mouseleave"||m==="mouseout"){let g=!1;const v=B=>{const k=a.filter(z=>this.getLayer(z));(k.length?this.queryRenderedFeatures(B.point,{layers:k}):[]).length?g=!0:g&&(g=!1,u.call(this,new Vs(m,this,B.originalEvent)))},x=B=>{g&&(g=!1,u.call(this,new Vs(m,this,B.originalEvent)))};return{layers:new Set(a),listener:u,delegates:{mousemove:v,mouseout:x}}}{const g=v=>{const x=a.filter(k=>this.getLayer(k)),B=x.length?this.queryRenderedFeatures(v.point,{layers:x}):[];B.length&&(v.features=B,u.call(this,v),delete v.features)};return{layers:new Set(a),listener:u,delegates:{[m]:g}}}}on(m,a,u){if(typeof a=="function"||u===void 0)return super.on(m,a);if(Array.isArray(a)||(a=[a]),a){for(const v of a)if(!this._isValidId(v))return this}const g=this._createDelegatedListener(m,a,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[m]=this._delegatedListeners[m]||[],this._delegatedListeners[m].push(g);for(const v in g.delegates)this.on(v,g.delegates[v]);return this}once(m,a,u){if(typeof a=="function"||u===void 0)return super.once(m,a);if(Array.isArray(a)||(a=[a]),a){for(const v of a)if(!this._isValidId(v))return this}const g=this._createDelegatedListener(m,a,u);for(const v in g.delegates)this.once(v,g.delegates[v]);return this}off(m,a,u){if(typeof a=="function"||u===void 0)return super.off(m,a);const g=new Set(Array.isArray(a)?a:[a]);for(const B of g)if(!this._isValidId(B))return this;const v=(B,k)=>{if(B.size!==k.size)return!1;for(const z of B)if(!k.has(z))return!1;return!0},x=this._delegatedListeners?this._delegatedListeners[m]:void 0;return x&&(B=>{for(let k=0;k<B.length;k++){const z=B[k];if(z.listener===u&&v(z.layers,g)){for(const Q in z.delegates)this.off(Q,z.delegates[Q]);return B.splice(k,1),this}}})(x),this}queryRenderedFeatures(m,a){if(!this.style)return[];if(a!==void 0||m===void 0||m instanceof i.P||Array.isArray(m)||(a=m,m=void 0),m=m||[[0,0],[this.transform.width,this.transform.height]],(a=a||{}).layers&&Array.isArray(a.layers)){for(const u of a.layers)if(!this._isValidId(u))return[]}return this.style.queryRenderedFeatures(m,a,this.transform)}querySourceFeatures(m,a){return this._isValidId(m)?this.style.querySourceFeatures(m,a):[]}isPointOnSurface(m){const{name:a}=this.transform.projection;return a!=="globe"&&a!=="mercator"&&i.w(`${a} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(i.P.convert(m))}addInteraction(m,a){return this._interactions.add(m,a),this}removeInteraction(m){return this._interactions.remove(m),this}setStyle(m,a){return a=i.l({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},a),this.style&&m&&a.diff!==!1&&a.localFontFamily===this._localFontFamily&&a.localIdeographFontFamily===this._localIdeographFontFamily&&!a.config?(this.style._diffStyle(m,(u,g)=>{u?(i.w(`Unable to perform style diff: ${String(u.message||u.error||u)}. Rebuilding the style from scratch.`),this._updateStyle(m,a)):g&&this._update(!0)},()=>{this._postStyleLoadEvent()}),this):(this._localIdeographFontFamily=a.localIdeographFontFamily,this._localFontFamily=a.localFontFamily,this._updateStyle(m,a))}_getUIString(m){const a=this._locale[m];if(a==null)throw new Error(`Missing UI string '${m}'`);return a}_updateStyle(m,a){if(this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),m){const u=i.l({},a);a&&a.config&&(u.initialConfig=a.config,delete u.config),this.style=new Wo(this,u).load(m),this.style.setEventedParent(this,{style:this.style})}return this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Wo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(i.w("There is no style added to the map."),!1)}_isValidId(m){return m==null?(this.fire(new i.t(new Error("IDs can't be empty."))),!1):!i.cn(m)||(this.fire(new i.t(new Error(`IDs can't contain special symbols: "${m}".`))),!1)}addSource(m,a){return this._isValidId(m)?(this._lazyInitEmptyStyle(),this.style.addSource(m,a),this._update(!0)):this}isSourceLoaded(m){return!!this._isValidId(m)&&!!this.style&&this.style._isSourceCacheLoaded(m)}areTilesLoaded(){return this.style.areTilesLoaded()}addSourceType(m,a,u){this._lazyInitEmptyStyle(),this.style.addSourceType(m,a,u)}removeSource(m){return this._isValidId(m)?(this.style.removeSource(m),this._updateTerrain(),this._update(!0)):this}getSource(m){return this._isValidId(m)?this.style.getOwnSource(m):null}addImage(m,a,{pixelRatio:u=1,sdf:g=!1,stretchX:v,stretchY:x,content:B}={}){if(this._lazyInitEmptyStyle(),a instanceof HTMLImageElement||ImageBitmap&&a instanceof ImageBitmap){const{width:k,height:z,data:Q}=i.q.getImageData(a);this.style.addImage(m,{data:new i.r({width:k,height:z},Q),pixelRatio:u,stretchX:v,stretchY:x,content:B,sdf:g,version:0})}else if(a.width===void 0||a.height===void 0)this.fire(new i.t(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:k,height:z}=a,Q=a;this.style.addImage(m,{data:new i.r({width:k,height:z},new Uint8Array(Q.data)),pixelRatio:u,stretchX:v,stretchY:x,content:B,sdf:g,version:0,userImage:Q}),Q.onAdd&&Q.onAdd(this,m)}}updateImage(m,a){this._lazyInitEmptyStyle();const u=this.style.getImage(m);if(!u)return void this.fire(new i.t(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const g=a instanceof HTMLImageElement||ImageBitmap&&a instanceof ImageBitmap?i.q.getImageData(a):a,{width:v,height:x,data:B}=g;if(v===void 0||x===void 0)return void this.fire(new i.t(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(v!==u.data.width||x!==u.data.height)return void this.fire(new i.t(new Error(`The width and height of the updated image (${v}, ${x})
                must be that same as the previous version of the image
                (${u.data.width}, ${u.data.height})`)));const k=!(a instanceof HTMLImageElement||ImageBitmap&&a instanceof ImageBitmap);u.data.replace(B,k),this.style.updateImage(m,u)}hasImage(m){return m?!!this.style&&!!this.style.getImage(m):(this.fire(new i.t(new Error("Missing required image id"))),!1)}removeImage(m){this.style.removeImage(m)}loadImage(m,a){i.o(this._requestManager.transformRequest(m,i.R.Image),(u,g)=>{a(u,g instanceof HTMLImageElement?i.q.getImageData(g):g)})}listImages(){return this.style.listImages()}addModel(m,a){this._lazyInitEmptyStyle(),this.style.addModel(m,a)}hasModel(m){return m?this.style.hasModel(m):(this.fire(new i.t(new Error("Missing required model id"))),!1)}removeModel(m){this.style.removeModel(m)}listModels(){return this.style.listModels()}addLayer(m,a){return this._isValidId(m.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(m,a),this._update(!0)):this}getSlot(m){const a=this.getLayer(m);return a&&a.slot||null}setSlot(m,a){return this.style.setSlot(m,a),this.style.mergeLayers(),this._update(!0)}addImport(m,a){return this.style.addImport(m,a),this}updateImport(m,a){return typeof a!="string"&&a.id!==m?(this.removeImport(m),this.addImport(a)):(this.style.updateImport(m,a),this._update(!0))}removeImport(m){return this.style.removeImport(m),this}moveImport(m,a){return this.style.moveImport(m,a),this._update(!0)}moveLayer(m,a){return this._isValidId(m)?(this.style.moveLayer(m,a),this._update(!0)):this}removeLayer(m){return this._isValidId(m)?(this.style.removeLayer(m),this._update(!0)):this}getLayer(m){if(!this._isValidId(m))return null;const a=this.style.getOwnLayer(m);return a?a.type==="custom"?a.implementation:a.serialize():void 0}getSlots(){return this.style.getSlots()}setLayerZoomRange(m,a,u){return this._isValidId(m)?(this.style.setLayerZoomRange(m,a,u),this._update(!0)):this}setFilter(m,a,u={}){return this._isValidId(m)?(this.style.setFilter(m,a,u),this._update(!0)):this}getFilter(m){return this._isValidId(m)?this.style.getFilter(m):null}setPaintProperty(m,a,u,g={}){return this._isValidId(m)?(this.style.setPaintProperty(m,a,u,g),this._update(!0)):this}getPaintProperty(m,a){return this._isValidId(m)?this.style.getPaintProperty(m,a):null}setLayoutProperty(m,a,u,g={}){return this._isValidId(m)?(this.style.setLayoutProperty(m,a,u,g),this._update(!0)):this}getLayoutProperty(m,a){return this._isValidId(m)?this.style.getLayoutProperty(m,a):null}getSchema(m){return this.style.getSchema(m)}setSchema(m,a){return this.style.setSchema(m,a),this._update(!0)}getConfig(m){return this.style.getConfig(m)}setConfig(m,a){return this.style.setConfig(m,a),this._update(!0)}getConfigProperty(m,a){return this.style.getConfigProperty(m,a)}setConfigProperty(m,a,u){return this.style.setConfigProperty(m,a,u),this._update(!0)}setLights(m){if(this._lazyInitEmptyStyle(),m&&m.length===1&&m[0].type==="flat"){const a=m[0];a.properties?this.style.setFlatLight(a.properties,a.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(m),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){const m=this.style.getLights()||[];return m.length===0&&m.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),m}setLight(m,a={}){return console.log("The `map.setLight` function is deprecated, prefer using `map.setLights` with `flat` light type instead."),this.setLights([{id:"flat",type:"flat",properties:m}])}getLight(){return console.log("The `map.getLight` function is deprecated, prefer using `map.getLights` instead."),this.style.getFlatLight()}setTerrain(m){return this._lazyInitEmptyStyle(),!m&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(m),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(m){return this._lazyInitEmptyStyle(),this.style.setFog(m),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setColorTheme(m){return this._lazyInitEmptyStyle(),this.style.setColorTheme(m),this._update(!0)}setCamera(m){return this.style.setCamera(m),this._triggerCameraUpdate(m)}_triggerCameraUpdate(m){return this._update(this.transform.setOrthographicProjectionAtLowPitch(m["camera-projection"]==="orthographic"))}getCamera(){return this.style.camera}_queryFogOpacity(m){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(i.bK.convert(m),this.transform):0}setFeatureState(m,a){return this._isValidId(m.source)?(this.style.setFeatureState(m,a),this._update()):this}removeFeatureState(m,a){return this._isValidId(m.source)?(this.style.removeFeatureState(m,a),this._update()):this}getFeatureState(m){return this._isValidId(m.source)?this.style.getFeatureState(m):null}_updateContainerDimensions(){if(!this._container)return;const m=this._container.getBoundingClientRect().width||400,a=this._container.getBoundingClientRect().height||300;let u,g,v,x=this._container;for(;x&&(!g||!v);){const B=window.getComputedStyle(x).transform;B&&B!=="none"&&(u=B.match(/matrix.*\((.+)\)/)[1].split(", "),u[0]&&u[0]!=="0"&&u[0]!=="1"&&(g=u[0]),u[3]&&u[3]!=="0"&&u[3]!=="1"&&(v=u[3])),x=x.parentElement}this._containerWidth=g?Math.abs(m/g):m,this._containerHeight=v?Math.abs(a/v):a}_detectMissingCSS(){window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&i.w("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const m=this._container;m.classList.add("mapboxgl-map"),(this._missingCSSCanary=Z("div","mapboxgl-canary",m)).style.visibility="hidden",this._detectMissingCSS();const a=this._canvasContainer=Z("div","mapboxgl-canvas-container",m);this._canvas=Z("canvas","mapboxgl-canvas",a),this._interactive&&(a.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const u=this._controlContainer=Z("div","mapboxgl-control-container",m),g=this._controlPositions={};["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"].forEach(v=>{g[v]=Z("div",`mapboxgl-ctrl-${v}`,u)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(m,a){const u=i.q.devicePixelRatio||1;this._canvas.width=u*Math.ceil(m),this._canvas.height=u*Math.ceil(a),this._canvas.style.width=`${m}px`,this._canvas.style.height=`${a}px`}_addMarker(m){this._markers.push(m)}_removeMarker(m){const a=this._markers.indexOf(m);a!==-1&&this._markers.splice(a,1)}_addPopup(m){this._popups.push(m)}_removePopup(m){const a=this._popups.indexOf(m);a!==-1&&this._popups.splice(a,1)}_setupPainter(){const m=i.l({},q.supported.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),a=this._canvas.getContext("webgl2",m);a?(Te(a,!0),this.painter=new zf(a,this._contextCreateOptions,this.transform,this._tp),this.on("data",u=>{u.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),i.m.testSupport(a)):this.fire(new i.t(new Error("Failed to initialize WebGL")))}_contextLost(m){m.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new i.x("webglcontextlost",{originalEvent:m}))}_contextRestored(m){this._setupPainter(),this.resize(),this._update(),this.fire(new i.x("webglcontextrestored",{originalEvent:m}))}_onMapScroll(m){if(m.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}idle(){return!this.isMoving()&&this.loaded()}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}frameReady(){return this.loaded()&&!this._placementDirty}_update(m){return this.style?(this._styleDirty=this._styleDirty||m,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(m){return this._update(),this._renderTaskQueue.add(m)}_cancelRenderFrame(m){this._renderTaskQueue.remove(m)}_requestDomTask(m){!this.loaded()||this.loaded()&&!this.isMoving()?m():this._domRenderTaskQueue.add(m)}_render(m){let a;this.fire(new i.x("renderstart")),++this._frameId;const u=this.painter.context.extTimerQuery,g=i.q.now(),v=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(a=v.createQuery(),v.beginQuery(u.TIME_ELAPSED_EXT,a)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],performance.now())),this._renderTaskQueue.run(m),this._domRenderTaskQueue.run(m),this._removed)return;this._updateProjectionTransition();const x=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const Q=this.transform.zoom,j=this.transform.pitch,W=i.q.now(),J=new i.a3(Q,{now:W,fadeDuration:x,pitch:j,transition:this.style.transition});this.style.update(J)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let B=!1;this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),B=this._updateAverageElevation(g),this.style.updateSources(this.transform),this._forceMarkerAndPopupUpdate()):B=this._updateAverageElevation(g);const k=this.style&&this.style._updatePlacement(this.painter,this.painter.transform,this.showCollisionBoxes,x,this._crossSourceCollisions,this.painter.replacementSource);if(k&&(this._placementDirty=k.needsRerender),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showParseStatus:this.showParseStatus,wireframe:{terrain:this.showTerrainWireframe,layers2D:this.showLayers2DWireframe,layers3D:this.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:x,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new i.x("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,I.mark(E.load),this.fire(new i.x("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),a){const Q=i.q.now()-g;v.endQuery(u.TIME_ELAPSED_EXT),setTimeout(()=>{const j=v.getQueryParameter(a,v.QUERY_RESULT)/1e6;v.deleteQuery(a),this.fire(new i.x("gpu-timing-frame",{cpuTime:Q,gpuTime:j}))},50)}if(this.listens("gpu-timing-layer")){const Q=this.painter.collectGpuTimers();setTimeout(()=>{const j=this.painter.queryGpuTimers(Q);this.fire(new i.x("gpu-timing-layer",{layerTimes:j}))},50)}if(this.listens("gpu-timing-deferred-render")){const Q=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const j=this.painter.queryGpuTimeDeferredRender(Q);this.fire(new i.x("gpu-timing-deferred-render",{gpuTime:j}))},50)}const z=this._sourcesDirty||this._styleDirty||this._placementDirty||B;if(z||this._repaint)this.triggerRepaint();else{const Q=this.idle();if(Q&&(B=this._updateAverageElevation(g,!0)),B)this.triggerRepaint();else if(this._triggerFrame(!1),Q&&(this.fire(new i.x("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const j=this._calculateSpeedIndex();this.fire(new i.x("speedindexcompleted",{speedIndex:j})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||z||(this._fullyLoaded=!0,I.mark(E.fullLoad),this._performanceMetricsCollection&&Dt(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(m){for(const a of this._markers)m&&!this.getRenderWorldCopies()&&(a._lngLat=a._lngLat.wrap()),a._update();for(const a of this._popups)!m||this.getRenderWorldCopies()||a._trackPointer||(a._lngLat=a._lngLat.wrap()),a._update()}_updateAverageElevation(m,a=!1){const u=v=>(this.transform.averageElevation=v,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&u(0);const g=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(g||(a||m-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(m)){const v=this.transform.averageElevation;let x=this.transform.sampleAverageElevation();this.transform.elevation!=null&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(x)?x=0:this._averageElevationLastSampledAt=m;const B=Math.abs(v-x);if(B>1){if(this._isInitialLoad||g)return this._averageElevation.jumpTo(x),u(x);this._averageElevation.easeTo(x,m,300)}else if(B>1e-4)return this._averageElevation.jumpTo(x),u(x)}return!!this._averageElevation.isEasing(m)&&u(this._averageElevation.getValue(m))}_authenticate(){De(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,m=>{if(m&&(m.message===lt||m.status===401)){const a=this.painter.context.gl;Te(a,!1),this._logoControl instanceof d0&&this._logoControl._updateLogo(),a&&a.clear(a.DEPTH_BUFFER_BIT|a.COLOR_BUFFER_BIT|a.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new i.t(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),vt(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_postStyleLoadEvent(){this.style.globalId&&at(this._requestManager._customAccessToken,{map:this,skuToken:this._requestManager._skuToken,style:this.style.globalId,importedStyles:this.style.getImportGlobalIds()})}_updateTerrain(){const m=this._isDragging();this.painter.updateTerrain(this.style,m)}_calculateSpeedIndex(){const m=this.painter.canvasCopy(),a=this.painter.getCanvasCopiesAndTimestamps();a.timeStamps.push(performance.now());const u=this.painter.context.gl,g=u.createFramebuffer();function v(x){u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,x,0);const B=new Uint8Array(u.drawingBufferWidth*u.drawingBufferHeight*4);return u.readPixels(0,0,u.drawingBufferWidth,u.drawingBufferHeight,u.RGBA,u.UNSIGNED_BYTE,B),B}return u.bindFramebuffer(u.FRAMEBUFFER,g),this._canvasPixelComparison(v(m),a.canvasCopies.map(v),a.timeStamps)}_canvasPixelComparison(m,a,u){let g=u[1]-u[0];const v=m.length/4;for(let x=0;x<a.length;x++){const B=a[x];let k=0;for(let z=0;z<B.length;z+=4)B[z]===m[z]&&B[z+1]===m[z+1]&&B[z+2]===m[z+2]&&B[z+3]===m[z+3]&&(k+=1);g+=(u[x+2]-u[x+1])*(1-k/v)}return g}remove(){this._hash&&this._hash.remove();for(const a of this._controls)a.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),window.removeEventListener("resize",this._onWindowResize,!1),window.removeEventListener("orientationchange",this._onWindowResize,!1),window.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.removeEventListener("online",this._onWindowOnline,!1),window.removeEventListener("visibilitychange",this._onVisibilityChange,!1);const m=this.painter.context.gl.getExtension("WEBGL_lose_context");m&&m.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),jn.delete(this.painter.context.gl),yn.remove(),We.remove(),this._removed=!0,this.fire(new i.x("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(m){this._renderNextFrame=this._renderNextFrame||m,this.style&&!this._frame&&(this._frame=i.q.frame(a=>{const u=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,u&&this._render(a)}))}_preloadTiles(m){const a=this.style?this.style.getSourceCaches():[];return i.bf(a,(u,g)=>u._preloadTiles(m,g),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(m){this._trackResize&&this.resize({originalEvent:m})._update()}_onVisibilityChange(){document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(m){this._showTileBoundaries!==m&&(this._showTileBoundaries=m,this._tp.refreshUI(),this._update())}get showParseStatus(){return!!this._showParseStatus}set showParseStatus(m){this._showParseStatus!==m&&(this._showParseStatus=m,this._tp.refreshUI(),this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(m){this._showTerrainWireframe!==m&&(this._showTerrainWireframe=m,this._tp.refreshUI(),this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(m){this._showLayers2DWireframe!==m&&(this._showLayers2DWireframe=m,this._tp.refreshUI(),this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(m){this._showLayers3DWireframe!==m&&(this._showLayers3DWireframe=m,this._tp.refreshUI(),this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(m){this._speedIndexTiming!==m&&(this._speedIndexTiming=m,this._update())}get showPadding(){return!!this._showPadding}set showPadding(m){this._showPadding!==m&&(this._showPadding=m,this._tp.refreshUI(),this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(m){this._showCollisionBoxes!==m&&(this._showCollisionBoxes=m,this._tp.refreshUI(),m?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(m){this._showOverdrawInspector!==m&&(this._showOverdrawInspector=m,this._tp.refreshUI(),this._update())}get repaint(){return!!this._repaint}set repaint(m){this._repaint!==m&&(this._repaint=m,this._tp.refreshUI(),this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(m){this._vertices=m,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(m){this._showTileAABBs!==m&&(this._showTileAABBs=m,this._tp.refreshUI(),m&&this._update())}_setCacheLimits(m,a){i.dy(m,a)}get version(){return b}},NavigationControl:class{constructor(m={}){this.options=i.l({},Tm,m),this._container=Z("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",a=>a.preventDefault()),this.options.showZoom&&(i.aJ(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",a=>{this._map&&this._map.zoomIn({},{originalEvent:a})}),Z("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",a=>{this._map&&this._map.zoomOut({},{originalEvent:a})}),Z("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(i.aJ(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",a=>{const u=this._map;u&&(this.options.visualizePitch?u.resetNorthPitch({},{originalEvent:a}):u.resetNorth({},{originalEvent:a}))}),this._compassIcon=Z("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const m=this._map;if(!m)return;const a=m.getZoom(),u=a===m.getMaxZoom(),g=a===m.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=g,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",g.toString())}_rotateCompassArrow(){const m=this._map;if(!m)return;const a=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(m.transform.pitch*(Math.PI/180)),.5)}) rotateX(${m.transform.pitch}deg) rotateZ(${m.transform.angle*(180/Math.PI)}deg)`:`rotate(${m.transform.angle*(180/Math.PI)}deg)`;m._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=a)})}onAdd(m){return this._map=m,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),m.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&m.on("pitch",this._rotateCompassArrow),m.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new KA(m,this._compass,this.options.visualizePitch)),this._container}onRemove(){const m=this._map;m&&(this._container.remove(),this.options.showZoom&&m.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&m.off("pitch",this._rotateCompassArrow),m.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(m,a){const u=Z("button",m,this._container);return u.type="button",u.addEventListener("click",a),u}_setButtonTitle(m,a){if(!this._map)return;const u=this._map._getUIString(`NavigationControl.${a}`);m.setAttribute("aria-label",u),m.firstElementChild&&m.firstElementChild.setAttribute("title",u)}},GeolocateControl:class extends i.E{constructor(m={}){super();const a=navigator.geolocation;this.options=i.l({geolocation:a},Gf,m),i.aJ(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Sl(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(m){return this._map=m,this._container=Z("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(m){const a=(u=!!this.options.geolocation)=>{this._supportsGeolocation=u,m(u)};this._supportsGeolocation!==void 0?m(this._supportsGeolocation):navigator.permissions!==void 0?navigator.permissions.query({name:"geolocation"}).then(u=>a(u.state!=="denied")).catch(()=>a()):a()}_isOutOfMapMaxBounds(m){const a=this._map.getMaxBounds(),u=m.coords;return!!a&&(u.longitude<a.getWest()||u.longitude>a.getEast()||u.latitude<a.getSouth()||u.latitude>a.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(m){if(this._map){if(this._isOutOfMapMaxBounds(m))return this._setErrorState(),this.fire(new i.x("outofmaxbounds",m)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=m,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(m),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(m),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new i.x("geolocate",m)),this._finish()}}_updateCamera(m){const a=new i.bK(m.coords.longitude,m.coords.latitude),u=m.coords.accuracy,g=this._map.getBearing(),v=i.l({bearing:g},this.options.fitBoundsOptions);this._map.fitBounds(a.toBounds(u),v,{geolocateSource:!0})}_updateMarker(m){if(m){const a=new i.bK(m.coords.longitude,m.coords.latitude);this._accuracyCircleMarker.setLngLat(a).addTo(this._map),this._userLocationDotMarker.setLngLat(a).addTo(this._map),this._accuracy=m.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const m=this._map.transform,a=i.bD(1,m._center.lat)*m.worldSize,u=Math.ceil(2*this._accuracy*a);this._circleElement.style.width=`${u}px`,this._circleElement.style.height=`${u}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(m){if(this._map){if(this.options.trackUserLocation)if(m.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",a),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",a),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(m.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new i.x("error",m)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(m){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",a=>a.preventDefault()),this._geolocateButton=Z("button","mapboxgl-ctrl-geolocate",this._container),Z("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",m===!1){i.w("Geolocation support is not available so the GeolocateControl will be disabled.");const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",a),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",a)}else{const a=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",a),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",a)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Z("div","mapboxgl-user-location"),this._dotElement.appendChild(Z("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(Z("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Ah({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=Z("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ah({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",a=>{a.geolocateSource||this._watchState!=="ACTIVE_LOCK"||a.originalEvent&&a.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new i.x("trackuserlocationend")))})}}_onDeviceOrientation(m){this._userLocationDotMarker&&(m.webkitCompassHeading?this._heading=m.webkitCompassHeading:m.absolute===!0&&(this._heading=-1*m.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return i.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new i.x("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new i.x("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new i.x("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let m;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(m={maximumAge:6e5,timeout:0},this._noTimeout=!0):(m=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,m),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=window.setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const m=()=>{"ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",this._onDeviceOrientation):window.addEventListener("deviceorientation",this._onDeviceOrientation)};typeof DeviceMotionEvent<"u"&&typeof DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(a=>{a==="granted"&&m()}).catch(console.error):m()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Jg,ScaleControl:class{constructor(m={}){this.options=i.l({},Vd,m),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),i.aJ(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const m=this.options.maxWidth||100,a=this._map,u=a._containerHeight/2,g=a._containerWidth/2-m/2,v=a.unproject([g,u]),x=a.unproject([g+m,u]),B=v.distanceTo(x);if(this.options.unit==="imperial"){const k=3.2808*B;k>5280?this._setScale(m,k/5280,"mile"):this._setScale(m,k,"foot")}else this.options.unit==="nautical"?this._setScale(m,B/1852,"nautical-mile"):B>=1e3?this._setScale(m,B/1e3,"kilometer"):this._setScale(m,B,"meter")}_setScale(m,a,u){this._map._requestDomTask(()=>{const g=function(x){const B=Math.pow(10,`${Math.floor(x)}`.length-1);let k=x/B;return k=k>=10?10:k>=5?5:k>=3?3:k>=2?2:k>=1?1:function(z){const Q=Math.pow(10,Math.ceil(-Math.log(z)/Math.LN10));return Math.round(z*Q)/Q}(k),B*k}(a),v=g/a;this._container.innerHTML=this._isNumberFormatSupported&&u!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:u}).format(g):`${g}&nbsp;${LB[u]}`,this._container.style.width=m*v+"px"})}onAdd(m){return this._map=m,this._language=m.getLanguage(),this._container=Z("div","mapboxgl-ctrl mapboxgl-ctrl-scale",m.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(m){this._language=m,this._update()}setUnit(m){this.options.unit=m,this._update()}},FullscreenControl:class{constructor(m={}){this._fullscreen=!1,m&&m.container&&(m.container instanceof HTMLElement?this._container=m.container:i.w("Full screen control 'container' must be a DOM element.")),i.aJ(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(m){return this._map=m,this._container||(this._container=this._map.getContainer()),this._controlContainer=Z("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",i.w("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)}_setupUI(){const m=this._fullscreenButton=Z("button","mapboxgl-ctrl-fullscreen",this._controlContainer);Z("span","mapboxgl-ctrl-icon",m).setAttribute("aria-hidden","true"),m.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const m=this._getTitle();this._fullscreenButton.setAttribute("aria-label",m),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",m)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(document.fullscreenElement||document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends i.E{constructor(m){super(),this.options=i.l(Object.create(FB),m),i.aJ(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(m&&m.className?m.className.trim().split(/\s+/):[])}addTo(m){return this._map&&this.remove(),this._map=m,this.options.closeOnClick&&m.on("preclick",this._onClose),this.options.closeOnMove&&m.on("move",this._onClose),m.on("remove",this.remove),this._update(),m._addPopup(this),this._focusFirstElement(),this._trackPointer?(m.on("mousemove",this._onMouseEvent),m.on("mouseup",this._onMouseEvent),m._canvasContainer.classList.add("mapboxgl-track-pointer")):m.on("move",this._update),this.fire(new i.x("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const m=this._map;return m&&(m.off("move",this._update),m.off("move",this._onClose),m.off("preclick",this._onClose),m.off("click",this._onClose),m.off("remove",this.remove),m.off("mousemove",this._onMouseEvent),m.off("mouseup",this._onMouseEvent),m.off("drag",this._onMouseEvent),m._canvasContainer&&m._canvasContainer.classList.remove("mapboxgl-track-pointer"),m._removePopup(this),this._map=void 0),this.fire(new i.x("close")),this}getLngLat(){return this._lngLat}setLngLat(m){this._lngLat=i.bK.convert(m),this._pos=null,this._trackPointer=!1,this._update();const a=this._map;return a&&(a.on("move",this._update),a.off("mousemove",this._onMouseEvent),a._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const m=this._map;return m&&(m.off("move",this._update),m.on("mousemove",this._onMouseEvent),m.on("drag",this._onMouseEvent),m._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(m){return this.setDOMContent(document.createTextNode(m))}setHTML(m){const a=document.createDocumentFragment(),u=document.createElement("body");let g;for(u.innerHTML=m;g=u.firstChild,g;)a.appendChild(g);return this.setDOMContent(a)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(m){return this.options.maxWidth=m,this._update(),this}setDOMContent(m){let a=this._content;if(a)for(;a.hasChildNodes();)a.firstChild&&a.removeChild(a.firstChild);else a=this._content=Z("div","mapboxgl-popup-content",this._container||void 0);if(a.appendChild(m),this.options.closeButton){const u=this._closeButton=Z("button","mapboxgl-popup-close-button",a);u.type="button",u.setAttribute("aria-label","Close popup"),u.setAttribute("aria-hidden","true"),u.innerHTML="&#215;",u.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(m){return this._classList.add(m),this._updateClassList(),this}removeClassName(m){return this._classList.delete(m),this._updateClassList(),this}setOffset(m){return this.options.offset=m,this._update(),this}toggleClassName(m){let a;return this._classList.delete(m)?a=!1:(this._classList.add(m),a=!0),this._updateClassList(),a}_onMouseEvent(m){this._update(m.point)}_getAnchor(m){if(this.options.anchor)return this.options.anchor;const a=this._map,u=this._container,g=this._pos;if(!a||!u||!g)return"bottom";const v=u.offsetWidth,x=u.offsetHeight,B=g.x<v/2,k=g.x>a.transform.width-v/2;if(g.y+m<x)return B?"top-left":k?"top-right":"top";if(g.y>a.transform.height-x){if(B)return"bottom-left";if(k)return"bottom-right"}return B?"left":k?"right":"bottom"}_updateClassList(){const m=this._container;if(!m)return;const a=[...this._classList];a.push("mapboxgl-popup"),this._anchor&&a.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&a.push("mapboxgl-popup-track-pointer"),m.className=a.join(" ")}_update(m){const a=this._map,u=this._content;if(!a||!this._lngLat&&!this._trackPointer||!u)return;let g=this._container;if(g||(g=this._container=Z("div","mapboxgl-popup",a.getContainer()),this._tip=Z("div","mapboxgl-popup-tip",g),g.appendChild(u)),this.options.maxWidth&&g.style.maxWidth!==this.options.maxWidth&&(g.style.maxWidth=this.options.maxWidth),a.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=fh(this._lngLat,this._pos,a.transform)),!this._trackPointer||m){const v=this._pos=this._trackPointer&&m instanceof i.P?m:a.project(this._lngLat),x=Fb(this.options.offset),B=this._anchor=this._getAnchor(x.y),k=Fb(this.options.offset,B),z=v.add(k).round();a._requestDomTask(()=>{this._container&&B&&(this._container.style.transform=`${Rc[B]} translate(${z.x}px,${z.y}px)`)})}if(!this._marker&&a._showingGlobe()){const v=i.dz(a.transform,this._lngLat)?0:1;this._setOpacity(v)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const m=this._container.querySelector(RB);m&&m.focus()}_onClose(){this.remove()}_setOpacity(m){this._container&&(this._container.style.opacity=`${m}`),this._content&&(this._content.style.pointerEvents=m?"auto":"none")}},Marker:Ah,Style:Wo,LngLat:i.bK,LngLatBounds:i.as,Point:i.P,MercatorCoordinate:i.a5,FreeCameraOptions:ha,Evented:i.E,config:i.e,prewarm:i.dE,clearPrewarmedResources:i.dF,get accessToken(){return i.e.ACCESS_TOKEN},set accessToken(m){i.e.ACCESS_TOKEN=m},get baseApiUrl(){return i.e.API_URL},set baseApiUrl(m){i.e.API_URL=m},get workerCount(){return i.dG.workerCount},set workerCount(m){i.dG.workerCount=m},get maxParallelImageRequests(){return i.e.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(m){i.e.MAX_PARALLEL_IMAGE_REQUESTS=m},clearStorage(m){i.dH(m)},get workerUrl(){return i.dI.workerUrl},set workerUrl(m){i.dI.workerUrl=m},get workerClass(){return i.dI.workerClass},set workerClass(m){i.dI.workerClass=m},get workerParams(){return i.dI.workerParams},set workerParams(m){i.dI.workerParams=m},get dracoUrl(){return i.dJ()},set dracoUrl(m){i.dK(m)},get meshoptUrl(){return i.dL()},set meshoptUrl(m){i.dM(m)},setNow:i.q.setNow,restoreNow:i.q.restoreNow}});var p=l;return p})})(Xj);var i5e=Xj.exports;const tA=Wj(i5e);var r0=s5e,o5e=Object.prototype.hasOwnProperty;function s5e(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var r in n)o5e.call(n,r)&&(t[r]=n[r])}return t}var Yj={exports:{}};(function(t,e){(function(){var n={};t.exports=n,n.simpleFilter=function(r,o){return o.filter(function(l){return n.test(r,l)})},n.test=function(r,o){return n.match(r,o)!==null},n.match=function(r,o,l){l=l||{};var h=0,p=[],i=o.length,b=0,E=0,I=l.pre||"",O=l.post||"",M=l.caseSensitive&&o||o.toLowerCase(),G;r=l.caseSensitive&&r||r.toLowerCase();for(var q=0;q<i;q++)G=o[q],M[q]===r[h]?(G=I+G+O,h+=1,E+=1+E):E=0,b+=E,p[p.length]=G;return h===r.length?(b=M===r?1/0:b,{rendered:p.join(""),score:b}):null},n.filter=function(r,o,l){return!o||o.length===0?[]:typeof r!="string"?o:(l=l||{},o.reduce(function(h,p,i,b){var E=p;l.extract&&(E=l.extract(p));var I=n.match(r,E,l);return I!=null&&(h[h.length]={string:I.rendered,score:I.score,index:i,original:p}),h},[]).sort(function(h,p){var i=p.score-h.score;return i||h.index-p.index}))}})()})(Yj);var a5e=Yj.exports,_u=function(t){return this.component=t,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,t.el.parentNode.insertBefore(this.wrapper,t.el.nextSibling),this};_u.prototype.show=function(){this.element.style.display="block"};_u.prototype.hide=function(){this.element.style.display="none"};_u.prototype.add=function(t){this.items.push(t)};_u.prototype.clear=function(){this.items=[],this.active=0};_u.prototype.isEmpty=function(){return!this.items.length};_u.prototype.isVisible=function(){return this.element.style.display==="block"};_u.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var t=0;t<this.items.length;t++)this.drawItem(this.items[t],this.active===t);this.show()};_u.prototype.drawItem=function(t,e){var n=document.createElement("li"),r=document.createElement("a");e&&(n.className+=" active"),r.innerHTML=t.string,n.appendChild(r),this.element.appendChild(n),n.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),n.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,t)}).bind(this))};_u.prototype.handleMouseUp=function(t){this.selectingListItem=!1,this.component.value(t.original),this.clear(),this.draw()};_u.prototype.move=function(t){this.active=t,this.draw()};_u.prototype.previous=function(){this.move(this.active===0?this.items.length-1:this.active-1)};_u.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)};_u.prototype.drawError=function(t){var e=document.createElement("li");e.innerHTML=t,this.element.appendChild(e),this.show()};var l5e=_u,c5e=r0,u5e=a5e,h5e=l5e,gc=function(t,e,n){return n=n||{},this.options=c5e({minLength:2,limit:5,filter:!0,hideOnBlur:!0},n),this.el=t,this.data=e||[],this.list=new h5e(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(r){this.handleKeyUp(r.keyCode)}).bind(this),!1),this.el.addEventListener("keydown",(function(r){this.handleKeyDown(r)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(r){this.handlePaste(r)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};gc.prototype.handleKeyUp=function(t){t===40||t===38||t===27||t===13||t===9||this.handleInputChange(this.el.value)};gc.prototype.handleKeyDown=function(t){switch(t.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&t.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}};gc.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()};gc.prototype.handlePaste=function(t){if(t.clipboardData)this.handleInputChange(t.clipboardData.getData("Text"));else{var e=this;setTimeout(function(){e.handleInputChange(t.target.value)},100)}};gc.prototype.handleInputChange=function(t){if(this.query=this.normalize(t),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(e){for(var n=0;n<e.length&&(this.list.add(e[n]),n!==this.options.limit-1);n++);this.list.draw()}).bind(this))};gc.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1};gc.prototype.update=function(t){this.data=t,this.handleKeyUp()};gc.prototype.clear=function(){this.data=[],this.list.clear()};gc.prototype.normalize=function(t){return t=t.toLowerCase(),t};gc.prototype.match=function(t,e){return t.indexOf(e)>-1};gc.prototype.value=function(t){if(this.selected=t,this.el.value=this.getItemValue(t),document.createEvent){var e=document.createEvent("HTMLEvents");e.initEvent("change",!0,!1),this.el.dispatchEvent(e)}else this.el.fireEvent("onchange")};gc.prototype.getCandidates=function(t){var e={pre:"<strong>",post:"</strong>",extract:(function(r){return this.getItemValue(r)}).bind(this)},n;this.options.filter?(n=u5e.filter(this.query,this.data,e),n=n.map((function(r){return{original:r.original,string:this.render(r.original,r.string)}}).bind(this))):n=this.data.map((function(r){var o=this.render(r);return{original:r,string:o}}).bind(this)),t(n)};gc.prototype.getItemValue=function(t){return t};gc.prototype.render=function(t,e){if(e)return e;for(var n=t.original?this.getItemValue(t.original):this.getItemValue(t),r=this.normalize(n),o=r.lastIndexOf(this.query);o>-1;){var l=o+this.query.length;n=n.slice(0,o)+"<strong>"+n.slice(o,l)+"</strong>"+n.slice(l),o=r.slice(0,o).lastIndexOf(this.query)}return n};gc.prototype.renderError=function(t){this.list.drawError(t)};var d5e=gc,Jj=d5e,f5e=Jj;typeof window<"u"&&(window.Suggestions=Jj);var A5e="Expected a function",HU=NaN,p5e="[object Symbol]",m5e=/^\s+|\s+$/g,g5e=/^[-+]0x[0-9a-f]+$/i,y5e=/^0b[01]+$/i,_5e=/^0o[0-7]+$/i,v5e=parseInt,b5e=typeof dd=="object"&&dd&&dd.Object===Object&&dd,w5e=typeof self=="object"&&self&&self.Object===Object&&self,x5e=b5e||w5e||Function("return this")(),C5e=Object.prototype,E5e=C5e.toString,B5e=Math.max,S5e=Math.min,vT=function(){return x5e.Date.now()};function T5e(t,e,n){var r,o,l,h,p,i,b=0,E=!1,I=!1,O=!0;if(typeof t!="function")throw new TypeError(A5e);e=jU(e)||0,F5(n)&&(E=!!n.leading,I="maxWait"in n,l=I?B5e(jU(n.maxWait)||0,e):l,O="trailing"in n?!!n.trailing:O);function M(Ie){var Ae=r,ne=o;return r=o=void 0,b=Ie,h=t.apply(ne,Ae),h}function G(Ie){return b=Ie,p=setTimeout(Y,e),E?M(Ie):h}function q(Ie){var Ae=Ie-i,ne=Ie-b,ue=e-Ae;return I?S5e(ue,l-ne):ue}function Z(Ie){var Ae=Ie-i,ne=Ie-b;return i===void 0||Ae>=e||Ae<0||I&&ne>=l}function Y(){var Ie=vT();if(Z(Ie))return te(Ie);p=setTimeout(Y,q(Ie))}function te(Ie){return p=void 0,O&&r?M(Ie):(r=o=void 0,h)}function be(){p!==void 0&&clearTimeout(p),b=0,r=i=o=p=void 0}function Pe(){return p===void 0?h:te(vT())}function Se(){var Ie=vT(),Ae=Z(Ie);if(r=arguments,o=this,i=Ie,Ae){if(p===void 0)return G(i);if(I)return p=setTimeout(Y,e),M(i)}return p===void 0&&(p=setTimeout(Y,e)),h}return Se.cancel=be,Se.flush=Pe,Se}function F5(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function I5e(t){return!!t&&typeof t=="object"}function P5e(t){return typeof t=="symbol"||I5e(t)&&E5e.call(t)==p5e}function jU(t){if(typeof t=="number")return t;if(P5e(t))return HU;if(F5(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=F5(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(m5e,"");var n=y5e.test(t);return n||_5e.test(t)?v5e(t.slice(2),n?2:8):g5e.test(t)?HU:+t}var L5e=T5e,YP={exports:{}},c_=typeof Reflect=="object"?Reflect:null,$U=c_&&typeof c_.apply=="function"?c_.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},iC;c_&&typeof c_.ownKeys=="function"?iC=c_.ownKeys:Object.getOwnPropertySymbols?iC=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:iC=function(e){return Object.getOwnPropertyNames(e)};function F5e(t){console&&console.warn&&console.warn(t)}var e$=Number.isNaN||function(e){return e!==e};function ms(){ms.init.call(this)}YP.exports=ms;YP.exports.once=O5e;ms.EventEmitter=ms;ms.prototype._events=void 0;ms.prototype._eventsCount=0;ms.prototype._maxListeners=void 0;var GU=10;function xB(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(ms,"defaultMaxListeners",{enumerable:!0,get:function(){return GU},set:function(t){if(typeof t!="number"||t<0||e$(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");GU=t}});ms.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};ms.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||e$(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function t$(t){return t._maxListeners===void 0?ms.defaultMaxListeners:t._maxListeners}ms.prototype.getMaxListeners=function(){return t$(this)};ms.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var o=e==="error",l=this._events;if(l!==void 0)o=o&&l.error===void 0;else if(!o)return!1;if(o){var h;if(n.length>0&&(h=n[0]),h instanceof Error)throw h;var p=new Error("Unhandled error."+(h?" ("+h.message+")":""));throw p.context=h,p}var i=l[e];if(i===void 0)return!1;if(typeof i=="function")$U(i,this,n);else for(var b=i.length,E=s$(i,b),r=0;r<b;++r)$U(E[r],this,n);return!0};function n$(t,e,n,r){var o,l,h;if(xB(n),l=t._events,l===void 0?(l=t._events=Object.create(null),t._eventsCount=0):(l.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),l=t._events),h=l[e]),h===void 0)h=l[e]=n,++t._eventsCount;else if(typeof h=="function"?h=l[e]=r?[n,h]:[h,n]:r?h.unshift(n):h.push(n),o=t$(t),o>0&&h.length>o&&!h.warned){h.warned=!0;var p=new Error("Possible EventEmitter memory leak detected. "+h.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");p.name="MaxListenersExceededWarning",p.emitter=t,p.type=e,p.count=h.length,F5e(p)}return t}ms.prototype.addListener=function(e,n){return n$(this,e,n,!1)};ms.prototype.on=ms.prototype.addListener;ms.prototype.prependListener=function(e,n){return n$(this,e,n,!0)};function R5e(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function r$(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},o=R5e.bind(r);return o.listener=n,r.wrapFn=o,o}ms.prototype.once=function(e,n){return xB(n),this.on(e,r$(this,e,n)),this};ms.prototype.prependOnceListener=function(e,n){return xB(n),this.prependListener(e,r$(this,e,n)),this};ms.prototype.removeListener=function(e,n){var r,o,l,h,p;if(xB(n),o=this._events,o===void 0)return this;if(r=o[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(l=-1,h=r.length-1;h>=0;h--)if(r[h]===n||r[h].listener===n){p=r[h].listener,l=h;break}if(l<0)return this;l===0?r.shift():k5e(r,l),r.length===1&&(o[e]=r[0]),o.removeListener!==void 0&&this.emit("removeListener",e,p||n)}return this};ms.prototype.off=ms.prototype.removeListener;ms.prototype.removeAllListeners=function(e){var n,r,o;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var l=Object.keys(r),h;for(o=0;o<l.length;++o)h=l[o],h!=="removeListener"&&this.removeAllListeners(h);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(o=n.length-1;o>=0;o--)this.removeListener(e,n[o]);return this};function i$(t,e,n){var r=t._events;if(r===void 0)return[];var o=r[e];return o===void 0?[]:typeof o=="function"?n?[o.listener||o]:[o]:n?M5e(o):s$(o,o.length)}ms.prototype.listeners=function(e){return i$(this,e,!0)};ms.prototype.rawListeners=function(e){return i$(this,e,!1)};ms.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):o$.call(t,e)};ms.prototype.listenerCount=o$;function o$(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}ms.prototype.eventNames=function(){return this._eventsCount>0?iC(this._events):[]};function s$(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function k5e(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function M5e(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function O5e(t,e){return new Promise(function(n,r){function o(h){t.removeListener(e,l),r(h)}function l(){typeof t.removeListener=="function"&&t.removeListener("error",o),n([].slice.call(arguments))}a$(t,e,l,{once:!0}),e!=="error"&&D5e(t,o,{once:!0})})}function D5e(t,e,n){typeof t.on=="function"&&a$(t,"error",e,n)}function a$(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function o(l){r.once&&t.removeEventListener(e,o),n(l)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var U5e=YP.exports,N5e={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}};function z5e(t){var e=t.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return e?{key:e[1],value:e[2]}:null}function V5e(t){var e=t.match(/<?([^>]*)>(.*)/);if(!e)return null;var n=e[1],r=e[2].split(";"),o=null,l=r.reduce(function(h,p){var i=z5e(p);return i?i.key==="rel"?(o||(o=i.value),h):(h[i.key]=i.value,h):h},{});return o?{url:n,rel:o,params:l}:null}function Q5e(t){return t?t.split(/,\s*</).reduce(function(e,n){var r=V5e(n);if(!r)return e;var o=r.rel.split(/\s+/);return o.forEach(function(l){e[l]||(e[l]={url:r.url,params:r.params})}),e},{}):{}}var H5e=Q5e,j5e=H5e;function JP(t,e){this.request=t,this.headers=e.headers,this.rawBody=e.body,this.statusCode=e.statusCode;try{this.body=JSON.parse(e.body||"{}")}catch{this.body=e.body}this.links=j5e(this.headers.link)}JP.prototype.hasNextPage=function(){return!!this.links.next};JP.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null};var $5e=JP,CB={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"},KU=CB;function G5e(t){var e=t.type||KU.ERROR_HTTP,n;if(t.body)try{n=JSON.parse(t.body)}catch{n=t.body}else n=null;var r=t.message||null;r||(typeof n=="string"?r=n:n&&typeof n.message=="string"?r=n.message:e===KU.ERROR_REQUEST_ABORTED&&(r="Request aborted")),this.message=r,this.type=e,this.statusCode=t.statusCode||null,this.request=t.request,this.body=n}var K5e=G5e;function q5e(t){var e=t.indexOf(":"),n=t.substring(0,e).trim().toLowerCase(),r=t.substring(e+1).trim();return{name:n,value:r}}function W5e(t){var e={};return t&&t.trim().split(/[\r|\n]+/).forEach(function(n){var r=q5e(n);e[r.name]=r.value}),e}var X5e=W5e,Z5e=$5e,qU=K5e,bT=CB,Y5e=X5e,oE={};function J5e(t){var e=oE[t.id];e&&(e.abort(),delete oE[t.id])}function e4e(t,e){return new Z5e(t,{body:e.response,headers:Y5e(e.getAllResponseHeaders()),statusCode:e.status})}function WU(t){var e=t.total,n=t.loaded,r=100*n/e;return{total:e,transferred:n,percent:r}}function l$(t,e){return new Promise(function(n,r){e.onprogress=function(h){t.emitter.emit(bT.EVENT_PROGRESS_DOWNLOAD,WU(h))};var o=t.file;o&&(e.upload.onprogress=function(h){t.emitter.emit(bT.EVENT_PROGRESS_UPLOAD,WU(h))}),e.onerror=function(h){r(h)},e.onabort=function(){var h=new qU({request:t,type:bT.ERROR_REQUEST_ABORTED});r(h)},e.onload=function(){if(delete oE[t.id],e.status<200||e.status>=400){var h=new qU({request:t,body:e.response,statusCode:e.status});r(h);return}n(e)};var l=t.body;typeof l=="string"?e.send(l):l?e.send(JSON.stringify(l)):o?e.send(o):e.send(),oE[t.id]=e}).then(function(n){return e4e(t,n)})}function c$(t,e){var n=t.url(e),r=new window.XMLHttpRequest;return r.open(t.method,n),Object.keys(t.headers).forEach(function(o){r.setRequestHeader(o,t.headers[o])}),r}function t4e(t){return Promise.resolve().then(function(){var e=c$(t,t.client.accessToken);return l$(t,e)})}var n4e={browserAbort:J5e,sendRequestXhr:l$,browserSend:t4e,createRequestXhr:c$},sE={exports:{}};/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */sE.exports;(function(t,e){(function(n){var r=e,o=t&&t.exports==r&&t,l=typeof dd=="object"&&dd;(l.global===l||l.window===l)&&(n=l);var h=function(G){this.message=G};h.prototype=new Error,h.prototype.name="InvalidCharacterError";var p=function(G){throw new h(G)},i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b=/[\t\n\f\r ]/g,E=function(G){G=String(G).replace(b,"");var q=G.length;q%4==0&&(G=G.replace(/==?$/,""),q=G.length),(q%4==1||/[^+a-zA-Z0-9/]/.test(G))&&p("Invalid character: the string to be decoded is not correctly encoded.");for(var Z=0,Y,te,be="",Pe=-1;++Pe<q;)te=i.indexOf(G.charAt(Pe)),Y=Z%4?Y*64+te:te,Z++%4&&(be+=String.fromCharCode(255&Y>>(-2*Z&6)));return be},I=function(G){G=String(G),/[^\0-\xFF]/.test(G)&&p("The string to be encoded contains characters outside of the Latin1 range.");for(var q=G.length%3,Z="",Y=-1,te,be,Pe,Se,Ie=G.length-q;++Y<Ie;)te=G.charCodeAt(Y)<<16,be=G.charCodeAt(++Y)<<8,Pe=G.charCodeAt(++Y),Se=te+be+Pe,Z+=i.charAt(Se>>18&63)+i.charAt(Se>>12&63)+i.charAt(Se>>6&63)+i.charAt(Se&63);return q==2?(te=G.charCodeAt(Y)<<8,be=G.charCodeAt(++Y),Se=te+be,Z+=i.charAt(Se>>10)+i.charAt(Se>>4&63)+i.charAt(Se<<2&63)+"="):q==1&&(Se=G.charCodeAt(Y),Z+=i.charAt(Se>>2)+i.charAt(Se<<4&63)+"=="),Z},O={encode:I,decode:E,version:"0.1.0"};if(r&&!r.nodeType)if(o)o.exports=O;else for(var M in O)O.hasOwnProperty(M)&&(r[M]=O[M]);else n.base64=O})(dd)})(sE,sE.exports);var r4e=sE.exports,i4e=r4e,wT={};function o4e(t){if(wT[t])return wT[t];var e=t.split("."),n=e[0],r=e[1];if(!r)throw new Error("Invalid token");var o=s4e(r),l={usage:n,user:o.u};return jm(o,"a")&&(l.authorization=o.a),jm(o,"exp")&&(l.expires=o.exp*1e3),jm(o,"iat")&&(l.created=o.iat*1e3),jm(o,"scopes")&&(l.scopes=o.scopes),jm(o,"client")&&(l.client=o.client),jm(o,"ll")&&(l.lastLogin=o.ll),jm(o,"iu")&&(l.impersonator=o.iu),wT[t]=l,l}function s4e(t){try{return JSON.parse(i4e.decode(t))}catch{throw new Error("Invalid token")}}function jm(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var u$=o4e,h$={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function o(i,b,E){this.fn=i,this.context=b,this.once=E||!1}function l(i,b,E,I,O){if(typeof E!="function")throw new TypeError("The listener must be a function");var M=new o(E,I||i,O),G=n?n+b:b;return i._events[G]?i._events[G].fn?i._events[G]=[i._events[G],M]:i._events[G].push(M):(i._events[G]=M,i._eventsCount++),i}function h(i,b){--i._eventsCount===0?i._events=new r:delete i._events[b]}function p(){this._events=new r,this._eventsCount=0}p.prototype.eventNames=function(){var b=[],E,I;if(this._eventsCount===0)return b;for(I in E=this._events)e.call(E,I)&&b.push(n?I.slice(1):I);return Object.getOwnPropertySymbols?b.concat(Object.getOwnPropertySymbols(E)):b},p.prototype.listeners=function(b){var E=n?n+b:b,I=this._events[E];if(!I)return[];if(I.fn)return[I.fn];for(var O=0,M=I.length,G=new Array(M);O<M;O++)G[O]=I[O].fn;return G},p.prototype.listenerCount=function(b){var E=n?n+b:b,I=this._events[E];return I?I.fn?1:I.length:0},p.prototype.emit=function(b,E,I,O,M,G){var q=n?n+b:b;if(!this._events[q])return!1;var Z=this._events[q],Y=arguments.length,te,be;if(Z.fn){switch(Z.once&&this.removeListener(b,Z.fn,void 0,!0),Y){case 1:return Z.fn.call(Z.context),!0;case 2:return Z.fn.call(Z.context,E),!0;case 3:return Z.fn.call(Z.context,E,I),!0;case 4:return Z.fn.call(Z.context,E,I,O),!0;case 5:return Z.fn.call(Z.context,E,I,O,M),!0;case 6:return Z.fn.call(Z.context,E,I,O,M,G),!0}for(be=1,te=new Array(Y-1);be<Y;be++)te[be-1]=arguments[be];Z.fn.apply(Z.context,te)}else{var Pe=Z.length,Se;for(be=0;be<Pe;be++)switch(Z[be].once&&this.removeListener(b,Z[be].fn,void 0,!0),Y){case 1:Z[be].fn.call(Z[be].context);break;case 2:Z[be].fn.call(Z[be].context,E);break;case 3:Z[be].fn.call(Z[be].context,E,I);break;case 4:Z[be].fn.call(Z[be].context,E,I,O);break;default:if(!te)for(Se=1,te=new Array(Y-1);Se<Y;Se++)te[Se-1]=arguments[Se];Z[be].fn.apply(Z[be].context,te)}}return!0},p.prototype.on=function(b,E,I){return l(this,b,E,I,!1)},p.prototype.once=function(b,E,I){return l(this,b,E,I,!0)},p.prototype.removeListener=function(b,E,I,O){var M=n?n+b:b;if(!this._events[M])return this;if(!E)return h(this,M),this;var G=this._events[M];if(G.fn)G.fn===E&&(!O||G.once)&&(!I||G.context===I)&&h(this,M);else{for(var q=0,Z=[],Y=G.length;q<Y;q++)(G[q].fn!==E||O&&!G[q].once||I&&G[q].context!==I)&&Z.push(G[q]);Z.length?this._events[M]=Z.length===1?Z[0]:Z:h(this,M)}return this},p.prototype.removeAllListeners=function(b){var E;return b?(E=n?n+b:b,this._events[E]&&h(this,E)):(this._events=new r,this._eventsCount=0),this},p.prototype.off=p.prototype.removeListener,p.prototype.addListener=p.prototype.on,p.prefixed=n,p.EventEmitter=p,t.exports=p})(h$);var a4e=h$.exports;function l4e(t){return t.map(encodeURIComponent).join(",")}function d$(t){return Array.isArray(t)?l4e(t):encodeURIComponent(String(t))}function f$(t,e,n){if(n===!1||n===null)return t;var r=/\?/.test(t)?"&":"?",o=encodeURIComponent(e);return n!==void 0&&n!==""&&n!==!0&&(o+="="+d$(n)),""+t+r+o}function c4e(t,e){if(!e)return t;var n=t;return Object.keys(e).forEach(function(r){var o=e[r];o!==void 0&&(Array.isArray(o)&&(o=o.filter(function(l){return l!=null}).join(",")),n=f$(n,r,o))}),n}function u4e(t,e){if(!e||t.slice(0,4)==="http")return t;var n=t[0]==="/"?"":"/";return""+e.replace(/\/$/,"")+n+t}function h4e(t,e){return e?t.replace(/\/:([a-zA-Z0-9]+)/g,function(n,r){var o=e[r];if(o===void 0)throw new Error("Unspecified route parameter "+r);var l=d$(o);return"/"+l}):t}var d4e={appendQueryObject:c4e,appendQueryParam:f$,prependOrigin:u4e,interpolateRouteParams:h4e},f4e=u$,eL=r0,A4e=a4e,bx=d4e,XU=CB,p4e=1;function am(t,e){if(!t)throw new Error("MapiRequest requires a client");if(!e||!e.path||!e.method)throw new Error("MapiRequest requires an options object with path and method properties");var n={};e.body&&(n["content-type"]="application/json");var r=eL(n,e.headers),o=Object.keys(r).reduce(function(l,h){return l[h.toLowerCase()]=r[h],l},{});this.id=p4e++,this._options=e,this.emitter=new A4e,this.client=t,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=e.path,this.method=e.method,this.origin=e.origin||t.origin,this.query=e.query||{},this.params=e.params||{},this.body=e.body||null,this.file=e.file||null,this.encoding=e.encoding||"utf8",this.sendFileAs=e.sendFileAs||null,this.headers=o}am.prototype.url=function(e){var n=bx.prependOrigin(this.path,this.origin);n=bx.appendQueryObject(n,this.query);var r=this.params,o=e??this.client.accessToken;if(o){n=bx.appendQueryParam(n,"access_token",o);var l=f4e(o).user;r=eL({ownerId:l},r)}return n=bx.interpolateRouteParams(n,r),n};am.prototype.send=function(){var e=this;if(e.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return e.sent=!0,e.client.sendRequest(e).then(function(n){return e.response=n,e.emitter.emit(XU.EVENT_RESPONSE,n),n},function(n){throw e.error=n,e.emitter.emit(XU.EVENT_ERROR,n),n})};am.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),!(this.response||this.error||this.aborted)&&(this.aborted=!0,this.client.abortRequest(this))};am.prototype.eachPage=function(e){var n=this;function r(h){function p(){delete n._nextPageRequest;var i=h.nextPage();i&&(n._nextPageRequest=i,l(i))}e(null,h,p)}function o(h){e(h,null,function(){})}function l(h){h.send().then(r,o)}l(this)};am.prototype.clone=function(){return this._extend()};am.prototype._extend=function(e){var n=eL(this._options,e);return new am(this.client,n)};var m4e=am,g4e=u$,y4e=m4e,_4e=CB;function A$(t){if(!t||!t.accessToken)throw new Error("Cannot create a client without an access token");g4e(t.accessToken),this.accessToken=t.accessToken,this.origin=t.origin||_4e.API_ORIGIN}A$.prototype.createRequest=function(e){return new y4e(this,e)};var p$=A$,m$=n4e,g$=p$;function D_(t){g$.call(this,t)}D_.prototype=Object.create(g$.prototype);D_.prototype.constructor=D_;D_.prototype.sendRequest=m$.browserSend;D_.prototype.abortRequest=m$.browserAbort;function v4e(t){return new D_(t)}var y$=v4e,b4e=y$,w4e=b4e,x4e=Object.prototype.toString,C4e=function(t){var e;return x4e.call(t)==="[object Object]"&&(e=Object.getPrototypeOf(t),e===null||e===Object.getPrototypeOf({}))},E4e=C4e,B4e=r0,_$="value",xT=`
  `,Is={};Is.assert=function(t,e){return e=e||{},function(n){var r=lm(t,n);if(r){var o=tL(r,e);throw e.apiName&&(o=e.apiName+": "+o),new Error(o)}}};Is.shape=function(e){var n=P4e(e);return function(o){var l=lm(Is.plainObject,o);if(l)return l;for(var h,p,i=[],b=0;b<n.length;b++)h=n[b].key,p=n[b].value,l=lm(p,o[h]),l&&i.push([h].concat(l));return i.length<2?i[0]:function(E){i=i.map(function(M){var G=M[0],q=tL(M,E).split(`
`).join(xT);return"- "+G+": "+q});var I=E.path.join("."),O=I===_$?"":" of "+I;return"The following properties"+O+" have invalid values:"+xT+i.join(xT)}}};Is.strictShape=function(e){var n=Is.shape(e);return function(o){var l=n(o);if(l)return l;var h=Object.keys(o).reduce(function(p,i){return e[i]===void 0&&p.push(i),p},[]);if(h.length!==0)return function(){return"The following keys are invalid: "+h.join(", ")}}};Is.arrayOf=function(e){return v$(e)};Is.tuple=function(){var e=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return v$(e)};function v$(t){var e=Array.isArray(t),n=function(r){return e?t[r]:t};return function(o){var l=lm(Is.plainArray,o);if(l)return l;if(e&&o.length!==t.length)return"an array with "+t.length+" items";for(var h=0;h<o.length;h++)if(l=lm(n(h),o[h]),l)return[h].concat(l)}}Is.required=function(e){function n(r){return r==null?function(o){return b$(o,w$(o.path)?"cannot be undefined/null.":"is required.")}:e.apply(this,arguments)}return n.__required=!0,n};Is.oneOfType=function(){var e=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(r){var o=e.map(function(l){return lm(l,r)}).filter(Boolean);if(o.length===e.length)return o.every(function(l){return l.length===1&&typeof l[0]=="string"})?S4e(o.map(function(l){return l[0]})):o.reduce(function(l,h){return h.length>l.length?h:l})}};Is.equal=function(e){return function(r){if(r!==e)return JSON.stringify(e)}};Is.oneOf=function(){var e=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),n=e.map(function(r){return Is.equal(r)});return Is.oneOfType.apply(this,n)};Is.range=function(e){var n=e[0],r=e[1];return function(l){var h=lm(Is.number,l);if(h||l<n||l>r)return"number between "+n+" & "+r+" (inclusive)"}};Is.any=function(){};Is.boolean=function(e){if(typeof e!="boolean")return"boolean"};Is.number=function(e){if(typeof e!="number")return"number"};Is.plainArray=function(e){if(!Array.isArray(e))return"array"};Is.plainObject=function(e){if(!E4e(e))return"object"};Is.string=function(e){if(typeof e!="string")return"string"};Is.func=function(e){if(typeof e!="function")return"function"};function lm(t,e){if(!(e==null&&!t.hasOwnProperty("__required"))){var n=t(e);if(n)return Array.isArray(n)?n:[n]}}function tL(t,e){var n=t.length,r=t[n-1],o=t.slice(0,n-1);return o.length===0&&(o=[_$]),e=B4e(e,{path:o}),typeof r=="function"?r(e):b$(e,T4e(r))}function S4e(t){return t.length<2?t[0]:t.length===2?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t.slice(-1)}function T4e(t){return"must be "+I4e(t)+"."}function I4e(t){return/^an? /.test(t)?t:/^[aeiou]/i.test(t)?"an "+t:/^[a-z]/i.test(t)?"a "+t:t}function b$(t,e){var n=w$(t.path),r=t.path.join(".")+" "+e,o=n?"Item at position ":"";return o+r}function w$(t){return typeof t[t.length-1]=="number"||typeof t[0]=="number"}function P4e(t){return Object.keys(t||{}).map(function(e){return{key:e,value:t[e]}})}Is.validate=lm;Is.processMessage=tL;var L4e=Is,F4e=r0,u_=L4e;function R4e(t){if(typeof window<"u")return t instanceof dd.Blob||t instanceof dd.ArrayBuffer?void 0:"Blob or ArrayBuffer";if(!(typeof t=="string"||t.pipe!==void 0))return"Filename or Readable stream"}function k4e(t,e){return u_.assert(u_.strictShape(t),e)}function M4e(t){var e="date";if(typeof t=="boolean")return e;try{var n=new Date(t);if(n.getTime&&isNaN(n.getTime()))return e}catch{return e}}function O4e(t){return u_.tuple(u_.number,u_.number)(t)}var D4e=F4e(u_,{file:R4e,date:M4e,coordinates:O4e,assertShape:k4e});function U4e(t,e){var n=function(r,o){return e.indexOf(r)!==-1&&o!==void 0};return typeof e=="function"&&(n=e),Object.keys(t).filter(function(r){return n(r,t[r])}).reduce(function(r,o){return r[o]=t[o],r},{})}var N4e=U4e;function z4e(t,e){return Object.keys(t).reduce(function(n,r){return n[r]=e(r,t[r]),n},{})}var V4e=z4e,Q4e=V4e;function H4e(t){return Q4e(t,function(e,n){return typeof n=="boolean"?JSON.stringify(n):n})}var j4e=H4e,$4e=p$,G4e=y$;function K4e(t){return function(e){var n;$4e.prototype.isPrototypeOf(e)?n=e:n=G4e(e);var r=Object.create(t);return r.client=n,r}}var q4e=K4e,x$=r0,ao=D4e,aE=N4e,C$=j4e,W4e=q4e,nL={},E$=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];nL.forwardGeocode=function(t){ao.assertShape({query:ao.required(ao.string),mode:ao.oneOf("mapbox.places","mapbox.places-permanent"),countries:ao.arrayOf(ao.string),proximity:ao.oneOf(ao.coordinates,"ip"),types:ao.arrayOf(ao.oneOf(E$)),autocomplete:ao.boolean,bbox:ao.arrayOf(ao.number),limit:ao.number,language:ao.arrayOf(ao.string),routing:ao.boolean,fuzzyMatch:ao.boolean,worldview:ao.string,session_token:ao.string})(t),t.mode=t.mode||"mapbox.places";var e=C$(x$({country:t.countries},aE(t,["proximity","types","autocomplete","bbox","limit","language","routing","fuzzyMatch","worldview","session_token"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:aE(t,["mode","query"]),query:e})};nL.reverseGeocode=function(t){ao.assertShape({query:ao.required(ao.coordinates),mode:ao.oneOf("mapbox.places","mapbox.places-permanent"),countries:ao.arrayOf(ao.string),types:ao.arrayOf(ao.oneOf(E$)),bbox:ao.arrayOf(ao.number),limit:ao.number,language:ao.arrayOf(ao.string),reverseMode:ao.oneOf("distance","score"),routing:ao.boolean,worldview:ao.string,session_token:ao.string})(t),t.mode=t.mode||"mapbox.places";var e=C$(x$({country:t.countries},aE(t,["country","types","bbox","limit","language","reverseMode","routing","worldview","session_token"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:aE(t,["mode","query"]),query:e})};var X4e=W4e(nL);let Z4e="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",B$=t=>crypto.getRandomValues(new Uint8Array(t)),S$=(t,e,n)=>{let r=(2<<Math.log(t.length-1)/Math.LN2)-1,o=-~(1.6*r*e/t.length);return(l=e)=>{let h="";for(;;){let p=n(o),i=o;for(;i--;)if(h+=t[p[i]&r]||"",h.length===l)return h}}},Y4e=(t,e=21)=>S$(t,e,B$),J4e=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");const ePe=Object.freeze(Object.defineProperty({__proto__:null,customAlphabet:Y4e,customRandom:S$,nanoid:J4e,random:B$,urlAlphabet:Z4e},Symbol.toStringTag,{value:"Module"})),tPe=r5e(ePe);var nPe=tPe.nanoid;function T$(t){this.origin=t.origin||"https://api.mapbox.com",this.endpoint="events/v2",this.access_token=t.accessToken,this.version="0.3.0",this.pluginSessionID=this.generateSessionID(),this.sessionIncrementer=0,this.userAgent=this.getUserAgent(),this.options=t,this.send=this.send.bind(this),this.countries=t.countries?t.countries.split(","):null,this.types=t.types?t.types.split(","):null,this.bbox=t.bbox?t.bbox:null,this.language=t.language?t.language.split(","):null,this.limit=t.limit?+t.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(t),this.eventQueue=new Array,this.flushInterval=t.flushInterval||1e3,this.maxQueueSize=t.maxQueueSize||100,this.timer=this.flushInterval?setTimeout(this.flush.bind(this),this.flushInterval):null,this.lastSentInput="",this.lastSentIndex=0}T$.prototype={select:function(t,e){var n=this.getEventPayload("search.select",e,{selectedFeature:t});if(n&&!(n.resultIndex===this.lastSentIndex&&n.queryString===this.lastSentInput||n.resultIndex==-1))return this.lastSentIndex=n.resultIndex,this.lastSentInput=n.queryString,this.push(n)},start:function(t){var e=this.getEventPayload("search.start",t);if(e)return this.push(e)},keyevent:function(t,e){if(t.key&&!(t.metaKey||[9,27,37,39,13,38,40].indexOf(t.keyCode)!==-1)){var n=this.getEventPayload("search.keystroke",e,{key:t.key});if(n)return this.push(n)}},send:function(t,e){if(!this.enableEventLogging)return e?e():void 0;var n=this.getRequestOptions(t);this.request(n,(function(r){if(r)return this.handleError(r,e);if(e)return e()}).bind(this))},getRequestOptions:function(t){Array.isArray(t)||(t=[t]);var e={method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};return e},getEventPayload:function(t,e,n={}){if(t==="search.select"&&!n.selectedFeature||t==="search.keystroke"&&!n.key)return null;var r;if(!e.options.proximity)r=null;else if(typeof e.options.proximity=="object")r=[e.options.proximity.longitude,e.options.proximity.latitude];else if(e.options.proximity==="ip"){var o=e._headers?e._headers["ip-proximity"]:null;o&&typeof o=="string"?r=o.split(",").map(parseFloat):r=[999,999]}else r=e.options.proximity;var l=e._map?e._map.getZoom():void 0,h={event:t,version:this.getEventSchemaVersion(t),created:+new Date,sessionIdentifier:this.getSessionId(),country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",autocomplete:e.options.autocomplete,fuzzyMatch:e.options.fuzzyMatch,proximity:r,limit:e.options.limit,routing:e.options.routing,worldview:e.options.worldview,mapZoom:l,keyboardLocale:this.locale};if(t==="search.select"?h.queryString=e.inputString:t!="search.select"&&e._inputEl?h.queryString=e._inputEl.value:h.queryString=e.inputString,["search.keystroke","search.select"].includes(t)&&(h.path="geocoding/v5/mapbox.places"),t==="search.keystroke"&&n.key)h.lastAction=n.key;else if(t==="search.select"&&n.selectedFeature){var p=n.selectedFeature,i=this.getSelectedIndex(p,e);if(h.resultIndex=i,h.resultPlaceName=p.place_name,h.resultId=p.id,p.properties&&(h.resultMapboxId=p.properties.mapbox_id),e._typeahead){var b=e._typeahead.data;b&&b.length>0&&(h.suggestionIds=this.getSuggestionIds(b),h.suggestionNames=this.getSuggestionNames(b),h.suggestionTypes=this.getSuggestionTypes(b),h.suggestionSources=this.getSuggestionSources(b))}}return this.validatePayload(h)?h:null},request:function(t,e){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(this.readyState==4)return this.status==204?e(null):e(this.statusText)},n.open(t.method,t.host+"/"+t.path,!0);for(var r in t.headers){var o=t.headers[r];n.setRequestHeader(r,o)}n.send(t.body)},handleError:function(t,e){if(e)return e(t)},generateSessionID:function(){return nPe()},getSessionId:function(){return this.pluginSessionID+"."+this.sessionIncrementer},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(t,e){if(e._typeahead){var n=e._typeahead.data,r=t.id,o=n.map(function(h){return h.id}),l=o.indexOf(r);return l}},getSuggestionIds:function(t){return t.map(function(e){return e.properties?e.properties.mapbox_id||"":e.id||""})},getSuggestionNames:function(t){return t.map(function(e){return e.place_name||""})},getSuggestionTypes:function(t){return t.map(function(e){return e.place_type&&Array.isArray(e.place_type)&&e.place_type[0]||""})},getSuggestionSources:function(t){return t.map(function(e){return e._source||""})},getEventSchemaVersion:function(t){return["search.keystroke","search.select"].includes(t)?"2.2":"2.0"},validatePayload:function(t){if(!t||!t.event)return!1;var e=["event","created","sessionIdentifier","queryString"],n=["event","created","sessionIdentifier","queryString","lastAction"],r=["event","created","sessionIdentifier","queryString","resultIndex","path","suggestionIds"],o=t.event;return o==="search.start"?this.objectHasRequiredProps(t,e):o==="search.keystroke"?this.objectHasRequiredProps(t,n):o==="search.select"?this.objectHasRequiredProps(t,r):!0},objectHasRequiredProps:function(t,e){return e.every(function(n){return n==="queryString"?typeof t[n]=="string"&&t[n].length>0:t[n]!==void 0})},shouldEnableLogging:function(t){return!(t.enableEventLogging===!1||t.origin&&t.origin!=="https://api.mapbox.com")},flush:function(){this.eventQueue.length>0&&(this.send(this.eventQueue),this.eventQueue=new Array),this.timer&&clearTimeout(this.timer),this.flushInterval&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))},push:function(t,e){this.eventQueue.push(t),(this.eventQueue.length>=this.maxQueueSize||e)&&this.flush()},remove:function(){this.flush()}};var rPe=T$,iPe={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"לחפש",ja:"サーチ",lv:"Meklēt",pt:"Procurar",sr:"Претрага",zh:"搜索",cs:"Vyhledávání",hu:"Keresés",ka:"ძიება",nb:"Søke",sk:"Vyhľadávanie",th:"ค้นหา",fi:"Hae",is:"Leita",ko:"수색",pl:"Szukaj",sl:"Iskanje",fa:"جستجو",ru:"Поиск"},oPe={placeholder:iPe},I$={exports:{}};(function(t){(function(e,n,r){t.exports?t.exports=r():e[n]=r()})(dd,"subtag",function(){var e="",n=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function r(i){return i.match(n)||[]}function o(i){return r(i).filter(function(b,E){return b&&E})}function l(i){return i=r(i),{language:i[1]||e,extlang:i[2]||e,script:i[3]||e,region:i[4]||e}}function h(i,b,E){Object.defineProperty(i,b,{value:E,enumerable:!0})}function p(i,b,E){function I(O){return r(O)[i]||e}h(I,"pattern",b),h(l,E,I)}return p(1,/^[a-zA-Z]{2,3}$/,"language"),p(2,/^[a-zA-Z]{3}$/,"extlang"),p(3,/^[a-zA-Z]{4}$/,"script"),p(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),h(l,"split",o),l})})(I$);var sPe=I$.exports;function P$(){}P$.prototype={isSupport:function(){return!!window.navigator.geolocation},getCurrentPosition:function(){const t={enableHighAccuracy:!0};return new Promise(function(e,n){window.navigator.geolocation.getCurrentPosition(e,n,t)})}};var aPe=P$;function lPe(t,e){const n=L$(t),r=["address","street","place","country"];var o;if(typeof e=="function")return e(n);const l=r.indexOf(e);return l===-1?o=r:o=r.slice(l),o.reduce(function(h,p){return n[p]?(h!==""&&(h=h+", "),h+n[p]):h},"")}function L$(t){const e=t.address||"",n=t.text||"",r=t.place_name||"",l={address:r.split(",")[0],houseNumber:e,street:n,placeName:r};return t.context.forEach(function(h){const p=h.id.split(".")[0];l[p]=h.text}),l}const cPe=/^[ ]*(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)[ ]*$/;var uPe={transformFeatureToGeolocationText:lPe,getAddressInfo:L$,REVERSE_GEOCODE_COORD_RGX:cPe},hPe=f5e,dPe=L5e,Km=r0,fPe=U5e.EventEmitter,ZU=N5e,CT=w4e,ET=X4e,APe=rPe,pPe=oPe,mPe=sPe,gPe=aPe,YU=uPe;const gp={FORWARD:0,LOCAL:1,REVERSE:2};function yPe(){var t=document.createElement("div");return t.className="mapboxgl-ctrl-geocoder--powered-by",t.innerHTML='<a href="https://www.mapbox.com/search-service" target="_blank">Powered by Mapbox</a>',t}function F$(t){this._eventEmitter=new fPe,this.options=Km({},this.options,t),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geolocation=new gPe}F$.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,minLength:2,reverseGeocode:!1,flipCoordinates:!1,limit:5,origin:"https://api.mapbox.com",enableEventLogging:!0,marker:!0,mapboxgl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,enableGeolocation:!1,addressAccuracy:"street",getItemValue:function(t){return t.place_name},render:function(t){var e=t.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title">'+e[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address">'+e.splice(1,e.length).join(",")+"</div></div>"}},_headers:{},addTo:function(t){function e(n,r){if(!document.body.contains(r))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const o=n.onAdd();r.appendChild(o)}if(t._controlContainer)t.addControl(this);else if(t instanceof HTMLElement)e(this,t);else if(typeof t=="string"){const n=document.querySelectorAll(t);if(n.length===0)throw new Error("Element ",t,"not found.");if(n.length>1)throw new Error("Geocoder can only be added to a single html element");e(this,n[0])}else throw new Error("Error: addTo must be a mapbox-gl-js map, an html element, or a CSS selector query for a single html element")},onAdd:function(t){if(t&&typeof t!="string"&&(this._map=t),this.setLanguage(),this.options.localGeocoderOnly||(this.geocoderService=ET(CT({accessToken:this.options.accessToken,origin:this.options.origin}))),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this.eventManager=new APe(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this),this._geolocateUser=this._geolocateUser.bind(this);var e=this.container=document.createElement("div");e.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var n=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",dPe(this._onKeyDown,200)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton),this._inputEl.addEventListener("keyup",(function(b){this.eventManager.keyevent(b,this)}).bind(this));var r=document.createElement("div");r.classList.add("mapboxgl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button";var o=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');if(this._clearEl.appendChild(o),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),r.appendChild(this._clearEl),r.appendChild(this._loadingEl),e.appendChild(n),e.appendChild(this._inputEl),e.appendChild(r),this.options.enableGeolocation&&this.geolocation.isSupport()){this._geolocateEl=document.createElement("button"),this._geolocateEl.setAttribute("aria-label","Geolocate"),this._geolocateEl.addEventListener("click",this._geolocateUser),this._geolocateEl.className="mapboxgl-ctrl-geocoder--button";var l=this.createIcon("geolocate",'<path d="M12.999 3.677L2.042 8.269c-.962.403-.747 1.823.29 1.912l5.032.431.431 5.033c.089 1.037 1.509 1.252 1.912.29l4.592-10.957c.345-.822-.477-1.644-1.299-1.299z" fill="#4264fb"/>');this._geolocateEl.appendChild(l),r.appendChild(this._geolocateEl),this._showGeolocateButton()}var h=this._typeahead=new hPe(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit});this.setRenderFunction(this.options.render),h.getItemValue=this.options.getItemValue;var p=h.list.draw,i=this._footerNode=yPe();return h.list.draw=function(){p.call(this),i.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),i.addEventListener("mouseup",(function(){this.selectingListItem=!1}).bind(this)),this.element.appendChild(i)},this.mapMarker=null,this._handleMarker=this._handleMarker.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._mapboxgl=this.options.mapboxgl,!this._mapboxgl&&this.options.marker&&(console.error("No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl."),this.options.marker=!1)),e},_geolocateUser:function(){this._hideGeolocateButton(),this._showLoadingIcon(),this.geolocation.getCurrentPosition().then((function(t){this._hideLoadingIcon();const e={geometry:{type:"Point",coordinates:[t.coords.longitude,t.coords.latitude]}};this._handleMarker(e),this._fly(e),this._typeahead.clear(),this._typeahead.selected=!0,this.lastSelected=JSON.stringify(e),this._showClearButton(),this.fresh=!1;const n={limit:1,language:[this.options.language],query:e.geometry.coordinates,types:["address"]};if(this.options.localGeocoderOnly){const r=e.geometry.coordinates[0]+","+e.geometry.coordinates[1];this._setInputValue(r),this._eventEmitter.emit("result",{result:e})}else this.geocoderService.reverseGeocode(n).send().then((function(r){const o=r.body.features[0];if(o){const l=YU.transformFeatureToGeolocationText(o,this.options.addressAccuracy);this._setInputValue(l),o.user_coordinates=e.geometry.coordinates,this._eventEmitter.emit("result",{result:o})}else this._eventEmitter.emit("result",{result:{user_coordinates:e.geometry.coordinates}})}).bind(this))}).bind(this)).catch((function(t){t.code===1?this._renderUserDeniedGeolocationError():this._renderLocationError(),this._hideLoadingIcon(),this._showGeolocateButton(),this._hideAttribution()}).bind(this))},createIcon:function(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+t),n.setAttribute("viewBox","0 0 18 18"),n.setAttribute("xml:space","preserve"),n.setAttribute("width",18),n.setAttribute("height",18),n.innerHTML=e,n},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_setInputValue:function(t){this._inputEl.value=t,setTimeout((function(){this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0)}).bind(this),1)},_onPaste:function(t){var e=(t.clipboardData||window.clipboardData).getData("text");e.length>=this.options.minLength&&this._geocode(e)},_onKeyDown:function(t){var e=27,n=9;if(t.keyCode===e&&this.options.clearAndBlurOnEsc)return this._clear(t),this._inputEl.blur();var r=t.target&&t.target.shadowRoot?t.target.shadowRoot.activeElement:t.target,o=r?r.value:"";if(!o)return this.fresh=!0,t.keyCode!==n&&this.clear(t),this._showGeolocateButton(),this._hideClearButton();this._hideGeolocateButton(),!(t.metaKey||[n,e,37,39,13,38,40].indexOf(t.keyCode)!==-1)&&r.value.length>=this.options.minLength&&this._geocode(r.value)},_showButton:function(){this._typeahead.selected&&this._showClearButton()},_hideButton:function(){this._typeahead.selected&&this._hideClearButton()},_showClearButton:function(){this._clearEl.style.display="block"},_hideClearButton:function(){this._clearEl.style.display="none"},_showGeolocateButton:function(){this._geolocateEl&&this.geolocation.isSupport()&&(this._geolocateEl.style.display="block")},_hideGeolocateButton:function(){this._geolocateEl&&(this._geolocateEl.style.display="none")},_showLoadingIcon:function(){this._loadingEl.style.display="block"},_hideLoadingIcon:function(){this._loadingEl.style.display="none"},_showAttribution:function(){this._footerNode.style.display="block"},_hideAttribution:function(){this._footerNode.style.display="none"},_onBlur:function(t){this.options.clearOnBlur&&this._clearOnBlur(t),this.options.collapsed&&this._collapse()},_onChange:function(){var t=this._typeahead.selected;t&&JSON.stringify(t)!==this.lastSelected&&(this._hideClearButton(),this.options.flyTo&&this._fly(t),this.options.marker&&this._mapboxgl&&this._handleMarker(t),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(t),this._eventEmitter.emit("result",{result:t}),this.eventManager.select(t,this))},_fly:function(t){var e;if(t.properties&&ZU[t.properties.short_code])e=Km({},this.options.flyTo),this._map&&this._map.fitBounds(ZU[t.properties.short_code].bbox,e);else if(t.bbox){var n=t.bbox;e=Km({},this.options.flyTo),this._map&&this._map.fitBounds([[n[0],n[1]],[n[2],n[3]]],e)}else{var r={zoom:this.options.zoom};e=Km({},r,this.options.flyTo),t.center?e.center=t.center:t.geometry&&t.geometry.type&&t.geometry.type==="Point"&&t.geometry.coordinates&&(e.center=t.geometry.coordinates),this._map&&this._map.flyTo(e)}},_requestType:function(t,e){var n;return t.localGeocoderOnly?n=gp.LOCAL:t.reverseGeocode&&YU.REVERSE_GEOCODE_COORD_RGX.test(e)?n=gp.REVERSE:n=gp.FORWARD,n},_setupConfig:function(t,e){const n=["bbox","limit","proximity","countries","types","language","reverseMode","mode","autocomplete","fuzzyMatch","routing","worldview"],r=/[\s,]+/;var o=this,l=n.reduce(function(p,i){if(o.options[i]===void 0||o.options[i]===null)return p;["countries","types","language"].indexOf(i)>-1?p[i]=o.options[i].split(r):p[i]=o.options[i];const b=typeof o.options[i].longitude=="number"&&typeof o.options[i].latitude=="number";if(i==="proximity"&&b){const E=o.options[i].longitude,I=o.options[i].latitude;p[i]=[E,I]}return p},{});switch(t){case gp.REVERSE:{var h=e.split(r).map(function(p){return parseFloat(p,10)});o.options.flipCoordinates||h.reverse(),l.types&&l.types[0],l=Km(l,{query:h,limit:1}),["proximity","autocomplete","fuzzyMatch","bbox"].forEach(function(p){p in l&&delete l[p]})}break;case gp.FORWARD:{const p=e.trim();/^(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)?$/.test(p)&&(e=e.replace(/,/g," ")),l=Km(l,{query:e})}break}return l.session_token=this.eventManager.getSessionId(),l},_geocode:function(t){this.inputString=t,this._showLoadingIcon(),this._eventEmitter.emit("loading",{query:t});const e=this._requestType(this.options,t),n=this._setupConfig(e,t);var r;switch(e){case gp.LOCAL:r=Promise.resolve();break;case gp.FORWARD:r=this.geocoderService.forwardGeocode(n).send();break;case gp.REVERSE:r=this.geocoderService.reverseGeocode(n).send();break}var o=this.options.localGeocoder?this.options.localGeocoder(t)||[]:[],l=[],h=null;return r.catch((function(p){h=p}).bind(this)).then((function(p){this._hideLoadingIcon();var i={};return p?p.statusCode=="200"&&(i=p.body,i.request=p.request,i.headers=p.headers,this._headers=p.headers):i={type:"FeatureCollection",features:[]},i.config=n,this.fresh&&(this.eventManager.start(this),this.fresh=!1),i.features&&i.features.length&&i.features.map(function(b){b._source="mapbox"}),i.features=i.features?o.concat(i.features):o,this.options.externalGeocoder?(l=this.options.externalGeocoder(t,i.features)||Promise.resolve([]),l.then(function(b){return i.features=i.features?b.concat(i.features):b,i},function(){return i})):i}).bind(this)).then((function(p){if(h)throw h;this.options.filter&&p.features.length&&(p.features=p.features.filter(this.options.filter)),p.features.length?(this._showClearButton(),this._hideGeolocateButton(),this._showAttribution(),this._eventEmitter.emit("results",p),this._typeahead.update(p.features)):(this._hideClearButton(),this._hideAttribution(),this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",p))}).bind(this)).catch((function(p){this._hideLoadingIcon(),this._hideAttribution(),o.length&&this.options.localGeocoder||l.length&&this.options.externalGeocoder?(this._showClearButton(),this._hideGeolocateButton(),this._typeahead.update(o)):(this._hideClearButton(),this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:o}),this._eventEmitter.emit("error",{error:p})}).bind(this)),r},_clear:function(t){t&&t.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this.eventManager.sessionIncrementer++,this._onChange(),this._hideClearButton(),this._showGeolocateButton(),this._removeMarker(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(t){this._clear(t),this._inputEl.focus()},_clearOnBlur:function(t){var e=this;t.relatedTarget&&e._clear(t)},_onQueryResult:function(t){var e=t.body;if(e.features.length){var n=e.features[0];this._typeahead.selected=n,this._inputEl.value=n.place_name,this._onChange()}},_updateProximity:function(){if(!(!this._map||!this.options.trackProximity))if(this._map.getZoom()>9){var t=this._map.getCenter().wrap();this.setProximity({longitude:t.lng,latitude:t.lat},!1)}else this.setProximity(null,!1)},_collapse:function(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed")},query:function(t){return this._geocode(t).then(this._onQueryResult),this},_renderError:function(){var t="<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>";this._renderMessage(t)},_renderLocationError:function(){var t="<div class='mapbox-gl-geocoder--error'>A location error has occurred</div>";this._renderMessage(t)},_renderNoResults:function(){var t="<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>";this._renderMessage(t)},_renderUserDeniedGeolocationError:function(){var t="<div class='mapbox-gl-geocoder--error'>Geolocation permission denied</div>";this._renderMessage(t)},_renderMessage:function(t){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(t)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var t=this.options.language.split(",")[0],e=mPe.language(t),n=pPe.placeholder[e];if(n)return n}return"Search"},setInput:function(t,e){return e===void 0&&(e=!1),this._inputEl.value=t,this._typeahead.selected=null,this._typeahead.clear(),t.length>=this.options.minLength&&(e?this._geocode(t):this._onChange()),this},setProximity:function(t,e=!0){return this.options.proximity=t,e&&(this.options.trackProximity=!1),this},getProximity:function(){return this.options.proximity},setRenderFunction:function(t){return t&&typeof t=="function"&&(this._typeahead.render=t),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(t){var e=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=t||this.options.language||e,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(t){return this.options.zoom=t,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(t){return this.options.flyTo=t,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(t){return this.options.placeholder=t||this._getPlaceholderText(),this._inputEl.placeholder=this.options.placeholder,this._inputEl.setAttribute("aria-label",this.options.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(t){return this.options.bbox=t,this},getCountries:function(){return this.options.countries},setCountries:function(t){return this.options.countries=t,this},getTypes:function(){return this.options.types},setTypes:function(t){return this.options.types=t,this},getMinLength:function(){return this.options.minLength},setMinLength:function(t){return this.options.minLength=t,this._typeahead&&(this._typeahead.options.minLength=t),this},getLimit:function(){return this.options.limit},setLimit:function(t){return this.options.limit=t,this._typeahead&&(this._typeahead.options.limit=t),this},getFilter:function(){return this.options.filter},setFilter:function(t){return this.options.filter=t,this},setOrigin:function(t){return this.options.origin=t,this.geocoderService=ET(CT({accessToken:this.options.accessToken,origin:this.options.origin})),this},getOrigin:function(){return this.options.origin},setAccessToken:function(t){return this.options.accessToken=t,this.geocoderService=ET(CT({accessToken:this.options.accessToken,origin:this.options.origin})),this},setAutocomplete:function(t){return this.options.autocomplete=t,this},getAutocomplete:function(){return this.options.autocomplete},setFuzzyMatch:function(t){return this.options.fuzzyMatch=t,this},getFuzzyMatch:function(){return this.options.fuzzyMatch},setRouting:function(t){return this.options.routing=t,this},getRouting:function(){return this.options.routing},setWorldview:function(t){return this.options.worldview=t,this},getWorldview:function(){return this.options.worldview},_handleMarker:function(t){if(this._map){this._removeMarker();var e={color:"#4668F2"},n=Km({},e,this.options.marker);return this.mapMarker=new this._mapboxgl.Marker(n),t.center?this.mapMarker.setLngLat(t.center).addTo(this._map):t.geometry&&t.geometry.type&&t.geometry.type==="Point"&&t.geometry.coordinates&&this.mapMarker.setLngLat(t.geometry.coordinates).addTo(this._map),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},on:function(t,e){return this._eventEmitter.on(t,e),this},off:function(t,e){return this._eventEmitter.removeListener(t,e),this.eventManager.remove(),this}};var _Pe=F$;const vPe=Wj(_Pe),bPe={name:"App",data(){return{map:null,isLoading:!0}},mounted(){tA.accessToken="pk.eyJ1IjoiYWlyaXVzIiwiYSI6ImNtMjJvZWRlbTA5YTIycXB0cTBodjZ4bngifQ.THt_BKITbJyK_BkHaSjFRQ",this.map=new tA.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[144.9631,-37.8136],zoom:12}),new tA.Marker({color:"#ff5733",scale:1.5}).setLngLat([144.9631,-37.8136]).setPopup(new tA.Popup().setText("Melbourne City Center")).addTo(this.map),this.map.on("load",()=>{this.isLoading=!1}),this.addSearchFeature(),this.addNavigationFeature(),this.addZoomControl()},methods:{addSearchFeature(){const t=new vPe({accessToken:tA.accessToken,mapboxgl:tA,marker:!1,proximity:{longitude:-74.006,latitude:40.7128}});document.getElementById("search").appendChild(t.onAdd(this.map)),t.on("result",e=>{const n=e.result.geometry.coordinates;this.clearMarkers(),new tA.Marker().setLngLat(n).setPopup(new tA.Popup().setText(e.result.place_name)).addTo(this.map),this.map.flyTo({center:n,zoom:14})})},clearMarkers(){const t=document.getElementsByClassName("mapboxgl-marker");for(;t[0];)t[0].parentNode.removeChild(t[0])},addNavigationFeature(){const t=[-74.006,40.7128],e=[-73.935242,40.73061],n=`https://api.mapbox.com/directions/v5/mapbox/driving/${t.join(",")};${e.join(",")}?geometries=geojson&access_token=${tA.accessToken}`;fetch(n).then(r=>r.json()).then(r=>{const o=r.routes[0].geometry;this.map.addLayer({id:"route",type:"line",source:{type:"geojson",data:{type:"Feature",properties:{},geometry:o}},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#3887be","line-width":4,"line-opacity":.8}})}).catch(r=>console.error("Error fetching route:",r))},addZoomControl(){const t=document.createElement("button");t.className="zoom-button",t.innerHTML='<span>+</span><div class="zoom-label">Zoom In</div>';const e=document.createElement("button");e.className="zoom-button",e.innerHTML='<span>-</span><div class="zoom-label">Zoom Out</div>',t.onclick=()=>this.map.zoomIn(),e.onclick=()=>this.map.zoomOut();const n=document.createElement("div");n.className="mapboxgl-ctrl mapboxgl-ctrl-group",n.appendChild(t),n.appendChild(e),this.map.addControl({onAdd:()=>n,onRemove:()=>{n.parentNode.removeChild(n)}},"top-right")},resetMap(){this.map.flyTo({center:[144.9631,-37.8136],zoom:12})}}},wPe={id:"app"},xPe=mt("h1",null,"Map View",-1),CPe=mt("div",{id:"search-container"},[mt("div",{id:"search"})],-1),EPe={id:"map-container"},BPe=mt("div",{id:"map"},null,-1),SPe={key:0,class:"loader"};function TPe(t,e,n,r,o,l){return ve(),et("div",wPe,[xPe,CPe,mt("div",EPe,[BPe,mt("button",{id:"reset-btn",onClick:e[0]||(e[0]=(...h)=>l.resetMap&&l.resetMap(...h))},"Reset Map")]),o.isLoading?(ve(),et("div",SPe)):Sn("",!0)])}const IPe=_f(bPe,[["render",TPe]]),PPe=[{path:"/",name:"Home",component:M1e},{path:"/Map",name:"Map",component:IPe},{path:"/adminpage",name:"adminpage",component:n5e},{path:"/SendEmail",name:"SendEmail",component:MIe},{path:"/FireLogin",name:"FireLogin",component:T2e},{path:"/FireRegister",name:"FireRegister",component:$2e},{path:"/about",name:"About",component:Ube},{path:"/personal-info",name:"PersonalInfo",component:Vbe,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:$1e},{path:"/access-denied",name:"AccessDenied",component:nbe},{path:"/register",name:"register",component:Lbe},{path:"/care-tips-and-advice",name:"CareTipsAndAdvice",component:y2e},{path:"/admin",name:"Admin",component:X1e}],R$=A1e({history:Qve(),routes:PPe});R$.beforeEach((t,e,n)=>{const r=localStorage.getItem("isAuthenticated")==="true",o=localStorage.getItem("userRole");t.matched.some(l=>l.meta.requiresAuth)?r?t.matched.some(l=>l.meta.requiredRole)&&t.meta.requiredRole!==o?n("/access-denied"):n():n("/access-denied"):t.matched.some(l=>l.meta.requiresGuest)&&r?n("/"):n()});var LPe="firebase",FPe="10.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$p(LPe,FPe,"app");const RPe={apiKey:"AIzaSyCCblmSIlQW7CNaC7TqhgfYTGwYyUg_dI4",authDomain:"fit5032-a3-b7772.firebaseapp.com",projectId:"fit5032-a3-b7772",storageBucket:"fit5032-a3-b7772.appspot.com",messagingSenderId:"1050814265586",appId:"1:1050814265586:web:636e689686a7278ada386b"},kPe=RV(RPe);Y_(kPe);const i0=QX(I1e);i0.use(R$);i0.use(wae);i0.use(Ele);i0.component("DataTable",CV);i0.component("Column",gAe);i0.mount("#app");export{ss as _,dd as c,Wj as g};
